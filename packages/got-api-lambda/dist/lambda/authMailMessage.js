"use strict";var Eb=Object.create;var ms=Object.defineProperty;var Mb=Object.getOwnPropertyDescriptor;var Sb=Object.getOwnPropertyNames;var Ab=Object.getPrototypeOf,Tb=Object.prototype.hasOwnProperty;var R=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Rb=(t,e)=>{for(var i in e)ms(t,i,{get:e[i],enumerable:!0})},jp=(t,e,i,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Sb(e))!Tb.call(t,n)&&n!==i&&ms(t,n,{get:()=>e[n],enumerable:!(r=Mb(e,n))||r.enumerable});return t};var ca=(t,e,i)=>(i=t!=null?Eb(Ab(t)):{},jp(e||!t||!t.__esModule?ms(i,"default",{value:t,enumerable:!0}):i,t)),Cb=t=>jp(ms({},"__esModule",{value:!0}),t);var Up=R((Q2,Bp)=>{"use strict";var Fp=require("url"),Hp=1800,Zl=class{constructor(e){this.options=e||{},this.cookies=[]}set(e,i){let r=Fp.parse(i||""),n=this.parse(e),a;return n.domain?(a=n.domain.replace(/^\./,""),(r.hostname.length<a.length||("."+r.hostname).substr(-a.length+1)!=="."+a)&&(n.domain=r.hostname)):n.domain=r.hostname,n.path||(n.path=this.getPath(r.pathname)),n.expires||(n.expires=new Date(Date.now()+(Number(this.options.sessionTimeout||Hp)||Hp)*1e3)),this.add(n)}get(e){return this.list(e).map(i=>i.name+"="+i.value).join("; ")}list(e){let i=[],r,n;for(r=this.cookies.length-1;r>=0;r--){if(n=this.cookies[r],this.isExpired(n)){this.cookies.splice(r,r);continue}this.match(n,e)&&i.unshift(n)}return i}parse(e){let i={};return(e||"").toString().split(";").forEach(r=>{let n=r.split("="),a=n.shift().trim().toLowerCase(),s=n.join("=").trim(),l;if(a)switch(a){case"expires":s=new Date(s),s.toString()!=="Invalid Date"&&(i.expires=s);break;case"path":i.path=s;break;case"domain":l=s.toLowerCase(),l.length&&l.charAt(0)!=="."&&(l="."+l),i.domain=l;break;case"max-age":i.expires=new Date(Date.now()+(Number(s)||0)*1e3);break;case"secure":i.secure=!0;break;case"httponly":i.httponly=!0;break;default:i.name||(i.name=a,i.value=s)}}),i}match(e,i){let r=Fp.parse(i||"");return!(r.hostname!==e.domain&&(e.domain.charAt(0)!=="."||("."+r.hostname).substr(-e.domain.length)!==e.domain)||this.getPath(r.pathname).substr(0,e.path.length)!==e.path||e.secure&&r.protocol!=="https:")}add(e){let i,r;if(!e||!e.name)return!1;for(i=0,r=this.cookies.length;i<r;i++)if(this.compare(this.cookies[i],e))return this.isExpired(e)?(this.cookies.splice(i,1),!1):(this.cookies[i]=e,!0);return this.isExpired(e)||this.cookies.push(e),!0}compare(e,i){return e.name===i.name&&e.path===i.path&&e.domain===i.domain&&e.secure===i.secure&&e.httponly===e.httponly}isExpired(e){return e.expires&&e.expires<new Date||!e.value}getPath(e){let i=(e||"/").split("/");return i.pop(),i=i.join("/").trim(),i.charAt(0)!=="/"&&(i="/"+i),i.substr(-1)!=="/"&&(i+="/"),i}};Bp.exports=Zl});var Gt=R((X2,Ob)=>{Ob.exports={name:"nodemailer",version:"6.9.14",description:"Easy as cake e-mail sending from your Node.js applications",main:"lib/nodemailer.js",scripts:{test:"node --test --test-concurrency=1 test/**/*.test.js test/**/*-test.js","test:coverage":"c8 node --test --test-concurrency=1 test/**/*.test.js test/**/*-test.js",lint:"eslint .",update:"rm -rf node_modules/ package-lock.json && ncu -u && npm install"},repository:{type:"git",url:"https://github.com/nodemailer/nodemailer.git"},keywords:["Nodemailer"],author:"Andris Reinman",license:"MIT-0",bugs:{url:"https://github.com/nodemailer/nodemailer/issues"},homepage:"https://nodemailer.com/",devDependencies:{"@aws-sdk/client-ses":"3.600.0",bunyan:"1.8.15",c8:"10.1.2",eslint:"8.57.0","eslint-config-nodemailer":"1.2.0","eslint-config-prettier":"9.1.0",libbase64:"1.3.0",libmime:"5.3.5",libqp:"2.1.0","nodemailer-ntlm-auth":"1.0.4",proxy:"1.0.2","proxy-test-server":"1.0.0","smtp-server":"3.13.4"},engines:{node:">=6.0.0"}}});var ua=R((J2,Ql)=>{"use strict";var Db=require("http"),Pb=require("https"),Gp=require("url"),Ib=require("zlib"),Lb=require("stream").PassThrough,zp=Up(),Nb=Gt(),kb=require("net"),qb=5;Ql.exports=function(t,e){return Vp(t,e)};Ql.exports.Cookies=zp;function Vp(t,e){e=e||{},e.fetchRes=e.fetchRes||new Lb,e.cookies=e.cookies||new zp,e.redirects=e.redirects||0,e.maxRedirects=isNaN(e.maxRedirects)?qb:e.maxRedirects,e.cookie&&([].concat(e.cookie||[]).forEach(M=>{e.cookies.set(M,t)}),e.cookie=!1);let i=e.fetchRes,r=Gp.parse(t),n=(e.method||"").toString().trim().toUpperCase()||"GET",a=!1,s,l,p=r.protocol==="https:"?Pb:Db,y={"accept-encoding":"gzip,deflate","user-agent":"nodemailer/"+Nb.version};if(Object.keys(e.headers||{}).forEach(M=>{y[M.toLowerCase().trim()]=e.headers[M]}),e.userAgent&&(y["user-agent"]=e.userAgent),r.auth&&(y.Authorization="Basic "+Buffer.from(r.auth).toString("base64")),(s=e.cookies.get(t))&&(y.cookie=s),e.body){if(e.contentType!==!1&&(y["Content-Type"]=e.contentType||"application/x-www-form-urlencoded"),typeof e.body.pipe=="function")y["Transfer-Encoding"]="chunked",l=e.body,l.on("error",M=>{a||(a=!0,M.type="FETCH",M.sourceUrl=t,i.emit("error",M))});else{if(e.body instanceof Buffer)l=e.body;else if(typeof e.body=="object")try{l=Buffer.from(Object.keys(e.body).map(M=>{let C=e.body[M].toString().trim();return encodeURIComponent(M)+"="+encodeURIComponent(C)}).join("&"))}catch(M){if(a)return;a=!0,M.type="FETCH",M.sourceUrl=t,i.emit("error",M);return}else l=Buffer.from(e.body.toString().trim());y["Content-Type"]=e.contentType||"application/x-www-form-urlencoded",y["Content-Length"]=l.length}n=(e.method||"").toString().trim().toUpperCase()||"POST"}let x,S={method:n,host:r.hostname,path:r.path,port:r.port?r.port:r.protocol==="https:"?443:80,headers:y,rejectUnauthorized:!1,agent:!1};e.tls&&Object.keys(e.tls).forEach(M=>{S[M]=e.tls[M]}),r.protocol==="https:"&&r.hostname&&r.hostname!==S.host&&!kb.isIP(r.hostname)&&!S.servername&&(S.servername=r.hostname);try{x=p.request(S)}catch(M){return a=!0,setImmediate(()=>{M.type="FETCH",M.sourceUrl=t,i.emit("error",M)}),i}return e.timeout&&x.setTimeout(e.timeout,()=>{if(a)return;a=!0,x.abort();let M=new Error("Request Timeout");M.type="FETCH",M.sourceUrl=t,i.emit("error",M)}),x.on("error",M=>{a||(a=!0,M.type="FETCH",M.sourceUrl=t,i.emit("error",M))}),x.on("response",M=>{let C;if(!a){switch(M.headers["content-encoding"]){case"gzip":case"deflate":C=Ib.createUnzip();break}if(M.headers["set-cookie"]&&[].concat(M.headers["set-cookie"]||[]).forEach(T=>{e.cookies.set(T,t)}),[301,302,303,307,308].includes(M.statusCode)&&M.headers.location){if(e.redirects++,e.redirects>e.maxRedirects){a=!0;let T=new Error("Maximum redirect count exceeded");T.type="FETCH",T.sourceUrl=t,i.emit("error",T),x.abort();return}return e.method="GET",e.body=!1,Vp(Gp.resolve(t,M.headers.location),e)}if(i.statusCode=M.statusCode,i.headers=M.headers,M.statusCode>=300&&!e.allowErrorResponse){a=!0;let T=new Error("Invalid status code "+M.statusCode);T.type="FETCH",T.sourceUrl=t,i.emit("error",T),x.abort();return}M.on("error",T=>{a||(a=!0,T.type="FETCH",T.sourceUrl=t,i.emit("error",T),x.abort())}),C?(M.pipe(C).pipe(i),C.on("error",T=>{a||(a=!0,T.type="FETCH",T.sourceUrl=t,i.emit("error",T),x.abort())})):M.pipe(i)}}),setImmediate(()=>{if(l)try{if(typeof l.pipe=="function")return l.pipe(x);x.write(l)}catch(M){a=!0,M.type="FETCH",M.sourceUrl=t,i.emit("error",M);return}x.end()}),i}});var ct=R((eP,lt)=>{"use strict";var Kb=require("url"),jb=require("util"),Fb=require("fs"),Hb=ua(),Jt=require("dns"),Bb=require("net"),Ub=require("os"),Xl=5*60*1e3,Yp;try{Yp=Ub.networkInterfaces()}catch{}lt.exports.networkInterfaces=Yp;var $p=(t,e)=>{let i=lt.exports.networkInterfaces;return i?Object.keys(i).map(n=>i[n]).reduce((n,a)=>n.concat(a),[]).filter(n=>!n.internal||e).filter(n=>n.family==="IPv"+t||n.family===t).length>0:!0},Wp=(t,e,i,r)=>{if(i=i||{},!$p(t,i.allowInternalNetworkInterfaces))return r(null,[]);(Jt.Resolver?new Jt.Resolver(i):Jt)["resolve"+t](e,(s,l)=>{if(s){switch(s.code){case Jt.NODATA:case Jt.NOTFOUND:case Jt.NOTIMP:case Jt.SERVFAIL:case Jt.CONNREFUSED:case Jt.REFUSED:case"EAI_AGAIN":return r(null,[])}return r(s)}return r(null,Array.isArray(l)?l:[].concat(l||[]))})},fa=lt.exports.dnsCache=new Map,Xt=(t,e)=>t?Object.assign({servername:t.servername,host:!t.addresses||!t.addresses.length?null:t.addresses.length===1?t.addresses[0]:t.addresses[Math.floor(Math.random()*t.addresses.length)]},e||{}):Object.assign({},e||{});lt.exports.resolveHostname=(t,e)=>{if(t=t||{},!t.host&&t.servername&&(t.host=t.servername),!t.host||Bb.isIP(t.host)){let r={addresses:[t.host],servername:t.servername||!1};return e(null,Xt(r,{cached:!1}))}let i;if(fa.has(t.host)&&(i=fa.get(t.host),!i.expires||i.expires>=Date.now()))return e(null,Xt(i.value,{cached:!0}));Wp(4,t.host,t,(r,n)=>{if(r)return i?e(null,Xt(i.value,{cached:!0,error:r})):e(r);if(n&&n.length){let a={addresses:n,servername:t.servername||t.host};return fa.set(t.host,{value:a,expires:Date.now()+(t.dnsTtl||Xl)}),e(null,Xt(a,{cached:!1}))}Wp(6,t.host,t,(a,s)=>{if(a)return i?e(null,Xt(i.value,{cached:!0,error:a})):e(a);if(s&&s.length){let l={addresses:s,servername:t.servername||t.host};return fa.set(t.host,{value:l,expires:Date.now()+(t.dnsTtl||Xl)}),e(null,Xt(l,{cached:!1}))}try{Jt.lookup(t.host,{all:!0},(l,p)=>{if(l)return i?e(null,Xt(i.value,{cached:!0,error:l})):e(l);let y=p?p.filter(S=>$p(S.family)).map(S=>S.address).shift():!1;if(p&&p.length&&!y&&console.warn(`Failed to resolve IPv${p[0].family} addresses with current network`),!y&&i)return e(null,Xt(i.value,{cached:!0}));let x={addresses:y?[y]:[t.host],servername:t.servername||t.host};return fa.set(t.host,{value:x,expires:Date.now()+(t.dnsTtl||Xl)}),e(null,Xt(x,{cached:!1}))})}catch(l){return i?e(null,Xt(i.value,{cached:!0,error:l})):e(l)}})})};lt.exports.parseConnectionUrl=t=>{t=t||"";let e={};return[Kb.parse(t,!0)].forEach(i=>{let r;switch(i.protocol){case"smtp:":e.secure=!1;break;case"smtps:":e.secure=!0;break;case"direct:":e.direct=!0;break}!isNaN(i.port)&&Number(i.port)&&(e.port=Number(i.port)),i.hostname&&(e.host=i.hostname),i.auth&&(r=i.auth.split(":"),e.auth||(e.auth={}),e.auth.user=r.shift(),e.auth.pass=r.join(":")),Object.keys(i.query||{}).forEach(n=>{let a=e,s=n,l=i.query[n];switch(isNaN(l)||(l=Number(l)),l){case"true":l=!0;break;case"false":l=!1;break}if(n.indexOf("tls.")===0)s=n.substr(4),e.tls||(e.tls={}),a=e.tls;else if(n.indexOf(".")>=0)return;s in a||(a[s]=l)})}),e};lt.exports._logFunc=(t,e,i,r,n,...a)=>{let s={};Object.keys(i||{}).forEach(l=>{l!=="level"&&(s[l]=i[l])}),Object.keys(r||{}).forEach(l=>{l!=="level"&&(s[l]=r[l])}),t[e](s,n,...a)};lt.exports.getLogger=(t,e)=>{t=t||{};let i={},r=["trace","debug","info","warn","error","fatal"];if(!t.logger)return r.forEach(a=>{i[a]=()=>!1}),i;let n=t.logger;return t.logger===!0&&(n=Gb(r)),r.forEach(a=>{i[a]=(s,l,...p)=>{lt.exports._logFunc(n,a,e,s,l,...p)}}),i};lt.exports.callbackPromise=(t,e)=>function(){let i=Array.from(arguments),r=i.shift();r?e(r):t(...i)};lt.exports.parseDataURI=t=>{let e=t,i=e.indexOf(",");if(!i)return t;let r=e.substring(i+1),n=e.substring(5,i),a,s=n.split(";"),l=s.length>1?s[s.length-1]:!1;l&&l.indexOf("=")<0&&(a=l.toLowerCase(),s.pop());let p=s.shift()||"application/octet-stream",y={};for(let x of s){let S=x.indexOf("=");if(S>=0){let M=x.substring(0,S),C=x.substring(S+1);y[M]=C}}switch(a){case"base64":r=Buffer.from(r,"base64");break;case"utf8":r=Buffer.from(r);break;default:try{r=Buffer.from(decodeURIComponent(r))}catch{r=Buffer.from(r)}r=Buffer.from(r)}return{data:r,encoding:a,contentType:p,params:y}};lt.exports.resolveContent=(t,e,i)=>{let r;i||(r=new Promise((l,p)=>{i=lt.exports.callbackPromise(l,p)}));let n=t&&t[e]&&t[e].content||t[e],a,s=(typeof t[e]=="object"&&t[e].encoding||"utf8").toString().toLowerCase().replace(/[-_\s]/g,"");if(!n)return i(null,n);if(typeof n=="object"){if(typeof n.pipe=="function")return Jl(n,(l,p)=>{if(l)return i(l);t[e].content?t[e].content=p:t[e]=p,i(null,p)});if(/^https?:\/\//i.test(n.path||n.href))return a=Hb(n.path||n.href),Jl(a,i);if(/^data:/i.test(n.path||n.href)){let l=lt.exports.parseDataURI(n.path||n.href);return!l||!l.data?i(null,Buffer.from(0)):i(null,l.data)}else if(n.path)return Jl(Fb.createReadStream(n.path),i)}return typeof t[e].content=="string"&&!["utf8","usascii","ascii"].includes(s)&&(n=Buffer.from(t[e].content,s)),setImmediate(()=>i(null,n)),r};lt.exports.assign=function(){let t=Array.from(arguments),e=t.shift()||{};return t.forEach(i=>{Object.keys(i||{}).forEach(r=>{["tls","auth"].includes(r)&&i[r]&&typeof i[r]=="object"?(e[r]||(e[r]={}),Object.keys(i[r]).forEach(n=>{e[r][n]=i[r][n]})):e[r]=i[r]})}),e};lt.exports.encodeXText=t=>{if(!/[^\x21-\x2A\x2C-\x3C\x3E-\x7E]/.test(t))return t;let e=Buffer.from(t),i="";for(let r=0,n=e.length;r<n;r++){let a=e[r];a<33||a>126||a===43||a===61?i+="+"+(a<16?"0":"")+a.toString(16).toUpperCase():i+=String.fromCharCode(a)}return i};function Jl(t,e){let i=!1,r=[],n=0;t.on("error",a=>{i||(i=!0,e(a))}),t.on("readable",()=>{let a;for(;(a=t.read())!==null;)r.push(a),n+=a.length}),t.on("end",()=>{if(i)return;i=!0;let a;try{a=Buffer.concat(r,n)}catch(s){return e(s)}e(null,a)})}function Gb(t){let e=0,i=new Map;t.forEach(a=>{a.length>e&&(e=a.length)}),t.forEach(a=>{let s=a.toUpperCase();s.length<e&&(s+=" ".repeat(e-s.length)),i.set(a,s)});let r=(a,s,l,...p)=>{let y="";s&&(s.tnx==="server"?y="S: ":s.tnx==="client"&&(y="C: "),s.sid&&(y="["+s.sid+"] "+y),s.cid&&(y="[#"+s.cid+"] "+y)),l=jb.format(l,...p),l.split(/\r?\n/).forEach(x=>{console.log("[%s] %s %s",new Date().toISOString().substr(0,19).replace(/T/," "),i.get(a),y+x)})},n={};return t.forEach(a=>{n[a]=r.bind(null,a)}),n}});var ec=R((tP,Jp)=>{"use strict";var zb=require("path"),Zp="application/octet-stream",Vb="bin",Qp=new Map([["application/acad","dwg"],["application/applixware","aw"],["application/arj","arj"],["application/atom+xml","xml"],["application/atomcat+xml","atomcat"],["application/atomsvc+xml","atomsvc"],["application/base64",["mm","mme"]],["application/binhex","hqx"],["application/binhex4","hqx"],["application/book",["book","boo"]],["application/ccxml+xml,","ccxml"],["application/cdf","cdf"],["application/cdmi-capability","cdmia"],["application/cdmi-container","cdmic"],["application/cdmi-domain","cdmid"],["application/cdmi-object","cdmio"],["application/cdmi-queue","cdmiq"],["application/clariscad","ccad"],["application/commonground","dp"],["application/cu-seeme","cu"],["application/davmount+xml","davmount"],["application/drafting","drw"],["application/dsptype","tsp"],["application/dssc+der","dssc"],["application/dssc+xml","xdssc"],["application/dxf","dxf"],["application/ecmascript",["js","es"]],["application/emma+xml","emma"],["application/envoy","evy"],["application/epub+zip","epub"],["application/excel",["xls","xl","xla","xlb","xlc","xld","xlk","xll","xlm","xlt","xlv","xlw"]],["application/exi","exi"],["application/font-tdpfr","pfr"],["application/fractals","fif"],["application/freeloader","frl"],["application/futuresplash","spl"],["application/gnutar","tgz"],["application/groupwise","vew"],["application/hlp","hlp"],["application/hta","hta"],["application/hyperstudio","stk"],["application/i-deas","unv"],["application/iges",["iges","igs"]],["application/inf","inf"],["application/internet-property-stream","acx"],["application/ipfix","ipfix"],["application/java","class"],["application/java-archive","jar"],["application/java-byte-code","class"],["application/java-serialized-object","ser"],["application/java-vm","class"],["application/javascript","js"],["application/json","json"],["application/lha","lha"],["application/lzx","lzx"],["application/mac-binary","bin"],["application/mac-binhex","hqx"],["application/mac-binhex40","hqx"],["application/mac-compactpro","cpt"],["application/macbinary","bin"],["application/mads+xml","mads"],["application/marc","mrc"],["application/marcxml+xml","mrcx"],["application/mathematica","ma"],["application/mathml+xml","mathml"],["application/mbedlet","mbd"],["application/mbox","mbox"],["application/mcad","mcd"],["application/mediaservercontrol+xml","mscml"],["application/metalink4+xml","meta4"],["application/mets+xml","mets"],["application/mime","aps"],["application/mods+xml","mods"],["application/mp21","m21"],["application/mp4","mp4"],["application/mspowerpoint",["ppt","pot","pps","ppz"]],["application/msword",["doc","dot","w6w","wiz","word"]],["application/mswrite","wri"],["application/mxf","mxf"],["application/netmc","mcp"],["application/octet-stream",["*"]],["application/oda","oda"],["application/oebps-package+xml","opf"],["application/ogg","ogx"],["application/olescript","axs"],["application/onenote","onetoc"],["application/patch-ops-error+xml","xer"],["application/pdf","pdf"],["application/pgp-encrypted","asc"],["application/pgp-signature","pgp"],["application/pics-rules","prf"],["application/pkcs-12","p12"],["application/pkcs-crl","crl"],["application/pkcs10","p10"],["application/pkcs7-mime",["p7c","p7m"]],["application/pkcs7-signature","p7s"],["application/pkcs8","p8"],["application/pkix-attr-cert","ac"],["application/pkix-cert",["cer","crt"]],["application/pkix-crl","crl"],["application/pkix-pkipath","pkipath"],["application/pkixcmp","pki"],["application/plain","text"],["application/pls+xml","pls"],["application/postscript",["ps","ai","eps"]],["application/powerpoint","ppt"],["application/pro_eng",["part","prt"]],["application/prs.cww","cww"],["application/pskc+xml","pskcxml"],["application/rdf+xml","rdf"],["application/reginfo+xml","rif"],["application/relax-ng-compact-syntax","rnc"],["application/resource-lists+xml","rl"],["application/resource-lists-diff+xml","rld"],["application/ringing-tones","rng"],["application/rls-services+xml","rs"],["application/rsd+xml","rsd"],["application/rss+xml","xml"],["application/rtf",["rtf","rtx"]],["application/sbml+xml","sbml"],["application/scvp-cv-request","scq"],["application/scvp-cv-response","scs"],["application/scvp-vp-request","spq"],["application/scvp-vp-response","spp"],["application/sdp","sdp"],["application/sea","sea"],["application/set","set"],["application/set-payment-initiation","setpay"],["application/set-registration-initiation","setreg"],["application/shf+xml","shf"],["application/sla","stl"],["application/smil",["smi","smil"]],["application/smil+xml","smi"],["application/solids","sol"],["application/sounder","sdr"],["application/sparql-query","rq"],["application/sparql-results+xml","srx"],["application/srgs","gram"],["application/srgs+xml","grxml"],["application/sru+xml","sru"],["application/ssml+xml","ssml"],["application/step",["step","stp"]],["application/streamingmedia","ssm"],["application/tei+xml","tei"],["application/thraud+xml","tfi"],["application/timestamped-data","tsd"],["application/toolbook","tbk"],["application/vda","vda"],["application/vnd.3gpp.pic-bw-large","plb"],["application/vnd.3gpp.pic-bw-small","psb"],["application/vnd.3gpp.pic-bw-var","pvb"],["application/vnd.3gpp2.tcap","tcap"],["application/vnd.3m.post-it-notes","pwn"],["application/vnd.accpac.simply.aso","aso"],["application/vnd.accpac.simply.imp","imp"],["application/vnd.acucobol","acu"],["application/vnd.acucorp","atc"],["application/vnd.adobe.air-application-installer-package+zip","air"],["application/vnd.adobe.fxp","fxp"],["application/vnd.adobe.xdp+xml","xdp"],["application/vnd.adobe.xfdf","xfdf"],["application/vnd.ahead.space","ahead"],["application/vnd.airzip.filesecure.azf","azf"],["application/vnd.airzip.filesecure.azs","azs"],["application/vnd.amazon.ebook","azw"],["application/vnd.americandynamics.acc","acc"],["application/vnd.amiga.ami","ami"],["application/vnd.android.package-archive","apk"],["application/vnd.anser-web-certificate-issue-initiation","cii"],["application/vnd.anser-web-funds-transfer-initiation","fti"],["application/vnd.antix.game-component","atx"],["application/vnd.apple.installer+xml","mpkg"],["application/vnd.apple.mpegurl","m3u8"],["application/vnd.aristanetworks.swi","swi"],["application/vnd.audiograph","aep"],["application/vnd.blueice.multipass","mpm"],["application/vnd.bmi","bmi"],["application/vnd.businessobjects","rep"],["application/vnd.chemdraw+xml","cdxml"],["application/vnd.chipnuts.karaoke-mmd","mmd"],["application/vnd.cinderella","cdy"],["application/vnd.claymore","cla"],["application/vnd.cloanto.rp9","rp9"],["application/vnd.clonk.c4group","c4g"],["application/vnd.cluetrust.cartomobile-config","c11amc"],["application/vnd.cluetrust.cartomobile-config-pkg","c11amz"],["application/vnd.commonspace","csp"],["application/vnd.contact.cmsg","cdbcmsg"],["application/vnd.cosmocaller","cmc"],["application/vnd.crick.clicker","clkx"],["application/vnd.crick.clicker.keyboard","clkk"],["application/vnd.crick.clicker.palette","clkp"],["application/vnd.crick.clicker.template","clkt"],["application/vnd.crick.clicker.wordbank","clkw"],["application/vnd.criticaltools.wbs+xml","wbs"],["application/vnd.ctc-posml","pml"],["application/vnd.cups-ppd","ppd"],["application/vnd.curl.car","car"],["application/vnd.curl.pcurl","pcurl"],["application/vnd.data-vision.rdz","rdz"],["application/vnd.denovo.fcselayout-link","fe_launch"],["application/vnd.dna","dna"],["application/vnd.dolby.mlp","mlp"],["application/vnd.dpgraph","dpg"],["application/vnd.dreamfactory","dfac"],["application/vnd.dvb.ait","ait"],["application/vnd.dvb.service","svc"],["application/vnd.dynageo","geo"],["application/vnd.ecowin.chart","mag"],["application/vnd.enliven","nml"],["application/vnd.epson.esf","esf"],["application/vnd.epson.msf","msf"],["application/vnd.epson.quickanime","qam"],["application/vnd.epson.salt","slt"],["application/vnd.epson.ssf","ssf"],["application/vnd.eszigno3+xml","es3"],["application/vnd.ezpix-album","ez2"],["application/vnd.ezpix-package","ez3"],["application/vnd.fdf","fdf"],["application/vnd.fdsn.seed","seed"],["application/vnd.flographit","gph"],["application/vnd.fluxtime.clip","ftc"],["application/vnd.framemaker","fm"],["application/vnd.frogans.fnc","fnc"],["application/vnd.frogans.ltf","ltf"],["application/vnd.fsc.weblaunch","fsc"],["application/vnd.fujitsu.oasys","oas"],["application/vnd.fujitsu.oasys2","oa2"],["application/vnd.fujitsu.oasys3","oa3"],["application/vnd.fujitsu.oasysgp","fg5"],["application/vnd.fujitsu.oasysprs","bh2"],["application/vnd.fujixerox.ddd","ddd"],["application/vnd.fujixerox.docuworks","xdw"],["application/vnd.fujixerox.docuworks.binder","xbd"],["application/vnd.fuzzysheet","fzs"],["application/vnd.genomatix.tuxedo","txd"],["application/vnd.geogebra.file","ggb"],["application/vnd.geogebra.tool","ggt"],["application/vnd.geometry-explorer","gex"],["application/vnd.geonext","gxt"],["application/vnd.geoplan","g2w"],["application/vnd.geospace","g3w"],["application/vnd.gmx","gmx"],["application/vnd.google-earth.kml+xml","kml"],["application/vnd.google-earth.kmz","kmz"],["application/vnd.grafeq","gqf"],["application/vnd.groove-account","gac"],["application/vnd.groove-help","ghf"],["application/vnd.groove-identity-message","gim"],["application/vnd.groove-injector","grv"],["application/vnd.groove-tool-message","gtm"],["application/vnd.groove-tool-template","tpl"],["application/vnd.groove-vcard","vcg"],["application/vnd.hal+xml","hal"],["application/vnd.handheld-entertainment+xml","zmm"],["application/vnd.hbci","hbci"],["application/vnd.hhe.lesson-player","les"],["application/vnd.hp-hpgl",["hgl","hpg","hpgl"]],["application/vnd.hp-hpid","hpid"],["application/vnd.hp-hps","hps"],["application/vnd.hp-jlyt","jlt"],["application/vnd.hp-pcl","pcl"],["application/vnd.hp-pclxl","pclxl"],["application/vnd.hydrostatix.sof-data","sfd-hdstx"],["application/vnd.hzn-3d-crossword","x3d"],["application/vnd.ibm.minipay","mpy"],["application/vnd.ibm.modcap","afp"],["application/vnd.ibm.rights-management","irm"],["application/vnd.ibm.secure-container","sc"],["application/vnd.iccprofile","icc"],["application/vnd.igloader","igl"],["application/vnd.immervision-ivp","ivp"],["application/vnd.immervision-ivu","ivu"],["application/vnd.insors.igm","igm"],["application/vnd.intercon.formnet","xpw"],["application/vnd.intergeo","i2g"],["application/vnd.intu.qbo","qbo"],["application/vnd.intu.qfx","qfx"],["application/vnd.ipunplugged.rcprofile","rcprofile"],["application/vnd.irepository.package+xml","irp"],["application/vnd.is-xpr","xpr"],["application/vnd.isac.fcs","fcs"],["application/vnd.jam","jam"],["application/vnd.jcp.javame.midlet-rms","rms"],["application/vnd.jisp","jisp"],["application/vnd.joost.joda-archive","joda"],["application/vnd.kahootz","ktz"],["application/vnd.kde.karbon","karbon"],["application/vnd.kde.kchart","chrt"],["application/vnd.kde.kformula","kfo"],["application/vnd.kde.kivio","flw"],["application/vnd.kde.kontour","kon"],["application/vnd.kde.kpresenter","kpr"],["application/vnd.kde.kspread","ksp"],["application/vnd.kde.kword","kwd"],["application/vnd.kenameaapp","htke"],["application/vnd.kidspiration","kia"],["application/vnd.kinar","kne"],["application/vnd.koan","skp"],["application/vnd.kodak-descriptor","sse"],["application/vnd.las.las+xml","lasxml"],["application/vnd.llamagraphics.life-balance.desktop","lbd"],["application/vnd.llamagraphics.life-balance.exchange+xml","lbe"],["application/vnd.lotus-1-2-3","123"],["application/vnd.lotus-approach","apr"],["application/vnd.lotus-freelance","pre"],["application/vnd.lotus-notes","nsf"],["application/vnd.lotus-organizer","org"],["application/vnd.lotus-screencam","scm"],["application/vnd.lotus-wordpro","lwp"],["application/vnd.macports.portpkg","portpkg"],["application/vnd.mcd","mcd"],["application/vnd.medcalcdata","mc1"],["application/vnd.mediastation.cdkey","cdkey"],["application/vnd.mfer","mwf"],["application/vnd.mfmp","mfm"],["application/vnd.micrografx.flo","flo"],["application/vnd.micrografx.igx","igx"],["application/vnd.mif","mif"],["application/vnd.mobius.daf","daf"],["application/vnd.mobius.dis","dis"],["application/vnd.mobius.mbk","mbk"],["application/vnd.mobius.mqy","mqy"],["application/vnd.mobius.msl","msl"],["application/vnd.mobius.plc","plc"],["application/vnd.mobius.txf","txf"],["application/vnd.mophun.application","mpn"],["application/vnd.mophun.certificate","mpc"],["application/vnd.mozilla.xul+xml","xul"],["application/vnd.ms-artgalry","cil"],["application/vnd.ms-cab-compressed","cab"],["application/vnd.ms-excel",["xls","xla","xlc","xlm","xlt","xlw","xlb","xll"]],["application/vnd.ms-excel.addin.macroenabled.12","xlam"],["application/vnd.ms-excel.sheet.binary.macroenabled.12","xlsb"],["application/vnd.ms-excel.sheet.macroenabled.12","xlsm"],["application/vnd.ms-excel.template.macroenabled.12","xltm"],["application/vnd.ms-fontobject","eot"],["application/vnd.ms-htmlhelp","chm"],["application/vnd.ms-ims","ims"],["application/vnd.ms-lrm","lrm"],["application/vnd.ms-officetheme","thmx"],["application/vnd.ms-outlook","msg"],["application/vnd.ms-pki.certstore","sst"],["application/vnd.ms-pki.pko","pko"],["application/vnd.ms-pki.seccat","cat"],["application/vnd.ms-pki.stl","stl"],["application/vnd.ms-pkicertstore","sst"],["application/vnd.ms-pkiseccat","cat"],["application/vnd.ms-pkistl","stl"],["application/vnd.ms-powerpoint",["ppt","pot","pps","ppa","pwz"]],["application/vnd.ms-powerpoint.addin.macroenabled.12","ppam"],["application/vnd.ms-powerpoint.presentation.macroenabled.12","pptm"],["application/vnd.ms-powerpoint.slide.macroenabled.12","sldm"],["application/vnd.ms-powerpoint.slideshow.macroenabled.12","ppsm"],["application/vnd.ms-powerpoint.template.macroenabled.12","potm"],["application/vnd.ms-project","mpp"],["application/vnd.ms-word.document.macroenabled.12","docm"],["application/vnd.ms-word.template.macroenabled.12","dotm"],["application/vnd.ms-works",["wks","wcm","wdb","wps"]],["application/vnd.ms-wpl","wpl"],["application/vnd.ms-xpsdocument","xps"],["application/vnd.mseq","mseq"],["application/vnd.musician","mus"],["application/vnd.muvee.style","msty"],["application/vnd.neurolanguage.nlu","nlu"],["application/vnd.noblenet-directory","nnd"],["application/vnd.noblenet-sealer","nns"],["application/vnd.noblenet-web","nnw"],["application/vnd.nokia.configuration-message","ncm"],["application/vnd.nokia.n-gage.data","ngdat"],["application/vnd.nokia.n-gage.symbian.install","n-gage"],["application/vnd.nokia.radio-preset","rpst"],["application/vnd.nokia.radio-presets","rpss"],["application/vnd.nokia.ringing-tone","rng"],["application/vnd.novadigm.edm","edm"],["application/vnd.novadigm.edx","edx"],["application/vnd.novadigm.ext","ext"],["application/vnd.oasis.opendocument.chart","odc"],["application/vnd.oasis.opendocument.chart-template","otc"],["application/vnd.oasis.opendocument.database","odb"],["application/vnd.oasis.opendocument.formula","odf"],["application/vnd.oasis.opendocument.formula-template","odft"],["application/vnd.oasis.opendocument.graphics","odg"],["application/vnd.oasis.opendocument.graphics-template","otg"],["application/vnd.oasis.opendocument.image","odi"],["application/vnd.oasis.opendocument.image-template","oti"],["application/vnd.oasis.opendocument.presentation","odp"],["application/vnd.oasis.opendocument.presentation-template","otp"],["application/vnd.oasis.opendocument.spreadsheet","ods"],["application/vnd.oasis.opendocument.spreadsheet-template","ots"],["application/vnd.oasis.opendocument.text","odt"],["application/vnd.oasis.opendocument.text-master","odm"],["application/vnd.oasis.opendocument.text-template","ott"],["application/vnd.oasis.opendocument.text-web","oth"],["application/vnd.olpc-sugar","xo"],["application/vnd.oma.dd2+xml","dd2"],["application/vnd.openofficeorg.extension","oxt"],["application/vnd.openxmlformats-officedocument.presentationml.presentation","pptx"],["application/vnd.openxmlformats-officedocument.presentationml.slide","sldx"],["application/vnd.openxmlformats-officedocument.presentationml.slideshow","ppsx"],["application/vnd.openxmlformats-officedocument.presentationml.template","potx"],["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","xlsx"],["application/vnd.openxmlformats-officedocument.spreadsheetml.template","xltx"],["application/vnd.openxmlformats-officedocument.wordprocessingml.document","docx"],["application/vnd.openxmlformats-officedocument.wordprocessingml.template","dotx"],["application/vnd.osgeo.mapguide.package","mgp"],["application/vnd.osgi.dp","dp"],["application/vnd.palm","pdb"],["application/vnd.pawaafile","paw"],["application/vnd.pg.format","str"],["application/vnd.pg.osasli","ei6"],["application/vnd.picsel","efif"],["application/vnd.pmi.widget","wg"],["application/vnd.pocketlearn","plf"],["application/vnd.powerbuilder6","pbd"],["application/vnd.previewsystems.box","box"],["application/vnd.proteus.magazine","mgz"],["application/vnd.publishare-delta-tree","qps"],["application/vnd.pvi.ptid1","ptid"],["application/vnd.quark.quarkxpress","qxd"],["application/vnd.realvnc.bed","bed"],["application/vnd.recordare.musicxml","mxl"],["application/vnd.recordare.musicxml+xml","musicxml"],["application/vnd.rig.cryptonote","cryptonote"],["application/vnd.rim.cod","cod"],["application/vnd.rn-realmedia","rm"],["application/vnd.rn-realplayer","rnx"],["application/vnd.route66.link66+xml","link66"],["application/vnd.sailingtracker.track","st"],["application/vnd.seemail","see"],["application/vnd.sema","sema"],["application/vnd.semd","semd"],["application/vnd.semf","semf"],["application/vnd.shana.informed.formdata","ifm"],["application/vnd.shana.informed.formtemplate","itp"],["application/vnd.shana.informed.interchange","iif"],["application/vnd.shana.informed.package","ipk"],["application/vnd.simtech-mindmapper","twd"],["application/vnd.smaf","mmf"],["application/vnd.smart.teacher","teacher"],["application/vnd.solent.sdkm+xml","sdkm"],["application/vnd.spotfire.dxp","dxp"],["application/vnd.spotfire.sfs","sfs"],["application/vnd.stardivision.calc","sdc"],["application/vnd.stardivision.draw","sda"],["application/vnd.stardivision.impress","sdd"],["application/vnd.stardivision.math","smf"],["application/vnd.stardivision.writer","sdw"],["application/vnd.stardivision.writer-global","sgl"],["application/vnd.stepmania.stepchart","sm"],["application/vnd.sun.xml.calc","sxc"],["application/vnd.sun.xml.calc.template","stc"],["application/vnd.sun.xml.draw","sxd"],["application/vnd.sun.xml.draw.template","std"],["application/vnd.sun.xml.impress","sxi"],["application/vnd.sun.xml.impress.template","sti"],["application/vnd.sun.xml.math","sxm"],["application/vnd.sun.xml.writer","sxw"],["application/vnd.sun.xml.writer.global","sxg"],["application/vnd.sun.xml.writer.template","stw"],["application/vnd.sus-calendar","sus"],["application/vnd.svd","svd"],["application/vnd.symbian.install","sis"],["application/vnd.syncml+xml","xsm"],["application/vnd.syncml.dm+wbxml","bdm"],["application/vnd.syncml.dm+xml","xdm"],["application/vnd.tao.intent-module-archive","tao"],["application/vnd.tmobile-livetv","tmo"],["application/vnd.trid.tpt","tpt"],["application/vnd.triscape.mxs","mxs"],["application/vnd.trueapp","tra"],["application/vnd.ufdl","ufd"],["application/vnd.uiq.theme","utz"],["application/vnd.umajin","umj"],["application/vnd.unity","unityweb"],["application/vnd.uoml+xml","uoml"],["application/vnd.vcx","vcx"],["application/vnd.visio","vsd"],["application/vnd.visionary","vis"],["application/vnd.vsf","vsf"],["application/vnd.wap.wbxml","wbxml"],["application/vnd.wap.wmlc","wmlc"],["application/vnd.wap.wmlscriptc","wmlsc"],["application/vnd.webturbo","wtb"],["application/vnd.wolfram.player","nbp"],["application/vnd.wordperfect","wpd"],["application/vnd.wqd","wqd"],["application/vnd.wt.stf","stf"],["application/vnd.xara",["web","xar"]],["application/vnd.xfdl","xfdl"],["application/vnd.yamaha.hv-dic","hvd"],["application/vnd.yamaha.hv-script","hvs"],["application/vnd.yamaha.hv-voice","hvp"],["application/vnd.yamaha.openscoreformat","osf"],["application/vnd.yamaha.openscoreformat.osfpvg+xml","osfpvg"],["application/vnd.yamaha.smaf-audio","saf"],["application/vnd.yamaha.smaf-phrase","spf"],["application/vnd.yellowriver-custom-menu","cmp"],["application/vnd.zul","zir"],["application/vnd.zzazz.deck+xml","zaz"],["application/vocaltec-media-desc","vmd"],["application/vocaltec-media-file","vmf"],["application/voicexml+xml","vxml"],["application/widget","wgt"],["application/winhlp","hlp"],["application/wordperfect",["wp","wp5","wp6","wpd"]],["application/wordperfect6.0",["w60","wp5"]],["application/wordperfect6.1","w61"],["application/wsdl+xml","wsdl"],["application/wspolicy+xml","wspolicy"],["application/x-123","wk1"],["application/x-7z-compressed","7z"],["application/x-abiword","abw"],["application/x-ace-compressed","ace"],["application/x-aim","aim"],["application/x-authorware-bin","aab"],["application/x-authorware-map","aam"],["application/x-authorware-seg","aas"],["application/x-bcpio","bcpio"],["application/x-binary","bin"],["application/x-binhex40","hqx"],["application/x-bittorrent","torrent"],["application/x-bsh",["bsh","sh","shar"]],["application/x-bytecode.elisp","elc"],["application/x-bytecode.python","pyc"],["application/x-bzip","bz"],["application/x-bzip2",["boz","bz2"]],["application/x-cdf","cdf"],["application/x-cdlink","vcd"],["application/x-chat",["cha","chat"]],["application/x-chess-pgn","pgn"],["application/x-cmu-raster","ras"],["application/x-cocoa","cco"],["application/x-compactpro","cpt"],["application/x-compress","z"],["application/x-compressed",["tgz","gz","z","zip"]],["application/x-conference","nsc"],["application/x-cpio","cpio"],["application/x-cpt","cpt"],["application/x-csh","csh"],["application/x-debian-package","deb"],["application/x-deepv","deepv"],["application/x-director",["dir","dcr","dxr"]],["application/x-doom","wad"],["application/x-dtbncx+xml","ncx"],["application/x-dtbook+xml","dtb"],["application/x-dtbresource+xml","res"],["application/x-dvi","dvi"],["application/x-elc","elc"],["application/x-envoy",["env","evy"]],["application/x-esrehber","es"],["application/x-excel",["xls","xla","xlb","xlc","xld","xlk","xll","xlm","xlt","xlv","xlw"]],["application/x-font-bdf","bdf"],["application/x-font-ghostscript","gsf"],["application/x-font-linux-psf","psf"],["application/x-font-otf","otf"],["application/x-font-pcf","pcf"],["application/x-font-snf","snf"],["application/x-font-ttf","ttf"],["application/x-font-type1","pfa"],["application/x-font-woff","woff"],["application/x-frame","mif"],["application/x-freelance","pre"],["application/x-futuresplash","spl"],["application/x-gnumeric","gnumeric"],["application/x-gsp","gsp"],["application/x-gss","gss"],["application/x-gtar","gtar"],["application/x-gzip",["gz","gzip"]],["application/x-hdf","hdf"],["application/x-helpfile",["help","hlp"]],["application/x-httpd-imap","imap"],["application/x-ima","ima"],["application/x-internet-signup",["ins","isp"]],["application/x-internett-signup","ins"],["application/x-inventor","iv"],["application/x-ip2","ip"],["application/x-iphone","iii"],["application/x-java-class","class"],["application/x-java-commerce","jcm"],["application/x-java-jnlp-file","jnlp"],["application/x-javascript","js"],["application/x-koan",["skd","skm","skp","skt"]],["application/x-ksh","ksh"],["application/x-latex",["latex","ltx"]],["application/x-lha","lha"],["application/x-lisp","lsp"],["application/x-livescreen","ivy"],["application/x-lotus","wq1"],["application/x-lotusscreencam","scm"],["application/x-lzh","lzh"],["application/x-lzx","lzx"],["application/x-mac-binhex40","hqx"],["application/x-macbinary","bin"],["application/x-magic-cap-package-1.0","mc$"],["application/x-mathcad","mcd"],["application/x-meme","mm"],["application/x-midi",["mid","midi"]],["application/x-mif","mif"],["application/x-mix-transfer","nix"],["application/x-mobipocket-ebook","prc"],["application/x-mplayer2","asx"],["application/x-ms-application","application"],["application/x-ms-wmd","wmd"],["application/x-ms-wmz","wmz"],["application/x-ms-xbap","xbap"],["application/x-msaccess","mdb"],["application/x-msbinder","obd"],["application/x-mscardfile","crd"],["application/x-msclip","clp"],["application/x-msdownload",["exe","dll"]],["application/x-msexcel",["xls","xla","xlw"]],["application/x-msmediaview",["mvb","m13","m14"]],["application/x-msmetafile","wmf"],["application/x-msmoney","mny"],["application/x-mspowerpoint","ppt"],["application/x-mspublisher","pub"],["application/x-msschedule","scd"],["application/x-msterminal","trm"],["application/x-mswrite","wri"],["application/x-navi-animation","ani"],["application/x-navidoc","nvd"],["application/x-navimap","map"],["application/x-navistyle","stl"],["application/x-netcdf",["cdf","nc"]],["application/x-newton-compatible-pkg","pkg"],["application/x-nokia-9000-communicator-add-on-software","aos"],["application/x-omc","omc"],["application/x-omcdatamaker","omcd"],["application/x-omcregerator","omcr"],["application/x-pagemaker",["pm4","pm5"]],["application/x-pcl","pcl"],["application/x-perfmon",["pma","pmc","pml","pmr","pmw"]],["application/x-pixclscript","plx"],["application/x-pkcs10","p10"],["application/x-pkcs12",["p12","pfx"]],["application/x-pkcs7-certificates",["p7b","spc"]],["application/x-pkcs7-certreqresp","p7r"],["application/x-pkcs7-mime",["p7m","p7c"]],["application/x-pkcs7-signature",["p7s","p7a"]],["application/x-pointplus","css"],["application/x-portable-anymap","pnm"],["application/x-project",["mpc","mpt","mpv","mpx"]],["application/x-qpro","wb1"],["application/x-rar-compressed","rar"],["application/x-rtf","rtf"],["application/x-sdp","sdp"],["application/x-sea","sea"],["application/x-seelogo","sl"],["application/x-sh","sh"],["application/x-shar",["shar","sh"]],["application/x-shockwave-flash","swf"],["application/x-silverlight-app","xap"],["application/x-sit","sit"],["application/x-sprite",["spr","sprite"]],["application/x-stuffit","sit"],["application/x-stuffitx","sitx"],["application/x-sv4cpio","sv4cpio"],["application/x-sv4crc","sv4crc"],["application/x-tar","tar"],["application/x-tbook",["sbk","tbk"]],["application/x-tcl","tcl"],["application/x-tex","tex"],["application/x-tex-tfm","tfm"],["application/x-texinfo",["texi","texinfo"]],["application/x-troff",["roff","t","tr"]],["application/x-troff-man","man"],["application/x-troff-me","me"],["application/x-troff-ms","ms"],["application/x-troff-msvideo","avi"],["application/x-ustar","ustar"],["application/x-visio",["vsd","vst","vsw"]],["application/x-vnd.audioexplosion.mzz","mzz"],["application/x-vnd.ls-xpix","xpix"],["application/x-vrml","vrml"],["application/x-wais-source",["src","wsrc"]],["application/x-winhelp","hlp"],["application/x-wintalk","wtk"],["application/x-world",["wrl","svr"]],["application/x-wpwin","wpd"],["application/x-wri","wri"],["application/x-x509-ca-cert",["cer","crt","der"]],["application/x-x509-user-cert","crt"],["application/x-xfig","fig"],["application/x-xpinstall","xpi"],["application/x-zip-compressed","zip"],["application/xcap-diff+xml","xdf"],["application/xenc+xml","xenc"],["application/xhtml+xml","xhtml"],["application/xml","xml"],["application/xml-dtd","dtd"],["application/xop+xml","xop"],["application/xslt+xml","xslt"],["application/xspf+xml","xspf"],["application/xv+xml","mxml"],["application/yang","yang"],["application/yin+xml","yin"],["application/ynd.ms-pkipko","pko"],["application/zip","zip"],["audio/adpcm","adp"],["audio/aiff",["aiff","aif","aifc"]],["audio/basic",["snd","au"]],["audio/it","it"],["audio/make",["funk","my","pfunk"]],["audio/make.my.funk","pfunk"],["audio/mid",["mid","rmi"]],["audio/midi",["midi","kar","mid"]],["audio/mod","mod"],["audio/mp4","mp4a"],["audio/mpeg",["mpga","mp3","m2a","mp2","mpa","mpg"]],["audio/mpeg3","mp3"],["audio/nspaudio",["la","lma"]],["audio/ogg","oga"],["audio/s3m","s3m"],["audio/tsp-audio","tsi"],["audio/tsplayer","tsp"],["audio/vnd.dece.audio","uva"],["audio/vnd.digital-winds","eol"],["audio/vnd.dra","dra"],["audio/vnd.dts","dts"],["audio/vnd.dts.hd","dtshd"],["audio/vnd.lucent.voice","lvp"],["audio/vnd.ms-playready.media.pya","pya"],["audio/vnd.nuera.ecelp4800","ecelp4800"],["audio/vnd.nuera.ecelp7470","ecelp7470"],["audio/vnd.nuera.ecelp9600","ecelp9600"],["audio/vnd.qcelp","qcp"],["audio/vnd.rip","rip"],["audio/voc","voc"],["audio/voxware","vox"],["audio/wav","wav"],["audio/webm","weba"],["audio/x-aac","aac"],["audio/x-adpcm","snd"],["audio/x-aiff",["aiff","aif","aifc"]],["audio/x-au","au"],["audio/x-gsm",["gsd","gsm"]],["audio/x-jam","jam"],["audio/x-liveaudio","lam"],["audio/x-mid",["mid","midi"]],["audio/x-midi",["midi","mid"]],["audio/x-mod","mod"],["audio/x-mpeg","mp2"],["audio/x-mpeg-3","mp3"],["audio/x-mpegurl","m3u"],["audio/x-mpequrl","m3u"],["audio/x-ms-wax","wax"],["audio/x-ms-wma","wma"],["audio/x-nspaudio",["la","lma"]],["audio/x-pn-realaudio",["ra","ram","rm","rmm","rmp"]],["audio/x-pn-realaudio-plugin",["ra","rmp","rpm"]],["audio/x-psid","sid"],["audio/x-realaudio","ra"],["audio/x-twinvq","vqf"],["audio/x-twinvq-plugin",["vqe","vql"]],["audio/x-vnd.audioexplosion.mjuicemediafile","mjf"],["audio/x-voc","voc"],["audio/x-wav","wav"],["audio/xm","xm"],["chemical/x-cdx","cdx"],["chemical/x-cif","cif"],["chemical/x-cmdf","cmdf"],["chemical/x-cml","cml"],["chemical/x-csml","csml"],["chemical/x-pdb",["pdb","xyz"]],["chemical/x-xyz","xyz"],["drawing/x-dwf","dwf"],["i-world/i-vrml","ivr"],["image/bmp",["bmp","bm"]],["image/cgm","cgm"],["image/cis-cod","cod"],["image/cmu-raster",["ras","rast"]],["image/fif","fif"],["image/florian",["flo","turbot"]],["image/g3fax","g3"],["image/gif","gif"],["image/ief",["ief","iefs"]],["image/jpeg",["jpeg","jpe","jpg","jfif","jfif-tbnl"]],["image/jutvision","jut"],["image/ktx","ktx"],["image/naplps",["nap","naplps"]],["image/pict",["pic","pict"]],["image/pipeg","jfif"],["image/pjpeg",["jfif","jpe","jpeg","jpg"]],["image/png",["png","x-png"]],["image/prs.btif","btif"],["image/svg+xml","svg"],["image/tiff",["tif","tiff"]],["image/vasa","mcf"],["image/vnd.adobe.photoshop","psd"],["image/vnd.dece.graphic","uvi"],["image/vnd.djvu","djvu"],["image/vnd.dvb.subtitle","sub"],["image/vnd.dwg",["dwg","dxf","svf"]],["image/vnd.dxf","dxf"],["image/vnd.fastbidsheet","fbs"],["image/vnd.fpx","fpx"],["image/vnd.fst","fst"],["image/vnd.fujixerox.edmics-mmr","mmr"],["image/vnd.fujixerox.edmics-rlc","rlc"],["image/vnd.ms-modi","mdi"],["image/vnd.net-fpx",["fpx","npx"]],["image/vnd.rn-realflash","rf"],["image/vnd.rn-realpix","rp"],["image/vnd.wap.wbmp","wbmp"],["image/vnd.xiff","xif"],["image/webp","webp"],["image/x-cmu-raster","ras"],["image/x-cmx","cmx"],["image/x-dwg",["dwg","dxf","svf"]],["image/x-freehand","fh"],["image/x-icon","ico"],["image/x-jg","art"],["image/x-jps","jps"],["image/x-niff",["niff","nif"]],["image/x-pcx","pcx"],["image/x-pict",["pct","pic"]],["image/x-portable-anymap","pnm"],["image/x-portable-bitmap","pbm"],["image/x-portable-graymap","pgm"],["image/x-portable-greymap","pgm"],["image/x-portable-pixmap","ppm"],["image/x-quicktime",["qif","qti","qtif"]],["image/x-rgb","rgb"],["image/x-tiff",["tif","tiff"]],["image/x-windows-bmp","bmp"],["image/x-xbitmap","xbm"],["image/x-xbm","xbm"],["image/x-xpixmap",["xpm","pm"]],["image/x-xwd","xwd"],["image/x-xwindowdump","xwd"],["image/xbm","xbm"],["image/xpm","xpm"],["message/rfc822",["eml","mht","mhtml","nws","mime"]],["model/iges",["iges","igs"]],["model/mesh","msh"],["model/vnd.collada+xml","dae"],["model/vnd.dwf","dwf"],["model/vnd.gdl","gdl"],["model/vnd.gtw","gtw"],["model/vnd.mts","mts"],["model/vnd.vtu","vtu"],["model/vrml",["vrml","wrl","wrz"]],["model/x-pov","pov"],["multipart/x-gzip","gzip"],["multipart/x-ustar","ustar"],["multipart/x-zip","zip"],["music/crescendo",["mid","midi"]],["music/x-karaoke","kar"],["paleovu/x-pv","pvu"],["text/asp","asp"],["text/calendar","ics"],["text/css","css"],["text/csv","csv"],["text/ecmascript","js"],["text/h323","323"],["text/html",["html","htm","stm","acgi","htmls","htx","shtml"]],["text/iuls","uls"],["text/javascript","js"],["text/mcf","mcf"],["text/n3","n3"],["text/pascal","pas"],["text/plain",["txt","bas","c","h","c++","cc","com","conf","cxx","def","f","f90","for","g","hh","idc","jav","java","list","log","lst","m","mar","pl","sdml","text"]],["text/plain-bas","par"],["text/prs.lines.tag","dsc"],["text/richtext",["rtx","rt","rtf"]],["text/scriplet","wsc"],["text/scriptlet","sct"],["text/sgml",["sgm","sgml"]],["text/tab-separated-values","tsv"],["text/troff","t"],["text/turtle","ttl"],["text/uri-list",["uni","unis","uri","uris"]],["text/vnd.abc","abc"],["text/vnd.curl","curl"],["text/vnd.curl.dcurl","dcurl"],["text/vnd.curl.mcurl","mcurl"],["text/vnd.curl.scurl","scurl"],["text/vnd.fly","fly"],["text/vnd.fmi.flexstor","flx"],["text/vnd.graphviz","gv"],["text/vnd.in3d.3dml","3dml"],["text/vnd.in3d.spot","spot"],["text/vnd.rn-realtext","rt"],["text/vnd.sun.j2me.app-descriptor","jad"],["text/vnd.wap.wml","wml"],["text/vnd.wap.wmlscript","wmls"],["text/webviewhtml","htt"],["text/x-asm",["asm","s"]],["text/x-audiosoft-intra","aip"],["text/x-c",["c","cc","cpp"]],["text/x-component","htc"],["text/x-fortran",["for","f","f77","f90"]],["text/x-h",["h","hh"]],["text/x-java-source",["java","jav"]],["text/x-java-source,java","java"],["text/x-la-asf","lsx"],["text/x-m","m"],["text/x-pascal","p"],["text/x-script","hlb"],["text/x-script.csh","csh"],["text/x-script.elisp","el"],["text/x-script.guile","scm"],["text/x-script.ksh","ksh"],["text/x-script.lisp","lsp"],["text/x-script.perl","pl"],["text/x-script.perl-module","pm"],["text/x-script.phyton","py"],["text/x-script.rexx","rexx"],["text/x-script.scheme","scm"],["text/x-script.sh","sh"],["text/x-script.tcl","tcl"],["text/x-script.tcsh","tcsh"],["text/x-script.zsh","zsh"],["text/x-server-parsed-html",["shtml","ssi"]],["text/x-setext","etx"],["text/x-sgml",["sgm","sgml"]],["text/x-speech",["spc","talk"]],["text/x-uil","uil"],["text/x-uuencode",["uu","uue"]],["text/x-vcalendar","vcs"],["text/x-vcard","vcf"],["text/xml","xml"],["video/3gpp","3gp"],["video/3gpp2","3g2"],["video/animaflex","afl"],["video/avi","avi"],["video/avs-video","avs"],["video/dl","dl"],["video/fli","fli"],["video/gl","gl"],["video/h261","h261"],["video/h263","h263"],["video/h264","h264"],["video/jpeg","jpgv"],["video/jpm","jpm"],["video/mj2","mj2"],["video/mp4","mp4"],["video/mpeg",["mpeg","mp2","mpa","mpe","mpg","mpv2","m1v","m2v","mp3"]],["video/msvideo","avi"],["video/ogg","ogv"],["video/quicktime",["mov","qt","moov"]],["video/vdo","vdo"],["video/vivo",["viv","vivo"]],["video/vnd.dece.hd","uvh"],["video/vnd.dece.mobile","uvm"],["video/vnd.dece.pd","uvp"],["video/vnd.dece.sd","uvs"],["video/vnd.dece.video","uvv"],["video/vnd.fvt","fvt"],["video/vnd.mpegurl","mxu"],["video/vnd.ms-playready.media.pyv","pyv"],["video/vnd.rn-realvideo","rv"],["video/vnd.uvvu.mp4","uvu"],["video/vnd.vivo",["viv","vivo"]],["video/vosaic","vos"],["video/webm","webm"],["video/x-amt-demorun","xdr"],["video/x-amt-showrun","xsr"],["video/x-atomic3d-feature","fmf"],["video/x-dl","dl"],["video/x-dv",["dif","dv"]],["video/x-f4v","f4v"],["video/x-fli","fli"],["video/x-flv","flv"],["video/x-gl","gl"],["video/x-isvideo","isu"],["video/x-la-asf",["lsf","lsx"]],["video/x-m4v","m4v"],["video/x-motion-jpeg","mjpg"],["video/x-mpeg",["mp3","mp2"]],["video/x-mpeq2a","mp2"],["video/x-ms-asf",["asf","asr","asx"]],["video/x-ms-asf-plugin","asx"],["video/x-ms-wm","wm"],["video/x-ms-wmv","wmv"],["video/x-ms-wmx","wmx"],["video/x-ms-wvx","wvx"],["video/x-msvideo","avi"],["video/x-qtc","qtc"],["video/x-scm","scm"],["video/x-sgi-movie",["movie","mv"]],["windows/metafile","wmf"],["www/mime","mime"],["x-conference/x-cooltalk","ice"],["x-music/x-midi",["mid","midi"]],["x-world/x-3dmf",["3dm","3dmf","qd3","qd3d"]],["x-world/x-svr","svr"],["x-world/x-vrml",["flr","vrml","wrl","wrz","xaf","xof"]],["x-world/x-vrt","vrt"],["xgl/drawing","xgz"],["xgl/movie","xmz"]]),Xp=new Map([["123","application/vnd.lotus-1-2-3"],["323","text/h323"],["*","application/octet-stream"],["3dm","x-world/x-3dmf"],["3dmf","x-world/x-3dmf"],["3dml","text/vnd.in3d.3dml"],["3g2","video/3gpp2"],["3gp","video/3gpp"],["7z","application/x-7z-compressed"],["a","application/octet-stream"],["aab","application/x-authorware-bin"],["aac","audio/x-aac"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abc","text/vnd.abc"],["abw","application/x-abiword"],["ac","application/pkix-attr-cert"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acgi","text/html"],["acu","application/vnd.acucobol"],["acx","application/internet-property-stream"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afl","video/animaflex"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/postscript"],["aif",["audio/aiff","audio/x-aiff"]],["aifc",["audio/aiff","audio/x-aiff"]],["aiff",["audio/aiff","audio/x-aiff"]],["aim","application/x-aim"],["aip","text/x-audiosoft-intra"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["ani","application/x-navi-animation"],["aos","application/x-nokia-9000-communicator-add-on-software"],["apk","application/vnd.android.package-archive"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["aps","application/mime"],["arc","application/octet-stream"],["arj",["application/arj","application/octet-stream"]],["art","image/x-jg"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asp","text/asp"],["asr","video/x-ms-asf"],["asx",["video/x-ms-asf","application/x-mplayer2","video/x-ms-asf-plugin"]],["atc","application/vnd.acucorp"],["atomcat","application/atomcat+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au",["audio/basic","audio/x-au"]],["avi",["video/avi","video/msvideo","application/x-troff-msvideo","video/x-msvideo"]],["avs","video/avs-video"],["aw","application/applixware"],["axs","application/olescript"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azw","application/vnd.amazon.ebook"],["bas","text/plain"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin",["application/octet-stream","application/mac-binary","application/macbinary","application/x-macbinary","application/x-binary"]],["bm","image/bmp"],["bmi","application/vnd.bmi"],["bmp",["image/bmp","image/x-windows-bmp"]],["boo","application/book"],["book","application/book"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bsh","application/x-bsh"],["btif","image/prs.btif"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c",["text/plain","text/x-c"]],["c++","text/plain"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["c4g","application/vnd.clonk.c4group"],["cab","application/vnd.ms-cab-compressed"],["car","application/vnd.curl.car"],["cat",["application/vnd.ms-pkiseccat","application/vnd.ms-pki.seccat"]],["cc",["text/plain","text/x-c"]],["ccad","application/clariscad"],["cco","application/x-cocoa"],["ccxml","application/ccxml+xml,"],["cdbcmsg","application/vnd.contact.cmsg"],["cdf",["application/cdf","application/x-cdf","application/x-netcdf"]],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer",["application/pkix-cert","application/x-x509-ca-cert"]],["cgm","image/cgm"],["cha","application/x-chat"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cla","application/vnd.claymore"],["class",["application/octet-stream","application/java","application/java-byte-code","application/java-vm","application/x-java-class"]],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod",["image/cis-cod","application/vnd.rim.cod"]],["com",["application/octet-stream","text/plain"]],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt",["application/mac-compactpro","application/x-compactpro","application/x-cpt"]],["crd","application/x-mscardfile"],["crl",["application/pkix-crl","application/pkcs-crl"]],["crt",["application/pkix-cert","application/x-x509-user-cert","application/x-x509-ca-cert"]],["cryptonote","application/vnd.rig.cryptonote"],["csh",["text/x-script.csh","application/x-csh"]],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["css",["text/css","application/x-pointplus"]],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxx","text/plain"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["davmount","application/davmount+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["deb","application/x-debian-package"],["deepv","application/x-deepv"],["def","text/plain"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dif","video/x-dv"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["djvu","image/vnd.djvu"],["dl",["video/dl","video/x-dl"]],["dll","application/x-msdownload"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.document.macroenabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroenabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp",["application/commonground","application/vnd.osgi.dp"]],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drw","application/drafting"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dv","video/x-dv"],["dvi","application/x-dvi"],["dwf",["model/vnd.dwf","drawing/x-dwf"]],["dwg",["application/acad","image/vnd.dwg","image/x-dwg"]],["dxf",["application/dxf","image/vnd.dwg","image/vnd.dxf","image/x-dwg"]],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["el","text/x-script.elisp"],["elc",["application/x-elc","application/x-bytecode.elisp"]],["eml","message/rfc822"],["emma","application/emma+xml"],["env","application/x-envoy"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es",["application/ecmascript","application/x-esrehber"]],["es3","application/vnd.eszigno3+xml"],["esf","application/vnd.epson.esf"],["etx","text/x-setext"],["evy",["application/envoy","application/x-envoy"]],["exe",["application/octet-stream","application/x-msdownload"]],["exi","application/exi"],["ext","application/vnd.novadigm.ext"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f",["text/plain","text/x-fortran"]],["f4v","video/x-f4v"],["f77","text/x-fortran"],["f90",["text/plain","text/x-fortran"]],["fbs","image/vnd.fastbidsheet"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fh","image/x-freehand"],["fif",["application/fractals","image/fif"]],["fig","application/x-xfig"],["fli",["video/fli","video/x-fli"]],["flo",["image/florian","application/vnd.micrografx.flo"]],["flr","x-world/x-vrml"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fmf","video/x-atomic3d-feature"],["fnc","application/vnd.frogans.fnc"],["for",["text/plain","text/x-fortran"]],["fpx",["image/vnd.fpx","image/vnd.net-fpx"]],["frl","application/freeloader"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["funk","audio/make"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g","text/plain"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gdl","model/vnd.gdl"],["geo","application/vnd.dynageo"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["gl",["video/gl","video/x-gl"]],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gph","application/vnd.flographit"],["gqf","application/vnd.grafeq"],["gram","application/srgs"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsd","audio/x-gsm"],["gsf","application/x-font-ghostscript"],["gsm","audio/x-gsm"],["gsp","application/x-gsp"],["gss","application/x-gss"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxt","application/vnd.geonext"],["gz",["application/x-gzip","application/x-compressed"]],["gzip",["multipart/x-gzip","application/x-gzip"]],["h",["text/plain","text/x-h"]],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hdf","application/x-hdf"],["help","application/x-helpfile"],["hgl","application/vnd.hp-hpgl"],["hh",["text/plain","text/x-h"]],["hlb","text/x-script"],["hlp",["application/winhlp","application/hlp","application/x-helpfile","application/x-winhelp"]],["hpg","application/vnd.hp-hpgl"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx",["application/mac-binhex40","application/binhex","application/binhex4","application/mac-binhex","application/x-binhex40","application/x-mac-binhex40"]],["hta","application/hta"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["htmls","text/html"],["htt","text/webviewhtml"],["htx","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["ico","image/x-icon"],["ics","text/calendar"],["idc","text/plain"],["ief","image/ief"],["iefs","image/ief"],["ifm","application/vnd.shana.informed.formdata"],["iges",["application/iges","model/iges"]],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs",["application/iges","model/iges"]],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["iii","application/x-iphone"],["ima","application/x-ima"],["imap","application/x-httpd-imap"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["inf","application/inf"],["ins",["application/x-internet-signup","application/x-internett-signup"]],["ip","application/x-ip2"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["isp","application/x-internet-signup"],["isu","video/x-isvideo"],["it","audio/it"],["itp","application/vnd.shana.informed.formtemplate"],["iv","application/x-inventor"],["ivp","application/vnd.immervision-ivp"],["ivr","i-world/i-vrml"],["ivu","application/vnd.immervision-ivu"],["ivy","application/x-livescreen"],["jad","text/vnd.sun.j2me.app-descriptor"],["jam",["application/vnd.jam","audio/x-jam"]],["jar","application/java-archive"],["jav",["text/plain","text/x-java-source"]],["java",["text/plain","text/x-java-source,java","text/x-java-source"]],["jcm","application/x-java-commerce"],["jfif",["image/pipeg","image/jpeg","image/pjpeg"]],["jfif-tbnl","image/jpeg"],["jisp","application/vnd.jisp"],["jlt","application/vnd.hp-jlyt"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jpe",["image/jpeg","image/pjpeg"]],["jpeg",["image/jpeg","image/pjpeg"]],["jpg",["image/jpeg","image/pjpeg"]],["jpgv","video/jpeg"],["jpm","video/jpm"],["jps","image/x-jps"],["js",["application/javascript","application/ecmascript","text/javascript","text/ecmascript","application/x-javascript"]],["json","application/json"],["jut","image/jutvision"],["kar",["audio/midi","music/x-karaoke"]],["karbon","application/vnd.kde.karbon"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["ksh",["application/x-ksh","text/x-script.ksh"]],["ksp","application/vnd.kde.kspread"],["ktx","image/ktx"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["la",["audio/nspaudio","audio/x-nspaudio"]],["lam","audio/x-liveaudio"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["lha",["application/octet-stream","application/lha","application/x-lha"]],["lhx","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["lma",["audio/nspaudio","audio/x-nspaudio"]],["log","text/plain"],["lrm","application/vnd.ms-lrm"],["lsf","video/x-la-asf"],["lsp",["application/x-lisp","text/x-script.lisp"]],["lst","text/plain"],["lsx",["video/x-la-asf","text/x-la-asf"]],["ltf","application/vnd.frogans.ltf"],["ltx","application/x-latex"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh",["application/octet-stream","application/x-lzh"]],["lzx",["application/lzx","application/octet-stream","application/x-lzx"]],["m",["text/plain","text/x-m"]],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m1v","video/mpeg"],["m21","application/mp21"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3u",["audio/x-mpegurl","audio/x-mpequrl"]],["m3u8","application/vnd.apple.mpegurl"],["m4v","video/x-m4v"],["ma","application/mathematica"],["mads","application/mads+xml"],["mag","application/vnd.ecowin.chart"],["man","application/x-troff-man"],["map","application/x-navimap"],["mar","text/plain"],["mathml","application/mathml+xml"],["mbd","application/mbedlet"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc$","application/x-magic-cap-package-1.0"],["mc1","application/vnd.medcalcdata"],["mcd",["application/mcad","application/vnd.mcd","application/x-mathcad"]],["mcf",["image/vasa","text/mcf"]],["mcp","application/netmc"],["mcurl","text/vnd.curl.mcurl"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["me","application/x-troff-me"],["meta4","application/metalink4+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mht","message/rfc822"],["mhtml","message/rfc822"],["mid",["audio/mid","audio/midi","music/crescendo","x-music/x-midi","audio/x-midi","application/x-midi","audio/x-mid"]],["midi",["audio/midi","music/crescendo","x-music/x-midi","audio/x-midi","application/x-midi","audio/x-mid"]],["mif",["application/vnd.mif","application/x-mif","application/x-frame"]],["mime",["message/rfc822","www/mime"]],["mj2","video/mj2"],["mjf","audio/x-vnd.audioexplosion.mjuicemediafile"],["mjpg","video/x-motion-jpeg"],["mlp","application/vnd.dolby.mlp"],["mm",["application/base64","application/x-meme"]],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mme","application/base64"],["mmf","application/vnd.smaf"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mny","application/x-msmoney"],["mod",["audio/mod","audio/x-mod"]],["mods","application/mods+xml"],["moov","video/quicktime"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2",["video/mpeg","audio/mpeg","video/x-mpeg","audio/x-mpeg","video/x-mpeq2a"]],["mp3",["audio/mpeg","audio/mpeg3","video/mpeg","audio/x-mpeg-3","video/x-mpeg"]],["mp4",["video/mp4","application/mp4"]],["mp4a","audio/mp4"],["mpa",["video/mpeg","audio/mpeg"]],["mpc",["application/vnd.mophun.certificate","application/x-project"]],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg",["video/mpeg","audio/mpeg"]],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/x-project"],["mpv","application/x-project"],["mpv2","video/mpeg"],["mpx","application/x-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","application/x-troff-ms"],["mscml","application/mediaservercontrol+xml"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msl","application/vnd.mobius.msl"],["msty","application/vnd.muvee.style"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musicxml","application/vnd.recordare.musicxml+xml"],["mv","video/x-sgi-movie"],["mvb","application/x-msmediaview"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["my","audio/make"],["mzz","application/x-vnd.audioexplosion.mzz"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nap","image/naplps"],["naplps","image/naplps"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncm","application/vnd.nokia.configuration-message"],["ncx","application/x-dtbncx+xml"],["ngdat","application/vnd.nokia.n-gage.data"],["nif","image/x-niff"],["niff","image/x-niff"],["nix","application/x-mix-transfer"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nvd","application/x-navidoc"],["nws","message/rfc822"],["o","application/octet-stream"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omc","application/x-omc"],["omcd","application/x-omcdatamaker"],["omcr","application/x-omcregerator"],["onetoc","application/onenote"],["opf","application/oebps-package+xml"],["org","application/vnd.lotus-organizer"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","application/x-font-otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p10",["application/pkcs10","application/x-pkcs10"]],["p12",["application/pkcs-12","application/x-pkcs12"]],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c",["application/pkcs7-mime","application/x-pkcs7-mime"]],["p7m",["application/pkcs7-mime","application/x-pkcs7-mime"]],["p7r","application/x-pkcs7-certreqresp"],["p7s",["application/pkcs7-signature","application/x-pkcs7-signature"]],["p8","application/pkcs8"],["par","text/plain-bas"],["part","application/pro_eng"],["pas","text/pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcf","application/x-font-pcf"],["pcl",["application/vnd.hp-pcl","application/x-pcl"]],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb",["application/vnd.palm","chemical/x-pdb"]],["pdf","application/pdf"],["pfa","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfunk",["audio/make","audio/make.my.funk"]],["pfx","application/x-pkcs12"],["pgm",["image/x-portable-graymap","image/x-portable-greymap"]],["pgn","application/x-chess-pgn"],["pgp","application/pgp-signature"],["pic",["image/pict","image/x-pict"]],["pict","image/pict"],["pkg","application/x-newton-compatible-pkg"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pko",["application/ynd.ms-pkipko","application/vnd.ms-pki.pko"]],["pl",["text/plain","text/x-script.perl"]],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["plx","application/x-pixclscript"],["pm",["text/x-script.perl-module","image/x-xpixmap"]],["pm4","application/x-pagemaker"],["pm5","application/x-pagemaker"],["pma","application/x-perfmon"],["pmc","application/x-perfmon"],["pml",["application/vnd.ctc-posml","application/x-perfmon"]],["pmr","application/x-perfmon"],["pmw","application/x-perfmon"],["png","image/png"],["pnm",["application/x-portable-anymap","image/x-portable-anymap"]],["portpkg","application/vnd.macports.portpkg"],["pot",["application/vnd.ms-powerpoint","application/mspowerpoint"]],["potm","application/vnd.ms-powerpoint.template.macroenabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["pov","model/x-pov"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroenabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps",["application/vnd.ms-powerpoint","application/mspowerpoint"]],["ppsm","application/vnd.ms-powerpoint.slideshow.macroenabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt",["application/vnd.ms-powerpoint","application/mspowerpoint","application/powerpoint","application/x-mspowerpoint"]],["pptm","application/vnd.ms-powerpoint.presentation.macroenabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["ppz","application/mspowerpoint"],["prc","application/x-mobipocket-ebook"],["pre",["application/vnd.lotus-freelance","application/x-freelance"]],["prf","application/pics-rules"],["prt","application/pro_eng"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd",["application/octet-stream","image/vnd.adobe.photoshop"]],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pvu","paleovu/x-pv"],["pwn","application/vnd.3m.post-it-notes"],["pwz","application/vnd.ms-powerpoint"],["py","text/x-script.phyton"],["pya","audio/vnd.ms-playready.media.pya"],["pyc","application/x-bytecode.python"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qcp","audio/vnd.qcelp"],["qd3","x-world/x-3dmf"],["qd3d","x-world/x-3dmf"],["qfx","application/vnd.intu.qfx"],["qif","image/x-quicktime"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qtc","video/x-qtc"],["qti","image/x-quicktime"],["qtif","image/x-quicktime"],["qxd","application/vnd.quark.quarkxpress"],["ra",["audio/x-realaudio","audio/x-pn-realaudio","audio/x-pn-realaudio-plugin"]],["ram","audio/x-pn-realaudio"],["rar","application/x-rar-compressed"],["ras",["image/cmu-raster","application/x-cmu-raster","image/x-cmu-raster"]],["rast","image/cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rexx","text/x-script.rexx"],["rf","image/vnd.rn-realflash"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm",["application/vnd.rn-realmedia","audio/x-pn-realaudio"]],["rmi","audio/mid"],["rmm","audio/x-pn-realaudio"],["rmp",["audio/x-pn-realaudio-plugin","audio/x-pn-realaudio"]],["rms","application/vnd.jcp.javame.midlet-rms"],["rnc","application/relax-ng-compact-syntax"],["rng",["application/ringing-tones","application/vnd.nokia.ringing-tone"]],["rnx","application/vnd.rn-realplayer"],["roff","application/x-troff"],["rp","image/vnd.rn-realpix"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsd","application/rsd+xml"],["rt",["text/richtext","text/vnd.rn-realtext"]],["rtf",["application/rtf","text/richtext","application/x-rtf"]],["rtx",["text/richtext","application/rtf"]],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["saveme","application/octet-stream"],["sbk","application/x-tbook"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm",["application/vnd.lotus-screencam","video/x-scm","text/x-script.guile","application/x-lotusscreencam","text/x-script.scheme"]],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["sct","text/scriptlet"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkm","application/vnd.solent.sdkm+xml"],["sdml","text/plain"],["sdp",["application/sdp","application/x-sdp"]],["sdr","application/sounder"],["sdw","application/vnd.stardivision.writer"],["sea",["application/sea","application/x-sea"]],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["ser","application/java-serialized-object"],["set","application/set"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sgl","application/vnd.stardivision.writer-global"],["sgm",["text/sgml","text/x-sgml"]],["sgml",["text/sgml","text/x-sgml"]],["sh",["application/x-shar","application/x-bsh","application/x-sh","text/x-script.sh"]],["shar",["application/x-bsh","application/x-shar"]],["shf","application/shf+xml"],["shtml",["text/html","text/x-server-parsed-html"]],["sid","audio/x-psid"],["sis","application/vnd.symbian.install"],["sit",["application/x-stuffit","application/x-sit"]],["sitx","application/x-stuffitx"],["skd","application/x-koan"],["skm","application/x-koan"],["skp",["application/vnd.koan","application/x-koan"]],["skt","application/x-koan"],["sl","application/x-seelogo"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi",["application/smil","application/smil+xml"]],["smil","application/smil"],["snd",["audio/basic","audio/x-adpcm"]],["snf","application/x-font-snf"],["sol","application/solids"],["spc",["text/x-speech","application/x-pkcs7-certificates"]],["spf","application/vnd.yamaha.smaf-phrase"],["spl",["application/futuresplash","application/x-futuresplash"]],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spr","application/x-sprite"],["sprite","application/x-sprite"],["src","application/x-wais-source"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssi","text/x-server-parsed-html"],["ssm","application/streamingmedia"],["ssml","application/ssml+xml"],["sst",["application/vnd.ms-pkicertstore","application/vnd.ms-pki.certstore"]],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["step","application/step"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl",["application/vnd.ms-pkistl","application/sla","application/vnd.ms-pki.stl","application/x-navistyle"]],["stm","text/html"],["stp","application/step"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["sub","image/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svf",["image/vnd.dwg","image/x-dwg"]],["svg","image/svg+xml"],["svr",["x-world/x-svr","application/x-world"]],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t",["text/troff","application/x-troff"]],["talk","text/x-speech"],["tao","application/vnd.tao.intent-module-archive"],["tar","application/x-tar"],["tbk",["application/toolbook","application/x-tbook"]],["tcap","application/vnd.3gpp2.tcap"],["tcl",["text/x-script.tcl","application/x-tcl"]],["tcsh","text/x-script.tcsh"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text",["application/plain","text/plain"]],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tgz",["application/gnutar","application/x-compressed"]],["thmx","application/vnd.ms-officetheme"],["tif",["image/tiff","image/x-tiff"]],["tiff",["image/tiff","image/x-tiff"]],["tmo","application/vnd.tmobile-livetv"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","application/x-troff"],["tra","application/vnd.trueapp"],["trm","application/x-msterminal"],["tsd","application/timestamped-data"],["tsi","audio/tsp-audio"],["tsp",["application/dsptype","audio/tsplayer"]],["tsv","text/tab-separated-values"],["ttf","application/x-font-ttf"],["ttl","text/turtle"],["turbot","image/florian"],["twd","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["ufd","application/vnd.ufdl"],["uil","text/x-uil"],["uls","text/iuls"],["umj","application/vnd.umajin"],["uni","text/uri-list"],["unis","text/uri-list"],["unityweb","application/vnd.unity"],["unv","application/i-deas"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["ustar",["application/x-ustar","multipart/x-ustar"]],["utz","application/vnd.uiq.theme"],["uu",["application/octet-stream","text/x-uuencode"]],["uue","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vda","application/vda"],["vdo","video/vdo"],["vew","application/groupwise"],["vis","application/vnd.visionary"],["viv",["video/vivo","video/vnd.vivo"]],["vivo",["video/vivo","video/vnd.vivo"]],["vmd","application/vocaltec-media-desc"],["vmf","application/vocaltec-media-file"],["voc",["audio/voc","audio/x-voc"]],["vos","video/vosaic"],["vox","audio/voxware"],["vqe","audio/x-twinvq-plugin"],["vqf","audio/x-twinvq"],["vql","audio/x-twinvq-plugin"],["vrml",["model/vrml","x-world/x-vrml","application/x-vrml"]],["vrt","x-world/x-vrt"],["vsd",["application/vnd.visio","application/x-visio"]],["vsf","application/vnd.vsf"],["vst","application/x-visio"],["vsw","application/x-visio"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w60","application/wordperfect6.0"],["w61","application/wordperfect6.1"],["w6w","application/msword"],["wad","application/x-doom"],["wav",["audio/wav","audio/x-wav"]],["wax","audio/x-ms-wax"],["wb1","application/x-qpro"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/vnd.wap.wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["web","application/vnd.xara"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wiz","application/msword"],["wk1","application/x-123"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf",["windows/metafile","application/x-msmetafile"]],["wml","text/vnd.wap.wml"],["wmlc","application/vnd.wap.wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-ms-wmz"],["woff","application/x-font-woff"],["word","application/msword"],["wp","application/wordperfect"],["wp5",["application/wordperfect","application/wordperfect6.0"]],["wp6","application/wordperfect"],["wpd",["application/wordperfect","application/vnd.wordperfect","application/x-wpwin"]],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wq1","application/x-lotus"],["wqd","application/vnd.wqd"],["wri",["application/mswrite","application/x-wri","application/x-mswrite"]],["wrl",["model/vrml","x-world/x-vrml","application/x-world"]],["wrz",["model/vrml","x-world/x-vrml"]],["wsc","text/scriplet"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wsrc","application/x-wais-source"],["wtb","application/vnd.webturbo"],["wtk","application/x-wintalk"],["wvx","video/x-ms-wvx"],["x-png","image/png"],["x3d","application/vnd.hzn-3d-crossword"],["xaf","x-world/x-vrml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm",["image/xbm","image/x-xbm","image/x-xbitmap"]],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdr","video/x-amt-demorun"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xgz","xgl/drawing"],["xhtml","application/xhtml+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xlam","application/vnd.ms-excel.addin.macroenabled.12"],["xlb",["application/excel","application/vnd.ms-excel","application/x-excel"]],["xlc",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xld",["application/excel","application/x-excel"]],["xlk",["application/excel","application/x-excel"]],["xll",["application/excel","application/vnd.ms-excel","application/x-excel"]],["xlm",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xls",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xlsb","application/vnd.ms-excel.sheet.binary.macroenabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroenabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt",["application/vnd.ms-excel","application/excel","application/x-excel"]],["xltm","application/vnd.ms-excel.template.macroenabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlv",["application/excel","application/x-excel"]],["xlw",["application/vnd.ms-excel","application/excel","application/x-msexcel","application/x-excel"]],["xm","audio/xm"],["xml",["application/xml","text/xml","application/atom+xml","application/rss+xml"]],["xmz","xgl/movie"],["xo","application/vnd.olpc-sugar"],["xof","x-world/x-vrml"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpix","application/x-vnd.ls-xpix"],["xpm",["image/xpm","image/x-xpixmap"]],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xsr","video/x-amt-showrun"],["xul","application/vnd.mozilla.xul+xml"],["xwd",["image/x-xwd","image/x-xwindowdump"]],["xyz",["chemical/x-xyz","chemical/x-pdb"]],["yang","application/yang"],["yin","application/yin+xml"],["z",["application/x-compressed","application/x-compress"]],["zaz","application/vnd.zzazz.deck+xml"],["zip",["application/zip","multipart/x-zip","application/x-zip-compressed","application/x-compressed"]],["zir","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zoo","application/octet-stream"],["zsh","text/x-script.zsh"]]);Jp.exports={detectMimeType(t){if(!t)return Zp;let e=zb.parse(t),i=(e.ext.substr(1)||e.name||"").split("?").shift().trim().toLowerCase(),r=Zp;return Xp.has(i)&&(r=Xp.get(i)),Array.isArray(r)?r[0]:r},detectExtension(t){if(!t)return Vb;let e=(t||"").toLowerCase().trim().split("/"),i=e.shift().trim(),r=e.join("/").trim();if(Qp.has(i+"/"+r)){let n=Qp.get(i+"/"+r);return Array.isArray(n)?n[0]:n}switch(i){case"text":return"txt";default:return"bin"}}}});var rc=R((iP,od)=>{"use strict";var td="-",Wb=/^xn--/,Yb=/[^\0-\x7F]/,$b=/[\x2E\u3002\uFF0E\uFF61]/g,Zb={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},tc=35,ei=Math.floor,ic=String.fromCharCode;function Si(t){throw new RangeError(Zb[t])}function Qb(t,e){let i=[],r=t.length;for(;r--;)i[r]=e(t[r]);return i}function id(t,e){let i=t.split("@"),r="";i.length>1&&(r=i[0]+"@",t=i[1]),t=t.replace($b,".");let n=t.split("."),a=Qb(n,e).join(".");return r+a}function rd(t){let e=[],i=0,r=t.length;for(;i<r;){let n=t.charCodeAt(i++);if(n>=55296&&n<=56319&&i<r){let a=t.charCodeAt(i++);(a&64512)==56320?e.push(((n&1023)<<10)+(a&1023)+65536):(e.push(n),i--)}else e.push(n)}return e}var Xb=t=>String.fromCodePoint(...t),Jb=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:36},ed=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},nd=function(t,e,i){let r=0;for(t=i?ei(t/700):t>>1,t+=ei(t/e);t>tc*26>>1;r+=36)t=ei(t/tc);return ei(r+(tc+1)*t/(t+38))},ad=function(t){let e=[],i=t.length,r=0,n=128,a=72,s=t.lastIndexOf(td);s<0&&(s=0);for(let l=0;l<s;++l)t.charCodeAt(l)>=128&&Si("not-basic"),e.push(t.charCodeAt(l));for(let l=s>0?s+1:0;l<i;){let p=r;for(let x=1,S=36;;S+=36){l>=i&&Si("invalid-input");let M=Jb(t.charCodeAt(l++));M>=36&&Si("invalid-input"),M>ei((2147483647-r)/x)&&Si("overflow"),r+=M*x;let C=S<=a?1:S>=a+26?26:S-a;if(M<C)break;let T=36-C;x>ei(2147483647/T)&&Si("overflow"),x*=T}let y=e.length+1;a=nd(r-p,y,p==0),ei(r/y)>2147483647-n&&Si("overflow"),n+=ei(r/y),r%=y,e.splice(r++,0,n)}return String.fromCodePoint(...e)},sd=function(t){let e=[];t=rd(t);let i=t.length,r=128,n=0,a=72;for(let p of t)p<128&&e.push(ic(p));let s=e.length,l=s;for(s&&e.push(td);l<i;){let p=2147483647;for(let x of t)x>=r&&x<p&&(p=x);let y=l+1;p-r>ei((2147483647-n)/y)&&Si("overflow"),n+=(p-r)*y,r=p;for(let x of t)if(x<r&&++n>2147483647&&Si("overflow"),x===r){let S=n;for(let M=36;;M+=36){let C=M<=a?1:M>=a+26?26:M-a;if(S<C)break;let T=S-C,O=36-C;e.push(ic(ed(C+T%O,0))),S=ei(T/O)}e.push(ic(ed(S,0))),a=nd(n,y,l===s),n=0,++l}++n,++r}return e.join("")},ex=function(t){return id(t,function(e){return Wb.test(e)?ad(e.slice(4).toLowerCase()):e})},tx=function(t){return id(t,function(e){return Yb.test(e)?"xn--"+sd(e):e})},ix={version:"2.3.1",ucs2:{decode:rd,encode:Xb},decode:ad,encode:sd,toASCII:tx,toUnicode:ex};od.exports=ix});var oc=R((rP,ld)=>{"use strict";var rx=require("stream").Transform;function nc(t){return typeof t=="string"&&(t=Buffer.from(t,"utf-8")),t.toString("base64")}function ac(t,e){if(t=(t||"").toString(),e=e||76,t.length<=e)return t;let i=[],r=0,n=e*1024;for(;r<t.length;){let a=t.substr(r,n).replace(new RegExp(".{"+e+"}","g"),`$&\r
`).trim();i.push(a),r+=n}return i.join(`\r
`).trim()}var sc=class extends rx{constructor(e){super(),this.options=e||{},this.options.lineLength!==!1&&(this.options.lineLength=this.options.lineLength||76),this._curLine="",this._remainingBytes=!1,this.inputBytes=0,this.outputBytes=0}_transform(e,i,r){if(i!=="buffer"&&(e=Buffer.from(e,i)),!e||!e.length)return setImmediate(r);this.inputBytes+=e.length,this._remainingBytes&&this._remainingBytes.length&&(e=Buffer.concat([this._remainingBytes,e],this._remainingBytes.length+e.length),this._remainingBytes=!1),e.length%3?(this._remainingBytes=e.slice(e.length-e.length%3),e=e.slice(0,e.length-e.length%3)):this._remainingBytes=!1;let n=this._curLine+nc(e);if(this.options.lineLength){n=ac(n,this.options.lineLength);let a=n.lastIndexOf(`
`);a<0?(this._curLine=n,n=""):a===n.length-1?this._curLine="":(this._curLine=n.substr(a+1),n=n.substr(0,a+1))}n&&(this.outputBytes+=n.length,this.push(Buffer.from(n,"ascii"))),setImmediate(r)}_flush(e){this._remainingBytes&&this._remainingBytes.length&&(this._curLine+=nc(this._remainingBytes)),this._curLine&&(this._curLine=ac(this._curLine,this.options.lineLength),this.outputBytes+=this._curLine.length,this.push(this._curLine,"ascii"),this._curLine=""),e()}};ld.exports={encode:nc,wrap:ac,Encoder:sc}});var uc=R((nP,ud)=>{"use strict";var nx=require("stream").Transform;function lc(t){typeof t=="string"&&(t=Buffer.from(t,"utf-8"));let e=[[9],[10],[13],[32,60],[62,126]],i="",r;for(let n=0,a=t.length;n<a;n++){if(r=t[n],ax(r,e)&&!((r===32||r===9)&&(n===a-1||t[n+1]===10||t[n+1]===13))){i+=String.fromCharCode(r);continue}i+="="+(r<16?"0":"")+r.toString(16).toUpperCase()}return i}function cd(t,e){if(t=(t||"").toString(),e=e||76,t.length<=e)return t;let i=0,r=t.length,n,a,s,l=Math.floor(e/3),p="";for(;i<r;){if(s=t.substr(i,e),n=s.match(/\r\n/)){s=s.substr(0,n.index+n[0].length),p+=s,i+=s.length;continue}if(s.substr(-1)===`
`){p+=s,i+=s.length;continue}else if(n=s.substr(-l).match(/\n.*?$/)){s=s.substr(0,s.length-(n[0].length-1)),p+=s,i+=s.length;continue}else if(s.length>e-l&&(n=s.substr(-l).match(/[ \t.,!?][^ \t.,!?]*$/)))s=s.substr(0,s.length-(n[0].length-1));else if(s.match(/[=][\da-f]{0,2}$/i))for((n=s.match(/[=][\da-f]{0,1}$/i))&&(s=s.substr(0,s.length-n[0].length));s.length>3&&s.length<r-i&&!s.match(/^(?:=[\da-f]{2}){1,4}$/i)&&(n=s.match(/[=][\da-f]{2}$/gi))&&(a=parseInt(n[0].substr(1,2),16),!(a<128||(s=s.substr(0,s.length-3),a>=192))););i+s.length<r&&s.substr(-1)!==`
`?(s.length===e&&s.match(/[=][\da-f]{2}$/i)?s=s.substr(0,s.length-3):s.length===e&&(s=s.substr(0,s.length-1)),i+=s.length,s+=`=\r
`):i+=s.length,p+=s}return p}function ax(t,e){for(let i=e.length-1;i>=0;i--)if(e[i].length&&(e[i].length===1&&t===e[i][0]||e[i].length===2&&t>=e[i][0]&&t<=e[i][1]))return!0;return!1}var cc=class extends nx{constructor(e){super(),this.options=e||{},this.options.lineLength!==!1&&(this.options.lineLength=this.options.lineLength||76),this._curLine="",this.inputBytes=0,this.outputBytes=0}_transform(e,i,r){let n;if(i!=="buffer"&&(e=Buffer.from(e,i)),!e||!e.length)return r();this.inputBytes+=e.length,this.options.lineLength?(n=this._curLine+lc(e),n=cd(n,this.options.lineLength),n=n.replace(/(^|\n)([^\n]*)$/,(a,s,l)=>(this._curLine=l,s)),n&&(this.outputBytes+=n.length,this.push(n))):(n=lc(e),this.outputBytes+=n.length,this.push(n,"ascii")),r()}_flush(e){this._curLine&&(this.outputBytes+=this._curLine.length,this.push(this._curLine,"ascii")),e()}};ud.exports={encode:lc,wrap:cd,Encoder:cc}});var da=R((aP,pd)=>{"use strict";var pa=oc(),sx=uc(),fd=ec();pd.exports={isPlainText(t,e){return!(typeof t!="string"||(e?/[\x00-\x08\x0b\x0c\x0e-\x1f"\u0080-\uFFFF]/:/[\x00-\x08\x0b\x0c\x0e-\x1f\u0080-\uFFFF]/).test(t))},hasLongerLines(t,e){return t.length>128*1024?!0:new RegExp("^.{"+(e+1)+",}","m").test(t)},encodeWord(t,e,i){e=(e||"Q").toString().toUpperCase().trim().charAt(0),i=i||0;let r,n="UTF-8";if(i&&i>7+n.length&&(i-=7+n.length),e==="Q"?r=sx.encode(t).replace(/[^a-z0-9!*+\-/=]/gi,a=>{let s=a.charCodeAt(0).toString(16).toUpperCase();return a===" "?"_":"="+(s.length===1?"0"+s:s)}):e==="B"&&(r=typeof t=="string"?t:pa.encode(t),i=i?Math.max(3,(i-i%4)/4*3):0),i&&(e!=="B"?r:pa.encode(t)).length>i)if(e==="Q")r=this.splitMimeEncodedString(r,i).join("?= =?"+n+"?"+e+"?");else{let a=[],s="";for(let l=0,p=r.length;l<p;l++){let y=r.charAt(l);/[\ud83c\ud83d\ud83e]/.test(y)&&l<p-1&&(y+=r.charAt(++l)),Buffer.byteLength(s+y)<=i||l===0?s+=y:(a.push(pa.encode(s)),s=y)}s&&a.push(pa.encode(s)),a.length>1?r=a.join("?= =?"+n+"?"+e+"?"):r=a.join("")}else e==="B"&&(r=pa.encode(t));return"=?"+n+"?"+e+"?"+r+(r.substr(-2)==="?="?"":"?=")},encodeWords(t,e,i,r){i=i||0;let n,a=t.match(/(?:^|\s)([^\s]*["\u0080-\uFFFF])/);if(!a)return t;if(r)return this.encodeWord(t,e,i);let s=t.match(/(["\u0080-\uFFFF][^\s]*)[^"\u0080-\uFFFF]*$/);if(!s)return t;let l=a.index+(a[0].match(/[^\s]/)||{index:0}).index,p=s.index+(s[1]||"").length;return n=(l?t.substr(0,l):"")+this.encodeWord(t.substring(l,p),e||"Q",i)+(p<t.length?t.substr(p):""),n},buildHeaderValue(t){let e=[];return Object.keys(t.params||{}).forEach(i=>{let r=t.params[i];!this.isPlainText(r,!0)||r.length>=75?this.buildHeaderParam(i,r,50).forEach(n=>{!/[\s"\\;:/=(),<>@[\]?]|^[-']|'$/.test(n.value)||n.key.substr(-1)==="*"?e.push(n.key+"="+n.value):e.push(n.key+"="+JSON.stringify(n.value))}):/[\s'"\\;:/=(),<>@[\]?]|^-/.test(r)?e.push(i+"="+JSON.stringify(r)):e.push(i+"="+r)}),t.value+(e.length?"; "+e.join("; "):"")},buildHeaderParam(t,e,i){let r=[],n=typeof e=="string"?e:(e||"").toString(),a,s,l,p,y=0,x,S;if(i=i||50,this.isPlainText(e,!0)){if(n.length<=i)return[{key:t,value:n}];n=n.replace(new RegExp(".{"+i+"}","g"),M=>(r.push({line:M}),"")),n&&r.push({line:n})}else{if(/[\uD800-\uDBFF]/.test(n)){for(a=[],x=0,S=n.length;x<S;x++)s=n.charAt(x),l=s.charCodeAt(0),l>=55296&&l<=56319&&x<S-1?(s+=n.charAt(x+1),a.push(s),x++):a.push(s);n=a}p="utf-8''";let M=!0;for(y=0,x=0,S=n.length;x<S;x++){if(s=n[x],M)s=this.safeEncodeURIComponent(s);else if(s=s===" "?s:this.safeEncodeURIComponent(s),s!==n[x])if((this.safeEncodeURIComponent(p)+s).length>=i)r.push({line:p,encoded:M}),p="",y=x-1;else{M=!0,x=y,p="";continue}(p+s).length>=i?(r.push({line:p,encoded:M}),p=s=n[x]===" "?" ":this.safeEncodeURIComponent(n[x]),s===n[x]?(M=!1,y=x-1):M=!0):p+=s}p&&r.push({line:p,encoded:M})}return r.map((M,C)=>({key:t+"*"+C+(M.encoded?"*":""),value:M.line}))},parseHeaderValue(t){let e={value:!1,params:{}},i=!1,r="",n="value",a=!1,s=!1,l;for(let p=0,y=t.length;p<y;p++)if(l=t.charAt(p),n==="key"){if(l==="="){i=r.trim().toLowerCase(),n="value",r="";continue}r+=l}else{if(s)r+=l;else if(l==="\\"){s=!0;continue}else a&&l===a?a=!1:!a&&l==='"'?a=l:!a&&l===";"?(i===!1?e.value=r.trim():e.params[i]=r.trim(),n="key",r=""):r+=l;s=!1}return n==="value"?i===!1?e.value=r.trim():e.params[i]=r.trim():r.trim()&&(e.params[r.trim().toLowerCase()]=""),Object.keys(e.params).forEach(p=>{let y,x,S,M;(S=p.match(/(\*(\d+)|\*(\d+)\*|\*)$/))&&(y=p.substr(0,S.index),x=Number(S[2]||S[3])||0,(!e.params[y]||typeof e.params[y]!="object")&&(e.params[y]={charset:!1,values:[]}),M=e.params[p],x===0&&S[0].substr(-1)==="*"&&(S=M.match(/^([^']*)'[^']*'(.*)$/))&&(e.params[y].charset=S[1]||"iso-8859-1",M=S[2]),e.params[y].values[x]=M,delete e.params[p])}),Object.keys(e.params).forEach(p=>{let y;e.params[p]&&Array.isArray(e.params[p].values)&&(y=e.params[p].values.map(x=>x||"").join(""),e.params[p].charset?e.params[p]="=?"+e.params[p].charset+"?Q?"+y.replace(/[=?_\s]/g,x=>{let S=x.charCodeAt(0).toString(16);return x===" "?"_":"%"+(S.length<2?"0":"")+S}).replace(/%/g,"=")+"?=":e.params[p]=y)}),e},detectExtension:t=>fd.detectExtension(t),detectMimeType:t=>fd.detectMimeType(t),foldLines(t,e,i){t=(t||"").toString(),e=e||76;let r=0,n=t.length,a="",s,l;for(;r<n;){if(s=t.substr(r,e),s.length<e){a+=s;break}if(l=s.match(/^[^\n\r]*(\r?\n|\r)/)){s=l[0],a+=s,r+=s.length;continue}else(l=s.match(/(\s+)[^\s]*$/))&&l[0].length-(i?(l[1]||"").length:0)<s.length?s=s.substr(0,s.length-(l[0].length-(i?(l[1]||"").length:0))):(l=t.substr(r+s.length).match(/^[^\s]+(\s*)/))&&(s=s+l[0].substr(0,l[0].length-(i?0:(l[1]||"").length)));a+=s,r+=s.length,r<n&&(a+=`\r
`)}return a},splitMimeEncodedString:(t,e)=>{let i,r,n,a,s=[];for(e=Math.max(e||0,12);t.length;){for(i=t.substr(0,e),(r=i.match(/[=][0-9A-F]?$/i))&&(i=i.substr(0,r.index)),a=!1;!a;)a=!0,(r=t.substr(i.length).match(/^[=]([0-9A-F]{2})/i))&&(n=parseInt(r[1],16),n<194&&n>127&&(i=i.substr(0,i.length-3),a=!1));i.length&&s.push(i),t=t.substr(i.length)}return s},encodeURICharComponent:t=>{let e="",i=t.charCodeAt(0).toString(16).toUpperCase();if(i.length%2&&(i="0"+i),i.length>2)for(let r=0,n=i.length/2;r<n;r++)e+="%"+i.substr(r,2);else e+="%"+i;return e},safeEncodeURIComponent(t){t=(t||"").toString();try{t=encodeURIComponent(t)}catch{return t.replace(/[^\x00-\x1F *'()<>@,;:\\"[\]?=\u007F-\uFFFF]+/g,"")}return t.replace(/[\x00-\x1F *'()<>@,;:\\"[\]?=\u007F-\uFFFF]/g,e=>this.encodeURICharComponent(e))}}});var md=R((sP,hd)=>{"use strict";function ox(t){let e,i=!1,r="text",n,a=[],s={address:[],comment:[],group:[],text:[]},l,p;for(l=0,p=t.length;l<p;l++)if(e=t[l],e.type==="operator")switch(e.value){case"<":r="address";break;case"(":r="comment";break;case":":r="group",i=!0;break;default:r="text"}else e.value&&(r==="address"&&(e.value=e.value.replace(/^[^<]*<\s*/,"")),s[r].push(e.value));if(!s.text.length&&s.comment.length&&(s.text=s.comment,s.comment=[]),i)s.text=s.text.join(" "),a.push({name:s.text||n&&n.name,group:s.group.length?dd(s.group.join(",")):[]});else{if(!s.address.length&&s.text.length){for(l=s.text.length-1;l>=0;l--)if(s.text[l].match(/^[^@\s]+@[^@\s]+$/)){s.address=s.text.splice(l,1);break}let y=function(x){return s.address.length?x:(s.address=[x.trim()]," ")};if(!s.address.length)for(l=s.text.length-1;l>=0&&(s.text[l]=s.text[l].replace(/\s*\b[^@\s]+@[^\s]+\b\s*/,y).trim(),!s.address.length);l--);}if(!s.text.length&&s.comment.length&&(s.text=s.comment,s.comment=[]),s.address.length>1&&(s.text=s.text.concat(s.address.splice(1))),s.text=s.text.join(" "),s.address=s.address.join(" "),!s.address&&i)return[];n={address:s.address||s.text||"",name:s.text||s.address||""},n.address===n.name&&((n.address||"").match(/@/)?n.name="":n.address=""),a.push(n)}return a}var fc=class{constructor(e){this.str=(e||"").toString(),this.operatorCurrent="",this.operatorExpecting="",this.node=null,this.escaped=!1,this.list=[],this.operators={'"':'"',"(":")","<":">",",":"",":":";",";":""}}tokenize(){let e,i=[];for(let r=0,n=this.str.length;r<n;r++)e=this.str.charAt(r),this.checkChar(e);return this.list.forEach(r=>{r.value=(r.value||"").toString().trim(),r.value&&i.push(r)}),i}checkChar(e){if(!this.escaped){if(e===this.operatorExpecting){this.node={type:"operator",value:e},this.list.push(this.node),this.node=null,this.operatorExpecting="",this.escaped=!1;return}else if(!this.operatorExpecting&&e in this.operators){this.node={type:"operator",value:e},this.list.push(this.node),this.node=null,this.operatorExpecting=this.operators[e],this.escaped=!1;return}else if(['"',"'"].includes(this.operatorExpecting)&&e==="\\"){this.escaped=!0;return}}this.node||(this.node={type:"text",value:""},this.list.push(this.node)),e===`
`&&(e=" "),(e.charCodeAt(0)>=33||[" ","	"].includes(e))&&(this.node.value+=e),this.escaped=!1}};function dd(t,e){e=e||{};let r=new fc(t).tokenize(),n=[],a=[],s=[];if(r.forEach(l=>{l.type==="operator"&&(l.value===","||l.value===";")?(a.length&&n.push(a),a=[]):a.push(l)}),a.length&&n.push(a),n.forEach(l=>{l=ox(l),l.length&&(s=s.concat(l))}),e.flatten){let l=[],p=y=>{y.forEach(x=>{if(x.group)return p(x.group);l.push(x)})};return p(s),l}return s}hd.exports=dd});var yd=R((oP,gd)=>{"use strict";var lx=require("stream").Transform,pc=class extends lx{constructor(){super(),this.lastByte=!1}_transform(e,i,r){e.length&&(this.lastByte=e[e.length-1]),this.push(e),r()}_flush(e){return this.lastByte===10?e():this.lastByte===13?(this.push(Buffer.from(`
`)),e()):(this.push(Buffer.from(`\r
`)),e())}};gd.exports=pc});var hc=R((lP,vd)=>{"use strict";var cx=require("stream"),ux=cx.Transform,dc=class extends ux{constructor(e){super(e),this.options=e||{},this.lastByte=!1}_transform(e,i,r){let n,a=0;for(let s=0,l=e.length;s<l;s++)e[s]===10&&(s&&e[s-1]!==13||!s&&this.lastByte!==13)&&(s>a&&(n=e.slice(a,s),this.push(n)),this.push(Buffer.from(`\r
`)),a=s+1);a&&a<e.length?(n=e.slice(a),this.push(n)):a||this.push(e),this.lastByte=e[e.length-1],r()}};vd.exports=dc});var bd=R((cP,_d)=>{"use strict";var fx=require("stream"),px=fx.Transform,mc=class extends px{constructor(e){super(e),this.options=e||{}}_transform(e,i,r){let n,a=0;for(let s=0,l=e.length;s<l;s++)e[s]===13&&(n=e.slice(a,s),a=s+1,this.push(n));a&&a<e.length?(n=e.slice(a),this.push(n)):a||this.push(e),r()}};_d.exports=mc});var vc=R((uP,xd)=>{"use strict";var gc=require("crypto"),dx=require("fs"),hx=rc(),ha=require("stream").PassThrough,mx=ct(),zt=da(),gx=uc(),yx=oc(),vx=md(),_x=ua(),bx=yd(),xx=hc(),wx=bd(),yc=class t{constructor(e,i){this.nodeCounter=0,i=i||{},this.baseBoundary=i.baseBoundary||gc.randomBytes(8).toString("hex"),this.boundaryPrefix=i.boundaryPrefix||"--_NmP",this.disableFileAccess=!!i.disableFileAccess,this.disableUrlAccess=!!i.disableUrlAccess,this.normalizeHeaderKey=i.normalizeHeaderKey,this.date=new Date,this.rootNode=i.rootNode||this,this.keepBcc=!!i.keepBcc,i.filename&&(this.filename=i.filename,e||(e=zt.detectMimeType(this.filename.split(".").pop()))),this.textEncoding=(i.textEncoding||"").toString().trim().charAt(0).toUpperCase(),this.parentNode=i.parentNode,this.hostname=i.hostname,this.newline=i.newline,this.childNodes=[],this._nodeId=++this.rootNode.nodeCounter,this._headers=[],this._isPlainText=!1,this._hasLongLines=!1,this._envelope=!1,this._raw=!1,this._transforms=[],this._processFuncs=[],e&&this.setHeader("Content-Type",e)}createChild(e,i){!i&&typeof e=="object"&&(i=e,e=void 0);let r=new t(e,i);return this.appendChild(r),r}appendChild(e){return e.rootNode!==this.rootNode&&(e.rootNode=this.rootNode,e._nodeId=++this.rootNode.nodeCounter),e.parentNode=this,this.childNodes.push(e),e}replace(e){return e===this?this:(this.parentNode.childNodes.forEach((i,r)=>{i===this&&(e.rootNode=this.rootNode,e.parentNode=this.parentNode,e._nodeId=this._nodeId,this.rootNode=this,this.parentNode=void 0,e.parentNode.childNodes[r]=e)}),e)}remove(){if(!this.parentNode)return this;for(let e=this.parentNode.childNodes.length-1;e>=0;e--)if(this.parentNode.childNodes[e]===this)return this.parentNode.childNodes.splice(e,1),this.parentNode=void 0,this.rootNode=this,this}setHeader(e,i){let r=!1,n;if(!i&&e&&typeof e=="object")return e.key&&"value"in e?this.setHeader(e.key,e.value):Array.isArray(e)?e.forEach(a=>{this.setHeader(a.key,a.value)}):Object.keys(e).forEach(a=>{this.setHeader(a,e[a])}),this;e=this._normalizeHeaderKey(e),n={key:e,value:i};for(let a=0,s=this._headers.length;a<s;a++)this._headers[a].key===e&&(r?(this._headers.splice(a,1),a--,s--):(this._headers[a]=n,r=!0));return r||this._headers.push(n),this}addHeader(e,i){return!i&&e&&typeof e=="object"?(e.key&&e.value?this.addHeader(e.key,e.value):Array.isArray(e)?e.forEach(r=>{this.addHeader(r.key,r.value)}):Object.keys(e).forEach(r=>{this.addHeader(r,e[r])}),this):Array.isArray(i)?(i.forEach(r=>{this.addHeader(e,r)}),this):(this._headers.push({key:this._normalizeHeaderKey(e),value:i}),this)}getHeader(e){e=this._normalizeHeaderKey(e);for(let i=0,r=this._headers.length;i<r;i++)if(this._headers[i].key===e)return this._headers[i].value}setContent(e){return this.content=e,typeof this.content.pipe=="function"?(this._contentErrorHandler=i=>{this.content.removeListener("error",this._contentErrorHandler),this.content=i},this.content.once("error",this._contentErrorHandler)):typeof this.content=="string"&&(this._isPlainText=zt.isPlainText(this.content),this._isPlainText&&zt.hasLongerLines(this.content,76)&&(this._hasLongLines=!0)),this}build(e){let i;e||(i=new Promise((l,p)=>{e=mx.callbackPromise(l,p)}));let r=this.createReadStream(),n=[],a=0,s=!1;return r.on("readable",()=>{let l;for(;(l=r.read())!==null;)n.push(l),a+=l.length}),r.once("error",l=>{if(!s)return s=!0,e(l)}),r.once("end",l=>{if(!s)return s=!0,l&&l.length&&(n.push(l),a+=l.length),e(null,Buffer.concat(n,a))}),i}getTransferEncoding(){let e=!1,i=(this.getHeader("Content-Type")||"").toString().toLowerCase().trim();return this.content&&(e=(this.getHeader("Content-Transfer-Encoding")||"").toString().toLowerCase().trim(),(!e||!["base64","quoted-printable"].includes(e))&&(/^text\//i.test(i)?this._isPlainText&&!this._hasLongLines?e="7bit":typeof this.content=="string"||this.content instanceof Buffer?e=this._getTextEncoding(this.content)==="Q"?"quoted-printable":"base64":e=this.textEncoding==="B"?"base64":"quoted-printable":/^(multipart|message)\//i.test(i)||(e=e||"base64"))),e}buildHeaders(){let e=this.getTransferEncoding(),i=[];if(e&&this.setHeader("Content-Transfer-Encoding",e),this.filename&&!this.getHeader("Content-Disposition")&&this.setHeader("Content-Disposition","attachment"),this.rootNode===this){this.getHeader("Date")||this.setHeader("Date",this.date.toUTCString().replace(/GMT/,"+0000")),this.messageId(),this.getHeader("MIME-Version")||this.setHeader("MIME-Version","1.0");for(let r=this._headers.length-2;r>=0;r--){let n=this._headers[r];n.key==="Content-Type"&&(this._headers.splice(r,1),this._headers.push(n))}}return this._headers.forEach(r=>{let n=r.key,a=r.value,s,l,p={};if(!(a&&typeof a=="object"&&!["From","Sender","To","Cc","Bcc","Reply-To","Date","References"].includes(n)&&(Object.keys(a).forEach(x=>{x!=="value"&&(p[x]=a[x])}),a=(a.value||"").toString(),!a.trim()))){if(p.prepared){p.foldLines?i.push(zt.foldLines(n+": "+a)):i.push(n+": "+a);return}switch(r.key){case"Content-Disposition":s=zt.parseHeaderValue(a),this.filename&&(s.params.filename=this.filename),a=zt.buildHeaderValue(s);break;case"Content-Type":s=zt.parseHeaderValue(a),this._handleContentType(s),s.value.match(/^text\/plain\b/)&&typeof this.content=="string"&&/[\u0080-\uFFFF]/.test(this.content)&&(s.params.charset="utf-8"),a=zt.buildHeaderValue(s),this.filename&&(l=this._encodeWords(this.filename),(l!==this.filename||/[\s'"\\;:/=(),<>@[\]?]|^-/.test(l))&&(l='"'+l+'"'),a+="; name="+l);break;case"Bcc":if(!this.keepBcc)return;break}if(a=this._encodeHeaderValue(n,a),!!(a||"").toString().trim()){if(typeof this.normalizeHeaderKey=="function"){let x=this.normalizeHeaderKey(n,a);x&&typeof x=="string"&&x.length&&(n=x)}i.push(zt.foldLines(n+": "+a,76))}}}),i.join(`\r
`)}createReadStream(e){e=e||{};let i=new ha(e),r=i,n;this.stream(i,e,a=>{if(a){r.emit("error",a);return}i.end()});for(let a=0,s=this._transforms.length;a<s;a++)n=typeof this._transforms[a]=="function"?this._transforms[a]():this._transforms[a],r.once("error",l=>{n.emit("error",l)}),r=r.pipe(n);n=new bx,r.once("error",a=>{n.emit("error",a)}),r=r.pipe(n);for(let a=0,s=this._processFuncs.length;a<s;a++)n=this._processFuncs[a],r=n(r);if(this.newline){let s=["win","windows","dos",`\r
`].includes(this.newline.toString().toLowerCase())?new xx:new wx,l=r.pipe(s);return r.on("error",p=>l.emit("error",p)),l}return r}transform(e){this._transforms.push(e)}processFunc(e){this._processFuncs.push(e)}stream(e,i,r){let n=this.getTransferEncoding(),a,s,l=!1,p=S=>{l||(l=!0,r(S))},y=()=>{let S=0,M=()=>{if(S>=this.childNodes.length)return e.write(`\r
--`+this.boundary+`--\r
`),p();let C=this.childNodes[S++];e.write((S>1?`\r
`:"")+"--"+this.boundary+`\r
`),C.stream(e,i,T=>{if(T)return p(T);setImmediate(M)})};if(this.multipart)setImmediate(M);else return p()},x=()=>{if(this.content){if(Object.prototype.toString.call(this.content)==="[object Error]")return p(this.content);typeof this.content.pipe=="function"&&(this.content.removeListener("error",this._contentErrorHandler),this._contentErrorHandler=M=>p(M),this.content.once("error",this._contentErrorHandler));let S=()=>{["quoted-printable","base64"].includes(n)?(a=new(n==="base64"?yx:gx).Encoder(i),a.pipe(e,{end:!1}),a.once("end",y),a.once("error",M=>p(M)),s=this._getStream(this.content),s.pipe(a)):(s=this._getStream(this.content),s.pipe(e,{end:!1}),s.once("end",y)),s.once("error",M=>p(M))};if(this.content._resolve){let M=[],C=0,T=!1,O=this._getStream(this.content);O.on("error",P=>{T||(T=!0,p(P))}),O.on("readable",()=>{let P;for(;(P=O.read())!==null;)M.push(P),C+=P.length}),O.on("end",()=>{T||(T=!0,this.content._resolve=!1,this.content._resolvedValue=Buffer.concat(M,C),setImmediate(S))})}else setImmediate(S);return}else return setImmediate(y)};this._raw?setImmediate(()=>{if(Object.prototype.toString.call(this._raw)==="[object Error]")return p(this._raw);typeof this._raw.pipe=="function"&&this._raw.removeListener("error",this._contentErrorHandler);let S=this._getStream(this._raw);S.pipe(e,{end:!1}),S.on("error",M=>e.emit("error",M)),S.on("end",y)}):(e.write(this.buildHeaders()+`\r
\r
`),setImmediate(x))}setEnvelope(e){let i;this._envelope={from:!1,to:[]},e.from&&(i=[],this._convertAddresses(this._parseAddresses(e.from),i),i=i.filter(n=>n&&n.address),i.length&&i[0]&&(this._envelope.from=i[0].address)),["to","cc","bcc"].forEach(n=>{e[n]&&this._convertAddresses(this._parseAddresses(e[n]),this._envelope.to)}),this._envelope.to=this._envelope.to.map(n=>n.address).filter(n=>n);let r=["to","cc","bcc","from"];return Object.keys(e).forEach(n=>{r.includes(n)||(this._envelope[n]=e[n])}),this}getAddresses(){let e={};return this._headers.forEach(i=>{let r=i.key.toLowerCase();["from","sender","reply-to","to","cc","bcc"].includes(r)&&(Array.isArray(e[r])||(e[r]=[]),this._convertAddresses(this._parseAddresses(i.value),e[r]))}),e}getEnvelope(){if(this._envelope)return this._envelope;let e={from:!1,to:[]};return this._headers.forEach(i=>{let r=[];i.key==="From"||!e.from&&["Reply-To","Sender"].includes(i.key)?(this._convertAddresses(this._parseAddresses(i.value),r),r.length&&r[0]&&(e.from=r[0].address)):["To","Cc","Bcc"].includes(i.key)&&this._convertAddresses(this._parseAddresses(i.value),e.to)}),e.to=e.to.map(i=>i.address),e}messageId(){let e=this.getHeader("Message-ID");return e||(e=this._generateMessageId(),this.setHeader("Message-ID",e)),e}setRaw(e){return this._raw=e,this._raw&&typeof this._raw.pipe=="function"&&(this._contentErrorHandler=i=>{this._raw.removeListener("error",this._contentErrorHandler),this._raw=i},this._raw.once("error",this._contentErrorHandler)),this}_getStream(e){let i;return e._resolvedValue?(i=new ha,setImmediate(()=>{try{i.end(e._resolvedValue)}catch(r){i.emit("error",r)}}),i):typeof e.pipe=="function"?e:e&&typeof e.path=="string"&&!e.href?this.disableFileAccess?(i=new ha,setImmediate(()=>i.emit("error",new Error("File access rejected for "+e.path))),i):dx.createReadStream(e.path):e&&typeof e.href=="string"?this.disableUrlAccess?(i=new ha,setImmediate(()=>i.emit("error",new Error("Url access rejected for "+e.href))),i):_x(e.href,{headers:e.httpHeaders}):(i=new ha,setImmediate(()=>{try{i.end(e||"")}catch(r){i.emit("error",r)}}),i)}_parseAddresses(e){return[].concat.apply([],[].concat(e).map(i=>i&&i.address?(i.address=this._normalizeAddress(i.address),i.name=i.name||"",[i]):vx(i)))}_normalizeHeaderKey(e){return e=(e||"").toString().replace(/\r?\n|\r/g," ").trim().toLowerCase().replace(/^X-SMTPAPI$|^(MIME|DKIM|ARC|BIMI)\b|^[a-z]|-(SPF|FBL|ID|MD5)$|-[a-z]/gi,i=>i.toUpperCase()).replace(/^Content-Features$/i,"Content-features"),e}_handleContentType(e){this.contentType=e.value.trim().toLowerCase(),this.multipart=/^multipart\//i.test(this.contentType)?this.contentType.substr(this.contentType.indexOf("/")+1):!1,this.multipart?this.boundary=e.params.boundary=e.params.boundary||this.boundary||this._generateBoundary():this.boundary=!1}_generateBoundary(){return this.rootNode.boundaryPrefix+"-"+this.rootNode.baseBoundary+"-Part_"+this._nodeId}_encodeHeaderValue(e,i){switch(e=this._normalizeHeaderKey(e),e){case"From":case"Sender":case"To":case"Cc":case"Bcc":case"Reply-To":return this._convertAddresses(this._parseAddresses(i));case"Message-ID":case"In-Reply-To":case"Content-Id":return i=(i||"").toString().replace(/\r?\n|\r/g," "),i.charAt(0)!=="<"&&(i="<"+i),i.charAt(i.length-1)!==">"&&(i=i+">"),i;case"References":return i=[].concat.apply([],[].concat(i||"").map(r=>(r=(r||"").toString().replace(/\r?\n|\r/g," ").trim(),r.replace(/<[^>]*>/g,n=>n.replace(/\s/g,"")).split(/\s+/)))).map(r=>(r.charAt(0)!=="<"&&(r="<"+r),r.charAt(r.length-1)!==">"&&(r=r+">"),r)),i.join(" ").trim();case"Date":return Object.prototype.toString.call(i)==="[object Date]"?i.toUTCString().replace(/GMT/,"+0000"):(i=(i||"").toString().replace(/\r?\n|\r/g," "),this._encodeWords(i));case"Content-Type":case"Content-Disposition":return(i||"").toString().replace(/\r?\n|\r/g," ");default:return i=(i||"").toString().replace(/\r?\n|\r/g," "),this._encodeWords(i)}}_convertAddresses(e,i){let r=[];return i=i||[],[].concat(e||[]).forEach(n=>{if(n.address)n.address=this._normalizeAddress(n.address),n.name?n.name&&r.push(`${this._encodeAddressName(n.name)} <${n.address}>`):r.push(n.address.indexOf(" ")>=0?`<${n.address}>`:`${n.address}`),n.address&&(i.filter(a=>a.address===n.address).length||i.push(n));else if(n.group){let a=(n.group.length?this._convertAddresses(n.group,i):"").trim();r.push(`${this._encodeAddressName(n.name)}:${a};`)}}),r.join(", ")}_normalizeAddress(e){e=(e||"").toString().replace(/[\x00-\x1F<>]+/g," ").trim();let i=e.lastIndexOf("@");if(i<0)return e;let r=e.substr(0,i),n=e.substr(i+1),a;try{a=hx.toASCII(n.toLowerCase())}catch{}return r.indexOf(" ")>=0&&(r.charAt(0)!=='"'&&(r='"'+r),r.substr(-1)!=='"'&&(r=r+'"')),`${r}@${a}`}_encodeAddressName(e){return/^[\w ]*$/.test(e)?e:/^[\x20-\x7e]*$/.test(e)?'"'+e.replace(/([\\"])/g,"\\$1")+'"':zt.encodeWord(e,this._getTextEncoding(e),52)}_encodeWords(e){return zt.encodeWords(e,this._getTextEncoding(e),52,!0)}_getTextEncoding(e){e=(e||"").toString();let i=this.textEncoding,r,n;return i||(n=(e.match(/[\x00-\x08\x0B\x0C\x0E-\x1F\u0080-\uFFFF]/g)||[]).length,r=(e.match(/[a-z]/gi)||[]).length,i=n<r?"Q":"B"),i}_generateMessageId(){return"<"+[2,2,2,6].reduce((e,i)=>e+"-"+gc.randomBytes(i).toString("hex"),gc.randomBytes(4).toString("hex"))+"@"+(this.getEnvelope().from||this.hostname||"localhost").split("@").pop()+">"}};xd.exports=yc});var Ed=R((fP,wd)=>{"use strict";var ma=vc(),_c=da(),Ex=ct().parseDataURI,bc=class{constructor(e){this.mail=e||{},this.message=!1}compile(){return this._alternatives=this.getAlternatives(),this._htmlNode=this._alternatives.filter(e=>/^text\/html\b/i.test(e.contentType)).pop(),this._attachments=this.getAttachments(!!this._htmlNode),this._useRelated=!!(this._htmlNode&&this._attachments.related.length),this._useAlternative=this._alternatives.length>1,this._useMixed=this._attachments.attached.length>1||this._alternatives.length&&this._attachments.attached.length===1,this.mail.raw?this.message=new ma("message/rfc822",{newline:this.mail.newline}).setRaw(this.mail.raw):this._useMixed?this.message=this._createMixed():this._useAlternative?this.message=this._createAlternative():this._useRelated?this.message=this._createRelated():this.message=this._createContentNode(!1,[].concat(this._alternatives||[]).concat(this._attachments.attached||[]).shift()||{contentType:"text/plain",content:""}),this.mail.headers&&this.message.addHeader(this.mail.headers),["from","sender","to","cc","bcc","reply-to","in-reply-to","references","subject","message-id","date"].forEach(e=>{let i=e.replace(/-(\w)/g,(r,n)=>n.toUpperCase());this.mail[i]&&this.message.setHeader(e,this.mail[i])}),this.mail.envelope&&this.message.setEnvelope(this.mail.envelope),this.message.messageId(),this.message}getAttachments(e){let i,r,n=[].concat(this.mail.attachments||[]).map((a,s)=>{let l,p=/^message\//i.test(a.contentType);/^data:/i.test(a.path||a.href)&&(a=this._processDataUrl(a));let y=a.contentType||_c.detectMimeType(a.filename||a.path||a.href||"bin"),x=/^image\//i.test(y),S=a.contentDisposition||(p||x&&a.cid?"inline":"attachment");return l={contentType:y,contentDisposition:S,contentTransferEncoding:"contentTransferEncoding"in a?a.contentTransferEncoding:"base64"},a.filename?l.filename=a.filename:!p&&a.filename!==!1&&(l.filename=(a.path||a.href||"").split("/").pop().split("?").shift()||"attachment-"+(s+1),l.filename.indexOf(".")<0&&(l.filename+="."+_c.detectExtension(l.contentType))),/^https?:\/\//i.test(a.path)&&(a.href=a.path,a.path=void 0),a.cid&&(l.cid=a.cid),a.raw?l.raw=a.raw:a.path?l.content={path:a.path}:a.href?l.content={href:a.href,httpHeaders:a.httpHeaders}:l.content=a.content||"",a.encoding&&(l.encoding=a.encoding),a.headers&&(l.headers=a.headers),l});return this.mail.icalEvent&&(typeof this.mail.icalEvent=="object"&&(this.mail.icalEvent.content||this.mail.icalEvent.path||this.mail.icalEvent.href||this.mail.icalEvent.raw)?i=this.mail.icalEvent:i={content:this.mail.icalEvent},r={},Object.keys(i).forEach(a=>{r[a]=i[a]}),r.contentType="application/ics",r.headers||(r.headers={}),r.filename=r.filename||"invite.ics",r.headers["Content-Disposition"]="attachment",r.headers["Content-Transfer-Encoding"]="base64"),e?{attached:n.filter(a=>!a.cid).concat(r||[]),related:n.filter(a=>!!a.cid)}:{attached:n.concat(r||[]),related:[]}}getAlternatives(){let e=[],i,r,n,a,s,l;return this.mail.text&&(typeof this.mail.text=="object"&&(this.mail.text.content||this.mail.text.path||this.mail.text.href||this.mail.text.raw)?i=this.mail.text:i={content:this.mail.text},i.contentType="text/plain; charset=utf-8"),this.mail.watchHtml&&(typeof this.mail.watchHtml=="object"&&(this.mail.watchHtml.content||this.mail.watchHtml.path||this.mail.watchHtml.href||this.mail.watchHtml.raw)?n=this.mail.watchHtml:n={content:this.mail.watchHtml},n.contentType="text/watch-html; charset=utf-8"),this.mail.amp&&(typeof this.mail.amp=="object"&&(this.mail.amp.content||this.mail.amp.path||this.mail.amp.href||this.mail.amp.raw)?a=this.mail.amp:a={content:this.mail.amp},a.contentType="text/x-amp-html; charset=utf-8"),this.mail.icalEvent&&(typeof this.mail.icalEvent=="object"&&(this.mail.icalEvent.content||this.mail.icalEvent.path||this.mail.icalEvent.href||this.mail.icalEvent.raw)?s=this.mail.icalEvent:s={content:this.mail.icalEvent},l={},Object.keys(s).forEach(p=>{l[p]=s[p]}),l.content&&typeof l.content=="object"&&(l.content._resolve=!0),l.filename=!1,l.contentType="text/calendar; charset=utf-8; method="+(l.method||"PUBLISH").toString().trim().toUpperCase(),l.headers||(l.headers={})),this.mail.html&&(typeof this.mail.html=="object"&&(this.mail.html.content||this.mail.html.path||this.mail.html.href||this.mail.html.raw)?r=this.mail.html:r={content:this.mail.html},r.contentType="text/html; charset=utf-8"),[].concat(i||[]).concat(n||[]).concat(a||[]).concat(r||[]).concat(l||[]).concat(this.mail.alternatives||[]).forEach(p=>{let y;/^data:/i.test(p.path||p.href)&&(p=this._processDataUrl(p)),y={contentType:p.contentType||_c.detectMimeType(p.filename||p.path||p.href||"txt"),contentTransferEncoding:p.contentTransferEncoding},p.filename&&(y.filename=p.filename),/^https?:\/\//i.test(p.path)&&(p.href=p.path,p.path=void 0),p.raw?y.raw=p.raw:p.path?y.content={path:p.path}:p.href?y.content={href:p.href}:y.content=p.content||"",p.encoding&&(y.encoding=p.encoding),p.headers&&(y.headers=p.headers),e.push(y)}),e}_createMixed(e){let i;return e?i=e.createChild("multipart/mixed",{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):i=new ma("multipart/mixed",{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._useAlternative?this._createAlternative(i):this._useRelated&&this._createRelated(i),[].concat(!this._useAlternative&&this._alternatives||[]).concat(this._attachments.attached||[]).forEach(r=>{(!this._useRelated||r!==this._htmlNode)&&this._createContentNode(i,r)}),i}_createAlternative(e){let i;return e?i=e.createChild("multipart/alternative",{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):i=new ma("multipart/alternative",{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._alternatives.forEach(r=>{this._useRelated&&this._htmlNode===r?this._createRelated(i):this._createContentNode(i,r)}),i}_createRelated(e){let i;return e?i=e.createChild('multipart/related; type="text/html"',{disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):i=new ma('multipart/related; type="text/html"',{baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),this._createContentNode(i,this._htmlNode),this._attachments.related.forEach(r=>this._createContentNode(i,r)),i}_createContentNode(e,i){i=i||{},i.content=i.content||"";let r,n=(i.encoding||"utf8").toString().toLowerCase().replace(/[-_\s]/g,"");return e?r=e.createChild(i.contentType,{filename:i.filename,textEncoding:this.mail.textEncoding,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}):r=new ma(i.contentType,{filename:i.filename,baseBoundary:this.mail.baseBoundary,textEncoding:this.mail.textEncoding,boundaryPrefix:this.mail.boundaryPrefix,disableUrlAccess:this.mail.disableUrlAccess,disableFileAccess:this.mail.disableFileAccess,normalizeHeaderKey:this.mail.normalizeHeaderKey,newline:this.mail.newline}),i.headers&&r.addHeader(i.headers),i.cid&&r.setHeader("Content-Id","<"+i.cid.replace(/[<>]/g,"")+">"),i.contentTransferEncoding?r.setHeader("Content-Transfer-Encoding",i.contentTransferEncoding):this.mail.encoding&&/^text\//i.test(i.contentType)&&r.setHeader("Content-Transfer-Encoding",this.mail.encoding),(!/^text\//i.test(i.contentType)||i.contentDisposition)&&r.setHeader("Content-Disposition",i.contentDisposition||(i.cid&&/^image\//i.test(i.contentType)?"inline":"attachment")),typeof i.content=="string"&&!["utf8","usascii","ascii"].includes(n)&&(i.content=Buffer.from(i.content,n)),i.raw?r.setRaw(i.raw):r.setContent(i.content),r}_processDataUrl(e){let i;return(e.path||e.href).match(/^data:/)&&(i=Ex(e.path||e.href)),i&&(e.content=i.data,e.contentType=e.contentType||i.contentType,"path"in e&&(e.path=!1),"href"in e&&(e.href=!1)),e}};wd.exports=bc});var Sd=R((pP,Md)=>{"use strict";var Mx=require("stream").Transform,xc=class extends Mx{constructor(e){super(e),this.lastBytes=Buffer.alloc(4),this.headersParsed=!1,this.headerBytes=0,this.headerChunks=[],this.rawHeaders=!1,this.bodySize=0}updateLastBytes(e){let i=this.lastBytes.length,r=Math.min(e.length,i);for(let n=0,a=i-r;n<a;n++)this.lastBytes[n]=this.lastBytes[n+r];for(let n=1;n<=r;n++)this.lastBytes[i-n]=e[e.length-n]}checkHeaders(e){if(this.headersParsed)return!0;let i=this.lastBytes.length,r=0;this.curLinePos=0;for(let n=0,a=this.lastBytes.length+e.length;n<a;n++){let s;if(n<i?s=this.lastBytes[n]:s=e[n-i],s===10&&n){let l=n-1<i?this.lastBytes[n-1]:e[n-1-i],p=n>1?n-2<i?this.lastBytes[n-2]:e[n-2-i]:!1;if(l===10){this.headersParsed=!0,r=n-i+1,this.headerBytes+=r;break}else if(l===13&&p===10){this.headersParsed=!0,r=n-i+1,this.headerBytes+=r;break}}}if(this.headersParsed){if(this.headerChunks.push(e.slice(0,r)),this.rawHeaders=Buffer.concat(this.headerChunks,this.headerBytes),this.headerChunks=null,this.emit("headers",this.parseHeaders()),e.length-1>r){let n=e.slice(r);this.bodySize+=n.length,setImmediate(()=>this.push(n))}return!1}else this.headerBytes+=e.length,this.headerChunks.push(e);return this.updateLastBytes(e),!1}_transform(e,i,r){if(!e||!e.length)return r();typeof e=="string"&&(e=Buffer.from(e,i));let n;try{n=this.checkHeaders(e)}catch(a){return r(a)}n&&(this.bodySize+=e.length,this.push(e)),setImmediate(r)}_flush(e){if(this.headerChunks){let i=Buffer.concat(this.headerChunks,this.headerBytes);this.bodySize+=i.length,this.push(i),this.headerChunks=null}e()}parseHeaders(){let e=(this.rawHeaders||"").toString().split(/\r?\n/);for(let i=e.length-1;i>0;i--)/^\s/.test(e[i])&&(e[i-1]+=`
`+e[i],e.splice(i,1));return e.filter(i=>i.trim()).map(i=>({key:i.substr(0,i.indexOf(":")).trim().toLowerCase(),line:i}))}};Md.exports=xc});var Td=R((dP,Ad)=>{"use strict";var Sx=require("stream").Transform,Ax=require("crypto"),wc=class extends Sx{constructor(e){super(),e=e||{},this.chunkBuffer=[],this.chunkBufferLen=0,this.bodyHash=Ax.createHash(e.hashAlgo||"sha1"),this.remainder="",this.byteLength=0,this.debug=e.debug,this._debugBody=e.debug?[]:!1}updateHash(e){let i,r="",n="file";for(let s=e.length-1;s>=0;s--){let l=e[s];if(!(n==="file"&&(l===10||l===13))){if(n==="file"&&(l===9||l===32))n="line";else if(!(n==="line"&&(l===9||l===32))){if((n==="file"||n==="line")&&(n="body",s===e.length-1))break}}if(s===0){if(n==="file"&&(!this.remainder||/[\r\n]$/.test(this.remainder))||n==="line"&&(!this.remainder||/[ \t]$/.test(this.remainder))){this.remainder+=e.toString("binary");return}else if(n==="line"||n==="file"){r=e.toString("binary"),e=!1;break}}if(n==="body"){r=e.slice(s+1).toString("binary"),e=e.slice(0,s+1);break}}let a=!!this.remainder;if(e&&!a){for(let s=0,l=e.length;s<l;s++)if(s&&e[s]===10&&e[s-1]!==13){a=!0;break}else if(s&&e[s]===13&&e[s-1]===32){a=!0;break}else if(s&&e[s]===32&&e[s-1]===32){a=!0;break}else if(e[s]===9){a=!0;break}}a?(i=this.remainder+(e?e.toString("binary"):""),this.remainder=r,i=i.replace(/\r?\n/g,`
`).replace(/[ \t]*$/gm,"").replace(/[ \t]+/gm," ").replace(/\n/g,`\r
`),e=Buffer.from(i,"binary")):r&&(this.remainder=r),this.debug&&this._debugBody.push(e),this.bodyHash.update(e)}_transform(e,i,r){if(!e||!e.length)return r();typeof e=="string"&&(e=Buffer.from(e,i)),this.updateHash(e),this.byteLength+=e.length,this.push(e),r()}_flush(e){/[\r\n]$/.test(this.remainder)&&this.byteLength>2&&this.bodyHash.update(Buffer.from(`\r
`)),this.byteLength||this.push(Buffer.from(`\r
`)),this.emit("hash",this.bodyHash.digest("base64"),this.debug?Buffer.concat(this._debugBody):!1),e()}};Ad.exports=wc});var Od=R((hP,Ec)=>{"use strict";var Tx=rc(),Rx=da(),Cx=require("crypto");Ec.exports=(t,e,i,r)=>{r=r||{};let a=r.headerFieldNames||"From:Sender:Reply-To:Subject:Date:Message-ID:To:Cc:MIME-Version:Content-Type:Content-Transfer-Encoding:Content-ID:Content-Description:Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:In-Reply-To:References:List-Id:List-Help:List-Unsubscribe:List-Subscribe:List-Post:List-Owner:List-Archive",s=Rd(t,a,r.skipFields),l=Ox(r.domainName,r.keySelector,s.fieldNames,e,i),p,y;s.headers+="dkim-signature:"+Cd(l),p=Cx.createSign(("rsa-"+e).toUpperCase()),p.update(s.headers);try{y=p.sign(r.privateKey,"base64")}catch{return!1}return l+y.replace(/(^.{73}|.{75}(?!\r?\n|\r))/g,`$&\r
 `).trim()};Ec.exports.relaxedHeaders=Rd;function Ox(t,e,i,r,n){let a=["v=1","a=rsa-"+r,"c=relaxed/relaxed","d="+Tx.toASCII(t),"q=dns/txt","s="+e,"bh="+n,"h="+i].join("; ");return Rx.foldLines("DKIM-Signature: "+a,76)+`;\r
 b=`}function Rd(t,e,i){let r=new Set,n=new Set,a=new Map;(i||"").toLowerCase().split(":").forEach(p=>{n.add(p.trim())}),(e||"").toLowerCase().split(":").filter(p=>!n.has(p.trim())).forEach(p=>{r.add(p.trim())});for(let p=t.length-1;p>=0;p--){let y=t[p];r.has(y.key)&&!a.has(y.key)&&a.set(y.key,Cd(y.line))}let s=[],l=[];return r.forEach(p=>{a.has(p)&&(l.push(p),s.push(p+":"+a.get(p)))}),{headers:s.join(`\r
`)+`\r
`,fieldNames:l.join(":")}}function Cd(t){return t.substr(t.indexOf(":")+1).replace(/\r?\n/g,"").replace(/\s+/g," ").trim()}});var Pd=R((mP,Dd)=>{"use strict";var Dx=Sd(),Px=Td(),Ix=Od(),Mc=require("stream").PassThrough,Sc=require("fs"),Lx=require("path"),Nx=require("crypto"),kx="sha256",qx=128*1024,Ac=class{constructor(e,i,r,n){this.options=e||{},this.keys=i,this.cacheTreshold=Number(this.options.cacheTreshold)||qx,this.hashAlgo=this.options.hashAlgo||kx,this.cacheDir=this.options.cacheDir||!1,this.chunks=[],this.chunklen=0,this.readPos=0,this.cachePath=this.cacheDir?Lx.join(this.cacheDir,"message."+Date.now()+"-"+Nx.randomBytes(14).toString("hex")):!1,this.cache=!1,this.headers=!1,this.bodyHash=!1,this.parser=!1,this.relaxedBody=!1,this.input=r,this.output=n,this.output.usingCache=!1,this.hasErrored=!1,this.input.on("error",a=>{this.hasErrored=!0,this.cleanup(),n.emit("error",a)})}cleanup(){!this.cache||!this.cachePath||Sc.unlink(this.cachePath,()=>!1)}createReadCache(){this.cache=Sc.createReadStream(this.cachePath),this.cache.once("error",e=>{this.cleanup(),this.output.emit("error",e)}),this.cache.once("close",()=>{this.cleanup()}),this.cache.pipe(this.output)}sendNextChunk(){if(this.hasErrored)return;if(this.readPos>=this.chunks.length)return this.cache?this.createReadCache():this.output.end();let e=this.chunks[this.readPos++];if(this.output.write(e)===!1)return this.output.once("drain",()=>{this.sendNextChunk()});setImmediate(()=>this.sendNextChunk())}sendSignedOutput(){let e=0,i=()=>{if(e>=this.keys.length)return this.output.write(this.parser.rawHeaders),setImmediate(()=>this.sendNextChunk());let r=this.keys[e++],n=Ix(this.headers,this.hashAlgo,this.bodyHash,{domainName:r.domainName,keySelector:r.keySelector,privateKey:r.privateKey,headerFieldNames:this.options.headerFieldNames,skipFields:this.options.skipFields});return n&&this.output.write(Buffer.from(n+`\r
`)),setImmediate(i)};if(this.bodyHash&&this.headers)return i();this.output.write(this.parser.rawHeaders),this.sendNextChunk()}createWriteCache(){this.output.usingCache=!0,this.cache=Sc.createWriteStream(this.cachePath),this.cache.once("error",e=>{this.cleanup(),this.relaxedBody.unpipe(this.cache),this.relaxedBody.on("readable",()=>{for(;this.relaxedBody.read()!==null;);}),this.hasErrored=!0,this.output.emit("error",e)}),this.cache.once("close",()=>{this.sendSignedOutput()}),this.relaxedBody.removeAllListeners("readable"),this.relaxedBody.pipe(this.cache)}signStream(){this.parser=new Dx,this.relaxedBody=new Px({hashAlgo:this.hashAlgo}),this.parser.on("headers",e=>{this.headers=e}),this.relaxedBody.on("hash",e=>{this.bodyHash=e}),this.relaxedBody.on("readable",()=>{let e;if(!this.cache){for(;(e=this.relaxedBody.read())!==null;)if(this.chunks.push(e),this.chunklen+=e.length,this.chunklen>=this.cacheTreshold&&this.cachePath)return this.createWriteCache()}}),this.relaxedBody.on("end",()=>{this.cache||this.sendSignedOutput()}),this.parser.pipe(this.relaxedBody),setImmediate(()=>this.input.pipe(this.parser))}},Tc=class{constructor(e){this.options=e||{},this.keys=[].concat(this.options.keys||{domainName:e.domainName,keySelector:e.keySelector,privateKey:e.privateKey})}sign(e,i){let r=new Mc,n=e,a=!1;Buffer.isBuffer(e)?(a=e,n=new Mc):typeof e=="string"&&(a=Buffer.from(e),n=new Mc);let s=this.options;i&&Object.keys(i).length&&(s={},Object.keys(this.options||{}).forEach(p=>{s[p]=this.options[p]}),Object.keys(i||{}).forEach(p=>{p in s||(s[p]=i[p])}));let l=new Ac(s,this.keys,n,r);return setImmediate(()=>{l.signStream(),a&&setImmediate(()=>{n.end(a)})}),r}};Dd.exports=Tc});var qd=R((gP,kd)=>{"use strict";var Id=require("net"),Ld=require("tls"),Kx=require("url");function Nd(t,e,i,r){let n=Kx.parse(t),a,s,l;a={host:n.hostname,port:Number(n.port)?Number(n.port):n.protocol==="https:"?443:80},n.protocol==="https:"?(a.rejectUnauthorized=!1,s=Ld.connect.bind(Ld)):s=Id.connect.bind(Id);let p=!1,y=S=>{if(!p){p=!0;try{l.destroy()}catch{}r(S)}},x=()=>{let S=new Error("Proxy socket timed out");S.code="ETIMEDOUT",y(S)};l=s(a,()=>{if(p)return;let S={Host:i+":"+e,Connection:"close"};n.auth&&(S["Proxy-Authorization"]="Basic "+Buffer.from(n.auth).toString("base64")),l.write("CONNECT "+i+":"+e+` HTTP/1.1\r
`+Object.keys(S).map(T=>T+": "+S[T]).join(`\r
`)+`\r
\r
`);let M="",C=T=>{let O,P;if(!p&&(M+=T.toString("binary"),O=M.match(/\r\n\r\n/))){if(l.removeListener("data",C),P=M.substr(O.index+O[0].length),M=M.substr(0,O.index),P&&l.unshift(Buffer.from(P,"binary")),p=!0,O=M.match(/^HTTP\/\d+\.\d+ (\d+)/i),!O||(O[1]||"").charAt(0)!=="2"){try{l.destroy()}catch{}return r(new Error("Invalid response from proxy"+(O&&": "+O[1]||"")))}return l.removeListener("error",y),l.removeListener("timeout",x),l.setTimeout(0),r(null,l)}};l.on("data",C)}),l.setTimeout(Nd.timeout||30*1e3),l.on("timeout",x),l.once("error",y)}kd.exports=Nd});var Fd=R((yP,jd)=>{"use strict";var Kd=ct(),jx=vc(),Fr=da(),Rc=class{constructor(e,i){this.mailer=e,this.data={},this.message=null,i=i||{};let r=e.options||{},n=e._defaults||{};Object.keys(i).forEach(a=>{this.data[a]=i[a]}),this.data.headers=this.data.headers||{},Object.keys(n).forEach(a=>{a in this.data?a==="headers"&&Object.keys(n.headers).forEach(s=>{s in this.data.headers||(this.data.headers[s]=n.headers[s])}):this.data[a]=n[a]}),["disableFileAccess","disableUrlAccess","normalizeHeaderKey"].forEach(a=>{a in r&&(this.data[a]=r[a])})}resolveContent(...e){return Kd.resolveContent(...e)}resolveAll(e){let i=[[this.data,"html"],[this.data,"text"],[this.data,"watchHtml"],[this.data,"amp"],[this.data,"icalEvent"]];this.data.alternatives&&this.data.alternatives.length&&this.data.alternatives.forEach((p,y)=>{i.push([this.data.alternatives,y])}),this.data.attachments&&this.data.attachments.length&&this.data.attachments.forEach((p,y)=>{p.filename||(p.filename=(p.path||p.href||"").split("/").pop().split("?").shift()||"attachment-"+(y+1),p.filename.indexOf(".")<0&&(p.filename+="."+Fr.detectExtension(p.contentType))),p.contentType||(p.contentType=Fr.detectMimeType(p.filename||p.path||p.href||"bin")),i.push([this.data.attachments,y])});let r=new jx;["from","to","cc","bcc","sender","replyTo"].forEach(p=>{let y;this.message?y=[].concat(r._parseAddresses(this.message.getHeader(p==="replyTo"?"reply-to":p))||[]):this.data[p]&&(y=[].concat(r._parseAddresses(this.data[p])||[])),y&&y.length?this.data[p]=y:p in this.data&&(this.data[p]=null)}),["from","sender"].forEach(p=>{this.data[p]&&(this.data[p]=this.data[p].shift())});let s=0,l=()=>{if(s>=i.length)return e(null,this.data);let p=i[s++];if(!p[0]||!p[0][p[1]])return l();Kd.resolveContent(...p,(y,x)=>{if(y)return e(y);let S={content:x};p[0][p[1]]&&typeof p[0][p[1]]=="object"&&!Buffer.isBuffer(p[0][p[1]])&&Object.keys(p[0][p[1]]).forEach(M=>{!(M in S)&&!["content","path","href","raw"].includes(M)&&(S[M]=p[0][p[1]][M])}),p[0][p[1]]=S,l()})};setImmediate(()=>l())}normalize(e){let i=this.data.envelope||this.message.getEnvelope(),r=this.message.messageId();this.resolveAll((n,a)=>n?e(n):(a.envelope=i,a.messageId=r,["html","text","watchHtml","amp"].forEach(s=>{a[s]&&a[s].content&&(typeof a[s].content=="string"?a[s]=a[s].content:Buffer.isBuffer(a[s].content)&&(a[s]=a[s].content.toString()))}),a.icalEvent&&Buffer.isBuffer(a.icalEvent.content)&&(a.icalEvent.content=a.icalEvent.content.toString("base64"),a.icalEvent.encoding="base64"),a.alternatives&&a.alternatives.length&&a.alternatives.forEach(s=>{s&&s.content&&Buffer.isBuffer(s.content)&&(s.content=s.content.toString("base64"),s.encoding="base64")}),a.attachments&&a.attachments.length&&a.attachments.forEach(s=>{s&&s.content&&Buffer.isBuffer(s.content)&&(s.content=s.content.toString("base64"),s.encoding="base64")}),a.normalizedHeaders={},Object.keys(a.headers||{}).forEach(s=>{let l=[].concat(a.headers[s]||[]).shift();l=l&&l.value||l,l&&(["references","in-reply-to","message-id","content-id"].includes(s)&&(l=this.message._encodeHeaderValue(s,l)),a.normalizedHeaders[s]=l)}),a.list&&typeof a.list=="object"&&this._getListHeaders(a.list).forEach(l=>{a.normalizedHeaders[l.key]=l.value.map(p=>p&&p.value||p).join(", ")}),a.references&&(a.normalizedHeaders.references=this.message._encodeHeaderValue("references",a.references)),a.inReplyTo&&(a.normalizedHeaders["in-reply-to"]=this.message._encodeHeaderValue("in-reply-to",a.inReplyTo)),e(null,a)))}setMailerHeader(){!this.message||!this.data.xMailer||this.message.setHeader("X-Mailer",this.data.xMailer)}setPriorityHeaders(){if(!(!this.message||!this.data.priority))switch((this.data.priority||"").toString().toLowerCase()){case"high":this.message.setHeader("X-Priority","1 (Highest)"),this.message.setHeader("X-MSMail-Priority","High"),this.message.setHeader("Importance","High");break;case"low":this.message.setHeader("X-Priority","5 (Lowest)"),this.message.setHeader("X-MSMail-Priority","Low"),this.message.setHeader("Importance","Low");break;default:}}setListHeaders(){!this.message||!this.data.list||typeof this.data.list!="object"||this.data.list&&typeof this.data.list=="object"&&this._getListHeaders(this.data.list).forEach(e=>{e.value.forEach(i=>{this.message.addHeader(e.key,i)})})}_getListHeaders(e){return Object.keys(e).map(i=>({key:"list-"+i.toLowerCase().trim(),value:[].concat(e[i]||[]).map(r=>({prepared:!0,foldLines:!0,value:[].concat(r||[]).map(n=>{if(typeof n=="string"&&(n={url:n}),n&&n.url){if(i.toLowerCase().trim()==="id"){let s=n.comment||"";return Fr.isPlainText(s)?s='"'+s+'"':s=Fr.encodeWord(s),(n.comment?s+" ":"")+this._formatListUrl(n.url).replace(/^<[^:]+\/{,2}/,"")}let a=n.comment||"";return Fr.isPlainText(a)||(a=Fr.encodeWord(a)),this._formatListUrl(n.url)+(n.comment?" ("+a+")":"")}return""}).filter(n=>n).join(", ")}))}))}_formatListUrl(e){return e=e.replace(/[\s<]+|[\s>]+/g,""),/^(https?|mailto|ftp):/.test(e)?"<"+e+">":/^[^@]+@[^@]+$/.test(e)?"<mailto:"+e+">":"<http://"+e+">"}};jd.exports=Rc});var Gd=R((vP,Ud)=>{"use strict";var Fx=require("events"),Hd=ct(),Hx=ec(),Bx=Ed(),Bd=Pd(),Ux=qd(),Gx=require("util"),zx=require("url"),Cc=Gt(),Vx=Fd(),Wx=require("net"),Yx=require("dns"),$x=require("crypto"),Oc=class extends Fx{constructor(e,i,r){super(),this.options=i||{},this._defaults=r||{},this._defaultPlugins={compile:[(...n)=>this._convertDataImages(...n)],stream:[]},this._userPlugins={compile:[],stream:[]},this.meta=new Map,this.dkim=this.options.dkim?new Bd(this.options.dkim):!1,this.transporter=e,this.transporter.mailer=this,this.logger=Hd.getLogger(this.options,{component:this.options.component||"mail"}),this.logger.debug({tnx:"create"},"Creating transport: %s",this.getVersionString()),typeof this.transporter.on=="function"&&(this.transporter.on("log",n=>{this.logger.debug({tnx:"transport"},"%s: %s",n.type,n.message)}),this.transporter.on("error",n=>{this.logger.error({err:n,tnx:"transport"},"Transport Error: %s",n.message),this.emit("error",n)}),this.transporter.on("idle",(...n)=>{this.emit("idle",...n)})),["close","isIdle","verify"].forEach(n=>{this[n]=(...a)=>typeof this.transporter[n]=="function"?(n==="verify"&&typeof this.getSocket=="function"&&(this.transporter.getSocket=this.getSocket,this.getSocket=!1),this.transporter[n](...a)):(this.logger.warn({tnx:"transport",methodName:n},"Non existing method %s called for transport",n),!1)}),this.options.proxy&&typeof this.options.proxy=="string"&&this.setupProxy(this.options.proxy)}use(e,i){return e=(e||"").toString(),this._userPlugins.hasOwnProperty(e)?this._userPlugins[e].push(i):this._userPlugins[e]=[i],this}sendMail(e,i=null){let r;i||(r=new Promise((a,s)=>{i=Hd.callbackPromise(a,s)})),typeof this.getSocket=="function"&&(this.transporter.getSocket=this.getSocket,this.getSocket=!1);let n=new Vx(this,e);return this.logger.debug({tnx:"transport",name:this.transporter.name,version:this.transporter.version,action:"send"},"Sending mail using %s/%s",this.transporter.name,this.transporter.version),this._processPlugins("compile",n,a=>{if(a)return this.logger.error({err:a,tnx:"plugin",action:"compile"},"PluginCompile Error: %s",a.message),i(a);n.message=new Bx(n.data).compile(),n.setMailerHeader(),n.setPriorityHeaders(),n.setListHeaders(),this._processPlugins("stream",n,s=>{if(s)return this.logger.error({err:s,tnx:"plugin",action:"stream"},"PluginStream Error: %s",s.message),i(s);(n.data.dkim||this.dkim)&&n.message.processFunc(l=>{let p=n.data.dkim?new Bd(n.data.dkim):this.dkim;return this.logger.debug({tnx:"DKIM",messageId:n.message.messageId(),dkimDomains:p.keys.map(y=>y.keySelector+"."+y.domainName).join(", ")},"Signing outgoing message with %s keys",p.keys.length),p.sign(l,n.data._dkim)}),this.transporter.send(n,(...l)=>{l[0]&&this.logger.error({err:l[0],tnx:"transport",action:"send"},"Send Error: %s",l[0].message),i(...l)})})}),r}getVersionString(){return Gx.format("%s (%s; +%s; %s/%s)",Cc.name,Cc.version,Cc.homepage,this.transporter.name,this.transporter.version)}_processPlugins(e,i,r){if(e=(e||"").toString(),!this._userPlugins.hasOwnProperty(e))return r();let n=this._userPlugins[e]||[],a=this._defaultPlugins[e]||[];if(n.length&&this.logger.debug({tnx:"transaction",pluginCount:n.length,step:e},"Using %s plugins for %s",n.length,e),n.length+a.length===0)return r();let s=0,l="default",p=()=>{let y=l==="default"?a:n;if(s>=y.length)if(l==="default"&&n.length)l="user",s=0,y=n;else return r();let x=y[s++];x(i,S=>{if(S)return r(S);p()})};p()}setupProxy(e){let i=zx.parse(e);this.getSocket=(r,n)=>{let a=i.protocol.replace(/:$/,"").toLowerCase();if(this.meta.has("proxy_handler_"+a))return this.meta.get("proxy_handler_"+a)(i,r,n);switch(a){case"http":case"https":Ux(i.href,r.port,r.host,(s,l)=>s?n(s):n(null,{connection:l}));return;case"socks":case"socks5":case"socks4":case"socks4a":{if(!this.meta.has("proxy_socks_module"))return n(new Error("Socks module not loaded"));let s=l=>{let p=!!this.meta.get("proxy_socks_module").SocksClient,y=p?this.meta.get("proxy_socks_module").SocksClient:this.meta.get("proxy_socks_module"),x=Number(i.protocol.replace(/\D/g,""))||5,S={proxy:{ipaddress:l,port:Number(i.port),type:x},[p?"destination":"target"]:{host:r.host,port:r.port},command:"connect"};if(i.auth){let M=decodeURIComponent(i.auth.split(":").shift()),C=decodeURIComponent(i.auth.split(":").pop());p?(S.proxy.userId=M,S.proxy.password=C):x===4?S.userid=M:S.authentication={username:M,password:C}}y.createConnection(S,(M,C)=>M?n(M):n(null,{connection:C.socket||C}))};return Wx.isIP(i.hostname)?s(i.hostname):Yx.resolve(i.hostname,(l,p)=>{if(l)return n(l);s(Array.isArray(p)?p[0]:p)})}}n(new Error("Unknown proxy configuration"))}}_convertDataImages(e,i){if(!this.options.attachDataUrls&&!e.data.attachDataUrls||!e.data.html)return i();e.resolveContent(e.data,"html",(r,n)=>{if(r)return i(r);let a=0;n=(n||"").toString().replace(/(<img\b[^<>]{0,1024} src\s{0,20}=[\s"']{0,20})(data:([^;]+);[^"'>\s]+)/gi,(s,l,p,y)=>{let x=$x.randomBytes(10).toString("hex")+"@localhost";return e.data.attachments||(e.data.attachments=[]),Array.isArray(e.data.attachments)||(e.data.attachments=[].concat(e.data.attachments||[])),e.data.attachments.push({path:p,cid:x,filename:"image-"+ ++a+"."+Hx.detectExtension(y)}),l+"cid:"+x}),e.data.html=n,i()})}set(e,i){return this.meta.set(e,i)}get(e){return this.meta.get(e)}};Ud.exports=Oc});var Vd=R((_P,zd)=>{"use strict";var Zx=require("stream"),Qx=Zx.Transform,Dc=class extends Qx{constructor(e){super(e),this.options=e||{},this._curLine="",this.inByteCount=0,this.outByteCount=0,this.lastByte=!1}_transform(e,i,r){let n=[],a=0,s,l,p=0,y;if(!e||!e.length)return r();for(typeof e=="string"&&(e=Buffer.from(e)),this.inByteCount+=e.length,s=0,l=e.length;s<l;s++)e[s]===46?(s&&e[s-1]===10||!s&&(!this.lastByte||this.lastByte===10))&&(y=e.slice(p,s+1),n.push(y),n.push(Buffer.from(".")),a+=y.length+1,p=s+1):e[s]===10&&(s&&e[s-1]!==13||!s&&this.lastByte!==13)&&(s>p?(y=e.slice(p,s),n.push(y),a+=y.length+2):a+=2,n.push(Buffer.from(`\r
`)),p=s+1);a?(p<e.length&&(y=e.slice(p),n.push(y),a+=y.length),this.outByteCount+=a,this.push(Buffer.concat(n,a))):(this.outByteCount+=e.length,this.push(e)),this.lastByte=e[e.length-1],r()}_flush(e){let i;this.lastByte===10?i=Buffer.from(`.\r
`):this.lastByte===13?i=Buffer.from(`
.\r
`):i=Buffer.from(`\r
.\r
`),this.outByteCount+=i.length,this.push(i),e()}};zd.exports=Dc});var gs=R((bP,Qd)=>{"use strict";var Xx=Gt(),Jx=require("events").EventEmitter,Wd=require("net"),Yd=require("tls"),ew=require("os"),$d=require("crypto"),tw=Vd(),iw=require("stream").PassThrough,pi=ct(),rw=2*60*1e3,Zd=10*60*1e3,nw=30*1e3,aw=30*1e3,Pc=class extends Jx{constructor(e){super(e),this.id=$d.randomBytes(8).toString("base64").replace(/\W/g,""),this.stage="init",this.options=e||{},this.secureConnection=!!this.options.secure,this.alreadySecured=!!this.options.secured,this.port=Number(this.options.port)||(this.secureConnection?465:587),this.host=this.options.host||"localhost",this.servername=this.options.servername?this.options.servername:Wd.isIP(this.host)?!1:this.host,this.allowInternalNetworkInterfaces=this.options.allowInternalNetworkInterfaces||!1,typeof this.options.secure>"u"&&this.port===465&&(this.secureConnection=!0),this.name=this.options.name||this._getHostname(),this.logger=pi.getLogger(this.options,{component:this.options.component||"smtp-connection",sid:this.id}),this.customAuth=new Map,Object.keys(this.options.customAuth||{}).forEach(i=>{let r=(i||"").toString().trim().toUpperCase();r&&this.customAuth.set(r,this.options.customAuth[i])}),this.version=Xx.version,this.authenticated=!1,this.destroyed=!1,this.secure=!!this.secureConnection,this._remainder="",this._responseQueue=[],this.lastServerResponse=!1,this._socket=!1,this._supportedAuth=[],this.allowsAuth=!1,this._envelope=!1,this._supportedExtensions=[],this._maxAllowedSize=0,this._responseActions=[],this._recipientQueue=[],this._greetingTimeout=!1,this._connectionTimeout=!1,this._destroyed=!1,this._closing=!1,this._onSocketData=i=>this._onData(i),this._onSocketError=i=>this._onError(i,"ESOCKET",!1,"CONN"),this._onSocketClose=()=>this._onClose(),this._onSocketEnd=()=>this._onEnd(),this._onSocketTimeout=()=>this._onTimeout()}connect(e){if(typeof e=="function"){this.once("connect",()=>{this.logger.debug({tnx:"smtp"},"SMTP handshake finished"),e()});let n=this._isDestroyedMessage("connect");if(n)return e(this._formatError(n,"ECONNECTION",!1,"CONN"))}let i={port:this.port,host:this.host,allowInternalNetworkInterfaces:this.allowInternalNetworkInterfaces,timeout:this.options.dnsTimeout||aw};this.options.localAddress&&(i.localAddress=this.options.localAddress);let r=()=>{this._connectionTimeout=setTimeout(()=>{this._onError("Connection timeout","ETIMEDOUT",!1,"CONN")},this.options.connectionTimeout||rw),this._socket.on("error",this._onSocketError)};if(this.options.connection){this._socket=this.options.connection,this.secureConnection&&!this.alreadySecured?setImmediate(()=>this._upgradeConnection(n=>{if(n){this._onError(new Error("Error initiating TLS - "+(n.message||n)),"ETLS",!1,"CONN");return}this._onConnect()})):setImmediate(()=>this._onConnect());return}else return this.options.socket?(this._socket=this.options.socket,pi.resolveHostname(i,(n,a)=>{if(n)return setImmediate(()=>this._onError(n,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:i.host,resolved:a.host,cached:!!a.cached},"Resolved %s as %s [cache %s]",i.host,a.host,a.cached?"hit":"miss"),Object.keys(a).forEach(s=>{s.charAt(0)!=="_"&&a[s]&&(i[s]=a[s])});try{this._socket.connect(this.port,this.host,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),r()}catch(s){return setImmediate(()=>this._onError(s,"ECONNECTION",!1,"CONN"))}})):this.secureConnection?(this.options.tls&&Object.keys(this.options.tls).forEach(n=>{i[n]=this.options.tls[n]}),this.servername&&!i.servername&&(i.servername=this.servername),pi.resolveHostname(i,(n,a)=>{if(n)return setImmediate(()=>this._onError(n,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:i.host,resolved:a.host,cached:!!a.cached},"Resolved %s as %s [cache %s]",i.host,a.host,a.cached?"hit":"miss"),Object.keys(a).forEach(s=>{s.charAt(0)!=="_"&&a[s]&&(i[s]=a[s])});try{this._socket=Yd.connect(i,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),r()}catch(s){return setImmediate(()=>this._onError(s,"ECONNECTION",!1,"CONN"))}})):pi.resolveHostname(i,(n,a)=>{if(n)return setImmediate(()=>this._onError(n,"EDNS",!1,"CONN"));this.logger.debug({tnx:"dns",source:i.host,resolved:a.host,cached:!!a.cached},"Resolved %s as %s [cache %s]",i.host,a.host,a.cached?"hit":"miss"),Object.keys(a).forEach(s=>{s.charAt(0)!=="_"&&a[s]&&(i[s]=a[s])});try{this._socket=Wd.connect(i,()=>{this._socket.setKeepAlive(!0),this._onConnect()}),r()}catch(s){return setImmediate(()=>this._onError(s,"ECONNECTION",!1,"CONN"))}})}quit(){this._sendCommand("QUIT"),this._responseActions.push(this.close)}close(){if(clearTimeout(this._connectionTimeout),clearTimeout(this._greetingTimeout),this._responseActions=[],this._closing)return;this._closing=!0;let e="end";this.stage==="init"&&(e="destroy"),this.logger.debug({tnx:"smtp"},'Closing connection to the server using "%s"',e);let i=this._socket&&this._socket.socket||this._socket;if(i&&!i.destroyed)try{this._socket[e]()}catch{}this._destroy()}login(e,i){let r=this._isDestroyedMessage("login");if(r)return i(this._formatError(r,"ECONNECTION",!1,"API"));if(this._auth=e||{},this._authMethod=(this._auth.method||"").toString().trim().toUpperCase()||!1,!this._authMethod&&this._auth.oauth2&&!this._auth.credentials?this._authMethod="XOAUTH2":(!this._authMethod||this._authMethod==="XOAUTH2"&&!this._auth.oauth2)&&(this._authMethod=(this._supportedAuth[0]||"PLAIN").toUpperCase().trim()),this._authMethod!=="XOAUTH2"&&(!this._auth.credentials||!this._auth.credentials.user||!this._auth.credentials.pass))if(this._auth.user&&this._auth.pass||this.customAuth.has(this._authMethod))this._auth.credentials={user:this._auth.user,pass:this._auth.pass,options:this._auth.options};else return i(this._formatError('Missing credentials for "'+this._authMethod+'"',"EAUTH",!1,"API"));if(this.customAuth.has(this._authMethod)){let n=this.customAuth.get(this._authMethod),a,s=!1,l=()=>{s||(s=!0,this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,i(null,!0))},p=x=>{s||(s=!0,i(this._formatError(x,"EAUTH",a,"AUTH "+this._authMethod)))},y=n({auth:this._auth,method:this._authMethod,extensions:[].concat(this._supportedExtensions),authMethods:[].concat(this._supportedAuth),maxAllowedSize:this._maxAllowedSize||!1,sendCommand:(x,S)=>{let M;return S||(M=new Promise((C,T)=>{S=pi.callbackPromise(C,T)})),this._responseActions.push(C=>{a=C;let T=C.match(/^(\d+)(?:\s(\d+\.\d+\.\d+))?\s/),O={command:x,response:C};T?(O.status=Number(T[1])||0,T[2]&&(O.code=T[2]),O.text=C.substr(T[0].length)):(O.text=C,O.status=0),S(null,O)}),setImmediate(()=>this._sendCommand(x)),M},resolve:l,reject:p});y&&typeof y.catch=="function"&&y.then(l).catch(p);return}switch(this._authMethod){case"XOAUTH2":this._handleXOauth2Token(!1,i);return;case"LOGIN":this._responseActions.push(n=>{this._actionAUTH_LOGIN_USER(n,i)}),this._sendCommand("AUTH LOGIN");return;case"PLAIN":this._responseActions.push(n=>{this._actionAUTHComplete(n,i)}),this._sendCommand("AUTH PLAIN "+Buffer.from("\0"+this._auth.credentials.user+"\0"+this._auth.credentials.pass,"utf-8").toString("base64"),"AUTH PLAIN "+Buffer.from("\0"+this._auth.credentials.user+"\0/* secret */","utf-8").toString("base64"));return;case"CRAM-MD5":this._responseActions.push(n=>{this._actionAUTH_CRAM_MD5(n,i)}),this._sendCommand("AUTH CRAM-MD5");return}return i(this._formatError('Unknown authentication method "'+this._authMethod+'"',"EAUTH",!1,"API"))}send(e,i,r){if(!i)return r(this._formatError("Empty message","EMESSAGE",!1,"API"));let n=this._isDestroyedMessage("send message");if(n)return r(this._formatError(n,"ECONNECTION",!1,"API"));if(this._maxAllowedSize&&e.size>this._maxAllowedSize)return setImmediate(()=>{r(this._formatError("Message size larger than allowed "+this._maxAllowedSize,"EMESSAGE",!1,"MAIL FROM"))});let a=!1,s=function(){a||(a=!0,r(...arguments))};typeof i.on=="function"&&i.on("error",p=>s(this._formatError(p,"ESTREAM",!1,"API")));let l=Date.now();this._setEnvelope(e,(p,y)=>{if(p)return s(p);let x=Date.now(),S=this._createSendStream((M,C)=>M?s(M):(y.envelopeTime=x-l,y.messageTime=Date.now()-x,y.messageSize=S.outByteCount,y.response=C,s(null,y)));typeof i.pipe=="function"?i.pipe(S):(S.write(i),S.end())})}reset(e){this._sendCommand("RSET"),this._responseActions.push(i=>i.charAt(0)!=="2"?e(this._formatError("Could not reset session state. response="+i,"EPROTOCOL",i,"RSET")):(this._envelope=!1,e(null,!0)))}_onConnect(){if(clearTimeout(this._connectionTimeout),this.logger.info({tnx:"network",localAddress:this._socket.localAddress,localPort:this._socket.localPort,remoteAddress:this._socket.remoteAddress,remotePort:this._socket.remotePort},"%s established to %s:%s",this.secure?"Secure connection":"Connection",this._socket.remoteAddress,this._socket.remotePort),this._destroyed){this.close();return}this.stage="connected",this._socket.removeListener("data",this._onSocketData),this._socket.removeListener("timeout",this._onSocketTimeout),this._socket.removeListener("close",this._onSocketClose),this._socket.removeListener("end",this._onSocketEnd),this._socket.on("data",this._onSocketData),this._socket.once("close",this._onSocketClose),this._socket.once("end",this._onSocketEnd),this._socket.setTimeout(this.options.socketTimeout||Zd),this._socket.on("timeout",this._onSocketTimeout),this._greetingTimeout=setTimeout(()=>{this._socket&&!this._destroyed&&this._responseActions[0]===this._actionGreeting&&this._onError("Greeting never received","ETIMEDOUT",!1,"CONN")},this.options.greetingTimeout||nw),this._responseActions.push(this._actionGreeting),this._socket.resume()}_onData(e){if(this._destroyed||!e||!e.length)return;let i=(e||"").toString("binary"),r=(this._remainder+i).split(/\r?\n/),n;this._remainder=r.pop();for(let a=0,s=r.length;a<s;a++){if(this._responseQueue.length&&(n=this._responseQueue[this._responseQueue.length-1],/^\d+-/.test(n.split(`
`).pop()))){this._responseQueue[this._responseQueue.length-1]+=`
`+r[a];continue}this._responseQueue.push(r[a])}this._responseQueue.length&&(n=this._responseQueue[this._responseQueue.length-1],/^\d+-/.test(n.split(`
`).pop()))||this._processResponse()}_onError(e,i,r,n){clearTimeout(this._connectionTimeout),clearTimeout(this._greetingTimeout),!this._destroyed&&(e=this._formatError(e,i,r,n),this.logger.error(r,e.message),this.emit("error",e),this.close())}_formatError(e,i,r,n){let a;/Error\]$/i.test(Object.prototype.toString.call(e))?a=e:a=new Error(e),i&&i!=="Error"&&(a.code=i),r&&(a.response=r,a.message+=": "+r);let s=typeof r=="string"&&Number((r.match(/^\d+/)||[])[0])||!1;return s&&(a.responseCode=s),n&&(a.command=n),a}_onClose(){let e=!1;if(this._remainder&&this._remainder.trim()&&((this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"server"},this._remainder.replace(/\r?\n$/,"")),this.lastServerResponse=e=this._remainder.trim()),this.logger.info({tnx:"network"},"Connection closed"),this.upgrading&&!this._destroyed)return this._onError(new Error("Connection closed unexpectedly"),"ETLS",e,"CONN");if(![this._actionGreeting,this.close].includes(this._responseActions[0])&&!this._destroyed)return this._onError(new Error("Connection closed unexpectedly"),"ECONNECTION",e,"CONN");if(/^[45]\d{2}\b/.test(e))return this._onError(new Error("Connection closed unexpectedly"),"ECONNECTION",e,"CONN");this._destroy()}_onEnd(){this._socket&&!this._socket.destroyed&&this._socket.destroy()}_onTimeout(){return this._onError(new Error("Timeout"),"ETIMEDOUT",!1,"CONN")}_destroy(){this._destroyed||(this._destroyed=!0,this.emit("end"))}_upgradeConnection(e){this._socket.removeListener("data",this._onSocketData),this._socket.removeListener("timeout",this._onSocketTimeout);let i=this._socket,r={socket:this._socket,host:this.host};Object.keys(this.options.tls||{}).forEach(n=>{r[n]=this.options.tls[n]}),this.servername&&!r.servername&&(r.servername=this.servername),this.upgrading=!0;try{this._socket=Yd.connect(r,()=>(this.secure=!0,this.upgrading=!1,this._socket.on("data",this._onSocketData),i.removeListener("close",this._onSocketClose),i.removeListener("end",this._onSocketEnd),e(null,!0)))}catch(n){return e(n)}this._socket.on("error",this._onSocketError),this._socket.once("close",this._onSocketClose),this._socket.once("end",this._onSocketEnd),this._socket.setTimeout(this.options.socketTimeout||Zd),this._socket.on("timeout",this._onSocketTimeout),i.resume()}_processResponse(){if(!this._responseQueue.length)return!1;let e=this.lastServerResponse=(this._responseQueue.shift()||"").toString();if(/^\d+-/.test(e.split(`
`).pop()))return;(this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"server"},e.replace(/\r?\n$/,"")),e.trim()||setImmediate(()=>this._processResponse());let i=this._responseActions.shift();if(typeof i=="function")i.call(this,e),setImmediate(()=>this._processResponse());else return this._onError(new Error("Unexpected Response"),"EPROTOCOL",e,"CONN")}_sendCommand(e,i){if(!this._destroyed){if(this._socket.destroyed)return this.close();(this.options.debug||this.options.transactionLog)&&this.logger.debug({tnx:"client"},(i||e||"").toString().replace(/\r?\n$/,"")),this._socket.write(Buffer.from(e+`\r
`,"utf-8"))}}_setEnvelope(e,i){let r=[],n=!1;if(this._envelope=e||{},this._envelope.from=(this._envelope.from&&this._envelope.from.address||this._envelope.from||"").toString().trim(),this._envelope.to=[].concat(this._envelope.to||[]).map(a=>(a&&a.address||a||"").toString().trim()),!this._envelope.to.length)return i(this._formatError("No recipients defined","EENVELOPE",!1,"API"));if(this._envelope.from&&/[\r\n<>]/.test(this._envelope.from))return i(this._formatError("Invalid sender "+JSON.stringify(this._envelope.from),"EENVELOPE",!1,"API"));/[\x80-\uFFFF]/.test(this._envelope.from)&&(n=!0);for(let a=0,s=this._envelope.to.length;a<s;a++){if(!this._envelope.to[a]||/[\r\n<>]/.test(this._envelope.to[a]))return i(this._formatError("Invalid recipient "+JSON.stringify(this._envelope.to[a]),"EENVELOPE",!1,"API"));/[\x80-\uFFFF]/.test(this._envelope.to[a])&&(n=!0)}if(this._envelope.rcptQueue=JSON.parse(JSON.stringify(this._envelope.to||[])),this._envelope.rejected=[],this._envelope.rejectedErrors=[],this._envelope.accepted=[],this._envelope.dsn)try{this._envelope.dsn=this._setDsnEnvelope(this._envelope.dsn)}catch(a){return i(this._formatError("Invalid DSN "+a.message,"EENVELOPE",!1,"API"))}this._responseActions.push(a=>{this._actionMAIL(a,i)}),n&&this._supportedExtensions.includes("SMTPUTF8")&&(r.push("SMTPUTF8"),this._usingSmtpUtf8=!0),this._envelope.use8BitMime&&this._supportedExtensions.includes("8BITMIME")&&(r.push("BODY=8BITMIME"),this._using8BitMime=!0),this._envelope.size&&this._supportedExtensions.includes("SIZE")&&r.push("SIZE="+this._envelope.size),this._envelope.dsn&&this._supportedExtensions.includes("DSN")&&(this._envelope.dsn.ret&&r.push("RET="+pi.encodeXText(this._envelope.dsn.ret)),this._envelope.dsn.envid&&r.push("ENVID="+pi.encodeXText(this._envelope.dsn.envid))),this._sendCommand("MAIL FROM:<"+this._envelope.from+">"+(r.length?" "+r.join(" "):""))}_setDsnEnvelope(e){let i=(e.ret||e.return||"").toString().toUpperCase()||null;if(i)switch(i){case"HDRS":case"HEADERS":i="HDRS";break;case"FULL":case"BODY":i="FULL";break}if(i&&!["FULL","HDRS"].includes(i))throw new Error("ret: "+JSON.stringify(i));let r=(e.envid||e.id||"").toString()||null,n=e.notify||null;if(n){typeof n=="string"&&(n=n.split(",")),n=n.map(p=>p.trim().toUpperCase());let s=["NEVER","SUCCESS","FAILURE","DELAY"];if(n.filter(p=>!s.includes(p)).length||n.length>1&&n.includes("NEVER"))throw new Error("notify: "+JSON.stringify(n.join(",")));n=n.join(",")}let a=(e.recipient||e.orcpt||"").toString()||null;return a&&a.indexOf(";")<0&&(a="rfc822;"+a),{ret:i,envid:r,notify:n,orcpt:a}}_getDsnRcptToArgs(){let e=[];return this._envelope.dsn&&this._supportedExtensions.includes("DSN")&&(this._envelope.dsn.notify&&e.push("NOTIFY="+pi.encodeXText(this._envelope.dsn.notify)),this._envelope.dsn.orcpt&&e.push("ORCPT="+pi.encodeXText(this._envelope.dsn.orcpt))),e.length?" "+e.join(" "):""}_createSendStream(e){let i=new tw,r;return this.options.lmtp?this._envelope.accepted.forEach((n,a)=>{let s=a===this._envelope.accepted.length-1;this._responseActions.push(l=>{this._actionLMTPStream(n,s,l,e)})}):this._responseActions.push(n=>{this._actionSMTPStream(n,e)}),i.pipe(this._socket,{end:!1}),this.options.debug&&(r=new iw,r.on("readable",()=>{let n;for(;n=r.read();)this.logger.debug({tnx:"message"},n.toString("binary").replace(/\r?\n$/,""))}),i.pipe(r)),i.once("end",()=>{this.logger.info({tnx:"message",inByteCount:i.inByteCount,outByteCount:i.outByteCount},"<%s bytes encoded mime message (source size %s bytes)>",i.outByteCount,i.inByteCount)}),i}_actionGreeting(e){if(clearTimeout(this._greetingTimeout),e.substr(0,3)!=="220"){this._onError(new Error("Invalid greeting. response="+e),"EPROTOCOL",e,"CONN");return}this.options.lmtp?(this._responseActions.push(this._actionLHLO),this._sendCommand("LHLO "+this.name)):(this._responseActions.push(this._actionEHLO),this._sendCommand("EHLO "+this.name))}_actionLHLO(e){if(e.charAt(0)!=="2"){this._onError(new Error("Invalid LHLO. response="+e),"EPROTOCOL",e,"LHLO");return}this._actionEHLO(e)}_actionEHLO(e){let i;if(e.substr(0,3)==="421"){this._onError(new Error("Server terminates connection. response="+e),"ECONNECTION",e,"EHLO");return}if(e.charAt(0)!=="2"){if(this.options.requireTLS){this._onError(new Error("EHLO failed but HELO does not support required STARTTLS. response="+e),"ECONNECTION",e,"EHLO");return}this._responseActions.push(this._actionHELO),this._sendCommand("HELO "+this.name);return}if(this._ehloLines=e.split(/\r?\n/).map(r=>r.replace(/^\d+[ -]/,"").trim()).filter(r=>r).slice(1),!this.secure&&!this.options.ignoreTLS&&(/[ -]STARTTLS\b/im.test(e)||this.options.requireTLS)){this._sendCommand("STARTTLS"),this._responseActions.push(this._actionSTARTTLS);return}/[ -]SMTPUTF8\b/im.test(e)&&this._supportedExtensions.push("SMTPUTF8"),/[ -]DSN\b/im.test(e)&&this._supportedExtensions.push("DSN"),/[ -]8BITMIME\b/im.test(e)&&this._supportedExtensions.push("8BITMIME"),/[ -]PIPELINING\b/im.test(e)&&this._supportedExtensions.push("PIPELINING"),/[ -]AUTH\b/i.test(e)&&(this.allowsAuth=!0),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)PLAIN/i.test(e)&&this._supportedAuth.push("PLAIN"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)LOGIN/i.test(e)&&this._supportedAuth.push("LOGIN"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)CRAM-MD5/i.test(e)&&this._supportedAuth.push("CRAM-MD5"),/[ -]AUTH(?:(\s+|=)[^\n]*\s+|\s+|=)XOAUTH2/i.test(e)&&this._supportedAuth.push("XOAUTH2"),(i=e.match(/[ -]SIZE(?:[ \t]+(\d+))?/im))&&(this._supportedExtensions.push("SIZE"),this._maxAllowedSize=Number(i[1])||0),this.emit("connect")}_actionHELO(e){if(e.charAt(0)!=="2"){this._onError(new Error("Invalid HELO. response="+e),"EPROTOCOL",e,"HELO");return}this.allowsAuth=!0,this.emit("connect")}_actionSTARTTLS(e){if(e.charAt(0)!=="2"){if(this.options.opportunisticTLS)return this.logger.info({tnx:"smtp"},"Failed STARTTLS upgrade, continuing unencrypted"),this.emit("connect");this._onError(new Error("Error upgrading connection with STARTTLS"),"ETLS",e,"STARTTLS");return}this._upgradeConnection((i,r)=>{if(i){this._onError(new Error("Error initiating TLS - "+(i.message||i)),"ETLS",!1,"STARTTLS");return}this.logger.info({tnx:"smtp"},"Connection upgraded with STARTTLS"),r?this.options.lmtp?(this._responseActions.push(this._actionLHLO),this._sendCommand("LHLO "+this.name)):(this._responseActions.push(this._actionEHLO),this._sendCommand("EHLO "+this.name)):this.emit("connect")})}_actionAUTH_LOGIN_USER(e,i){if(!/^334[ -]/.test(e)){i(this._formatError('Invalid login sequence while waiting for "334 VXNlcm5hbWU6"',"EAUTH",e,"AUTH LOGIN"));return}this._responseActions.push(r=>{this._actionAUTH_LOGIN_PASS(r,i)}),this._sendCommand(Buffer.from(this._auth.credentials.user+"","utf-8").toString("base64"))}_actionAUTH_CRAM_MD5(e,i){let r=e.match(/^334\s+(.+)$/),n="";if(r)n=r[1];else return i(this._formatError("Invalid login sequence while waiting for server challenge string","EAUTH",e,"AUTH CRAM-MD5"));let a=Buffer.from(n,"base64").toString("ascii"),s=$d.createHmac("md5",this._auth.credentials.pass);s.update(a);let l=this._auth.credentials.user+" "+s.digest("hex");this._responseActions.push(p=>{this._actionAUTH_CRAM_MD5_PASS(p,i)}),this._sendCommand(Buffer.from(l).toString("base64"),Buffer.from(this._auth.credentials.user+" /* secret */").toString("base64"))}_actionAUTH_CRAM_MD5_PASS(e,i){if(!e.match(/^235\s+/))return i(this._formatError('Invalid login sequence while waiting for "235"',"EAUTH",e,"AUTH CRAM-MD5"));this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,i(null,!0)}_actionAUTH_LOGIN_PASS(e,i){if(!/^334[ -]/.test(e))return i(this._formatError('Invalid login sequence while waiting for "334 UGFzc3dvcmQ6"',"EAUTH",e,"AUTH LOGIN"));this._responseActions.push(r=>{this._actionAUTHComplete(r,i)}),this._sendCommand(Buffer.from((this._auth.credentials.pass||"").toString(),"utf-8").toString("base64"),Buffer.from("/* secret */","utf-8").toString("base64"))}_actionAUTHComplete(e,i,r){if(!r&&typeof i=="function"&&(r=i,i=!1),e.substr(0,3)==="334"){this._responseActions.push(n=>{i||this._authMethod!=="XOAUTH2"?this._actionAUTHComplete(n,!0,r):setImmediate(()=>this._handleXOauth2Token(!0,r))}),this._sendCommand("");return}if(e.charAt(0)!=="2")return this.logger.info({tnx:"smtp",username:this._auth.user,action:"authfail",method:this._authMethod},"User %s failed to authenticate",JSON.stringify(this._auth.user)),r(this._formatError("Invalid login","EAUTH",e,"AUTH "+this._authMethod));this.logger.info({tnx:"smtp",username:this._auth.user,action:"authenticated",method:this._authMethod},"User %s authenticated",JSON.stringify(this._auth.user)),this.authenticated=!0,r(null,!0)}_actionMAIL(e,i){let r,n;if(Number(e.charAt(0))!==2)return this._usingSmtpUtf8&&/^550 /.test(e)&&/[\x80-\uFFFF]/.test(this._envelope.from)?r="Internationalized mailbox name not allowed":r="Mail command failed",i(this._formatError(r,"EENVELOPE",e,"MAIL FROM"));if(this._envelope.rcptQueue.length)if(this._recipientQueue=[],this._supportedExtensions.includes("PIPELINING"))for(;this._envelope.rcptQueue.length;)n=this._envelope.rcptQueue.shift(),this._recipientQueue.push(n),this._responseActions.push(a=>{this._actionRCPT(a,i)}),this._sendCommand("RCPT TO:<"+n+">"+this._getDsnRcptToArgs());else n=this._envelope.rcptQueue.shift(),this._recipientQueue.push(n),this._responseActions.push(a=>{this._actionRCPT(a,i)}),this._sendCommand("RCPT TO:<"+n+">"+this._getDsnRcptToArgs());else return i(this._formatError("Can't send mail - no recipients defined","EENVELOPE",!1,"API"))}_actionRCPT(e,i){let r,n,a=this._recipientQueue.shift();if(Number(e.charAt(0))!==2?(this._usingSmtpUtf8&&/^553 /.test(e)&&/[\x80-\uFFFF]/.test(a)?r="Internationalized mailbox name not allowed":r="Recipient command failed",this._envelope.rejected.push(a),n=this._formatError(r,"EENVELOPE",e,"RCPT TO"),n.recipient=a,this._envelope.rejectedErrors.push(n)):this._envelope.accepted.push(a),!this._envelope.rcptQueue.length&&!this._recipientQueue.length)if(this._envelope.rejected.length<this._envelope.to.length)this._responseActions.push(s=>{this._actionDATA(s,i)}),this._sendCommand("DATA");else return n=this._formatError("Can't send mail - all recipients were rejected","EENVELOPE",e,"RCPT TO"),n.rejected=this._envelope.rejected,n.rejectedErrors=this._envelope.rejectedErrors,i(n);else this._envelope.rcptQueue.length&&(a=this._envelope.rcptQueue.shift(),this._recipientQueue.push(a),this._responseActions.push(s=>{this._actionRCPT(s,i)}),this._sendCommand("RCPT TO:<"+a+">"+this._getDsnRcptToArgs()))}_actionDATA(e,i){if(!/^[23]/.test(e))return i(this._formatError("Data command failed","EENVELOPE",e,"DATA"));let r={accepted:this._envelope.accepted,rejected:this._envelope.rejected};this._ehloLines&&this._ehloLines.length&&(r.ehlo=this._ehloLines),this._envelope.rejectedErrors.length&&(r.rejectedErrors=this._envelope.rejectedErrors),i(null,r)}_actionSMTPStream(e,i){return Number(e.charAt(0))!==2?i(this._formatError("Message failed","EMESSAGE",e,"DATA")):i(null,e)}_actionLMTPStream(e,i,r,n){let a;if(Number(r.charAt(0))!==2){a=this._formatError("Message failed for recipient "+e,"EMESSAGE",r,"DATA"),a.recipient=e,this._envelope.rejected.push(e),this._envelope.rejectedErrors.push(a);for(let s=0,l=this._envelope.accepted.length;s<l;s++)this._envelope.accepted[s]===e&&this._envelope.accepted.splice(s,1)}if(i)return n(null,r)}_handleXOauth2Token(e,i){this._auth.oauth2.getToken(e,(r,n)=>{if(r)return this.logger.info({tnx:"smtp",username:this._auth.user,action:"authfail",method:this._authMethod},"User %s failed to authenticate",JSON.stringify(this._auth.user)),i(this._formatError(r,"EAUTH",!1,"AUTH XOAUTH2"));this._responseActions.push(a=>{this._actionAUTHComplete(a,e,i)}),this._sendCommand("AUTH XOAUTH2 "+this._auth.oauth2.buildXOAuth2Token(n),"AUTH XOAUTH2 "+this._auth.oauth2.buildXOAuth2Token("/* secret */"))})}_isDestroyedMessage(e){if(this._destroyed)return"Cannot "+e+" - smtp connection is already destroyed.";if(this._socket){if(this._socket.destroyed)return"Cannot "+e+" - smtp connection socket is already destroyed.";if(!this._socket.writable)return"Cannot "+e+" - smtp connection socket is already half-closed."}}_getHostname(){let e;try{e=ew.hostname()||""}catch{e="localhost"}return(!e||e.indexOf(".")<0)&&(e="[127.0.0.1]"),e.match(/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/)&&(e="["+e+"]"),e}};Qd.exports=Pc});var Lc=R((xP,Xd)=>{"use strict";var sw=require("stream").Stream,ow=ua(),lw=require("crypto"),cw=ct(),Ic=class extends sw{constructor(e,i){if(super(),this.options=e||{},e&&e.serviceClient){if(!e.privateKey||!e.user){setImmediate(()=>this.emit("error",new Error('Options "privateKey" and "user" are required for service account!')));return}let r=Math.min(Math.max(Number(this.options.serviceRequestTimeout)||0,0),3600);this.options.serviceRequestTimeout=r||5*60}if(this.logger=cw.getLogger({logger:i},{component:this.options.component||"OAuth2"}),this.provisionCallback=typeof this.options.provisionCallback=="function"?this.options.provisionCallback:!1,this.options.accessUrl=this.options.accessUrl||"https://accounts.google.com/o/oauth2/token",this.options.customHeaders=this.options.customHeaders||{},this.options.customParams=this.options.customParams||{},this.accessToken=this.options.accessToken||!1,this.options.expires&&Number(this.options.expires))this.expires=this.options.expires;else{let r=Math.max(Number(this.options.timeout)||0,0);this.expires=r&&Date.now()+r*1e3||0}}getToken(e,i){if(!e&&this.accessToken&&(!this.expires||this.expires>Date.now()))return i(null,this.accessToken);let r=(...n)=>{n[0]?this.logger.error({err:n[0],tnx:"OAUTH2",user:this.options.user,action:"renew"},"Failed generating new Access Token for %s",this.options.user):this.logger.info({tnx:"OAUTH2",user:this.options.user,action:"renew"},"Generated new Access Token for %s",this.options.user),i(...n)};this.provisionCallback?this.provisionCallback(this.options.user,!!e,(n,a,s)=>{!n&&a&&(this.accessToken=a,this.expires=s||0),r(n,a)}):this.generateToken(r)}updateToken(e,i){this.accessToken=e,i=Math.max(Number(i)||0,0),this.expires=i&&Date.now()+i*1e3||0,this.emit("token",{user:this.options.user,accessToken:e||"",expires:this.expires})}generateToken(e){let i,r;if(this.options.serviceClient){let n=Math.floor(Date.now()/1e3),a={iss:this.options.serviceClient,scope:this.options.scope||"https://mail.google.com/",sub:this.options.user,aud:this.options.accessUrl,iat:n,exp:n+this.options.serviceRequestTimeout},s;try{s=this.jwtSignRS256(a)}catch{return e(new Error("Can't generate token. Check your auth options"))}i={grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:s},r={grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:a}}else{if(!this.options.refreshToken)return e(new Error("Can't create new access token for user"));i={client_id:this.options.clientId||"",client_secret:this.options.clientSecret||"",refresh_token:this.options.refreshToken,grant_type:"refresh_token"},r={client_id:this.options.clientId||"",client_secret:(this.options.clientSecret||"").substr(0,6)+"...",refresh_token:(this.options.refreshToken||"").substr(0,6)+"...",grant_type:"refresh_token"}}Object.keys(this.options.customParams).forEach(n=>{i[n]=this.options.customParams[n],r[n]=this.options.customParams[n]}),this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"generate"},"Requesting token using: %s",JSON.stringify(r)),this.postRequest(this.options.accessUrl,i,this.options,(n,a)=>{let s;if(n)return e(n);try{s=JSON.parse(a.toString())}catch(p){return e(p)}if(!s||typeof s!="object")return this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"post"},"Response: %s",(a||"").toString()),e(new Error("Invalid authentication response"));let l={};if(Object.keys(s).forEach(p=>{p!=="access_token"?l[p]=s[p]:l[p]=(s[p]||"").toString().substr(0,6)+"..."}),this.logger.debug({tnx:"OAUTH2",user:this.options.user,action:"post"},"Response: %s",JSON.stringify(l)),s.error){let p=s.error;return s.error_description&&(p+=": "+s.error_description),s.error_uri&&(p+=" ("+s.error_uri+")"),e(new Error(p))}return s.access_token?(this.updateToken(s.access_token,s.expires_in),e(null,this.accessToken)):e(new Error("No access token"))})}buildXOAuth2Token(e){let i=["user="+(this.options.user||""),"auth=Bearer "+(e||this.accessToken),"",""];return Buffer.from(i.join(""),"utf-8").toString("base64")}postRequest(e,i,r,n){let a=!1,s=[],l=0,p=ow(e,{method:"post",headers:r.customHeaders,body:i,allowErrorResponse:!0});p.on("readable",()=>{let y;for(;(y=p.read())!==null;)s.push(y),l+=y.length}),p.once("error",y=>{if(!a)return a=!0,n(y)}),p.once("end",()=>{if(!a)return a=!0,n(null,Buffer.concat(s,l))})}toBase64URL(e){return typeof e=="string"&&(e=Buffer.from(e)),e.toString("base64").replace(/[=]+/g,"").replace(/\+/g,"-").replace(/\//g,"_")}jwtSignRS256(e){e=['{"alg":"RS256","typ":"JWT"}',JSON.stringify(e)].map(r=>this.toBase64URL(r)).join(".");let i=lw.createSign("RSA-SHA256").update(e).sign(this.options.privateKey);return e+"."+this.toBase64URL(i)}};Xd.exports=Ic});var eh=R((wP,Jd)=>{"use strict";var uw=gs(),fw=ct().assign,pw=Lc(),dw=require("events"),Nc=class extends dw{constructor(e){if(super(),this.pool=e,this.options=e.options,this.logger=this.pool.logger,this.options.auth)switch((this.options.auth.type||"").toString().toUpperCase()){case"OAUTH2":{let i=new pw(this.options.auth,this.logger);i.provisionCallback=this.pool.mailer&&this.pool.mailer.get("oauth2_provision_cb")||i.provisionCallback,this.auth={type:"OAUTH2",user:this.options.auth.user,oauth2:i,method:"XOAUTH2"},i.on("token",r=>this.pool.mailer.emit("token",r)),i.on("error",r=>this.emit("error",r));break}default:if(!this.options.auth.user&&!this.options.auth.pass)break;this.auth={type:(this.options.auth.type||"").toString().toUpperCase()||"LOGIN",user:this.options.auth.user,credentials:{user:this.options.auth.user||"",pass:this.options.auth.pass,options:this.options.auth.options},method:(this.options.auth.method||"").trim().toUpperCase()||this.options.authMethod||!1}}this._connection=!1,this._connected=!1,this.messages=0,this.available=!0}connect(e){this.pool.getSocket(this.options,(i,r)=>{if(i)return e(i);let n=!1,a=this.options;r&&r.connection&&(this.logger.info({tnx:"proxy",remoteAddress:r.connection.remoteAddress,remotePort:r.connection.remotePort,destHost:a.host||"",destPort:a.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",r.connection.remoteAddress,r.connection.remotePort,a.host||"",a.port||""),a=fw(!1,a),Object.keys(r).forEach(s=>{a[s]=r[s]})),this.connection=new uw(a),this.connection.once("error",s=>{if(this.emit("error",s),!n)return n=!0,e(s)}),this.connection.once("end",()=>{if(this.close(),n)return;n=!0;let s=setTimeout(()=>{if(n)return;let l=new Error("Unexpected socket close");this.connection&&this.connection._socket&&this.connection._socket.upgrading&&(l.code="ETLS"),e(l)},1e3);try{s.unref()}catch{}}),this.connection.connect(()=>{if(!n)if(this.auth&&(this.connection.allowsAuth||a.forceAuth))this.connection.login(this.auth,s=>{if(!n){if(n=!0,s)return this.connection.close(),this.emit("error",s),e(s);this._connected=!0,e(null,!0)}});else return n=!0,this._connected=!0,e(null,!0)})})}send(e,i){if(!this._connected)return this.connect(s=>s?i(s):this.send(e,i));let r=e.message.getEnvelope(),n=e.message.messageId(),a=[].concat(r.to||[]);a.length>3&&a.push("...and "+a.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:n,cid:this.id},"Sending message %s using #%s to <%s>",n,this.id,a.join(", ")),e.data.dsn&&(r.dsn=e.data.dsn),this.connection.send(r,e.message.createReadStream(),(s,l)=>{if(this.messages++,s)return this.connection.close(),this.emit("error",s),i(s);l.envelope={from:r.from,to:r.to},l.messageId=n,setImmediate(()=>{let p;this.messages>=this.options.maxMessages?(p=new Error("Resource exhausted"),p.code="EMAXLIMIT",this.connection.close(),this.emit("error",p)):this.pool._checkRateLimit(()=>{this.available=!0,this.emit("available")})}),i(null,l)})}close(){this._connected=!1,this.auth&&this.auth.oauth2&&this.auth.oauth2.removeAllListeners(),this.connection&&this.connection.close(),this.emit("close")}};Jd.exports=Nc});var th=R((EP,hw)=>{hw.exports={"1und1":{host:"smtp.1und1.de",port:465,secure:!0,authMethod:"LOGIN"},Aliyun:{domains:["aliyun.com"],host:"smtp.aliyun.com",port:465,secure:!0},AOL:{domains:["aol.com"],host:"smtp.aol.com",port:587},Bluewin:{host:"smtpauths.bluewin.ch",domains:["bluewin.ch"],port:465},DebugMail:{host:"debugmail.io",port:25},DynectEmail:{aliases:["Dynect"],host:"smtp.dynect.net",port:25},Ethereal:{aliases:["ethereal.email"],host:"smtp.ethereal.email",port:587},FastMail:{domains:["fastmail.fm"],host:"smtp.fastmail.com",port:465,secure:!0},"Forward Email":{aliases:["FE","ForwardEmail"],domains:["forwardemail.net"],host:"smtp.forwardemail.net",port:465,secure:!0},"Feishu Mail":{aliases:["Feishu","FeishuMail"],domains:["www.feishu.cn"],host:"smtp.feishu.cn",port:465,secure:!0},GandiMail:{aliases:["Gandi","Gandi Mail"],host:"mail.gandi.net",port:587},Gmail:{aliases:["Google Mail"],domains:["gmail.com","googlemail.com"],host:"smtp.gmail.com",port:465,secure:!0},Godaddy:{host:"smtpout.secureserver.net",port:25},GodaddyAsia:{host:"smtp.asia.secureserver.net",port:25},GodaddyEurope:{host:"smtp.europe.secureserver.net",port:25},"hot.ee":{host:"mail.hot.ee"},Hotmail:{aliases:["Outlook","Outlook.com","Hotmail.com"],domains:["hotmail.com","outlook.com"],host:"smtp-mail.outlook.com",port:587},iCloud:{aliases:["Me","Mac"],domains:["me.com","mac.com"],host:"smtp.mail.me.com",port:587},Infomaniak:{host:"mail.infomaniak.com",domains:["ik.me","ikmail.com","etik.com"],port:587},Loopia:{host:"mailcluster.loopia.se",port:465},"mail.ee":{host:"smtp.mail.ee"},"Mail.ru":{host:"smtp.mail.ru",port:465,secure:!0},"Mailcatch.app":{host:"sandbox-smtp.mailcatch.app",port:2525},Maildev:{port:1025,ignoreTLS:!0},Mailgun:{host:"smtp.mailgun.org",port:465,secure:!0},Mailjet:{host:"in.mailjet.com",port:587},Mailosaur:{host:"mailosaur.io",port:25},Mailtrap:{host:"live.smtp.mailtrap.io",port:587},Mandrill:{host:"smtp.mandrillapp.com",port:587},Naver:{host:"smtp.naver.com",port:587},One:{host:"send.one.com",port:465,secure:!0},OpenMailBox:{aliases:["OMB","openmailbox.org"],host:"smtp.openmailbox.org",port:465,secure:!0},Outlook365:{host:"smtp.office365.com",port:587,secure:!1},OhMySMTP:{host:"smtp.ohmysmtp.com",port:587,secure:!1},Postmark:{aliases:["PostmarkApp"],host:"smtp.postmarkapp.com",port:2525},"qiye.aliyun":{host:"smtp.mxhichina.com",port:"465",secure:!0},QQ:{domains:["qq.com"],host:"smtp.qq.com",port:465,secure:!0},QQex:{aliases:["QQ Enterprise"],domains:["exmail.qq.com"],host:"smtp.exmail.qq.com",port:465,secure:!0},SendCloud:{host:"smtp.sendcloud.net",port:2525},SendGrid:{host:"smtp.sendgrid.net",port:587},SendinBlue:{aliases:["Brevo"],host:"smtp-relay.brevo.com",port:587},SendPulse:{host:"smtp-pulse.com",port:465,secure:!0},SES:{host:"email-smtp.us-east-1.amazonaws.com",port:465,secure:!0},"SES-US-EAST-1":{host:"email-smtp.us-east-1.amazonaws.com",port:465,secure:!0},"SES-US-WEST-2":{host:"email-smtp.us-west-2.amazonaws.com",port:465,secure:!0},"SES-EU-WEST-1":{host:"email-smtp.eu-west-1.amazonaws.com",port:465,secure:!0},"SES-AP-SOUTH-1":{host:"email-smtp.ap-south-1.amazonaws.com",port:465,secure:!0},"SES-AP-NORTHEAST-1":{host:"email-smtp.ap-northeast-1.amazonaws.com",port:465,secure:!0},"SES-AP-NORTHEAST-2":{host:"email-smtp.ap-northeast-2.amazonaws.com",port:465,secure:!0},"SES-AP-NORTHEAST-3":{host:"email-smtp.ap-northeast-3.amazonaws.com",port:465,secure:!0},"SES-AP-SOUTHEAST-1":{host:"email-smtp.ap-southeast-1.amazonaws.com",port:465,secure:!0},"SES-AP-SOUTHEAST-2":{host:"email-smtp.ap-southeast-2.amazonaws.com",port:465,secure:!0},Sparkpost:{aliases:["SparkPost","SparkPost Mail"],domains:["sparkpost.com"],host:"smtp.sparkpostmail.com",port:587,secure:!1},Tipimail:{host:"smtp.tipimail.com",port:587},Yahoo:{domains:["yahoo.com"],host:"smtp.mail.yahoo.com",port:465,secure:!0},Yandex:{domains:["yandex.ru"],host:"smtp.yandex.ru",port:465,secure:!0},Zoho:{host:"smtp.zoho.com",port:465,secure:!0,authMethod:"LOGIN"},"126":{host:"smtp.126.com",port:465,secure:!0},"163":{host:"smtp.163.com",port:465,secure:!0}}});var qc=R((MP,rh)=>{"use strict";var ih=th(),ys={};Object.keys(ih).forEach(t=>{let e=ih[t];ys[vs(t)]=kc(e),[].concat(e.aliases||[]).forEach(i=>{ys[vs(i)]=kc(e)}),[].concat(e.domains||[]).forEach(i=>{ys[vs(i)]=kc(e)})});function vs(t){return t.replace(/[^a-zA-Z0-9.-]/g,"").toLowerCase()}function kc(t){let e=["domains","aliases"],i={};return Object.keys(t).forEach(r=>{e.indexOf(r)<0&&(i[r]=t[r])}),i}rh.exports=function(t){return t=vs(t.split("@").pop()),ys[t]||!1}});var oh=R((SP,sh)=>{"use strict";var mw=require("events"),nh=eh(),ah=gs(),gw=qc(),ga=ct(),yw=Gt(),Kc=class extends mw{constructor(e){super(),e=e||{},typeof e=="string"&&(e={url:e});let i,r=e.service;typeof e.getSocket=="function"&&(this.getSocket=e.getSocket),e.url&&(i=ga.parseConnectionUrl(e.url),r=r||i.service),this.options=ga.assign(!1,e,i,r&&gw(r)),this.options.maxConnections=this.options.maxConnections||5,this.options.maxMessages=this.options.maxMessages||100,this.logger=ga.getLogger(this.options,{component:this.options.component||"smtp-pool"});let n=new ah(this.options);this.name="SMTP (pool)",this.version=yw.version+"[client:"+n.version+"]",this._rateLimit={counter:0,timeout:null,waiting:[],checkpoint:!1,delta:Number(this.options.rateDelta)||1e3,limit:Number(this.options.rateLimit)||0},this._closed=!1,this._queue=[],this._connections=[],this._connectionCounter=0,this.idling=!0,setImmediate(()=>{this.idling&&this.emit("idle")})}getSocket(e,i){return setImmediate(()=>i(null,!1))}send(e,i){return this._closed?!1:(this._queue.push({mail:e,requeueAttempts:0,callback:i}),this.idling&&this._queue.length>=this.options.maxConnections&&(this.idling=!1),setImmediate(()=>this._processMessages()),!0)}close(){let e,i=this._connections.length;if(this._closed=!0,clearTimeout(this._rateLimit.timeout),!i&&!this._queue.length)return;for(let n=i-1;n>=0;n--)this._connections[n]&&this._connections[n].available&&(e=this._connections[n],e.close(),this.logger.info({tnx:"connection",cid:e.id,action:"removed"},"Connection #%s removed",e.id));if(i&&!this._connections.length&&this.logger.debug({tnx:"connection"},"All connections removed"),!this._queue.length)return;let r=()=>{if(!this._queue.length){this.logger.debug({tnx:"connection"},"Pending queue entries cleared");return}let n=this._queue.shift();if(n&&typeof n.callback=="function")try{n.callback(new Error("Connection pool was closed"))}catch(a){this.logger.error({err:a,tnx:"callback",cid:e.id},"Callback error for #%s: %s",e.id,a.message)}setImmediate(r)};setImmediate(r)}_processMessages(){let e,i,r;if(this._closed)return;if(!this._queue.length){this.idling||(this.idling=!0,this.emit("idle"));return}for(i=0,r=this._connections.length;i<r;i++)if(this._connections[i].available){e=this._connections[i];break}if(!e&&this._connections.length<this.options.maxConnections&&(e=this._createConnection()),!e){this.idling=!1;return}!this.idling&&this._queue.length<this.options.maxConnections&&(this.idling=!0,this.emit("idle"));let n=e.queueEntry=this._queue.shift();n.messageId=(e.queueEntry.mail.message.getHeader("message-id")||"").replace(/[<>\s]/g,""),e.available=!1,this.logger.debug({tnx:"pool",cid:e.id,messageId:n.messageId,action:"assign"},"Assigned message <%s> to #%s (%s)",n.messageId,e.id,e.messages+1),this._rateLimit.limit&&(this._rateLimit.counter++,this._rateLimit.checkpoint||(this._rateLimit.checkpoint=Date.now())),e.send(n.mail,(a,s)=>{if(n===e.queueEntry){try{n.callback(a,s)}catch(l){this.logger.error({err:l,tnx:"callback",cid:e.id},"Callback error for #%s: %s",e.id,l.message)}e.queueEntry=!1}})}_createConnection(){let e=new nh(this);return e.id=++this._connectionCounter,this.logger.info({tnx:"pool",cid:e.id,action:"conection"},"Created new pool resource #%s",e.id),e.on("available",()=>{this.logger.debug({tnx:"connection",cid:e.id,action:"available"},"Connection #%s became available",e.id),this._closed?this.close():this._processMessages()}),e.once("error",i=>{if(i.code!=="EMAXLIMIT"?this.logger.error({err:i,tnx:"pool",cid:e.id},"Pool Error for #%s: %s",e.id,i.message):this.logger.debug({tnx:"pool",cid:e.id,action:"maxlimit"},"Max messages limit exchausted for #%s",e.id),e.queueEntry){try{e.queueEntry.callback(i)}catch(r){this.logger.error({err:r,tnx:"callback",cid:e.id},"Callback error for #%s: %s",e.id,r.message)}e.queueEntry=!1}this._removeConnection(e),this._continueProcessing()}),e.once("close",()=>{this.logger.info({tnx:"connection",cid:e.id,action:"closed"},"Connection #%s was closed",e.id),this._removeConnection(e),e.queueEntry?setTimeout(()=>{e.queueEntry&&(this._shouldRequeuOnConnectionClose(e.queueEntry)?this._requeueEntryOnConnectionClose(e):this._failDeliveryOnConnectionClose(e)),this._continueProcessing()},50):this._continueProcessing()}),this._connections.push(e),e}_shouldRequeuOnConnectionClose(e){return this.options.maxRequeues===void 0||this.options.maxRequeues<0?!0:e.requeueAttempts<this.options.maxRequeues}_failDeliveryOnConnectionClose(e){if(e.queueEntry&&e.queueEntry.callback){try{e.queueEntry.callback(new Error("Reached maximum number of retries after connection was closed"))}catch(i){this.logger.error({err:i,tnx:"callback",messageId:e.queueEntry.messageId,cid:e.id},"Callback error for #%s: %s",e.id,i.message)}e.queueEntry=!1}}_requeueEntryOnConnectionClose(e){e.queueEntry.requeueAttempts=e.queueEntry.requeueAttempts+1,this.logger.debug({tnx:"pool",cid:e.id,messageId:e.queueEntry.messageId,action:"requeue"},"Re-queued message <%s> for #%s. Attempt: #%s",e.queueEntry.messageId,e.id,e.queueEntry.requeueAttempts),this._queue.unshift(e.queueEntry),e.queueEntry=!1}_continueProcessing(){this._closed?this.close():setTimeout(()=>this._processMessages(),100)}_removeConnection(e){let i=this._connections.indexOf(e);i!==-1&&this._connections.splice(i,1)}_checkRateLimit(e){if(!this._rateLimit.limit)return e();let i=Date.now();if(this._rateLimit.counter<this._rateLimit.limit)return e();if(this._rateLimit.waiting.push(e),this._rateLimit.checkpoint<=i-this._rateLimit.delta)return this._clearRateLimit();this._rateLimit.timeout||(this._rateLimit.timeout=setTimeout(()=>this._clearRateLimit(),this._rateLimit.delta-(i-this._rateLimit.checkpoint)),this._rateLimit.checkpoint=i)}_clearRateLimit(){for(clearTimeout(this._rateLimit.timeout),this._rateLimit.timeout=null,this._rateLimit.counter=0,this._rateLimit.checkpoint=!1;this._rateLimit.waiting.length;){let e=this._rateLimit.waiting.shift();setImmediate(e)}}isIdle(){return this.idling}verify(e){let i;e||(i=new Promise((n,a)=>{e=ga.callbackPromise(n,a)}));let r=new nh(this).auth;return this.getSocket(this.options,(n,a)=>{if(n)return e(n);let s=this.options;a&&a.connection&&(this.logger.info({tnx:"proxy",remoteAddress:a.connection.remoteAddress,remotePort:a.connection.remotePort,destHost:s.host||"",destPort:s.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",a.connection.remoteAddress,a.connection.remotePort,s.host||"",s.port||""),s=ga.assign(!1,s),Object.keys(a).forEach(x=>{s[x]=a[x]}));let l=new ah(s),p=!1;l.once("error",x=>{if(!p)return p=!0,l.close(),e(x)}),l.once("end",()=>{if(!p)return p=!0,e(new Error("Connection closed"))});let y=()=>{if(!p)return p=!0,l.quit(),e(null,!0)};l.connect(()=>{if(!p)if(r&&(l.allowsAuth||s.forceAuth))l.login(r,x=>{if(!p){if(x)return p=!0,l.close(),e(x);y()}});else if(!r&&l.allowsAuth&&s.forceAuth){let x=new Error("Authentication info was not provided");return x.code="NoAuth",p=!0,l.close(),e(x)}else y()})}),i}};sh.exports=Kc});var ch=R((AP,lh)=>{"use strict";var vw=require("events"),jc=gs(),_w=qc(),Hr=ct(),bw=Lc(),xw=Gt(),Fc=class extends vw{constructor(e){super(),e=e||{},typeof e=="string"&&(e={url:e});let i,r=e.service;typeof e.getSocket=="function"&&(this.getSocket=e.getSocket),e.url&&(i=Hr.parseConnectionUrl(e.url),r=r||i.service),this.options=Hr.assign(!1,e,i,r&&_w(r)),this.logger=Hr.getLogger(this.options,{component:this.options.component||"smtp-transport"});let n=new jc(this.options);this.name="SMTP",this.version=xw.version+"[client:"+n.version+"]",this.options.auth&&(this.auth=this.getAuth({}))}getSocket(e,i){return setImmediate(()=>i(null,!1))}getAuth(e){if(!e)return this.auth;let i=!1,r={};if(this.options.auth&&typeof this.options.auth=="object"&&Object.keys(this.options.auth).forEach(n=>{i=!0,r[n]=this.options.auth[n]}),e&&typeof e=="object"&&Object.keys(e).forEach(n=>{i=!0,r[n]=e[n]}),!i)return!1;switch((r.type||"").toString().toUpperCase()){case"OAUTH2":{if(!r.service&&!r.user)return!1;let n=new bw(r,this.logger);return n.provisionCallback=this.mailer&&this.mailer.get("oauth2_provision_cb")||n.provisionCallback,n.on("token",a=>this.mailer.emit("token",a)),n.on("error",a=>this.emit("error",a)),{type:"OAUTH2",user:r.user,oauth2:n,method:"XOAUTH2"}}default:return{type:(r.type||"").toString().toUpperCase()||"LOGIN",user:r.user,credentials:{user:r.user||"",pass:r.pass,options:r.options},method:(r.method||"").trim().toUpperCase()||this.options.authMethod||!1}}}send(e,i){this.getSocket(this.options,(r,n)=>{if(r)return i(r);let a=!1,s=this.options;n&&n.connection&&(this.logger.info({tnx:"proxy",remoteAddress:n.connection.remoteAddress,remotePort:n.connection.remotePort,destHost:s.host||"",destPort:s.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",n.connection.remoteAddress,n.connection.remotePort,s.host||"",s.port||""),s=Hr.assign(!1,s),Object.keys(n).forEach(y=>{s[y]=n[y]}));let l=new jc(s);l.once("error",y=>{if(!a)return a=!0,l.close(),i(y)}),l.once("end",()=>{if(a)return;let y=setTimeout(()=>{if(a)return;a=!0;let x=new Error("Unexpected socket close");l&&l._socket&&l._socket.upgrading&&(x.code="ETLS"),i(x)},1e3);try{y.unref()}catch{}});let p=()=>{let y=e.message.getEnvelope(),x=e.message.messageId(),S=[].concat(y.to||[]);S.length>3&&S.push("...and "+S.splice(2).length+" more"),e.data.dsn&&(y.dsn=e.data.dsn),this.logger.info({tnx:"send",messageId:x},"Sending message %s to <%s>",x,S.join(", ")),l.send(y,e.message.createReadStream(),(M,C)=>{if(a=!0,l.close(),M)return this.logger.error({err:M,tnx:"send"},"Send error for %s: %s",x,M.message),i(M);C.envelope={from:y.from,to:y.to},C.messageId=x;try{return i(null,C)}catch(T){this.logger.error({err:T,tnx:"callback"},"Callback error for %s: %s",x,T.message)}})};l.connect(()=>{if(a)return;let y=this.getAuth(e.data.auth);y&&(l.allowsAuth||s.forceAuth)?l.login(y,x=>{if(y&&y!==this.auth&&y.oauth2&&y.oauth2.removeAllListeners(),!a){if(x)return a=!0,l.close(),i(x);p()}}):p()})})}verify(e){let i;return e||(i=new Promise((r,n)=>{e=Hr.callbackPromise(r,n)})),this.getSocket(this.options,(r,n)=>{if(r)return e(r);let a=this.options;n&&n.connection&&(this.logger.info({tnx:"proxy",remoteAddress:n.connection.remoteAddress,remotePort:n.connection.remotePort,destHost:a.host||"",destPort:a.port||"",action:"connected"},"Using proxied socket from %s:%s to %s:%s",n.connection.remoteAddress,n.connection.remotePort,a.host||"",a.port||""),a=Hr.assign(!1,a),Object.keys(n).forEach(y=>{a[y]=n[y]}));let s=new jc(a),l=!1;s.once("error",y=>{if(!l)return l=!0,s.close(),e(y)}),s.once("end",()=>{if(!l)return l=!0,e(new Error("Connection closed"))});let p=()=>{if(!l)return l=!0,s.quit(),e(null,!0)};s.connect(()=>{if(l)return;let y=this.getAuth({});if(y&&(s.allowsAuth||a.forceAuth))s.login(y,x=>{if(!l){if(x)return l=!0,s.close(),e(x);p()}});else if(!y&&s.allowsAuth&&a.forceAuth){let x=new Error("Authentication info was not provided");return x.code="NoAuth",l=!0,s.close(),e(x)}else p()})}),i}close(){this.auth&&this.auth.oauth2&&this.auth.oauth2.removeAllListeners(),this.emit("close")}};lh.exports=Fc});var fh=R((TP,uh)=>{"use strict";var ww=require("child_process").spawn,Ew=Gt(),Mw=ct(),Hc=class{constructor(e){e=e||{},this._spawn=ww,this.options=e||{},this.name="Sendmail",this.version=Ew.version,this.path="sendmail",this.args=!1,this.winbreak=!1,this.logger=Mw.getLogger(this.options,{component:this.options.component||"sendmail"}),e&&(typeof e=="string"?this.path=e:typeof e=="object"&&(e.path&&(this.path=e.path),Array.isArray(e.args)&&(this.args=e.args),this.winbreak=["win","windows","dos",`\r
`].includes((e.newline||"").toString().toLowerCase())))}send(e,i){e.message.keepBcc=!0;let r=e.data.envelope||e.message.getEnvelope(),n=e.message.messageId(),a,s,l;if([].concat(r.from||[]).concat(r.to||[]).some(x=>/^-/.test(x)))return i(new Error("Can not send mail. Invalid envelope addresses."));this.args?a=["-i"].concat(this.args).concat(r.to):a=["-i"].concat(r.from?["-f",r.from]:[]).concat(r.to);let y=x=>{if(!l&&(l=!0,typeof i=="function"))return x?i(x):i(null,{envelope:e.data.envelope||e.message.getEnvelope(),messageId:n,response:"Messages queued for delivery"})};try{s=this._spawn(this.path,a)}catch(x){return this.logger.error({err:x,tnx:"spawn",messageId:n},"Error occurred while spawning sendmail. %s",x.message),y(x)}if(s){s.on("error",M=>{this.logger.error({err:M,tnx:"spawn",messageId:n},"Error occurred when sending message %s. %s",n,M.message),y(M)}),s.once("exit",M=>{if(!M)return y();let C;M===127?C=new Error("Sendmail command not found, process exited with code "+M):C=new Error("Sendmail exited with code "+M),this.logger.error({err:C,tnx:"stdin",messageId:n},"Error sending message %s to sendmail. %s",n,C.message),y(C)}),s.once("close",y),s.stdin.on("error",M=>{this.logger.error({err:M,tnx:"stdin",messageId:n},"Error occurred when piping message %s to sendmail. %s",n,M.message),y(M)});let x=[].concat(r.to||[]);x.length>3&&x.push("...and "+x.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:n},"Sending message %s to <%s>",n,x.join(", "));let S=e.message.createReadStream();S.once("error",M=>{this.logger.error({err:M,tnx:"stdin",messageId:n},"Error occurred when generating message %s. %s",n,M.message),s.kill("SIGINT"),y(M)}),S.pipe(s.stdin)}else return y(new Error("sendmail was not found"))}};uh.exports=Hc});var dh=R((RP,ph)=>{"use strict";var Sw=Gt(),Aw=ct(),Bc=class{constructor(e){e=e||{},this.options=e||{},this.name="StreamTransport",this.version=Sw.version,this.logger=Aw.getLogger(this.options,{component:this.options.component||"stream-transport"}),this.winbreak=["win","windows","dos",`\r
`].includes((e.newline||"").toString().toLowerCase())}send(e,i){e.message.keepBcc=!0;let r=e.data.envelope||e.message.getEnvelope(),n=e.message.messageId(),a=[].concat(r.to||[]);a.length>3&&a.push("...and "+a.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:n},"Sending message %s to <%s> using %s line breaks",n,a.join(", "),this.winbreak?"<CR><LF>":"<LF>"),setImmediate(()=>{let s;try{s=e.message.createReadStream()}catch(y){return this.logger.error({err:y,tnx:"send",messageId:n},"Creating send stream failed for %s. %s",n,y.message),i(y)}if(!this.options.buffer)return s.once("error",y=>{this.logger.error({err:y,tnx:"send",messageId:n},"Failed creating message for %s. %s",n,y.message)}),i(null,{envelope:e.data.envelope||e.message.getEnvelope(),messageId:n,message:s});let l=[],p=0;s.on("readable",()=>{let y;for(;(y=s.read())!==null;)l.push(y),p+=y.length}),s.once("error",y=>(this.logger.error({err:y,tnx:"send",messageId:n},"Failed creating message for %s. %s",n,y.message),i(y))),s.on("end",()=>i(null,{envelope:e.data.envelope||e.message.getEnvelope(),messageId:n,message:Buffer.concat(l,p)}))})}};ph.exports=Bc});var mh=R((CP,hh)=>{"use strict";var Tw=Gt(),Rw=ct(),Uc=class{constructor(e){e=e||{},this.options=e||{},this.name="JSONTransport",this.version=Tw.version,this.logger=Rw.getLogger(this.options,{component:this.options.component||"json-transport"})}send(e,i){e.message.keepBcc=!0;let r=e.data.envelope||e.message.getEnvelope(),n=e.message.messageId(),a=[].concat(r.to||[]);a.length>3&&a.push("...and "+a.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:n},"Composing JSON structure of %s to <%s>",n,a.join(", ")),setImmediate(()=>{e.normalize((s,l)=>s?(this.logger.error({err:s,tnx:"send",messageId:n},"Failed building JSON structure for %s. %s",n,s.message),i(s)):(delete l.envelope,delete l.normalizedHeaders,i(null,{envelope:r,messageId:n,message:this.options.skipEncoding?l:JSON.stringify(l)})))})}};hh.exports=Uc});var vh=R((OP,yh)=>{"use strict";var Cw=require("events"),Ow=Gt(),gh=ct(),Dw=hc(),Gc=class extends Cw{constructor(e){super(),e=e||{},this.options=e||{},this.ses=this.options.SES,this.name="SESTransport",this.version=Ow.version,this.logger=gh.getLogger(this.options,{component:this.options.component||"ses-transport"}),this.maxConnections=Number(this.options.maxConnections)||1/0,this.connections=0,this.sendingRate=Number(this.options.sendingRate)||1/0,this.sendingRateTTL=null,this.rateInterval=1e3,this.rateMessages=[],this.pending=[],this.idling=!0,setImmediate(()=>{this.idling&&this.emit("idle")})}send(e,i){if(this.connections>=this.maxConnections)return this.idling=!1,this.pending.push({mail:e,callback:i});if(!this._checkSendingRate())return this.idling=!1,this.pending.push({mail:e,callback:i});this._send(e,(...r)=>{setImmediate(()=>i(...r)),this._sent()})}_checkRatedQueue(){if(this.connections>=this.maxConnections||!this._checkSendingRate())return;if(!this.pending.length){this.idling||(this.idling=!0,this.emit("idle"));return}let e=this.pending.shift();this._send(e.mail,(...i)=>{setImmediate(()=>e.callback(...i)),this._sent()})}_checkSendingRate(){clearTimeout(this.sendingRateTTL);let e=Date.now(),i=!1;for(let n=this.rateMessages.length-1;n>=0;n--)this.rateMessages[n].ts>=e-this.rateInterval&&(!i||this.rateMessages[n].ts<i)&&(i=this.rateMessages[n].ts),this.rateMessages[n].ts<e-this.rateInterval&&!this.rateMessages[n].pending&&this.rateMessages.splice(n,1);if(this.rateMessages.length<this.sendingRate)return!0;let r=Math.max(i+1001,e+20);this.sendingRateTTL=setTimeout(()=>this._checkRatedQueue(),e-r);try{this.sendingRateTTL.unref()}catch{}return!1}_sent(){this.connections--,this._checkRatedQueue()}isIdle(){return this.idling}_send(e,i){let r={ts:Date.now(),pending:!0};this.connections++,this.rateMessages.push(r);let n=e.data.envelope||e.message.getEnvelope(),a=e.message.messageId(),s=[].concat(n.to||[]);s.length>3&&s.push("...and "+s.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:a},"Sending message %s to <%s>",a,s.join(", "));let l=p=>{e.data._dkim||(e.data._dkim={}),e.data._dkim.skipFields&&typeof e.data._dkim.skipFields=="string"?e.data._dkim.skipFields+=":date:message-id":e.data._dkim.skipFields="date:message-id";let y=e.message.createReadStream(),x=y.pipe(new Dw),S=[],M=0;x.on("readable",()=>{let C;for(;(C=x.read())!==null;)S.push(C),M+=C.length}),y.once("error",C=>x.emit("error",C)),x.once("error",C=>{p(C)}),x.once("end",()=>p(null,Buffer.concat(S,M)))};setImmediate(()=>l((p,y)=>{if(p)return this.logger.error({err:p,tnx:"send",messageId:a},"Failed creating message for %s. %s",a,p.message),r.pending=!1,i(p);let x={RawMessage:{Data:y},Source:n.from,Destinations:n.to};Object.keys(e.data.ses||{}).forEach(T=>{x[T]=e.data.ses[T]});let S=(this.ses.aws?this.ses.ses:this.ses)||{},M=this.ses.aws||{};(T=>S.config&&typeof S.config.region=="function"?S.config.region().then(O=>T(null,O)).catch(O=>T(O)):T(null,S.config&&S.config.region||"us-east-1"))((T,O)=>{(T||!O)&&(O="us-east-1");let P;typeof S.send=="function"&&M.SendRawEmailCommand?P=S.send(new M.SendRawEmailCommand(x)):P=S.sendRawEmail(x).promise(),P.then(L=>{O==="us-east-1"&&(O="email"),r.pending=!1,i(null,{envelope:{from:n.from,to:n.to},messageId:"<"+L.MessageId+(/@/.test(L.MessageId)?"":"@"+O+".amazonses.com")+">",response:L.MessageId,raw:y})}).catch(L=>{this.logger.error({err:L,tnx:"send"},"Send error for %s: %s",a,L.message),r.pending=!1,i(L)})})}))}verify(e){let i,r=(this.ses.aws?this.ses.ses:this.ses)||{},n=this.ses.aws||{},a={RawMessage:{Data:`From: invalid@invalid\r
To: invalid@invalid\r
 Subject: Invalid\r
\r
Invalid`},Source:"invalid@invalid",Destinations:["invalid@invalid"]};e||(i=new Promise((l,p)=>{e=gh.callbackPromise(l,p)}));let s=l=>l&&(l.code||l.Code)!=="InvalidParameterValue"?e(l):e(null,!0);return typeof r.send=="function"&&n.SendRawEmailCommand?(a.RawMessage.Data=Buffer.from(a.RawMessage.Data),r.send(new n.SendRawEmailCommand(a),s)):r.sendRawEmail(a,s),i}};yh.exports=Gc});var wh=R((DP,_s)=>{"use strict";var Pw=Gd(),xh=ct(),Iw=oh(),Lw=ch(),Nw=fh(),kw=dh(),qw=mh(),Kw=vh(),jw=ua(),_h=Gt(),Fw=(process.env.ETHEREAL_API||"https://api.nodemailer.com").replace(/\/+$/,""),Hw=(process.env.ETHEREAL_WEB||"https://ethereal.email").replace(/\/+$/,""),bh=(process.env.ETHEREAL_API_KEY||"").replace(/\s*/g,"")||null,Bw=["true","yes","y","1"].includes((process.env.ETHEREAL_CACHE||"yes").toString().trim().toLowerCase()),ya=!1;_s.exports.createTransport=function(t,e){let i,r,n;return(typeof t=="object"&&typeof t.send!="function"||typeof t=="string"&&/^(smtps?|direct):/i.test(t))&&((i=typeof t=="string"?t:t.url)?r=xh.parseConnectionUrl(i):r=t,r.pool?t=new Iw(r):r.sendmail?t=new Nw(r):r.streamTransport?t=new kw(r):r.jsonTransport?t=new qw(r):r.SES?t=new Kw(r):t=new Lw(r)),n=new Pw(t,r,e),n};_s.exports.createTestAccount=function(t,e){let i;if(!e&&typeof t=="function"&&(e=t,t=!1),e||(i=new Promise((p,y)=>{e=xh.callbackPromise(p,y)})),Bw&&ya)return setImmediate(()=>e(null,ya)),i;t=t||Fw;let r=[],n=0,a={},s={requestor:_h.name,version:_h.version};bh&&(a.Authorization="Bearer "+bh);let l=jw(t+"/user",{contentType:"application/json",method:"POST",headers:a,body:Buffer.from(JSON.stringify(s))});return l.on("readable",()=>{let p;for(;(p=l.read())!==null;)r.push(p),n+=p.length}),l.once("error",p=>e(p)),l.once("end",()=>{let p=Buffer.concat(r,n),y,x;try{y=JSON.parse(p.toString())}catch(S){x=S}if(x)return e(x);if(y.status!=="success"||y.error)return e(new Error(y.error||"Request failed"));delete y.status,ya=y,e(null,ya)}),i};_s.exports.getTestMessageUrl=function(t){if(!t||!t.response)return!1;let e=new Map;return t.response.replace(/\[([^\]]+)\]$/,(i,r)=>{r.replace(/\b([A-Z0-9]+)=([^\s]+)/g,(n,a,s)=>{e.set(a,s)})}),e.has("STATUS")&&e.has("MSGID")?(ya.web||Hw)+"/message/"+e.get("MSGID"):!1}});var Ai=R(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.readOnlyProperty=Mt.readOnlyBinaryProperty=Mt.frozenClass=Mt.immutableBaseClass=Mt.immutableClass=void 0;function Oh(t){return Object.freeze(t),Object.getOwnPropertyNames(t.prototype).filter(i=>i!=="constructor").forEach(i=>Object.defineProperty(t.prototype,i,{writable:!1})),Object.seal(t.prototype),t}Mt.immutableClass=Oh;function Zw(t){return Object.setPrototypeOf(t.prototype,null),Oh(t),t}Mt.immutableBaseClass=Zw;function Qw(t){return Object.setPrototypeOf(t.prototype,null),Object.freeze(t.prototype),Object.freeze(t),t}Mt.frozenClass=Qw;function Xw(t,e,i){let r=new Uint8Array(i);Object.defineProperty(t,e,{get:()=>new Uint8Array(r),enumerable:!0})}Mt.readOnlyBinaryProperty=Xw;function Jw(t,e,i){Object.defineProperty(t,e,{value:i,enumerable:!0,writable:!1})}Mt.readOnlyProperty=Jw});var Vt=R(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});ws.needs=void 0;function eE(t,e,i=Error){if(!t)throw new i(e)}ws.needs=eE});var Ms=R(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.AlgorithmSuite=Pe.MessageFormat=Pe.CommitmentPolicySuites=Pe.CommittingAlgorithmSuiteIdentifier=Pe.NonCommittingAlgorithmSuiteIdentifier=Pe.SignaturePolicySuites=Pe.NonSigningAlgorithmSuiteIdentifier=Pe.SignaturePolicy=Pe.CommitmentPolicy=Pe.AlgorithmSuiteIdentifier=void 0;var zc=Ai(),Ur=Vt(),ut;(function(t){t[t.ALG_AES128_GCM_IV12_TAG16=20]="ALG_AES128_GCM_IV12_TAG16",t[t.ALG_AES192_GCM_IV12_TAG16=70]="ALG_AES192_GCM_IV12_TAG16",t[t.ALG_AES256_GCM_IV12_TAG16=120]="ALG_AES256_GCM_IV12_TAG16",t[t.ALG_AES128_GCM_IV12_TAG16_HKDF_SHA256=276]="ALG_AES128_GCM_IV12_TAG16_HKDF_SHA256",t[t.ALG_AES192_GCM_IV12_TAG16_HKDF_SHA256=326]="ALG_AES192_GCM_IV12_TAG16_HKDF_SHA256",t[t.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA256=376]="ALG_AES256_GCM_IV12_TAG16_HKDF_SHA256",t[t.ALG_AES128_GCM_IV12_TAG16_HKDF_SHA256_ECDSA_P256=532]="ALG_AES128_GCM_IV12_TAG16_HKDF_SHA256_ECDSA_P256",t[t.ALG_AES192_GCM_IV12_TAG16_HKDF_SHA384_ECDSA_P384=838]="ALG_AES192_GCM_IV12_TAG16_HKDF_SHA384_ECDSA_P384",t[t.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA384_ECDSA_P384=888]="ALG_AES256_GCM_IV12_TAG16_HKDF_SHA384_ECDSA_P384",t[t.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA512_COMMIT_KEY=1144]="ALG_AES256_GCM_IV12_TAG16_HKDF_SHA512_COMMIT_KEY",t[t.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA512_COMMIT_KEY_ECDSA_P384=1400]="ALG_AES256_GCM_IV12_TAG16_HKDF_SHA512_COMMIT_KEY_ECDSA_P384"})(ut=Pe.AlgorithmSuiteIdentifier||(Pe.AlgorithmSuiteIdentifier={}));Object.freeze(ut);var va;(function(t){t.FORBID_ENCRYPT_ALLOW_DECRYPT="FORBID_ENCRYPT_ALLOW_DECRYPT",t.REQUIRE_ENCRYPT_ALLOW_DECRYPT="REQUIRE_ENCRYPT_ALLOW_DECRYPT",t.REQUIRE_ENCRYPT_REQUIRE_DECRYPT="REQUIRE_ENCRYPT_REQUIRE_DECRYPT"})(va=Pe.CommitmentPolicy||(Pe.CommitmentPolicy={}));Object.freeze(va);var _a;(function(t){t.ALLOW_ENCRYPT_ALLOW_DECRYPT="ALLOW_ENCRYPT_ALLOW_DECRYPT",t.ALLOW_ENCRYPT_FORBID_DECRYPT="ALLOW_ENCRYPT_FORBID_DECRYPT"})(_a=Pe.SignaturePolicy||(Pe.SignaturePolicy={}));Object.freeze(_a);Pe.NonSigningAlgorithmSuiteIdentifier=(()=>{let{ALG_AES128_GCM_IV12_TAG16_HKDF_SHA256_ECDSA_P256:t,ALG_AES192_GCM_IV12_TAG16_HKDF_SHA384_ECDSA_P384:e,ALG_AES256_GCM_IV12_TAG16_HKDF_SHA384_ECDSA_P384:i,ALG_AES256_GCM_IV12_TAG16_HKDF_SHA512_COMMIT_KEY_ECDSA_P384:r,[532]:n,[838]:a,[888]:s,[1400]:l,...p}=ut;return p})();Pe.SignaturePolicySuites=Object.freeze({isDecryptEnabled(t,e,i){let r=e.id||e,n=e.name||ut[r],a="decryptStream",s="signed";t===_a.ALLOW_ENCRYPT_FORBID_DECRYPT&&(a="decryptUnsignedMessageStream",s="un-signed"),(0,Ur.needs)(this[t].decryptEnabledSuites[r],`Configuration conflict. Cannot process message with ID ${i} due to client method ${a} requiring only ${s} messages. Algorithm ID was ${n}. See: https://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/concepts.html#digital-sigs`)},[_a.ALLOW_ENCRYPT_ALLOW_DECRYPT]:Object.freeze({decryptEnabledSuites:ut,defaultAlgorithmSuite:ut.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA512_COMMIT_KEY_ECDSA_P384}),[_a.ALLOW_ENCRYPT_FORBID_DECRYPT]:Object.freeze({decryptEnabledSuites:Pe.NonSigningAlgorithmSuiteIdentifier,defaultAlgorithmSuite:ut.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA512_COMMIT_KEY})});Pe.NonCommittingAlgorithmSuiteIdentifier=(()=>{let{ALG_AES256_GCM_IV12_TAG16_HKDF_SHA512_COMMIT_KEY:t,ALG_AES256_GCM_IV12_TAG16_HKDF_SHA512_COMMIT_KEY_ECDSA_P384:e,[1144]:i,[1400]:r,...n}=ut;return n})();Pe.CommittingAlgorithmSuiteIdentifier=(()=>{let{ALG_AES128_GCM_IV12_TAG16:t,ALG_AES192_GCM_IV12_TAG16:e,ALG_AES256_GCM_IV12_TAG16:i,ALG_AES128_GCM_IV12_TAG16_HKDF_SHA256:r,ALG_AES192_GCM_IV12_TAG16_HKDF_SHA256:n,ALG_AES256_GCM_IV12_TAG16_HKDF_SHA256:a,ALG_AES128_GCM_IV12_TAG16_HKDF_SHA256_ECDSA_P256:s,ALG_AES192_GCM_IV12_TAG16_HKDF_SHA384_ECDSA_P384:l,ALG_AES256_GCM_IV12_TAG16_HKDF_SHA384_ECDSA_P384:p,[20]:y,[70]:x,[120]:S,[276]:M,[326]:C,[376]:T,[532]:O,[838]:P,[888]:L,...U}=ut;return U})();Pe.CommitmentPolicySuites=Object.freeze({isEncryptEnabled(t,e){if(!e)return;let i=e.id||e,r=e.name||ut[i];(0,Ur.needs)(this[t].encryptEnabledSuites[i],`Configuration conflict. Cannot encrypt due to CommitmentPolicy ${t} requiring only non-committed messages. Algorithm ID was ${r}. See: https://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/troubleshooting-migration.html`)},isDecryptEnabled(t,e,i){let r=e.id||e,n=e.name||ut[r];(0,Ur.needs)(this[t].decryptEnabledSuites[r],`Configuration conflict. Cannot process message with ID ${i} due to CommitmentPolicy ${t} requiring only committed messages. Algorithm ID was ${n}. See: https://docs.aws.amazon.com/encryption-sdk/latest/developer-guide/troubleshooting-migration.html`)},[va.FORBID_ENCRYPT_ALLOW_DECRYPT]:Object.freeze({encryptEnabledSuites:Pe.NonCommittingAlgorithmSuiteIdentifier,decryptEnabledSuites:ut,defaultAlgorithmSuite:Pe.NonCommittingAlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA384_ECDSA_P384}),[va.REQUIRE_ENCRYPT_ALLOW_DECRYPT]:Object.freeze({encryptEnabledSuites:Pe.CommittingAlgorithmSuiteIdentifier,decryptEnabledSuites:ut,defaultAlgorithmSuite:Pe.CommittingAlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA512_COMMIT_KEY_ECDSA_P384}),[va.REQUIRE_ENCRYPT_REQUIRE_DECRYPT]:Object.freeze({encryptEnabledSuites:Pe.CommittingAlgorithmSuiteIdentifier,decryptEnabledSuites:Pe.CommittingAlgorithmSuiteIdentifier,defaultAlgorithmSuite:Pe.CommittingAlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA512_COMMIT_KEY_ECDSA_P384})});var Dh;(function(t){t[t.V1=1]="V1",t[t.V2=2]="V2"})(Dh=Pe.MessageFormat||(Pe.MessageFormat={}));Object.freeze(Dh);var Es=class t{constructor(e){(0,Ur.needs)(this.constructor!==t,"new AlgorithmSuite is not allowed"),(0,Ur.needs)(e,"Algorithm specification not set."),(0,Ur.needs)(ut[e.id],"No suite by that identifier exists."),Object.assign(this,e),(0,zc.readOnlyProperty)(this,"keyLengthBytes",this.keyLength/8),(0,zc.readOnlyProperty)(this,"name",ut[this.id])}};Pe.AlgorithmSuite=Es;(0,zc.immutableClass)(Es)});var Vc=R(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});Ss.WebCryptoAlgorithmSuite=void 0;var G=Ms(),tE=Vt(),Ph={id:G.AlgorithmSuiteIdentifier.ALG_AES128_GCM_IV12_TAG16,messageFormat:G.MessageFormat.V1,encryption:"AES-GCM",keyLength:128,ivLength:12,tagLength:128,cacheSafe:!1,commitment:"NONE"},iE={id:G.AlgorithmSuiteIdentifier.ALG_AES192_GCM_IV12_TAG16,messageFormat:G.MessageFormat.V1,encryption:"AES-GCM",keyLength:192,ivLength:12,tagLength:128,cacheSafe:!1,commitment:"NONE"},Ih={id:G.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16,messageFormat:G.MessageFormat.V1,encryption:"AES-GCM",keyLength:256,ivLength:12,tagLength:128,cacheSafe:!1,commitment:"NONE"},Lh={id:G.AlgorithmSuiteIdentifier.ALG_AES128_GCM_IV12_TAG16_HKDF_SHA256,messageFormat:G.MessageFormat.V1,encryption:"AES-GCM",keyLength:128,ivLength:12,tagLength:128,kdf:"HKDF",kdfHash:"SHA-256",cacheSafe:!0,commitment:"NONE"},rE={id:G.AlgorithmSuiteIdentifier.ALG_AES192_GCM_IV12_TAG16_HKDF_SHA256,messageFormat:G.MessageFormat.V1,encryption:"AES-GCM",keyLength:192,ivLength:12,tagLength:128,kdf:"HKDF",kdfHash:"SHA-256",cacheSafe:!0,commitment:"NONE"},Nh={id:G.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA256,messageFormat:G.MessageFormat.V1,encryption:"AES-GCM",keyLength:256,ivLength:12,tagLength:128,kdf:"HKDF",kdfHash:"SHA-256",cacheSafe:!0,commitment:"NONE"},kh={id:G.AlgorithmSuiteIdentifier.ALG_AES128_GCM_IV12_TAG16_HKDF_SHA256_ECDSA_P256,messageFormat:G.MessageFormat.V1,encryption:"AES-GCM",keyLength:128,ivLength:12,tagLength:128,kdf:"HKDF",kdfHash:"SHA-256",cacheSafe:!0,signatureCurve:"P-256",signatureHash:"SHA-256",commitment:"NONE"},nE={id:G.AlgorithmSuiteIdentifier.ALG_AES192_GCM_IV12_TAG16_HKDF_SHA384_ECDSA_P384,messageFormat:G.MessageFormat.V1,encryption:"AES-GCM",keyLength:192,ivLength:12,tagLength:128,kdf:"HKDF",kdfHash:"SHA-384",cacheSafe:!0,signatureCurve:"P-384",signatureHash:"SHA-384",commitment:"NONE"},qh={id:G.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA384_ECDSA_P384,messageFormat:G.MessageFormat.V1,encryption:"AES-GCM",keyLength:256,ivLength:12,tagLength:128,kdf:"HKDF",kdfHash:"SHA-384",cacheSafe:!0,signatureCurve:"P-384",signatureHash:"SHA-384",commitment:"NONE"},Kh={id:G.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA512_COMMIT_KEY,messageFormat:G.MessageFormat.V2,encryption:"AES-GCM",keyLength:256,ivLength:12,tagLength:128,kdf:"HKDF",kdfHash:"SHA-512",cacheSafe:!0,commitment:"KEY",commitmentHash:"SHA-512",suiteDataLength:32,commitmentLength:256,saltLengthBytes:32},jh={id:G.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA512_COMMIT_KEY_ECDSA_P384,messageFormat:G.MessageFormat.V2,encryption:"AES-GCM",keyLength:256,ivLength:12,tagLength:128,kdf:"HKDF",kdfHash:"SHA-512",cacheSafe:!0,signatureCurve:"P-384",signatureHash:"SHA-384",commitment:"KEY",commitmentHash:"SHA-512",suiteDataLength:32,commitmentLength:256,saltLengthBytes:32},aE=Object.freeze({[G.AlgorithmSuiteIdentifier.ALG_AES128_GCM_IV12_TAG16]:Object.freeze(Ph),[G.AlgorithmSuiteIdentifier.ALG_AES192_GCM_IV12_TAG16]:Object.freeze(iE),[G.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16]:Object.freeze(Ih),[G.AlgorithmSuiteIdentifier.ALG_AES128_GCM_IV12_TAG16_HKDF_SHA256]:Object.freeze(Lh),[G.AlgorithmSuiteIdentifier.ALG_AES192_GCM_IV12_TAG16_HKDF_SHA256]:Object.freeze(rE),[G.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA256]:Object.freeze(Nh),[G.AlgorithmSuiteIdentifier.ALG_AES128_GCM_IV12_TAG16_HKDF_SHA256_ECDSA_P256]:Object.freeze(kh),[G.AlgorithmSuiteIdentifier.ALG_AES192_GCM_IV12_TAG16_HKDF_SHA384_ECDSA_P384]:Object.freeze(nE),[G.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA384_ECDSA_P384]:Object.freeze(qh),[G.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA512_COMMIT_KEY]:Object.freeze(Kh),[G.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA512_COMMIT_KEY_ECDSA_P384]:Object.freeze(jh)}),sE=Object.freeze({[G.AlgorithmSuiteIdentifier.ALG_AES128_GCM_IV12_TAG16]:Object.freeze(Ph),[G.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16]:Object.freeze(Ih),[G.AlgorithmSuiteIdentifier.ALG_AES128_GCM_IV12_TAG16_HKDF_SHA256]:Object.freeze(Lh),[G.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA256]:Object.freeze(Nh),[G.AlgorithmSuiteIdentifier.ALG_AES128_GCM_IV12_TAG16_HKDF_SHA256_ECDSA_P256]:Object.freeze(kh),[G.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA384_ECDSA_P384]:Object.freeze(qh),[G.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA512_COMMIT_KEY]:Object.freeze(Kh),[G.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA512_COMMIT_KEY_ECDSA_P384]:Object.freeze(jh)}),ba=class t extends G.AlgorithmSuite{type="webCrypto";constructor(e){super(aE[e]),(0,tE.needs)(Object.prototype.hasOwnProperty.call(sE,e),"192-bit AES keys are not supported"),Object.setPrototypeOf(this,t.prototype),Object.freeze(this)}};Ss.WebCryptoAlgorithmSuite=ba;Object.freeze(ba.prototype);Object.freeze(ba)});var Ts=R(As=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0});As.NodeAlgorithmSuite=void 0;var Ie=Ms(),oE={id:Ie.AlgorithmSuiteIdentifier.ALG_AES128_GCM_IV12_TAG16,messageFormat:Ie.MessageFormat.V1,encryption:"aes-128-gcm",keyLength:128,ivLength:12,tagLength:128,cacheSafe:!1,commitment:"NONE"},lE={id:Ie.AlgorithmSuiteIdentifier.ALG_AES192_GCM_IV12_TAG16,messageFormat:Ie.MessageFormat.V1,encryption:"aes-192-gcm",keyLength:192,ivLength:12,tagLength:128,cacheSafe:!1,commitment:"NONE"},cE={id:Ie.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16,messageFormat:Ie.MessageFormat.V1,encryption:"aes-256-gcm",keyLength:256,ivLength:12,tagLength:128,cacheSafe:!1,commitment:"NONE"},uE={id:Ie.AlgorithmSuiteIdentifier.ALG_AES128_GCM_IV12_TAG16_HKDF_SHA256,messageFormat:Ie.MessageFormat.V1,encryption:"aes-128-gcm",keyLength:128,ivLength:12,tagLength:128,kdf:"HKDF",kdfHash:"sha256",cacheSafe:!0,commitment:"NONE"},fE={id:Ie.AlgorithmSuiteIdentifier.ALG_AES192_GCM_IV12_TAG16_HKDF_SHA256,messageFormat:Ie.MessageFormat.V1,encryption:"aes-192-gcm",keyLength:192,ivLength:12,tagLength:128,kdf:"HKDF",kdfHash:"sha256",cacheSafe:!0,commitment:"NONE"},pE={id:Ie.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA256,messageFormat:Ie.MessageFormat.V1,encryption:"aes-256-gcm",keyLength:256,ivLength:12,tagLength:128,kdf:"HKDF",kdfHash:"sha256",cacheSafe:!0,commitment:"NONE"},dE={id:Ie.AlgorithmSuiteIdentifier.ALG_AES128_GCM_IV12_TAG16_HKDF_SHA256_ECDSA_P256,messageFormat:Ie.MessageFormat.V1,encryption:"aes-128-gcm",keyLength:128,ivLength:12,tagLength:128,kdf:"HKDF",kdfHash:"sha256",cacheSafe:!0,signatureCurve:"prime256v1",signatureHash:"sha256",commitment:"NONE"},hE={id:Ie.AlgorithmSuiteIdentifier.ALG_AES192_GCM_IV12_TAG16_HKDF_SHA384_ECDSA_P384,messageFormat:Ie.MessageFormat.V1,encryption:"aes-192-gcm",keyLength:192,ivLength:12,tagLength:128,kdf:"HKDF",kdfHash:"sha384",cacheSafe:!0,signatureCurve:"secp384r1",signatureHash:"sha384",commitment:"NONE"},mE={id:Ie.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA384_ECDSA_P384,messageFormat:Ie.MessageFormat.V1,encryption:"aes-256-gcm",keyLength:256,ivLength:12,tagLength:128,kdf:"HKDF",kdfHash:"sha384",cacheSafe:!0,signatureCurve:"secp384r1",signatureHash:"sha384",commitment:"NONE"},gE={id:Ie.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA512_COMMIT_KEY,messageFormat:Ie.MessageFormat.V2,encryption:"aes-256-gcm",keyLength:256,ivLength:12,tagLength:128,kdf:"HKDF",kdfHash:"sha512",cacheSafe:!0,commitment:"KEY",commitmentHash:"sha512",suiteDataLength:32,commitmentLength:256,saltLengthBytes:32},yE={id:Ie.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA512_COMMIT_KEY_ECDSA_P384,messageFormat:Ie.MessageFormat.V2,encryption:"aes-256-gcm",keyLength:256,ivLength:12,tagLength:128,kdf:"HKDF",kdfHash:"sha512",cacheSafe:!0,signatureCurve:"secp384r1",signatureHash:"sha384",commitment:"KEY",commitmentHash:"sha512",suiteDataLength:32,commitmentLength:256,saltLengthBytes:32},vE=Object.freeze({[Ie.AlgorithmSuiteIdentifier.ALG_AES128_GCM_IV12_TAG16]:Object.freeze(oE),[Ie.AlgorithmSuiteIdentifier.ALG_AES192_GCM_IV12_TAG16]:Object.freeze(lE),[Ie.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16]:Object.freeze(cE),[Ie.AlgorithmSuiteIdentifier.ALG_AES128_GCM_IV12_TAG16_HKDF_SHA256]:Object.freeze(uE),[Ie.AlgorithmSuiteIdentifier.ALG_AES192_GCM_IV12_TAG16_HKDF_SHA256]:Object.freeze(fE),[Ie.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA256]:Object.freeze(pE),[Ie.AlgorithmSuiteIdentifier.ALG_AES128_GCM_IV12_TAG16_HKDF_SHA256_ECDSA_P256]:Object.freeze(dE),[Ie.AlgorithmSuiteIdentifier.ALG_AES192_GCM_IV12_TAG16_HKDF_SHA384_ECDSA_P384]:Object.freeze(hE),[Ie.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA384_ECDSA_P384]:Object.freeze(mE),[Ie.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA512_COMMIT_KEY]:Object.freeze(gE),[Ie.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16_HKDF_SHA512_COMMIT_KEY_ECDSA_P384]:Object.freeze(yE)}),xa=class t extends Ie.AlgorithmSuite{type="node";constructor(e){super(vE[e]),Object.setPrototypeOf(this,t.prototype),Object.freeze(this)}};As.NodeAlgorithmSuite=xa;Object.freeze(xa.prototype);Object.freeze(xa)});var Os=R(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.EncryptedDataKey=void 0;var Gr=Ai(),_E=Vt(),Rs=class t{constructor(e){let{providerInfo:i,providerId:r,encryptedDataKey:n,rawInfo:a}=e;(0,_E.needs)(typeof i=="string"&&i&&typeof r=="string"&&r&&n instanceof Uint8Array&&n.byteLength,"Malformed encrypted data key"),(0,Gr.readOnlyProperty)(this,"providerInfo",i),(0,Gr.readOnlyProperty)(this,"providerId",r),(0,Gr.readOnlyBinaryProperty)(this,"encryptedDataKey",n),a instanceof Uint8Array?(0,Gr.readOnlyBinaryProperty)(this,"rawInfo",a):(0,Gr.readOnlyProperty)(this,"rawInfo",void 0),Object.setPrototypeOf(this,t.prototype),Object.freeze(this)}};Cs.EncryptedDataKey=Rs;(0,Gr.frozenClass)(Rs)});var wa=R((Fh,Wc)=>{(function(t,e){"use strict";function i(h,o){if(!h)throw new Error(o||"Assertion failed")}function r(h,o){h.super_=o;var u=function(){};u.prototype=o.prototype,h.prototype=new u,h.prototype.constructor=h}function n(h,o,u){if(n.isBN(h))return h;this.negative=0,this.words=null,this.length=0,this.red=null,h!==null&&((o==="le"||o==="be")&&(u=o,o=10),this._init(h||0,o||10,u||"be"))}typeof t=="object"?t.exports=n:e.BN=n,n.BN=n,n.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=require("buffer").Buffer}catch{}n.isBN=function(o){return o instanceof n?!0:o!==null&&typeof o=="object"&&o.constructor.wordSize===n.wordSize&&Array.isArray(o.words)},n.max=function(o,u){return o.cmp(u)>0?o:u},n.min=function(o,u){return o.cmp(u)<0?o:u},n.prototype._init=function(o,u,m){if(typeof o=="number")return this._initNumber(o,u,m);if(typeof o=="object")return this._initArray(o,u,m);u==="hex"&&(u=16),i(u===(u|0)&&u>=2&&u<=36),o=o.toString().replace(/\s+/g,"");var v=0;o[0]==="-"&&(v++,this.negative=1),v<o.length&&(u===16?this._parseHex(o,v,m):(this._parseBase(o,u,v),m==="le"&&this._initArray(this.toArray(),u,m)))},n.prototype._initNumber=function(o,u,m){o<0&&(this.negative=1,o=-o),o<67108864?(this.words=[o&67108863],this.length=1):o<4503599627370496?(this.words=[o&67108863,o/67108864&67108863],this.length=2):(i(o<9007199254740992),this.words=[o&67108863,o/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),u,m)},n.prototype._initArray=function(o,u,m){if(i(typeof o.length=="number"),o.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(o.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var g,c,b=0;if(m==="be")for(v=o.length-1,g=0;v>=0;v-=3)c=o[v]|o[v-1]<<8|o[v-2]<<16,this.words[g]|=c<<b&67108863,this.words[g+1]=c>>>26-b&67108863,b+=24,b>=26&&(b-=26,g++);else if(m==="le")for(v=0,g=0;v<o.length;v+=3)c=o[v]|o[v+1]<<8|o[v+2]<<16,this.words[g]|=c<<b&67108863,this.words[g+1]=c>>>26-b&67108863,b+=24,b>=26&&(b-=26,g++);return this._strip()};function s(h,o){var u=h.charCodeAt(o);if(u>=48&&u<=57)return u-48;if(u>=65&&u<=70)return u-55;if(u>=97&&u<=102)return u-87;i(!1,"Invalid character in "+h)}function l(h,o,u){var m=s(h,u);return u-1>=o&&(m|=s(h,u-1)<<4),m}n.prototype._parseHex=function(o,u,m){this.length=Math.ceil((o.length-u)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var g=0,c=0,b;if(m==="be")for(v=o.length-1;v>=u;v-=2)b=l(o,u,v)<<g,this.words[c]|=b&67108863,g>=18?(g-=18,c+=1,this.words[c]|=b>>>26):g+=8;else{var w=o.length-u;for(v=w%2===0?u+1:u;v<o.length;v+=2)b=l(o,u,v)<<g,this.words[c]|=b&67108863,g>=18?(g-=18,c+=1,this.words[c]|=b>>>26):g+=8}this._strip()};function p(h,o,u,m){for(var v=0,g=0,c=Math.min(h.length,u),b=o;b<c;b++){var w=h.charCodeAt(b)-48;v*=m,w>=49?g=w-49+10:w>=17?g=w-17+10:g=w,i(w>=0&&g<m,"Invalid character"),v+=g}return v}n.prototype._parseBase=function(o,u,m){this.words=[0],this.length=1;for(var v=0,g=1;g<=67108863;g*=u)v++;v--,g=g/u|0;for(var c=o.length-m,b=c%v,w=Math.min(c,c-b)+m,d=0,E=m;E<w;E+=v)d=p(o,E,E+v,u),this.imuln(g),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(b!==0){var D=1;for(d=p(o,E,o.length,u),E=0;E<b;E++)D*=u;this.imuln(D),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this._strip()},n.prototype.copy=function(o){o.words=new Array(this.length);for(var u=0;u<this.length;u++)o.words[u]=this.words[u];o.length=this.length,o.negative=this.negative,o.red=this.red};function y(h,o){h.words=o.words,h.length=o.length,h.negative=o.negative,h.red=o.red}if(n.prototype._move=function(o){y(o,this)},n.prototype.clone=function(){var o=new n(null);return this.copy(o),o},n.prototype._expand=function(o){for(;this.length<o;)this.words[this.length++]=0;return this},n.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{n.prototype[Symbol.for("nodejs.util.inspect.custom")]=x}catch{n.prototype.inspect=x}else n.prototype.inspect=x;function x(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var S=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],C=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(o,u){o=o||10,u=u|0||1;var m;if(o===16||o==="hex"){m="";for(var v=0,g=0,c=0;c<this.length;c++){var b=this.words[c],w=((b<<v|g)&16777215).toString(16);g=b>>>24-v&16777215,v+=2,v>=26&&(v-=26,c--),g!==0||c!==this.length-1?m=S[6-w.length]+w+m:m=w+m}for(g!==0&&(m=g.toString(16)+m);m.length%u!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(o===(o|0)&&o>=2&&o<=36){var d=M[o],E=C[o];m="";var D=this.clone();for(D.negative=0;!D.isZero();){var I=D.modrn(E).toString(o);D=D.idivn(E),D.isZero()?m=I+m:m=S[d-I.length]+I+m}for(this.isZero()&&(m="0"+m);m.length%u!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}i(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var o=this.words[0];return this.length===2?o+=this.words[1]*67108864:this.length===3&&this.words[2]===1?o+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-o:o},n.prototype.toJSON=function(){return this.toString(16,2)},a&&(n.prototype.toBuffer=function(o,u){return this.toArrayLike(a,o,u)}),n.prototype.toArray=function(o,u){return this.toArrayLike(Array,o,u)};var T=function(o,u){return o.allocUnsafe?o.allocUnsafe(u):new o(u)};n.prototype.toArrayLike=function(o,u,m){this._strip();var v=this.byteLength(),g=m||Math.max(1,v);i(v<=g,"byte array longer than desired length"),i(g>0,"Requested array length <= 0");var c=T(o,g),b=u==="le"?"LE":"BE";return this["_toArrayLike"+b](c,v),c},n.prototype._toArrayLikeLE=function(o,u){for(var m=0,v=0,g=0,c=0;g<this.length;g++){var b=this.words[g]<<c|v;o[m++]=b&255,m<o.length&&(o[m++]=b>>8&255),m<o.length&&(o[m++]=b>>16&255),c===6?(m<o.length&&(o[m++]=b>>24&255),v=0,c=0):(v=b>>>24,c+=2)}if(m<o.length)for(o[m++]=v;m<o.length;)o[m++]=0},n.prototype._toArrayLikeBE=function(o,u){for(var m=o.length-1,v=0,g=0,c=0;g<this.length;g++){var b=this.words[g]<<c|v;o[m--]=b&255,m>=0&&(o[m--]=b>>8&255),m>=0&&(o[m--]=b>>16&255),c===6?(m>=0&&(o[m--]=b>>24&255),v=0,c=0):(v=b>>>24,c+=2)}if(m>=0)for(o[m--]=v;m>=0;)o[m--]=0},Math.clz32?n.prototype._countBits=function(o){return 32-Math.clz32(o)}:n.prototype._countBits=function(o){var u=o,m=0;return u>=4096&&(m+=13,u>>>=13),u>=64&&(m+=7,u>>>=7),u>=8&&(m+=4,u>>>=4),u>=2&&(m+=2,u>>>=2),m+u},n.prototype._zeroBits=function(o){if(o===0)return 26;var u=o,m=0;return u&8191||(m+=13,u>>>=13),u&127||(m+=7,u>>>=7),u&15||(m+=4,u>>>=4),u&3||(m+=2,u>>>=2),u&1||m++,m},n.prototype.bitLength=function(){var o=this.words[this.length-1],u=this._countBits(o);return(this.length-1)*26+u};function O(h){for(var o=new Array(h.bitLength()),u=0;u<o.length;u++){var m=u/26|0,v=u%26;o[u]=h.words[m]>>>v&1}return o}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var o=0,u=0;u<this.length;u++){var m=this._zeroBits(this.words[u]);if(o+=m,m!==26)break}return o},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(o){return this.negative!==0?this.abs().inotn(o).iaddn(1):this.clone()},n.prototype.fromTwos=function(o){return this.testn(o-1)?this.notn(o).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(o){for(;this.length<o.length;)this.words[this.length++]=0;for(var u=0;u<o.length;u++)this.words[u]=this.words[u]|o.words[u];return this._strip()},n.prototype.ior=function(o){return i((this.negative|o.negative)===0),this.iuor(o)},n.prototype.or=function(o){return this.length>o.length?this.clone().ior(o):o.clone().ior(this)},n.prototype.uor=function(o){return this.length>o.length?this.clone().iuor(o):o.clone().iuor(this)},n.prototype.iuand=function(o){var u;this.length>o.length?u=o:u=this;for(var m=0;m<u.length;m++)this.words[m]=this.words[m]&o.words[m];return this.length=u.length,this._strip()},n.prototype.iand=function(o){return i((this.negative|o.negative)===0),this.iuand(o)},n.prototype.and=function(o){return this.length>o.length?this.clone().iand(o):o.clone().iand(this)},n.prototype.uand=function(o){return this.length>o.length?this.clone().iuand(o):o.clone().iuand(this)},n.prototype.iuxor=function(o){var u,m;this.length>o.length?(u=this,m=o):(u=o,m=this);for(var v=0;v<m.length;v++)this.words[v]=u.words[v]^m.words[v];if(this!==u)for(;v<u.length;v++)this.words[v]=u.words[v];return this.length=u.length,this._strip()},n.prototype.ixor=function(o){return i((this.negative|o.negative)===0),this.iuxor(o)},n.prototype.xor=function(o){return this.length>o.length?this.clone().ixor(o):o.clone().ixor(this)},n.prototype.uxor=function(o){return this.length>o.length?this.clone().iuxor(o):o.clone().iuxor(this)},n.prototype.inotn=function(o){i(typeof o=="number"&&o>=0);var u=Math.ceil(o/26)|0,m=o%26;this._expand(u),m>0&&u--;for(var v=0;v<u;v++)this.words[v]=~this.words[v]&67108863;return m>0&&(this.words[v]=~this.words[v]&67108863>>26-m),this._strip()},n.prototype.notn=function(o){return this.clone().inotn(o)},n.prototype.setn=function(o,u){i(typeof o=="number"&&o>=0);var m=o/26|0,v=o%26;return this._expand(m+1),u?this.words[m]=this.words[m]|1<<v:this.words[m]=this.words[m]&~(1<<v),this._strip()},n.prototype.iadd=function(o){var u;if(this.negative!==0&&o.negative===0)return this.negative=0,u=this.isub(o),this.negative^=1,this._normSign();if(this.negative===0&&o.negative!==0)return o.negative=0,u=this.isub(o),o.negative=1,u._normSign();var m,v;this.length>o.length?(m=this,v=o):(m=o,v=this);for(var g=0,c=0;c<v.length;c++)u=(m.words[c]|0)+(v.words[c]|0)+g,this.words[c]=u&67108863,g=u>>>26;for(;g!==0&&c<m.length;c++)u=(m.words[c]|0)+g,this.words[c]=u&67108863,g=u>>>26;if(this.length=m.length,g!==0)this.words[this.length]=g,this.length++;else if(m!==this)for(;c<m.length;c++)this.words[c]=m.words[c];return this},n.prototype.add=function(o){var u;return o.negative!==0&&this.negative===0?(o.negative=0,u=this.sub(o),o.negative^=1,u):o.negative===0&&this.negative!==0?(this.negative=0,u=o.sub(this),this.negative=1,u):this.length>o.length?this.clone().iadd(o):o.clone().iadd(this)},n.prototype.isub=function(o){if(o.negative!==0){o.negative=0;var u=this.iadd(o);return o.negative=1,u._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(o),this.negative=1,this._normSign();var m=this.cmp(o);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,g;m>0?(v=this,g=o):(v=o,g=this);for(var c=0,b=0;b<g.length;b++)u=(v.words[b]|0)-(g.words[b]|0)+c,c=u>>26,this.words[b]=u&67108863;for(;c!==0&&b<v.length;b++)u=(v.words[b]|0)+c,c=u>>26,this.words[b]=u&67108863;if(c===0&&b<v.length&&v!==this)for(;b<v.length;b++)this.words[b]=v.words[b];return this.length=Math.max(this.length,b),v!==this&&(this.negative=1),this._strip()},n.prototype.sub=function(o){return this.clone().isub(o)};function P(h,o,u){u.negative=o.negative^h.negative;var m=h.length+o.length|0;u.length=m,m=m-1|0;var v=h.words[0]|0,g=o.words[0]|0,c=v*g,b=c&67108863,w=c/67108864|0;u.words[0]=b;for(var d=1;d<m;d++){for(var E=w>>>26,D=w&67108863,I=Math.min(d,o.length-1),k=Math.max(0,d-h.length+1);k<=I;k++){var F=d-k|0;v=h.words[F]|0,g=o.words[k]|0,c=v*g+D,E+=c/67108864|0,D=c&67108863}u.words[d]=D|0,w=E|0}return w!==0?u.words[d]=w|0:u.length--,u._strip()}var L=function(o,u,m){var v=o.words,g=u.words,c=m.words,b=0,w,d,E,D=v[0]|0,I=D&8191,k=D>>>13,F=v[1]|0,q=F&8191,K=F>>>13,Ut=v[2]|0,H=Ut&8191,B=Ut>>>13,Wn=v[3]|0,W=Wn&8191,Y=Wn>>>13,Yn=v[4]|0,$=Yn&8191,Z=Yn>>>13,$n=v[5]|0,Q=$n&8191,X=$n>>>13,Zn=v[6]|0,J=Zn&8191,ee=Zn>>>13,Qn=v[7]|0,te=Qn&8191,ie=Qn>>>13,Xn=v[8]|0,re=Xn&8191,ne=Xn>>>13,Jn=v[9]|0,ae=Jn&8191,se=Jn>>>13,ea=g[0]|0,oe=ea&8191,le=ea>>>13,ta=g[1]|0,ce=ta&8191,ue=ta>>>13,ia=g[2]|0,fe=ia&8191,pe=ia>>>13,ra=g[3]|0,de=ra&8191,he=ra>>>13,na=g[4]|0,me=na&8191,ge=na>>>13,aa=g[5]|0,ye=aa&8191,ve=aa>>>13,sa=g[6]|0,_e=sa&8191,be=sa>>>13,oa=g[7]|0,xe=oa&8191,we=oa>>>13,la=g[8]|0,Ee=la&8191,Me=la>>>13,jr=g[9]|0,Ge=jr&8191,ze=jr>>>13;m.negative=o.negative^u.negative,m.length=19,w=Math.imul(I,oe),d=Math.imul(I,le),d=d+Math.imul(k,oe)|0,E=Math.imul(k,le);var Xi=(b+w|0)+((d&8191)<<13)|0;b=(E+(d>>>13)|0)+(Xi>>>26)|0,Xi&=67108863,w=Math.imul(q,oe),d=Math.imul(q,le),d=d+Math.imul(K,oe)|0,E=Math.imul(K,le),w=w+Math.imul(I,ce)|0,d=d+Math.imul(I,ue)|0,d=d+Math.imul(k,ce)|0,E=E+Math.imul(k,ue)|0;var Ji=(b+w|0)+((d&8191)<<13)|0;b=(E+(d>>>13)|0)+(Ji>>>26)|0,Ji&=67108863,w=Math.imul(H,oe),d=Math.imul(H,le),d=d+Math.imul(B,oe)|0,E=Math.imul(B,le),w=w+Math.imul(q,ce)|0,d=d+Math.imul(q,ue)|0,d=d+Math.imul(K,ce)|0,E=E+Math.imul(K,ue)|0,w=w+Math.imul(I,fe)|0,d=d+Math.imul(I,pe)|0,d=d+Math.imul(k,fe)|0,E=E+Math.imul(k,pe)|0;var er=(b+w|0)+((d&8191)<<13)|0;b=(E+(d>>>13)|0)+(er>>>26)|0,er&=67108863,w=Math.imul(W,oe),d=Math.imul(W,le),d=d+Math.imul(Y,oe)|0,E=Math.imul(Y,le),w=w+Math.imul(H,ce)|0,d=d+Math.imul(H,ue)|0,d=d+Math.imul(B,ce)|0,E=E+Math.imul(B,ue)|0,w=w+Math.imul(q,fe)|0,d=d+Math.imul(q,pe)|0,d=d+Math.imul(K,fe)|0,E=E+Math.imul(K,pe)|0,w=w+Math.imul(I,de)|0,d=d+Math.imul(I,he)|0,d=d+Math.imul(k,de)|0,E=E+Math.imul(k,he)|0;var tr=(b+w|0)+((d&8191)<<13)|0;b=(E+(d>>>13)|0)+(tr>>>26)|0,tr&=67108863,w=Math.imul($,oe),d=Math.imul($,le),d=d+Math.imul(Z,oe)|0,E=Math.imul(Z,le),w=w+Math.imul(W,ce)|0,d=d+Math.imul(W,ue)|0,d=d+Math.imul(Y,ce)|0,E=E+Math.imul(Y,ue)|0,w=w+Math.imul(H,fe)|0,d=d+Math.imul(H,pe)|0,d=d+Math.imul(B,fe)|0,E=E+Math.imul(B,pe)|0,w=w+Math.imul(q,de)|0,d=d+Math.imul(q,he)|0,d=d+Math.imul(K,de)|0,E=E+Math.imul(K,he)|0,w=w+Math.imul(I,me)|0,d=d+Math.imul(I,ge)|0,d=d+Math.imul(k,me)|0,E=E+Math.imul(k,ge)|0;var ir=(b+w|0)+((d&8191)<<13)|0;b=(E+(d>>>13)|0)+(ir>>>26)|0,ir&=67108863,w=Math.imul(Q,oe),d=Math.imul(Q,le),d=d+Math.imul(X,oe)|0,E=Math.imul(X,le),w=w+Math.imul($,ce)|0,d=d+Math.imul($,ue)|0,d=d+Math.imul(Z,ce)|0,E=E+Math.imul(Z,ue)|0,w=w+Math.imul(W,fe)|0,d=d+Math.imul(W,pe)|0,d=d+Math.imul(Y,fe)|0,E=E+Math.imul(Y,pe)|0,w=w+Math.imul(H,de)|0,d=d+Math.imul(H,he)|0,d=d+Math.imul(B,de)|0,E=E+Math.imul(B,he)|0,w=w+Math.imul(q,me)|0,d=d+Math.imul(q,ge)|0,d=d+Math.imul(K,me)|0,E=E+Math.imul(K,ge)|0,w=w+Math.imul(I,ye)|0,d=d+Math.imul(I,ve)|0,d=d+Math.imul(k,ye)|0,E=E+Math.imul(k,ve)|0;var rr=(b+w|0)+((d&8191)<<13)|0;b=(E+(d>>>13)|0)+(rr>>>26)|0,rr&=67108863,w=Math.imul(J,oe),d=Math.imul(J,le),d=d+Math.imul(ee,oe)|0,E=Math.imul(ee,le),w=w+Math.imul(Q,ce)|0,d=d+Math.imul(Q,ue)|0,d=d+Math.imul(X,ce)|0,E=E+Math.imul(X,ue)|0,w=w+Math.imul($,fe)|0,d=d+Math.imul($,pe)|0,d=d+Math.imul(Z,fe)|0,E=E+Math.imul(Z,pe)|0,w=w+Math.imul(W,de)|0,d=d+Math.imul(W,he)|0,d=d+Math.imul(Y,de)|0,E=E+Math.imul(Y,he)|0,w=w+Math.imul(H,me)|0,d=d+Math.imul(H,ge)|0,d=d+Math.imul(B,me)|0,E=E+Math.imul(B,ge)|0,w=w+Math.imul(q,ye)|0,d=d+Math.imul(q,ve)|0,d=d+Math.imul(K,ye)|0,E=E+Math.imul(K,ve)|0,w=w+Math.imul(I,_e)|0,d=d+Math.imul(I,be)|0,d=d+Math.imul(k,_e)|0,E=E+Math.imul(k,be)|0;var nr=(b+w|0)+((d&8191)<<13)|0;b=(E+(d>>>13)|0)+(nr>>>26)|0,nr&=67108863,w=Math.imul(te,oe),d=Math.imul(te,le),d=d+Math.imul(ie,oe)|0,E=Math.imul(ie,le),w=w+Math.imul(J,ce)|0,d=d+Math.imul(J,ue)|0,d=d+Math.imul(ee,ce)|0,E=E+Math.imul(ee,ue)|0,w=w+Math.imul(Q,fe)|0,d=d+Math.imul(Q,pe)|0,d=d+Math.imul(X,fe)|0,E=E+Math.imul(X,pe)|0,w=w+Math.imul($,de)|0,d=d+Math.imul($,he)|0,d=d+Math.imul(Z,de)|0,E=E+Math.imul(Z,he)|0,w=w+Math.imul(W,me)|0,d=d+Math.imul(W,ge)|0,d=d+Math.imul(Y,me)|0,E=E+Math.imul(Y,ge)|0,w=w+Math.imul(H,ye)|0,d=d+Math.imul(H,ve)|0,d=d+Math.imul(B,ye)|0,E=E+Math.imul(B,ve)|0,w=w+Math.imul(q,_e)|0,d=d+Math.imul(q,be)|0,d=d+Math.imul(K,_e)|0,E=E+Math.imul(K,be)|0,w=w+Math.imul(I,xe)|0,d=d+Math.imul(I,we)|0,d=d+Math.imul(k,xe)|0,E=E+Math.imul(k,we)|0;var ar=(b+w|0)+((d&8191)<<13)|0;b=(E+(d>>>13)|0)+(ar>>>26)|0,ar&=67108863,w=Math.imul(re,oe),d=Math.imul(re,le),d=d+Math.imul(ne,oe)|0,E=Math.imul(ne,le),w=w+Math.imul(te,ce)|0,d=d+Math.imul(te,ue)|0,d=d+Math.imul(ie,ce)|0,E=E+Math.imul(ie,ue)|0,w=w+Math.imul(J,fe)|0,d=d+Math.imul(J,pe)|0,d=d+Math.imul(ee,fe)|0,E=E+Math.imul(ee,pe)|0,w=w+Math.imul(Q,de)|0,d=d+Math.imul(Q,he)|0,d=d+Math.imul(X,de)|0,E=E+Math.imul(X,he)|0,w=w+Math.imul($,me)|0,d=d+Math.imul($,ge)|0,d=d+Math.imul(Z,me)|0,E=E+Math.imul(Z,ge)|0,w=w+Math.imul(W,ye)|0,d=d+Math.imul(W,ve)|0,d=d+Math.imul(Y,ye)|0,E=E+Math.imul(Y,ve)|0,w=w+Math.imul(H,_e)|0,d=d+Math.imul(H,be)|0,d=d+Math.imul(B,_e)|0,E=E+Math.imul(B,be)|0,w=w+Math.imul(q,xe)|0,d=d+Math.imul(q,we)|0,d=d+Math.imul(K,xe)|0,E=E+Math.imul(K,we)|0,w=w+Math.imul(I,Ee)|0,d=d+Math.imul(I,Me)|0,d=d+Math.imul(k,Ee)|0,E=E+Math.imul(k,Me)|0;var sr=(b+w|0)+((d&8191)<<13)|0;b=(E+(d>>>13)|0)+(sr>>>26)|0,sr&=67108863,w=Math.imul(ae,oe),d=Math.imul(ae,le),d=d+Math.imul(se,oe)|0,E=Math.imul(se,le),w=w+Math.imul(re,ce)|0,d=d+Math.imul(re,ue)|0,d=d+Math.imul(ne,ce)|0,E=E+Math.imul(ne,ue)|0,w=w+Math.imul(te,fe)|0,d=d+Math.imul(te,pe)|0,d=d+Math.imul(ie,fe)|0,E=E+Math.imul(ie,pe)|0,w=w+Math.imul(J,de)|0,d=d+Math.imul(J,he)|0,d=d+Math.imul(ee,de)|0,E=E+Math.imul(ee,he)|0,w=w+Math.imul(Q,me)|0,d=d+Math.imul(Q,ge)|0,d=d+Math.imul(X,me)|0,E=E+Math.imul(X,ge)|0,w=w+Math.imul($,ye)|0,d=d+Math.imul($,ve)|0,d=d+Math.imul(Z,ye)|0,E=E+Math.imul(Z,ve)|0,w=w+Math.imul(W,_e)|0,d=d+Math.imul(W,be)|0,d=d+Math.imul(Y,_e)|0,E=E+Math.imul(Y,be)|0,w=w+Math.imul(H,xe)|0,d=d+Math.imul(H,we)|0,d=d+Math.imul(B,xe)|0,E=E+Math.imul(B,we)|0,w=w+Math.imul(q,Ee)|0,d=d+Math.imul(q,Me)|0,d=d+Math.imul(K,Ee)|0,E=E+Math.imul(K,Me)|0,w=w+Math.imul(I,Ge)|0,d=d+Math.imul(I,ze)|0,d=d+Math.imul(k,Ge)|0,E=E+Math.imul(k,ze)|0;var or=(b+w|0)+((d&8191)<<13)|0;b=(E+(d>>>13)|0)+(or>>>26)|0,or&=67108863,w=Math.imul(ae,ce),d=Math.imul(ae,ue),d=d+Math.imul(se,ce)|0,E=Math.imul(se,ue),w=w+Math.imul(re,fe)|0,d=d+Math.imul(re,pe)|0,d=d+Math.imul(ne,fe)|0,E=E+Math.imul(ne,pe)|0,w=w+Math.imul(te,de)|0,d=d+Math.imul(te,he)|0,d=d+Math.imul(ie,de)|0,E=E+Math.imul(ie,he)|0,w=w+Math.imul(J,me)|0,d=d+Math.imul(J,ge)|0,d=d+Math.imul(ee,me)|0,E=E+Math.imul(ee,ge)|0,w=w+Math.imul(Q,ye)|0,d=d+Math.imul(Q,ve)|0,d=d+Math.imul(X,ye)|0,E=E+Math.imul(X,ve)|0,w=w+Math.imul($,_e)|0,d=d+Math.imul($,be)|0,d=d+Math.imul(Z,_e)|0,E=E+Math.imul(Z,be)|0,w=w+Math.imul(W,xe)|0,d=d+Math.imul(W,we)|0,d=d+Math.imul(Y,xe)|0,E=E+Math.imul(Y,we)|0,w=w+Math.imul(H,Ee)|0,d=d+Math.imul(H,Me)|0,d=d+Math.imul(B,Ee)|0,E=E+Math.imul(B,Me)|0,w=w+Math.imul(q,Ge)|0,d=d+Math.imul(q,ze)|0,d=d+Math.imul(K,Ge)|0,E=E+Math.imul(K,ze)|0;var lr=(b+w|0)+((d&8191)<<13)|0;b=(E+(d>>>13)|0)+(lr>>>26)|0,lr&=67108863,w=Math.imul(ae,fe),d=Math.imul(ae,pe),d=d+Math.imul(se,fe)|0,E=Math.imul(se,pe),w=w+Math.imul(re,de)|0,d=d+Math.imul(re,he)|0,d=d+Math.imul(ne,de)|0,E=E+Math.imul(ne,he)|0,w=w+Math.imul(te,me)|0,d=d+Math.imul(te,ge)|0,d=d+Math.imul(ie,me)|0,E=E+Math.imul(ie,ge)|0,w=w+Math.imul(J,ye)|0,d=d+Math.imul(J,ve)|0,d=d+Math.imul(ee,ye)|0,E=E+Math.imul(ee,ve)|0,w=w+Math.imul(Q,_e)|0,d=d+Math.imul(Q,be)|0,d=d+Math.imul(X,_e)|0,E=E+Math.imul(X,be)|0,w=w+Math.imul($,xe)|0,d=d+Math.imul($,we)|0,d=d+Math.imul(Z,xe)|0,E=E+Math.imul(Z,we)|0,w=w+Math.imul(W,Ee)|0,d=d+Math.imul(W,Me)|0,d=d+Math.imul(Y,Ee)|0,E=E+Math.imul(Y,Me)|0,w=w+Math.imul(H,Ge)|0,d=d+Math.imul(H,ze)|0,d=d+Math.imul(B,Ge)|0,E=E+Math.imul(B,ze)|0;var cr=(b+w|0)+((d&8191)<<13)|0;b=(E+(d>>>13)|0)+(cr>>>26)|0,cr&=67108863,w=Math.imul(ae,de),d=Math.imul(ae,he),d=d+Math.imul(se,de)|0,E=Math.imul(se,he),w=w+Math.imul(re,me)|0,d=d+Math.imul(re,ge)|0,d=d+Math.imul(ne,me)|0,E=E+Math.imul(ne,ge)|0,w=w+Math.imul(te,ye)|0,d=d+Math.imul(te,ve)|0,d=d+Math.imul(ie,ye)|0,E=E+Math.imul(ie,ve)|0,w=w+Math.imul(J,_e)|0,d=d+Math.imul(J,be)|0,d=d+Math.imul(ee,_e)|0,E=E+Math.imul(ee,be)|0,w=w+Math.imul(Q,xe)|0,d=d+Math.imul(Q,we)|0,d=d+Math.imul(X,xe)|0,E=E+Math.imul(X,we)|0,w=w+Math.imul($,Ee)|0,d=d+Math.imul($,Me)|0,d=d+Math.imul(Z,Ee)|0,E=E+Math.imul(Z,Me)|0,w=w+Math.imul(W,Ge)|0,d=d+Math.imul(W,ze)|0,d=d+Math.imul(Y,Ge)|0,E=E+Math.imul(Y,ze)|0;var ur=(b+w|0)+((d&8191)<<13)|0;b=(E+(d>>>13)|0)+(ur>>>26)|0,ur&=67108863,w=Math.imul(ae,me),d=Math.imul(ae,ge),d=d+Math.imul(se,me)|0,E=Math.imul(se,ge),w=w+Math.imul(re,ye)|0,d=d+Math.imul(re,ve)|0,d=d+Math.imul(ne,ye)|0,E=E+Math.imul(ne,ve)|0,w=w+Math.imul(te,_e)|0,d=d+Math.imul(te,be)|0,d=d+Math.imul(ie,_e)|0,E=E+Math.imul(ie,be)|0,w=w+Math.imul(J,xe)|0,d=d+Math.imul(J,we)|0,d=d+Math.imul(ee,xe)|0,E=E+Math.imul(ee,we)|0,w=w+Math.imul(Q,Ee)|0,d=d+Math.imul(Q,Me)|0,d=d+Math.imul(X,Ee)|0,E=E+Math.imul(X,Me)|0,w=w+Math.imul($,Ge)|0,d=d+Math.imul($,ze)|0,d=d+Math.imul(Z,Ge)|0,E=E+Math.imul(Z,ze)|0;var fr=(b+w|0)+((d&8191)<<13)|0;b=(E+(d>>>13)|0)+(fr>>>26)|0,fr&=67108863,w=Math.imul(ae,ye),d=Math.imul(ae,ve),d=d+Math.imul(se,ye)|0,E=Math.imul(se,ve),w=w+Math.imul(re,_e)|0,d=d+Math.imul(re,be)|0,d=d+Math.imul(ne,_e)|0,E=E+Math.imul(ne,be)|0,w=w+Math.imul(te,xe)|0,d=d+Math.imul(te,we)|0,d=d+Math.imul(ie,xe)|0,E=E+Math.imul(ie,we)|0,w=w+Math.imul(J,Ee)|0,d=d+Math.imul(J,Me)|0,d=d+Math.imul(ee,Ee)|0,E=E+Math.imul(ee,Me)|0,w=w+Math.imul(Q,Ge)|0,d=d+Math.imul(Q,ze)|0,d=d+Math.imul(X,Ge)|0,E=E+Math.imul(X,ze)|0;var pr=(b+w|0)+((d&8191)<<13)|0;b=(E+(d>>>13)|0)+(pr>>>26)|0,pr&=67108863,w=Math.imul(ae,_e),d=Math.imul(ae,be),d=d+Math.imul(se,_e)|0,E=Math.imul(se,be),w=w+Math.imul(re,xe)|0,d=d+Math.imul(re,we)|0,d=d+Math.imul(ne,xe)|0,E=E+Math.imul(ne,we)|0,w=w+Math.imul(te,Ee)|0,d=d+Math.imul(te,Me)|0,d=d+Math.imul(ie,Ee)|0,E=E+Math.imul(ie,Me)|0,w=w+Math.imul(J,Ge)|0,d=d+Math.imul(J,ze)|0,d=d+Math.imul(ee,Ge)|0,E=E+Math.imul(ee,ze)|0;var dr=(b+w|0)+((d&8191)<<13)|0;b=(E+(d>>>13)|0)+(dr>>>26)|0,dr&=67108863,w=Math.imul(ae,xe),d=Math.imul(ae,we),d=d+Math.imul(se,xe)|0,E=Math.imul(se,we),w=w+Math.imul(re,Ee)|0,d=d+Math.imul(re,Me)|0,d=d+Math.imul(ne,Ee)|0,E=E+Math.imul(ne,Me)|0,w=w+Math.imul(te,Ge)|0,d=d+Math.imul(te,ze)|0,d=d+Math.imul(ie,Ge)|0,E=E+Math.imul(ie,ze)|0;var Wl=(b+w|0)+((d&8191)<<13)|0;b=(E+(d>>>13)|0)+(Wl>>>26)|0,Wl&=67108863,w=Math.imul(ae,Ee),d=Math.imul(ae,Me),d=d+Math.imul(se,Ee)|0,E=Math.imul(se,Me),w=w+Math.imul(re,Ge)|0,d=d+Math.imul(re,ze)|0,d=d+Math.imul(ne,Ge)|0,E=E+Math.imul(ne,ze)|0;var Yl=(b+w|0)+((d&8191)<<13)|0;b=(E+(d>>>13)|0)+(Yl>>>26)|0,Yl&=67108863,w=Math.imul(ae,Ge),d=Math.imul(ae,ze),d=d+Math.imul(se,Ge)|0,E=Math.imul(se,ze);var $l=(b+w|0)+((d&8191)<<13)|0;return b=(E+(d>>>13)|0)+($l>>>26)|0,$l&=67108863,c[0]=Xi,c[1]=Ji,c[2]=er,c[3]=tr,c[4]=ir,c[5]=rr,c[6]=nr,c[7]=ar,c[8]=sr,c[9]=or,c[10]=lr,c[11]=cr,c[12]=ur,c[13]=fr,c[14]=pr,c[15]=dr,c[16]=Wl,c[17]=Yl,c[18]=$l,b!==0&&(c[19]=b,m.length++),m};Math.imul||(L=P);function U(h,o,u){u.negative=o.negative^h.negative,u.length=h.length+o.length;for(var m=0,v=0,g=0;g<u.length-1;g++){var c=v;v=0;for(var b=m&67108863,w=Math.min(g,o.length-1),d=Math.max(0,g-h.length+1);d<=w;d++){var E=g-d,D=h.words[E]|0,I=o.words[d]|0,k=D*I,F=k&67108863;c=c+(k/67108864|0)|0,F=F+b|0,b=F&67108863,c=c+(F>>>26)|0,v+=c>>>26,c&=67108863}u.words[g]=b,m=c,c=v}return m!==0?u.words[g]=m:u.length--,u._strip()}function z(h,o,u){return U(h,o,u)}n.prototype.mulTo=function(o,u){var m,v=this.length+o.length;return this.length===10&&o.length===10?m=L(this,o,u):v<63?m=P(this,o,u):v<1024?m=U(this,o,u):m=z(this,o,u),m};function V(h,o){this.x=h,this.y=o}V.prototype.makeRBT=function(o){for(var u=new Array(o),m=n.prototype._countBits(o)-1,v=0;v<o;v++)u[v]=this.revBin(v,m,o);return u},V.prototype.revBin=function(o,u,m){if(o===0||o===m-1)return o;for(var v=0,g=0;g<u;g++)v|=(o&1)<<u-g-1,o>>=1;return v},V.prototype.permute=function(o,u,m,v,g,c){for(var b=0;b<c;b++)v[b]=u[o[b]],g[b]=m[o[b]]},V.prototype.transform=function(o,u,m,v,g,c){this.permute(c,o,u,m,v,g);for(var b=1;b<g;b<<=1)for(var w=b<<1,d=Math.cos(2*Math.PI/w),E=Math.sin(2*Math.PI/w),D=0;D<g;D+=w)for(var I=d,k=E,F=0;F<b;F++){var q=m[D+F],K=v[D+F],Ut=m[D+F+b],H=v[D+F+b],B=I*Ut-k*H;H=I*H+k*Ut,Ut=B,m[D+F]=q+Ut,v[D+F]=K+H,m[D+F+b]=q-Ut,v[D+F+b]=K-H,F!==w&&(B=d*I-E*k,k=d*k+E*I,I=B)}},V.prototype.guessLen13b=function(o,u){var m=Math.max(u,o)|1,v=m&1,g=0;for(m=m/2|0;m;m=m>>>1)g++;return 1<<g+1+v},V.prototype.conjugate=function(o,u,m){if(!(m<=1))for(var v=0;v<m/2;v++){var g=o[v];o[v]=o[m-v-1],o[m-v-1]=g,g=u[v],u[v]=-u[m-v-1],u[m-v-1]=-g}},V.prototype.normalize13b=function(o,u){for(var m=0,v=0;v<u/2;v++){var g=Math.round(o[2*v+1]/u)*8192+Math.round(o[2*v]/u)+m;o[v]=g&67108863,g<67108864?m=0:m=g/67108864|0}return o},V.prototype.convert13b=function(o,u,m,v){for(var g=0,c=0;c<u;c++)g=g+(o[c]|0),m[2*c]=g&8191,g=g>>>13,m[2*c+1]=g&8191,g=g>>>13;for(c=2*u;c<v;++c)m[c]=0;i(g===0),i((g&-8192)===0)},V.prototype.stub=function(o){for(var u=new Array(o),m=0;m<o;m++)u[m]=0;return u},V.prototype.mulp=function(o,u,m){var v=2*this.guessLen13b(o.length,u.length),g=this.makeRBT(v),c=this.stub(v),b=new Array(v),w=new Array(v),d=new Array(v),E=new Array(v),D=new Array(v),I=new Array(v),k=m.words;k.length=v,this.convert13b(o.words,o.length,b,v),this.convert13b(u.words,u.length,E,v),this.transform(b,c,w,d,v,g),this.transform(E,c,D,I,v,g);for(var F=0;F<v;F++){var q=w[F]*D[F]-d[F]*I[F];d[F]=w[F]*I[F]+d[F]*D[F],w[F]=q}return this.conjugate(w,d,v),this.transform(w,d,k,c,v,g),this.conjugate(k,c,v),this.normalize13b(k,v),m.negative=o.negative^u.negative,m.length=o.length+u.length,m._strip()},n.prototype.mul=function(o){var u=new n(null);return u.words=new Array(this.length+o.length),this.mulTo(o,u)},n.prototype.mulf=function(o){var u=new n(null);return u.words=new Array(this.length+o.length),z(this,o,u)},n.prototype.imul=function(o){return this.clone().mulTo(o,this)},n.prototype.imuln=function(o){var u=o<0;u&&(o=-o),i(typeof o=="number"),i(o<67108864);for(var m=0,v=0;v<this.length;v++){var g=(this.words[v]|0)*o,c=(g&67108863)+(m&67108863);m>>=26,m+=g/67108864|0,m+=c>>>26,this.words[v]=c&67108863}return m!==0&&(this.words[v]=m,this.length++),u?this.ineg():this},n.prototype.muln=function(o){return this.clone().imuln(o)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(o){var u=O(o);if(u.length===0)return new n(1);for(var m=this,v=0;v<u.length&&u[v]===0;v++,m=m.sqr());if(++v<u.length)for(var g=m.sqr();v<u.length;v++,g=g.sqr())u[v]!==0&&(m=m.mul(g));return m},n.prototype.iushln=function(o){i(typeof o=="number"&&o>=0);var u=o%26,m=(o-u)/26,v=67108863>>>26-u<<26-u,g;if(u!==0){var c=0;for(g=0;g<this.length;g++){var b=this.words[g]&v,w=(this.words[g]|0)-b<<u;this.words[g]=w|c,c=b>>>26-u}c&&(this.words[g]=c,this.length++)}if(m!==0){for(g=this.length-1;g>=0;g--)this.words[g+m]=this.words[g];for(g=0;g<m;g++)this.words[g]=0;this.length+=m}return this._strip()},n.prototype.ishln=function(o){return i(this.negative===0),this.iushln(o)},n.prototype.iushrn=function(o,u,m){i(typeof o=="number"&&o>=0);var v;u?v=(u-u%26)/26:v=0;var g=o%26,c=Math.min((o-g)/26,this.length),b=67108863^67108863>>>g<<g,w=m;if(v-=c,v=Math.max(0,v),w){for(var d=0;d<c;d++)w.words[d]=this.words[d];w.length=c}if(c!==0)if(this.length>c)for(this.length-=c,d=0;d<this.length;d++)this.words[d]=this.words[d+c];else this.words[0]=0,this.length=1;var E=0;for(d=this.length-1;d>=0&&(E!==0||d>=v);d--){var D=this.words[d]|0;this.words[d]=E<<26-g|D>>>g,E=D&b}return w&&E!==0&&(w.words[w.length++]=E),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},n.prototype.ishrn=function(o,u,m){return i(this.negative===0),this.iushrn(o,u,m)},n.prototype.shln=function(o){return this.clone().ishln(o)},n.prototype.ushln=function(o){return this.clone().iushln(o)},n.prototype.shrn=function(o){return this.clone().ishrn(o)},n.prototype.ushrn=function(o){return this.clone().iushrn(o)},n.prototype.testn=function(o){i(typeof o=="number"&&o>=0);var u=o%26,m=(o-u)/26,v=1<<u;if(this.length<=m)return!1;var g=this.words[m];return!!(g&v)},n.prototype.imaskn=function(o){i(typeof o=="number"&&o>=0);var u=o%26,m=(o-u)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(u!==0&&m++,this.length=Math.min(m,this.length),u!==0){var v=67108863^67108863>>>u<<u;this.words[this.length-1]&=v}return this._strip()},n.prototype.maskn=function(o){return this.clone().imaskn(o)},n.prototype.iaddn=function(o){return i(typeof o=="number"),i(o<67108864),o<0?this.isubn(-o):this.negative!==0?this.length===1&&(this.words[0]|0)<=o?(this.words[0]=o-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(o),this.negative=1,this):this._iaddn(o)},n.prototype._iaddn=function(o){this.words[0]+=o;for(var u=0;u<this.length&&this.words[u]>=67108864;u++)this.words[u]-=67108864,u===this.length-1?this.words[u+1]=1:this.words[u+1]++;return this.length=Math.max(this.length,u+1),this},n.prototype.isubn=function(o){if(i(typeof o=="number"),i(o<67108864),o<0)return this.iaddn(-o);if(this.negative!==0)return this.negative=0,this.iaddn(o),this.negative=1,this;if(this.words[0]-=o,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var u=0;u<this.length&&this.words[u]<0;u++)this.words[u]+=67108864,this.words[u+1]-=1;return this._strip()},n.prototype.addn=function(o){return this.clone().iaddn(o)},n.prototype.subn=function(o){return this.clone().isubn(o)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(o,u,m){var v=o.length+m,g;this._expand(v);var c,b=0;for(g=0;g<o.length;g++){c=(this.words[g+m]|0)+b;var w=(o.words[g]|0)*u;c-=w&67108863,b=(c>>26)-(w/67108864|0),this.words[g+m]=c&67108863}for(;g<this.length-m;g++)c=(this.words[g+m]|0)+b,b=c>>26,this.words[g+m]=c&67108863;if(b===0)return this._strip();for(i(b===-1),b=0,g=0;g<this.length;g++)c=-(this.words[g]|0)+b,b=c>>26,this.words[g]=c&67108863;return this.negative=1,this._strip()},n.prototype._wordDiv=function(o,u){var m=this.length-o.length,v=this.clone(),g=o,c=g.words[g.length-1]|0,b=this._countBits(c);m=26-b,m!==0&&(g=g.ushln(m),v.iushln(m),c=g.words[g.length-1]|0);var w=v.length-g.length,d;if(u!=="mod"){d=new n(null),d.length=w+1,d.words=new Array(d.length);for(var E=0;E<d.length;E++)d.words[E]=0}var D=v.clone()._ishlnsubmul(g,1,w);D.negative===0&&(v=D,d&&(d.words[w]=1));for(var I=w-1;I>=0;I--){var k=(v.words[g.length+I]|0)*67108864+(v.words[g.length+I-1]|0);for(k=Math.min(k/c|0,67108863),v._ishlnsubmul(g,k,I);v.negative!==0;)k--,v.negative=0,v._ishlnsubmul(g,1,I),v.isZero()||(v.negative^=1);d&&(d.words[I]=k)}return d&&d._strip(),v._strip(),u!=="div"&&m!==0&&v.iushrn(m),{div:d||null,mod:v}},n.prototype.divmod=function(o,u,m){if(i(!o.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var v,g,c;return this.negative!==0&&o.negative===0?(c=this.neg().divmod(o,u),u!=="mod"&&(v=c.div.neg()),u!=="div"&&(g=c.mod.neg(),m&&g.negative!==0&&g.iadd(o)),{div:v,mod:g}):this.negative===0&&o.negative!==0?(c=this.divmod(o.neg(),u),u!=="mod"&&(v=c.div.neg()),{div:v,mod:c.mod}):this.negative&o.negative?(c=this.neg().divmod(o.neg(),u),u!=="div"&&(g=c.mod.neg(),m&&g.negative!==0&&g.isub(o)),{div:c.div,mod:g}):o.length>this.length||this.cmp(o)<0?{div:new n(0),mod:this}:o.length===1?u==="div"?{div:this.divn(o.words[0]),mod:null}:u==="mod"?{div:null,mod:new n(this.modrn(o.words[0]))}:{div:this.divn(o.words[0]),mod:new n(this.modrn(o.words[0]))}:this._wordDiv(o,u)},n.prototype.div=function(o){return this.divmod(o,"div",!1).div},n.prototype.mod=function(o){return this.divmod(o,"mod",!1).mod},n.prototype.umod=function(o){return this.divmod(o,"mod",!0).mod},n.prototype.divRound=function(o){var u=this.divmod(o);if(u.mod.isZero())return u.div;var m=u.div.negative!==0?u.mod.isub(o):u.mod,v=o.ushrn(1),g=o.andln(1),c=m.cmp(v);return c<0||g===1&&c===0?u.div:u.div.negative!==0?u.div.isubn(1):u.div.iaddn(1)},n.prototype.modrn=function(o){var u=o<0;u&&(o=-o),i(o<=67108863);for(var m=(1<<26)%o,v=0,g=this.length-1;g>=0;g--)v=(m*v+(this.words[g]|0))%o;return u?-v:v},n.prototype.modn=function(o){return this.modrn(o)},n.prototype.idivn=function(o){var u=o<0;u&&(o=-o),i(o<=67108863);for(var m=0,v=this.length-1;v>=0;v--){var g=(this.words[v]|0)+m*67108864;this.words[v]=g/o|0,m=g%o}return this._strip(),u?this.ineg():this},n.prototype.divn=function(o){return this.clone().idivn(o)},n.prototype.egcd=function(o){i(o.negative===0),i(!o.isZero());var u=this,m=o.clone();u.negative!==0?u=u.umod(o):u=u.clone();for(var v=new n(1),g=new n(0),c=new n(0),b=new n(1),w=0;u.isEven()&&m.isEven();)u.iushrn(1),m.iushrn(1),++w;for(var d=m.clone(),E=u.clone();!u.isZero();){for(var D=0,I=1;!(u.words[0]&I)&&D<26;++D,I<<=1);if(D>0)for(u.iushrn(D);D-- >0;)(v.isOdd()||g.isOdd())&&(v.iadd(d),g.isub(E)),v.iushrn(1),g.iushrn(1);for(var k=0,F=1;!(m.words[0]&F)&&k<26;++k,F<<=1);if(k>0)for(m.iushrn(k);k-- >0;)(c.isOdd()||b.isOdd())&&(c.iadd(d),b.isub(E)),c.iushrn(1),b.iushrn(1);u.cmp(m)>=0?(u.isub(m),v.isub(c),g.isub(b)):(m.isub(u),c.isub(v),b.isub(g))}return{a:c,b,gcd:m.iushln(w)}},n.prototype._invmp=function(o){i(o.negative===0),i(!o.isZero());var u=this,m=o.clone();u.negative!==0?u=u.umod(o):u=u.clone();for(var v=new n(1),g=new n(0),c=m.clone();u.cmpn(1)>0&&m.cmpn(1)>0;){for(var b=0,w=1;!(u.words[0]&w)&&b<26;++b,w<<=1);if(b>0)for(u.iushrn(b);b-- >0;)v.isOdd()&&v.iadd(c),v.iushrn(1);for(var d=0,E=1;!(m.words[0]&E)&&d<26;++d,E<<=1);if(d>0)for(m.iushrn(d);d-- >0;)g.isOdd()&&g.iadd(c),g.iushrn(1);u.cmp(m)>=0?(u.isub(m),v.isub(g)):(m.isub(u),g.isub(v))}var D;return u.cmpn(1)===0?D=v:D=g,D.cmpn(0)<0&&D.iadd(o),D},n.prototype.gcd=function(o){if(this.isZero())return o.abs();if(o.isZero())return this.abs();var u=this.clone(),m=o.clone();u.negative=0,m.negative=0;for(var v=0;u.isEven()&&m.isEven();v++)u.iushrn(1),m.iushrn(1);do{for(;u.isEven();)u.iushrn(1);for(;m.isEven();)m.iushrn(1);var g=u.cmp(m);if(g<0){var c=u;u=m,m=c}else if(g===0||m.cmpn(1)===0)break;u.isub(m)}while(!0);return m.iushln(v)},n.prototype.invm=function(o){return this.egcd(o).a.umod(o)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(o){return this.words[0]&o},n.prototype.bincn=function(o){i(typeof o=="number");var u=o%26,m=(o-u)/26,v=1<<u;if(this.length<=m)return this._expand(m+1),this.words[m]|=v,this;for(var g=v,c=m;g!==0&&c<this.length;c++){var b=this.words[c]|0;b+=g,g=b>>>26,b&=67108863,this.words[c]=b}return g!==0&&(this.words[c]=g,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(o){var u=o<0;if(this.negative!==0&&!u)return-1;if(this.negative===0&&u)return 1;this._strip();var m;if(this.length>1)m=1;else{u&&(o=-o),i(o<=67108863,"Number is too big");var v=this.words[0]|0;m=v===o?0:v<o?-1:1}return this.negative!==0?-m|0:m},n.prototype.cmp=function(o){if(this.negative!==0&&o.negative===0)return-1;if(this.negative===0&&o.negative!==0)return 1;var u=this.ucmp(o);return this.negative!==0?-u|0:u},n.prototype.ucmp=function(o){if(this.length>o.length)return 1;if(this.length<o.length)return-1;for(var u=0,m=this.length-1;m>=0;m--){var v=this.words[m]|0,g=o.words[m]|0;if(v!==g){v<g?u=-1:v>g&&(u=1);break}}return u},n.prototype.gtn=function(o){return this.cmpn(o)===1},n.prototype.gt=function(o){return this.cmp(o)===1},n.prototype.gten=function(o){return this.cmpn(o)>=0},n.prototype.gte=function(o){return this.cmp(o)>=0},n.prototype.ltn=function(o){return this.cmpn(o)===-1},n.prototype.lt=function(o){return this.cmp(o)===-1},n.prototype.lten=function(o){return this.cmpn(o)<=0},n.prototype.lte=function(o){return this.cmp(o)<=0},n.prototype.eqn=function(o){return this.cmpn(o)===0},n.prototype.eq=function(o){return this.cmp(o)===0},n.red=function(o){return new f(o)},n.prototype.toRed=function(o){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),o.convertTo(this)._forceRed(o)},n.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(o){return this.red=o,this},n.prototype.forceRed=function(o){return i(!this.red,"Already a number in reduction context"),this._forceRed(o)},n.prototype.redAdd=function(o){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,o)},n.prototype.redIAdd=function(o){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,o)},n.prototype.redSub=function(o){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,o)},n.prototype.redISub=function(o){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,o)},n.prototype.redShl=function(o){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,o)},n.prototype.redMul=function(o){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.mul(this,o)},n.prototype.redIMul=function(o){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,o),this.red.imul(this,o)},n.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(o){return i(this.red&&!o.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,o)};var Be={k256:null,p224:null,p192:null,p25519:null};function De(h,o){this.name=h,this.p=new n(o,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}De.prototype._tmp=function(){var o=new n(null);return o.words=new Array(Math.ceil(this.n/13)),o},De.prototype.ireduce=function(o){var u=o,m;do this.split(u,this.tmp),u=this.imulK(u),u=u.iadd(this.tmp),m=u.bitLength();while(m>this.n);var v=m<this.n?-1:u.ucmp(this.p);return v===0?(u.words[0]=0,u.length=1):v>0?u.isub(this.p):u.strip!==void 0?u.strip():u._strip(),u},De.prototype.split=function(o,u){o.iushrn(this.n,0,u)},De.prototype.imulK=function(o){return o.imul(this.k)};function Je(){De.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(Je,De),Je.prototype.split=function(o,u){for(var m=4194303,v=Math.min(o.length,9),g=0;g<v;g++)u.words[g]=o.words[g];if(u.length=v,o.length<=9){o.words[0]=0,o.length=1;return}var c=o.words[9];for(u.words[u.length++]=c&m,g=10;g<o.length;g++){var b=o.words[g]|0;o.words[g-10]=(b&m)<<4|c>>>22,c=b}c>>>=22,o.words[g-10]=c,c===0&&o.length>10?o.length-=10:o.length-=9},Je.prototype.imulK=function(o){o.words[o.length]=0,o.words[o.length+1]=0,o.length+=2;for(var u=0,m=0;m<o.length;m++){var v=o.words[m]|0;u+=v*977,o.words[m]=u&67108863,u=v*64+(u/67108864|0)}return o.words[o.length-1]===0&&(o.length--,o.words[o.length-1]===0&&o.length--),o};function Ae(){De.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(Ae,De);function tt(){De.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r(tt,De);function A(){De.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(A,De),A.prototype.imulK=function(o){for(var u=0,m=0;m<o.length;m++){var v=(o.words[m]|0)*19+u,g=v&67108863;v>>>=26,o.words[m]=g,u=v}return u!==0&&(o.words[o.length++]=u),o},n._prime=function(o){if(Be[o])return Be[o];var u;if(o==="k256")u=new Je;else if(o==="p224")u=new Ae;else if(o==="p192")u=new tt;else if(o==="p25519")u=new A;else throw new Error("Unknown prime "+o);return Be[o]=u,u};function f(h){if(typeof h=="string"){var o=n._prime(h);this.m=o.p,this.prime=o}else i(h.gtn(1),"modulus must be greater than 1"),this.m=h,this.prime=null}f.prototype._verify1=function(o){i(o.negative===0,"red works only with positives"),i(o.red,"red works only with red numbers")},f.prototype._verify2=function(o,u){i((o.negative|u.negative)===0,"red works only with positives"),i(o.red&&o.red===u.red,"red works only with red numbers")},f.prototype.imod=function(o){return this.prime?this.prime.ireduce(o)._forceRed(this):(y(o,o.umod(this.m)._forceRed(this)),o)},f.prototype.neg=function(o){return o.isZero()?o.clone():this.m.sub(o)._forceRed(this)},f.prototype.add=function(o,u){this._verify2(o,u);var m=o.add(u);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},f.prototype.iadd=function(o,u){this._verify2(o,u);var m=o.iadd(u);return m.cmp(this.m)>=0&&m.isub(this.m),m},f.prototype.sub=function(o,u){this._verify2(o,u);var m=o.sub(u);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},f.prototype.isub=function(o,u){this._verify2(o,u);var m=o.isub(u);return m.cmpn(0)<0&&m.iadd(this.m),m},f.prototype.shl=function(o,u){return this._verify1(o),this.imod(o.ushln(u))},f.prototype.imul=function(o,u){return this._verify2(o,u),this.imod(o.imul(u))},f.prototype.mul=function(o,u){return this._verify2(o,u),this.imod(o.mul(u))},f.prototype.isqr=function(o){return this.imul(o,o.clone())},f.prototype.sqr=function(o){return this.mul(o,o)},f.prototype.sqrt=function(o){if(o.isZero())return o.clone();var u=this.m.andln(3);if(i(u%2===1),u===3){var m=this.m.add(new n(1)).iushrn(2);return this.pow(o,m)}for(var v=this.m.subn(1),g=0;!v.isZero()&&v.andln(1)===0;)g++,v.iushrn(1);i(!v.isZero());var c=new n(1).toRed(this),b=c.redNeg(),w=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new n(2*d*d).toRed(this);this.pow(d,w).cmp(b)!==0;)d.redIAdd(b);for(var E=this.pow(d,v),D=this.pow(o,v.addn(1).iushrn(1)),I=this.pow(o,v),k=g;I.cmp(c)!==0;){for(var F=I,q=0;F.cmp(c)!==0;q++)F=F.redSqr();i(q<k);var K=this.pow(E,new n(1).iushln(k-q-1));D=D.redMul(K),E=K.redSqr(),I=I.redMul(E),k=q}return D},f.prototype.invm=function(o){var u=o._invmp(this.m);return u.negative!==0?(u.negative=0,this.imod(u).redNeg()):this.imod(u)},f.prototype.pow=function(o,u){if(u.isZero())return new n(1).toRed(this);if(u.cmpn(1)===0)return o.clone();var m=4,v=new Array(1<<m);v[0]=new n(1).toRed(this),v[1]=o;for(var g=2;g<v.length;g++)v[g]=this.mul(v[g-1],o);var c=v[0],b=0,w=0,d=u.bitLength()%26;for(d===0&&(d=26),g=u.length-1;g>=0;g--){for(var E=u.words[g],D=d-1;D>=0;D--){var I=E>>D&1;if(c!==v[0]&&(c=this.sqr(c)),I===0&&b===0){w=0;continue}b<<=1,b|=I,w++,!(w!==m&&(g!==0||D!==0))&&(c=this.mul(c,v[b]),w=0,b=0)}d=26}return c},f.prototype.convertTo=function(o){var u=o.umod(this.m);return u===o?u.clone():u},f.prototype.convertFrom=function(o){var u=o.clone();return u.red=null,u},n.mont=function(o){return new _(o)};function _(h){f.call(this,h),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}r(_,f),_.prototype.convertTo=function(o){return this.imod(o.ushln(this.shift))},_.prototype.convertFrom=function(o){var u=this.imod(o.mul(this.rinv));return u.red=null,u},_.prototype.imul=function(o,u){if(o.isZero()||u.isZero())return o.words[0]=0,o.length=1,o;var m=o.imul(u),v=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=m.isub(v).iushrn(this.shift),c=g;return g.cmp(this.m)>=0?c=g.isub(this.m):g.cmpn(0)<0&&(c=g.iadd(this.m)),c._forceRed(this)},_.prototype.mul=function(o,u){if(o.isZero()||u.isZero())return new n(0)._forceRed(this);var m=o.mul(u),v=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=m.isub(v).iushrn(this.shift),c=g;return g.cmp(this.m)>=0?c=g.isub(this.m):g.cmpn(0)<0&&(c=g.iadd(this.m)),c._forceRed(this)},_.prototype.invm=function(o){var u=this.imod(o._invmp(this.m).mul(this.r2));return u._forceRed(this)}})(typeof Wc>"u"||Wc,Fh)});var zh=R(zr=>{"use strict";var bE=zr&&zr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(zr,"__esModule",{value:!0});zr.encodeNamedCurves=void 0;var Hh=bE(wa()),xE=Vt(),Bh=Gh(32),Uh=Gh(48);zr.encodeNamedCurves=Object.freeze({prime256v1:Bh,secp384r1:Uh,"P-256":Bh,"P-384":Uh});function Gh(t){return function(i){(0,xE.needs)(i.byteLength===1+t*2,"Malformed public key.");let r=i.slice(1,t+1),n=i.slice(t+1,t*2+1),a=new Hh.default([...n]).mod(new Hh.default(2)).toNumber()+2,s=new Uint8Array(1+r.length);return s.set([a],0),s.set(r,1),s}}});var Qh=R(Vr=>{"use strict";var wE=Vr&&Vr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vr,"__esModule",{value:!0});Vr.decodeNamedCurves=void 0;var gt=wE(wa()),Vh=Vt(),Wh=Zh(new gt.default("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF",16),new gt.default("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC",16),new gt.default("5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B",16)),Yh=Zh(new gt.default("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF",16),new gt.default("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC",16),new gt.default("B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF",16));Vr.decodeNamedCurves=Object.freeze({prime256v1:Wh,secp384r1:Yh,"P-256":Wh,"P-384":Yh});function Zh(t,e,i){let r=new gt.default(0),n=new gt.default(1),a=new gt.default(2),s=new gt.default(3),l=new gt.default(4);(0,Vh.needs)(t.mod(l).eq(s),"Curve not supported at this time");let p=gt.default.mont(t),y=t.add(n).div(l),x={2:r,3:n},S=1+t.bitLength()/8;return function(C){(0,Vh.needs)(C.byteLength===S,"Compressed point length is not correct.");let T=C.slice(1),O=T.byteLength,P=new gt.default([...T]),L=x[C[0]],U=P.pow(s).mod(t),z=e.mul(P).mod(t),Be=U.add(z).add(i).mod(t).toRed(p).redPow(y).fromRed();if(Be.mod(a).eq(L))return $h(P,Be,O);{let De=t.sub(Be);return $h(P,De,O)}}}function $h(t,e,i){return new Uint8Array([4,...t.toArray("be",i),...e.toArray("be",i)])}});var $c=R((Xh,Yc)=>{(function(t,e){"use strict";function i(A,f){if(!A)throw new Error(f||"Assertion failed")}function r(A,f){A.super_=f;var _=function(){};_.prototype=f.prototype,A.prototype=new _,A.prototype.constructor=A}function n(A,f,_){if(n.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,A!==null&&((f==="le"||f==="be")&&(_=f,f=10),this._init(A||0,f||10,_||"be"))}typeof t=="object"?t.exports=n:e.BN=n,n.BN=n,n.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=require("buffer").Buffer}catch{}n.isBN=function(f){return f instanceof n?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===n.wordSize&&Array.isArray(f.words)},n.max=function(f,_){return f.cmp(_)>0?f:_},n.min=function(f,_){return f.cmp(_)<0?f:_},n.prototype._init=function(f,_,h){if(typeof f=="number")return this._initNumber(f,_,h);if(typeof f=="object")return this._initArray(f,_,h);_==="hex"&&(_=16),i(_===(_|0)&&_>=2&&_<=36),f=f.toString().replace(/\s+/g,"");var o=0;f[0]==="-"&&(o++,this.negative=1),o<f.length&&(_===16?this._parseHex(f,o,h):(this._parseBase(f,_,o),h==="le"&&this._initArray(this.toArray(),_,h)))},n.prototype._initNumber=function(f,_,h){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(i(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),_,h)},n.prototype._initArray=function(f,_,h){if(i(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var u,m,v=0;if(h==="be")for(o=f.length-1,u=0;o>=0;o-=3)m=f[o]|f[o-1]<<8|f[o-2]<<16,this.words[u]|=m<<v&67108863,this.words[u+1]=m>>>26-v&67108863,v+=24,v>=26&&(v-=26,u++);else if(h==="le")for(o=0,u=0;o<f.length;o+=3)m=f[o]|f[o+1]<<8|f[o+2]<<16,this.words[u]|=m<<v&67108863,this.words[u+1]=m>>>26-v&67108863,v+=24,v>=26&&(v-=26,u++);return this.strip()};function s(A,f){var _=A.charCodeAt(f);return _>=65&&_<=70?_-55:_>=97&&_<=102?_-87:_-48&15}function l(A,f,_){var h=s(A,_);return _-1>=f&&(h|=s(A,_-1)<<4),h}n.prototype._parseHex=function(f,_,h){this.length=Math.ceil((f.length-_)/6),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var u=0,m=0,v;if(h==="be")for(o=f.length-1;o>=_;o-=2)v=l(f,_,o)<<u,this.words[m]|=v&67108863,u>=18?(u-=18,m+=1,this.words[m]|=v>>>26):u+=8;else{var g=f.length-_;for(o=g%2===0?_+1:_;o<f.length;o+=2)v=l(f,_,o)<<u,this.words[m]|=v&67108863,u>=18?(u-=18,m+=1,this.words[m]|=v>>>26):u+=8}this.strip()};function p(A,f,_,h){for(var o=0,u=Math.min(A.length,_),m=f;m<u;m++){var v=A.charCodeAt(m)-48;o*=h,v>=49?o+=v-49+10:v>=17?o+=v-17+10:o+=v}return o}n.prototype._parseBase=function(f,_,h){this.words=[0],this.length=1;for(var o=0,u=1;u<=67108863;u*=_)o++;o--,u=u/_|0;for(var m=f.length-h,v=m%o,g=Math.min(m,m-v)+h,c=0,b=h;b<g;b+=o)c=p(f,b,b+o,_),this.imuln(u),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(v!==0){var w=1;for(c=p(f,b,f.length,_),b=0;b<v;b++)w*=_;this.imuln(w),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this.strip()},n.prototype.copy=function(f){f.words=new Array(this.length);for(var _=0;_<this.length;_++)f.words[_]=this.words[_];f.length=this.length,f.negative=this.negative,f.red=this.red},n.prototype.clone=function(){var f=new n(null);return this.copy(f),f},n.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(f,_){f=f||10,_=_|0||1;var h;if(f===16||f==="hex"){h="";for(var o=0,u=0,m=0;m<this.length;m++){var v=this.words[m],g=((v<<o|u)&16777215).toString(16);u=v>>>24-o&16777215,u!==0||m!==this.length-1?h=y[6-g.length]+g+h:h=g+h,o+=2,o>=26&&(o-=26,m--)}for(u!==0&&(h=u.toString(16)+h);h.length%_!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(f===(f|0)&&f>=2&&f<=36){var c=x[f],b=S[f];h="";var w=this.clone();for(w.negative=0;!w.isZero();){var d=w.modn(b).toString(f);w=w.idivn(b),w.isZero()?h=d+h:h=y[c-d.length]+d+h}for(this.isZero()&&(h="0"+h);h.length%_!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}i(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(f,_){return i(typeof a<"u"),this.toArrayLike(a,f,_)},n.prototype.toArray=function(f,_){return this.toArrayLike(Array,f,_)},n.prototype.toArrayLike=function(f,_,h){var o=this.byteLength(),u=h||Math.max(1,o);i(o<=u,"byte array longer than desired length"),i(u>0,"Requested array length <= 0"),this.strip();var m=_==="le",v=new f(u),g,c,b=this.clone();if(m){for(c=0;!b.isZero();c++)g=b.andln(255),b.iushrn(8),v[c]=g;for(;c<u;c++)v[c]=0}else{for(c=0;c<u-o;c++)v[c]=0;for(c=0;!b.isZero();c++)g=b.andln(255),b.iushrn(8),v[u-c-1]=g}return v},Math.clz32?n.prototype._countBits=function(f){return 32-Math.clz32(f)}:n.prototype._countBits=function(f){var _=f,h=0;return _>=4096&&(h+=13,_>>>=13),_>=64&&(h+=7,_>>>=7),_>=8&&(h+=4,_>>>=4),_>=2&&(h+=2,_>>>=2),h+_},n.prototype._zeroBits=function(f){if(f===0)return 26;var _=f,h=0;return _&8191||(h+=13,_>>>=13),_&127||(h+=7,_>>>=7),_&15||(h+=4,_>>>=4),_&3||(h+=2,_>>>=2),_&1||h++,h},n.prototype.bitLength=function(){var f=this.words[this.length-1],_=this._countBits(f);return(this.length-1)*26+_};function M(A){for(var f=new Array(A.bitLength()),_=0;_<f.length;_++){var h=_/26|0,o=_%26;f[_]=(A.words[h]&1<<o)>>>o}return f}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,_=0;_<this.length;_++){var h=this._zeroBits(this.words[_]);if(f+=h,h!==26)break}return f},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},n.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var _=0;_<f.length;_++)this.words[_]=this.words[_]|f.words[_];return this.strip()},n.prototype.ior=function(f){return i((this.negative|f.negative)===0),this.iuor(f)},n.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},n.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},n.prototype.iuand=function(f){var _;this.length>f.length?_=f:_=this;for(var h=0;h<_.length;h++)this.words[h]=this.words[h]&f.words[h];return this.length=_.length,this.strip()},n.prototype.iand=function(f){return i((this.negative|f.negative)===0),this.iuand(f)},n.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},n.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},n.prototype.iuxor=function(f){var _,h;this.length>f.length?(_=this,h=f):(_=f,h=this);for(var o=0;o<h.length;o++)this.words[o]=_.words[o]^h.words[o];if(this!==_)for(;o<_.length;o++)this.words[o]=_.words[o];return this.length=_.length,this.strip()},n.prototype.ixor=function(f){return i((this.negative|f.negative)===0),this.iuxor(f)},n.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},n.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},n.prototype.inotn=function(f){i(typeof f=="number"&&f>=0);var _=Math.ceil(f/26)|0,h=f%26;this._expand(_),h>0&&_--;for(var o=0;o<_;o++)this.words[o]=~this.words[o]&67108863;return h>0&&(this.words[o]=~this.words[o]&67108863>>26-h),this.strip()},n.prototype.notn=function(f){return this.clone().inotn(f)},n.prototype.setn=function(f,_){i(typeof f=="number"&&f>=0);var h=f/26|0,o=f%26;return this._expand(h+1),_?this.words[h]=this.words[h]|1<<o:this.words[h]=this.words[h]&~(1<<o),this.strip()},n.prototype.iadd=function(f){var _;if(this.negative!==0&&f.negative===0)return this.negative=0,_=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,_=this.isub(f),f.negative=1,_._normSign();var h,o;this.length>f.length?(h=this,o=f):(h=f,o=this);for(var u=0,m=0;m<o.length;m++)_=(h.words[m]|0)+(o.words[m]|0)+u,this.words[m]=_&67108863,u=_>>>26;for(;u!==0&&m<h.length;m++)_=(h.words[m]|0)+u,this.words[m]=_&67108863,u=_>>>26;if(this.length=h.length,u!==0)this.words[this.length]=u,this.length++;else if(h!==this)for(;m<h.length;m++)this.words[m]=h.words[m];return this},n.prototype.add=function(f){var _;return f.negative!==0&&this.negative===0?(f.negative=0,_=this.sub(f),f.negative^=1,_):f.negative===0&&this.negative!==0?(this.negative=0,_=f.sub(this),this.negative=1,_):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},n.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var _=this.iadd(f);return f.negative=1,_._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var h=this.cmp(f);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var o,u;h>0?(o=this,u=f):(o=f,u=this);for(var m=0,v=0;v<u.length;v++)_=(o.words[v]|0)-(u.words[v]|0)+m,m=_>>26,this.words[v]=_&67108863;for(;m!==0&&v<o.length;v++)_=(o.words[v]|0)+m,m=_>>26,this.words[v]=_&67108863;if(m===0&&v<o.length&&o!==this)for(;v<o.length;v++)this.words[v]=o.words[v];return this.length=Math.max(this.length,v),o!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(f){return this.clone().isub(f)};function C(A,f,_){_.negative=f.negative^A.negative;var h=A.length+f.length|0;_.length=h,h=h-1|0;var o=A.words[0]|0,u=f.words[0]|0,m=o*u,v=m&67108863,g=m/67108864|0;_.words[0]=v;for(var c=1;c<h;c++){for(var b=g>>>26,w=g&67108863,d=Math.min(c,f.length-1),E=Math.max(0,c-A.length+1);E<=d;E++){var D=c-E|0;o=A.words[D]|0,u=f.words[E]|0,m=o*u+w,b+=m/67108864|0,w=m&67108863}_.words[c]=w|0,g=b|0}return g!==0?_.words[c]=g|0:_.length--,_.strip()}var T=function(f,_,h){var o=f.words,u=_.words,m=h.words,v=0,g,c,b,w=o[0]|0,d=w&8191,E=w>>>13,D=o[1]|0,I=D&8191,k=D>>>13,F=o[2]|0,q=F&8191,K=F>>>13,Ut=o[3]|0,H=Ut&8191,B=Ut>>>13,Wn=o[4]|0,W=Wn&8191,Y=Wn>>>13,Yn=o[5]|0,$=Yn&8191,Z=Yn>>>13,$n=o[6]|0,Q=$n&8191,X=$n>>>13,Zn=o[7]|0,J=Zn&8191,ee=Zn>>>13,Qn=o[8]|0,te=Qn&8191,ie=Qn>>>13,Xn=o[9]|0,re=Xn&8191,ne=Xn>>>13,Jn=u[0]|0,ae=Jn&8191,se=Jn>>>13,ea=u[1]|0,oe=ea&8191,le=ea>>>13,ta=u[2]|0,ce=ta&8191,ue=ta>>>13,ia=u[3]|0,fe=ia&8191,pe=ia>>>13,ra=u[4]|0,de=ra&8191,he=ra>>>13,na=u[5]|0,me=na&8191,ge=na>>>13,aa=u[6]|0,ye=aa&8191,ve=aa>>>13,sa=u[7]|0,_e=sa&8191,be=sa>>>13,oa=u[8]|0,xe=oa&8191,we=oa>>>13,la=u[9]|0,Ee=la&8191,Me=la>>>13;h.negative=f.negative^_.negative,h.length=19,g=Math.imul(d,ae),c=Math.imul(d,se),c=c+Math.imul(E,ae)|0,b=Math.imul(E,se);var jr=(v+g|0)+((c&8191)<<13)|0;v=(b+(c>>>13)|0)+(jr>>>26)|0,jr&=67108863,g=Math.imul(I,ae),c=Math.imul(I,se),c=c+Math.imul(k,ae)|0,b=Math.imul(k,se),g=g+Math.imul(d,oe)|0,c=c+Math.imul(d,le)|0,c=c+Math.imul(E,oe)|0,b=b+Math.imul(E,le)|0;var Ge=(v+g|0)+((c&8191)<<13)|0;v=(b+(c>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,g=Math.imul(q,ae),c=Math.imul(q,se),c=c+Math.imul(K,ae)|0,b=Math.imul(K,se),g=g+Math.imul(I,oe)|0,c=c+Math.imul(I,le)|0,c=c+Math.imul(k,oe)|0,b=b+Math.imul(k,le)|0,g=g+Math.imul(d,ce)|0,c=c+Math.imul(d,ue)|0,c=c+Math.imul(E,ce)|0,b=b+Math.imul(E,ue)|0;var ze=(v+g|0)+((c&8191)<<13)|0;v=(b+(c>>>13)|0)+(ze>>>26)|0,ze&=67108863,g=Math.imul(H,ae),c=Math.imul(H,se),c=c+Math.imul(B,ae)|0,b=Math.imul(B,se),g=g+Math.imul(q,oe)|0,c=c+Math.imul(q,le)|0,c=c+Math.imul(K,oe)|0,b=b+Math.imul(K,le)|0,g=g+Math.imul(I,ce)|0,c=c+Math.imul(I,ue)|0,c=c+Math.imul(k,ce)|0,b=b+Math.imul(k,ue)|0,g=g+Math.imul(d,fe)|0,c=c+Math.imul(d,pe)|0,c=c+Math.imul(E,fe)|0,b=b+Math.imul(E,pe)|0;var Xi=(v+g|0)+((c&8191)<<13)|0;v=(b+(c>>>13)|0)+(Xi>>>26)|0,Xi&=67108863,g=Math.imul(W,ae),c=Math.imul(W,se),c=c+Math.imul(Y,ae)|0,b=Math.imul(Y,se),g=g+Math.imul(H,oe)|0,c=c+Math.imul(H,le)|0,c=c+Math.imul(B,oe)|0,b=b+Math.imul(B,le)|0,g=g+Math.imul(q,ce)|0,c=c+Math.imul(q,ue)|0,c=c+Math.imul(K,ce)|0,b=b+Math.imul(K,ue)|0,g=g+Math.imul(I,fe)|0,c=c+Math.imul(I,pe)|0,c=c+Math.imul(k,fe)|0,b=b+Math.imul(k,pe)|0,g=g+Math.imul(d,de)|0,c=c+Math.imul(d,he)|0,c=c+Math.imul(E,de)|0,b=b+Math.imul(E,he)|0;var Ji=(v+g|0)+((c&8191)<<13)|0;v=(b+(c>>>13)|0)+(Ji>>>26)|0,Ji&=67108863,g=Math.imul($,ae),c=Math.imul($,se),c=c+Math.imul(Z,ae)|0,b=Math.imul(Z,se),g=g+Math.imul(W,oe)|0,c=c+Math.imul(W,le)|0,c=c+Math.imul(Y,oe)|0,b=b+Math.imul(Y,le)|0,g=g+Math.imul(H,ce)|0,c=c+Math.imul(H,ue)|0,c=c+Math.imul(B,ce)|0,b=b+Math.imul(B,ue)|0,g=g+Math.imul(q,fe)|0,c=c+Math.imul(q,pe)|0,c=c+Math.imul(K,fe)|0,b=b+Math.imul(K,pe)|0,g=g+Math.imul(I,de)|0,c=c+Math.imul(I,he)|0,c=c+Math.imul(k,de)|0,b=b+Math.imul(k,he)|0,g=g+Math.imul(d,me)|0,c=c+Math.imul(d,ge)|0,c=c+Math.imul(E,me)|0,b=b+Math.imul(E,ge)|0;var er=(v+g|0)+((c&8191)<<13)|0;v=(b+(c>>>13)|0)+(er>>>26)|0,er&=67108863,g=Math.imul(Q,ae),c=Math.imul(Q,se),c=c+Math.imul(X,ae)|0,b=Math.imul(X,se),g=g+Math.imul($,oe)|0,c=c+Math.imul($,le)|0,c=c+Math.imul(Z,oe)|0,b=b+Math.imul(Z,le)|0,g=g+Math.imul(W,ce)|0,c=c+Math.imul(W,ue)|0,c=c+Math.imul(Y,ce)|0,b=b+Math.imul(Y,ue)|0,g=g+Math.imul(H,fe)|0,c=c+Math.imul(H,pe)|0,c=c+Math.imul(B,fe)|0,b=b+Math.imul(B,pe)|0,g=g+Math.imul(q,de)|0,c=c+Math.imul(q,he)|0,c=c+Math.imul(K,de)|0,b=b+Math.imul(K,he)|0,g=g+Math.imul(I,me)|0,c=c+Math.imul(I,ge)|0,c=c+Math.imul(k,me)|0,b=b+Math.imul(k,ge)|0,g=g+Math.imul(d,ye)|0,c=c+Math.imul(d,ve)|0,c=c+Math.imul(E,ye)|0,b=b+Math.imul(E,ve)|0;var tr=(v+g|0)+((c&8191)<<13)|0;v=(b+(c>>>13)|0)+(tr>>>26)|0,tr&=67108863,g=Math.imul(J,ae),c=Math.imul(J,se),c=c+Math.imul(ee,ae)|0,b=Math.imul(ee,se),g=g+Math.imul(Q,oe)|0,c=c+Math.imul(Q,le)|0,c=c+Math.imul(X,oe)|0,b=b+Math.imul(X,le)|0,g=g+Math.imul($,ce)|0,c=c+Math.imul($,ue)|0,c=c+Math.imul(Z,ce)|0,b=b+Math.imul(Z,ue)|0,g=g+Math.imul(W,fe)|0,c=c+Math.imul(W,pe)|0,c=c+Math.imul(Y,fe)|0,b=b+Math.imul(Y,pe)|0,g=g+Math.imul(H,de)|0,c=c+Math.imul(H,he)|0,c=c+Math.imul(B,de)|0,b=b+Math.imul(B,he)|0,g=g+Math.imul(q,me)|0,c=c+Math.imul(q,ge)|0,c=c+Math.imul(K,me)|0,b=b+Math.imul(K,ge)|0,g=g+Math.imul(I,ye)|0,c=c+Math.imul(I,ve)|0,c=c+Math.imul(k,ye)|0,b=b+Math.imul(k,ve)|0,g=g+Math.imul(d,_e)|0,c=c+Math.imul(d,be)|0,c=c+Math.imul(E,_e)|0,b=b+Math.imul(E,be)|0;var ir=(v+g|0)+((c&8191)<<13)|0;v=(b+(c>>>13)|0)+(ir>>>26)|0,ir&=67108863,g=Math.imul(te,ae),c=Math.imul(te,se),c=c+Math.imul(ie,ae)|0,b=Math.imul(ie,se),g=g+Math.imul(J,oe)|0,c=c+Math.imul(J,le)|0,c=c+Math.imul(ee,oe)|0,b=b+Math.imul(ee,le)|0,g=g+Math.imul(Q,ce)|0,c=c+Math.imul(Q,ue)|0,c=c+Math.imul(X,ce)|0,b=b+Math.imul(X,ue)|0,g=g+Math.imul($,fe)|0,c=c+Math.imul($,pe)|0,c=c+Math.imul(Z,fe)|0,b=b+Math.imul(Z,pe)|0,g=g+Math.imul(W,de)|0,c=c+Math.imul(W,he)|0,c=c+Math.imul(Y,de)|0,b=b+Math.imul(Y,he)|0,g=g+Math.imul(H,me)|0,c=c+Math.imul(H,ge)|0,c=c+Math.imul(B,me)|0,b=b+Math.imul(B,ge)|0,g=g+Math.imul(q,ye)|0,c=c+Math.imul(q,ve)|0,c=c+Math.imul(K,ye)|0,b=b+Math.imul(K,ve)|0,g=g+Math.imul(I,_e)|0,c=c+Math.imul(I,be)|0,c=c+Math.imul(k,_e)|0,b=b+Math.imul(k,be)|0,g=g+Math.imul(d,xe)|0,c=c+Math.imul(d,we)|0,c=c+Math.imul(E,xe)|0,b=b+Math.imul(E,we)|0;var rr=(v+g|0)+((c&8191)<<13)|0;v=(b+(c>>>13)|0)+(rr>>>26)|0,rr&=67108863,g=Math.imul(re,ae),c=Math.imul(re,se),c=c+Math.imul(ne,ae)|0,b=Math.imul(ne,se),g=g+Math.imul(te,oe)|0,c=c+Math.imul(te,le)|0,c=c+Math.imul(ie,oe)|0,b=b+Math.imul(ie,le)|0,g=g+Math.imul(J,ce)|0,c=c+Math.imul(J,ue)|0,c=c+Math.imul(ee,ce)|0,b=b+Math.imul(ee,ue)|0,g=g+Math.imul(Q,fe)|0,c=c+Math.imul(Q,pe)|0,c=c+Math.imul(X,fe)|0,b=b+Math.imul(X,pe)|0,g=g+Math.imul($,de)|0,c=c+Math.imul($,he)|0,c=c+Math.imul(Z,de)|0,b=b+Math.imul(Z,he)|0,g=g+Math.imul(W,me)|0,c=c+Math.imul(W,ge)|0,c=c+Math.imul(Y,me)|0,b=b+Math.imul(Y,ge)|0,g=g+Math.imul(H,ye)|0,c=c+Math.imul(H,ve)|0,c=c+Math.imul(B,ye)|0,b=b+Math.imul(B,ve)|0,g=g+Math.imul(q,_e)|0,c=c+Math.imul(q,be)|0,c=c+Math.imul(K,_e)|0,b=b+Math.imul(K,be)|0,g=g+Math.imul(I,xe)|0,c=c+Math.imul(I,we)|0,c=c+Math.imul(k,xe)|0,b=b+Math.imul(k,we)|0,g=g+Math.imul(d,Ee)|0,c=c+Math.imul(d,Me)|0,c=c+Math.imul(E,Ee)|0,b=b+Math.imul(E,Me)|0;var nr=(v+g|0)+((c&8191)<<13)|0;v=(b+(c>>>13)|0)+(nr>>>26)|0,nr&=67108863,g=Math.imul(re,oe),c=Math.imul(re,le),c=c+Math.imul(ne,oe)|0,b=Math.imul(ne,le),g=g+Math.imul(te,ce)|0,c=c+Math.imul(te,ue)|0,c=c+Math.imul(ie,ce)|0,b=b+Math.imul(ie,ue)|0,g=g+Math.imul(J,fe)|0,c=c+Math.imul(J,pe)|0,c=c+Math.imul(ee,fe)|0,b=b+Math.imul(ee,pe)|0,g=g+Math.imul(Q,de)|0,c=c+Math.imul(Q,he)|0,c=c+Math.imul(X,de)|0,b=b+Math.imul(X,he)|0,g=g+Math.imul($,me)|0,c=c+Math.imul($,ge)|0,c=c+Math.imul(Z,me)|0,b=b+Math.imul(Z,ge)|0,g=g+Math.imul(W,ye)|0,c=c+Math.imul(W,ve)|0,c=c+Math.imul(Y,ye)|0,b=b+Math.imul(Y,ve)|0,g=g+Math.imul(H,_e)|0,c=c+Math.imul(H,be)|0,c=c+Math.imul(B,_e)|0,b=b+Math.imul(B,be)|0,g=g+Math.imul(q,xe)|0,c=c+Math.imul(q,we)|0,c=c+Math.imul(K,xe)|0,b=b+Math.imul(K,we)|0,g=g+Math.imul(I,Ee)|0,c=c+Math.imul(I,Me)|0,c=c+Math.imul(k,Ee)|0,b=b+Math.imul(k,Me)|0;var ar=(v+g|0)+((c&8191)<<13)|0;v=(b+(c>>>13)|0)+(ar>>>26)|0,ar&=67108863,g=Math.imul(re,ce),c=Math.imul(re,ue),c=c+Math.imul(ne,ce)|0,b=Math.imul(ne,ue),g=g+Math.imul(te,fe)|0,c=c+Math.imul(te,pe)|0,c=c+Math.imul(ie,fe)|0,b=b+Math.imul(ie,pe)|0,g=g+Math.imul(J,de)|0,c=c+Math.imul(J,he)|0,c=c+Math.imul(ee,de)|0,b=b+Math.imul(ee,he)|0,g=g+Math.imul(Q,me)|0,c=c+Math.imul(Q,ge)|0,c=c+Math.imul(X,me)|0,b=b+Math.imul(X,ge)|0,g=g+Math.imul($,ye)|0,c=c+Math.imul($,ve)|0,c=c+Math.imul(Z,ye)|0,b=b+Math.imul(Z,ve)|0,g=g+Math.imul(W,_e)|0,c=c+Math.imul(W,be)|0,c=c+Math.imul(Y,_e)|0,b=b+Math.imul(Y,be)|0,g=g+Math.imul(H,xe)|0,c=c+Math.imul(H,we)|0,c=c+Math.imul(B,xe)|0,b=b+Math.imul(B,we)|0,g=g+Math.imul(q,Ee)|0,c=c+Math.imul(q,Me)|0,c=c+Math.imul(K,Ee)|0,b=b+Math.imul(K,Me)|0;var sr=(v+g|0)+((c&8191)<<13)|0;v=(b+(c>>>13)|0)+(sr>>>26)|0,sr&=67108863,g=Math.imul(re,fe),c=Math.imul(re,pe),c=c+Math.imul(ne,fe)|0,b=Math.imul(ne,pe),g=g+Math.imul(te,de)|0,c=c+Math.imul(te,he)|0,c=c+Math.imul(ie,de)|0,b=b+Math.imul(ie,he)|0,g=g+Math.imul(J,me)|0,c=c+Math.imul(J,ge)|0,c=c+Math.imul(ee,me)|0,b=b+Math.imul(ee,ge)|0,g=g+Math.imul(Q,ye)|0,c=c+Math.imul(Q,ve)|0,c=c+Math.imul(X,ye)|0,b=b+Math.imul(X,ve)|0,g=g+Math.imul($,_e)|0,c=c+Math.imul($,be)|0,c=c+Math.imul(Z,_e)|0,b=b+Math.imul(Z,be)|0,g=g+Math.imul(W,xe)|0,c=c+Math.imul(W,we)|0,c=c+Math.imul(Y,xe)|0,b=b+Math.imul(Y,we)|0,g=g+Math.imul(H,Ee)|0,c=c+Math.imul(H,Me)|0,c=c+Math.imul(B,Ee)|0,b=b+Math.imul(B,Me)|0;var or=(v+g|0)+((c&8191)<<13)|0;v=(b+(c>>>13)|0)+(or>>>26)|0,or&=67108863,g=Math.imul(re,de),c=Math.imul(re,he),c=c+Math.imul(ne,de)|0,b=Math.imul(ne,he),g=g+Math.imul(te,me)|0,c=c+Math.imul(te,ge)|0,c=c+Math.imul(ie,me)|0,b=b+Math.imul(ie,ge)|0,g=g+Math.imul(J,ye)|0,c=c+Math.imul(J,ve)|0,c=c+Math.imul(ee,ye)|0,b=b+Math.imul(ee,ve)|0,g=g+Math.imul(Q,_e)|0,c=c+Math.imul(Q,be)|0,c=c+Math.imul(X,_e)|0,b=b+Math.imul(X,be)|0,g=g+Math.imul($,xe)|0,c=c+Math.imul($,we)|0,c=c+Math.imul(Z,xe)|0,b=b+Math.imul(Z,we)|0,g=g+Math.imul(W,Ee)|0,c=c+Math.imul(W,Me)|0,c=c+Math.imul(Y,Ee)|0,b=b+Math.imul(Y,Me)|0;var lr=(v+g|0)+((c&8191)<<13)|0;v=(b+(c>>>13)|0)+(lr>>>26)|0,lr&=67108863,g=Math.imul(re,me),c=Math.imul(re,ge),c=c+Math.imul(ne,me)|0,b=Math.imul(ne,ge),g=g+Math.imul(te,ye)|0,c=c+Math.imul(te,ve)|0,c=c+Math.imul(ie,ye)|0,b=b+Math.imul(ie,ve)|0,g=g+Math.imul(J,_e)|0,c=c+Math.imul(J,be)|0,c=c+Math.imul(ee,_e)|0,b=b+Math.imul(ee,be)|0,g=g+Math.imul(Q,xe)|0,c=c+Math.imul(Q,we)|0,c=c+Math.imul(X,xe)|0,b=b+Math.imul(X,we)|0,g=g+Math.imul($,Ee)|0,c=c+Math.imul($,Me)|0,c=c+Math.imul(Z,Ee)|0,b=b+Math.imul(Z,Me)|0;var cr=(v+g|0)+((c&8191)<<13)|0;v=(b+(c>>>13)|0)+(cr>>>26)|0,cr&=67108863,g=Math.imul(re,ye),c=Math.imul(re,ve),c=c+Math.imul(ne,ye)|0,b=Math.imul(ne,ve),g=g+Math.imul(te,_e)|0,c=c+Math.imul(te,be)|0,c=c+Math.imul(ie,_e)|0,b=b+Math.imul(ie,be)|0,g=g+Math.imul(J,xe)|0,c=c+Math.imul(J,we)|0,c=c+Math.imul(ee,xe)|0,b=b+Math.imul(ee,we)|0,g=g+Math.imul(Q,Ee)|0,c=c+Math.imul(Q,Me)|0,c=c+Math.imul(X,Ee)|0,b=b+Math.imul(X,Me)|0;var ur=(v+g|0)+((c&8191)<<13)|0;v=(b+(c>>>13)|0)+(ur>>>26)|0,ur&=67108863,g=Math.imul(re,_e),c=Math.imul(re,be),c=c+Math.imul(ne,_e)|0,b=Math.imul(ne,be),g=g+Math.imul(te,xe)|0,c=c+Math.imul(te,we)|0,c=c+Math.imul(ie,xe)|0,b=b+Math.imul(ie,we)|0,g=g+Math.imul(J,Ee)|0,c=c+Math.imul(J,Me)|0,c=c+Math.imul(ee,Ee)|0,b=b+Math.imul(ee,Me)|0;var fr=(v+g|0)+((c&8191)<<13)|0;v=(b+(c>>>13)|0)+(fr>>>26)|0,fr&=67108863,g=Math.imul(re,xe),c=Math.imul(re,we),c=c+Math.imul(ne,xe)|0,b=Math.imul(ne,we),g=g+Math.imul(te,Ee)|0,c=c+Math.imul(te,Me)|0,c=c+Math.imul(ie,Ee)|0,b=b+Math.imul(ie,Me)|0;var pr=(v+g|0)+((c&8191)<<13)|0;v=(b+(c>>>13)|0)+(pr>>>26)|0,pr&=67108863,g=Math.imul(re,Ee),c=Math.imul(re,Me),c=c+Math.imul(ne,Ee)|0,b=Math.imul(ne,Me);var dr=(v+g|0)+((c&8191)<<13)|0;return v=(b+(c>>>13)|0)+(dr>>>26)|0,dr&=67108863,m[0]=jr,m[1]=Ge,m[2]=ze,m[3]=Xi,m[4]=Ji,m[5]=er,m[6]=tr,m[7]=ir,m[8]=rr,m[9]=nr,m[10]=ar,m[11]=sr,m[12]=or,m[13]=lr,m[14]=cr,m[15]=ur,m[16]=fr,m[17]=pr,m[18]=dr,v!==0&&(m[19]=v,h.length++),h};Math.imul||(T=C);function O(A,f,_){_.negative=f.negative^A.negative,_.length=A.length+f.length;for(var h=0,o=0,u=0;u<_.length-1;u++){var m=o;o=0;for(var v=h&67108863,g=Math.min(u,f.length-1),c=Math.max(0,u-A.length+1);c<=g;c++){var b=u-c,w=A.words[b]|0,d=f.words[c]|0,E=w*d,D=E&67108863;m=m+(E/67108864|0)|0,D=D+v|0,v=D&67108863,m=m+(D>>>26)|0,o+=m>>>26,m&=67108863}_.words[u]=v,h=m,m=o}return h!==0?_.words[u]=h:_.length--,_.strip()}function P(A,f,_){var h=new L;return h.mulp(A,f,_)}n.prototype.mulTo=function(f,_){var h,o=this.length+f.length;return this.length===10&&f.length===10?h=T(this,f,_):o<63?h=C(this,f,_):o<1024?h=O(this,f,_):h=P(this,f,_),h};function L(A,f){this.x=A,this.y=f}L.prototype.makeRBT=function(f){for(var _=new Array(f),h=n.prototype._countBits(f)-1,o=0;o<f;o++)_[o]=this.revBin(o,h,f);return _},L.prototype.revBin=function(f,_,h){if(f===0||f===h-1)return f;for(var o=0,u=0;u<_;u++)o|=(f&1)<<_-u-1,f>>=1;return o},L.prototype.permute=function(f,_,h,o,u,m){for(var v=0;v<m;v++)o[v]=_[f[v]],u[v]=h[f[v]]},L.prototype.transform=function(f,_,h,o,u,m){this.permute(m,f,_,h,o,u);for(var v=1;v<u;v<<=1)for(var g=v<<1,c=Math.cos(2*Math.PI/g),b=Math.sin(2*Math.PI/g),w=0;w<u;w+=g)for(var d=c,E=b,D=0;D<v;D++){var I=h[w+D],k=o[w+D],F=h[w+D+v],q=o[w+D+v],K=d*F-E*q;q=d*q+E*F,F=K,h[w+D]=I+F,o[w+D]=k+q,h[w+D+v]=I-F,o[w+D+v]=k-q,D!==g&&(K=c*d-b*E,E=c*E+b*d,d=K)}},L.prototype.guessLen13b=function(f,_){var h=Math.max(_,f)|1,o=h&1,u=0;for(h=h/2|0;h;h=h>>>1)u++;return 1<<u+1+o},L.prototype.conjugate=function(f,_,h){if(!(h<=1))for(var o=0;o<h/2;o++){var u=f[o];f[o]=f[h-o-1],f[h-o-1]=u,u=_[o],_[o]=-_[h-o-1],_[h-o-1]=-u}},L.prototype.normalize13b=function(f,_){for(var h=0,o=0;o<_/2;o++){var u=Math.round(f[2*o+1]/_)*8192+Math.round(f[2*o]/_)+h;f[o]=u&67108863,u<67108864?h=0:h=u/67108864|0}return f},L.prototype.convert13b=function(f,_,h,o){for(var u=0,m=0;m<_;m++)u=u+(f[m]|0),h[2*m]=u&8191,u=u>>>13,h[2*m+1]=u&8191,u=u>>>13;for(m=2*_;m<o;++m)h[m]=0;i(u===0),i((u&-8192)===0)},L.prototype.stub=function(f){for(var _=new Array(f),h=0;h<f;h++)_[h]=0;return _},L.prototype.mulp=function(f,_,h){var o=2*this.guessLen13b(f.length,_.length),u=this.makeRBT(o),m=this.stub(o),v=new Array(o),g=new Array(o),c=new Array(o),b=new Array(o),w=new Array(o),d=new Array(o),E=h.words;E.length=o,this.convert13b(f.words,f.length,v,o),this.convert13b(_.words,_.length,b,o),this.transform(v,m,g,c,o,u),this.transform(b,m,w,d,o,u);for(var D=0;D<o;D++){var I=g[D]*w[D]-c[D]*d[D];c[D]=g[D]*d[D]+c[D]*w[D],g[D]=I}return this.conjugate(g,c,o),this.transform(g,c,E,m,o,u),this.conjugate(E,m,o),this.normalize13b(E,o),h.negative=f.negative^_.negative,h.length=f.length+_.length,h.strip()},n.prototype.mul=function(f){var _=new n(null);return _.words=new Array(this.length+f.length),this.mulTo(f,_)},n.prototype.mulf=function(f){var _=new n(null);return _.words=new Array(this.length+f.length),P(this,f,_)},n.prototype.imul=function(f){return this.clone().mulTo(f,this)},n.prototype.imuln=function(f){i(typeof f=="number"),i(f<67108864);for(var _=0,h=0;h<this.length;h++){var o=(this.words[h]|0)*f,u=(o&67108863)+(_&67108863);_>>=26,_+=o/67108864|0,_+=u>>>26,this.words[h]=u&67108863}return _!==0&&(this.words[h]=_,this.length++),this},n.prototype.muln=function(f){return this.clone().imuln(f)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(f){var _=M(f);if(_.length===0)return new n(1);for(var h=this,o=0;o<_.length&&_[o]===0;o++,h=h.sqr());if(++o<_.length)for(var u=h.sqr();o<_.length;o++,u=u.sqr())_[o]!==0&&(h=h.mul(u));return h},n.prototype.iushln=function(f){i(typeof f=="number"&&f>=0);var _=f%26,h=(f-_)/26,o=67108863>>>26-_<<26-_,u;if(_!==0){var m=0;for(u=0;u<this.length;u++){var v=this.words[u]&o,g=(this.words[u]|0)-v<<_;this.words[u]=g|m,m=v>>>26-_}m&&(this.words[u]=m,this.length++)}if(h!==0){for(u=this.length-1;u>=0;u--)this.words[u+h]=this.words[u];for(u=0;u<h;u++)this.words[u]=0;this.length+=h}return this.strip()},n.prototype.ishln=function(f){return i(this.negative===0),this.iushln(f)},n.prototype.iushrn=function(f,_,h){i(typeof f=="number"&&f>=0);var o;_?o=(_-_%26)/26:o=0;var u=f%26,m=Math.min((f-u)/26,this.length),v=67108863^67108863>>>u<<u,g=h;if(o-=m,o=Math.max(0,o),g){for(var c=0;c<m;c++)g.words[c]=this.words[c];g.length=m}if(m!==0)if(this.length>m)for(this.length-=m,c=0;c<this.length;c++)this.words[c]=this.words[c+m];else this.words[0]=0,this.length=1;var b=0;for(c=this.length-1;c>=0&&(b!==0||c>=o);c--){var w=this.words[c]|0;this.words[c]=b<<26-u|w>>>u,b=w&v}return g&&b!==0&&(g.words[g.length++]=b),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(f,_,h){return i(this.negative===0),this.iushrn(f,_,h)},n.prototype.shln=function(f){return this.clone().ishln(f)},n.prototype.ushln=function(f){return this.clone().iushln(f)},n.prototype.shrn=function(f){return this.clone().ishrn(f)},n.prototype.ushrn=function(f){return this.clone().iushrn(f)},n.prototype.testn=function(f){i(typeof f=="number"&&f>=0);var _=f%26,h=(f-_)/26,o=1<<_;if(this.length<=h)return!1;var u=this.words[h];return!!(u&o)},n.prototype.imaskn=function(f){i(typeof f=="number"&&f>=0);var _=f%26,h=(f-_)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(_!==0&&h++,this.length=Math.min(h,this.length),_!==0){var o=67108863^67108863>>>_<<_;this.words[this.length-1]&=o}return this.strip()},n.prototype.maskn=function(f){return this.clone().imaskn(f)},n.prototype.iaddn=function(f){return i(typeof f=="number"),i(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},n.prototype._iaddn=function(f){this.words[0]+=f;for(var _=0;_<this.length&&this.words[_]>=67108864;_++)this.words[_]-=67108864,_===this.length-1?this.words[_+1]=1:this.words[_+1]++;return this.length=Math.max(this.length,_+1),this},n.prototype.isubn=function(f){if(i(typeof f=="number"),i(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var _=0;_<this.length&&this.words[_]<0;_++)this.words[_]+=67108864,this.words[_+1]-=1;return this.strip()},n.prototype.addn=function(f){return this.clone().iaddn(f)},n.prototype.subn=function(f){return this.clone().isubn(f)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(f,_,h){var o=f.length+h,u;this._expand(o);var m,v=0;for(u=0;u<f.length;u++){m=(this.words[u+h]|0)+v;var g=(f.words[u]|0)*_;m-=g&67108863,v=(m>>26)-(g/67108864|0),this.words[u+h]=m&67108863}for(;u<this.length-h;u++)m=(this.words[u+h]|0)+v,v=m>>26,this.words[u+h]=m&67108863;if(v===0)return this.strip();for(i(v===-1),v=0,u=0;u<this.length;u++)m=-(this.words[u]|0)+v,v=m>>26,this.words[u]=m&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(f,_){var h=this.length-f.length,o=this.clone(),u=f,m=u.words[u.length-1]|0,v=this._countBits(m);h=26-v,h!==0&&(u=u.ushln(h),o.iushln(h),m=u.words[u.length-1]|0);var g=o.length-u.length,c;if(_!=="mod"){c=new n(null),c.length=g+1,c.words=new Array(c.length);for(var b=0;b<c.length;b++)c.words[b]=0}var w=o.clone()._ishlnsubmul(u,1,g);w.negative===0&&(o=w,c&&(c.words[g]=1));for(var d=g-1;d>=0;d--){var E=(o.words[u.length+d]|0)*67108864+(o.words[u.length+d-1]|0);for(E=Math.min(E/m|0,67108863),o._ishlnsubmul(u,E,d);o.negative!==0;)E--,o.negative=0,o._ishlnsubmul(u,1,d),o.isZero()||(o.negative^=1);c&&(c.words[d]=E)}return c&&c.strip(),o.strip(),_!=="div"&&h!==0&&o.iushrn(h),{div:c||null,mod:o}},n.prototype.divmod=function(f,_,h){if(i(!f.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var o,u,m;return this.negative!==0&&f.negative===0?(m=this.neg().divmod(f,_),_!=="mod"&&(o=m.div.neg()),_!=="div"&&(u=m.mod.neg(),h&&u.negative!==0&&u.iadd(f)),{div:o,mod:u}):this.negative===0&&f.negative!==0?(m=this.divmod(f.neg(),_),_!=="mod"&&(o=m.div.neg()),{div:o,mod:m.mod}):this.negative&f.negative?(m=this.neg().divmod(f.neg(),_),_!=="div"&&(u=m.mod.neg(),h&&u.negative!==0&&u.isub(f)),{div:m.div,mod:u}):f.length>this.length||this.cmp(f)<0?{div:new n(0),mod:this}:f.length===1?_==="div"?{div:this.divn(f.words[0]),mod:null}:_==="mod"?{div:null,mod:new n(this.modn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new n(this.modn(f.words[0]))}:this._wordDiv(f,_)},n.prototype.div=function(f){return this.divmod(f,"div",!1).div},n.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},n.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},n.prototype.divRound=function(f){var _=this.divmod(f);if(_.mod.isZero())return _.div;var h=_.div.negative!==0?_.mod.isub(f):_.mod,o=f.ushrn(1),u=f.andln(1),m=h.cmp(o);return m<0||u===1&&m===0?_.div:_.div.negative!==0?_.div.isubn(1):_.div.iaddn(1)},n.prototype.modn=function(f){i(f<=67108863);for(var _=(1<<26)%f,h=0,o=this.length-1;o>=0;o--)h=(_*h+(this.words[o]|0))%f;return h},n.prototype.idivn=function(f){i(f<=67108863);for(var _=0,h=this.length-1;h>=0;h--){var o=(this.words[h]|0)+_*67108864;this.words[h]=o/f|0,_=o%f}return this.strip()},n.prototype.divn=function(f){return this.clone().idivn(f)},n.prototype.egcd=function(f){i(f.negative===0),i(!f.isZero());var _=this,h=f.clone();_.negative!==0?_=_.umod(f):_=_.clone();for(var o=new n(1),u=new n(0),m=new n(0),v=new n(1),g=0;_.isEven()&&h.isEven();)_.iushrn(1),h.iushrn(1),++g;for(var c=h.clone(),b=_.clone();!_.isZero();){for(var w=0,d=1;!(_.words[0]&d)&&w<26;++w,d<<=1);if(w>0)for(_.iushrn(w);w-- >0;)(o.isOdd()||u.isOdd())&&(o.iadd(c),u.isub(b)),o.iushrn(1),u.iushrn(1);for(var E=0,D=1;!(h.words[0]&D)&&E<26;++E,D<<=1);if(E>0)for(h.iushrn(E);E-- >0;)(m.isOdd()||v.isOdd())&&(m.iadd(c),v.isub(b)),m.iushrn(1),v.iushrn(1);_.cmp(h)>=0?(_.isub(h),o.isub(m),u.isub(v)):(h.isub(_),m.isub(o),v.isub(u))}return{a:m,b:v,gcd:h.iushln(g)}},n.prototype._invmp=function(f){i(f.negative===0),i(!f.isZero());var _=this,h=f.clone();_.negative!==0?_=_.umod(f):_=_.clone();for(var o=new n(1),u=new n(0),m=h.clone();_.cmpn(1)>0&&h.cmpn(1)>0;){for(var v=0,g=1;!(_.words[0]&g)&&v<26;++v,g<<=1);if(v>0)for(_.iushrn(v);v-- >0;)o.isOdd()&&o.iadd(m),o.iushrn(1);for(var c=0,b=1;!(h.words[0]&b)&&c<26;++c,b<<=1);if(c>0)for(h.iushrn(c);c-- >0;)u.isOdd()&&u.iadd(m),u.iushrn(1);_.cmp(h)>=0?(_.isub(h),o.isub(u)):(h.isub(_),u.isub(o))}var w;return _.cmpn(1)===0?w=o:w=u,w.cmpn(0)<0&&w.iadd(f),w},n.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var _=this.clone(),h=f.clone();_.negative=0,h.negative=0;for(var o=0;_.isEven()&&h.isEven();o++)_.iushrn(1),h.iushrn(1);do{for(;_.isEven();)_.iushrn(1);for(;h.isEven();)h.iushrn(1);var u=_.cmp(h);if(u<0){var m=_;_=h,h=m}else if(u===0||h.cmpn(1)===0)break;_.isub(h)}while(!0);return h.iushln(o)},n.prototype.invm=function(f){return this.egcd(f).a.umod(f)},n.prototype.isEven=function(){return(this.words[0]&1)===0},n.prototype.isOdd=function(){return(this.words[0]&1)===1},n.prototype.andln=function(f){return this.words[0]&f},n.prototype.bincn=function(f){i(typeof f=="number");var _=f%26,h=(f-_)/26,o=1<<_;if(this.length<=h)return this._expand(h+1),this.words[h]|=o,this;for(var u=o,m=h;u!==0&&m<this.length;m++){var v=this.words[m]|0;v+=u,u=v>>>26,v&=67108863,this.words[m]=v}return u!==0&&(this.words[m]=u,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(f){var _=f<0;if(this.negative!==0&&!_)return-1;if(this.negative===0&&_)return 1;this.strip();var h;if(this.length>1)h=1;else{_&&(f=-f),i(f<=67108863,"Number is too big");var o=this.words[0]|0;h=o===f?0:o<f?-1:1}return this.negative!==0?-h|0:h},n.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var _=this.ucmp(f);return this.negative!==0?-_|0:_},n.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var _=0,h=this.length-1;h>=0;h--){var o=this.words[h]|0,u=f.words[h]|0;if(o!==u){o<u?_=-1:o>u&&(_=1);break}}return _},n.prototype.gtn=function(f){return this.cmpn(f)===1},n.prototype.gt=function(f){return this.cmp(f)===1},n.prototype.gten=function(f){return this.cmpn(f)>=0},n.prototype.gte=function(f){return this.cmp(f)>=0},n.prototype.ltn=function(f){return this.cmpn(f)===-1},n.prototype.lt=function(f){return this.cmp(f)===-1},n.prototype.lten=function(f){return this.cmpn(f)<=0},n.prototype.lte=function(f){return this.cmp(f)<=0},n.prototype.eqn=function(f){return this.cmpn(f)===0},n.prototype.eq=function(f){return this.cmp(f)===0},n.red=function(f){return new Ae(f)},n.prototype.toRed=function(f){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},n.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(f){return this.red=f,this},n.prototype.forceRed=function(f){return i(!this.red,"Already a number in reduction context"),this._forceRed(f)},n.prototype.redAdd=function(f){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},n.prototype.redIAdd=function(f){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},n.prototype.redSub=function(f){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},n.prototype.redISub=function(f){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},n.prototype.redShl=function(f){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},n.prototype.redMul=function(f){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},n.prototype.redIMul=function(f){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},n.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(f){return i(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var U={k256:null,p224:null,p192:null,p25519:null};function z(A,f){this.name=A,this.p=new n(f,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}z.prototype._tmp=function(){var f=new n(null);return f.words=new Array(Math.ceil(this.n/13)),f},z.prototype.ireduce=function(f){var _=f,h;do this.split(_,this.tmp),_=this.imulK(_),_=_.iadd(this.tmp),h=_.bitLength();while(h>this.n);var o=h<this.n?-1:_.ucmp(this.p);return o===0?(_.words[0]=0,_.length=1):o>0?_.isub(this.p):_.strip!==void 0?_.strip():_._strip(),_},z.prototype.split=function(f,_){f.iushrn(this.n,0,_)},z.prototype.imulK=function(f){return f.imul(this.k)};function V(){z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(V,z),V.prototype.split=function(f,_){for(var h=4194303,o=Math.min(f.length,9),u=0;u<o;u++)_.words[u]=f.words[u];if(_.length=o,f.length<=9){f.words[0]=0,f.length=1;return}var m=f.words[9];for(_.words[_.length++]=m&h,u=10;u<f.length;u++){var v=f.words[u]|0;f.words[u-10]=(v&h)<<4|m>>>22,m=v}m>>>=22,f.words[u-10]=m,m===0&&f.length>10?f.length-=10:f.length-=9},V.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var _=0,h=0;h<f.length;h++){var o=f.words[h]|0;_+=o*977,f.words[h]=_&67108863,_=o*64+(_/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function Be(){z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(Be,z);function De(){z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r(De,z);function Je(){z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(Je,z),Je.prototype.imulK=function(f){for(var _=0,h=0;h<f.length;h++){var o=(f.words[h]|0)*19+_,u=o&67108863;o>>>=26,f.words[h]=u,_=o}return _!==0&&(f.words[f.length++]=_),f},n._prime=function(f){if(U[f])return U[f];var _;if(f==="k256")_=new V;else if(f==="p224")_=new Be;else if(f==="p192")_=new De;else if(f==="p25519")_=new Je;else throw new Error("Unknown prime "+f);return U[f]=_,_};function Ae(A){if(typeof A=="string"){var f=n._prime(A);this.m=f.p,this.prime=f}else i(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}Ae.prototype._verify1=function(f){i(f.negative===0,"red works only with positives"),i(f.red,"red works only with red numbers")},Ae.prototype._verify2=function(f,_){i((f.negative|_.negative)===0,"red works only with positives"),i(f.red&&f.red===_.red,"red works only with red numbers")},Ae.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):f.umod(this.m)._forceRed(this)},Ae.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},Ae.prototype.add=function(f,_){this._verify2(f,_);var h=f.add(_);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},Ae.prototype.iadd=function(f,_){this._verify2(f,_);var h=f.iadd(_);return h.cmp(this.m)>=0&&h.isub(this.m),h},Ae.prototype.sub=function(f,_){this._verify2(f,_);var h=f.sub(_);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},Ae.prototype.isub=function(f,_){this._verify2(f,_);var h=f.isub(_);return h.cmpn(0)<0&&h.iadd(this.m),h},Ae.prototype.shl=function(f,_){return this._verify1(f),this.imod(f.ushln(_))},Ae.prototype.imul=function(f,_){return this._verify2(f,_),this.imod(f.imul(_))},Ae.prototype.mul=function(f,_){return this._verify2(f,_),this.imod(f.mul(_))},Ae.prototype.isqr=function(f){return this.imul(f,f.clone())},Ae.prototype.sqr=function(f){return this.mul(f,f)},Ae.prototype.sqrt=function(f){if(f.isZero())return f.clone();var _=this.m.andln(3);if(i(_%2===1),_===3){var h=this.m.add(new n(1)).iushrn(2);return this.pow(f,h)}for(var o=this.m.subn(1),u=0;!o.isZero()&&o.andln(1)===0;)u++,o.iushrn(1);i(!o.isZero());var m=new n(1).toRed(this),v=m.redNeg(),g=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new n(2*c*c).toRed(this);this.pow(c,g).cmp(v)!==0;)c.redIAdd(v);for(var b=this.pow(c,o),w=this.pow(f,o.addn(1).iushrn(1)),d=this.pow(f,o),E=u;d.cmp(m)!==0;){for(var D=d,I=0;D.cmp(m)!==0;I++)D=D.redSqr();i(I<E);var k=this.pow(b,new n(1).iushln(E-I-1));w=w.redMul(k),b=k.redSqr(),d=d.redMul(b),E=I}return w},Ae.prototype.invm=function(f){var _=f._invmp(this.m);return _.negative!==0?(_.negative=0,this.imod(_).redNeg()):this.imod(_)},Ae.prototype.pow=function(f,_){if(_.isZero())return new n(1).toRed(this);if(_.cmpn(1)===0)return f.clone();var h=4,o=new Array(1<<h);o[0]=new n(1).toRed(this),o[1]=f;for(var u=2;u<o.length;u++)o[u]=this.mul(o[u-1],f);var m=o[0],v=0,g=0,c=_.bitLength()%26;for(c===0&&(c=26),u=_.length-1;u>=0;u--){for(var b=_.words[u],w=c-1;w>=0;w--){var d=b>>w&1;if(m!==o[0]&&(m=this.sqr(m)),d===0&&v===0){g=0;continue}v<<=1,v|=d,g++,!(g!==h&&(u!==0||w!==0))&&(m=this.mul(m,o[v]),g=0,v=0)}c=26}return m},Ae.prototype.convertTo=function(f){var _=f.umod(this.m);return _===f?_.clone():_},Ae.prototype.convertFrom=function(f){var _=f.clone();return _.red=null,_},n.mont=function(f){return new tt(f)};function tt(A){Ae.call(this,A),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}r(tt,Ae),tt.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},tt.prototype.convertFrom=function(f){var _=this.imod(f.mul(this.rinv));return _.red=null,_},tt.prototype.imul=function(f,_){if(f.isZero()||_.isZero())return f.words[0]=0,f.length=1,f;var h=f.imul(_),o=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=h.isub(o).iushrn(this.shift),m=u;return u.cmp(this.m)>=0?m=u.isub(this.m):u.cmpn(0)<0&&(m=u.iadd(this.m)),m._forceRed(this)},tt.prototype.mul=function(f,_){if(f.isZero()||_.isZero())return new n(0)._forceRed(this);var h=f.mul(_),o=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=h.isub(o).iushrn(this.shift),m=u;return u.cmp(this.m)>=0?m=u.isub(this.m):u.cmpn(0)<0&&(m=u.iadd(this.m)),m._forceRed(this)},tt.prototype.invm=function(f){var _=this.imod(f._invmp(this.m).mul(this.r2));return _._forceRed(this)}})(typeof Yc>"u"||Yc,Xh)});var Jh=R((GI,Zc)=>{typeof Object.create=="function"?Zc.exports=function(e,i){i&&(e.super_=i,e.prototype=Object.create(i.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Zc.exports=function(e,i){if(i){e.super_=i;var r=function(){};r.prototype=i.prototype,e.prototype=new r,e.prototype.constructor=e}}});var Ve=R((zI,Xc)=>{try{if(Qc=require("util"),typeof Qc.inherits!="function")throw"";Xc.exports=Qc.inherits}catch{Xc.exports=Jh()}var Qc});var Ps=R((VI,em)=>{"use strict";var Ds=require("buffer"),Wr=Ds.Buffer,St={},At;for(At in Ds)Ds.hasOwnProperty(At)&&(At==="SlowBuffer"||At==="Buffer"||(St[At]=Ds[At]));var Yr=St.Buffer={};for(At in Wr)Wr.hasOwnProperty(At)&&(At==="allocUnsafe"||At==="allocUnsafeSlow"||(Yr[At]=Wr[At]));St.Buffer.prototype=Wr.prototype;(!Yr.from||Yr.from===Uint8Array.from)&&(Yr.from=function(t,e,i){if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&typeof t.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return Wr(t,e,i)});Yr.alloc||(Yr.alloc=function(t,e,i){if(typeof t!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var r=Wr(t);return!e||e.length===0?r.fill(0):typeof i=="string"?r.fill(e,i):r.fill(e),r});if(!St.kStringMaxLength)try{St.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch{}St.constants||(St.constants={MAX_LENGTH:St.kMaxLength},St.kStringMaxLength&&(St.constants.MAX_STRING_LENGTH=St.kStringMaxLength));em.exports=St});var Is=R(tm=>{"use strict";var EE=Ve();function Tt(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}tm.Reporter=Tt;Tt.prototype.isError=function(e){return e instanceof $r};Tt.prototype.save=function(){let e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}};Tt.prototype.restore=function(e){let i=this._reporterState;i.obj=e.obj,i.path=i.path.slice(0,e.pathLen)};Tt.prototype.enterKey=function(e){return this._reporterState.path.push(e)};Tt.prototype.exitKey=function(e){let i=this._reporterState;i.path=i.path.slice(0,e-1)};Tt.prototype.leaveKey=function(e,i,r){let n=this._reporterState;this.exitKey(e),n.obj!==null&&(n.obj[i]=r)};Tt.prototype.path=function(){return this._reporterState.path.join("/")};Tt.prototype.enterObject=function(){let e=this._reporterState,i=e.obj;return e.obj={},i};Tt.prototype.leaveObject=function(e){let i=this._reporterState,r=i.obj;return i.obj=e,r};Tt.prototype.error=function(e){let i,r=this._reporterState,n=e instanceof $r;if(n?i=e:i=new $r(r.path.map(function(a){return"["+JSON.stringify(a)+"]"}).join(""),e.message||e,e.stack),!r.options.partial)throw i;return n||r.errors.push(i),i};Tt.prototype.wrapResult=function(e){let i=this._reporterState;return i.options.partial?{result:this.isError(e)?null:e,errors:i.errors}:e};function $r(t,e){this.path=t,this.rethrow(e)}EE($r,Error);$r.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,$r),!this.stack)try{throw new Error(this.message)}catch(i){this.stack=i.stack}return this}});var Xr=R(Jc=>{"use strict";var ME=Ve(),Ls=Is().Reporter,Zr=Ps().Buffer;function Rt(t,e){if(Ls.call(this,e),!Zr.isBuffer(t)){this.error("Input not Buffer");return}this.base=t,this.offset=0,this.length=t.length}ME(Rt,Ls);Jc.DecoderBuffer=Rt;Rt.isDecoderBuffer=function(e){return e instanceof Rt?!0:typeof e=="object"&&Zr.isBuffer(e.base)&&e.constructor.name==="DecoderBuffer"&&typeof e.offset=="number"&&typeof e.length=="number"&&typeof e.save=="function"&&typeof e.restore=="function"&&typeof e.isEmpty=="function"&&typeof e.readUInt8=="function"&&typeof e.skip=="function"&&typeof e.raw=="function"};Rt.prototype.save=function(){return{offset:this.offset,reporter:Ls.prototype.save.call(this)}};Rt.prototype.restore=function(e){let i=new Rt(this.base);return i.offset=e.offset,i.length=this.offset,this.offset=e.offset,Ls.prototype.restore.call(this,e.reporter),i};Rt.prototype.isEmpty=function(){return this.offset===this.length};Rt.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")};Rt.prototype.skip=function(e,i){if(!(this.offset+e<=this.length))return this.error(i||"DecoderBuffer overrun");let r=new Rt(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+e,this.offset+=e,r};Rt.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)};function Qr(t,e){if(Array.isArray(t))this.length=0,this.value=t.map(function(i){return Qr.isEncoderBuffer(i)||(i=new Qr(i,e)),this.length+=i.length,i},this);else if(typeof t=="number"){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if(typeof t=="string")this.value=t,this.length=Zr.byteLength(t);else if(Zr.isBuffer(t))this.value=t,this.length=t.length;else return e.error("Unsupported type: "+typeof t)}Jc.EncoderBuffer=Qr;Qr.isEncoderBuffer=function(e){return e instanceof Qr?!0:typeof e=="object"&&e.constructor.name==="EncoderBuffer"&&typeof e.length=="number"&&typeof e.join=="function"};Qr.prototype.join=function(e,i){return e||(e=Zr.alloc(this.length)),i||(i=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(r){r.join(e,i),i+=r.length}):(typeof this.value=="number"?e[i]=this.value:typeof this.value=="string"?e.write(this.value,i):Zr.isBuffer(this.value)&&this.value.copy(e,i),i+=this.length)),e}});var nm=R(($I,rm)=>{rm.exports=im;function im(t,e){if(!t)throw new Error(e||"Assertion failed")}im.equal=function(e,i,r){if(e!=i)throw new Error(r||"Assertion failed: "+e+" != "+i)}});var Ns=R((ZI,sm)=>{"use strict";var SE=Is().Reporter,AE=Xr().EncoderBuffer,TE=Xr().DecoderBuffer,ft=nm(),am=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],RE=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(am),CE=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function je(t,e,i){let r={};this._baseState=r,r.name=i,r.enc=t,r.parent=e||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.contains=null,r.parent||(r.children=[],this._wrap())}sm.exports=je;var OE=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];je.prototype.clone=function(){let e=this._baseState,i={};OE.forEach(function(n){i[n]=e[n]});let r=new this.constructor(i.parent);return r._baseState=i,r};je.prototype._wrap=function(){let e=this._baseState;RE.forEach(function(i){this[i]=function(){let n=new this.constructor(this);return e.children.push(n),n[i].apply(n,arguments)}},this)};je.prototype._init=function(e){let i=this._baseState;ft(i.parent===null),e.call(this),i.children=i.children.filter(function(r){return r._baseState.parent===this},this),ft.equal(i.children.length,1,"Root node can have only one child")};je.prototype._useArgs=function(e){let i=this._baseState,r=e.filter(function(n){return n instanceof this.constructor},this);e=e.filter(function(n){return!(n instanceof this.constructor)},this),r.length!==0&&(ft(i.children===null),i.children=r,r.forEach(function(n){n._baseState.parent=this},this)),e.length!==0&&(ft(i.args===null),i.args=e,i.reverseArgs=e.map(function(n){if(typeof n!="object"||n.constructor!==Object)return n;let a={};return Object.keys(n).forEach(function(s){s==(s|0)&&(s|=0);let l=n[s];a[l]=s}),a}))};CE.forEach(function(t){je.prototype[t]=function(){let i=this._baseState;throw new Error(t+" not implemented for encoding: "+i.enc)}});am.forEach(function(t){je.prototype[t]=function(){let i=this._baseState,r=Array.prototype.slice.call(arguments);return ft(i.tag===null),i.tag=t,this._useArgs(r),this}});je.prototype.use=function(e){ft(e);let i=this._baseState;return ft(i.use===null),i.use=e,this};je.prototype.optional=function(){let e=this._baseState;return e.optional=!0,this};je.prototype.def=function(e){let i=this._baseState;return ft(i.default===null),i.default=e,i.optional=!0,this};je.prototype.explicit=function(e){let i=this._baseState;return ft(i.explicit===null&&i.implicit===null),i.explicit=e,this};je.prototype.implicit=function(e){let i=this._baseState;return ft(i.explicit===null&&i.implicit===null),i.implicit=e,this};je.prototype.obj=function(){let e=this._baseState,i=Array.prototype.slice.call(arguments);return e.obj=!0,i.length!==0&&this._useArgs(i),this};je.prototype.key=function(e){let i=this._baseState;return ft(i.key===null),i.key=e,this};je.prototype.any=function(){let e=this._baseState;return e.any=!0,this};je.prototype.choice=function(e){let i=this._baseState;return ft(i.choice===null),i.choice=e,this._useArgs(Object.keys(e).map(function(r){return e[r]})),this};je.prototype.contains=function(e){let i=this._baseState;return ft(i.use===null),i.contains=e,this};je.prototype._decode=function(e,i){let r=this._baseState;if(r.parent===null)return e.wrapResult(r.children[0]._decode(e,i));let n=r.default,a=!0,s=null;if(r.key!==null&&(s=e.enterKey(r.key)),r.optional){let p=null;if(r.explicit!==null?p=r.explicit:r.implicit!==null?p=r.implicit:r.tag!==null&&(p=r.tag),p===null&&!r.any){let y=e.save();try{r.choice===null?this._decodeGeneric(r.tag,e,i):this._decodeChoice(e,i),a=!0}catch{a=!1}e.restore(y)}else if(a=this._peekTag(e,p,r.any),e.isError(a))return a}let l;if(r.obj&&a&&(l=e.enterObject()),a){if(r.explicit!==null){let y=this._decodeTag(e,r.explicit);if(e.isError(y))return y;e=y}let p=e.offset;if(r.use===null&&r.choice===null){let y;r.any&&(y=e.save());let x=this._decodeTag(e,r.implicit!==null?r.implicit:r.tag,r.any);if(e.isError(x))return x;r.any?n=e.raw(y):e=x}if(i&&i.track&&r.tag!==null&&i.track(e.path(),p,e.length,"tagged"),i&&i.track&&r.tag!==null&&i.track(e.path(),e.offset,e.length,"content"),r.any||(r.choice===null?n=this._decodeGeneric(r.tag,e,i):n=this._decodeChoice(e,i)),e.isError(n))return n;if(!r.any&&r.choice===null&&r.children!==null&&r.children.forEach(function(x){x._decode(e,i)}),r.contains&&(r.tag==="octstr"||r.tag==="bitstr")){let y=new TE(n);n=this._getUse(r.contains,e._reporterState.obj)._decode(y,i)}}return r.obj&&a&&(n=e.leaveObject(l)),r.key!==null&&(n!==null||a===!0)?e.leaveKey(s,r.key,n):s!==null&&e.exitKey(s),n};je.prototype._decodeGeneric=function(e,i,r){let n=this._baseState;return e==="seq"||e==="set"?null:e==="seqof"||e==="setof"?this._decodeList(i,e,n.args[0],r):/str$/.test(e)?this._decodeStr(i,e,r):e==="objid"&&n.args?this._decodeObjid(i,n.args[0],n.args[1],r):e==="objid"?this._decodeObjid(i,null,null,r):e==="gentime"||e==="utctime"?this._decodeTime(i,e,r):e==="null_"?this._decodeNull(i,r):e==="bool"?this._decodeBool(i,r):e==="objDesc"?this._decodeStr(i,e,r):e==="int"||e==="enum"?this._decodeInt(i,n.args&&n.args[0],r):n.use!==null?this._getUse(n.use,i._reporterState.obj)._decode(i,r):i.error("unknown tag: "+e)};je.prototype._getUse=function(e,i){let r=this._baseState;return r.useDecoder=this._use(e,i),ft(r.useDecoder._baseState.parent===null),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder};je.prototype._decodeChoice=function(e,i){let r=this._baseState,n=null,a=!1;return Object.keys(r.choice).some(function(s){let l=e.save(),p=r.choice[s];try{let y=p._decode(e,i);if(e.isError(y))return!1;n={type:s,value:y},a=!0}catch{return e.restore(l),!1}return!0},this),a?n:e.error("Choice not matched")};je.prototype._createEncoderBuffer=function(e){return new AE(e,this.reporter)};je.prototype._encode=function(e,i,r){let n=this._baseState;if(n.default!==null&&n.default===e)return;let a=this._encodeValue(e,i,r);if(a!==void 0&&!this._skipDefault(a,i,r))return a};je.prototype._encodeValue=function(e,i,r){let n=this._baseState;if(n.parent===null)return n.children[0]._encode(e,i||new SE);let a=null;if(this.reporter=i,n.optional&&e===void 0)if(n.default!==null)e=n.default;else return;let s=null,l=!1;if(n.any)a=this._createEncoderBuffer(e);else if(n.choice)a=this._encodeChoice(e,i);else if(n.contains)s=this._getUse(n.contains,r)._encode(e,i),l=!0;else if(n.children)s=n.children.map(function(p){if(p._baseState.tag==="null_")return p._encode(null,i,e);if(p._baseState.key===null)return i.error("Child should have a key");let y=i.enterKey(p._baseState.key);if(typeof e!="object")return i.error("Child expected, but input is not object");let x=p._encode(e[p._baseState.key],i,e);return i.leaveKey(y),x},this).filter(function(p){return p}),s=this._createEncoderBuffer(s);else if(n.tag==="seqof"||n.tag==="setof"){if(!(n.args&&n.args.length===1))return i.error("Too many args for : "+n.tag);if(!Array.isArray(e))return i.error("seqof/setof, but data is not Array");let p=this.clone();p._baseState.implicit=null,s=this._createEncoderBuffer(e.map(function(y){let x=this._baseState;return this._getUse(x.args[0],e)._encode(y,i)},p))}else n.use!==null?a=this._getUse(n.use,r)._encode(e,i):(s=this._encodePrimitive(n.tag,e),l=!0);if(!n.any&&n.choice===null){let p=n.implicit!==null?n.implicit:n.tag,y=n.implicit===null?"universal":"context";p===null?n.use===null&&i.error("Tag could be omitted only for .use()"):n.use===null&&(a=this._encodeComposite(p,l,y,s))}return n.explicit!==null&&(a=this._encodeComposite(n.explicit,!1,"context",a)),a};je.prototype._encodeChoice=function(e,i){let r=this._baseState,n=r.choice[e.type];return n||ft(!1,e.type+" not found in "+JSON.stringify(Object.keys(r.choice))),n._encode(e.value,i)};je.prototype._encodePrimitive=function(e,i){let r=this._baseState;if(/str$/.test(e))return this._encodeStr(i,e);if(e==="objid"&&r.args)return this._encodeObjid(i,r.reverseArgs[0],r.args[1]);if(e==="objid")return this._encodeObjid(i,null,null);if(e==="gentime"||e==="utctime")return this._encodeTime(i,e);if(e==="null_")return this._encodeNull();if(e==="int"||e==="enum")return this._encodeInt(i,r.args&&r.reverseArgs[0]);if(e==="bool")return this._encodeBool(i);if(e==="objDesc")return this._encodeStr(i,e);throw new Error("Unsupported tag: "+e)};je.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)};je.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)}});var ks=R(gr=>{"use strict";function om(t){let e={};return Object.keys(t).forEach(function(i){(i|0)==i&&(i=i|0);let r=t[i];e[r]=i}),e}gr.tagClass={0:"universal",1:"application",2:"context",3:"private"};gr.tagClassByName=om(gr.tagClass);gr.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"};gr.tagByName=om(gr.tag)});var tu=R((XI,um)=>{"use strict";var DE=Ve(),hi=Ps().Buffer,lm=Ns(),eu=ks();function cm(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new Wt,this.tree._init(t.body)}um.exports=cm;cm.prototype.encode=function(e,i){return this.tree._encode(e,i).join()};function Wt(t){lm.call(this,"der",t)}DE(Wt,lm);Wt.prototype._encodeComposite=function(e,i,r,n){let a=PE(e,i,r,this.reporter);if(n.length<128){let p=hi.alloc(2);return p[0]=a,p[1]=n.length,this._createEncoderBuffer([p,n])}let s=1;for(let p=n.length;p>=256;p>>=8)s++;let l=hi.alloc(2+s);l[0]=a,l[1]=128|s;for(let p=1+s,y=n.length;y>0;p--,y>>=8)l[p]=y&255;return this._createEncoderBuffer([l,n])};Wt.prototype._encodeStr=function(e,i){if(i==="bitstr")return this._createEncoderBuffer([e.unused|0,e.data]);if(i==="bmpstr"){let r=hi.alloc(e.length*2);for(let n=0;n<e.length;n++)r.writeUInt16BE(e.charCodeAt(n),n*2);return this._createEncoderBuffer(r)}else return i==="numstr"?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):i==="printstr"?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(i)?this._createEncoderBuffer(e):i==="objDesc"?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+i+" unsupported")};Wt.prototype._encodeObjid=function(e,i,r){if(typeof e=="string"){if(!i)return this.reporter.error("string objid given, but no values map found");if(!i.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=i[e].split(/[\s.]+/g);for(let l=0;l<e.length;l++)e[l]|=0}else if(Array.isArray(e)){e=e.slice();for(let l=0;l<e.length;l++)e[l]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!r){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,e[0]*40+e[1])}let n=0;for(let l=0;l<e.length;l++){let p=e[l];for(n++;p>=128;p>>=7)n++}let a=hi.alloc(n),s=a.length-1;for(let l=e.length-1;l>=0;l--){let p=e[l];for(a[s--]=p&127;(p>>=7)>0;)a[s--]=128|p&127}return this._createEncoderBuffer(a)};function Ct(t){return t<10?"0"+t:t}Wt.prototype._encodeTime=function(e,i){let r,n=new Date(e);return i==="gentime"?r=[Ct(n.getUTCFullYear()),Ct(n.getUTCMonth()+1),Ct(n.getUTCDate()),Ct(n.getUTCHours()),Ct(n.getUTCMinutes()),Ct(n.getUTCSeconds()),"Z"].join(""):i==="utctime"?r=[Ct(n.getUTCFullYear()%100),Ct(n.getUTCMonth()+1),Ct(n.getUTCDate()),Ct(n.getUTCHours()),Ct(n.getUTCMinutes()),Ct(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+i+" time is not supported yet"),this._encodeStr(r,"octstr")};Wt.prototype._encodeNull=function(){return this._createEncoderBuffer("")};Wt.prototype._encodeInt=function(e,i){if(typeof e=="string"){if(!i)return this.reporter.error("String int or enum given, but no values map");if(!i.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=i[e]}if(typeof e!="number"&&!hi.isBuffer(e)){let a=e.toArray();!e.sign&&a[0]&128&&a.unshift(0),e=hi.from(a)}if(hi.isBuffer(e)){let a=e.length;e.length===0&&a++;let s=hi.alloc(a);return e.copy(s),e.length===0&&(s[0]=0),this._createEncoderBuffer(s)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let r=1;for(let a=e;a>=256;a>>=8)r++;let n=new Array(r);for(let a=n.length-1;a>=0;a--)n[a]=e&255,e>>=8;return n[0]&128&&n.unshift(0),this._createEncoderBuffer(hi.from(n))};Wt.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)};Wt.prototype._use=function(e,i){return typeof e=="function"&&(e=e(i)),e._getEncoder("der").tree};Wt.prototype._skipDefault=function(e,i,r){let n=this._baseState,a;if(n.default===null)return!1;let s=e.join();if(n.defaultBuffer===void 0&&(n.defaultBuffer=this._encodeValue(n.default,i,r).join()),s.length!==n.defaultBuffer.length)return!1;for(a=0;a<s.length;a++)if(s[a]!==n.defaultBuffer[a])return!1;return!0};function PE(t,e,i,r){let n;if(t==="seqof"?t="seq":t==="setof"&&(t="set"),eu.tagByName.hasOwnProperty(t))n=eu.tagByName[t];else if(typeof t=="number"&&(t|0)===t)n=t;else return r.error("Unknown tag: "+t);return n>=31?r.error("Multi-octet tag encoding unsupported"):(e||(n|=32),n|=eu.tagClassByName[i||"universal"]<<6,n)}});var pm=R((JI,fm)=>{"use strict";var IE=Ve(),iu=tu();function ru(t){iu.call(this,t),this.enc="pem"}IE(ru,iu);fm.exports=ru;ru.prototype.encode=function(e,i){let n=iu.prototype.encode.call(this,e).toString("base64"),a=["-----BEGIN "+i.label+"-----"];for(let s=0;s<n.length;s+=64)a.push(n.slice(s,s+64));return a.push("-----END "+i.label+"-----"),a.join(`
`)}});var nu=R(hm=>{"use strict";var dm=hm;dm.der=tu();dm.pem=pm()});var su=R((tL,bm)=>{"use strict";var LE=Ve(),NE=$c(),mm=Xr().DecoderBuffer,ym=Ns(),gm=ks();function vm(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new yt,this.tree._init(t.body)}bm.exports=vm;vm.prototype.decode=function(e,i){return mm.isDecoderBuffer(e)||(e=new mm(e,i)),this.tree._decode(e,i)};function yt(t){ym.call(this,"der",t)}LE(yt,ym);yt.prototype._peekTag=function(e,i,r){if(e.isEmpty())return!1;let n=e.save(),a=au(e,'Failed to peek tag: "'+i+'"');return e.isError(a)?a:(e.restore(n),a.tag===i||a.tagStr===i||a.tagStr+"of"===i||r)};yt.prototype._decodeTag=function(e,i,r){let n=au(e,'Failed to decode tag of "'+i+'"');if(e.isError(n))return n;let a=_m(e,n.primitive,'Failed to get length of "'+i+'"');if(e.isError(a))return a;if(!r&&n.tag!==i&&n.tagStr!==i&&n.tagStr+"of"!==i)return e.error('Failed to match tag: "'+i+'"');if(n.primitive||a!==null)return e.skip(a,'Failed to match body of: "'+i+'"');let s=e.save(),l=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(l)?l:(a=e.offset-s.offset,e.restore(s),e.skip(a,'Failed to match body of: "'+i+'"'))};yt.prototype._skipUntilEnd=function(e,i){for(;;){let r=au(e,i);if(e.isError(r))return r;let n=_m(e,r.primitive,i);if(e.isError(n))return n;let a;if(r.primitive||n!==null?a=e.skip(n):a=this._skipUntilEnd(e,i),e.isError(a))return a;if(r.tagStr==="end")break}};yt.prototype._decodeList=function(e,i,r,n){let a=[];for(;!e.isEmpty();){let s=this._peekTag(e,"end");if(e.isError(s))return s;let l=r.decode(e,"der",n);if(e.isError(l)&&s)break;a.push(l)}return a};yt.prototype._decodeStr=function(e,i){if(i==="bitstr"){let r=e.readUInt8();return e.isError(r)?r:{unused:r,data:e.raw()}}else if(i==="bmpstr"){let r=e.raw();if(r.length%2===1)return e.error("Decoding of string type: bmpstr length mismatch");let n="";for(let a=0;a<r.length/2;a++)n+=String.fromCharCode(r.readUInt16BE(a*2));return n}else if(i==="numstr"){let r=e.raw().toString("ascii");return this._isNumstr(r)?r:e.error("Decoding of string type: numstr unsupported characters")}else{if(i==="octstr")return e.raw();if(i==="objDesc")return e.raw();if(i==="printstr"){let r=e.raw().toString("ascii");return this._isPrintstr(r)?r:e.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(i)?e.raw().toString():e.error("Decoding of string type: "+i+" unsupported")}};yt.prototype._decodeObjid=function(e,i,r){let n,a=[],s=0,l=0;for(;!e.isEmpty();)l=e.readUInt8(),s<<=7,s|=l&127,l&128||(a.push(s),s=0);l&128&&a.push(s);let p=a[0]/40|0,y=a[0]%40;if(r?n=a:n=[p,y].concat(a.slice(1)),i){let x=i[n.join(" ")];x===void 0&&(x=i[n.join(".")]),x!==void 0&&(n=x)}return n};yt.prototype._decodeTime=function(e,i){let r=e.raw().toString(),n,a,s,l,p,y;if(i==="gentime")n=r.slice(0,4)|0,a=r.slice(4,6)|0,s=r.slice(6,8)|0,l=r.slice(8,10)|0,p=r.slice(10,12)|0,y=r.slice(12,14)|0;else if(i==="utctime")n=r.slice(0,2)|0,a=r.slice(2,4)|0,s=r.slice(4,6)|0,l=r.slice(6,8)|0,p=r.slice(8,10)|0,y=r.slice(10,12)|0,n<70?n=2e3+n:n=1900+n;else return e.error("Decoding "+i+" time is not supported yet");return Date.UTC(n,a-1,s,l,p,y,0)};yt.prototype._decodeNull=function(){return null};yt.prototype._decodeBool=function(e){let i=e.readUInt8();return e.isError(i)?i:i!==0};yt.prototype._decodeInt=function(e,i){let r=e.raw(),n=new NE(r);return i&&(n=i[n.toString(10)]||n),n};yt.prototype._use=function(e,i){return typeof e=="function"&&(e=e(i)),e._getDecoder("der").tree};function au(t,e){let i=t.readUInt8(e);if(t.isError(i))return i;let r=gm.tagClass[i>>6],n=(i&32)===0;if((i&31)===31){let s=i;for(i=0;(s&128)===128;){if(s=t.readUInt8(e),t.isError(s))return s;i<<=7,i|=s&127}}else i&=31;let a=gm.tag[i];return{cls:r,primitive:n,tag:i,tagStr:a}}function _m(t,e,i){let r=t.readUInt8(i);if(t.isError(r))return r;if(!e&&r===128)return null;if(!(r&128))return r;let n=r&127;if(n>4)return t.error("length octect is too long");r=0;for(let a=0;a<n;a++){r<<=8;let s=t.readUInt8(i);if(t.isError(s))return s;r|=s}return r}});var wm=R((iL,xm)=>{"use strict";var kE=Ve(),qE=Ps().Buffer,ou=su();function lu(t){ou.call(this,t),this.enc="pem"}kE(lu,ou);xm.exports=lu;lu.prototype.decode=function(e,i){let r=e.toString().split(/[\r\n]+/g),n=i.label.toUpperCase(),a=/^-----(BEGIN|END) ([^-]+)-----$/,s=-1,l=-1;for(let x=0;x<r.length;x++){let S=r[x].match(a);if(S!==null&&S[2]===n)if(s===-1){if(S[1]!=="BEGIN")break;s=x}else{if(S[1]!=="END")break;l=x;break}}if(s===-1||l===-1)throw new Error("PEM section not found for: "+n);let p=r.slice(s+1,l).join("");p.replace(/[^a-z0-9+/=]+/gi,"");let y=qE.from(p,"base64");return ou.prototype.decode.call(this,y,i)}});var cu=R(Mm=>{"use strict";var Em=Mm;Em.der=su();Em.pem=wm()});var Am=R(Sm=>{"use strict";var KE=nu(),jE=cu(),FE=Ve(),HE=Sm;HE.define=function(e,i){return new Jr(e,i)};function Jr(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}Jr.prototype._createNamed=function(e){let i=this.name;function r(n){this._initNamed(n,i)}return FE(r,e),r.prototype._initNamed=function(a,s){e.call(this,a,s)},new r(this)};Jr.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(jE[e])),this.decoders[e]};Jr.prototype.decode=function(e,i,r){return this._getDecoder(i).decode(e,r)};Jr.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(KE[e])),this.encoders[e]};Jr.prototype.encode=function(e,i,r){return this._getEncoder(i).encode(e,r)}});var Rm=R(Tm=>{"use strict";var qs=Tm;qs.Reporter=Is().Reporter;qs.DecoderBuffer=Xr().DecoderBuffer;qs.EncoderBuffer=Xr().EncoderBuffer;qs.Node=Ns()});var Dm=R(Om=>{"use strict";var Cm=Om;Cm._reverse=function(e){let i={};return Object.keys(e).forEach(function(r){(r|0)==r&&(r=r|0);let n=e[r];i[n]=r}),i};Cm.der=ks()});var uu=R(Pm=>{"use strict";var en=Pm;en.bignum=$c();en.define=Am().define;en.base=Rm();en.constants=Dm();en.decoders=cu();en.encoders=nu()});var Lm=R(ii=>{"use strict";var BE=ii&&ii.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ii,"__esModule",{value:!0});ii.chunk64=ii.privateKeyPem=ii.publicKeyPem=void 0;var Im=BE(uu()),UE=Im.default.define("Rfc5915Key",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).objid({"1 2 840 10045 3 1 7":"prime256v1","1 3 132 0 34":"secp384r1"}),this.key("publicKey").optional().explicit(1).bitstr())}),GE=Im.default.define("SpkiKey",function(){this.seq().obj(this.key("algorithmIdentifier").seq().obj(this.key("publicKeyType").objid({"1 2 840 10045 2 1":"EC"}),this.key("parameters").objid({"1 2 840 10045 3 1 7":"prime256v1","1 3 132 0 34":"secp384r1"})),this.key("publicKey").bitstr())});function zE(t,e){let i=GE.encode({algorithmIdentifier:{publicKeyType:"EC",parameters:t},publicKey:{data:e}},"der");return["-----BEGIN PUBLIC KEY-----",...fu(i),"-----END PUBLIC KEY-----",""].join(`
`)}ii.publicKeyPem=zE;function VE(t,e,i){let r=UE.encode({version:1,privateKey:e,parameters:t,publicKey:{data:i}},"der");return["-----BEGIN EC PRIVATE KEY-----",...fu(r),"-----END EC PRIVATE KEY-----",""].join(`
`)}ii.privateKeyPem=VE;function fu(t){let i=t.toString("base64"),r=Math.ceil(i.length/64),n=new Array(r);for(let a=0,s=0;a<r;++a,s+=64)n[a]=i.slice(s,s+64);return n}ii.chunk64=fu});var du=R(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.VerificationKey=tn.SignatureKey=void 0;var WE=zh(),YE=Qh(),mi=Ai(),Nm=Lm(),Ks=class t{constructor(e,i,r){let{signatureCurve:n}=r;if(!n)throw new Error("Unsupported Algorithm");if(e instanceof Uint8Array){let a=(0,Nm.privateKeyPem)(n,pu(e),pu(i));(0,mi.readOnlyProperty)(this,"privateKey",a)}else(0,mi.readOnlyProperty)(this,"privateKey",e);(0,mi.readOnlyBinaryProperty)(this,"compressPoint",i),(0,mi.readOnlyProperty)(this,"signatureCurve",n),Object.setPrototypeOf(this,t.prototype),Object.freeze(this)}static encodeCompressPoint(e,i){let{signatureCurve:r}=i;if(!r)throw new Error("Unsupported Algorithm");return WE.encodeNamedCurves[r](e)}};tn.SignatureKey=Ks;(0,mi.frozenClass)(Ks);var js=class t{publicKey;signatureCurve;constructor(e,i){let{signatureCurve:r}=i;if(!r)throw new Error("Unsupported Algorithm");if(e instanceof Uint8Array){let n=(0,Nm.publicKeyPem)(r,pu(e));(0,mi.readOnlyProperty)(this,"publicKey",n)}else(0,mi.readOnlyProperty)(this,"publicKey",e);(0,mi.readOnlyProperty)(this,"signatureCurve",r),Object.setPrototypeOf(this,t.prototype),Object.freeze(this)}static decodeCompressPoint(e,i){let{signatureCurve:r}=i;if(!r)throw new Error("Unsupported Algorithm");return YE.decodeNamedCurves[r](e)}};tn.VerificationKey=js;(0,mi.frozenClass)(js);function pu(t){let{buffer:e,byteOffset:i,byteLength:r}=t;return Buffer.from(e,i,r)}});var hu=R(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});Ea.KeyringTraceFlag=void 0;var $E;(function(t){t[t.WRAPPING_KEY_GENERATED_DATA_KEY=1]="WRAPPING_KEY_GENERATED_DATA_KEY",t[t.WRAPPING_KEY_ENCRYPTED_DATA_KEY=2]="WRAPPING_KEY_ENCRYPTED_DATA_KEY",t[t.WRAPPING_KEY_DECRYPTED_DATA_KEY=4]="WRAPPING_KEY_DECRYPTED_DATA_KEY",t[t.WRAPPING_KEY_SIGNED_ENC_CTX=8]="WRAPPING_KEY_SIGNED_ENC_CTX",t[t.WRAPPING_KEY_VERIFIED_ENC_CTX=16]="WRAPPING_KEY_VERIFIED_ENC_CTX",t[t.ENCRYPT_FLAGS=10]="ENCRYPT_FLAGS",t[t.SET_FLAGS=5]="SET_FLAGS",t[t.DECRYPT_FLAGS=20]="DECRYPT_FLAGS"})($E=Ea.KeyringTraceFlag||(Ea.KeyringTraceFlag={}))});var gi=R(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.wrapWithKeyObjectIfSupported=Se.unwrapDataKey=Se.subtleFunctionForMaterial=Se.keyUsageForMaterial=Se.isValidCryptoKey=Se.isCryptoKey=Se.decorateWebCryptoMaterial=Se.decorateDecryptionMaterial=Se.decorateEncryptionMaterial=Se.decorateCryptographicMaterial=Se.isDecryptionMaterial=Se.isEncryptionMaterial=Se.WebCryptoDecryptionMaterial=Se.WebCryptoEncryptionMaterial=Se.NodeDecryptionMaterial=Se.NodeEncryptionMaterial=Se.supportsKeyObject=void 0;var ZE=Os(),km=du(),Ot=Ai(),vt=hu(),qm=Ts(),Km=Vc(),Te=Vt();Se.supportsKeyObject=function(){try{let{KeyObject:t,createSecretKey:e}=require("crypto");return!t||!e?!1:{KeyObject:t,createSecretKey:e}}catch{return!1}}();var QE=function(){try{let{timingSafeEqual:e}=require("crypto");return e||t}catch{return t}function t(e,i){if(e.byteLength!==i.byteLength)return!1;let r=0;for(let n=0;n<i.length;n++)r|=e[n]^i[n];return r===0}}(),Ma=class t{suite;setUnencryptedDataKey;getUnencryptedDataKey;zeroUnencryptedDataKey;hasUnencryptedDataKey;keyringTrace=[];encryptedDataKeys;addEncryptedDataKey;setSignatureKey;signatureKey;encryptionContext;constructor(e,i){(0,Te.needs)(e instanceof qm.NodeAlgorithmSuite,"Suite must be a NodeAlgorithmSuite"),this.suite=e,(0,Te.needs)(i&&typeof i=="object","Encryption context must be set"),this.encryptionContext=Object.freeze({...i});let r=vt.KeyringTraceFlag.WRAPPING_KEY_GENERATED_DATA_KEY;Aa(this,r),gu(this),Object.setPrototypeOf(this,t.prototype),Object.freeze(this)}hasValidKey(){return this.hasUnencryptedDataKey}};Se.NodeEncryptionMaterial=Ma;(0,Ot.frozenClass)(Ma);var Sa=class t{suite;setUnencryptedDataKey;getUnencryptedDataKey;zeroUnencryptedDataKey;hasUnencryptedDataKey;keyringTrace=[];setVerificationKey;verificationKey;encryptionContext;constructor(e,i){(0,Te.needs)(e instanceof qm.NodeAlgorithmSuite,"Suite must be a NodeAlgorithmSuite"),this.suite=e,(0,Te.needs)(i&&typeof i=="object","Encryption context must be set"),this.encryptionContext=Object.freeze({...i});let r=vt.KeyringTraceFlag.WRAPPING_KEY_DECRYPTED_DATA_KEY;Aa(this,r),yu(this),Object.setPrototypeOf(this,t.prototype),Object.freeze(this)}hasValidKey(){return this.hasUnencryptedDataKey}};Se.NodeDecryptionMaterial=Sa;(0,Ot.frozenClass)(Sa);var rn=class t{suite;setUnencryptedDataKey;getUnencryptedDataKey;zeroUnencryptedDataKey;hasUnencryptedDataKey;keyringTrace=[];encryptedDataKeys;addEncryptedDataKey;setSignatureKey;signatureKey;setCryptoKey;getCryptoKey;hasCryptoKey;validUsages;encryptionContext;constructor(e,i){(0,Te.needs)(e instanceof Km.WebCryptoAlgorithmSuite,"Suite must be a WebCryptoAlgorithmSuite"),this.suite=e,this.validUsages=Object.freeze(["deriveKey","encrypt"]),(0,Te.needs)(i&&typeof i=="object","Encryption context must be set"),this.encryptionContext=Object.freeze({...i});let r=vt.KeyringTraceFlag.WRAPPING_KEY_GENERATED_DATA_KEY;Aa(this,r),gu(this),vu(this,r),Object.setPrototypeOf(this,t.prototype),Object.freeze(this)}hasValidKey(){return this.hasUnencryptedDataKey&&this.hasCryptoKey}};Se.WebCryptoEncryptionMaterial=rn;(0,Ot.frozenClass)(rn);var nn=class t{suite;setUnencryptedDataKey;getUnencryptedDataKey;zeroUnencryptedDataKey;hasUnencryptedDataKey;keyringTrace=[];setVerificationKey;verificationKey;setCryptoKey;getCryptoKey;hasCryptoKey;validUsages;encryptionContext;constructor(e,i){(0,Te.needs)(e instanceof Km.WebCryptoAlgorithmSuite,"Suite must be a WebCryptoAlgorithmSuite"),this.suite=e,this.validUsages=Object.freeze(["deriveKey","decrypt"]),(0,Te.needs)(i&&typeof i=="object","Encryption context must be set"),this.encryptionContext=Object.freeze({...i});let r=vt.KeyringTraceFlag.WRAPPING_KEY_DECRYPTED_DATA_KEY;Aa(this,r),yu(this),vu(this,r),Object.setPrototypeOf(this,t.prototype),Object.freeze(this)}hasValidKey(){return this.hasCryptoKey}};Se.WebCryptoDecryptionMaterial=nn;(0,Ot.frozenClass)(nn);function XE(t){return t instanceof rn||t instanceof Ma}Se.isEncryptionMaterial=XE;function JE(t){return t instanceof nn||t instanceof Sa}Se.isDecryptionMaterial=JE;function Aa(t,e){(0,Te.needs)(e&vt.KeyringTraceFlag.SET_FLAGS,"Invalid setFlag");let i=vt.KeyringTraceFlag.SET_FLAGS^e|(e===vt.KeyringTraceFlag.WRAPPING_KEY_GENERATED_DATA_KEY?vt.KeyringTraceFlag.DECRYPT_FLAGS:e===vt.KeyringTraceFlag.WRAPPING_KEY_DECRYPTED_DATA_KEY?vt.KeyringTraceFlag.ENCRYPT_FLAGS:0),r=!1,n,a,s=(x,S)=>{let M=x instanceof Uint8Array?x:mu(x);return y(M,S),n=Fm(x),a=new Uint8Array(M),t.keyringTrace.push(S),t},l=()=>((0,Te.needs)(n,"unencryptedDataKey has not been set"),(0,Te.needs)(!r,"unencryptedDataKey has been zeroed."),(0,Te.needs)(!(n instanceof Uint8Array)||QE(a,mu(n)),"unencryptedDataKey has been corrupted."),n);Object.defineProperty(t,"hasUnencryptedDataKey",{get:()=>!!n&&!r,enumerable:!0});let p=()=>{let x=0;return n||(n=new Uint8Array,x+=1),a||(a=new Uint8Array,x+=1),n instanceof Uint8Array||(n=new Uint8Array),n.fill(0),a.fill(0),r=!0,(0,Te.needs)(x===0||x===2,"Either unencryptedDataKey or udkForVerification was not set."),t};return(0,Ot.readOnlyProperty)(t,"setUnencryptedDataKey",s),(0,Ot.readOnlyProperty)(t,"getUnencryptedDataKey",l),(0,Ot.readOnlyProperty)(t,"zeroUnencryptedDataKey",p),t;function y(x,S){(0,Te.needs)(!n,"unencryptedDataKey has already been set"),(0,Te.needs)(x instanceof Uint8Array,"dataKey must be a Uint8Array"),(0,Te.needs)(x.byteOffset===0,"Unencrypted Master Key must be an isolated buffer."),(0,Te.needs)(x.byteLength===t.suite.keyLengthBytes,"Key length does not agree with the algorithm specification."),(0,Te.needs)(S&&S.keyName&&S.keyNamespace,"Malformed KeyringTrace"),(0,Te.needs)(S.flags&e,"Required KeyringTraceFlag not set"),(0,Te.needs)(!(S.flags&i),"Invalid KeyringTraceFlags set.")}}Se.decorateCryptographicMaterial=Aa;function gu(t){let e=vt.KeyringTraceFlag.SET_FLAGS|vt.KeyringTraceFlag.DECRYPT_FLAGS,i=[],r,n=(s,l)=>((0,Te.needs)(t.hasUnencryptedDataKey,"Unencrypted data key not set."),(0,Te.needs)(s instanceof ZE.EncryptedDataKey,"Unsupported instance of encryptedDataKey"),(0,Te.needs)(l&vt.KeyringTraceFlag.WRAPPING_KEY_ENCRYPTED_DATA_KEY,"Encrypted data key flag must be set."),(0,Te.needs)(!(l&e),"Invalid flag for EncryptedDataKey."),t.keyringTrace.push({keyName:s.providerInfo,keyNamespace:s.providerId,flags:l}),i.push(s),t);(0,Ot.readOnlyProperty)(t,"addEncryptedDataKey",n),Object.defineProperty(t,"encryptedDataKeys",{get:()=>[...i],enumerable:!0});let a=s=>((0,Te.needs)(t.suite.signatureCurve,"Algorithm specification does not support signatures."),(0,Te.needs)(!r,"Signature key has already been set."),(0,Te.needs)(s instanceof km.SignatureKey,"Unsupported instance of key"),r=s,t);return(0,Ot.readOnlyProperty)(t,"setSignatureKey",a),Object.defineProperty(t,"signatureKey",{get:()=>((0,Te.needs)(!!t.suite.signatureCurve==!!r,"Algorithm specification not satisfied."),r),enumerable:!0}),t}Se.decorateEncryptionMaterial=gu;function yu(t){let e,i=r=>((0,Te.needs)(t.suite.signatureCurve,"Algorithm specification does not support signatures."),(0,Te.needs)(!e,"Verification key has already been set."),(0,Te.needs)(r instanceof km.VerificationKey,"Unsupported instance of key"),e=r,t);return(0,Ot.readOnlyProperty)(t,"setVerificationKey",i),Object.defineProperty(t,"verificationKey",{get:()=>((0,Te.needs)(!!t.suite.signatureCurve==!!e,"Algorithm specification not satisfied."),e),enumerable:!0}),t}Se.decorateDecryptionMaterial=yu;function vu(t,e){let i,r=(a,s)=>{if((0,Te.needs)(!i,"cryptoKey is already set."),(0,Te.needs)(an(a)||eM(a),"Unsupported dataKey type."),(0,Te.needs)(Fs(a,t),"CryptoKey settings not acceptable."),t.hasUnencryptedDataKey||((0,Te.needs)(s&&s.keyName&&s.keyNamespace,"Malformed KeyringTrace"),(0,Te.needs)(s.flags&e,"Required KeyringTraceFlag not set"),t.zeroUnencryptedDataKey(),t.keyringTrace.push(s)),an(a))i=a;else{let{zeroByteCryptoKey:l,nonZeroByteCryptoKey:p}=a;i=Object.freeze({zeroByteCryptoKey:l,nonZeroByteCryptoKey:p})}return t};(0,Ot.readOnlyProperty)(t,"setCryptoKey",r);let n=()=>((0,Te.needs)(i,"Crypto key is not set."),i);return(0,Ot.readOnlyProperty)(t,"getCryptoKey",n),Object.defineProperty(t,"hasCryptoKey",{get:()=>!!i,enumerable:!0}),t}Se.decorateWebCryptoMaterial=vu;function an(t){return t&&"algorithm"in t&&"type"in t&&"usages"in t&&"extractable"in t}Se.isCryptoKey=an;function Fs(t,e){if(!an(t)){let{zeroByteCryptoKey:C,nonZeroByteCryptoKey:T}=t;return Fs(C,e)&&Fs(T,e)}let{suite:i,validUsages:r}=e,{encryption:n,keyLength:a,kdf:s}=i,{type:l,algorithm:p,usages:y,extractable:x}=t,{name:S,length:M}=p;return l==="secret"&&(s&&S.toUpperCase()===s||S.toUpperCase()===n&&M===a)&&y.some(C=>r.includes(C))&&!x}Se.isValidCryptoKey=Fs;function eM(t){let{zeroByteCryptoKey:e,nonZeroByteCryptoKey:i}=t;return an(e)&&an(i)}function tM(t){let{suite:e}=t;return e.kdf?"deriveKey":jm(t)}Se.keyUsageForMaterial=tM;function jm(t){if(t instanceof rn)return"encrypt";if(t instanceof nn)return"decrypt";throw new Error("Unsupported material")}Se.subtleFunctionForMaterial=jm;function mu(t){if(t instanceof Uint8Array)return t;if(Se.supportsKeyObject&&t instanceof Se.supportsKeyObject.KeyObject)return t.export();throw new Error("Unsupported dataKey type")}Se.unwrapDataKey=mu;function Fm(t){if(Se.supportsKeyObject){if(t instanceof Uint8Array){let e=Se.supportsKeyObject.createSecretKey(t);return t.fill(0),e}if(t instanceof Se.supportsKeyObject.KeyObject)return t}else if(t instanceof Uint8Array)return t;throw new Error("Unsupported dataKey type")}Se.wrapWithKeyObjectIfSupported=Fm});var bu=R(Ti=>{"use strict";Object.defineProperty(Ti,"__esModule",{value:!0});Ti.KeyringWebCrypto=Ti.KeyringNode=Ti.Keyring=void 0;var iM=Os(),_u=Ai(),Hm=gi(),Ta=Vt(),sn=class{async onEncrypt(e){(0,Ta.needs)((0,Hm.isEncryptionMaterial)(e),"Unsupported type of material.");let i=await this._onEncrypt(e);return(0,Ta.needs)(e===i,"New EncryptionMaterial instances can not be created."),e}async onDecrypt(e,i){if((0,Ta.needs)((0,Hm.isDecryptionMaterial)(e),"Unsupported material type."),e.hasValidKey())return e;(0,Ta.needs)(i.every(n=>n instanceof iM.EncryptedDataKey),"Unsupported EncryptedDataKey type");let r=await this._onDecrypt(e,i);return(0,Ta.needs)(e===r,"New DecryptionMaterial instances can not be created."),e}};Ti.Keyring=sn;(0,_u.immutableBaseClass)(sn);var Hs=class extends sn{};Ti.KeyringNode=Hs;(0,_u.immutableClass)(Hs);var Bs=class extends sn{};Ti.KeyringWebCrypto=Bs;(0,_u.immutableClass)(Bs)});var zm=R(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.MultiKeyringWebCrypto=ln.MultiKeyringNode=void 0;var Us=Ai(),Gs=bu(),on=Vt(),zs=class extends Gs.KeyringNode{generator;children;constructor(e){super(),Bm(this,Gs.KeyringNode,e)}_onEncrypt=Um();_onDecrypt=Gm()};ln.MultiKeyringNode=zs;(0,Us.immutableClass)(zs);var Vs=class extends Gs.KeyringWebCrypto{constructor(e){super(),Bm(this,Gs.KeyringWebCrypto,e)}_onEncrypt=Um();_onDecrypt=Gm()};ln.MultiKeyringWebCrypto=Vs;(0,Us.immutableClass)(Vs);function Bm(t,e,{generator:i,children:r=[]}){(0,on.needs)(i||r.length,"Noop MultiKeyring is not supported."),(0,on.needs)(!!i==i instanceof e,"Generator must be a Keyring"),(0,on.needs)(r.every(n=>n instanceof e),"Child must be a Keyring"),(0,Us.readOnlyProperty)(t,"children",Object.freeze(r.slice())),(0,Us.readOnlyProperty)(t,"generator",i)}function Um(){return async function(e){(0,on.needs)(e.hasUnencryptedDataKey?!0:this.generator,"Only Keyrings explicitly designated as generators can generate material.");let i=this.generator?await this.generator.onEncrypt(e):e;(0,on.needs)(i.hasUnencryptedDataKey,"Generator Keyring has not generated material.");for(let r of this.children)await r.onEncrypt(i);return i}}function Gm(){return async function(e,i){let r=this.children.slice();this.generator&&r.unshift(this.generator);let n=[];for(let a of r){if(e.hasValidKey())return e;try{await a.onDecrypt(e,i)}catch(s){n.push({errPlus:s})}}return(0,on.needs)(e.hasValidKey()||!e.hasValidKey()&&!n.length,n.reduce((a,s,l)=>`${a} Error #${l+1} 
 ${s.errPlus.stack} 
`,`Unable to decrypt data key and one or more child keyrings had an error. 
 `)),e}}});var Wm=R(Vm=>{"use strict";Object.defineProperty(Vm,"__esModule",{value:!0})});var Ym=R(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});Ws.cloneMaterial=void 0;var ri=gi(),rM=Ts(),xu=Vt();function nM(t){let{suite:e,encryptionContext:i}=t,r=e instanceof rM.NodeAlgorithmSuite?t instanceof ri.NodeEncryptionMaterial?new ri.NodeEncryptionMaterial(e,i):new ri.NodeDecryptionMaterial(e,i):t instanceof ri.WebCryptoEncryptionMaterial?new ri.WebCryptoEncryptionMaterial(e,i):new ri.WebCryptoDecryptionMaterial(e,i),[n,...a]=t.keyringTrace.slice();if(t.hasUnencryptedDataKey){let s=aM(t.getUnencryptedDataKey());r.setUnencryptedDataKey(s,n)}if(t.hasCryptoKey){let s=t.getCryptoKey();r.setCryptoKey(s,n)}if((0,ri.isEncryptionMaterial)(t)&&(0,ri.isEncryptionMaterial)(r)){let s=t.encryptedDataKeys;(0,xu.needs)(s.length===a.length,"KeyringTrace length does not match encrypted data keys."),s.forEach((l,p)=>{let{providerInfo:y,providerId:x}=l,{keyNamespace:S,keyName:M,flags:C}=a[p];(0,xu.needs)(M===y&&S===x,"Keyring trace does not match encrypted data key."),r.addEncryptedDataKey(l,C)}),t.suite.signatureCurve&&t.signatureKey&&r.setSignatureKey(t.signatureKey)}else if((0,ri.isDecryptionMaterial)(t)&&(0,ri.isDecryptionMaterial)(r))(0,xu.needs)(!a.length,"Only 1 trace is valid on DecryptionMaterials."),t.suite.signatureCurve&&t.verificationKey&&r.setVerificationKey(t.verificationKey);else throw new Error("Material mismatch");return r}Ws.cloneMaterial=nM;function aM(t){return t instanceof Uint8Array?new Uint8Array(t):t}});var Zm=R($m=>{"use strict";Object.defineProperty($m,"__esModule",{value:!0})});var Qm=R(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.NotSupported=void 0;var wu=class t extends Error{code;constructor(e){super(e),Object.setPrototypeOf(this,t.prototype),this.code="NOT_SUPPORTED"}};Ys.NotSupported=wu});var Le=R(N=>{"use strict";var sM=N&&N.__createBinding||(Object.create?function(t,e,i,r){r===void 0&&(r=i);var n=Object.getOwnPropertyDescriptor(e,i);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,n)}:function(t,e,i,r){r===void 0&&(r=i),t[r]=e[i]}),Eu=N&&N.__exportStar||function(t,e){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&sM(e,t,i)};Object.defineProperty(N,"__esModule",{value:!0});N.NotSupported=N.cloneMaterial=N.needs=N.readOnlyProperty=N.frozenClass=N.immutableClass=N.immutableBaseClass=N.EncryptedDataKey=N.VerificationKey=N.SignatureKey=N.decorateWebCryptoMaterial=N.decorateCryptographicMaterial=N.wrapWithKeyObjectIfSupported=N.unwrapDataKey=N.isDecryptionMaterial=N.isEncryptionMaterial=N.WebCryptoDecryptionMaterial=N.WebCryptoEncryptionMaterial=N.subtleFunctionForMaterial=N.keyUsageForMaterial=N.isCryptoKey=N.isValidCryptoKey=N.NodeDecryptionMaterial=N.NodeEncryptionMaterial=N.MultiKeyringWebCrypto=N.MultiKeyringNode=N.KeyringTraceFlag=N.NodeAlgorithmSuite=N.WebCryptoAlgorithmSuite=N.CommittingAlgorithmSuiteIdentifier=N.NonCommittingAlgorithmSuiteIdentifier=N.MessageFormat=N.SignaturePolicySuites=N.SignaturePolicy=N.CommitmentPolicySuites=N.CommitmentPolicy=N.AlgorithmSuite=N.AlgorithmSuiteIdentifier=void 0;var yi=Ms();Object.defineProperty(N,"AlgorithmSuiteIdentifier",{enumerable:!0,get:function(){return yi.AlgorithmSuiteIdentifier}});Object.defineProperty(N,"AlgorithmSuite",{enumerable:!0,get:function(){return yi.AlgorithmSuite}});Object.defineProperty(N,"CommitmentPolicy",{enumerable:!0,get:function(){return yi.CommitmentPolicy}});Object.defineProperty(N,"CommitmentPolicySuites",{enumerable:!0,get:function(){return yi.CommitmentPolicySuites}});Object.defineProperty(N,"SignaturePolicy",{enumerable:!0,get:function(){return yi.SignaturePolicy}});Object.defineProperty(N,"SignaturePolicySuites",{enumerable:!0,get:function(){return yi.SignaturePolicySuites}});Object.defineProperty(N,"MessageFormat",{enumerable:!0,get:function(){return yi.MessageFormat}});Object.defineProperty(N,"NonCommittingAlgorithmSuiteIdentifier",{enumerable:!0,get:function(){return yi.NonCommittingAlgorithmSuiteIdentifier}});Object.defineProperty(N,"CommittingAlgorithmSuiteIdentifier",{enumerable:!0,get:function(){return yi.CommittingAlgorithmSuiteIdentifier}});var oM=Vc();Object.defineProperty(N,"WebCryptoAlgorithmSuite",{enumerable:!0,get:function(){return oM.WebCryptoAlgorithmSuite}});var lM=Ts();Object.defineProperty(N,"NodeAlgorithmSuite",{enumerable:!0,get:function(){return lM.NodeAlgorithmSuite}});Eu(bu(),N);var cM=hu();Object.defineProperty(N,"KeyringTraceFlag",{enumerable:!0,get:function(){return cM.KeyringTraceFlag}});var Xm=zm();Object.defineProperty(N,"MultiKeyringNode",{enumerable:!0,get:function(){return Xm.MultiKeyringNode}});Object.defineProperty(N,"MultiKeyringWebCrypto",{enumerable:!0,get:function(){return Xm.MultiKeyringWebCrypto}});Eu(Wm(),N);var Jm=gi();Object.defineProperty(N,"NodeEncryptionMaterial",{enumerable:!0,get:function(){return Jm.NodeEncryptionMaterial}});Object.defineProperty(N,"NodeDecryptionMaterial",{enumerable:!0,get:function(){return Jm.NodeDecryptionMaterial}});var $s=gi();Object.defineProperty(N,"isValidCryptoKey",{enumerable:!0,get:function(){return $s.isValidCryptoKey}});Object.defineProperty(N,"isCryptoKey",{enumerable:!0,get:function(){return $s.isCryptoKey}});Object.defineProperty(N,"keyUsageForMaterial",{enumerable:!0,get:function(){return $s.keyUsageForMaterial}});Object.defineProperty(N,"subtleFunctionForMaterial",{enumerable:!0,get:function(){return $s.subtleFunctionForMaterial}});var eg=gi();Object.defineProperty(N,"WebCryptoEncryptionMaterial",{enumerable:!0,get:function(){return eg.WebCryptoEncryptionMaterial}});Object.defineProperty(N,"WebCryptoDecryptionMaterial",{enumerable:!0,get:function(){return eg.WebCryptoDecryptionMaterial}});var tg=gi();Object.defineProperty(N,"isEncryptionMaterial",{enumerable:!0,get:function(){return tg.isEncryptionMaterial}});Object.defineProperty(N,"isDecryptionMaterial",{enumerable:!0,get:function(){return tg.isDecryptionMaterial}});var ig=gi();Object.defineProperty(N,"unwrapDataKey",{enumerable:!0,get:function(){return ig.unwrapDataKey}});Object.defineProperty(N,"wrapWithKeyObjectIfSupported",{enumerable:!0,get:function(){return ig.wrapWithKeyObjectIfSupported}});var rg=gi();Object.defineProperty(N,"decorateCryptographicMaterial",{enumerable:!0,get:function(){return rg.decorateCryptographicMaterial}});Object.defineProperty(N,"decorateWebCryptoMaterial",{enumerable:!0,get:function(){return rg.decorateWebCryptoMaterial}});var ng=du();Object.defineProperty(N,"SignatureKey",{enumerable:!0,get:function(){return ng.SignatureKey}});Object.defineProperty(N,"VerificationKey",{enumerable:!0,get:function(){return ng.VerificationKey}});var uM=Os();Object.defineProperty(N,"EncryptedDataKey",{enumerable:!0,get:function(){return uM.EncryptedDataKey}});var Zs=Ai();Object.defineProperty(N,"immutableBaseClass",{enumerable:!0,get:function(){return Zs.immutableBaseClass}});Object.defineProperty(N,"immutableClass",{enumerable:!0,get:function(){return Zs.immutableClass}});Object.defineProperty(N,"frozenClass",{enumerable:!0,get:function(){return Zs.frozenClass}});Object.defineProperty(N,"readOnlyProperty",{enumerable:!0,get:function(){return Zs.readOnlyProperty}});var fM=Vt();Object.defineProperty(N,"needs",{enumerable:!0,get:function(){return fM.needs}});var pM=Ym();Object.defineProperty(N,"cloneMaterial",{enumerable:!0,get:function(){return pM.cloneMaterial}});Eu(Zm(),N);var dM=Qm();Object.defineProperty(N,"NotSupported",{enumerable:!0,get:function(){return dM.NotSupported}})});var cn=R(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.MESSAGE_ID_LENGTH=Fe.MessageIdLength=Fe.FRAME_LENGTH=Fe.Maximum=Fe.SequenceIdentifier=Fe.ObjectType=Fe.ContentAADString=Fe.ContentType=Fe.SerializationVersion=Fe.ENCODED_SIGNER_KEY=void 0;Fe.ENCODED_SIGNER_KEY="aws-crypto-public-key";var hM=Le();Object.defineProperty(Fe,"SerializationVersion",{enumerable:!0,get:function(){return hM.MessageFormat}});var ag;(function(t){t[t.NO_FRAMING=1]="NO_FRAMING",t[t.FRAMED_DATA=2]="FRAMED_DATA"})(ag=Fe.ContentType||(Fe.ContentType={}));Object.freeze(ag);var sg;(function(t){t.FRAME_STRING_ID="AWSKMSEncryptionClient Frame",t.FINAL_FRAME_STRING_ID="AWSKMSEncryptionClient Final Frame",t.NON_FRAMED_STRING_ID="AWSKMSEncryptionClient Single Block"})(sg=Fe.ContentAADString||(Fe.ContentAADString={}));Object.freeze(sg);var og;(function(t){t[t.CUSTOMER_AE_DATA=128]="CUSTOMER_AE_DATA"})(og=Fe.ObjectType||(Fe.ObjectType={}));Object.freeze(og);var lg;(function(t){t[t.SEQUENCE_NUMBER_END=4294967295]="SEQUENCE_NUMBER_END"})(lg=Fe.SequenceIdentifier||(Fe.SequenceIdentifier={}));Object.freeze(lg);var cg;(function(t){t[t.MESSAGES_PER_CACHED_KEY_LIMIT=4294967296]="MESSAGES_PER_CACHED_KEY_LIMIT",t[t.BYTES_PER_CACHED_KEY_LIMIT=9007199254740991]="BYTES_PER_CACHED_KEY_LIMIT",t[t.BYTES_PER_MESSAGE=9007199254740991]="BYTES_PER_MESSAGE",t[t.BYTES_PER_AES_GCM_NONCE=68719476704]="BYTES_PER_AES_GCM_NONCE",t[t.FRAME_COUNT=4294967295]="FRAME_COUNT",t[t.FRAME_SIZE=4294967295]="FRAME_SIZE",t[t.GCM_CONTENT_SIZE=4294967295]="GCM_CONTENT_SIZE",t[t.NON_FRAMED_SIZE=4294967295]="NON_FRAMED_SIZE",t[t.AAD_BYTE_SIZE=65535]="AAD_BYTE_SIZE"})(cg=Fe.Maximum||(Fe.Maximum={}));Object.freeze(cg);Fe.FRAME_LENGTH=4096;var Mu;(function(t){t[t.V1=16]="V1",t[t.V2=32]="V2"})(Mu=Fe.MessageIdLength||(Fe.MessageIdLength={}));Object.freeze(Mu);Fe.MESSAGE_ID_LENGTH=Mu.V1});var yr=R(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});Qs.concatBuffers=void 0;function mM(...t){let e=t.reduce((n,a)=>n+a.byteLength,0),i=new Uint8Array(e),r=0;return t.forEach(n=>{if(ArrayBuffer.isView(n)){let{buffer:a,byteOffset:s,byteLength:l}=n;i.set(new Uint8Array(a,s,l),r)}else i.set(new Uint8Array(n),r);r+=n.byteLength}),i}Qs.concatBuffers=mM});var un=R(Ri=>{"use strict";Object.defineProperty(Ri,"__esModule",{value:!0});Ri.uInt32BE=Ri.uInt16BE=Ri.uInt8=void 0;var Su=Le(),gM=2**8;function yM(t){(0,Su.needs)(t<gM&&t>=0,"number out of bounds.");let e=new Uint8Array(1);return new DataView(e.buffer,e.byteOffset,e.byteLength).setUint8(0,t),e}Ri.uInt8=yM;var vM=2**16;function _M(t){(0,Su.needs)(t<vM&&t>=0,"number out of bounds.");let e=new Uint8Array(2);return new DataView(e.buffer,e.byteOffset,e.byteLength).setUint16(0,t,!1),e}Ri.uInt16BE=_M;var bM=2**32;function xM(t){(0,Su.needs)(t<bM&&t>=0,"number out of bounds.");let e=new Uint8Array(4);return new DataView(e.buffer,e.byteOffset,e.byteLength).setUint32(0,t,!1),e}Ri.uInt32BE=xM});var ug=R(fn=>{"use strict";var wM=fn&&fn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fn,"__esModule",{value:!0});fn.aadFactory=void 0;var EM=wM(wa()),Ra=cn(),MM=yr(),SM=un();function AM(t){return{messageAADContentString:e,messageAAD:i};function e({contentType:r,isFinalFrame:n}){switch(r){case Ra.ContentType.NO_FRAMING:return Ra.ContentAADString.NON_FRAMED_STRING_ID;case Ra.ContentType.FRAMED_DATA:return n?Ra.ContentAADString.FINAL_FRAME_STRING_ID:Ra.ContentAADString.FRAME_STRING_ID;default:throw new Error("Unrecognized content type")}}function i(r,n,a,s){return(0,MM.concatBuffers)(r,t(n),(0,SM.uInt32BE)(a),new Uint8Array(new EM.default(s).toArray("be",8)))}}fn.aadFactory=AM});var hg=R(Pt=>{"use strict";var TM=Pt&&Pt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pt,"__esModule",{value:!0});Pt.decodeNonFrameBodyHeader=Pt.decodeFinalFrameBodyHeader=Pt.decodeFrameBodyHeader=Pt.decodeBodyHeader=void 0;var RM=TM(wa()),It=cn(),Dt=Le();function CM(t,e,i){switch((0,Dt.needs)(It.ContentType[e.messageHeader.contentType],"Unknown contentType"),e.messageHeader.contentType){case It.ContentType.FRAMED_DATA:return fg(t,e,i);case It.ContentType.NO_FRAMING:return dg(t,e,i)}return!1}Pt.decodeBodyHeader=CM;function fg(t,e,i){(0,Dt.needs)(It.ContentType.FRAMED_DATA===e.messageHeader.contentType,"Unknown contentType");let{frameLength:r}=e.messageHeader,{ivLength:n,tagLength:a}=e.algorithmSuite,s=new DataView(t.buffer,t.byteOffset,t.byteLength);if((0,Dt.needs)(s.byteLength>=i&&i>=0,"readPos out of bounds."),4+n+i>s.byteLength)return!1;let l=s.getUint32(i);if((0,Dt.needs)(l>0,"Malformed sequenceNumber."),l===It.SequenceIdentifier.SEQUENCE_NUMBER_END)return pg(t,e,i);let p=t.slice(i+=4,i+=n);return{sequenceNumber:l,iv:p,contentLength:r,readPos:i,tagLength:a,isFinalFrame:!1,contentType:It.ContentType.FRAMED_DATA}}Pt.decodeFrameBodyHeader=fg;function pg(t,e,i){(0,Dt.needs)(It.ContentType.FRAMED_DATA===e.messageHeader.contentType,"Unknown contentType");let{ivLength:r,tagLength:n}=e.algorithmSuite,a=new DataView(t.buffer,t.byteOffset,t.byteLength);if((0,Dt.needs)(a.byteLength>=i&&i>=0,"readPos out of bounds."),8+r+4+i>a.byteLength)return!1;let s=a.getUint32(i,!1);(0,Dt.needs)(s===It.SequenceIdentifier.SEQUENCE_NUMBER_END,"Malformed final frame: Invalid sequence number end value");let l=a.getUint32(i+=4,!1);(0,Dt.needs)(l>0,"Malformed sequenceNumber.");let p=t.slice(i+=4,i+=r),y=a.getUint32(i);return(0,Dt.needs)(e.messageHeader.frameLength>=y,"Final frame length exceeds frame length."),{sequenceNumber:l,iv:p,contentLength:y,readPos:i+4,tagLength:n,isFinalFrame:!0,contentType:It.ContentType.FRAMED_DATA}}Pt.decodeFinalFrameBodyHeader=pg;function dg(t,e,i){(0,Dt.needs)(It.ContentType.NO_FRAMING===e.messageHeader.contentType,"Unknown contentType");let{ivLength:r,tagLength:n}=e.algorithmSuite,a=new DataView(t.buffer,t.byteOffset,t.byteLength);if((0,Dt.needs)(a.byteLength>=i&&i>=0,"readPos out of bounds."),r+8+i>a.byteLength)return!1;let s=t.slice(i,i+=r),l=t.slice(i,i+=8),y=new RM.default([...l],16,"be").toNumber();return(0,Dt.needs)(It.Maximum.BYTES_PER_AES_GCM_NONCE>y,"Content length out of bounds."),{sequenceNumber:1,iv:s,contentLength:y,readPos:i,tagLength:n,isFinalFrame:!0,contentType:It.ContentType.NO_FRAMING}}Pt.decodeNonFrameBodyHeader=dg});var Au=R(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Xs.readElements=void 0;var mg=Le();function OM(t,e,i,r=0){let n=new DataView(i.buffer,i.byteOffset,i.byteLength),a=[];for((0,mg.needs)(r>=0&&n.byteLength>=r,"readPos out of bounds."),(0,mg.needs)(t>=0&&e>=0,"elementCount and fieldsPerElement must be positive.");t--;){let s=[],l=e;for(;l--;){if(r+2>n.byteLength)return!1;let p=n.getUint16(r,!1);if(r+=2,r+p>n.byteLength)return!1;let y=i.slice(r,r+p);s.push(y),r+=p}a.push(s)}return{elements:a,readPos:r}}Xs.readElements=OM});var yg=R(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});Js.decodeEncryptionContextFactory=void 0;var gg=Le(),DM=Au();function PM(t){return e;function e(i){let r=Object.create(null);if(!i.byteLength)return Object.freeze(r);let a=new DataView(i.buffer,i.byteOffset,i.byteLength).getUint16(0,!1),s=(0,DM.readElements)(a,2,i,2);if(!s)throw new Error("context parse error");let{elements:l,readPos:p}=s;(0,gg.needs)(i.byteLength===p,"Overflow, too much data.");for(let y=0;y<a;y++){let[x,S]=l[y].map(t);(0,gg.needs)(r[x]===void 0,"Duplicate encryption context key value."),r[x]=S}return Object.freeze(r),r}}Js.decodeEncryptionContextFactory=PM});var vg=R(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});eo.deserializeEncryptedDataKeysFactory=void 0;var Ca=Le(),IM=Au();function LM(t){return e;function e(i,r,{maxEncryptedDataKeys:n}={maxEncryptedDataKeys:!1}){if((0,Ca.needs)(i.byteLength>=r&&r>=0,"startPos out of bounds."),(0,Ca.needs)(n===!1||n>=1,"Invalid maxEncryptedDataKeys value."),r+2>i.byteLength)return!1;let s=new DataView(i.buffer,i.byteOffset,i.byteLength).getUint16(r,!1);(0,Ca.needs)(s,"No EncryptedDataKey found."),(0,Ca.needs)(n===!1||s<=n,"maxEncryptedDataKeys exceeded.");let l=(0,IM.readElements)(s,3,i,r+2);if(!l)return!1;let{elements:p,readPos:y}=l,x=p.map(([S,M,C])=>{let T=t(S),O=t(M);return new Ca.EncryptedDataKey({providerInfo:O,providerId:T,encryptedDataKey:C,rawInfo:M})});return Object.freeze(x),{encryptedDataKeys:x,readPos:y}}}eo.deserializeEncryptedDataKeysFactory=LM});var _g=R(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});to.deserializeHeaderV1Factory=void 0;var pn=Le();function NM({decodeEncryptionContext:t,deserializeEncryptedDataKeys:e,SdkSuite:i}){return r;function r(n,a={maxEncryptedDataKeys:!1}){let s=new DataView(n.buffer,n.byteOffset,n.byteLength);if(s.byteLength<22)return!1;let l=s.getUint8(0),p=s.getUint8(1);(0,pn.needs)(l===pn.MessageFormat.V1&&p===128,l===65&&p===89?"Malformed Header: This blob may be base64 encoded.":"Malformed Header.");let y=s.getUint16(2,!1);(0,pn.needs)(pn.NonCommittingAlgorithmSuiteIdentifier[y],"Unsupported algorithm suite.");let x=n.slice(4,20),S=s.getUint16(20,!1);if(22+S>s.byteLength)return!1;let M=t(n.slice(22,22+S)),C=e(n,22+S,a);if(!C)return!1;let{encryptedDataKeys:T,readPos:O}=C,P=new i(y),{ivLength:L,tagLength:U}=P,z=U/8,V=O+1+4+1+4;if(V+L+z>s.byteLength)return!1;let Be=s.getUint8(O),De=s.getUint32(O+1,!1);(0,pn.needs)(De===0,"Malformed Header");let Je=s.getUint8(O+1+4);(0,pn.needs)(Je===L,"Malformed Header");let Ae=s.getUint32(O+1+4+1,!1),tt=n.slice(0,V),A={version:l,type:p,suiteId:y,messageId:x,encryptionContext:M,encryptedDataKeys:T,contentType:Be,headerIvLength:Je,frameLength:Ae},f=n.slice(V,V+L),_=n.slice(V+L,V+L+z);return{messageHeader:A,headerLength:V,rawHeader:tt,algorithmSuite:P,headerAuth:{headerIv:f,headerAuthTag:_,headerAuthLength:f.byteLength+_.byteLength}}}}to.deserializeHeaderV1Factory=NM});var bg=R(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});io.deserializeHeaderV2Factory=void 0;var dn=Le(),Tu=cn();function kM({decodeEncryptionContext:t,deserializeEncryptedDataKeys:e,SdkSuite:i}){return r;function r(n,a={maxEncryptedDataKeys:!1}){let s=new DataView(n.buffer,n.byteOffset,n.byteLength),l=3+Tu.MessageIdLength.V2+2;if(s.byteLength<l)return!1;let p=0,y=s.getUint8(p);p+=1,(0,dn.needs)(y===dn.MessageFormat.V2,y===65?"Malformed Header: This blob may be base64 encoded.":"Malformed Header.");let x=s.getUint16(p,!1);(0,dn.needs)(dn.CommittingAlgorithmSuiteIdentifier[x],"Unsupported algorithm suite."),p+=2;let S=n.slice(p,p+Tu.MessageIdLength.V2);p+=Tu.MessageIdLength.V2;let M=s.getUint16(p,!1);if(p+=2,l+M>s.byteLength)return!1;let C=t(n.slice(l,l+M)),T=e(n,l+M,a);if(!T)return!1;let{encryptedDataKeys:O,readPos:P}=T,L=new i(x),{tagLength:U,suiteDataLength:z,ivLength:V}=L;(0,dn.needs)(dn.CommittingAlgorithmSuiteIdentifier[x]&&z,"Unsupported algorithm suite.");let Be=U/8,De=P+1+4+z;if(De+Be>s.byteLength)return!1;p=P;let Je=s.getUint8(p);p+=1;let Ae=s.getUint32(p,!1);p+=4;let tt=n.slice(p,p+z);p+=z;let A=n.slice(0,De),f={version:y,suiteId:x,messageId:S,encryptionContext:C,encryptedDataKeys:O,contentType:Je,frameLength:Ae,suiteData:tt},_=new Uint8Array(V),h=n.slice(De,De+Be);return{messageHeader:f,headerLength:De,rawHeader:A,algorithmSuite:L,headerAuth:{headerIv:_,headerAuthTag:h,headerAuthLength:h.byteLength}}}}io.deserializeHeaderV2Factory=kM});var xg=R(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});ro.deserializeFactory=void 0;var qM=Le(),KM=yg(),jM=vg(),FM=_g(),HM=bg();function BM(t,e){let i=(0,KM.decodeEncryptionContextFactory)(t),r=(0,jM.deserializeEncryptedDataKeysFactory)(t),n=(0,FM.deserializeHeaderV1Factory)({decodeEncryptionContext:i,deserializeEncryptedDataKeys:r,SdkSuite:e}),a=(0,HM.deserializeHeaderV2Factory)({decodeEncryptionContext:i,deserializeEncryptedDataKeys:r,SdkSuite:e}),s=new Map([[void 0,p=>!1],[1,n],[2,a]]);return{deserializeMessageHeader:l,deserializeEncryptedDataKeys:r,decodeEncryptionContext:i};function l(p,y={maxEncryptedDataKeys:!1}){let x=p[0],S=s.get(x);return(0,qM.needs)(S,"Not a supported message format version."),S(p,y)}}ro.deserializeFactory=BM});var Mg=R(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});hn.kdfCommitKeyInfo=hn.kdfInfo=void 0;var Ru=Le(),wg=yr(),Eg=un();function UM(t,e){return(0,Ru.needs)(Ru.NonCommittingAlgorithmSuiteIdentifier[t],"Committing algorithm suite not supported."),(0,wg.concatBuffers)((0,Eg.uInt16BE)(t),e)}hn.kdfInfo=UM;var GM=new Uint8Array([68,69,82,73,86,69,75,69,89]),zM=new Uint8Array([67,79,77,77,73,84,75,69,89]);function VM(t){return(0,Ru.needs)(t.commitment==="KEY","Non committing algorithm suite not supported."),{keyLabel:(0,wg.concatBuffers)((0,Eg.uInt16BE)(t.id),GM),commitLabel:zM.slice()}}hn.kdfCommitKeyInfo=VM});var Sg=R(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.serializeMessageHeaderAuth=gn.serializeFactory=void 0;var ni=yr(),mn=Le(),Oa=cn(),Qe=un();function WM(t){return{frameIv:e,nonFramedBodyIv:i,headerAuthIv:r,frameHeader:n,finalFrameHeader:a,encodeEncryptionContext:s,serializeEncryptionContext:l,serializeEncryptedDataKeys:p,serializeEncryptedDataKey:y,serializeMessageHeader:x,buildMessageHeader:C};function e(T,O){(0,mn.needs)(O>0&&Oa.SequenceIdentifier.SEQUENCE_NUMBER_END>=O,"sequenceNumber out of bounds");let P=new Uint8Array(T);return new DataView(P.buffer,P.byteOffset,P.byteLength).setUint32(T-4,O,!1),P}function i(T){return e(T,1)}function r(T){return new Uint8Array(T)}function n(T,O){return(0,ni.concatBuffers)((0,Qe.uInt32BE)(T),O)}function a(T,O,P){return(0,ni.concatBuffers)((0,Qe.uInt32BE)(Oa.SequenceIdentifier.SEQUENCE_NUMBER_END),(0,Qe.uInt32BE)(T),O,(0,Qe.uInt32BE)(P))}function s(T){return Object.entries(T).sort(([O],[P])=>O.localeCompare(P)).map(O=>O.map(t)).map(([O,P])=>(0,ni.concatBuffers)((0,Qe.uInt16BE)(O.byteLength),O,(0,Qe.uInt16BE)(P.byteLength),P))}function l(T){let O=s(T);if(!O.length)return(0,Qe.uInt16BE)(0);let P=(0,ni.concatBuffers)((0,Qe.uInt16BE)(O.length),...O),L=(0,Qe.uInt16BE)(P.byteLength);return(0,ni.concatBuffers)(L,P)}function p(T){let O=T.map(y);return(0,ni.concatBuffers)((0,Qe.uInt16BE)(T.length),...O)}function y(T){let{providerId:O,providerInfo:P,encryptedDataKey:L,rawInfo:U}=T,z=t(O),V=U||t(P);return(0,ni.concatBuffers)((0,Qe.uInt16BE)(z.byteLength),z,(0,Qe.uInt16BE)(V.byteLength),V,(0,Qe.uInt16BE)(L.byteLength),L)}function x(T){return(0,mn.needs)(Oa.SerializationVersion[T.version],"Unsupported version."),T.version===1?S(T):M(T)}function S(T){return(0,ni.concatBuffers)((0,Qe.uInt8)(T.version),(0,Qe.uInt8)(T.type),(0,Qe.uInt16BE)(T.suiteId),T.messageId,l(T.encryptionContext),p(T.encryptedDataKeys),new Uint8Array([T.contentType]),new Uint8Array([0,0,0,0]),(0,Qe.uInt8)(T.headerIvLength),(0,Qe.uInt32BE)(T.frameLength))}function M(T){return(0,ni.concatBuffers)((0,Qe.uInt8)(T.version),(0,Qe.uInt16BE)(T.suiteId),T.messageId,l(T.encryptionContext),p(T.encryptedDataKeys),new Uint8Array([T.contentType]),(0,Qe.uInt32BE)(T.frameLength),T.suiteData)}function C({encryptionContext:T,encryptedDataKeys:O,suite:P,messageId:L,frameLength:U,suiteData:z}){let{messageFormat:V,id:Be}=P,De=Oa.ContentType.FRAMED_DATA;if(V===mn.MessageFormat.V1){let Je=Oa.ObjectType.CUSTOMER_AE_DATA,{ivLength:Ae}=P;return{version:V,type:Je,suiteId:Be,messageId:L,encryptionContext:T,encryptedDataKeys:O,contentType:De,headerIvLength:Ae,frameLength:U}}else if(V===mn.MessageFormat.V2)return{version:V,suiteId:Be,messageId:L,encryptionContext:T,encryptedDataKeys:O,contentType:De,frameLength:U,suiteData:z};(0,mn.needs)(!1,"Unsupported message format version.")}}gn.serializeFactory=WM;function YM({headerIv:t,headerAuthTag:e,messageHeader:i}){return i.version===mn.MessageFormat.V1?(0,ni.concatBuffers)(t,e):e}gn.serializeMessageHeaderAuth=YM});var Tg=R(Ag=>{"use strict";Object.defineProperty(Ag,"__esModule",{value:!0})});var Rg=R(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.deserializeSignature=yn.serializeSignatureInfo=void 0;var $M=yr(),ZM=un(),Cu=Le();function QM(t){return(0,$M.concatBuffers)((0,ZM.uInt16BE)(t.byteLength),t)}yn.serializeSignatureInfo=QM;function XM({buffer:t,byteOffset:e,byteLength:i}){(0,Cu.needs)(i&&i>2,"Invalid Signature");let n=new DataView(t,e,i).getUint16(0,!1);return(0,Cu.needs)(n>0,"Invalid Signature"),(0,Cu.needs)(i===n+2,"Invalid Signature"),new Uint8Array(t,e+2,n)}yn.deserializeSignature=XM});var Dg=R(Ci=>{"use strict";var JM=Ci&&Ci.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.raw2der=Ci.der2raw=void 0;var no=JM(uu()),eS=yr(),tS=Le(),Cg=no.default.define("ECDSASignature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),Og=Object.freeze({"P-256":32,"P-384":48});function iS(t,{signatureCurve:e}){if(!e)throw new Error("AlgorithmSuite does not support signing");let i=Og[e],{r,s:n}=Cg.decode(new no.default.bignum.BN(t).toArrayLike(Buffer),"der"),a=r.byteLength(),s=n.byteLength();return(0,eS.concatBuffers)(new Uint8Array(i-a),r.toArrayLike(Uint8Array),new Uint8Array(i-s),n.toArrayLike(Uint8Array))}Ci.der2raw=iS;function rS(t,{signatureCurve:e}){if(!e)throw new Error("AlgorithmSuite does not support signing");let{byteLength:i}=t,r=Og[e];(0,tS.needs)(i===2*r,"Malformed signature.");let n=new no.default.bignum.BN(t.slice(0,r)),a=new no.default.bignum.BN(t.slice(r));return Cg.encode({r:n,s:a},"der")}Ci.raw2der=rS});var _t=R(st=>{"use strict";var nS=st&&st.__createBinding||(Object.create?function(t,e,i,r){r===void 0&&(r=i);var n=Object.getOwnPropertyDescriptor(e,i);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,n)}:function(t,e,i,r){r===void 0&&(r=i),t[r]=e[i]}),Yt=st&&st.__exportStar||function(t,e){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&nS(e,t,i)};Object.defineProperty(st,"__esModule",{value:!0});Yt(ug(),st);Yt(yr(),st);Yt(hg(),st);Yt(xg(),st);Yt(Mg(),st);Yt(Sg(),st);Yt(Tg(),st);Yt(cn(),st);Yt(un(),st);Yt(Rg(),st);Yt(Dg(),st)});var Pg=R(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});so.NodeDefaultCryptographicMaterialsManager=void 0;var et=Le(),Da=_t(),aS=require("crypto"),ao=class{constructor(e){(0,et.needs)(e instanceof et.KeyringNode,"Unsupported type."),(0,et.readOnlyProperty)(this,"keyring",e)}async getEncryptionMaterials({suite:e,encryptionContext:i,commitmentPolicy:r}){e=e||new et.NodeAlgorithmSuite(et.CommitmentPolicySuites[r].defaultAlgorithmSuite),(0,et.needs)(!Object.prototype.hasOwnProperty.call(i,Da.ENCODED_SIGNER_KEY),`Reserved encryptionContext value ${Da.ENCODED_SIGNER_KEY} not allowed.`);let n=await this.keyring.onEncrypt(this._initializeEncryptionMaterial(e,i));return(0,et.needs)(n.getUnencryptedDataKey(),"Unencrypted data key is invalid."),(0,et.needs)(n.encryptedDataKeys.length,"No EncryptedDataKeys: the ciphertext can never be decrypted."),n}async decryptMaterials({suite:e,encryptedDataKeys:i,encryptionContext:r}){let n=await this.keyring.onDecrypt(this._initializeDecryptionMaterial(e,r),i.slice());return(0,et.needs)(n.getUnencryptedDataKey(),"Unencrypted data key is invalid."),n}_initializeEncryptionMaterial(e,i){let{signatureCurve:r}=e;if(!r)return new et.NodeEncryptionMaterial(e,i);let n=(0,aS.createECDH)(r);n.generateKeys();let a=n.getPublicKey(void 0,"compressed"),s=n.getPrivateKey(),l=new et.SignatureKey(s,new Uint8Array(a),e);return new et.NodeEncryptionMaterial(e,{...i,[Da.ENCODED_SIGNER_KEY]:a.toString("base64")}).setSignatureKey(l)}_initializeDecryptionMaterial(e,i){let{signatureCurve:r}=e;if(!r)return(0,et.needs)(!Object.prototype.hasOwnProperty.call(i,Da.ENCODED_SIGNER_KEY),"Encryption context contains public verification key for unsigned algorithm suite."),new et.NodeDecryptionMaterial(e,i);if(!i)throw new Error("Encryption context does not contain required public key.");let{[Da.ENCODED_SIGNER_KEY]:n}=i;(0,et.needs)(n,"Context does not contain required public key.");let a=et.VerificationKey.decodeCompressPoint(Buffer.from(n,"base64"),e);return new et.NodeDecryptionMaterial(e,i).setVerificationKey(new et.VerificationKey(a,e))}};so.NodeDefaultCryptographicMaterialsManager=ao;(0,et.immutableClass)(ao)});var Pu=R(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});Oi.UnsupportedAlgorithm=Oi.KeyLengthError=Oi.HKDFError=void 0;var Pa=class t extends Error{constructor(e){super(e),Object.setPrototypeOf(this,t.prototype)}};Oi.HKDFError=Pa;var Ou=class t extends Pa{name="KeyLengthError";constructor(e,i){super("Can not derive keys larger than "+e+" for algorithm:"+i),Object.setPrototypeOf(this,t.prototype)}};Oi.KeyLengthError=Ou;var Du=class t extends Pa{name="UnsupportedAlgorithm";constructor(e){super("Hash algorithm: "+e+" is not an implemented algorithm"),Object.setPrototypeOf(this,t.prototype)}};Oi.UnsupportedAlgorithm=Du});var Lg=R(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});oo.HKDF=void 0;var Iu=require("crypto"),Ig=Pu();function sS(t="sha256"){let e=function(){try{return(0,Iu.createHash)(t).digest().length}catch{throw new Ig.UnsupportedAlgorithm(t)}}(),i=255*e;return r.extract=n,r.expand=a,r;function r(s,l){let p=n(s,l);return(y,x)=>a(p,y,x)}function n(s,l){let p=l||Buffer.alloc(e,0).toString();return(0,Iu.createHmac)(t,p).update(s).digest()}function a(s,l,p){if(l>i)throw new Ig.KeyLengthError(i,t);p=p||Buffer.alloc(0);let y=Math.ceil(l/e),x=[];for(let S=0;S<y;S++)x[S]=(0,Iu.createHmac)(t,s).update(x[S-1]||Buffer.alloc(0)).update(p).update(Buffer.alloc(1,S+1)).digest();return Buffer.concat(x,l)}}oo.HKDF=sS});var kg=R(Di=>{"use strict";var oS=Di&&Di.__createBinding||(Object.create?function(t,e,i,r){r===void 0&&(r=i);var n=Object.getOwnPropertyDescriptor(e,i);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,n)}:function(t,e,i,r){r===void 0&&(r=i),t[r]=e[i]}),Ng=Di&&Di.__exportStar||function(t,e){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&oS(e,t,i)};Object.defineProperty(Di,"__esModule",{value:!0});Ng(Lg(),Di);Ng(Pu(),Di)});var jg=R(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});ai.nodeKdf=ai.curryCryptoStream=ai.getDecryptionHelper=ai.getEncryptHelper=void 0;var it=Le(),vr=require("crypto"),Lu=kg(),qg=_t(),Nu=Object.freeze({sha256:(0,Lu.HKDF)("sha256"),sha384:(0,Lu.HKDF)("sha384"),sha512:(0,Lu.HKDF)("sha512")}),lS=t=>{(0,it.needs)(t.hasValidKey(),"Material has no unencrypted data key.");let{signatureHash:e}=t.suite,i=ku(t,vr.createCipheriv);return Object.freeze({getCipherInfo:i,getSigner:e?r:void 0,dispose:n});function r(){if((0,it.needs)(t.hasUnencryptedDataKey,"Unencrypted data key has been zeroed."),!e)throw new Error("Material does not support signature.");let{signatureKey:a}=t;if(!a)throw new Error("Material does not support signature.");let{privateKey:s}=a;if(typeof s!="string")throw new Error("Material does not support signature.");let l=Object.assign((0,vr.createSign)(e),{awsCryptoSign:()=>l.sign(s)});return l}function n(){t.zeroUnencryptedDataKey()}};ai.getEncryptHelper=lS;var cS=t=>{(0,it.needs)(t.hasValidKey(),"Material has no unencrypted data key.");let{signatureHash:e}=t.suite,i=ku(t,vr.createDecipheriv);return Object.freeze({getDecipherInfo:i,getVerify:e?r:void 0,dispose:n});function r(){if(!e)throw new Error("Material does not support signature.");let{verificationKey:a}=t;if(!a)throw new Error("Material does not support signature.");let s=Object.assign((0,vr.createVerify)(e),{awsCryptoVerify:l=>s.verify(a.publicKey,l)});return s}function n(){t.zeroUnencryptedDataKey()}};ai.getDecryptionHelper=cS;function ku(t,e){let{encryption:i,ivLength:r}=t.suite,n=t instanceof it.NodeEncryptionMaterial;return(0,it.needs)(n?vr.createCipheriv===e:t instanceof it.NodeDecryptionMaterial?vr.createDecipheriv===e:!1,"Unsupported cryptographic material."),(a,s)=>{let{derivedKey:l,keyCommitment:p}=Kg(t,a,s);return n?{getCipher:y,keyCommitment:p}:y;function y(x){return(0,it.needs)(x.byteLength===r,"Iv length does not match algorithm suite specification"),(0,it.needs)(t.hasUnencryptedDataKey,"Unencrypted data key has been zeroed."),e(i,l,x)}}}ai.curryCryptoStream=ku;function Kg(t,e,i){let r=t.getUnencryptedDataKey(),{kdf:n,kdfHash:a,keyLengthBytes:s,commitmentLength:l,saltLengthBytes:p,commitment:y,id:x}=t.suite;if(!n&&!a)return(0,it.needs)(!i,"Commitment not supported."),{derivedKey:r};(0,it.needs)(n==="HKDF"&&a&&Nu[a]&&e instanceof Uint8Array,"Invalid HKDF values.");let{buffer:S,byteOffset:M,byteLength:C}=(0,it.unwrapDataKey)(r);if(y==="NONE"){(0,it.needs)(!i,"Commitment not supported.");let De=Buffer.from(S,M,C),{buffer:Je,byteOffset:Ae,byteLength:tt}=(0,qg.kdfInfo)(x,e),A=Buffer.from(Je,Ae,tt),f=Nu[a](De)(s,A);return{derivedKey:(0,it.wrapWithKeyObjectIfSupported)(f)}}(0,it.needs)(y==="KEY"&&l&&p,"Malformed suite data."),(0,it.needs)(e.byteLength===p,"Nonce is not the correct length for committed algorithm suite.");let T=Buffer.from(S,M,C),O=Nu[a](T,e),{keyLabel:P,commitLabel:L}=(0,qg.kdfCommitKeyInfo)(t.suite),U=O(l/8,L),z=t instanceof it.NodeDecryptionMaterial;(0,it.needs)(z&&i&&(0,vr.timingSafeEqual)(U,i)||!z&&!i,z?"Commitment does not match.":"Invalid arguments.");let V=O(s,P);return{derivedKey:(0,it.wrapWithKeyObjectIfSupported)(V),keyCommitment:U}}ai.nodeKdf=Kg});var rt=R(j=>{"use strict";var uS=j&&j.__createBinding||(Object.create?function(t,e,i,r){r===void 0&&(r=i);var n=Object.getOwnPropertyDescriptor(e,i);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,n)}:function(t,e,i,r){r===void 0&&(r=i),t[r]=e[i]}),fS=j&&j.__exportStar||function(t,e){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&uS(e,t,i)};Object.defineProperty(j,"__esModule",{value:!0});j.MessageFormat=j.SignaturePolicy=j.SignaturePolicySuites=j.CommitmentPolicySuites=j.CommitmentPolicy=j.unwrapDataKey=j.readOnlyProperty=j.frozenClass=j.immutableClass=j.immutableBaseClass=j.MultiKeyringNode=j.KeyringNode=j.NotSupported=j.needs=j.KeyringTraceFlag=j.EncryptedDataKey=j.AlgorithmSuiteIdentifier=j.NodeAlgorithmSuite=j.NodeEncryptionMaterial=j.NodeDecryptionMaterial=j.getDecryptionHelper=j.getEncryptHelper=void 0;fS(Pg(),j);var Fg=jg();Object.defineProperty(j,"getEncryptHelper",{enumerable:!0,get:function(){return Fg.getEncryptHelper}});Object.defineProperty(j,"getDecryptionHelper",{enumerable:!0,get:function(){return Fg.getDecryptionHelper}});var Xe=Le();Object.defineProperty(j,"NodeDecryptionMaterial",{enumerable:!0,get:function(){return Xe.NodeDecryptionMaterial}});Object.defineProperty(j,"NodeEncryptionMaterial",{enumerable:!0,get:function(){return Xe.NodeEncryptionMaterial}});Object.defineProperty(j,"NodeAlgorithmSuite",{enumerable:!0,get:function(){return Xe.NodeAlgorithmSuite}});Object.defineProperty(j,"AlgorithmSuiteIdentifier",{enumerable:!0,get:function(){return Xe.AlgorithmSuiteIdentifier}});Object.defineProperty(j,"EncryptedDataKey",{enumerable:!0,get:function(){return Xe.EncryptedDataKey}});Object.defineProperty(j,"KeyringTraceFlag",{enumerable:!0,get:function(){return Xe.KeyringTraceFlag}});Object.defineProperty(j,"needs",{enumerable:!0,get:function(){return Xe.needs}});Object.defineProperty(j,"NotSupported",{enumerable:!0,get:function(){return Xe.NotSupported}});Object.defineProperty(j,"KeyringNode",{enumerable:!0,get:function(){return Xe.KeyringNode}});Object.defineProperty(j,"MultiKeyringNode",{enumerable:!0,get:function(){return Xe.MultiKeyringNode}});Object.defineProperty(j,"immutableBaseClass",{enumerable:!0,get:function(){return Xe.immutableBaseClass}});Object.defineProperty(j,"immutableClass",{enumerable:!0,get:function(){return Xe.immutableClass}});Object.defineProperty(j,"frozenClass",{enumerable:!0,get:function(){return Xe.frozenClass}});Object.defineProperty(j,"readOnlyProperty",{enumerable:!0,get:function(){return Xe.readOnlyProperty}});Object.defineProperty(j,"unwrapDataKey",{enumerable:!0,get:function(){return Xe.unwrapDataKey}});Object.defineProperty(j,"CommitmentPolicy",{enumerable:!0,get:function(){return Xe.CommitmentPolicy}});Object.defineProperty(j,"CommitmentPolicySuites",{enumerable:!0,get:function(){return Xe.CommitmentPolicySuites}});Object.defineProperty(j,"SignaturePolicySuites",{enumerable:!0,get:function(){return Xe.SignaturePolicySuites}});Object.defineProperty(j,"SignaturePolicy",{enumerable:!0,get:function(){return Xe.SignaturePolicy}});Object.defineProperty(j,"MessageFormat",{enumerable:!0,get:function(){return Xe.MessageFormat}})});var qu=R((BL,Hg)=>{Hg.exports=require("stream")});var Wg=R((UL,Vg)=>{"use strict";function Bg(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function Ug(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Bg(Object(i),!0).forEach(function(r){pS(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Bg(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function pS(t,e,i){return e=zg(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function dS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gg(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zg(r.key),r)}}function hS(t,e,i){return e&&Gg(t.prototype,e),i&&Gg(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function zg(t){var e=mS(t,"string");return typeof e=="symbol"?e:String(e)}function mS(t,e){if(typeof t!="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gS=require("buffer"),lo=gS.Buffer,yS=require("util"),Ku=yS.inspect,vS=Ku&&Ku.custom||"inspect";function _S(t,e,i){lo.prototype.copy.call(t,e,i)}Vg.exports=function(){function t(){dS(this,t),this.head=null,this.tail=null,this.length=0}return hS(t,[{key:"push",value:function(i){var r={data:i,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}},{key:"unshift",value:function(i){var r={data:i,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}},{key:"shift",value:function(){if(this.length!==0){var i=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,i}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(i){if(this.length===0)return"";for(var r=this.head,n=""+r.data;r=r.next;)n+=i+r.data;return n}},{key:"concat",value:function(i){if(this.length===0)return lo.alloc(0);for(var r=lo.allocUnsafe(i>>>0),n=this.head,a=0;n;)_S(n.data,r,a),a+=n.data.length,n=n.next;return r}},{key:"consume",value:function(i,r){var n;return i<this.head.data.length?(n=this.head.data.slice(0,i),this.head.data=this.head.data.slice(i)):i===this.head.data.length?n=this.shift():n=r?this._getString(i):this._getBuffer(i),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(i){var r=this.head,n=1,a=r.data;for(i-=a.length;r=r.next;){var s=r.data,l=i>s.length?s.length:i;if(l===s.length?a+=s:a+=s.slice(0,i),i-=l,i===0){l===s.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=s.slice(l));break}++n}return this.length-=n,a}},{key:"_getBuffer",value:function(i){var r=lo.allocUnsafe(i),n=this.head,a=1;for(n.data.copy(r),i-=n.data.length;n=n.next;){var s=n.data,l=i>s.length?s.length:i;if(s.copy(r,r.length-i,0,l),i-=l,i===0){l===s.length?(++a,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(l));break}++a}return this.length-=a,r}},{key:vS,value:function(i,r){return Ku(this,Ug(Ug({},r),{},{depth:0,customInspect:!1}))}}]),t}()});var Fu=R((GL,$g)=>{"use strict";function bS(t,e){var i=this,r=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return r||n?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(ju,this,t)):process.nextTick(ju,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(a){!e&&a?i._writableState?i._writableState.errorEmitted?process.nextTick(co,i):(i._writableState.errorEmitted=!0,process.nextTick(Yg,i,a)):process.nextTick(Yg,i,a):e?(process.nextTick(co,i),e(a)):process.nextTick(co,i)}),this)}function Yg(t,e){ju(t,e),co(t)}function co(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function xS(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function ju(t,e){t.emit("error",e)}function wS(t,e){var i=t._readableState,r=t._writableState;i&&i.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}$g.exports={destroy:bS,undestroy:xS,errorOrDestroy:wS}});var Pi=R((zL,Xg)=>{"use strict";var Qg={};function Lt(t,e,i){i||(i=Error);function r(a,s,l){return typeof e=="string"?e:e(a,s,l)}class n extends i{constructor(s,l,p){super(r(s,l,p))}}n.prototype.name=i.name,n.prototype.code=t,Qg[t]=n}function Zg(t,e){if(Array.isArray(t)){let i=t.length;return t=t.map(r=>String(r)),i>2?`one of ${e} ${t.slice(0,i-1).join(", ")}, or `+t[i-1]:i===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function ES(t,e,i){return t.substr(!i||i<0?0:+i,e.length)===e}function MS(t,e,i){return(i===void 0||i>t.length)&&(i=t.length),t.substring(i-e.length,i)===e}function SS(t,e,i){return typeof i!="number"&&(i=0),i+e.length>t.length?!1:t.indexOf(e,i)!==-1}Lt("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);Lt("ERR_INVALID_ARG_TYPE",function(t,e,i){let r;typeof e=="string"&&ES(e,"not ")?(r="must not be",e=e.replace(/^not /,"")):r="must be";let n;if(MS(t," argument"))n=`The ${t} ${r} ${Zg(e,"type")}`;else{let a=SS(t,".")?"property":"argument";n=`The "${t}" ${a} ${r} ${Zg(e,"type")}`}return n+=`. Received type ${typeof i}`,n},TypeError);Lt("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Lt("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});Lt("ERR_STREAM_PREMATURE_CLOSE","Premature close");Lt("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});Lt("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Lt("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Lt("ERR_STREAM_WRITE_AFTER_END","write after end");Lt("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Lt("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);Lt("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");Xg.exports.codes=Qg});var Hu=R((VL,Jg)=>{"use strict";var AS=Pi().codes.ERR_INVALID_OPT_VALUE;function TS(t,e,i){return t.highWaterMark!=null?t.highWaterMark:e?t[i]:null}function RS(t,e,i,r){var n=TS(e,r,i);if(n!=null){if(!(isFinite(n)&&Math.floor(n)===n)||n<0){var a=r?i:"highWaterMark";throw new AS(a,n)}return Math.floor(n)}return t.objectMode?16:16*1024}Jg.exports={getHighWaterMark:RS}});var uo=R((WL,ey)=>{ey.exports=require("util").deprecate});var Gu=R((YL,sy)=>{"use strict";sy.exports=We;function iy(t){var e=this;this.next=null,this.entry=null,this.finish=function(){tA(e,t)}}var vn;We.WritableState=La;var CS={deprecate:uo()},ry=qu(),po=require("buffer").Buffer,OS=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function DS(t){return po.from(t)}function PS(t){return po.isBuffer(t)||t instanceof OS}var Uu=Fu(),IS=Hu(),LS=IS.getHighWaterMark,Ii=Pi().codes,NS=Ii.ERR_INVALID_ARG_TYPE,kS=Ii.ERR_METHOD_NOT_IMPLEMENTED,qS=Ii.ERR_MULTIPLE_CALLBACK,KS=Ii.ERR_STREAM_CANNOT_PIPE,jS=Ii.ERR_STREAM_DESTROYED,FS=Ii.ERR_STREAM_NULL_VALUES,HS=Ii.ERR_STREAM_WRITE_AFTER_END,BS=Ii.ERR_UNKNOWN_ENCODING,_n=Uu.errorOrDestroy;Ve()(We,ry);function US(){}function La(t,e,i){vn=vn||_r(),t=t||{},typeof i!="boolean"&&(i=e instanceof vn),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=LS(this,t,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var r=t.decodeStrings===!1;this.decodeStrings=!r,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(n){ZS(e,n)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new iy(this)}La.prototype.getBuffer=function(){for(var e=this.bufferedRequest,i=[];e;)i.push(e),e=e.next;return i};(function(){try{Object.defineProperty(La.prototype,"buffer",{get:CS.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var fo;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(fo=Function.prototype[Symbol.hasInstance],Object.defineProperty(We,Symbol.hasInstance,{value:function(e){return fo.call(this,e)?!0:this!==We?!1:e&&e._writableState instanceof La}})):fo=function(e){return e instanceof this};function We(t){vn=vn||_r();var e=this instanceof vn;if(!e&&!fo.call(We,this))return new We(t);this._writableState=new La(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),ry.call(this)}We.prototype.pipe=function(){_n(this,new KS)};function GS(t,e){var i=new HS;_n(t,i),process.nextTick(e,i)}function zS(t,e,i,r){var n;return i===null?n=new FS:typeof i!="string"&&!e.objectMode&&(n=new NS("chunk",["string","Buffer"],i)),n?(_n(t,n),process.nextTick(r,n),!1):!0}We.prototype.write=function(t,e,i){var r=this._writableState,n=!1,a=!r.objectMode&&PS(t);return a&&!po.isBuffer(t)&&(t=DS(t)),typeof e=="function"&&(i=e,e=null),a?e="buffer":e||(e=r.defaultEncoding),typeof i!="function"&&(i=US),r.ending?GS(this,i):(a||zS(this,r,t,i))&&(r.pendingcb++,n=WS(this,r,a,t,e,i)),n};We.prototype.cork=function(){this._writableState.corked++};We.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&ny(this,t))};We.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new BS(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(We.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function VS(t,e,i){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=po.from(e,i)),e}Object.defineProperty(We.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function WS(t,e,i,r,n,a){if(!i){var s=VS(e,r,n);r!==s&&(i=!0,n="buffer",r=s)}var l=e.objectMode?1:r.length;e.length+=l;var p=e.length<e.highWaterMark;if(p||(e.needDrain=!0),e.writing||e.corked){var y=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:n,isBuf:i,callback:a,next:null},y?y.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Bu(t,e,!1,l,r,n,a);return p}function Bu(t,e,i,r,n,a,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new jS("write")):i?t._writev(n,e.onwrite):t._write(n,a,e.onwrite),e.sync=!1}function YS(t,e,i,r,n){--e.pendingcb,i?(process.nextTick(n,r),process.nextTick(Ia,t,e),t._writableState.errorEmitted=!0,_n(t,r)):(n(r),t._writableState.errorEmitted=!0,_n(t,r),Ia(t,e))}function $S(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function ZS(t,e){var i=t._writableState,r=i.sync,n=i.writecb;if(typeof n!="function")throw new qS;if($S(i),e)YS(t,i,r,e,n);else{var a=ay(i)||t.destroyed;!a&&!i.corked&&!i.bufferProcessing&&i.bufferedRequest&&ny(t,i),r?process.nextTick(ty,t,i,a,n):ty(t,i,a,n)}}function ty(t,e,i,r){i||QS(t,e),e.pendingcb--,r(),Ia(t,e)}function QS(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function ny(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var r=e.bufferedRequestCount,n=new Array(r),a=e.corkedRequestsFree;a.entry=i;for(var s=0,l=!0;i;)n[s]=i,i.isBuf||(l=!1),i=i.next,s+=1;n.allBuffers=l,Bu(t,e,!0,e.length,n,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new iy(e),e.bufferedRequestCount=0}else{for(;i;){var p=i.chunk,y=i.encoding,x=i.callback,S=e.objectMode?1:p.length;if(Bu(t,e,!1,S,p,y,x),i=i.next,e.bufferedRequestCount--,e.writing)break}i===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}We.prototype._write=function(t,e,i){i(new kS("_write()"))};We.prototype._writev=null;We.prototype.end=function(t,e,i){var r=this._writableState;return typeof t=="function"?(i=t,t=null,e=null):typeof e=="function"&&(i=e,e=null),t!=null&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||eA(this,r,i),this};Object.defineProperty(We.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ay(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function XS(t,e){t._final(function(i){e.pendingcb--,i&&_n(t,i),e.prefinished=!0,t.emit("prefinish"),Ia(t,e)})}function JS(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(XS,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Ia(t,e){var i=ay(e);if(i&&(JS(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var r=t._readableState;(!r||r.autoDestroy&&r.endEmitted)&&t.destroy()}return i}function eA(t,e,i){e.ending=!0,Ia(t,e),i&&(e.finished?process.nextTick(i):t.once("finish",i)),e.ended=!0,t.writable=!1}function tA(t,e,i){var r=t.entry;for(t.entry=null;r;){var n=r.callback;e.pendingcb--,n(i),r=r.next}e.corkedRequestsFree.next=t}Object.defineProperty(We.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});We.prototype.destroy=Uu.destroy;We.prototype._undestroy=Uu.undestroy;We.prototype._destroy=function(t,e){e(t)}});var _r=R(($L,ly)=>{"use strict";var iA=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};ly.exports=si;var oy=Wu(),Vu=Gu();Ve()(si,oy);for(zu=iA(Vu.prototype),ho=0;ho<zu.length;ho++)mo=zu[ho],si.prototype[mo]||(si.prototype[mo]=Vu.prototype[mo]);var zu,mo,ho;function si(t){if(!(this instanceof si))return new si(t);oy.call(this,t),Vu.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",rA)))}Object.defineProperty(si.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(si.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(si.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function rA(){this._writableState.ended||process.nextTick(nA,this)}function nA(t){t.end()}Object.defineProperty(si.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var go=R((ZL,fy)=>{"use strict";var cy=Pi().codes.ERR_STREAM_PREMATURE_CLOSE;function aA(t){var e=!1;return function(){if(!e){e=!0;for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];t.apply(this,r)}}}function sA(){}function oA(t){return t.setHeader&&typeof t.abort=="function"}function uy(t,e,i){if(typeof e=="function")return uy(t,null,e);e||(e={}),i=aA(i||sA);var r=e.readable||e.readable!==!1&&t.readable,n=e.writable||e.writable!==!1&&t.writable,a=function(){t.writable||l()},s=t._writableState&&t._writableState.finished,l=function(){n=!1,s=!0,r||i.call(t)},p=t._readableState&&t._readableState.endEmitted,y=function(){r=!1,p=!0,n||i.call(t)},x=function(T){i.call(t,T)},S=function(){var T;if(r&&!p)return(!t._readableState||!t._readableState.ended)&&(T=new cy),i.call(t,T);if(n&&!s)return(!t._writableState||!t._writableState.ended)&&(T=new cy),i.call(t,T)},M=function(){t.req.on("finish",l)};return oA(t)?(t.on("complete",l),t.on("abort",S),t.req?M():t.on("request",M)):n&&!t._writableState&&(t.on("end",a),t.on("close",a)),t.on("end",y),t.on("finish",l),e.error!==!1&&t.on("error",x),t.on("close",S),function(){t.removeListener("complete",l),t.removeListener("abort",S),t.removeListener("request",M),t.req&&t.req.removeListener("finish",l),t.removeListener("end",a),t.removeListener("close",a),t.removeListener("finish",l),t.removeListener("end",y),t.removeListener("error",x),t.removeListener("close",S)}}fy.exports=uy});var dy=R((QL,py)=>{"use strict";var yo;function Li(t,e,i){return e=lA(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function lA(t){var e=cA(t,"string");return typeof e=="symbol"?e:String(e)}function cA(t,e){if(typeof t!="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uA=go(),Ni=Symbol("lastResolve"),br=Symbol("lastReject"),Na=Symbol("error"),vo=Symbol("ended"),xr=Symbol("lastPromise"),Yu=Symbol("handlePromise"),wr=Symbol("stream");function ki(t,e){return{value:t,done:e}}function fA(t){var e=t[Ni];if(e!==null){var i=t[wr].read();i!==null&&(t[xr]=null,t[Ni]=null,t[br]=null,e(ki(i,!1)))}}function pA(t){process.nextTick(fA,t)}function dA(t,e){return function(i,r){t.then(function(){if(e[vo]){i(ki(void 0,!0));return}e[Yu](i,r)},r)}}var hA=Object.getPrototypeOf(function(){}),mA=Object.setPrototypeOf((yo={get stream(){return this[wr]},next:function(){var e=this,i=this[Na];if(i!==null)return Promise.reject(i);if(this[vo])return Promise.resolve(ki(void 0,!0));if(this[wr].destroyed)return new Promise(function(s,l){process.nextTick(function(){e[Na]?l(e[Na]):s(ki(void 0,!0))})});var r=this[xr],n;if(r)n=new Promise(dA(r,this));else{var a=this[wr].read();if(a!==null)return Promise.resolve(ki(a,!1));n=new Promise(this[Yu])}return this[xr]=n,n}},Li(yo,Symbol.asyncIterator,function(){return this}),Li(yo,"return",function(){var e=this;return new Promise(function(i,r){e[wr].destroy(null,function(n){if(n){r(n);return}i(ki(void 0,!0))})})}),yo),hA),gA=function(e){var i,r=Object.create(mA,(i={},Li(i,wr,{value:e,writable:!0}),Li(i,Ni,{value:null,writable:!0}),Li(i,br,{value:null,writable:!0}),Li(i,Na,{value:null,writable:!0}),Li(i,vo,{value:e._readableState.endEmitted,writable:!0}),Li(i,Yu,{value:function(a,s){var l=r[wr].read();l?(r[xr]=null,r[Ni]=null,r[br]=null,a(ki(l,!1))):(r[Ni]=a,r[br]=s)},writable:!0}),i));return r[xr]=null,uA(e,function(n){if(n&&n.code!=="ERR_STREAM_PREMATURE_CLOSE"){var a=r[br];a!==null&&(r[xr]=null,r[Ni]=null,r[br]=null,a(n)),r[Na]=n;return}var s=r[Ni];s!==null&&(r[xr]=null,r[Ni]=null,r[br]=null,s(ki(void 0,!0))),r[vo]=!0}),e.on("readable",pA.bind(null,r)),r};py.exports=gA});var yy=R((XL,gy)=>{"use strict";function hy(t,e,i,r,n,a,s){try{var l=t[a](s),p=l.value}catch(y){i(y);return}l.done?e(p):Promise.resolve(p).then(r,n)}function yA(t){return function(){var e=this,i=arguments;return new Promise(function(r,n){var a=t.apply(e,i);function s(p){hy(a,r,n,s,l,"next",p)}function l(p){hy(a,r,n,s,l,"throw",p)}s(void 0)})}}function my(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function vA(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?my(Object(i),!0).forEach(function(r){_A(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):my(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function _A(t,e,i){return e=bA(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function bA(t){var e=xA(t,"string");return typeof e=="symbol"?e:String(e)}function xA(t,e){if(typeof t!="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wA=Pi().codes.ERR_INVALID_ARG_TYPE;function EA(t,e,i){var r;if(e&&typeof e.next=="function")r=e;else if(e&&e[Symbol.asyncIterator])r=e[Symbol.asyncIterator]();else if(e&&e[Symbol.iterator])r=e[Symbol.iterator]();else throw new wA("iterable",["Iterable"],e);var n=new t(vA({objectMode:!0},i)),a=!1;n._read=function(){a||(a=!0,s())};function s(){return l.apply(this,arguments)}function l(){return l=yA(function*(){try{var p=yield r.next(),y=p.value,x=p.done;x?n.push(null):n.push(yield y)?s():a=!1}catch(S){n.destroy(S)}}),l.apply(this,arguments)}return n}gy.exports=EA});var Wu=R((eN,Ty)=>{"use strict";Ty.exports=Ne;var bn;Ne.ReadableState=xy;var JL=require("events").EventEmitter,by=function(e,i){return e.listeners(i).length},qa=qu(),_o=require("buffer").Buffer,MA=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function SA(t){return _o.from(t)}function AA(t){return _o.isBuffer(t)||t instanceof MA}var $u=require("util"),Re;$u&&$u.debuglog?Re=$u.debuglog("stream"):Re=function(){};var TA=Wg(),rf=Fu(),RA=Hu(),CA=RA.getHighWaterMark,bo=Pi().codes,OA=bo.ERR_INVALID_ARG_TYPE,DA=bo.ERR_STREAM_PUSH_AFTER_EOF,PA=bo.ERR_METHOD_NOT_IMPLEMENTED,IA=bo.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,xn,Zu,Qu;Ve()(Ne,qa);var ka=rf.errorOrDestroy,Xu=["error","close","destroy","pause","resume"];function LA(t,e,i){if(typeof t.prependListener=="function")return t.prependListener(e,i);!t._events||!t._events[e]?t.on(e,i):Array.isArray(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]}function xy(t,e,i){bn=bn||_r(),t=t||{},typeof i!="boolean"&&(i=e instanceof bn),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=CA(this,t,"readableHighWaterMark",i),this.buffer=new TA,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(xn||(xn=require("string_decoder/").StringDecoder),this.decoder=new xn(t.encoding),this.encoding=t.encoding)}function Ne(t){if(bn=bn||_r(),!(this instanceof Ne))return new Ne(t);var e=this instanceof bn;this._readableState=new xy(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),qa.call(this)}Object.defineProperty(Ne.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});Ne.prototype.destroy=rf.destroy;Ne.prototype._undestroy=rf.undestroy;Ne.prototype._destroy=function(t,e){e(t)};Ne.prototype.push=function(t,e){var i=this._readableState,r;return i.objectMode?r=!0:typeof t=="string"&&(e=e||i.defaultEncoding,e!==i.encoding&&(t=_o.from(t,e),e=""),r=!0),wy(this,t,e,!1,r)};Ne.prototype.unshift=function(t){return wy(this,t,null,!0,!1)};function wy(t,e,i,r,n){Re("readableAddChunk",e);var a=t._readableState;if(e===null)a.reading=!1,qA(t,a);else{var s;if(n||(s=NA(a,e)),s)ka(t,s);else if(a.objectMode||e&&e.length>0)if(typeof e!="string"&&!a.objectMode&&Object.getPrototypeOf(e)!==_o.prototype&&(e=SA(e)),r)a.endEmitted?ka(t,new IA):Ju(t,a,e,!0);else if(a.ended)ka(t,new DA);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!i?(e=a.decoder.write(e),a.objectMode||e.length!==0?Ju(t,a,e,!1):tf(t,a)):Ju(t,a,e,!1)}else r||(a.reading=!1,tf(t,a))}return!a.ended&&(a.length<a.highWaterMark||a.length===0)}function Ju(t,e,i,r){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",i)):(e.length+=e.objectMode?1:i.length,r?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&xo(t)),tf(t,e)}function NA(t,e){var i;return!AA(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(i=new OA("chunk",["string","Buffer","Uint8Array"],e)),i}Ne.prototype.isPaused=function(){return this._readableState.flowing===!1};Ne.prototype.setEncoding=function(t){xn||(xn=require("string_decoder/").StringDecoder);var e=new xn(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,r="";i!==null;)r+=e.write(i.data),i=i.next;return this._readableState.buffer.clear(),r!==""&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var vy=1073741824;function kA(t){return t>=vy?t=vy:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function _y(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=kA(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Ne.prototype.read=function(t){Re("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Re("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?ef(this):xo(this),null;if(t=_y(t,e),t===0&&e.ended)return e.length===0&&ef(this),null;var r=e.needReadable;Re("need readable",r),(e.length===0||e.length-t<e.highWaterMark)&&(r=!0,Re("length less than watermark",r)),e.ended||e.reading?(r=!1,Re("reading or ended",r)):r&&(Re("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=_y(i,e)));var n;return t>0?n=Sy(t,e):n=null,n===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&ef(this)),n!==null&&this.emit("data",n),n};function qA(t,e){if(Re("onEofChunk"),!e.ended){if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,e.sync?xo(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,Ey(t)))}}function xo(t){var e=t._readableState;Re("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Re("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(Ey,t))}function Ey(t){var e=t._readableState;Re("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,nf(t)}function tf(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(KA,t,e))}function KA(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var i=e.length;if(Re("maybeReadMore read 0"),t.read(0),i===e.length)break}e.readingMore=!1}Ne.prototype._read=function(t){ka(this,new PA("_read()"))};Ne.prototype.pipe=function(t,e){var i=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t);break}r.pipesCount+=1,Re("pipe count=%d opts=%j",r.pipesCount,e);var n=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,a=n?l:O;r.endEmitted?process.nextTick(a):i.once("end",a),t.on("unpipe",s);function s(P,L){Re("onunpipe"),P===i&&L&&L.hasUnpiped===!1&&(L.hasUnpiped=!0,x())}function l(){Re("onend"),t.end()}var p=jA(i);t.on("drain",p);var y=!1;function x(){Re("cleanup"),t.removeListener("close",C),t.removeListener("finish",T),t.removeListener("drain",p),t.removeListener("error",M),t.removeListener("unpipe",s),i.removeListener("end",l),i.removeListener("end",O),i.removeListener("data",S),y=!0,r.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&p()}i.on("data",S);function S(P){Re("ondata");var L=t.write(P);Re("dest.write",L),L===!1&&((r.pipesCount===1&&r.pipes===t||r.pipesCount>1&&Ay(r.pipes,t)!==-1)&&!y&&(Re("false write response, pause",r.awaitDrain),r.awaitDrain++),i.pause())}function M(P){Re("onerror",P),O(),t.removeListener("error",M),by(t,"error")===0&&ka(t,P)}LA(t,"error",M);function C(){t.removeListener("finish",T),O()}t.once("close",C);function T(){Re("onfinish"),t.removeListener("close",C),O()}t.once("finish",T);function O(){Re("unpipe"),i.unpipe(t)}return t.emit("pipe",i),r.flowing||(Re("pipe resume"),i.resume()),t};function jA(t){return function(){var i=t._readableState;Re("pipeOnDrain",i.awaitDrain),i.awaitDrain&&i.awaitDrain--,i.awaitDrain===0&&by(t,"data")&&(i.flowing=!0,nf(t))}}Ne.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i),this);if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var a=0;a<n;a++)r[a].emit("unpipe",this,{hasUnpiped:!1});return this}var s=Ay(e.pipes,t);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i),this)};Ne.prototype.on=function(t,e){var i=qa.prototype.on.call(this,t,e),r=this._readableState;return t==="data"?(r.readableListening=this.listenerCount("readable")>0,r.flowing!==!1&&this.resume()):t==="readable"&&!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,Re("on readable",r.length,r.reading),r.length?xo(this):r.reading||process.nextTick(FA,this)),i};Ne.prototype.addListener=Ne.prototype.on;Ne.prototype.removeListener=function(t,e){var i=qa.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(My,this),i};Ne.prototype.removeAllListeners=function(t){var e=qa.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(My,this),e};function My(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function FA(t){Re("readable nexttick read 0"),t.read(0)}Ne.prototype.resume=function(){var t=this._readableState;return t.flowing||(Re("resume"),t.flowing=!t.readableListening,HA(this,t)),t.paused=!1,this};function HA(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(BA,t,e))}function BA(t,e){Re("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),nf(t),e.flowing&&!e.reading&&t.read(0)}Ne.prototype.pause=function(){return Re("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Re("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function nf(t){var e=t._readableState;for(Re("flow",e.flowing);e.flowing&&t.read()!==null;);}Ne.prototype.wrap=function(t){var e=this,i=this._readableState,r=!1;t.on("end",function(){if(Re("wrapped end"),i.decoder&&!i.ended){var s=i.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),t.on("data",function(s){if(Re("wrapped data"),i.decoder&&(s=i.decoder.write(s)),!(i.objectMode&&s==null)&&!(!i.objectMode&&(!s||!s.length))){var l=e.push(s);l||(r=!0,t.pause())}});for(var n in t)this[n]===void 0&&typeof t[n]=="function"&&(this[n]=function(l){return function(){return t[l].apply(t,arguments)}}(n));for(var a=0;a<Xu.length;a++)t.on(Xu[a],this.emit.bind(this,Xu[a]));return this._read=function(s){Re("wrapped _read",s),r&&(r=!1,t.resume())},this};typeof Symbol=="function"&&(Ne.prototype[Symbol.asyncIterator]=function(){return Zu===void 0&&(Zu=dy()),Zu(this)});Object.defineProperty(Ne.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Ne.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Ne.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});Ne._fromList=Sy;Object.defineProperty(Ne.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Sy(t,e){if(e.length===0)return null;var i;return e.objectMode?i=e.buffer.shift():!t||t>=e.length?(e.decoder?i=e.buffer.join(""):e.buffer.length===1?i=e.buffer.first():i=e.buffer.concat(e.length),e.buffer.clear()):i=e.buffer.consume(t,e.decoder),i}function ef(t){var e=t._readableState;Re("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(UA,e,t))}function UA(t,e){if(Re("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var i=e._writableState;(!i||i.autoDestroy&&i.finished)&&e.destroy()}}typeof Symbol=="function"&&(Ne.from=function(t,e){return Qu===void 0&&(Qu=yy()),Qu(Ne,t,e)});function Ay(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}});var af=R((tN,Cy)=>{"use strict";Cy.exports=vi;var wo=Pi().codes,GA=wo.ERR_METHOD_NOT_IMPLEMENTED,zA=wo.ERR_MULTIPLE_CALLBACK,VA=wo.ERR_TRANSFORM_ALREADY_TRANSFORMING,WA=wo.ERR_TRANSFORM_WITH_LENGTH_0,Eo=_r();Ve()(vi,Eo);function YA(t,e){var i=this._transformState;i.transforming=!1;var r=i.writecb;if(r===null)return this.emit("error",new zA);i.writechunk=null,i.writecb=null,e!=null&&this.push(e),r(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function vi(t){if(!(this instanceof vi))return new vi(t);Eo.call(this,t),this._transformState={afterTransform:YA.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",$A)}function $A(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,i){Ry(t,e,i)}):Ry(this,null,null)}vi.prototype.push=function(t,e){return this._transformState.needTransform=!1,Eo.prototype.push.call(this,t,e)};vi.prototype._transform=function(t,e,i){i(new GA("_transform()"))};vi.prototype._write=function(t,e,i){var r=this._transformState;if(r.writecb=i,r.writechunk=t,r.writeencoding=e,!r.transforming){var n=this._readableState;(r.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}};vi.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};vi.prototype._destroy=function(t,e){Eo.prototype._destroy.call(this,t,function(i){e(i)})};function Ry(t,e,i){if(e)return t.emit("error",e);if(i!=null&&t.push(i),t._writableState.length)throw new WA;if(t._transformState.transforming)throw new VA;return t.push(null)}});var Py=R((iN,Dy)=>{"use strict";Dy.exports=Ka;var Oy=af();Ve()(Ka,Oy);function Ka(t){if(!(this instanceof Ka))return new Ka(t);Oy.call(this,t)}Ka.prototype._transform=function(t,e,i){i(null,t)}});var qy=R((rN,ky)=>{"use strict";var sf;function ZA(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var Ny=Pi().codes,QA=Ny.ERR_MISSING_ARGS,XA=Ny.ERR_STREAM_DESTROYED;function Iy(t){if(t)throw t}function JA(t){return t.setHeader&&typeof t.abort=="function"}function e1(t,e,i,r){r=ZA(r);var n=!1;t.on("close",function(){n=!0}),sf===void 0&&(sf=go()),sf(t,{readable:e,writable:i},function(s){if(s)return r(s);n=!0,r()});var a=!1;return function(s){if(!n&&!a){if(a=!0,JA(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();r(s||new XA("pipe"))}}}function Ly(t){t()}function t1(t,e){return t.pipe(e)}function i1(t){return!t.length||typeof t[t.length-1]!="function"?Iy:t.pop()}function r1(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var r=i1(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new QA("streams");var n,a=e.map(function(s,l){var p=l<e.length-1,y=l>0;return e1(s,p,y,function(x){n||(n=x),x&&a.forEach(Ly),!p&&(a.forEach(Ly),r(n))})});return e.reduce(t1)}ky.exports=r1});var Mo=R((Nt,Fa)=>{var ja=require("stream");process.env.READABLE_STREAM==="disable"&&ja?(Fa.exports=ja.Readable,Object.assign(Fa.exports,ja),Fa.exports.Stream=ja):(Nt=Fa.exports=Wu(),Nt.Stream=ja||Nt,Nt.Readable=Nt,Nt.Writable=Gu(),Nt.Duplex=_r(),Nt.Transform=af(),Nt.PassThrough=Py(),Nt.finished=go(),Nt.pipeline=qy())});var By=R(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});wn.getEncryptFrame=wn.getFramedEncryptStream=void 0;var lf=_t(),n1=Mo(),So=rt(),Fy=t=>Buffer.from(t,"utf8"),Hy=(0,lf.serializeFactory)(Fy),{finalFrameHeader:a1,frameHeader:s1}=Hy,Ky=(0,lf.aadFactory)(Fy),o1=n1.Transform,l1=async()=>new Promise(t=>setImmediate(t)),jy=()=>{};function c1(t,e,i,{plaintextLength:r,suite:n}){let a={contentLength:0,content:[],sequenceNumber:1},s=jy,{frameLength:l}=e;return(0,So.needs)(!r||r>=0&&lf.Maximum.BYTES_PER_MESSAGE>=r,"plaintextLength out of bounds."),new class extends o1{_transform(y,x,S){let M=l-a.contentLength;if((0,So.needs)(!r||(r-=y.length)>=0,"Encrypted data exceeded plaintextLength."),M>y.length)return a.contentLength+=y.length,a.content.push(y),S();a.contentLength+=M,a.content.push(y.slice(0,M));let C=y.slice(M),T=of({pendingFrame:a,messageHeader:e,getCipher:t,isFinalFrame:!1,suite:n}),{sequenceNumber:O}=a;a={contentLength:0,content:[],sequenceNumber:O+1},this._flushEncryptFrame(T).then(()=>this._transform(C,x,S)).catch(S)}_flush(y){let x=of({pendingFrame:a,messageHeader:e,getCipher:t,isFinalFrame:!0,suite:n});this._flushEncryptFrame(x).then(()=>y()).catch(y)}_destroy(){i()}_read(y){super._read(y),s(),s=jy}async _flushEncryptFrame(y){let{content:x,cipher:S,bodyHeader:M,isFinalFrame:C}=y;this.push(M);let T=0,O=[];for(let L of x){let U=S.update(L);T+=U.length,O.push(U),await l1()}let P=S.final();T+=P.length,O.push(P),O.push(S.getAuthTag()),(0,So.needs)(T===l||C&&l>=T,"Malformed frame");for(let L of O)this.push(L)||await new Promise(U=>{s=U});C&&this.push(null)}}}wn.getFramedEncryptStream=c1;function of(t){let{pendingFrame:e,messageHeader:i,getCipher:r,isFinalFrame:n,suite:a}=t,{sequenceNumber:s,contentLength:l,content:p}=e,{frameLength:y,contentType:x,messageId:S}=i;(0,So.needs)(y===l||n&&y>=l,`Malformed frame length and content length: ${JSON.stringify({frameLength:y,contentLength:l,isFinalFrame:n})}`);let M=Hy.frameIv(a.ivLength,s),C=Buffer.from(n?a1(s,M,l):s1(s,M)),T=Ky.messageAADContentString({contentType:x,isFinalFrame:n}),{buffer:O,byteOffset:P,byteLength:L}=Ky.messageAAD(S,T,s,l),U=r(M);return U.setAAD(Buffer.from(O,P,L)),{content:p,cipher:U,bodyHeader:C,isFinalFrame:n}}wn.getEncryptFrame=of});var Uy=R(Ao=>{"use strict";Object.defineProperty(Ao,"__esModule",{value:!0});Ao.SignatureStream=void 0;var u1=require("stream"),f1=_t(),cf=class extends u1.Transform{_signer;constructor(e){super();let i=e&&e();Object.defineProperty(this,"_signer",{value:i,enumerable:!0})}_transform(e,i,r){this._signer&&this._signer.update(e),r(null,e)}_flush(e){if(this._signer){let i=this._signer.awsCryptoSign();this.push((0,f1.serializeSignatureInfo)(i))}e()}};Ao.SignatureStream=cf});var uf=R((oN,Gy)=>{Gy.exports=require("stream")});var Zy=R((lN,$y)=>{"use strict";function zy(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function Vy(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?zy(Object(i),!0).forEach(function(r){p1(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):zy(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function p1(t,e,i){return e=Yy(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function d1(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wy(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Yy(r.key),r)}}function h1(t,e,i){return e&&Wy(t.prototype,e),i&&Wy(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Yy(t){var e=m1(t,"string");return typeof e=="symbol"?e:String(e)}function m1(t,e){if(typeof t!="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var g1=require("buffer"),To=g1.Buffer,y1=require("util"),ff=y1.inspect,v1=ff&&ff.custom||"inspect";function _1(t,e,i){To.prototype.copy.call(t,e,i)}$y.exports=function(){function t(){d1(this,t),this.head=null,this.tail=null,this.length=0}return h1(t,[{key:"push",value:function(i){var r={data:i,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}},{key:"unshift",value:function(i){var r={data:i,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}},{key:"shift",value:function(){if(this.length!==0){var i=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,i}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(i){if(this.length===0)return"";for(var r=this.head,n=""+r.data;r=r.next;)n+=i+r.data;return n}},{key:"concat",value:function(i){if(this.length===0)return To.alloc(0);for(var r=To.allocUnsafe(i>>>0),n=this.head,a=0;n;)_1(n.data,r,a),a+=n.data.length,n=n.next;return r}},{key:"consume",value:function(i,r){var n;return i<this.head.data.length?(n=this.head.data.slice(0,i),this.head.data=this.head.data.slice(i)):i===this.head.data.length?n=this.shift():n=r?this._getString(i):this._getBuffer(i),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(i){var r=this.head,n=1,a=r.data;for(i-=a.length;r=r.next;){var s=r.data,l=i>s.length?s.length:i;if(l===s.length?a+=s:a+=s.slice(0,i),i-=l,i===0){l===s.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=s.slice(l));break}++n}return this.length-=n,a}},{key:"_getBuffer",value:function(i){var r=To.allocUnsafe(i),n=this.head,a=1;for(n.data.copy(r),i-=n.data.length;n=n.next;){var s=n.data,l=i>s.length?s.length:i;if(s.copy(r,r.length-i,0,l),i-=l,i===0){l===s.length?(++a,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(l));break}++a}return this.length-=a,r}},{key:v1,value:function(i,r){return ff(this,Vy(Vy({},r),{},{depth:0,customInspect:!1}))}}]),t}()});var df=R((cN,Xy)=>{"use strict";function b1(t,e){var i=this,r=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return r||n?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(pf,this,t)):process.nextTick(pf,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(a){!e&&a?i._writableState?i._writableState.errorEmitted?process.nextTick(Ro,i):(i._writableState.errorEmitted=!0,process.nextTick(Qy,i,a)):process.nextTick(Qy,i,a):e?(process.nextTick(Ro,i),e(a)):process.nextTick(Ro,i)}),this)}function Qy(t,e){pf(t,e),Ro(t)}function Ro(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function x1(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function pf(t,e){t.emit("error",e)}function w1(t,e){var i=t._readableState,r=t._writableState;i&&i.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}Xy.exports={destroy:b1,undestroy:x1,errorOrDestroy:w1}});var qi=R((uN,t0)=>{"use strict";var e0={};function kt(t,e,i){i||(i=Error);function r(a,s,l){return typeof e=="string"?e:e(a,s,l)}class n extends i{constructor(s,l,p){super(r(s,l,p))}}n.prototype.name=i.name,n.prototype.code=t,e0[t]=n}function Jy(t,e){if(Array.isArray(t)){let i=t.length;return t=t.map(r=>String(r)),i>2?`one of ${e} ${t.slice(0,i-1).join(", ")}, or `+t[i-1]:i===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function E1(t,e,i){return t.substr(!i||i<0?0:+i,e.length)===e}function M1(t,e,i){return(i===void 0||i>t.length)&&(i=t.length),t.substring(i-e.length,i)===e}function S1(t,e,i){return typeof i!="number"&&(i=0),i+e.length>t.length?!1:t.indexOf(e,i)!==-1}kt("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);kt("ERR_INVALID_ARG_TYPE",function(t,e,i){let r;typeof e=="string"&&E1(e,"not ")?(r="must not be",e=e.replace(/^not /,"")):r="must be";let n;if(M1(t," argument"))n=`The ${t} ${r} ${Jy(e,"type")}`;else{let a=S1(t,".")?"property":"argument";n=`The "${t}" ${a} ${r} ${Jy(e,"type")}`}return n+=`. Received type ${typeof i}`,n},TypeError);kt("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");kt("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});kt("ERR_STREAM_PREMATURE_CLOSE","Premature close");kt("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});kt("ERR_MULTIPLE_CALLBACK","Callback called multiple times");kt("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");kt("ERR_STREAM_WRITE_AFTER_END","write after end");kt("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);kt("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);kt("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");t0.exports.codes=e0});var hf=R((fN,i0)=>{"use strict";var A1=qi().codes.ERR_INVALID_OPT_VALUE;function T1(t,e,i){return t.highWaterMark!=null?t.highWaterMark:e?t[i]:null}function R1(t,e,i,r){var n=T1(e,r,i);if(n!=null){if(!(isFinite(n)&&Math.floor(n)===n)||n<0){var a=r?i:"highWaterMark";throw new A1(a,n)}return Math.floor(n)}return t.objectMode?16:16*1024}i0.exports={getHighWaterMark:R1}});var yf=R((pN,l0)=>{"use strict";l0.exports=Ye;function n0(t){var e=this;this.next=null,this.entry=null,this.finish=function(){tT(e,t)}}var En;Ye.WritableState=Ba;var C1={deprecate:uo()},a0=uf(),Oo=require("buffer").Buffer,O1=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function D1(t){return Oo.from(t)}function P1(t){return Oo.isBuffer(t)||t instanceof O1}var gf=df(),I1=hf(),L1=I1.getHighWaterMark,Ki=qi().codes,N1=Ki.ERR_INVALID_ARG_TYPE,k1=Ki.ERR_METHOD_NOT_IMPLEMENTED,q1=Ki.ERR_MULTIPLE_CALLBACK,K1=Ki.ERR_STREAM_CANNOT_PIPE,j1=Ki.ERR_STREAM_DESTROYED,F1=Ki.ERR_STREAM_NULL_VALUES,H1=Ki.ERR_STREAM_WRITE_AFTER_END,B1=Ki.ERR_UNKNOWN_ENCODING,Mn=gf.errorOrDestroy;Ve()(Ye,a0);function U1(){}function Ba(t,e,i){En=En||Er(),t=t||{},typeof i!="boolean"&&(i=e instanceof En),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=L1(this,t,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var r=t.decodeStrings===!1;this.decodeStrings=!r,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(n){Z1(e,n)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n0(this)}Ba.prototype.getBuffer=function(){for(var e=this.bufferedRequest,i=[];e;)i.push(e),e=e.next;return i};(function(){try{Object.defineProperty(Ba.prototype,"buffer",{get:C1.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Co;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Co=Function.prototype[Symbol.hasInstance],Object.defineProperty(Ye,Symbol.hasInstance,{value:function(e){return Co.call(this,e)?!0:this!==Ye?!1:e&&e._writableState instanceof Ba}})):Co=function(e){return e instanceof this};function Ye(t){En=En||Er();var e=this instanceof En;if(!e&&!Co.call(Ye,this))return new Ye(t);this._writableState=new Ba(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),a0.call(this)}Ye.prototype.pipe=function(){Mn(this,new K1)};function G1(t,e){var i=new H1;Mn(t,i),process.nextTick(e,i)}function z1(t,e,i,r){var n;return i===null?n=new F1:typeof i!="string"&&!e.objectMode&&(n=new N1("chunk",["string","Buffer"],i)),n?(Mn(t,n),process.nextTick(r,n),!1):!0}Ye.prototype.write=function(t,e,i){var r=this._writableState,n=!1,a=!r.objectMode&&P1(t);return a&&!Oo.isBuffer(t)&&(t=D1(t)),typeof e=="function"&&(i=e,e=null),a?e="buffer":e||(e=r.defaultEncoding),typeof i!="function"&&(i=U1),r.ending?G1(this,i):(a||z1(this,r,t,i))&&(r.pendingcb++,n=W1(this,r,a,t,e,i)),n};Ye.prototype.cork=function(){this._writableState.corked++};Ye.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&s0(this,t))};Ye.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new B1(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(Ye.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function V1(t,e,i){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Oo.from(e,i)),e}Object.defineProperty(Ye.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function W1(t,e,i,r,n,a){if(!i){var s=V1(e,r,n);r!==s&&(i=!0,n="buffer",r=s)}var l=e.objectMode?1:r.length;e.length+=l;var p=e.length<e.highWaterMark;if(p||(e.needDrain=!0),e.writing||e.corked){var y=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:n,isBuf:i,callback:a,next:null},y?y.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else mf(t,e,!1,l,r,n,a);return p}function mf(t,e,i,r,n,a,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new j1("write")):i?t._writev(n,e.onwrite):t._write(n,a,e.onwrite),e.sync=!1}function Y1(t,e,i,r,n){--e.pendingcb,i?(process.nextTick(n,r),process.nextTick(Ha,t,e),t._writableState.errorEmitted=!0,Mn(t,r)):(n(r),t._writableState.errorEmitted=!0,Mn(t,r),Ha(t,e))}function $1(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function Z1(t,e){var i=t._writableState,r=i.sync,n=i.writecb;if(typeof n!="function")throw new q1;if($1(i),e)Y1(t,i,r,e,n);else{var a=o0(i)||t.destroyed;!a&&!i.corked&&!i.bufferProcessing&&i.bufferedRequest&&s0(t,i),r?process.nextTick(r0,t,i,a,n):r0(t,i,a,n)}}function r0(t,e,i,r){i||Q1(t,e),e.pendingcb--,r(),Ha(t,e)}function Q1(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function s0(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var r=e.bufferedRequestCount,n=new Array(r),a=e.corkedRequestsFree;a.entry=i;for(var s=0,l=!0;i;)n[s]=i,i.isBuf||(l=!1),i=i.next,s+=1;n.allBuffers=l,mf(t,e,!0,e.length,n,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new n0(e),e.bufferedRequestCount=0}else{for(;i;){var p=i.chunk,y=i.encoding,x=i.callback,S=e.objectMode?1:p.length;if(mf(t,e,!1,S,p,y,x),i=i.next,e.bufferedRequestCount--,e.writing)break}i===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}Ye.prototype._write=function(t,e,i){i(new k1("_write()"))};Ye.prototype._writev=null;Ye.prototype.end=function(t,e,i){var r=this._writableState;return typeof t=="function"?(i=t,t=null,e=null):typeof e=="function"&&(i=e,e=null),t!=null&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||eT(this,r,i),this};Object.defineProperty(Ye.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function o0(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function X1(t,e){t._final(function(i){e.pendingcb--,i&&Mn(t,i),e.prefinished=!0,t.emit("prefinish"),Ha(t,e)})}function J1(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(X1,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Ha(t,e){var i=o0(e);if(i&&(J1(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var r=t._readableState;(!r||r.autoDestroy&&r.endEmitted)&&t.destroy()}return i}function eT(t,e,i){e.ending=!0,Ha(t,e),i&&(e.finished?process.nextTick(i):t.once("finish",i)),e.ended=!0,t.writable=!1}function tT(t,e,i){var r=t.entry;for(t.entry=null;r;){var n=r.callback;e.pendingcb--,n(i),r=r.next}e.corkedRequestsFree.next=t}Object.defineProperty(Ye.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});Ye.prototype.destroy=gf.destroy;Ye.prototype._undestroy=gf.undestroy;Ye.prototype._destroy=function(t,e){e(t)}});var Er=R((dN,u0)=>{"use strict";var iT=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};u0.exports=oi;var c0=bf(),_f=yf();Ve()(oi,c0);for(vf=iT(_f.prototype),Do=0;Do<vf.length;Do++)Po=vf[Do],oi.prototype[Po]||(oi.prototype[Po]=_f.prototype[Po]);var vf,Po,Do;function oi(t){if(!(this instanceof oi))return new oi(t);c0.call(this,t),_f.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",rT)))}Object.defineProperty(oi.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(oi.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(oi.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function rT(){this._writableState.ended||process.nextTick(nT,this)}function nT(t){t.end()}Object.defineProperty(oi.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var Io=R((hN,d0)=>{"use strict";var f0=qi().codes.ERR_STREAM_PREMATURE_CLOSE;function aT(t){var e=!1;return function(){if(!e){e=!0;for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];t.apply(this,r)}}}function sT(){}function oT(t){return t.setHeader&&typeof t.abort=="function"}function p0(t,e,i){if(typeof e=="function")return p0(t,null,e);e||(e={}),i=aT(i||sT);var r=e.readable||e.readable!==!1&&t.readable,n=e.writable||e.writable!==!1&&t.writable,a=function(){t.writable||l()},s=t._writableState&&t._writableState.finished,l=function(){n=!1,s=!0,r||i.call(t)},p=t._readableState&&t._readableState.endEmitted,y=function(){r=!1,p=!0,n||i.call(t)},x=function(T){i.call(t,T)},S=function(){var T;if(r&&!p)return(!t._readableState||!t._readableState.ended)&&(T=new f0),i.call(t,T);if(n&&!s)return(!t._writableState||!t._writableState.ended)&&(T=new f0),i.call(t,T)},M=function(){t.req.on("finish",l)};return oT(t)?(t.on("complete",l),t.on("abort",S),t.req?M():t.on("request",M)):n&&!t._writableState&&(t.on("end",a),t.on("close",a)),t.on("end",y),t.on("finish",l),e.error!==!1&&t.on("error",x),t.on("close",S),function(){t.removeListener("complete",l),t.removeListener("abort",S),t.removeListener("request",M),t.req&&t.req.removeListener("finish",l),t.removeListener("end",a),t.removeListener("close",a),t.removeListener("finish",l),t.removeListener("end",y),t.removeListener("error",x),t.removeListener("close",S)}}d0.exports=p0});var m0=R((mN,h0)=>{"use strict";var Lo;function ji(t,e,i){return e=lT(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function lT(t){var e=cT(t,"string");return typeof e=="symbol"?e:String(e)}function cT(t,e){if(typeof t!="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var uT=Io(),Fi=Symbol("lastResolve"),Mr=Symbol("lastReject"),Ua=Symbol("error"),No=Symbol("ended"),Sr=Symbol("lastPromise"),xf=Symbol("handlePromise"),Ar=Symbol("stream");function Hi(t,e){return{value:t,done:e}}function fT(t){var e=t[Fi];if(e!==null){var i=t[Ar].read();i!==null&&(t[Sr]=null,t[Fi]=null,t[Mr]=null,e(Hi(i,!1)))}}function pT(t){process.nextTick(fT,t)}function dT(t,e){return function(i,r){t.then(function(){if(e[No]){i(Hi(void 0,!0));return}e[xf](i,r)},r)}}var hT=Object.getPrototypeOf(function(){}),mT=Object.setPrototypeOf((Lo={get stream(){return this[Ar]},next:function(){var e=this,i=this[Ua];if(i!==null)return Promise.reject(i);if(this[No])return Promise.resolve(Hi(void 0,!0));if(this[Ar].destroyed)return new Promise(function(s,l){process.nextTick(function(){e[Ua]?l(e[Ua]):s(Hi(void 0,!0))})});var r=this[Sr],n;if(r)n=new Promise(dT(r,this));else{var a=this[Ar].read();if(a!==null)return Promise.resolve(Hi(a,!1));n=new Promise(this[xf])}return this[Sr]=n,n}},ji(Lo,Symbol.asyncIterator,function(){return this}),ji(Lo,"return",function(){var e=this;return new Promise(function(i,r){e[Ar].destroy(null,function(n){if(n){r(n);return}i(Hi(void 0,!0))})})}),Lo),hT),gT=function(e){var i,r=Object.create(mT,(i={},ji(i,Ar,{value:e,writable:!0}),ji(i,Fi,{value:null,writable:!0}),ji(i,Mr,{value:null,writable:!0}),ji(i,Ua,{value:null,writable:!0}),ji(i,No,{value:e._readableState.endEmitted,writable:!0}),ji(i,xf,{value:function(a,s){var l=r[Ar].read();l?(r[Sr]=null,r[Fi]=null,r[Mr]=null,a(Hi(l,!1))):(r[Fi]=a,r[Mr]=s)},writable:!0}),i));return r[Sr]=null,uT(e,function(n){if(n&&n.code!=="ERR_STREAM_PREMATURE_CLOSE"){var a=r[Mr];a!==null&&(r[Sr]=null,r[Fi]=null,r[Mr]=null,a(n)),r[Ua]=n;return}var s=r[Fi];s!==null&&(r[Sr]=null,r[Fi]=null,r[Mr]=null,s(Hi(void 0,!0))),r[No]=!0}),e.on("readable",pT.bind(null,r)),r};h0.exports=gT});var _0=R((gN,v0)=>{"use strict";function g0(t,e,i,r,n,a,s){try{var l=t[a](s),p=l.value}catch(y){i(y);return}l.done?e(p):Promise.resolve(p).then(r,n)}function yT(t){return function(){var e=this,i=arguments;return new Promise(function(r,n){var a=t.apply(e,i);function s(p){g0(a,r,n,s,l,"next",p)}function l(p){g0(a,r,n,s,l,"throw",p)}s(void 0)})}}function y0(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function vT(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?y0(Object(i),!0).forEach(function(r){_T(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):y0(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function _T(t,e,i){return e=bT(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function bT(t){var e=xT(t,"string");return typeof e=="symbol"?e:String(e)}function xT(t,e){if(typeof t!="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wT=qi().codes.ERR_INVALID_ARG_TYPE;function ET(t,e,i){var r;if(e&&typeof e.next=="function")r=e;else if(e&&e[Symbol.asyncIterator])r=e[Symbol.asyncIterator]();else if(e&&e[Symbol.iterator])r=e[Symbol.iterator]();else throw new wT("iterable",["Iterable"],e);var n=new t(vT({objectMode:!0},i)),a=!1;n._read=function(){a||(a=!0,s())};function s(){return l.apply(this,arguments)}function l(){return l=yT(function*(){try{var p=yield r.next(),y=p.value,x=p.done;x?n.push(null):n.push(yield y)?s():a=!1}catch(S){n.destroy(S)}}),l.apply(this,arguments)}return n}v0.exports=ET});var bf=R((vN,C0)=>{"use strict";C0.exports=ke;var Sn;ke.ReadableState=E0;var yN=require("events").EventEmitter,w0=function(e,i){return e.listeners(i).length},za=uf(),ko=require("buffer").Buffer,MT=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function ST(t){return ko.from(t)}function AT(t){return ko.isBuffer(t)||t instanceof MT}var wf=require("util"),Ce;wf&&wf.debuglog?Ce=wf.debuglog("stream"):Ce=function(){};var TT=Zy(),Cf=df(),RT=hf(),CT=RT.getHighWaterMark,qo=qi().codes,OT=qo.ERR_INVALID_ARG_TYPE,DT=qo.ERR_STREAM_PUSH_AFTER_EOF,PT=qo.ERR_METHOD_NOT_IMPLEMENTED,IT=qo.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,An,Ef,Mf;Ve()(ke,za);var Ga=Cf.errorOrDestroy,Sf=["error","close","destroy","pause","resume"];function LT(t,e,i){if(typeof t.prependListener=="function")return t.prependListener(e,i);!t._events||!t._events[e]?t.on(e,i):Array.isArray(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]}function E0(t,e,i){Sn=Sn||Er(),t=t||{},typeof i!="boolean"&&(i=e instanceof Sn),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=CT(this,t,"readableHighWaterMark",i),this.buffer=new TT,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(An||(An=require("string_decoder/").StringDecoder),this.decoder=new An(t.encoding),this.encoding=t.encoding)}function ke(t){if(Sn=Sn||Er(),!(this instanceof ke))return new ke(t);var e=this instanceof Sn;this._readableState=new E0(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),za.call(this)}Object.defineProperty(ke.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});ke.prototype.destroy=Cf.destroy;ke.prototype._undestroy=Cf.undestroy;ke.prototype._destroy=function(t,e){e(t)};ke.prototype.push=function(t,e){var i=this._readableState,r;return i.objectMode?r=!0:typeof t=="string"&&(e=e||i.defaultEncoding,e!==i.encoding&&(t=ko.from(t,e),e=""),r=!0),M0(this,t,e,!1,r)};ke.prototype.unshift=function(t){return M0(this,t,null,!0,!1)};function M0(t,e,i,r,n){Ce("readableAddChunk",e);var a=t._readableState;if(e===null)a.reading=!1,qT(t,a);else{var s;if(n||(s=NT(a,e)),s)Ga(t,s);else if(a.objectMode||e&&e.length>0)if(typeof e!="string"&&!a.objectMode&&Object.getPrototypeOf(e)!==ko.prototype&&(e=ST(e)),r)a.endEmitted?Ga(t,new IT):Af(t,a,e,!0);else if(a.ended)Ga(t,new DT);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!i?(e=a.decoder.write(e),a.objectMode||e.length!==0?Af(t,a,e,!1):Rf(t,a)):Af(t,a,e,!1)}else r||(a.reading=!1,Rf(t,a))}return!a.ended&&(a.length<a.highWaterMark||a.length===0)}function Af(t,e,i,r){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",i)):(e.length+=e.objectMode?1:i.length,r?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&Ko(t)),Rf(t,e)}function NT(t,e){var i;return!AT(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(i=new OT("chunk",["string","Buffer","Uint8Array"],e)),i}ke.prototype.isPaused=function(){return this._readableState.flowing===!1};ke.prototype.setEncoding=function(t){An||(An=require("string_decoder/").StringDecoder);var e=new An(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,r="";i!==null;)r+=e.write(i.data),i=i.next;return this._readableState.buffer.clear(),r!==""&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var b0=1073741824;function kT(t){return t>=b0?t=b0:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function x0(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=kT(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}ke.prototype.read=function(t){Ce("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Ce("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Tf(this):Ko(this),null;if(t=x0(t,e),t===0&&e.ended)return e.length===0&&Tf(this),null;var r=e.needReadable;Ce("need readable",r),(e.length===0||e.length-t<e.highWaterMark)&&(r=!0,Ce("length less than watermark",r)),e.ended||e.reading?(r=!1,Ce("reading or ended",r)):r&&(Ce("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=x0(i,e)));var n;return t>0?n=T0(t,e):n=null,n===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&Tf(this)),n!==null&&this.emit("data",n),n};function qT(t,e){if(Ce("onEofChunk"),!e.ended){if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,e.sync?Ko(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,S0(t)))}}function Ko(t){var e=t._readableState;Ce("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Ce("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(S0,t))}function S0(t){var e=t._readableState;Ce("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Of(t)}function Rf(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(KT,t,e))}function KT(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var i=e.length;if(Ce("maybeReadMore read 0"),t.read(0),i===e.length)break}e.readingMore=!1}ke.prototype._read=function(t){Ga(this,new PT("_read()"))};ke.prototype.pipe=function(t,e){var i=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t);break}r.pipesCount+=1,Ce("pipe count=%d opts=%j",r.pipesCount,e);var n=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,a=n?l:O;r.endEmitted?process.nextTick(a):i.once("end",a),t.on("unpipe",s);function s(P,L){Ce("onunpipe"),P===i&&L&&L.hasUnpiped===!1&&(L.hasUnpiped=!0,x())}function l(){Ce("onend"),t.end()}var p=jT(i);t.on("drain",p);var y=!1;function x(){Ce("cleanup"),t.removeListener("close",C),t.removeListener("finish",T),t.removeListener("drain",p),t.removeListener("error",M),t.removeListener("unpipe",s),i.removeListener("end",l),i.removeListener("end",O),i.removeListener("data",S),y=!0,r.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&p()}i.on("data",S);function S(P){Ce("ondata");var L=t.write(P);Ce("dest.write",L),L===!1&&((r.pipesCount===1&&r.pipes===t||r.pipesCount>1&&R0(r.pipes,t)!==-1)&&!y&&(Ce("false write response, pause",r.awaitDrain),r.awaitDrain++),i.pause())}function M(P){Ce("onerror",P),O(),t.removeListener("error",M),w0(t,"error")===0&&Ga(t,P)}LT(t,"error",M);function C(){t.removeListener("finish",T),O()}t.once("close",C);function T(){Ce("onfinish"),t.removeListener("close",C),O()}t.once("finish",T);function O(){Ce("unpipe"),i.unpipe(t)}return t.emit("pipe",i),r.flowing||(Ce("pipe resume"),i.resume()),t};function jT(t){return function(){var i=t._readableState;Ce("pipeOnDrain",i.awaitDrain),i.awaitDrain&&i.awaitDrain--,i.awaitDrain===0&&w0(t,"data")&&(i.flowing=!0,Of(t))}}ke.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i),this);if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var a=0;a<n;a++)r[a].emit("unpipe",this,{hasUnpiped:!1});return this}var s=R0(e.pipes,t);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i),this)};ke.prototype.on=function(t,e){var i=za.prototype.on.call(this,t,e),r=this._readableState;return t==="data"?(r.readableListening=this.listenerCount("readable")>0,r.flowing!==!1&&this.resume()):t==="readable"&&!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,Ce("on readable",r.length,r.reading),r.length?Ko(this):r.reading||process.nextTick(FT,this)),i};ke.prototype.addListener=ke.prototype.on;ke.prototype.removeListener=function(t,e){var i=za.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(A0,this),i};ke.prototype.removeAllListeners=function(t){var e=za.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(A0,this),e};function A0(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function FT(t){Ce("readable nexttick read 0"),t.read(0)}ke.prototype.resume=function(){var t=this._readableState;return t.flowing||(Ce("resume"),t.flowing=!t.readableListening,HT(this,t)),t.paused=!1,this};function HT(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(BT,t,e))}function BT(t,e){Ce("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Of(t),e.flowing&&!e.reading&&t.read(0)}ke.prototype.pause=function(){return Ce("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ce("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Of(t){var e=t._readableState;for(Ce("flow",e.flowing);e.flowing&&t.read()!==null;);}ke.prototype.wrap=function(t){var e=this,i=this._readableState,r=!1;t.on("end",function(){if(Ce("wrapped end"),i.decoder&&!i.ended){var s=i.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),t.on("data",function(s){if(Ce("wrapped data"),i.decoder&&(s=i.decoder.write(s)),!(i.objectMode&&s==null)&&!(!i.objectMode&&(!s||!s.length))){var l=e.push(s);l||(r=!0,t.pause())}});for(var n in t)this[n]===void 0&&typeof t[n]=="function"&&(this[n]=function(l){return function(){return t[l].apply(t,arguments)}}(n));for(var a=0;a<Sf.length;a++)t.on(Sf[a],this.emit.bind(this,Sf[a]));return this._read=function(s){Ce("wrapped _read",s),r&&(r=!1,t.resume())},this};typeof Symbol=="function"&&(ke.prototype[Symbol.asyncIterator]=function(){return Ef===void 0&&(Ef=m0()),Ef(this)});Object.defineProperty(ke.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(ke.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(ke.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});ke._fromList=T0;Object.defineProperty(ke.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function T0(t,e){if(e.length===0)return null;var i;return e.objectMode?i=e.buffer.shift():!t||t>=e.length?(e.decoder?i=e.buffer.join(""):e.buffer.length===1?i=e.buffer.first():i=e.buffer.concat(e.length),e.buffer.clear()):i=e.buffer.consume(t,e.decoder),i}function Tf(t){var e=t._readableState;Ce("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(UT,e,t))}function UT(t,e){if(Ce("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var i=e._writableState;(!i||i.autoDestroy&&i.finished)&&e.destroy()}}typeof Symbol=="function"&&(ke.from=function(t,e){return Mf===void 0&&(Mf=_0()),Mf(ke,t,e)});function R0(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}});var Df=R((_N,D0)=>{"use strict";D0.exports=_i;var jo=qi().codes,GT=jo.ERR_METHOD_NOT_IMPLEMENTED,zT=jo.ERR_MULTIPLE_CALLBACK,VT=jo.ERR_TRANSFORM_ALREADY_TRANSFORMING,WT=jo.ERR_TRANSFORM_WITH_LENGTH_0,Fo=Er();Ve()(_i,Fo);function YT(t,e){var i=this._transformState;i.transforming=!1;var r=i.writecb;if(r===null)return this.emit("error",new zT);i.writechunk=null,i.writecb=null,e!=null&&this.push(e),r(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function _i(t){if(!(this instanceof _i))return new _i(t);Fo.call(this,t),this._transformState={afterTransform:YT.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",$T)}function $T(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,i){O0(t,e,i)}):O0(this,null,null)}_i.prototype.push=function(t,e){return this._transformState.needTransform=!1,Fo.prototype.push.call(this,t,e)};_i.prototype._transform=function(t,e,i){i(new GT("_transform()"))};_i.prototype._write=function(t,e,i){var r=this._transformState;if(r.writecb=i,r.writechunk=t,r.writeencoding=e,!r.transforming){var n=this._readableState;(r.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}};_i.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};_i.prototype._destroy=function(t,e){Fo.prototype._destroy.call(this,t,function(i){e(i)})};function O0(t,e,i){if(e)return t.emit("error",e);if(i!=null&&t.push(i),t._writableState.length)throw new WT;if(t._transformState.transforming)throw new VT;return t.push(null)}});var L0=R((bN,I0)=>{"use strict";I0.exports=Va;var P0=Df();Ve()(Va,P0);function Va(t){if(!(this instanceof Va))return new Va(t);P0.call(this,t)}Va.prototype._transform=function(t,e,i){i(null,t)}});var j0=R((xN,K0)=>{"use strict";var Pf;function ZT(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var q0=qi().codes,QT=q0.ERR_MISSING_ARGS,XT=q0.ERR_STREAM_DESTROYED;function N0(t){if(t)throw t}function JT(t){return t.setHeader&&typeof t.abort=="function"}function eR(t,e,i,r){r=ZT(r);var n=!1;t.on("close",function(){n=!0}),Pf===void 0&&(Pf=Io()),Pf(t,{readable:e,writable:i},function(s){if(s)return r(s);n=!0,r()});var a=!1;return function(s){if(!n&&!a){if(a=!0,JT(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();r(s||new XT("pipe"))}}}function k0(t){t()}function tR(t,e){return t.pipe(e)}function iR(t){return!t.length||typeof t[t.length-1]!="function"?N0:t.pop()}function rR(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var r=iR(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new QT("streams");var n,a=e.map(function(s,l){var p=l<e.length-1,y=l>0;return eR(s,p,y,function(x){n||(n=x),x&&a.forEach(k0),!p&&(a.forEach(k0),r(n))})});return e.reduce(tR)}K0.exports=rR});var F0=R((qt,Ya)=>{var Wa=require("stream");process.env.READABLE_STREAM==="disable"&&Wa?(Ya.exports=Wa.Readable,Object.assign(Ya.exports,Wa),Ya.exports.Stream=Wa):(qt=Ya.exports=bf(),qt.Stream=Wa||qt,qt.Readable=qt,qt.Writable=yf(),qt.Duplex=Er(),qt.Transform=Df(),qt.PassThrough=L0(),qt.finished=Io(),qt.pipeline=j0())});var U0=R((wN,B0)=>{B0.exports=H0;function H0(t,e){if(t&&e)return H0(t)(e);if(typeof t!="function")throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(r){i[r]=t[r]}),i;function i(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];var a=t.apply(this,r),s=r[r.length-1];return typeof a=="function"&&a!==s&&Object.keys(s).forEach(function(l){a[l]=s[l]}),a}}});var V0=R((EN,If)=>{var G0=U0();If.exports=G0(Ho);If.exports.strict=G0(z0);Ho.proto=Ho(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Ho(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return z0(this)},configurable:!0})});function Ho(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function z0(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},i=t.name||"Function wrapped with `once`";return e.onceError=i+" shouldn't be called more than once",e.called=!1,e}});var $0=R((MN,Y0)=>{var nR=V0(),aR=function(){},sR=function(t){return t.setHeader&&typeof t.abort=="function"},oR=function(t){return t.stdio&&Array.isArray(t.stdio)&&t.stdio.length===3},W0=function(t,e,i){if(typeof e=="function")return W0(t,null,e);e||(e={}),i=nR(i||aR);var r=t._writableState,n=t._readableState,a=e.readable||e.readable!==!1&&t.readable,s=e.writable||e.writable!==!1&&t.writable,l=!1,p=function(){t.writable||y()},y=function(){s=!1,a||i.call(t)},x=function(){a=!1,s||i.call(t)},S=function(P){i.call(t,P?new Error("exited with error code: "+P):null)},M=function(P){i.call(t,P)},C=function(){process.nextTick(T)},T=function(){if(!l){if(a&&!(n&&n.ended&&!n.destroyed))return i.call(t,new Error("premature close"));if(s&&!(r&&r.ended&&!r.destroyed))return i.call(t,new Error("premature close"))}},O=function(){t.req.on("finish",y)};return sR(t)?(t.on("complete",y),t.on("abort",C),t.req?O():t.on("request",O)):s&&!r&&(t.on("end",p),t.on("close",p)),oR(t)&&t.on("exit",S),t.on("end",x),t.on("finish",y),e.error!==!1&&t.on("error",M),t.on("close",C),function(){l=!0,t.removeListener("complete",y),t.removeListener("abort",C),t.removeListener("request",O),t.req&&t.req.removeListener("finish",y),t.removeListener("end",p),t.removeListener("close",p),t.removeListener("finish",y),t.removeListener("exit",S),t.removeListener("end",x),t.removeListener("error",M),t.removeListener("close",C)}};Y0.exports=W0});var Q0=R((SN,Z0)=>{Z0.exports=lR;function lR(t){var e=t._readableState;return e?e.objectMode||typeof t._duplexState=="number"?t.read():t.read(cR(e)):null}function cR(t){if(t.buffer.length){var e=t.bufferIndex||0;if(t.buffer.head)return t.buffer.head.data.length;if(t.buffer.length-e>0&&t.buffer[e])return t.buffer[e].length}return t.length}});var Nf=R((AN,tv)=>{var Bo=F0(),X0=$0(),uR=Ve(),fR=Q0(),J0=Buffer.from&&Buffer.from!==Uint8Array.from?Buffer.from([0]):new Buffer([0]),Lf=function(t,e){t._corked?t.once("uncork",e):e()},pR=function(t,e){t._autoDestroy&&t.destroy(e)},ev=function(t,e){return function(i){i?pR(t,i.message==="premature close"?null:i):e&&!t._ended&&t.end()}},dR=function(t,e){if(!t||t._writableState&&t._writableState.finished)return e();if(t._writableState)return t.end(e);t.end(),e()},hR=function(){},mR=function(t){return new Bo.Readable({objectMode:!0,highWaterMark:16}).wrap(t)},ot=function(t,e,i){if(!(this instanceof ot))return new ot(t,e,i);Bo.Duplex.call(this,i),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!i||i.autoDestroy!==!1,this._forwardDestroy=!i||i.destroy!==!1,this._forwardEnd=!i||i.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,t&&this.setWritable(t),e&&this.setReadable(e)};uR(ot,Bo.Duplex);ot.obj=function(t,e,i){return i||(i={}),i.objectMode=!0,i.highWaterMark=16,new ot(t,e,i)};ot.prototype.cork=function(){++this._corked===1&&this.emit("cork")};ot.prototype.uncork=function(){this._corked&&--this._corked===0&&this.emit("uncork")};ot.prototype.setWritable=function(t){if(this._unwrite&&this._unwrite(),this.destroyed){t&&t.destroy&&t.destroy();return}if(t===null||t===!1){this.end();return}var e=this,i=X0(t,{writable:!0,readable:!1},ev(this,this._forwardEnd)),r=function(){var a=e._ondrain;e._ondrain=null,a&&a()},n=function(){e._writable.removeListener("drain",r),i()};this._unwrite&&process.nextTick(r),this._writable=t,this._writable.on("drain",r),this._unwrite=n,this.uncork()};ot.prototype.setReadable=function(t){if(this._unread&&this._unread(),this.destroyed){t&&t.destroy&&t.destroy();return}if(t===null||t===!1){this.push(null),this.resume();return}var e=this,i=X0(t,{writable:!1,readable:!0},ev(this)),r=function(){e._forward()},n=function(){e.push(null)},a=function(){e._readable2.removeListener("readable",r),e._readable2.removeListener("end",n),i()};this._drained=!0,this._readable=t,this._readable2=t._readableState?t:mR(t),this._readable2.on("readable",r),this._readable2.on("end",n),this._unread=a,this._forward()};ot.prototype._read=function(){this._drained=!0,this._forward()};ot.prototype._forward=function(){if(!(this._forwarding||!this._readable2||!this._drained)){this._forwarding=!0;for(var t;this._drained&&(t=fR(this._readable2))!==null;)this.destroyed||(this._drained=this.push(t));this._forwarding=!1}};ot.prototype.destroy=function(t,e){if(e||(e=hR),this.destroyed)return e(null);this.destroyed=!0;var i=this;process.nextTick(function(){i._destroy(t),e(null)})};ot.prototype._destroy=function(t){if(t){var e=this._ondrain;this._ondrain=null,e?e(t):this.emit("error",t)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")};ot.prototype._write=function(t,e,i){if(!this.destroyed){if(this._corked)return Lf(this,this._write.bind(this,t,e,i));if(t===J0)return this._finish(i);if(!this._writable)return i();this._writable.write(t)===!1?this._ondrain=i:this.destroyed||i()}};ot.prototype._finish=function(t){var e=this;this.emit("preend"),Lf(this,function(){dR(e._forwardEnd&&e._writable,function(){e._writableState.prefinished===!1&&(e._writableState.prefinished=!0),e.emit("prefinish"),Lf(e,t)})})};ot.prototype.end=function(t,e,i){return typeof t=="function"?this.end(null,null,t):typeof e=="function"?this.end(t,null,e):(this._ended=!0,t&&this.write(t),!this._writableState.ending&&!this._writableState.destroyed&&this.write(J0),Bo.Writable.prototype.end.call(this,i))};tv.exports=ot});var kf=R(Bi=>{"use strict";var gR=Bi&&Bi.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Bi,"__esModule",{value:!0});Bi.getEncryptionInfo=Bi._encryptStream=void 0;var bt=rt(),yR=By(),vR=Uy(),_R=gR(Nf()),bR=require("crypto"),Tn=_t(),xR=Mo(),wR=t=>Buffer.from(t,"utf8"),{serializeMessageHeader:ER,headerAuthIv:MR,buildMessageHeader:SR}=(0,Tn.serializeFactory)(wR);function AR({commitmentPolicy:t,maxEncryptedDataKeys:e},i,r={}){(0,bt.needs)(bt.CommitmentPolicy[t],"Invalid commitment policy."),(0,bt.needs)(e===!1||e>=1,"Invalid maxEncryptedDataKeys value.");let{suiteId:n,encryptionContext:a={},frameLength:s=Tn.FRAME_LENGTH,plaintextLength:l}=r;(0,bt.needs)(s>0&&Tn.Maximum.FRAME_SIZE>=s,`frameLength out of bounds: 0 > frameLength >= ${Tn.Maximum.FRAME_SIZE}`),i=i instanceof bt.KeyringNode?new bt.NodeDefaultCryptographicMaterialsManager(i):i;let p=n&&new bt.NodeAlgorithmSuite(n);bt.CommitmentPolicySuites.isEncryptEnabled(t,p);let y=new _R.default;return i.getEncryptionMaterials({suite:p,encryptionContext:a,plaintextLength:l,commitmentPolicy:t}).then(async x=>{bt.CommitmentPolicySuites.isEncryptEnabled(t,x.suite),(0,bt.needs)(e===!1||x.encryptedDataKeys.length<=e,"maxEncryptedDataKeys exceeded.");let{getCipher:S,messageHeader:M,rawHeader:C,dispose:T,getSigner:O}=iv(x,s);y.emit("MessageHeader",M);let P=(0,yR.getFramedEncryptStream)(S,M,T,{plaintextLength:l,suite:x.suite}),L=new vR.SignatureStream(O);(0,xR.pipeline)(P,L),y.setReadable(L),C.forEach(U=>L.write(U)),y.setWritable(P)}).catch(x=>y.emit("error",x)),y}Bi._encryptStream=AR;function iv(t,e){let{getCipherInfo:i,dispose:r,getSigner:n}=(0,bt.getEncryptHelper)(t),{suite:a,encryptionContext:s,encryptedDataKeys:l}=t,{ivLength:p,messageFormat:y}=t.suite,x=bt.MessageFormat[y],S=parseInt(Tn.MessageIdLength[x],10);(0,bt.needs)(S>0,"Algorithm suite has unknown message format.");let M=(0,bR.randomBytes)(S),{getCipher:C,keyCommitment:T}=i(M),O=SR({suite:a,encryptedDataKeys:l,encryptionContext:s,messageId:M,frameLength:e,suiteData:T}),{buffer:P,byteOffset:L,byteLength:U}=ER(O),z=Buffer.from(P,L,U),V=MR(p),Be=C(V);Be.setAAD(z),Be.update(Buffer.alloc(0)),Be.final();let De=Be.getAuthTag();return{getCipher:C,dispose:r,getSigner:n,messageHeader:O,rawHeader:[z,(0,Tn.serializeMessageHeaderAuth)({headerIv:V,headerAuthTag:De,messageHeader:O})]}}Bi.getEncryptionInfo=iv});var rv=R(Uo=>{"use strict";Object.defineProperty(Uo,"__esModule",{value:!0});Uo._encrypt=void 0;var TR=kf(),RR=Mo();async function CR(t,e,i,r={}){let{encoding:n}=r;i instanceof Uint8Array?r.plaintextLength=i.byteLength:typeof i=="string"&&(i=Buffer.from(i,n),r.plaintextLength=i.byteLength);let a=(0,TR._encryptStream)(t,e,r),s=[],l=!1;if(a.once("MessageHeader",p=>{l=p}).on("data",p=>s.push(p)),i instanceof Uint8Array)a.end(i);else if(i.readable)i.pipe(a);else throw new Error("Unsupported plaintext");if(await OR(a),!l)throw new Error("Unknown format");return{result:Buffer.concat(s),messageHeader:l}}Uo._encrypt=CR;async function OR(t){return new Promise((e,i)=>{(0,RR.finished)(t,r=>r?i(r):e())})}});var nv=R(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.buildEncrypt=void 0;var DR=kf(),PR=rv(),Go=rt();function IR(t={}){let{commitmentPolicy:e=Go.CommitmentPolicy.REQUIRE_ENCRYPT_REQUIRE_DECRYPT,maxEncryptedDataKeys:i=!1}=typeof t=="string"?{commitmentPolicy:t}:t;(0,Go.needs)(Go.CommitmentPolicy[e],"Invalid commitment policy."),(0,Go.needs)(i===!1||i>=1,"Invalid maxEncryptedDataKeys value.");let r={commitmentPolicy:e,maxEncryptedDataKeys:i};return{encryptStream:DR._encryptStream.bind({},r),encrypt:PR._encrypt.bind({},r)}}zo.buildEncrypt=IR});var qf=R(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.buildEncrypt=void 0;var LR=nv();Object.defineProperty(Vo,"buildEncrypt",{enumerable:!0,get:function(){return LR.buildEncrypt}})});var Kf=R((DN,av)=>{av.exports=require("stream")});var fv=R((PN,uv)=>{"use strict";function sv(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function ov(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?sv(Object(i),!0).forEach(function(r){NR(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):sv(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function NR(t,e,i){return e=cv(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function kR(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lv(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cv(r.key),r)}}function qR(t,e,i){return e&&lv(t.prototype,e),i&&lv(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function cv(t){var e=KR(t,"string");return typeof e=="symbol"?e:String(e)}function KR(t,e){if(typeof t!="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jR=require("buffer"),Wo=jR.Buffer,FR=require("util"),jf=FR.inspect,HR=jf&&jf.custom||"inspect";function BR(t,e,i){Wo.prototype.copy.call(t,e,i)}uv.exports=function(){function t(){kR(this,t),this.head=null,this.tail=null,this.length=0}return qR(t,[{key:"push",value:function(i){var r={data:i,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}},{key:"unshift",value:function(i){var r={data:i,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}},{key:"shift",value:function(){if(this.length!==0){var i=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,i}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(i){if(this.length===0)return"";for(var r=this.head,n=""+r.data;r=r.next;)n+=i+r.data;return n}},{key:"concat",value:function(i){if(this.length===0)return Wo.alloc(0);for(var r=Wo.allocUnsafe(i>>>0),n=this.head,a=0;n;)BR(n.data,r,a),a+=n.data.length,n=n.next;return r}},{key:"consume",value:function(i,r){var n;return i<this.head.data.length?(n=this.head.data.slice(0,i),this.head.data=this.head.data.slice(i)):i===this.head.data.length?n=this.shift():n=r?this._getString(i):this._getBuffer(i),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(i){var r=this.head,n=1,a=r.data;for(i-=a.length;r=r.next;){var s=r.data,l=i>s.length?s.length:i;if(l===s.length?a+=s:a+=s.slice(0,i),i-=l,i===0){l===s.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=s.slice(l));break}++n}return this.length-=n,a}},{key:"_getBuffer",value:function(i){var r=Wo.allocUnsafe(i),n=this.head,a=1;for(n.data.copy(r),i-=n.data.length;n=n.next;){var s=n.data,l=i>s.length?s.length:i;if(s.copy(r,r.length-i,0,l),i-=l,i===0){l===s.length?(++a,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(l));break}++a}return this.length-=a,r}},{key:HR,value:function(i,r){return jf(this,ov(ov({},r),{},{depth:0,customInspect:!1}))}}]),t}()});var Hf=R((IN,dv)=>{"use strict";function UR(t,e){var i=this,r=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return r||n?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(Ff,this,t)):process.nextTick(Ff,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(a){!e&&a?i._writableState?i._writableState.errorEmitted?process.nextTick(Yo,i):(i._writableState.errorEmitted=!0,process.nextTick(pv,i,a)):process.nextTick(pv,i,a):e?(process.nextTick(Yo,i),e(a)):process.nextTick(Yo,i)}),this)}function pv(t,e){Ff(t,e),Yo(t)}function Yo(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function GR(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Ff(t,e){t.emit("error",e)}function zR(t,e){var i=t._readableState,r=t._writableState;i&&i.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}dv.exports={destroy:UR,undestroy:GR,errorOrDestroy:zR}});var Ui=R((LN,gv)=>{"use strict";var mv={};function Kt(t,e,i){i||(i=Error);function r(a,s,l){return typeof e=="string"?e:e(a,s,l)}class n extends i{constructor(s,l,p){super(r(s,l,p))}}n.prototype.name=i.name,n.prototype.code=t,mv[t]=n}function hv(t,e){if(Array.isArray(t)){let i=t.length;return t=t.map(r=>String(r)),i>2?`one of ${e} ${t.slice(0,i-1).join(", ")}, or `+t[i-1]:i===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function VR(t,e,i){return t.substr(!i||i<0?0:+i,e.length)===e}function WR(t,e,i){return(i===void 0||i>t.length)&&(i=t.length),t.substring(i-e.length,i)===e}function YR(t,e,i){return typeof i!="number"&&(i=0),i+e.length>t.length?!1:t.indexOf(e,i)!==-1}Kt("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);Kt("ERR_INVALID_ARG_TYPE",function(t,e,i){let r;typeof e=="string"&&VR(e,"not ")?(r="must not be",e=e.replace(/^not /,"")):r="must be";let n;if(WR(t," argument"))n=`The ${t} ${r} ${hv(e,"type")}`;else{let a=YR(t,".")?"property":"argument";n=`The "${t}" ${a} ${r} ${hv(e,"type")}`}return n+=`. Received type ${typeof i}`,n},TypeError);Kt("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Kt("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});Kt("ERR_STREAM_PREMATURE_CLOSE","Premature close");Kt("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});Kt("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Kt("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Kt("ERR_STREAM_WRITE_AFTER_END","write after end");Kt("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Kt("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);Kt("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");gv.exports.codes=mv});var Bf=R((NN,yv)=>{"use strict";var $R=Ui().codes.ERR_INVALID_OPT_VALUE;function ZR(t,e,i){return t.highWaterMark!=null?t.highWaterMark:e?t[i]:null}function QR(t,e,i,r){var n=ZR(e,r,i);if(n!=null){if(!(isFinite(n)&&Math.floor(n)===n)||n<0){var a=r?i:"highWaterMark";throw new $R(a,n)}return Math.floor(n)}return t.objectMode?16:16*1024}yv.exports={getHighWaterMark:QR}});var zf=R((kN,Ev)=>{"use strict";Ev.exports=$e;function _v(t){var e=this;this.next=null,this.entry=null,this.finish=function(){MC(e,t)}}var Rn;$e.WritableState=Za;var XR={deprecate:uo()},bv=Kf(),Zo=require("buffer").Buffer,JR=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function eC(t){return Zo.from(t)}function tC(t){return Zo.isBuffer(t)||t instanceof JR}var Gf=Hf(),iC=Bf(),rC=iC.getHighWaterMark,Gi=Ui().codes,nC=Gi.ERR_INVALID_ARG_TYPE,aC=Gi.ERR_METHOD_NOT_IMPLEMENTED,sC=Gi.ERR_MULTIPLE_CALLBACK,oC=Gi.ERR_STREAM_CANNOT_PIPE,lC=Gi.ERR_STREAM_DESTROYED,cC=Gi.ERR_STREAM_NULL_VALUES,uC=Gi.ERR_STREAM_WRITE_AFTER_END,fC=Gi.ERR_UNKNOWN_ENCODING,Cn=Gf.errorOrDestroy;Ve()($e,bv);function pC(){}function Za(t,e,i){Rn=Rn||Tr(),t=t||{},typeof i!="boolean"&&(i=e instanceof Rn),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=rC(this,t,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var r=t.decodeStrings===!1;this.decodeStrings=!r,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(n){_C(e,n)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new _v(this)}Za.prototype.getBuffer=function(){for(var e=this.bufferedRequest,i=[];e;)i.push(e),e=e.next;return i};(function(){try{Object.defineProperty(Za.prototype,"buffer",{get:XR.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var $o;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?($o=Function.prototype[Symbol.hasInstance],Object.defineProperty($e,Symbol.hasInstance,{value:function(e){return $o.call(this,e)?!0:this!==$e?!1:e&&e._writableState instanceof Za}})):$o=function(e){return e instanceof this};function $e(t){Rn=Rn||Tr();var e=this instanceof Rn;if(!e&&!$o.call($e,this))return new $e(t);this._writableState=new Za(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),bv.call(this)}$e.prototype.pipe=function(){Cn(this,new oC)};function dC(t,e){var i=new uC;Cn(t,i),process.nextTick(e,i)}function hC(t,e,i,r){var n;return i===null?n=new cC:typeof i!="string"&&!e.objectMode&&(n=new nC("chunk",["string","Buffer"],i)),n?(Cn(t,n),process.nextTick(r,n),!1):!0}$e.prototype.write=function(t,e,i){var r=this._writableState,n=!1,a=!r.objectMode&&tC(t);return a&&!Zo.isBuffer(t)&&(t=eC(t)),typeof e=="function"&&(i=e,e=null),a?e="buffer":e||(e=r.defaultEncoding),typeof i!="function"&&(i=pC),r.ending?dC(this,i):(a||hC(this,r,t,i))&&(r.pendingcb++,n=gC(this,r,a,t,e,i)),n};$e.prototype.cork=function(){this._writableState.corked++};$e.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&xv(this,t))};$e.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new fC(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty($e.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function mC(t,e,i){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Zo.from(e,i)),e}Object.defineProperty($e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function gC(t,e,i,r,n,a){if(!i){var s=mC(e,r,n);r!==s&&(i=!0,n="buffer",r=s)}var l=e.objectMode?1:r.length;e.length+=l;var p=e.length<e.highWaterMark;if(p||(e.needDrain=!0),e.writing||e.corked){var y=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:n,isBuf:i,callback:a,next:null},y?y.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Uf(t,e,!1,l,r,n,a);return p}function Uf(t,e,i,r,n,a,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new lC("write")):i?t._writev(n,e.onwrite):t._write(n,a,e.onwrite),e.sync=!1}function yC(t,e,i,r,n){--e.pendingcb,i?(process.nextTick(n,r),process.nextTick($a,t,e),t._writableState.errorEmitted=!0,Cn(t,r)):(n(r),t._writableState.errorEmitted=!0,Cn(t,r),$a(t,e))}function vC(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function _C(t,e){var i=t._writableState,r=i.sync,n=i.writecb;if(typeof n!="function")throw new sC;if(vC(i),e)yC(t,i,r,e,n);else{var a=wv(i)||t.destroyed;!a&&!i.corked&&!i.bufferProcessing&&i.bufferedRequest&&xv(t,i),r?process.nextTick(vv,t,i,a,n):vv(t,i,a,n)}}function vv(t,e,i,r){i||bC(t,e),e.pendingcb--,r(),$a(t,e)}function bC(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function xv(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var r=e.bufferedRequestCount,n=new Array(r),a=e.corkedRequestsFree;a.entry=i;for(var s=0,l=!0;i;)n[s]=i,i.isBuf||(l=!1),i=i.next,s+=1;n.allBuffers=l,Uf(t,e,!0,e.length,n,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new _v(e),e.bufferedRequestCount=0}else{for(;i;){var p=i.chunk,y=i.encoding,x=i.callback,S=e.objectMode?1:p.length;if(Uf(t,e,!1,S,p,y,x),i=i.next,e.bufferedRequestCount--,e.writing)break}i===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}$e.prototype._write=function(t,e,i){i(new aC("_write()"))};$e.prototype._writev=null;$e.prototype.end=function(t,e,i){var r=this._writableState;return typeof t=="function"?(i=t,t=null,e=null):typeof e=="function"&&(i=e,e=null),t!=null&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||EC(this,r,i),this};Object.defineProperty($e.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function wv(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function xC(t,e){t._final(function(i){e.pendingcb--,i&&Cn(t,i),e.prefinished=!0,t.emit("prefinish"),$a(t,e)})}function wC(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(xC,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function $a(t,e){var i=wv(e);if(i&&(wC(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var r=t._readableState;(!r||r.autoDestroy&&r.endEmitted)&&t.destroy()}return i}function EC(t,e,i){e.ending=!0,$a(t,e),i&&(e.finished?process.nextTick(i):t.once("finish",i)),e.ended=!0,t.writable=!1}function MC(t,e,i){var r=t.entry;for(t.entry=null;r;){var n=r.callback;e.pendingcb--,n(i),r=r.next}e.corkedRequestsFree.next=t}Object.defineProperty($e.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});$e.prototype.destroy=Gf.destroy;$e.prototype._undestroy=Gf.undestroy;$e.prototype._destroy=function(t,e){e(t)}});var Tr=R((qN,Sv)=>{"use strict";var SC=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};Sv.exports=li;var Mv=Yf(),Wf=zf();Ve()(li,Mv);for(Vf=SC(Wf.prototype),Qo=0;Qo<Vf.length;Qo++)Xo=Vf[Qo],li.prototype[Xo]||(li.prototype[Xo]=Wf.prototype[Xo]);var Vf,Xo,Qo;function li(t){if(!(this instanceof li))return new li(t);Mv.call(this,t),Wf.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",AC)))}Object.defineProperty(li.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(li.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(li.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function AC(){this._writableState.ended||process.nextTick(TC,this)}function TC(t){t.end()}Object.defineProperty(li.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var Jo=R((KN,Rv)=>{"use strict";var Av=Ui().codes.ERR_STREAM_PREMATURE_CLOSE;function RC(t){var e=!1;return function(){if(!e){e=!0;for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];t.apply(this,r)}}}function CC(){}function OC(t){return t.setHeader&&typeof t.abort=="function"}function Tv(t,e,i){if(typeof e=="function")return Tv(t,null,e);e||(e={}),i=RC(i||CC);var r=e.readable||e.readable!==!1&&t.readable,n=e.writable||e.writable!==!1&&t.writable,a=function(){t.writable||l()},s=t._writableState&&t._writableState.finished,l=function(){n=!1,s=!0,r||i.call(t)},p=t._readableState&&t._readableState.endEmitted,y=function(){r=!1,p=!0,n||i.call(t)},x=function(T){i.call(t,T)},S=function(){var T;if(r&&!p)return(!t._readableState||!t._readableState.ended)&&(T=new Av),i.call(t,T);if(n&&!s)return(!t._writableState||!t._writableState.ended)&&(T=new Av),i.call(t,T)},M=function(){t.req.on("finish",l)};return OC(t)?(t.on("complete",l),t.on("abort",S),t.req?M():t.on("request",M)):n&&!t._writableState&&(t.on("end",a),t.on("close",a)),t.on("end",y),t.on("finish",l),e.error!==!1&&t.on("error",x),t.on("close",S),function(){t.removeListener("complete",l),t.removeListener("abort",S),t.removeListener("request",M),t.req&&t.req.removeListener("finish",l),t.removeListener("end",a),t.removeListener("close",a),t.removeListener("finish",l),t.removeListener("end",y),t.removeListener("error",x),t.removeListener("close",S)}}Rv.exports=Tv});var Ov=R((jN,Cv)=>{"use strict";var el;function zi(t,e,i){return e=DC(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function DC(t){var e=PC(t,"string");return typeof e=="symbol"?e:String(e)}function PC(t,e){if(typeof t!="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var IC=Jo(),Vi=Symbol("lastResolve"),Rr=Symbol("lastReject"),Qa=Symbol("error"),tl=Symbol("ended"),Cr=Symbol("lastPromise"),$f=Symbol("handlePromise"),Or=Symbol("stream");function Wi(t,e){return{value:t,done:e}}function LC(t){var e=t[Vi];if(e!==null){var i=t[Or].read();i!==null&&(t[Cr]=null,t[Vi]=null,t[Rr]=null,e(Wi(i,!1)))}}function NC(t){process.nextTick(LC,t)}function kC(t,e){return function(i,r){t.then(function(){if(e[tl]){i(Wi(void 0,!0));return}e[$f](i,r)},r)}}var qC=Object.getPrototypeOf(function(){}),KC=Object.setPrototypeOf((el={get stream(){return this[Or]},next:function(){var e=this,i=this[Qa];if(i!==null)return Promise.reject(i);if(this[tl])return Promise.resolve(Wi(void 0,!0));if(this[Or].destroyed)return new Promise(function(s,l){process.nextTick(function(){e[Qa]?l(e[Qa]):s(Wi(void 0,!0))})});var r=this[Cr],n;if(r)n=new Promise(kC(r,this));else{var a=this[Or].read();if(a!==null)return Promise.resolve(Wi(a,!1));n=new Promise(this[$f])}return this[Cr]=n,n}},zi(el,Symbol.asyncIterator,function(){return this}),zi(el,"return",function(){var e=this;return new Promise(function(i,r){e[Or].destroy(null,function(n){if(n){r(n);return}i(Wi(void 0,!0))})})}),el),qC),jC=function(e){var i,r=Object.create(KC,(i={},zi(i,Or,{value:e,writable:!0}),zi(i,Vi,{value:null,writable:!0}),zi(i,Rr,{value:null,writable:!0}),zi(i,Qa,{value:null,writable:!0}),zi(i,tl,{value:e._readableState.endEmitted,writable:!0}),zi(i,$f,{value:function(a,s){var l=r[Or].read();l?(r[Cr]=null,r[Vi]=null,r[Rr]=null,a(Wi(l,!1))):(r[Vi]=a,r[Rr]=s)},writable:!0}),i));return r[Cr]=null,IC(e,function(n){if(n&&n.code!=="ERR_STREAM_PREMATURE_CLOSE"){var a=r[Rr];a!==null&&(r[Cr]=null,r[Vi]=null,r[Rr]=null,a(n)),r[Qa]=n;return}var s=r[Vi];s!==null&&(r[Cr]=null,r[Vi]=null,r[Rr]=null,s(Wi(void 0,!0))),r[tl]=!0}),e.on("readable",NC.bind(null,r)),r};Cv.exports=jC});var Lv=R((FN,Iv)=>{"use strict";function Dv(t,e,i,r,n,a,s){try{var l=t[a](s),p=l.value}catch(y){i(y);return}l.done?e(p):Promise.resolve(p).then(r,n)}function FC(t){return function(){var e=this,i=arguments;return new Promise(function(r,n){var a=t.apply(e,i);function s(p){Dv(a,r,n,s,l,"next",p)}function l(p){Dv(a,r,n,s,l,"throw",p)}s(void 0)})}}function Pv(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function HC(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Pv(Object(i),!0).forEach(function(r){BC(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Pv(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function BC(t,e,i){return e=UC(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function UC(t){var e=GC(t,"string");return typeof e=="symbol"?e:String(e)}function GC(t,e){if(typeof t!="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var zC=Ui().codes.ERR_INVALID_ARG_TYPE;function VC(t,e,i){var r;if(e&&typeof e.next=="function")r=e;else if(e&&e[Symbol.asyncIterator])r=e[Symbol.asyncIterator]();else if(e&&e[Symbol.iterator])r=e[Symbol.iterator]();else throw new zC("iterable",["Iterable"],e);var n=new t(HC({objectMode:!0},i)),a=!1;n._read=function(){a||(a=!0,s())};function s(){return l.apply(this,arguments)}function l(){return l=FC(function*(){try{var p=yield r.next(),y=p.value,x=p.done;x?n.push(null):n.push(yield y)?s():a=!1}catch(S){n.destroy(S)}}),l.apply(this,arguments)}return n}Iv.exports=VC});var Yf=R((BN,Gv)=>{"use strict";Gv.exports=qe;var On;qe.ReadableState=Kv;var HN=require("events").EventEmitter,qv=function(e,i){return e.listeners(i).length},Ja=Kf(),il=require("buffer").Buffer,WC=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function YC(t){return il.from(t)}function $C(t){return il.isBuffer(t)||t instanceof WC}var Zf=require("util"),Oe;Zf&&Zf.debuglog?Oe=Zf.debuglog("stream"):Oe=function(){};var ZC=fv(),rp=Hf(),QC=Bf(),XC=QC.getHighWaterMark,rl=Ui().codes,JC=rl.ERR_INVALID_ARG_TYPE,eO=rl.ERR_STREAM_PUSH_AFTER_EOF,tO=rl.ERR_METHOD_NOT_IMPLEMENTED,iO=rl.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Dn,Qf,Xf;Ve()(qe,Ja);var Xa=rp.errorOrDestroy,Jf=["error","close","destroy","pause","resume"];function rO(t,e,i){if(typeof t.prependListener=="function")return t.prependListener(e,i);!t._events||!t._events[e]?t.on(e,i):Array.isArray(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]}function Kv(t,e,i){On=On||Tr(),t=t||{},typeof i!="boolean"&&(i=e instanceof On),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=XC(this,t,"readableHighWaterMark",i),this.buffer=new ZC,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Dn||(Dn=require("string_decoder/").StringDecoder),this.decoder=new Dn(t.encoding),this.encoding=t.encoding)}function qe(t){if(On=On||Tr(),!(this instanceof qe))return new qe(t);var e=this instanceof On;this._readableState=new Kv(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),Ja.call(this)}Object.defineProperty(qe.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});qe.prototype.destroy=rp.destroy;qe.prototype._undestroy=rp.undestroy;qe.prototype._destroy=function(t,e){e(t)};qe.prototype.push=function(t,e){var i=this._readableState,r;return i.objectMode?r=!0:typeof t=="string"&&(e=e||i.defaultEncoding,e!==i.encoding&&(t=il.from(t,e),e=""),r=!0),jv(this,t,e,!1,r)};qe.prototype.unshift=function(t){return jv(this,t,null,!0,!1)};function jv(t,e,i,r,n){Oe("readableAddChunk",e);var a=t._readableState;if(e===null)a.reading=!1,sO(t,a);else{var s;if(n||(s=nO(a,e)),s)Xa(t,s);else if(a.objectMode||e&&e.length>0)if(typeof e!="string"&&!a.objectMode&&Object.getPrototypeOf(e)!==il.prototype&&(e=YC(e)),r)a.endEmitted?Xa(t,new iO):ep(t,a,e,!0);else if(a.ended)Xa(t,new eO);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!i?(e=a.decoder.write(e),a.objectMode||e.length!==0?ep(t,a,e,!1):ip(t,a)):ep(t,a,e,!1)}else r||(a.reading=!1,ip(t,a))}return!a.ended&&(a.length<a.highWaterMark||a.length===0)}function ep(t,e,i,r){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",i)):(e.length+=e.objectMode?1:i.length,r?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&nl(t)),ip(t,e)}function nO(t,e){var i;return!$C(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(i=new JC("chunk",["string","Buffer","Uint8Array"],e)),i}qe.prototype.isPaused=function(){return this._readableState.flowing===!1};qe.prototype.setEncoding=function(t){Dn||(Dn=require("string_decoder/").StringDecoder);var e=new Dn(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,r="";i!==null;)r+=e.write(i.data),i=i.next;return this._readableState.buffer.clear(),r!==""&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var Nv=1073741824;function aO(t){return t>=Nv?t=Nv:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function kv(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=aO(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}qe.prototype.read=function(t){Oe("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Oe("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?tp(this):nl(this),null;if(t=kv(t,e),t===0&&e.ended)return e.length===0&&tp(this),null;var r=e.needReadable;Oe("need readable",r),(e.length===0||e.length-t<e.highWaterMark)&&(r=!0,Oe("length less than watermark",r)),e.ended||e.reading?(r=!1,Oe("reading or ended",r)):r&&(Oe("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=kv(i,e)));var n;return t>0?n=Bv(t,e):n=null,n===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&tp(this)),n!==null&&this.emit("data",n),n};function sO(t,e){if(Oe("onEofChunk"),!e.ended){if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,e.sync?nl(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,Fv(t)))}}function nl(t){var e=t._readableState;Oe("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Oe("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(Fv,t))}function Fv(t){var e=t._readableState;Oe("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,np(t)}function ip(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(oO,t,e))}function oO(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var i=e.length;if(Oe("maybeReadMore read 0"),t.read(0),i===e.length)break}e.readingMore=!1}qe.prototype._read=function(t){Xa(this,new tO("_read()"))};qe.prototype.pipe=function(t,e){var i=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t);break}r.pipesCount+=1,Oe("pipe count=%d opts=%j",r.pipesCount,e);var n=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,a=n?l:O;r.endEmitted?process.nextTick(a):i.once("end",a),t.on("unpipe",s);function s(P,L){Oe("onunpipe"),P===i&&L&&L.hasUnpiped===!1&&(L.hasUnpiped=!0,x())}function l(){Oe("onend"),t.end()}var p=lO(i);t.on("drain",p);var y=!1;function x(){Oe("cleanup"),t.removeListener("close",C),t.removeListener("finish",T),t.removeListener("drain",p),t.removeListener("error",M),t.removeListener("unpipe",s),i.removeListener("end",l),i.removeListener("end",O),i.removeListener("data",S),y=!0,r.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&p()}i.on("data",S);function S(P){Oe("ondata");var L=t.write(P);Oe("dest.write",L),L===!1&&((r.pipesCount===1&&r.pipes===t||r.pipesCount>1&&Uv(r.pipes,t)!==-1)&&!y&&(Oe("false write response, pause",r.awaitDrain),r.awaitDrain++),i.pause())}function M(P){Oe("onerror",P),O(),t.removeListener("error",M),qv(t,"error")===0&&Xa(t,P)}rO(t,"error",M);function C(){t.removeListener("finish",T),O()}t.once("close",C);function T(){Oe("onfinish"),t.removeListener("close",C),O()}t.once("finish",T);function O(){Oe("unpipe"),i.unpipe(t)}return t.emit("pipe",i),r.flowing||(Oe("pipe resume"),i.resume()),t};function lO(t){return function(){var i=t._readableState;Oe("pipeOnDrain",i.awaitDrain),i.awaitDrain&&i.awaitDrain--,i.awaitDrain===0&&qv(t,"data")&&(i.flowing=!0,np(t))}}qe.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i),this);if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var a=0;a<n;a++)r[a].emit("unpipe",this,{hasUnpiped:!1});return this}var s=Uv(e.pipes,t);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i),this)};qe.prototype.on=function(t,e){var i=Ja.prototype.on.call(this,t,e),r=this._readableState;return t==="data"?(r.readableListening=this.listenerCount("readable")>0,r.flowing!==!1&&this.resume()):t==="readable"&&!r.endEmitted&&!r.readableListening&&(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,Oe("on readable",r.length,r.reading),r.length?nl(this):r.reading||process.nextTick(cO,this)),i};qe.prototype.addListener=qe.prototype.on;qe.prototype.removeListener=function(t,e){var i=Ja.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(Hv,this),i};qe.prototype.removeAllListeners=function(t){var e=Ja.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(Hv,this),e};function Hv(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function cO(t){Oe("readable nexttick read 0"),t.read(0)}qe.prototype.resume=function(){var t=this._readableState;return t.flowing||(Oe("resume"),t.flowing=!t.readableListening,uO(this,t)),t.paused=!1,this};function uO(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(fO,t,e))}function fO(t,e){Oe("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),np(t),e.flowing&&!e.reading&&t.read(0)}qe.prototype.pause=function(){return Oe("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Oe("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function np(t){var e=t._readableState;for(Oe("flow",e.flowing);e.flowing&&t.read()!==null;);}qe.prototype.wrap=function(t){var e=this,i=this._readableState,r=!1;t.on("end",function(){if(Oe("wrapped end"),i.decoder&&!i.ended){var s=i.decoder.end();s&&s.length&&e.push(s)}e.push(null)}),t.on("data",function(s){if(Oe("wrapped data"),i.decoder&&(s=i.decoder.write(s)),!(i.objectMode&&s==null)&&!(!i.objectMode&&(!s||!s.length))){var l=e.push(s);l||(r=!0,t.pause())}});for(var n in t)this[n]===void 0&&typeof t[n]=="function"&&(this[n]=function(l){return function(){return t[l].apply(t,arguments)}}(n));for(var a=0;a<Jf.length;a++)t.on(Jf[a],this.emit.bind(this,Jf[a]));return this._read=function(s){Oe("wrapped _read",s),r&&(r=!1,t.resume())},this};typeof Symbol=="function"&&(qe.prototype[Symbol.asyncIterator]=function(){return Qf===void 0&&(Qf=Ov()),Qf(this)});Object.defineProperty(qe.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(qe.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(qe.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});qe._fromList=Bv;Object.defineProperty(qe.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Bv(t,e){if(e.length===0)return null;var i;return e.objectMode?i=e.buffer.shift():!t||t>=e.length?(e.decoder?i=e.buffer.join(""):e.buffer.length===1?i=e.buffer.first():i=e.buffer.concat(e.length),e.buffer.clear()):i=e.buffer.consume(t,e.decoder),i}function tp(t){var e=t._readableState;Oe("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(pO,e,t))}function pO(t,e){if(Oe("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var i=e._writableState;(!i||i.autoDestroy&&i.finished)&&e.destroy()}}typeof Symbol=="function"&&(qe.from=function(t,e){return Xf===void 0&&(Xf=Lv()),Xf(qe,t,e)});function Uv(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}});var ap=R((UN,Vv)=>{"use strict";Vv.exports=bi;var al=Ui().codes,dO=al.ERR_METHOD_NOT_IMPLEMENTED,hO=al.ERR_MULTIPLE_CALLBACK,mO=al.ERR_TRANSFORM_ALREADY_TRANSFORMING,gO=al.ERR_TRANSFORM_WITH_LENGTH_0,sl=Tr();Ve()(bi,sl);function yO(t,e){var i=this._transformState;i.transforming=!1;var r=i.writecb;if(r===null)return this.emit("error",new hO);i.writechunk=null,i.writecb=null,e!=null&&this.push(e),r(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function bi(t){if(!(this instanceof bi))return new bi(t);sl.call(this,t),this._transformState={afterTransform:yO.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",vO)}function vO(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,i){zv(t,e,i)}):zv(this,null,null)}bi.prototype.push=function(t,e){return this._transformState.needTransform=!1,sl.prototype.push.call(this,t,e)};bi.prototype._transform=function(t,e,i){i(new dO("_transform()"))};bi.prototype._write=function(t,e,i){var r=this._transformState;if(r.writecb=i,r.writechunk=t,r.writeencoding=e,!r.transforming){var n=this._readableState;(r.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}};bi.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};bi.prototype._destroy=function(t,e){sl.prototype._destroy.call(this,t,function(i){e(i)})};function zv(t,e,i){if(e)return t.emit("error",e);if(i!=null&&t.push(i),t._writableState.length)throw new gO;if(t._transformState.transforming)throw new mO;return t.push(null)}});var $v=R((GN,Yv)=>{"use strict";Yv.exports=es;var Wv=ap();Ve()(es,Wv);function es(t){if(!(this instanceof es))return new es(t);Wv.call(this,t)}es.prototype._transform=function(t,e,i){i(null,t)}});var e_=R((zN,Jv)=>{"use strict";var sp;function _O(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var Xv=Ui().codes,bO=Xv.ERR_MISSING_ARGS,xO=Xv.ERR_STREAM_DESTROYED;function Zv(t){if(t)throw t}function wO(t){return t.setHeader&&typeof t.abort=="function"}function EO(t,e,i,r){r=_O(r);var n=!1;t.on("close",function(){n=!0}),sp===void 0&&(sp=Jo()),sp(t,{readable:e,writable:i},function(s){if(s)return r(s);n=!0,r()});var a=!1;return function(s){if(!n&&!a){if(a=!0,wO(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();r(s||new xO("pipe"))}}}function Qv(t){t()}function MO(t,e){return t.pipe(e)}function SO(t){return!t.length||typeof t[t.length-1]!="function"?Zv:t.pop()}function AO(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var r=SO(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new bO("streams");var n,a=e.map(function(s,l){var p=l<e.length-1,y=l>0;return EO(s,p,y,function(x){n||(n=x),x&&a.forEach(Qv),!p&&(a.forEach(Qv),r(n))})});return e.reduce(MO)}Jv.exports=AO});var Pn=R((jt,is)=>{var ts=require("stream");process.env.READABLE_STREAM==="disable"&&ts?(is.exports=ts.Readable,Object.assign(is.exports,ts),is.exports.Stream=ts):(jt=is.exports=Yf(),jt.Stream=ts||jt,jt.Readable=jt,jt.Writable=zf(),jt.Duplex=Tr(),jt.Transform=ap(),jt.PassThrough=$v(),jt.finished=Jo(),jt.pipeline=e_())});var lp=R(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});ol.ParseHeaderStream=void 0;var TO=Pn(),Ft=rt(),RO=_t(),CO=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"),OO=(0,RO.deserializeFactory)(CO,Ft.NodeAlgorithmSuite),DO=TO.Transform,op=class extends DO{materialsManager;commitmentPolicy;signaturePolicy;maxEncryptedDataKeys;_headerState;constructor(e,{commitmentPolicy:i,maxEncryptedDataKeys:r},n){super(),(0,Ft.needs)(Ft.CommitmentPolicy[i],"Invalid commitment policy."),(0,Ft.needs)(Ft.SignaturePolicy[e],"Invalid signature policy."),(0,Ft.needs)(r===!1||r>=1,"Invalid maxEncryptedDataKeys value."),Object.defineProperty(this,"materialsManager",{value:n,enumerable:!0}),Object.defineProperty(this,"commitmentPolicy",{value:i,enumerable:!0}),Object.defineProperty(this,"maxEncryptedDataKeys",{value:r,enumerable:!0}),this._headerState={buffer:Buffer.alloc(0),headerParsed:!1},Object.defineProperty(this,"signaturePolicy",{value:e,enumerable:!0})}_transform(e,i,r){try{let{_headerState:n,commitmentPolicy:a,materialsManager:s,signaturePolicy:l,maxEncryptedDataKeys:p}=this,{buffer:y}=n,x=Buffer.concat([y,e]),S=OO.deserializeMessageHeader(x,{maxEncryptedDataKeys:p});if(!S)return n.buffer=x,r();let{messageHeader:M,algorithmSuite:C}=S,T=Buffer.from(M.messageId).toString("hex");Ft.CommitmentPolicySuites.isDecryptEnabled(a,C,T),Ft.SignaturePolicySuites.isDecryptEnabled(l,C,T);let{rawHeader:O,headerAuth:P}=S,{headerIv:L,headerAuthTag:U,headerAuthLength:z}=P,V=new Ft.NodeAlgorithmSuite(C.id),{messageId:Be,encryptionContext:De,encryptedDataKeys:Je}=M;s.decryptMaterials({suite:V,encryptionContext:De,encryptedDataKeys:Je}).then(Ae=>{Ft.CommitmentPolicySuites.isDecryptEnabled(a,Ae.suite,T),Ft.SignaturePolicySuites.isDecryptEnabled(l,Ae.suite,T),n.buffer=Buffer.alloc(0);let{getDecipherInfo:tt,getVerify:A,dispose:f}=(0,Ft.getDecryptionHelper)(Ae),_=tt(Be,M.suiteData),h=_(L);h.setAAD(Buffer.from(O.buffer,O.byteOffset,O.byteLength)),h.setAuthTag(Buffer.from(U.buffer,U.byteOffset,U.byteLength)),h.update(Buffer.alloc(0)),h.final();let o=A?A():void 0,u={headerInfo:S,getDecipher:_,verify:o,dispose:f};this.emit("VerifyInfo",u),this.emit("MessageHeader",S.messageHeader),n.headerParsed=!0;let m=O.byteLength+z,v=x.slice(m);return this._transform=(g,c,b)=>{try{b(null,g)}catch(w){this.emit("error",w)}},setImmediate(()=>this._transform(v,i,r))}).catch(Ae=>r(Ae))}catch(n){this.emit("error",n)}}_flush(e){e(this._headerState.headerParsed?void 0:new Error("Incomplete Header"))}};ol.ParseHeaderStream=op});var fp=R(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});ll.VerifyStream=void 0;var PO=Pn(),In=rt(),cp=_t(),IO=lp(),LO=PO.Transform,up=class extends LO{_headerInfo;_verifyState={buffer:Buffer.alloc(0),authTagBuffer:Buffer.alloc(0),signatureInfo:Buffer.alloc(0),sequenceNumber:0,finalAuthTagReceived:!1};_verify;_maxBodySize;constructor({maxBodySize:e}){super(),(0,In.needs)(!e||typeof e=="number","Unsupported MaxBodySize."),Object.defineProperty(this,"_maxBodySize",{value:e,enumerable:!0}),this.on("pipe",i=>{(0,In.needs)(i instanceof IO.ParseHeaderStream,"Unsupported source"),i.once("VerifyInfo",r=>{let{getDecipher:n,verify:a,headerInfo:s,dispose:l}=r,{messageId:p,contentType:y}=s.messageHeader;if(a){let{rawHeader:S,headerAuth:M,messageHeader:C}=s,{headerIv:T,headerAuthTag:O}=M;a.update(S),a.update((0,cp.serializeMessageHeaderAuth)({headerIv:T,headerAuthTag:O,messageHeader:C}))}Object.defineProperty(this,"_headerInfo",{value:s,enumerable:!0}),Object.defineProperty(this,"_verify",{value:a,enumerable:!0});let x={messageId:Buffer.from(p.buffer||p,p.byteOffset||0,p.byteLength),contentType:y,getDecipher:n,dispose:l};this.emit("DecipherInfo",x)})})}_transform(e,i,r){(0,In.needs)(this._headerInfo,"VerifyStream not configured, VerifyInfo event not yet received.");let n=this._verifyState,{currentFrame:a}=n;if(!a){let{buffer:x}=n,S=Buffer.concat([x,e]),M=(0,cp.decodeBodyHeader)(S,this._headerInfo,0);if(!M)return n.buffer=S,r();(0,In.needs)(!this._maxBodySize||this._maxBodySize>=M.contentLength,"maxBodySize exceeded."),n.sequenceNumber+=1,(0,In.needs)(M.sequenceNumber===n.sequenceNumber,"Encrypted body sequence out of order."),this._verify&&this._verify.update(S.slice(0,M.readPos));let C=S.slice(M.readPos);return this.emit("BodyInfo",M),n.currentFrame=M,setImmediate(()=>this._transform(C,i,r))}let{contentLength:s}=a;if(e.length&&s>0){if(s>e.length)return a.contentLength-=e.length,this.push(e),r();{let x=e.slice(0,s),S=e.slice(x.length);return this.push(x),a.contentLength=0,setImmediate(()=>this._transform(S,i,r))}}let{tagLength:l}=a,p=l/8,{authTagBuffer:y}=n;if(e.length&&p>y.length){let x=p-y.length;if(x>e.length)return n.authTagBuffer=Buffer.concat([y,e]),r();{let S=Buffer.concat([y,e],p);this._verify&&this._verify.update(S),n.buffer=Buffer.alloc(0),n.currentFrame=void 0,n.authTagBuffer=Buffer.alloc(0),a.isFinalFrame&&(this._verifyState.finalAuthTagReceived=!0,this._transform=(T,O,P)=>{T.length&&(n.signatureInfo=Buffer.concat([n.signatureInfo,T])),P()});let M=e.slice(x),C=()=>this._transform(M,i,r);return this.emit("AuthTag",S,C)}}r()}push(e,i){return this._verify&&e&&this._verify.update(e),super.push(e,i)}_flush(e){let{finalAuthTagReceived:i}=this._verifyState;if(!i)return e(new Error("Incomplete message"));if(!this._verify)return e();try{let{signatureInfo:r}=this._verifyState,{buffer:n,byteOffset:a,byteLength:s}=(0,cp.deserializeSignature)(r),l=Buffer.from(n,a,s),p=this._verify.awsCryptoVerify(l);(0,In.needs)(p,"Invalid Signature"),e()}catch(r){e(r)}}};ll.VerifyStream=up});var r_=R(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});cl.getDecipherStream=void 0;var NO=Pn(),Dr=rt(),kO=_t(),qO=fp(),KO=t=>Buffer.from(t,"utf8"),t_=(0,kO.aadFactory)(KO),jO=NO.Transform,FO=async()=>new Promise(t=>setImmediate(t)),i_=()=>{};function HO(){let t,e={},i=i_,r=!1;return new class extends jO{constructor(){super(),this.on("pipe",a=>{(0,Dr.needs)(a instanceof qO.VerifyStream,"Unsupported source"),a.once("DecipherInfo",s=>{t=s}).on("BodyInfo",this._onBodyHeader).on("AuthTag",(s,l)=>{this._onAuthTag(s,l).catch(p=>this.emit("error",p))})})}_onBodyHeader=({iv:a,contentLength:s,sequenceNumber:l,isFinalFrame:p})=>{(0,Dr.needs)(t,"Malformed State."),(0,Dr.needs)(!e.decipher,"Malformed State.");let{messageId:y,contentType:x,getDecipher:S}=t,M=t_.messageAADContentString({contentType:x,isFinalFrame:p}),C=t_.messageAAD(y,M,l,s);e={decipher:S(a).setAAD(Buffer.from(C.buffer,C.byteOffset,C.byteLength)),content:[],contentLength:s}};_transform(a,s,l){(0,Dr.needs)(e.decipher,"Malformed State."),e.contentLength-=a.length,(0,Dr.needs)(e.contentLength>=0,"Lengths do not match");let{content:p}=e;p.push(a),e.contentLength>0?l():r=l}_read(a){i(),i=i_,super._read(a)}_onAuthTag=async(a,s)=>{let{decipher:l,content:p,contentLength:y}=e;(0,Dr.needs)(r||y===0,"AuthTag before frame."),(0,Dr.needs)(y===0,"Lengths do not match"),e={},l.setAuthTag(a),p.length||l.update(Buffer.alloc(0));let x=[];for(let M of p){let C=l.update(M);x.push(C),await FO()}let S=l.final();x.push(S);for(let M of x)this.push(M)||await new Promise(C=>{i=C});s(),r&&r(),r=!1};_destroy(){t&&t.dispose()}}}cl.getDecipherStream=HO});var pp=R(Ln=>{"use strict";var BO=Ln&&Ln.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ln,"__esModule",{value:!0});Ln._decryptStream=void 0;var n_=rt(),UO=lp(),GO=fp(),zO=r_(),VO=BO(Nf()),a_=Pn();function WO(t,e,{maxBodySize:i}={}){e=e instanceof n_.KeyringNode?new n_.NodeDefaultCryptographicMaterialsManager(e):e;let r=new UO.ParseHeaderStream(t.signaturePolicy,t.clientOptions,e),n=new GO.VerifyStream({maxBodySize:i}),a=(0,zO.getDecipherStream)(),s=new VO.default(r,a);return(0,a_.pipeline)(r,n,a,new a_.PassThrough,l=>{l&&s.emit("error",l)}),r.once("MessageHeader",l=>s.emit("MessageHeader",l)),s}Ln._decryptStream=WO});var s_=R(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});ul._decrypt=void 0;var YO=pp(),$O=Pn();async function ZO(t,e,i,{encoding:r,maxBodySize:n}={}){let a=(0,YO._decryptStream)(t,e,{maxBodySize:n}),s=[],l=!1;if(a.once("MessageHeader",p=>{l=p}).on("data",p=>s.push(p)),i instanceof Uint8Array)a.end(i);else if(typeof i=="string")a.end(Buffer.from(i,r));else if(i.readable)i.pipe(a);else throw new Error("Unsupported ciphertext format");if(await QO(a),!l)throw new Error("Unknown format");return{plaintext:Buffer.concat(s),messageHeader:l}}ul._decrypt=ZO;async function QO(t){return new Promise((e,i)=>{(0,$O.finished)(t,r=>r?i(r):e())})}});var c_=R(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});fl.buildDecrypt=void 0;var o_=pp(),XO=s_(),Pr=rt();function l_(t={}){let{commitmentPolicy:e=Pr.CommitmentPolicy.REQUIRE_ENCRYPT_REQUIRE_DECRYPT,maxEncryptedDataKeys:i=!1}=typeof t=="string"?{commitmentPolicy:t}:t;(0,Pr.needs)(Pr.CommitmentPolicy[e],"Invalid commitment policy."),(0,Pr.needs)(i===!1||i>=1,"Invalid maxEncryptedDataKeys value.");let r={commitmentPolicy:e,maxEncryptedDataKeys:i};return{decryptUnsignedMessageStream:o_._decryptStream.bind({},{signaturePolicy:Pr.SignaturePolicy.ALLOW_ENCRYPT_FORBID_DECRYPT,clientOptions:r}),decryptStream:o_._decryptStream.bind({},{signaturePolicy:Pr.SignaturePolicy.ALLOW_ENCRYPT_ALLOW_DECRYPT,clientOptions:r}),decrypt:XO._decrypt.bind({},{signaturePolicy:Pr.SignaturePolicy.ALLOW_ENCRYPT_ALLOW_DECRYPT,clientOptions:r})}}fl.buildDecrypt=l_;var{decryptUnsignedMessageStream:JO,decryptStream:XN,decrypt:JN}=l_();JO({})});var dp=R(pl=>{"use strict";Object.defineProperty(pl,"__esModule",{value:!0});pl.buildDecrypt=void 0;var eD=c_();Object.defineProperty(pl,"buildDecrypt",{enumerable:!0,get:function(){return eD.buildDecrypt}})});var f_=R(u_=>{"use strict";Object.defineProperty(u_,"__esModule",{value:!0})});var p_=R(ci=>{"use strict";Object.defineProperty(ci,"__esModule",{value:!0});ci.cacheEntryHasExceededLimits=ci.decryptMaterials=ci.getEncryptionMaterials=ci.decorateProperties=void 0;var xt=Le(),dl=_t();function tD(t,e){let{cache:i,backingMaterialsManager:r,maxAge:n,maxBytesEncrypted:a,maxMessagesEncrypted:s,partition:l}=e;(0,xt.needs)(i,"You must provide a cache."),(0,xt.needs)(r,"You must provide a backing material source."),(0,xt.needs)(n>0,"You must configure a maxAge"),(0,xt.needs)(!a||a>0&&dl.Maximum.BYTES_PER_CACHED_KEY_LIMIT>=a,"maxBytesEncrypted is outside of bounds."),(0,xt.needs)(!s||s>0&&dl.Maximum.MESSAGES_PER_CACHED_KEY_LIMIT>=s,"maxMessagesEncrypted is outside of bounds."),(0,xt.needs)(l&&typeof l=="string","partition must be a string."),(0,xt.readOnlyProperty)(t,"_cache",i),(0,xt.readOnlyProperty)(t,"_backingMaterialsManager",r),(0,xt.readOnlyProperty)(t,"_maxAge",n),(0,xt.readOnlyProperty)(t,"_maxBytesEncrypted",a||dl.Maximum.BYTES_PER_CACHED_KEY_LIMIT),(0,xt.readOnlyProperty)(t,"_maxMessagesEncrypted",s||dl.Maximum.MESSAGES_PER_CACHED_KEY_LIMIT),(0,xt.readOnlyProperty)(t,"_partition",l)}ci.decorateProperties=tD;function iD({buildEncryptionMaterialCacheKey:t}){return async function(i){let{suite:r,encryptionContext:n,plaintextLength:a,commitmentPolicy:s}=i;if(r&&!r.cacheSafe||typeof a!="number"||a<0)return await this._backingMaterialsManager.getEncryptionMaterials(i);let l=await t(this._partition,{suite:r,encryptionContext:n}),p=this._cache.getEncryptionMaterial(l,a);if(p&&!this._cacheEntryHasExceededLimits(p))return hl(p.response);this._cache.del(l);let y=await this._backingMaterialsManager.getEncryptionMaterials({suite:r,encryptionContext:n,commitmentPolicy:s});if(!y.suite.cacheSafe)return y;let x={response:y,now:Date.now(),messagesEncrypted:1,bytesEncrypted:a};return this._cacheEntryHasExceededLimits(x)?y:(this._cache.putEncryptionMaterial(l,y,a,this._maxAge),hl(y))}}ci.getEncryptionMaterials=iD;function rD({buildDecryptionMaterialCacheKey:t}){return async function(i){let{suite:r}=i;if(!r.cacheSafe)return await this._backingMaterialsManager.decryptMaterials(i);let n=await t(this._partition,i),a=this._cache.getDecryptionMaterial(n);if(a&&!this._cacheEntryHasExceededLimits(a))return hl(a.response);this._cache.del(n);let s=await this._backingMaterialsManager.decryptMaterials(i);return this._cache.putDecryptionMaterial(n,s,this._maxAge),hl(s)}}ci.decryptMaterials=rD;function nD(){return function({now:e,messagesEncrypted:i,bytesEncrypted:r}){return Date.now()-e>this._maxAge||i>this._maxMessagesEncrypted||r>this._maxBytesEncrypted}}ci.cacheEntryHasExceededLimits=nD;function hl(t){return(0,xt.cloneMaterial)(t)}});var d_=R(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.compare=void 0;function aD(t,e){let i=t.byteLength>e.byteLength?e.byteLength:t.byteLength;for(let r=0;i>r;r+=1){if(t[r]>e[r])return 1;if(t[r]<e[r])return-1}return t.byteLength>e.byteLength?1:t.byteLength<e.byteLength?-1:0}ml.compare=aD});var h_=R(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});gl.buildCryptographicMaterialsCacheKeyHelpers=void 0;var hp=_t(),sD=d_(),oD=Buffer.alloc(64);function lD(t,e,i){let{serializeEncryptionContext:r,serializeEncryptedDataKey:n}=(0,hp.serializeFactory)(t);return{buildEncryptionMaterialCacheKey:a,buildDecryptionMaterialCacheKey:s,encryptedDataKeysHash:l,encryptionContextHash:p};async function a(y,{suite:x,encryptionContext:S}){let M=x?[new Uint8Array([1]),(0,hp.uInt16BE)(x.id)]:[new Uint8Array([0])],C=await i(await i(t(y)),...M,await p(S));return e(C)}async function s(y,{suite:x,encryptedDataKeys:S,encryptionContext:M}){let{id:C}=x,T=await i(await i(t(y)),(0,hp.uInt16BE)(C),...await l(S),oD,await p(M));return e(T)}async function l(y){return(await Promise.all(y.map(n).map(async S=>i(S)))).sort(sD.compare)}async function p(y){let x=r(y).slice(2);return i(x)}}gl.buildCryptographicMaterialsCacheKeyHelpers=lD});var g_=R((sk,m_)=>{"use strict";m_.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var v_=R((ok,y_)=>{"use strict";y_.exports=Ke;Ke.Node=Ir;Ke.create=Ke;function Ke(t){var e=this;if(e instanceof Ke||(e=new Ke),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(n){e.push(n)});else if(arguments.length>0)for(var i=0,r=arguments.length;i<r;i++)e.push(arguments[i]);return e}Ke.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,i=t.prev;return e&&(e.prev=i),i&&(i.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=i),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Ke.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Ke.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Ke.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)uD(this,arguments[t]);return this.length};Ke.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)fD(this,arguments[t]);return this.length};Ke.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Ke.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Ke.prototype.forEach=function(t,e){e=e||this;for(var i=this.head,r=0;i!==null;r++)t.call(e,i.value,r,this),i=i.next};Ke.prototype.forEachReverse=function(t,e){e=e||this;for(var i=this.tail,r=this.length-1;i!==null;r--)t.call(e,i.value,r,this),i=i.prev};Ke.prototype.get=function(t){for(var e=0,i=this.head;i!==null&&e<t;e++)i=i.next;if(e===t&&i!==null)return i.value};Ke.prototype.getReverse=function(t){for(var e=0,i=this.tail;i!==null&&e<t;e++)i=i.prev;if(e===t&&i!==null)return i.value};Ke.prototype.map=function(t,e){e=e||this;for(var i=new Ke,r=this.head;r!==null;)i.push(t.call(e,r.value,this)),r=r.next;return i};Ke.prototype.mapReverse=function(t,e){e=e||this;for(var i=new Ke,r=this.tail;r!==null;)i.push(t.call(e,r.value,this)),r=r.prev;return i};Ke.prototype.reduce=function(t,e){var i,r=this.head;if(arguments.length>1)i=e;else if(this.head)r=this.head.next,i=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=0;r!==null;n++)i=t(i,r.value,n),r=r.next;return i};Ke.prototype.reduceReverse=function(t,e){var i,r=this.tail;if(arguments.length>1)i=e;else if(this.tail)r=this.tail.prev,i=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=this.length-1;r!==null;n--)i=t(i,r.value,n),r=r.prev;return i};Ke.prototype.toArray=function(){for(var t=new Array(this.length),e=0,i=this.head;i!==null;e++)t[e]=i.value,i=i.next;return t};Ke.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,i=this.tail;i!==null;e++)t[e]=i.value,i=i.prev;return t};Ke.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var i=new Ke;if(e<t||e<0)return i;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,n=this.head;n!==null&&r<t;r++)n=n.next;for(;n!==null&&r<e;r++,n=n.next)i.push(n.value);return i};Ke.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var i=new Ke;if(e<t||e<0)return i;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,n=this.tail;n!==null&&r>e;r--)n=n.prev;for(;n!==null&&r>t;r--,n=n.prev)i.push(n.value);return i};Ke.prototype.splice=function(t,e,...i){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var r=0,n=this.head;n!==null&&r<t;r++)n=n.next;for(var a=[],r=0;n&&r<e;r++)a.push(n.value),n=this.removeNode(n);n===null&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(var r=0;r<i.length;r++)n=cD(this,n,i[r]);return a};Ke.prototype.reverse=function(){for(var t=this.head,e=this.tail,i=t;i!==null;i=i.prev){var r=i.prev;i.prev=i.next,i.next=r}return this.head=e,this.tail=t,this};function cD(t,e,i){var r=e===t.head?new Ir(i,null,e,t):new Ir(i,e,e.next,t);return r.next===null&&(t.tail=r),r.prev===null&&(t.head=r),t.length++,r}function uD(t,e){t.tail=new Ir(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function fD(t,e){t.head=new Ir(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function Ir(t,e,i,r){if(!(this instanceof Ir))return new Ir(t,e,i,r);this.list=r,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,i?(i.prev=this,this.next=i):this.next=null}try{g_()(Ke)}catch{}});var E_=R((lk,w_)=>{"use strict";var pD=v_(),Lr=Symbol("max"),wi=Symbol("length"),Nn=Symbol("lengthCalculator"),ns=Symbol("allowStale"),Nr=Symbol("maxAge"),xi=Symbol("dispose"),__=Symbol("noDisposeOnSet"),nt=Symbol("lruList"),$t=Symbol("cache"),x_=Symbol("updateAgeOnGet"),mp=()=>1,yp=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let i=this[Lr]=e.max||1/0,r=e.length||mp;if(this[Nn]=typeof r!="function"?mp:r,this[ns]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Nr]=e.maxAge||0,this[xi]=e.dispose,this[__]=e.noDisposeOnSet||!1,this[x_]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Lr]=e||1/0,rs(this)}get max(){return this[Lr]}set allowStale(e){this[ns]=!!e}get allowStale(){return this[ns]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Nr]=e,rs(this)}get maxAge(){return this[Nr]}set lengthCalculator(e){typeof e!="function"&&(e=mp),e!==this[Nn]&&(this[Nn]=e,this[wi]=0,this[nt].forEach(i=>{i.length=this[Nn](i.value,i.key),this[wi]+=i.length})),rs(this)}get lengthCalculator(){return this[Nn]}get length(){return this[wi]}get itemCount(){return this[nt].length}rforEach(e,i){i=i||this;for(let r=this[nt].tail;r!==null;){let n=r.prev;b_(this,e,r,i),r=n}}forEach(e,i){i=i||this;for(let r=this[nt].head;r!==null;){let n=r.next;b_(this,e,r,i),r=n}}keys(){return this[nt].toArray().map(e=>e.key)}values(){return this[nt].toArray().map(e=>e.value)}reset(){this[xi]&&this[nt]&&this[nt].length&&this[nt].forEach(e=>this[xi](e.key,e.value)),this[$t]=new Map,this[nt]=new pD,this[wi]=0}dump(){return this[nt].map(e=>yl(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[nt]}set(e,i,r){if(r=r||this[Nr],r&&typeof r!="number")throw new TypeError("maxAge must be a number");let n=r?Date.now():0,a=this[Nn](i,e);if(this[$t].has(e)){if(a>this[Lr])return kn(this,this[$t].get(e)),!1;let p=this[$t].get(e).value;return this[xi]&&(this[__]||this[xi](e,p.value)),p.now=n,p.maxAge=r,p.value=i,this[wi]+=a-p.length,p.length=a,this.get(e),rs(this),!0}let s=new vp(e,i,a,n,r);return s.length>this[Lr]?(this[xi]&&this[xi](e,i),!1):(this[wi]+=s.length,this[nt].unshift(s),this[$t].set(e,this[nt].head),rs(this),!0)}has(e){if(!this[$t].has(e))return!1;let i=this[$t].get(e).value;return!yl(this,i)}get(e){return gp(this,e,!0)}peek(e){return gp(this,e,!1)}pop(){let e=this[nt].tail;return e?(kn(this,e),e.value):null}del(e){kn(this,this[$t].get(e))}load(e){this.reset();let i=Date.now();for(let r=e.length-1;r>=0;r--){let n=e[r],a=n.e||0;if(a===0)this.set(n.k,n.v);else{let s=a-i;s>0&&this.set(n.k,n.v,s)}}}prune(){this[$t].forEach((e,i)=>gp(this,i,!1))}},gp=(t,e,i)=>{let r=t[$t].get(e);if(r){let n=r.value;if(yl(t,n)){if(kn(t,r),!t[ns])return}else i&&(t[x_]&&(r.value.now=Date.now()),t[nt].unshiftNode(r));return n.value}},yl=(t,e)=>{if(!e||!e.maxAge&&!t[Nr])return!1;let i=Date.now()-e.now;return e.maxAge?i>e.maxAge:t[Nr]&&i>t[Nr]},rs=t=>{if(t[wi]>t[Lr])for(let e=t[nt].tail;t[wi]>t[Lr]&&e!==null;){let i=e.prev;kn(t,e),e=i}},kn=(t,e)=>{if(e){let i=e.value;t[xi]&&t[xi](i.key,i.value),t[wi]-=i.length,t[$t].delete(i.key),t[nt].removeNode(e)}},vp=class{constructor(e,i,r,n,a){this.key=e,this.value=i,this.length=r,this.now=n,this.maxAge=a||0}},b_=(t,e,i,r)=>{let n=i.value;yl(t,n)&&(kn(t,i),t[ns]||(n=void 0)),n&&e.call(r,n.value,n.key,t)};w_.exports=yp});var M_=R(qn=>{"use strict";var dD=qn&&qn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qn,"__esModule",{value:!0});qn.getLocalCryptographicMaterialsCache=void 0;var hD=dD(E_()),Ht=Le();function mD(t,e=1e3*60){let i=new hD.default({max:t,dispose(n,a){a.response.zeroUnencryptedDataKey()}});return function n(){let a=setTimeout(()=>{r(),n()},e);a.unref&&a.unref()}(),{putEncryptionMaterial(n,a,s,l){(0,Ht.needs)(s>=0,"Malformed plaintextLength"),(0,Ht.needs)((0,Ht.isEncryptionMaterial)(a),"Malformed response."),(0,Ht.needs)(a.suite.cacheSafe,"Can not cache non-cache safe material");let p=Object.seal({response:a,bytesEncrypted:s,messagesEncrypted:1,now:Date.now()});i.set(n,p,l)},putDecryptionMaterial(n,a,s){(0,Ht.needs)((0,Ht.isDecryptionMaterial)(a),"Malformed response."),(0,Ht.needs)(a.suite.cacheSafe,"Can not cache non-cache safe material");let l=Object.seal({response:a,bytesEncrypted:0,messagesEncrypted:0,now:Date.now()});i.set(n,l,s)},getEncryptionMaterial(n,a){(0,Ht.needs)(a>=0,"Malformed plaintextLength");let s=i.get(n);return s?((0,Ht.needs)((0,Ht.isEncryptionMaterial)(s.response),"Malformed response."),s.bytesEncrypted+=a,s.messagesEncrypted+=1,s):!1},getDecryptionMaterial(n){let a=i.get(n);return a?((0,Ht.needs)((0,Ht.isDecryptionMaterial)(a.response),"Malformed response."),a):!1},del(n){i.del(n)}};function r(){let{tail:n}=i.dumpLru();if(!n)return;let{key:a}=n.value;i.peek(a)}}qn.getLocalCryptographicMaterialsCache=mD});var _p=R(ui=>{"use strict";var gD=ui&&ui.__createBinding||(Object.create?function(t,e,i,r){r===void 0&&(r=i);var n=Object.getOwnPropertyDescriptor(e,i);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,n)}:function(t,e,i,r){r===void 0&&(r=i),t[r]=e[i]}),vl=ui&&ui.__exportStar||function(t,e){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&gD(e,t,i)};Object.defineProperty(ui,"__esModule",{value:!0});vl(f_(),ui);vl(p_(),ui);vl(h_(),ui);vl(M_(),ui)});var S_=R(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});_l.sha512=void 0;var yD=require("crypto"),vD=async(...t)=>t.map(e=>typeof e=="string"?Buffer.from(e):e).reduce((e,i)=>e.update(i),(0,yD.createHash)("sha512")).digest();_l.sha512=vD});var R_=R(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});bl.NodeCachingMaterialsManager=void 0;var as=_p(),A_=rt(),_D=S_(),bD=require("crypto"),xD=t=>Buffer.from(t,"utf8"),wD=t=>Buffer.from(t).toString("utf8"),T_=(0,as.buildCryptographicMaterialsCacheKeyHelpers)(xD,wD,_D.sha512),bp=class{constructor(e){let i=e.backingMaterials instanceof A_.KeyringNode?new A_.NodeDefaultCryptographicMaterialsManager(e.backingMaterials):e.backingMaterials,{partition:r=(0,bD.randomBytes)(64).toString("base64")}=e;(0,as.decorateProperties)(this,{...e,backingMaterialsManager:i,partition:r})}getEncryptionMaterials=(0,as.getEncryptionMaterials)(T_);decryptMaterials=(0,as.decryptMaterials)(T_);_cacheEntryHasExceededLimits=(0,as.cacheEntryHasExceededLimits)()};bl.NodeCachingMaterialsManager=bp});var C_=R(Ei=>{"use strict";var ED=Ei&&Ei.__createBinding||(Object.create?function(t,e,i,r){r===void 0&&(r=i);var n=Object.getOwnPropertyDescriptor(e,i);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,n)}:function(t,e,i,r){r===void 0&&(r=i),t[r]=e[i]}),MD=Ei&&Ei.__exportStar||function(t,e){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&ED(e,t,i)};Object.defineProperty(Ei,"__esModule",{value:!0});Ei.getLocalCryptographicMaterialsCache=void 0;MD(R_(),Ei);var SD=_p();Object.defineProperty(Ei,"getLocalCryptographicMaterialsCache",{enumerable:!0,get:function(){return SD.getLocalCryptographicMaterialsCache}})});var D_=R(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.deferCache=Bt.cacheClients=Bt.excludeRegions=Bt.limitRegions=Bt.getClient=void 0;var xp=Le();function AD(t,e){return function(r){let n=r?{...e,region:r}:{...e},a=new t(n);return(0,xp.needs)(a.config.region,"A region is required"),a}}Bt.getClient=AD;function TD(t,e){return(0,xp.needs)(t.every(i=>!!i&&typeof i=="string"),"Can only limit on region strings"),i=>t.includes(i)?e(i):!1}Bt.limitRegions=TD;function RD(t,e){return(0,xp.needs)(t.every(i=>!!i&&typeof i=="string"),"Can only exclude on region strings"),i=>t.includes(i)?!1:e(i)}Bt.excludeRegions=RD;function CD(t){let e={};return i=>Object.prototype.hasOwnProperty.call(e,i)?e[i]:O_(e,i,t(i))}Bt.cacheClients=CD;function O_(t,e,i){if(!i)return t[e]=!1,!1;let{encrypt:r,decrypt:n,generateDataKey:a}=i;return["encrypt","decrypt","generateDataKey"].reduce(s,i);function s(l,p){let y=l[p];return l[p]=async function(S){let M=y.call(l,S);return("promise"in M?M.promise():M).then(T=>(t[e]=Object.assign(l,{encrypt:r,decrypt:n,generateDataKey:a}),T)).catch(async T=>(T.$metadata&&T.$metadata.httpStatusCode&&(t[e]=Object.assign(l,{encrypt:r,decrypt:n,generateDataKey:a})),Promise.reject(T)))},l}}Bt.deferCache=O_});var kr=R(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.constructArnInOtherRegion=Ze.mrkAwareAwsKmsKeyIdCompare=Ze.isMultiRegionAwsKmsIdentifier=Ze.isMultiRegionAwsKmsArn=Ze.validAwsKmsIdentifier=Ze.parseAwsKmsResource=Ze.getRegionFromIdentifier=Ze.parseAwsKmsKeyArn=Ze.KMS_SERVICE=void 0;var Kn=Le();Ze.KMS_SERVICE="kms";var P_="arn",wp="key",xl="alias",I_="mrk-",OD=[wp,xl];function jn(t){(0,Kn.needs)(t&&typeof t=="string","KMS key arn must be a non-null string.");let e=t.split(":");if(e.length===1)return Ep(t),!1;let[i,r,n,a="",s="",l=""]=e,[p,...y]=l.split("/"),x=y.join("/");return(0,Kn.needs)(i===P_&&r&&n===Ze.KMS_SERVICE&&a&&s&&OD.includes(p)&&x,"Malformed arn."),{Partition:r,Region:a,AccountId:s,ResourceType:p,ResourceId:x}}Ze.parseAwsKmsKeyArn=jn;function DD(t){let e=jn(t);return e?e.Region:""}Ze.getRegionFromIdentifier=DD;function Ep(t){(0,Kn.needs)(t.split(":").length===1,"Malformed resource.");let[e,...i]=t.split("/");(0,Kn.needs)(e===xl||!i.length,"Malformed resource.");let[r,n]=e===xl?[xl,i.join("/")]:[wp,e];return{ResourceType:r,ResourceId:n}}Ze.parseAwsKmsResource=Ep;function PD(t){return jn(t)||Ep(t)}Ze.validAwsKmsIdentifier=PD;function ss(t){let e=typeof t=="string"?jn(t):t;(0,Kn.needs)(e,"AWS KMS identifier is not an ARN");let{ResourceType:i,ResourceId:r}=e;return i===wp&&r.startsWith(I_)}Ze.isMultiRegionAwsKmsArn=ss;function ID(t){return t.startsWith("arn:")?ss(t):t.startsWith("alias/")?!1:!!t.startsWith(I_)}Ze.isMultiRegionAwsKmsIdentifier=ID;function LD(t,e){if(t===e)return!0;let i=jn(t),r=jn(e);return!i||!r||!ss(i)||!ss(r)?!1:i.Partition===r.Partition&&i.AccountId===r.AccountId&&i.ResourceType===r.ResourceType&&i.ResourceId===r.ResourceId}Ze.mrkAwareAwsKmsKeyIdCompare=LD;function ND(t,e){(0,Kn.needs)(ss(t),"Cannot attempt to construct an ARN in a new region from an non-MRK ARN.");let{Partition:i,AccountId:r,ResourceType:n,ResourceId:a}=t;return[P_,i,Ze.KMS_SERVICE,e,r,n+"/"+a].join(":")}Ze.constructArnInOtherRegion=ND});var ls=R(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.kmsResponseToEncryptedDataKey=ht.decrypt=ht.encrypt=ht.generateDataKey=ht.KMS_PROVIDER_ID=void 0;var Mp=kr(),os=Le();ht.KMS_PROVIDER_ID="aws-kms";async function kD(t,e,i,r,n){let a=typeof t=="function"?t((0,Mp.getRegionFromIdentifier)(i)):t;if(!a)return!1;let s=a.generateDataKey({KeyId:i,GrantTokens:n,NumberOfBytes:e,EncryptionContext:r}),p=await("promise"in s?s.promise():s);return FD(p)}ht.generateDataKey=kD;async function qD(t,e,i,r,n){let a=typeof t=="function"?t((0,Mp.getRegionFromIdentifier)(i)):t;if(!a)return!1;let s=a.encrypt({KeyId:i,Plaintext:e,EncryptionContext:r,GrantTokens:n}),p=await("promise"in s?s.promise():s);return HD(p)}ht.encrypt=qD;async function KD(t,{providerId:e,providerInfo:i,encryptedDataKey:r},n,a){(0,os.needs)(e===ht.KMS_PROVIDER_ID,"Unsupported providerId");let s=typeof t=="function"?t((0,Mp.getRegionFromIdentifier)(i)):t;if(!s)return!1;let l=s.decrypt({KeyId:i,CiphertextBlob:r,EncryptionContext:n,GrantTokens:a}),y=await("promise"in l?l.promise():l);return BD(y)}ht.decrypt=KD;function jD({KeyId:t,CiphertextBlob:e}){return new os.EncryptedDataKey({providerId:ht.KMS_PROVIDER_ID,providerInfo:t,encryptedDataKey:e})}ht.kmsResponseToEncryptedDataKey=jD;function FD(t){return(0,os.needs)(typeof t.KeyId=="string"&&t.Plaintext instanceof Uint8Array&&t.CiphertextBlob instanceof Uint8Array,"Malformed KMS response."),L_(t)}function HD(t){return(0,os.needs)(typeof t.KeyId=="string"&&t.CiphertextBlob instanceof Uint8Array,"Malformed KMS response."),t}function BD(t){return(0,os.needs)(typeof t.KeyId=="string"&&t.Plaintext instanceof Uint8Array,"Malformed KMS response."),L_(t)}function L_(t){let{Plaintext:e}=t;return t.Plaintext=new Uint8Array(e),e.fill(0),t}});var N_=R(wl=>{"use strict";Object.defineProperty(wl,"__esModule",{value:!0});wl.KmsKeyringClass=void 0;var He=Le(),Yi=ls(),Sp=kr();function UD(t){class e extends t{constructor({clientProvider:r,generatorKeyId:n,keyIds:a=[],grantTokens:s,discovery:l,discoveryFilter:p}){super(),(0,He.needs)(this.constructor!==e,"new KmsKeyring is not allowed"),(0,He.needs)(!(!l&&!n&&!a.length),"Noop keyring is not allowed: Set a keyId or discovery"),(0,He.needs)(!(l&&(n||a.length)),"A keyring can be either a Discovery or have keyIds configured."),(0,He.needs)(l||!l&&!p,"Account and partition decrypt filtering are only supported when discovery === true"),(0,He.needs)(!p||p.accountIDs&&p.accountIDs.length&&!!p.partition&&p.accountIDs.every(y=>typeof y=="string"&&!!y),"A discovery filter must be able to match something."),(0,He.needs)(!n||(0,Sp.validAwsKmsIdentifier)(n),"Malformed arn."),(0,He.needs)(a.every(y=>(0,Sp.validAwsKmsIdentifier)(y)),"Malformed arn."),(0,He.needs)(typeof r=="function","Missing clientProvider"),(0,He.readOnlyProperty)(this,"clientProvider",r),(0,He.readOnlyProperty)(this,"keyIds",Object.freeze(a.slice())),(0,He.readOnlyProperty)(this,"generatorKeyId",n),(0,He.readOnlyProperty)(this,"grantTokens",s),(0,He.readOnlyProperty)(this,"isDiscovery",!!l),(0,He.readOnlyProperty)(this,"discoveryFilter",p&&Object.freeze({...p,accountIDs:Object.freeze(p.accountIDs)}))}async _onEncrypt(r){if(this.isDiscovery)return r;let n=this.keyIds.slice(),{clientProvider:a,generatorKeyId:s,grantTokens:l}=this;if(s&&!r.hasUnencryptedDataKey){let x=await(0,Yi.generateDataKey)(a,r.suite.keyLengthBytes,s,r.encryptionContext,l);if(!x)throw new Error("Generator KMS key did not generate a data key");let S=He.KeyringTraceFlag.WRAPPING_KEY_GENERATED_DATA_KEY|He.KeyringTraceFlag.WRAPPING_KEY_SIGNED_ENC_CTX|He.KeyringTraceFlag.WRAPPING_KEY_ENCRYPTED_DATA_KEY,M={keyNamespace:Yi.KMS_PROVIDER_ID,keyName:x.KeyId,flags:S};r.setUnencryptedDataKey(x.Plaintext,M).addEncryptedDataKey((0,Yi.kmsResponseToEncryptedDataKey)(x),He.KeyringTraceFlag.WRAPPING_KEY_ENCRYPTED_DATA_KEY|He.KeyringTraceFlag.WRAPPING_KEY_SIGNED_ENC_CTX)}else s&&n.unshift(s);let p=(0,He.unwrapDataKey)(r.getUnencryptedDataKey()),y=He.KeyringTraceFlag.WRAPPING_KEY_ENCRYPTED_DATA_KEY|He.KeyringTraceFlag.WRAPPING_KEY_SIGNED_ENC_CTX;for(let x of n){let S=await(0,Yi.encrypt)(a,p,x,r.encryptionContext,l);S&&r.addEncryptedDataKey((0,Yi.kmsResponseToEncryptedDataKey)(S),y)}return r}async _onDecrypt(r,n){let a=this.keyIds.slice(),{clientProvider:s,generatorKeyId:l,grantTokens:p}=this;l&&a.unshift(l);let y=n.filter(GD(a,this)),x=[];for(let S of y){let M=!1;try{M=await(0,Yi.decrypt)(s,S,r.encryptionContext,p)}catch(O){x.push({errPlus:O})}if(!M)continue;(0,He.needs)(M.KeyId===S.providerInfo,"KMS Decryption key does not match the requested key id.");let C=He.KeyringTraceFlag.WRAPPING_KEY_DECRYPTED_DATA_KEY|He.KeyringTraceFlag.WRAPPING_KEY_VERIFIED_ENC_CTX,T={keyNamespace:Yi.KMS_PROVIDER_ID,keyName:M.KeyId,flags:C};return r.setUnencryptedDataKey(M.Plaintext,T),r}return(0,He.needs)(r.hasValidKey()||!r.hasValidKey()&&!x.length,x.reduce((S,M,C)=>`${S} Error #${C+1} 
 ${M.errPlus.stack} 
`,`Unable to decrypt data key and one or more KMS CMKs had an error. 
 `)),r}}return(0,He.immutableClass)(e),e}wl.KmsKeyringClass=UD;function GD(t,{isDiscovery:e,discoveryFilter:i}){return function({providerId:n,providerInfo:a}){if(n!==Yi.KMS_PROVIDER_ID)return!1;if(e){if(!i)return!0;let s=(0,Sp.parseAwsKmsKeyArn)(a);(0,He.needs)(s,"Malformed arn in provider info.");let{AccountId:l,Partition:p}=s;return i.partition===p&&i.accountIDs.some(y=>y===l)}else return t.includes(a)}}});var k_=R(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});El.AwsKmsMrkAwareSymmetricKeyringClass=void 0;var Ue=Le(),$i=ls(),cs=kr();function zD(t){class e extends t{keyId;client;grantTokens;constructor({client:r,keyId:n,grantTokens:a}){super(),(0,Ue.needs)(n&&typeof n=="string","An AWS KMS key identifier is required."),(0,Ue.needs)((0,cs.validAwsKmsIdentifier)(n),`Key id ${n} is not a valid identifier.`),(0,Ue.needs)(!!r,"An AWS SDK client is required"),(0,Ue.readOnlyProperty)(this,"client",r),(0,Ue.readOnlyProperty)(this,"keyId",n),(0,Ue.readOnlyProperty)(this,"grantTokens",a)}async _onEncrypt(r){let{client:n,keyId:a,grantTokens:s}=this;if(r.hasUnencryptedDataKey){let l=(0,Ue.unwrapDataKey)(r.getUnencryptedDataKey()),p=Ue.KeyringTraceFlag.WRAPPING_KEY_ENCRYPTED_DATA_KEY|Ue.KeyringTraceFlag.WRAPPING_KEY_SIGNED_ENC_CTX,y=await(0,$i.encrypt)(n,l,a,r.encryptionContext,s);return(0,Ue.needs)(y,"AwsKmsMrkAwareSymmetricKeyring failed to encrypt data key"),(0,Ue.needs)((0,cs.parseAwsKmsKeyArn)(y.KeyId),"Malformed arn."),r.addEncryptedDataKey((0,$i.kmsResponseToEncryptedDataKey)(y),p),r}else{let l=await(0,$i.generateDataKey)(n,r.suite.keyLengthBytes,a,r.encryptionContext,s);(0,Ue.needs)(l,"Generator KMS key did not generate a data key"),(0,Ue.needs)((0,cs.parseAwsKmsKeyArn)(l.KeyId),"Malformed arn.");let p=Ue.KeyringTraceFlag.WRAPPING_KEY_GENERATED_DATA_KEY|Ue.KeyringTraceFlag.WRAPPING_KEY_SIGNED_ENC_CTX|Ue.KeyringTraceFlag.WRAPPING_KEY_ENCRYPTED_DATA_KEY,y={keyNamespace:$i.KMS_PROVIDER_ID,keyName:l.KeyId,flags:p};return r.setUnencryptedDataKey(l.Plaintext,y).addEncryptedDataKey((0,$i.kmsResponseToEncryptedDataKey)(l),Ue.KeyringTraceFlag.WRAPPING_KEY_ENCRYPTED_DATA_KEY|Ue.KeyringTraceFlag.WRAPPING_KEY_SIGNED_ENC_CTX),r}}async _onDecrypt(r,n){if(r.hasValidKey())return r;let{client:a,keyId:s,grantTokens:l}=this,p=n.filter(VD(s)),y=[];for(let x of p){let{providerId:S,encryptedDataKey:M}=x;try{let C=await(0,$i.decrypt)(a,{providerId:S,encryptedDataKey:M,providerInfo:this.keyId},r.encryptionContext,l);(0,Ue.needs)(C,"decrypt did not return a data key."),(0,Ue.needs)(C.KeyId===this.keyId,"KMS Decryption key does not match the requested key id.");let T=Ue.KeyringTraceFlag.WRAPPING_KEY_DECRYPTED_DATA_KEY|Ue.KeyringTraceFlag.WRAPPING_KEY_VERIFIED_ENC_CTX,O={keyNamespace:$i.KMS_PROVIDER_ID,keyName:C.KeyId,flags:T};return r.setUnencryptedDataKey(C.Plaintext,O),r}catch(C){y.push({errPlus:C})}}return(0,Ue.needs)(r.hasValidKey(),[`Unable to decrypt data key${p.length?"":": No EDKs supplied"}.`,...y.map((x,S)=>`Error #${S+1}  
${x.errPlus.stack}`)].join(`
`)),r}}return(0,Ue.immutableClass)(e),e}El.AwsKmsMrkAwareSymmetricKeyringClass=zD;function VD(t){return function({providerId:i,providerInfo:r}){if(i!==$i.KMS_PROVIDER_ID)return!1;let n=(0,cs.parseAwsKmsKeyArn)(r);return(0,Ue.needs)(n&&n.ResourceType==="key","Unexpected EDK ProviderInfo for AWS KMS EDK"),(0,cs.mrkAwareAwsKmsKeyIdCompare)(t,r)}}});var q_=R(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});Ml.AwsKmsMrkAwareSymmetricDiscoveryKeyringClass=void 0;var pt=Le(),us=kr(),Ap=ls();function WD(t){class e extends t{constructor({client:r,grantTokens:n,discoveryFilter:a}){super();let s=r.config.region;(0,pt.needs)(s,"Client must be configured to a region."),(0,pt.needs)(!a||a.accountIDs&&a.accountIDs.length&&!!a.partition&&a.accountIDs.every(l=>typeof l=="string"&&!!l),"A discovery filter must be able to match something."),(0,pt.readOnlyProperty)(this,"client",r),typeof s=="function"?this.clientRegion=s().then(l=>((0,pt.readOnlyProperty)(this,"clientRegion",l),l)):(0,pt.readOnlyProperty)(this,"clientRegion",s),(0,pt.readOnlyProperty)(this,"grantTokens",n),(0,pt.readOnlyProperty)(this,"discoveryFilter",a&&Object.freeze({...a,accountIDs:Object.freeze(a.accountIDs)}))}async _onEncrypt(){throw new Error("AwsKmsMrkAwareSymmetricDiscoveryKeyring cannot be used to encrypt")}async _onDecrypt(r,n){if(r.hasValidKey())return r;(0,pt.needs)(typeof this.clientRegion=="string"||typeof await this.clientRegion=="string","clientRegion MUST be a string.");let{client:a,grantTokens:s,clientRegion:l}=this,p=n.filter(YD(this)),y=[];for(let x of p){let S=x.providerInfo,M=(0,us.parseAwsKmsKeyArn)(x.providerInfo);(0,pt.needs)(M,"Unexpected EDK ProviderInfo for AWS KMS EDK"),(0,us.isMultiRegionAwsKmsArn)(M)&&(S=(0,us.constructArnInOtherRegion)(M,l));let C=!1;try{if(C=await(0,Ap.decrypt)(a,{providerId:x.providerId,providerInfo:S,encryptedDataKey:x.encryptedDataKey},r.encryptionContext,s),!C)continue;(0,pt.needs)(C.KeyId===S,"KMS Decryption key does not match the requested key id.");let T=pt.KeyringTraceFlag.WRAPPING_KEY_DECRYPTED_DATA_KEY|pt.KeyringTraceFlag.WRAPPING_KEY_VERIFIED_ENC_CTX,O={keyNamespace:Ap.KMS_PROVIDER_ID,keyName:C.KeyId,flags:T};return r.setUnencryptedDataKey(C.Plaintext,O),r}catch(T){y.push({errPlus:T})}}return(0,pt.needs)(r.hasValidKey(),[`Unable to decrypt data key${p.length?"":": No EDKs supplied"}.`,...y.map((x,S)=>`Error #${S+1}  
${x.errPlus.stack}`)].join(`
`)),r}}return(0,pt.immutableClass)(e),e}Ml.AwsKmsMrkAwareSymmetricDiscoveryKeyringClass=WD;function YD({discoveryFilter:t,clientRegion:e}){return function({providerId:r,providerInfo:n}){if(r!==Ap.KMS_PROVIDER_ID)return!1;let a=(0,us.parseAwsKmsKeyArn)(n);(0,pt.needs)(a&&a.ResourceType==="key","Unexpected EDK ProviderInfo for AWS KMS EDK");let{AccountId:s,Partition:l,Region:p}=a;return!(0,us.isMultiRegionAwsKmsArn)(a)&&e!==p?!1:!t||t.partition===l&&t.accountIDs.includes(s)}}});var F_=R(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.decomposeAwsKmsKeyArn=Fn.regionFromKmsKeyArn=void 0;var K_=Le(),$D=/^(alias|key)(\/.*)*$/;function ZD(t){let{region:e}=j_(t);return e}Fn.regionFromKmsKeyArn=ZD;function j_(t){(0,K_.needs)(typeof t=="string","KMS key arn must be a string.");let[e,i,r,n="",a=""]=t.split(":");return(0,K_.needs)(e==="arn"&&i&&r==="kms"&&n||!r&&!n&&e.match($D),"Malformed arn."),{partition:i,region:n,account:a}}Fn.decomposeAwsKmsKeyArn=j_});var B_=R(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});Sl.awsKmsMrkAreUnique=void 0;var H_=kr();function QD(t){let e=t.filter(n=>(0,H_.isMultiRegionAwsKmsIdentifier)(n));if(!e.length)return;let i=e.map(n=>{let a=(0,H_.parseAwsKmsKeyArn)(n);return a?a.ResourceId:n});if(new Set(i).size===e.length)return;let r=i.map((n,a,s)=>s.indexOf(n)!==s.lastIndexOf(n)?e[a]:!1).filter(n=>n).join(",");throw new Error(`Related multi-Region keys: ${r} are not allowed.`)}Sl.awsKmsMrkAreUnique=QD});var z_=R(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.identifier2ClientBuilder=Hn.getAwsKmsMrkAwareStrictMultiKeyringBuilder=void 0;var U_=Le(),XD=kr(),JD=B_();function e2(t,e,i){return function({generatorKeyId:n,keyIds:a=[],clientProvider:s=i,grantTokens:l}={}){let p=G_(s),y=n?[n,...a]:a;(0,U_.needs)(y.length&&y.every(M=>typeof M=="string"&&M!==""),"Noop keyring is not allowed: Set a generatorKeyId or at least one keyId."),(0,JD.awsKmsMrkAreUnique)(y);let x=n?new t({client:p(n),keyId:n,grantTokens:l}):void 0,S=a.map(M=>new t({client:p(M),keyId:M,grantTokens:l}));return new e({generator:x,children:S})}}Hn.getAwsKmsMrkAwareStrictMultiKeyringBuilder=e2;function G_(t){return function(i){let r=(0,XD.getRegionFromIdentifier)(i),n=t(r);return(0,U_.needs)(n,`Configured clientProvider is unable to create a client for configured ${i}.`),n}}Hn.identifier2ClientBuilder=G_});var V_=R(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});Al.getAwsKmsMrkAwareDiscoveryMultiKeyringBuilder=void 0;var Tp=Le();function t2(t,e,i){return function({regions:n,discoveryFilter:a,clientProvider:s=i,grantTokens:l}){(0,Tp.needs)(n.length,"Configured regions must contain at least one region."),(0,Tp.needs)(n.every(y=>typeof y=="string"&&!!y),"Configured regions must not contain a null or empty string as a region.");let p=n.map(s).map(y=>((0,Tp.needs)(y,"Configured clientProvider is unable to create a client for a configured region."),new t({client:y,discoveryFilter:a,grantTokens:l})));return new e({children:p})}}Al.getAwsKmsMrkAwareDiscoveryMultiKeyringBuilder=t2});var Bn=R(mt=>{"use strict";var i2=mt&&mt.__createBinding||(Object.create?function(t,e,i,r){r===void 0&&(r=i);var n=Object.getOwnPropertyDescriptor(e,i);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,n)}:function(t,e,i,r){r===void 0&&(r=i),t[r]=e[i]}),Zi=mt&&mt.__exportStar||function(t,e){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&i2(e,t,i)};Object.defineProperty(mt,"__esModule",{value:!0});Zi(D_(),mt);Zi(N_(),mt);Zi(k_(),mt);Zi(q_(),mt);Zi(ls(),mt);Zi(F_(),mt);Zi(z_(),mt);Zi(V_(),mt)});var W_=R(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});Tl.version=void 0;Tl.version="4.0.0"});var X_=R(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.KMS=at.cacheClients=at.excludeRegions=at.limitRegions=at.getClient=at.cacheKmsClients=at.getKmsClient=at.KmsKeyringNode=void 0;var qr=Bn();Object.defineProperty(at,"getClient",{enumerable:!0,get:function(){return qr.getClient}});Object.defineProperty(at,"limitRegions",{enumerable:!0,get:function(){return qr.limitRegions}});Object.defineProperty(at,"excludeRegions",{enumerable:!0,get:function(){return qr.excludeRegions}});Object.defineProperty(at,"cacheClients",{enumerable:!0,get:function(){return qr.cacheClients}});var Y_=rt(),$_=require("@aws-sdk/client-kms");Object.defineProperty(at,"KMS",{enumerable:!0,get:function(){return $_.KMS}});var r2=W_(),Z_=(0,qr.getClient)($_.KMS,{customUserAgent:`AwsEncryptionSdkJavascriptNodejs/${r2.version}`});at.getKmsClient=Z_;var Q_=(0,qr.cacheClients)(Z_);at.cacheKmsClients=Q_;var Rl=class extends(0,qr.KmsKeyringClass)(Y_.KeyringNode){constructor({clientProvider:e=Q_,keyIds:i,generatorKeyId:r,grantTokens:n,discovery:a}={}){super({clientProvider:e,keyIds:i,generatorKeyId:r,grantTokens:n,discovery:a})}};at.KmsKeyringNode=Rl;(0,Y_.immutableClass)(Rl)});var Rp=R(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});Cl.AwsKmsMrkAwareSymmetricKeyringNode=void 0;var n2=Bn(),a2=rt();Cl.AwsKmsMrkAwareSymmetricKeyringNode=(0,n2.AwsKmsMrkAwareSymmetricKeyringClass)(a2.KeyringNode)});var Cp=R(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});Ol.AwsKmsMrkAwareSymmetricDiscoveryKeyringNode=void 0;var s2=Bn(),o2=rt();Ol.AwsKmsMrkAwareSymmetricDiscoveryKeyringNode=(0,s2.AwsKmsMrkAwareSymmetricDiscoveryKeyringClass)(o2.KeyringNode)});var J_=R(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});Dl.buildAwsKmsMrkAwareStrictMultiKeyringNode=void 0;var l2=Bn(),c2=rt(),u2=Pl(),f2=Rp();Dl.buildAwsKmsMrkAwareStrictMultiKeyringNode=(0,l2.getAwsKmsMrkAwareStrictMultiKeyringBuilder)(f2.AwsKmsMrkAwareSymmetricKeyringNode,c2.MultiKeyringNode,u2.getKmsClient)});var eb=R(Il=>{"use strict";Object.defineProperty(Il,"__esModule",{value:!0});Il.buildAwsKmsMrkAwareDiscoveryMultiKeyringNode=void 0;var p2=Bn(),d2=Le(),h2=Pl(),m2=Cp();Il.buildAwsKmsMrkAwareDiscoveryMultiKeyringNode=(0,p2.getAwsKmsMrkAwareDiscoveryMultiKeyringBuilder)(m2.AwsKmsMrkAwareSymmetricDiscoveryKeyringNode,d2.MultiKeyringNode,h2.getKmsClient)});var Pl=R(Zt=>{"use strict";var g2=Zt&&Zt.__createBinding||(Object.create?function(t,e,i,r){r===void 0&&(r=i);var n=Object.getOwnPropertyDescriptor(e,i);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,n)}:function(t,e,i,r){r===void 0&&(r=i),t[r]=e[i]}),fs=Zt&&Zt.__exportStar||function(t,e){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&g2(e,t,i)};Object.defineProperty(Zt,"__esModule",{value:!0});fs(X_(),Zt);fs(Rp(),Zt);fs(Cp(),Zt);fs(J_(),Zt);fs(eb(),Zt)});var Lp=R(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});Ll.RawAesWrappingSuiteIdentifier=void 0;var Ip=Le(),Op=Ip.AlgorithmSuiteIdentifier.ALG_AES128_GCM_IV12_TAG16,Dp=Ip.AlgorithmSuiteIdentifier.ALG_AES192_GCM_IV12_TAG16,Pp=Ip.AlgorithmSuiteIdentifier.ALG_AES256_GCM_IV12_TAG16;Ll.RawAesWrappingSuiteIdentifier=Object.freeze({AES128_GCM_IV12_TAG16_NO_PADDING:Op,AES192_GCM_IV12_TAG16_NO_PADDING:Dp,AES256_GCM_IV12_TAG16_NO_PADDING:Pp,[Op]:Op,[Dp]:Dp,[Pp]:Pp})});var ib=R(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});Un.WebCryptoRawAesMaterial=Un.NodeRawAesMaterial=void 0;var Qt=Le(),tb=Lp(),Nl=class t{suite;setUnencryptedDataKey;getUnencryptedDataKey;zeroUnencryptedDataKey;hasUnencryptedDataKey;keyringTrace=[];encryptionContext=Object.freeze({});constructor(e){(0,Qt.needs)(tb.RawAesWrappingSuiteIdentifier[e],"suiteId not supported."),this.suite=new Qt.NodeAlgorithmSuite(e);let i=Qt.KeyringTraceFlag.WRAPPING_KEY_GENERATED_DATA_KEY;(0,Qt.decorateCryptographicMaterial)(this,i),Object.setPrototypeOf(this,t.prototype),Object.freeze(this)}hasValidKey(){return this.hasUnencryptedDataKey}};Un.NodeRawAesMaterial=Nl;(0,Qt.frozenClass)(Nl);var kl=class t{suite;setUnencryptedDataKey;getUnencryptedDataKey;zeroUnencryptedDataKey;hasUnencryptedDataKey;keyringTrace=[];setCryptoKey;getCryptoKey;hasCryptoKey;validUsages;encryptionContext=Object.freeze({});constructor(e){(0,Qt.needs)(tb.RawAesWrappingSuiteIdentifier[e],"suiteId not supported."),this.suite=new Qt.WebCryptoAlgorithmSuite(e),this.validUsages=Object.freeze(["decrypt","encrypt"]);let i=Qt.KeyringTraceFlag.WRAPPING_KEY_GENERATED_DATA_KEY;(0,Qt.decorateCryptographicMaterial)(this,i),(0,Qt.decorateWebCryptoMaterial)(this,i),Object.setPrototypeOf(this,t.prototype),Object.freeze(this)}hasValidKey(){return this.hasUnencryptedDataKey&&this.hasCryptoKey}};Un.WebCryptoRawAesMaterial=kl;(0,Qt.frozenClass)(kl)});var rb=R(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});Gn.rawAesEncryptedPartsFactory=Gn.rawAesEncryptedDataKeyFactory=void 0;var ql=_t(),ps=Le();function y2(t,e){return{rawAesEncryptedDataKey:i};function i(r,n,a,s,l){let p=a.byteLength,y=l.byteLength*8,x=(0,ql.concatBuffers)(s,l),S=r,M=(0,ql.concatBuffers)(e(n),(0,ql.uInt32BE)(y),(0,ql.uInt32BE)(p),a),C=t(M);return new ps.EncryptedDataKey({encryptedDataKey:x,providerId:S,providerInfo:C,rawInfo:M})}}Gn.rawAesEncryptedDataKeyFactory=y2;function v2(t){return{rawAesEncryptedParts:e};function e(i,r,{encryptedDataKey:n,rawInfo:a}){if(!(a instanceof Uint8Array))throw new Error("Malformed Encrypted Data Key.");a=a.slice(t(r).byteLength);let s=new DataView(a.buffer,a.byteOffset,a.byteLength),l=s.getUint32(0,!1),p=s.getUint32(4,!1);(0,ps.needs)(p===i.ivLength,"Malformed providerInfo"),(0,ps.needs)(l===i.tagLength,"Malformed providerInfo"),(0,ps.needs)(a.byteLength===8+p,"Malformed providerInfo");let y=l/8;(0,ps.needs)(n.byteLength===y+i.keyLengthBytes,"Malformed providerInfo");let x=a.slice(-p),S=n.slice(-y),M=n.slice(0,-y);return{authTag:S,ciphertext:M,iv:x}}}Gn.rawAesEncryptedPartsFactory=v2});var nb=R(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn._onDecrypt=zn._onEncrypt=void 0;var _2=Le();function b2(t){return async function(i){if(!i.hasUnencryptedDataKey){let r={keyName:this.keyName,keyNamespace:this.keyNamespace,flags:_2.KeyringTraceFlag.WRAPPING_KEY_GENERATED_DATA_KEY},n=await t(i.suite.keyLengthBytes);i.setUnencryptedDataKey(n,r)}return this._wrapKey(i)}}zn._onEncrypt=b2;function x2(){return async function(e,i){if(e.hasValidKey())return e;let r=i.filter(this._filter,this);if(!r.length)return e;for(let n of r)try{return await this._unwrapKey(e,n)}catch{}return e}}zn._onDecrypt=x2});var jl=R(fi=>{"use strict";var w2=fi&&fi.__createBinding||(Object.create?function(t,e,i,r){r===void 0&&(r=i);var n=Object.getOwnPropertyDescriptor(e,i);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,n)}:function(t,e,i,r){r===void 0&&(r=i),t[r]=e[i]}),Kl=fi&&fi.__exportStar||function(t,e){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&w2(e,t,i)};Object.defineProperty(fi,"__esModule",{value:!0});Kl(Lp(),fi);Kl(ib(),fi);Kl(rb(),fi);Kl(nb(),fi)});var sb=R(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});Bl.RawAesKeyringNode=void 0;var wt=rt(),Fl=require("crypto"),Np=_t(),ds=jl(),kp=t=>Buffer.from(t,"utf8"),E2=t=>Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"),{serializeEncryptionContext:ab}=(0,Np.serializeFactory)(kp),{rawAesEncryptedDataKey:M2}=(0,ds.rawAesEncryptedDataKeyFactory)(E2,kp),{rawAesEncryptedParts:S2}=(0,ds.rawAesEncryptedPartsFactory)(kp),Hl=class extends wt.KeyringNode{constructor(e){super();let{keyName:i,keyNamespace:r,unencryptedMasterKey:n,wrappingSuite:a}=e;(0,wt.needs)(i&&r,"Identifying information must be defined.");let s=new ds.NodeRawAesMaterial(a).setUnencryptedDataKey(n,{keyNamespace:r,keyName:i,flags:wt.KeyringTraceFlag.WRAPPING_KEY_GENERATED_DATA_KEY}),l=async y=>{let{buffer:x,byteOffset:S,byteLength:M}=ab(y.encryptionContext).slice(2),C=Buffer.from(x,S,M),{keyNamespace:T,keyName:O}=this;return R2(T,O,y,C,s)},p=async(y,x)=>{let{keyNamespace:S,keyName:M}=this,{buffer:C,byteOffset:T,byteLength:O}=ab(y.encryptionContext).slice(2),P=Buffer.from(C,T,O);return C2(S,M,y,s,x,P)};(0,wt.readOnlyProperty)(this,"keyName",i),(0,wt.readOnlyProperty)(this,"keyNamespace",r),(0,wt.readOnlyProperty)(this,"_wrapKey",l),(0,wt.readOnlyProperty)(this,"_unwrapKey",p)}_filter({providerId:e,providerInfo:i}){let{keyNamespace:r,keyName:n}=this;return e===r&&i.startsWith(n)}_onEncrypt=(0,ds._onEncrypt)(O2);_onDecrypt=(0,ds._onDecrypt)()};Bl.RawAesKeyringNode=Hl;(0,wt.immutableClass)(Hl);var A2=wt.KeyringTraceFlag.WRAPPING_KEY_ENCRYPTED_DATA_KEY|wt.KeyringTraceFlag.WRAPPING_KEY_SIGNED_ENC_CTX,T2=wt.KeyringTraceFlag.WRAPPING_KEY_DECRYPTED_DATA_KEY|wt.KeyringTraceFlag.WRAPPING_KEY_VERIFIED_ENC_CTX;function R2(t,e,i,r,n){let{encryption:a,ivLength:s}=n.suite,l=(0,Fl.randomBytes)(s),p=n.getUnencryptedDataKey(),y=(0,wt.unwrapDataKey)(i.getUnencryptedDataKey()),x=(0,Fl.createCipheriv)(a,p,l).setAAD(r),S=(0,Np.concatBuffers)(x.update(y),x.final()),M=x.getAuthTag(),C=M2(t,e,l,S,M);return i.addEncryptedDataKey(C,A2)}function C2(t,e,i,r,n,a){let{authTag:s,ciphertext:l,iv:p}=S2(i.suite,e,n),{encryption:y}=r.suite,x=(0,Fl.createDecipheriv)(y,r.getUnencryptedDataKey(),p).setAAD(a).setAuthTag(s),S=(0,Np.concatBuffers)(x.update(l),x.final()),M={keyNamespace:t,keyName:e,flags:T2};return i.setUnencryptedDataKey(S,M)}async function O2(t){return new Promise((e,i)=>{(0,Fl.randomBytes)(t,(r,n)=>{if(r)return i(r);e(n)})})}});var ob=R(Mi=>{"use strict";var D2=Mi&&Mi.__createBinding||(Object.create?function(t,e,i,r){r===void 0&&(r=i);var n=Object.getOwnPropertyDescriptor(e,i);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,n)}:function(t,e,i,r){r===void 0&&(r=i),t[r]=e[i]}),P2=Mi&&Mi.__exportStar||function(t,e){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&D2(e,t,i)};Object.defineProperty(Mi,"__esModule",{value:!0});Mi.RawAesWrappingSuiteIdentifier=void 0;var I2=jl();Object.defineProperty(Mi,"RawAesWrappingSuiteIdentifier",{enumerable:!0,get:function(){return I2.RawAesWrappingSuiteIdentifier}});P2(sb(),Mi)});var qp=R(Ul=>{"use strict";Object.defineProperty(Ul,"__esModule",{value:!0});Ul.oaepHashSupported=void 0;var lb=rt(),cb=require("crypto");Ul.oaepHashSupported=function(){let t=`-----BEGIN PUBLIC KEY-----
MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAs7RoNYEPAIws89VV+kra
rVv/4wbdmUAaAKWgWuxZi5na9GJSmnhCkqyLRm7wPbQY4LCoa5/IMUxkHLsYDPdu
udY0Qm0GcoxOlvJKHYo4RjF7HyiS34D6dvyO4Gd3aq0mZHoxSGCxW/7hf03wEMzc
iVJXWHXhaI0lD6nrzIEgLrE4L+3V2LeAQjvZsTKd+bYMqeZOL2syiVVIAU8POwAG
GVBroJoveFm/SUp6lCiN0M2kTeyQA2ax3QTtZSAa8nwrI7U52XOzVmdMicJsy2Pg
uW98te3MuODdK24yNkHIkYameP/Umf/SJshUJQd5a/TUp3XE+HhOWAumx22tIDlC
vZS11cuk2fp0WeHUnXaC19N5qWKfvHEKSugzty/z3lGP7ItFhrF2X1qJHeAAsL11
kjo6Lc48KsE1vKvbnW4VLyB3wdNiVvmUNO29tPXwaR0Q5Gbr3jk3nUzdkEHouHWQ
41lubOHCCBN3V13mh/MgtNhESHjfmmOnh54ErD9saA1d7CjTf8g2wqmjEqvGSW6N
q7zhcWR2tp1olflS7oHzul4/I3hnkfL6Kb2xAWWaQKvg3mtsY2OPlzFEP0tR5UcH
Pfp5CeS1Xzg7hN6vRICW6m4l3u2HJFld2akDMm1vnSz8RCbPW7jp7YBxUkWJmypM
tG7Yv2aGZXGbUtM8o1cZarECAwEAAQ==
-----END PUBLIC KEY-----`,e="i_am_not_valid";try{return(0,cb.publicEncrypt)({key:t,padding:cb.constants.RSA_PKCS1_OAEP_PADDING,oaepHash:e},Buffer.from([1,2,3,4])),!1}catch(i){return i instanceof lb.NotSupported?((0,lb.needs)(i.code==="ERR_OSSL_EVP_INVALID_DIGEST","Unexpected error testing oaepHash."),!0):Error("Unexpected error testing oaepHash.")}}()});var fb=R(zl=>{"use strict";Object.defineProperty(zl,"__esModule",{value:!0});zl.RawRsaKeyringNode=void 0;var Et=rt(),hs=require("crypto"),ub=jl(),L2=qp(),N2=["sha1","sha256","sha384","sha512",void 0],Gl=class extends Et.KeyringNode{constructor(e){super();let{rsaKey:i,keyName:r,keyNamespace:n,padding:a=hs.constants.RSA_PKCS1_OAEP_PADDING,oaepHash:s}=e,{publicKey:l,privateKey:p}=i;(0,Et.needs)(l||p,"No Key provided."),(0,Et.needs)(r&&n,"Identifying information must be defined."),(0,Et.needs)(a===hs.constants.RSA_PKCS1_OAEP_PADDING?L2.oaepHashSupported?N2.includes(s):!s||s==="sha1":!s,"Unsupported oaepHash");let y=async S=>{if(!l)throw new Error("No public key defined in constructor.  Encrypt disabled.");let{buffer:M,byteOffset:C,byteLength:T}=(0,Et.unwrapDataKey)(S.getUnencryptedDataKey()),O=(0,hs.publicEncrypt)({key:l,padding:a,oaepHash:s},Buffer.from(M,C,T)),P=this.keyName,L=this.keyNamespace,U=Et.KeyringTraceFlag.WRAPPING_KEY_ENCRYPTED_DATA_KEY,z=new Et.EncryptedDataKey({encryptedDataKey:O,providerInfo:P,providerId:L});return S.addEncryptedDataKey(z,U)},x=async(S,M)=>{if(!p)throw new Error("No private key defined in constructor.  Decrypt disabled.");let C={keyName:this.keyName,keyNamespace:this.keyNamespace,flags:Et.KeyringTraceFlag.WRAPPING_KEY_DECRYPTED_DATA_KEY},{buffer:T,byteOffset:O,byteLength:P}=M.encryptedDataKey,L=Buffer.from(T,O,P),U=(0,hs.privateDecrypt)({key:p,padding:a,oaepHash:s},L);return S.setUnencryptedDataKey(U,C)};(0,Et.readOnlyProperty)(this,"keyName",r),(0,Et.readOnlyProperty)(this,"keyNamespace",n),(0,Et.readOnlyProperty)(this,"_wrapKey",y),(0,Et.readOnlyProperty)(this,"_unwrapKey",x)}_filter({providerId:e,providerInfo:i}){let{keyNamespace:r,keyName:n}=this;return e===r&&i===n}_onEncrypt=(0,ub._onEncrypt)(k2);_onDecrypt=(0,ub._onDecrypt)()};zl.RawRsaKeyringNode=Gl;(0,Et.immutableClass)(Gl);async function k2(t){return new Promise((e,i)=>{(0,hs.randomBytes)(t,(r,n)=>{if(r)return i(r);e(n)})})}});var db=R(Qi=>{"use strict";var q2=Qi&&Qi.__createBinding||(Object.create?function(t,e,i,r){r===void 0&&(r=i);var n=Object.getOwnPropertyDescriptor(e,i);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,n)}:function(t,e,i,r){r===void 0&&(r=i),t[r]=e[i]}),pb=Qi&&Qi.__exportStar||function(t,e){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&q2(e,t,i)};Object.defineProperty(Qi,"__esModule",{value:!0});pb(fb(),Qi);pb(qp(),Qi)});var hb=R(dt=>{"use strict";var K2=dt&&dt.__createBinding||(Object.create?function(t,e,i,r){r===void 0&&(r=i);var n=Object.getOwnPropertyDescriptor(e,i);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,r,n)}:function(t,e,i,r){r===void 0&&(r=i),t[r]=e[i]}),Kr=dt&&dt.__exportStar||function(t,e){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&K2(e,t,i)};Object.defineProperty(dt,"__esModule",{value:!0});dt.buildClient=void 0;Kr(qf(),dt);Kr(dp(),dt);Kr(rt(),dt);Kr(C_(),dt);Kr(Pl(),dt);Kr(ob(),dt);Kr(db(),dt);var j2=qf(),F2=dp();function H2(t){return{...(0,j2.buildEncrypt)(t),...(0,F2.buildDecrypt)(t)}}dt.buildClient=H2});var $2={};Rb($2,{CUSTOM_MAIL_MESSAGE_KEY_ARN:()=>wb,handleInvoke:()=>Y2});module.exports=Cb($2);var Sh=ca(wh(),1);var xs=require("@aws-sdk/client-ssm");var bs=process.env.AWS_REGION||"",PP=process.env.ADMIN_EMAILS||"",IP=process.env.CLOUDFRONT_ACCESS_KEY_ID||"",LP=process.env.CLOUDFRONT_NEW_ACCESS_KEY_PARAMETER||"",NP=process.env.INVITE_USER_VALIDATION_VIEW||"",Eh=process.env.PULL_LAMBDA_NAME||"",kP=process.env.MEDIA_DOMAIN||"",qP=process.env.CLIENT_ID||"",KP=process.env.USER_POOL_ID||"";var Uw=new xs.SSMClient({region:bs,apiVersion:"latest"}),Mh=async(t,e=!1)=>{let i=new xs.GetParameterCommand({Name:t,WithDecryption:e});try{let r=await Uw.send(i);return r.Parameter?r.Parameter.Value:void 0}catch(r){console.error(r);return}};var Gw=t=>(t.split(`
`)[0]||"").split("|"),zw=async()=>{let t=await Mh("NOTIFICATIONS_EMAIL_ACCOUNT",!0);if(!t)throw new Error("Missing mail credentials");let e=Buffer.from(t,"base64").toString("utf-8");return Gw(e)},Vw=async(t,e,i,r,n)=>{let a=Sh.default.createTransport({host:t,port:parseInt(r||"587"),secure:!!n,auth:{user:e,pass:i}});return await a.verify(),a},Ah=async(t,e)=>{let[i,r,n,a,s,l]=await zw();await(await Vw(r,n,a,s,l)).sendMail({...e,from:`${e.sender||i||""} <${n||""}>`,to:t}).catch(console.error)};var di={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*","Access-Control-Allow-Credentials":"true"};var Br=t=>({statusCode:403,headers:di,body:typeof t=="string"?t:JSON.stringify(t)});var ti=t=>({statusCode:400,headers:di,body:typeof t=="string"?t:JSON.stringify(t)});var Th=t=>({statusCode:404,headers:di,body:t?JSON.stringify(t):"Not Found"}),Rh=t=>({statusCode:422,headers:di,body:t?JSON.stringify(t):"Unprocessable Entity"}),Ch=t=>t.statusCode?t:(console.error(t),{statusCode:500,headers:di,body:t.message});var ZP=ti({name:"InvalidEmailError",message:"The email must be valid and must not contain upper case letters or spaces."}),QP=ti({name:"InvalidPasswordError",message:"The password must contain at least 8 characters and at least 1 number."}),XP=ti({name:"InvalidSrpAError",message:"The SRP A value must be a correctly calculated random hex hash based on big integers."}),JP=ti({name:"InvalidRefreshTokenError",message:"Refresh token is invalid."}),eI=ti({name:"VerificationCodeMismatchError",message:"The verification code does not match."}),tI=Br({name:"VerificationCodeExpiredError",message:"The verification code has exipired. Please retry via Reset Password Init (in case of pasword reset) or Register Verify Resend (in case of register)."}),iI=Th({name:"UserNotFoundError",message:"No user was found under the given email or user ID."}),rI=Br({name:"UserNotVerifiedError",message:"The user must be verified with Register Verify operation."}),nI=Br({name:"UserExistsError",message:"There is an existing user with the given email address."}),aI=ti({name:"UserMissingPasswordChallengeError",message:"The user must have an active require password change challenge."}),sI=Br({name:"PasswordResetRequiredError",message:"The password must be reset."}),oI=Rh({name:"PasswordResetMissingParamError",message:"Either a verification code or the users old password are required."}),lI=Br({name:"LoginVerifyError",message:"The password could not be verified. Please check password, userId, secretBlock, signature and timestamp."});var hr=ca(require("fs"),1),mr=require("util"),Ww=ca(require("path"),1),uI=(0,mr.promisify)(hr.default.access),fI=(0,mr.promisify)(hr.default.readFile),pI=(0,mr.promisify)(hr.default.readdir),dI=(0,mr.promisify)(hr.default.mkdir),hI=(0,mr.promisify)(hr.default.writeFile),mI=(0,mr.promisify)(hr.default.rm);var Yw=require("crypto");var $w=ca(require("path"),1);var Vn=ca(hb(),1);var mb="root",gb=(t,e)=>t&&e?{[t]:{edges:{[e]:{include:{node:!0}}}}}:{},yb={CustomEmailSender_SignUp:"root/template-signup",CustomEmailSender_ResendCode:"root/template-resendcode",CustomEmailSender_ForgotPassword:"root/template-forgotpassword",CustomEmailSender_UpdateUserAttribute:"root/template-updateuserattribute",CustomEmailSender_VerifyUserAttribute:"root/template-verifyuserattribute",CustomEmailSender_AccountTakeOverNotification:"root/template-accounttakeovernotification",CustomEmailSender_AdminCreateUser:"root/template-admincreateuser"},vb={CustomEmailSender_SignUp:{subject:"Your Verification Code",text:"Your verification code is {#activationCode}",html:"Your verification code is {#activationCode}"},CustomEmailSender_ResendCode:{subject:"Your Verification Code",text:"Your verification code is {#activationCode}",html:"Your verification code is {#activationCode}"},CustomEmailSender_ForgotPassword:{subject:"Your Verification Code",text:"Your verification code is {#activationCode}",html:"Your verification code is {#activationCode}"},CustomEmailSender_UpdateUserAttribute:null,CustomEmailSender_VerifyUserAttribute:null,CustomEmailSender_AccountTakeOverNotification:null,CustomEmailSender_AdminCreateUser:{subject:"You Have Been Invited",text:"You have been invited. Please log in with your temporary password: {#password}",html:"You have been invited. Please log in with your temporary password: {#password}"}};var Vl=require("@aws-sdk/client-lambda");var B2=new Vl.LambdaClient({region:bs,apiVersion:"latest"}),_b=new TextDecoder,bb=async(t,e)=>{let i=new Vl.InvokeCommand({FunctionName:t,Payload:JSON.stringify({body:e}),InvocationType:"RequestResponse"});try{let r=await B2.send(i);return r.FunctionError?Promise.reject(JSON.parse(_b.decode(r.Payload))):JSON.parse(_b.decode(r.Payload))}catch(r){console.error(r);return}};var wb=process.env.CUSTOM_MAIL_MESSAGE_KEY_ARN||"",U2=async t=>{let e=[wb],i=new Vn.KmsKeyringNode({keyIds:e}),{decrypt:r}=(0,Vn.buildClient)(Vn.CommitmentPolicy.REQUIRE_ENCRYPT_ALLOW_DECRYPT),{plaintext:n}=await r(i,Buffer.from(t,"base64"));return n.toString()},xb=(t,e)=>{let i=e.nodes||{};return Object.values(i).find(n=>!n||typeof n!="object"?!1:n.templateId===t)},G2=async(t,e)=>{let i=yb[t]||!1;if(!i)throw new Error(`No edge types found for ${t}`);let r=gb(mb,i),n=await bb(Eh,{userEmail:"",body:r,asAdmin:!0}),a=n?.body?JSON.parse(n.body):{},s=xb(e,a);return s||xb("default",a)||vb[t]},Kp=(t,e,i,r)=>t.replace("{#encoded}",r).replace("{#activationCode}",i).replace("{#password}",i).replace("{#email}",e),z2=(t,e,i)=>{let r=`${e}/${i}`,n=Kp(t.subject,e,i,r),a=Kp(t.text,e,i,r),s=Kp(t.html,e,i,r);return{subject:n,text:a,html:s}},V2=async(t,e,i,r)=>{let n=await G2(t,e);if(!n)throw new Error(`No template found for ${t} :: ${e}`);return z2(n,i,r)},W2=async(t,e,i,r,n)=>{if(t)return{statusCode:200,headers:di,body:JSON.stringify({})};if(!i)return ti("No event code provided");if(!r)return ti("No email provided");let a=await U2(i);console.log(`Sending ${e}} mail to ${r}`);let s=await V2(e,n,r,a);return await Ah(r,s),{statusCode:200,headers:di,body:JSON.stringify({})}},Y2=async({request:t,triggerSource:e})=>{try{let i=t?.clientMetadata?.skipMessage==="true",r=t?.code,n=t?.userAttributes?.email,a=t?.clientMetadata?.templateId||"default";return await W2(i,e,r,n,a)}catch(i){return Ch(i)}};0&&(module.exports={CUSTOM_MAIL_MESSAGE_KEY_ARN,handleInvoke});

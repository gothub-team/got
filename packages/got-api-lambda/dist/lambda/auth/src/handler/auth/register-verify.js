import{createRequire as wX} from"node:module";var IX=Object.create;var{defineProperty:y9,getPrototypeOf:TX,getOwnPropertyNames:bX}=Object;var RX=Object.prototype.hasOwnProperty;var EX=(Q,X,Y)=>{Y=Q!=null?IX(TX(Q)):{};const Z=X||!Q||!Q.__esModule?y9(Y,"default",{value:Q,enumerable:!0}):Y;for(let $ of bX(Q))if(!RX.call(Z,$))y9(Z,$,{get:()=>Q[$],enumerable:!0});return Z};var L=(Q,X)=>()=>(X||Q((X={exports:{}}).exports,X),X.exports);var C7=wX(import.meta.url);var v1=L((s9)=>{var c9=function(Q,...X){const Y=[Q[0]];let Z=0;while(Z<X.length)h0(Y,X[Z]),Y.push(Q[++Z]);return new d(Y)},r9=function(Q,...X){const Y=[k1(Q[0])];let Z=0;while(Z<X.length)Y.push(l0),h0(Y,X[Z]),Y.push(l0,k1(Q[++Z]));return kX(Y),new d(Y)},h0=function(Q,X){if(X instanceof d)Q.push(...X._items);else if(X instanceof A1)Q.push(X);else Q.push(fX(X))},kX=function(Q){let X=1;while(X<Q.length-1){if(Q[X]===l0){const Y=vX(Q[X-1],Q[X+1]);if(Y!==void 0){Q.splice(X-1,3,Y);continue}Q[X++]="+"}X++}},vX=function(Q,X){if(X==='""')return Q;if(Q==='""')return X;if(typeof Q=="string"){if(X instanceof A1||Q[Q.length-1]!=='"')return;if(typeof X!="string")return`${Q.slice(0,-1)}${X}"`;if(X[0]==='"')return Q.slice(0,-1)+X.slice(1);return}if(typeof X=="string"&&X[0]==='"'&&!(Q instanceof A1))return`"${Q}${X.slice(1)}`;return},yX=function(Q,X){return X.emptyStr()?Q:Q.emptyStr()?X:r9`${Q}${X}`},fX=function(Q){return typeof Q=="number"||typeof Q=="boolean"||Q===null?Q:k1(Array.isArray(Q)?Q.join(","):Q)},xX=function(Q){return new d(k1(Q))},k1=function(Q){return JSON.stringify(Q).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},uX=function(Q){return typeof Q=="string"&&s9.IDENTIFIER.test(Q)?new d(`.${Q}`):c9`[${Q}]`},_X=function(Q){if(typeof Q=="string"&&s9.IDENTIFIER.test(Q))return new d(`${Q}`);throw new Error(`CodeGen: invalid export name: ${Q}, use explicit \$id name mapping`)},gX=function(Q){return new d(Q.toString())};Object.defineProperty(s9,"__esModule",{value:!0});s9.regexpCode=s9.getEsmExportName=s9.getProperty=s9.safeStringify=s9.stringify=s9.strConcat=s9.addCodeArg=s9.str=s9._=s9.nil=s9._Code=s9.Name=s9.IDENTIFIER=s9._CodeOrName=void 0;class Q0{}s9._CodeOrName=Q0;s9.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class A1 extends Q0{constructor(Q){super();if(!s9.IDENTIFIER.test(Q))throw new Error("CodeGen: name must be a valid identifier");this.str=Q}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}s9.Name=A1;class d extends Q0{constructor(Q){super();this._items=typeof Q==="string"?[Q]:Q}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const Q=this._items[0];return Q===""||Q==='""'}get str(){var Q;return(Q=this._str)!==null&&Q!==void 0?Q:this._str=this._items.reduce((X,Y)=>`${X}${Y}`,"")}get names(){var Q;return(Q=this._names)!==null&&Q!==void 0?Q:this._names=this._items.reduce((X,Y)=>{if(Y instanceof A1)X[Y.str]=(X[Y.str]||0)+1;return X},{})}}s9._Code=d;s9.nil=new d("");s9._=c9;var l0=new d("+");s9.str=r9;s9.addCodeArg=h0;s9.strConcat=yX;s9.stringify=xX;s9.safeStringify=k1;s9.getProperty=uX;s9.getEsmExportName=_X;s9.regexpCode=gX});var d0=L((e9)=>{Object.defineProperty(e9,"__esModule",{value:!0});e9.ValueScope=e9.ValueScopeName=e9.Scope=e9.varKinds=e9.UsedValueState=void 0;var u=v1();class a9 extends Error{constructor(Q){super(`CodeGen: "code" for ${Q} not defined`);this.value=Q.value}}var Y0;(function(Q){Q[Q.Started=0]="Started",Q[Q.Completed=1]="Completed"})(Y0||(e9.UsedValueState=Y0={}));e9.varKinds={const:new u.Name("const"),let:new u.Name("let"),var:new u.Name("var")};class i0{constructor({prefixes:Q,parent:X}={}){this._names={},this._prefixes=Q,this._parent=X}toName(Q){return Q instanceof u.Name?Q:this.name(Q)}name(Q){return new u.Name(this._newName(Q))}_newName(Q){const X=this._names[Q]||this._nameGroup(Q);return`${Q}${X.index++}`}_nameGroup(Q){var X,Y;if(((Y=(X=this._parent)===null||X===void 0?void 0:X._prefixes)===null||Y===void 0?void 0:Y.has(Q))||this._prefixes&&!this._prefixes.has(Q))throw new Error(`CodeGen: prefix "${Q}" is not allowed in this scope`);return this._names[Q]={prefix:Q,index:0}}}e9.Scope=i0;class p0 extends u.Name{constructor(Q,X){super(X);this.prefix=Q}setValue(Q,{property:X,itemIndex:Y}){this.value=Q,this.scopePath=u._`.${new u.Name(X)}[${Y}]`}}e9.ValueScopeName=p0;var oX=u._`\n`;class o9 extends i0{constructor(Q){super(Q);this._values={},this._scope=Q.scope,this.opts={...Q,_n:Q.lines?oX:u.nil}}get(){return this._scope}name(Q){return new p0(Q,this._newName(Q))}value(Q,X){var Y;if(X.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const Z=this.toName(Q),{prefix:$}=Z,W=(Y=X.key)!==null&&Y!==void 0?Y:X.ref;let J=this._values[$];if(J){const q=J.get(W);if(q)return q}else J=this._values[$]=new Map;J.set(W,Z);const G=this._scope[$]||(this._scope[$]=[]),z=G.length;return G[z]=X.ref,Z.setValue(X,{property:$,itemIndex:z}),Z}getValue(Q,X){const Y=this._values[Q];if(!Y)return;return Y.get(X)}scopeRefs(Q,X=this._values){return this._reduceValues(X,(Y)=>{if(Y.scopePath===void 0)throw new Error(`CodeGen: name "${Y}" has no value`);return u._`${Q}${Y.scopePath}`})}scopeCode(Q=this._values,X,Y){return this._reduceValues(Q,(Z)=>{if(Z.value===void 0)throw new Error(`CodeGen: name "${Z}" has no value`);return Z.value.code},X,Y)}_reduceValues(Q,X,Y={},Z){let $=u.nil;for(let W in Q){const J=Q[W];if(!J)continue;const G=Y[W]=Y[W]||new Map;J.forEach((z)=>{if(G.has(z))return;G.set(z,Y0.Started);let q=X(z);if(q){const H=this.opts.es5?e9.varKinds.var:e9.varKinds.const;$=u._`${$}${H} ${z} = ${q};${this.opts._n}`}else if(q=Z===null||Z===void 0?void 0:Z(z))$=u._`${$}${q}${this.opts._n}`;else throw new a9(z);G.set(z,Y0.Completed)})}return $}}e9.ValueScope=o9});var I=L((_)=>{var M1=function(Q,X){for(let Y in X)Q[Y]=(Q[Y]||0)+(X[Y]||0);return Q},G0=function(Q,X){return X instanceof b._CodeOrName?M1(Q,X.names):Q},N1=function(Q,X,Y){if(Q instanceof b.Name)return Z(Q);if(!$(Q))return Q;return new b._Code(Q._items.reduce((W,J)=>{if(J instanceof b.Name)J=Z(J);if(J instanceof b._Code)W.push(...J._items);else W.push(J);return W},[]));function Z(W){const J=Y[W.str];if(J===void 0||X[W.str]!==1)return W;return delete X[W.str],J}function $(W){return W instanceof b._Code&&W._items.some((J)=>J instanceof b.Name&&X[J.str]===1&&Y[J.str]!==void 0)}},YY=function(Q,X){for(let Y in X)Q[Y]=(Q[Y]||0)-(X[Y]||0)},B4=function(Q){return typeof Q=="boolean"||typeof Q=="number"||Q===null?!Q:b._`!${c0(Q)}`},$Y=function(...Q){return Q.reduce(ZY)},JY=function(...Q){return Q.reduce(WY)},K4=function(Q){return(X,Y)=>X===b.nil?Y:Y===b.nil?X:b._`${c0(X)} ${Q} ${c0(Y)}`},c0=function(Q){return Q instanceof b.Name?Q:b._`(${Q})`};Object.defineProperty(_,"__esModule",{value:!0});_.or=_.and=_.not=_.CodeGen=_.operators=_.varKinds=_.ValueScopeName=_.ValueScope=_.Scope=_.Name=_.regexpCode=_.stringify=_.getProperty=_.nil=_.strConcat=_.str=_._=void 0;var b=v1(),n=d0(),G1=v1();Object.defineProperty(_,"_",{enumerable:!0,get:function(){return G1._}});Object.defineProperty(_,"str",{enumerable:!0,get:function(){return G1.str}});Object.defineProperty(_,"strConcat",{enumerable:!0,get:function(){return G1.strConcat}});Object.defineProperty(_,"nil",{enumerable:!0,get:function(){return G1.nil}});Object.defineProperty(_,"getProperty",{enumerable:!0,get:function(){return G1.getProperty}});Object.defineProperty(_,"stringify",{enumerable:!0,get:function(){return G1.stringify}});Object.defineProperty(_,"regexpCode",{enumerable:!0,get:function(){return G1.regexpCode}});Object.defineProperty(_,"Name",{enumerable:!0,get:function(){return G1.Name}});var q0=d0();Object.defineProperty(_,"Scope",{enumerable:!0,get:function(){return q0.Scope}});Object.defineProperty(_,"ValueScope",{enumerable:!0,get:function(){return q0.ValueScope}});Object.defineProperty(_,"ValueScopeName",{enumerable:!0,get:function(){return q0.ValueScopeName}});Object.defineProperty(_,"varKinds",{enumerable:!0,get:function(){return q0.varKinds}});_.operators={GT:new b._Code(">"),GTE:new b._Code(">="),LT:new b._Code("<"),LTE:new b._Code("<="),EQ:new b._Code("==="),NEQ:new b._Code("!=="),NOT:new b._Code("!"),OR:new b._Code("||"),AND:new b._Code("&&"),ADD:new b._Code("+")};class q1{optimizeNodes(){return this}optimizeNames(Q,X){return this}}class X4 extends q1{constructor(Q,X,Y){super();this.varKind=Q,this.name=X,this.rhs=Y}render({es5:Q,_n:X}){const Y=Q?n.varKinds.var:this.varKind,Z=this.rhs===void 0?"":` = ${this.rhs}`;return`${Y} ${this.name}${Z};`+X}optimizeNames(Q,X){if(!Q[this.name.str])return;if(this.rhs)this.rhs=N1(this.rhs,Q,X);return this}get names(){return this.rhs instanceof b._CodeOrName?this.rhs.names:{}}}class r0 extends q1{constructor(Q,X,Y){super();this.lhs=Q,this.rhs=X,this.sideEffects=Y}render({_n:Q}){return`${this.lhs} = ${this.rhs};`+Q}optimizeNames(Q,X){if(this.lhs instanceof b.Name&&!Q[this.lhs.str]&&!this.sideEffects)return;return this.rhs=N1(this.rhs,Q,X),this}get names(){const Q=this.lhs instanceof b.Name?{}:{...this.lhs.names};return G0(Q,this.rhs)}}class Y4 extends r0{constructor(Q,X,Y,Z){super(Q,Y,Z);this.op=X}render({_n:Q}){return`${this.lhs} ${this.op}= ${this.rhs};`+Q}}class Z4 extends q1{constructor(Q){super();this.label=Q,this.names={}}render({_n:Q}){return`${this.label}:`+Q}}class $4 extends q1{constructor(Q){super();this.label=Q,this.names={}}render({_n:Q}){return`break${this.label?` ${this.label}`:""};`+Q}}class W4 extends q1{constructor(Q){super();this.error=Q}render({_n:Q}){return`throw ${this.error};`+Q}get names(){return this.error.names}}class J4 extends q1{constructor(Q){super();this.code=Q}render({_n:Q}){return`${this.code};`+Q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(Q,X){return this.code=N1(this.code,Q,X),this}get names(){return this.code instanceof b._CodeOrName?this.code.names:{}}}class z0 extends q1{constructor(Q=[]){super();this.nodes=Q}render(Q){return this.nodes.reduce((X,Y)=>X+Y.render(Q),"")}optimizeNodes(){const{nodes:Q}=this;let X=Q.length;while(X--){const Y=Q[X].optimizeNodes();if(Array.isArray(Y))Q.splice(X,1,...Y);else if(Y)Q[X]=Y;else Q.splice(X,1)}return Q.length>0?this:void 0}optimizeNames(Q,X){const{nodes:Y}=this;let Z=Y.length;while(Z--){const $=Y[Z];if($.optimizeNames(Q,X))continue;YY(Q,$.names),Y.splice(Z,1)}return Y.length>0?this:void 0}get names(){return this.nodes.reduce((Q,X)=>M1(Q,X.names),{})}}class z1 extends z0{render(Q){return"{"+Q._n+super.render(Q)+"}"+Q._n}}class G4 extends z0{}class y1 extends z1{}y1.kind="else";class Y1 extends z1{constructor(Q,X){super(X);this.condition=Q}render(Q){let X=`if(${this.condition})`+super.render(Q);if(this.else)X+="else "+this.else.render(Q);return X}optimizeNodes(){super.optimizeNodes();const Q=this.condition;if(Q===!0)return this.nodes;let X=this.else;if(X){const Y=X.optimizeNodes();X=this.else=Array.isArray(Y)?new y1(Y):Y}if(X){if(Q===!1)return X instanceof Y1?X:X.nodes;if(this.nodes.length)return this;return new Y1(B4(Q),X instanceof Y1?[X]:X.nodes)}if(Q===!1||!this.nodes.length)return;return this}optimizeNames(Q,X){var Y;if(this.else=(Y=this.else)===null||Y===void 0?void 0:Y.optimizeNames(Q,X),!(super.optimizeNames(Q,X)||this.else))return;return this.condition=N1(this.condition,Q,X),this}get names(){const Q=super.names;if(G0(Q,this.condition),this.else)M1(Q,this.else.names);return Q}}Y1.kind="if";class D1 extends z1{}D1.kind="for";class q4 extends D1{constructor(Q){super();this.iteration=Q}render(Q){return`for(${this.iteration})`+super.render(Q)}optimizeNames(Q,X){if(!super.optimizeNames(Q,X))return;return this.iteration=N1(this.iteration,Q,X),this}get names(){return M1(super.names,this.iteration.names)}}class z4 extends D1{constructor(Q,X,Y,Z){super();this.varKind=Q,this.name=X,this.from=Y,this.to=Z}render(Q){const X=Q.es5?n.varKinds.var:this.varKind,{name:Y,from:Z,to:$}=this;return`for(${X} ${Y}=${Z}; ${Y}<${$}; ${Y}++)`+super.render(Q)}get names(){const Q=G0(super.names,this.from);return G0(Q,this.to)}}class n0 extends D1{constructor(Q,X,Y,Z){super();this.loop=Q,this.varKind=X,this.name=Y,this.iterable=Z}render(Q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(Q)}optimizeNames(Q,X){if(!super.optimizeNames(Q,X))return;return this.iterable=N1(this.iterable,Q,X),this}get names(){return M1(super.names,this.iterable.names)}}class Z0 extends z1{constructor(Q,X,Y){super();this.name=Q,this.args=X,this.async=Y}render(Q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(Q)}}Z0.kind="func";class $0 extends z0{render(Q){return"return "+super.render(Q)}}$0.kind="return";class H4 extends z1{render(Q){let X="try"+super.render(Q);if(this.catch)X+=this.catch.render(Q);if(this.finally)X+=this.finally.render(Q);return X}optimizeNodes(){var Q,X;return super.optimizeNodes(),(Q=this.catch)===null||Q===void 0||Q.optimizeNodes(),(X=this.finally)===null||X===void 0||X.optimizeNodes(),this}optimizeNames(Q,X){var Y,Z;return super.optimizeNames(Q,X),(Y=this.catch)===null||Y===void 0||Y.optimizeNames(Q,X),(Z=this.finally)===null||Z===void 0||Z.optimizeNames(Q,X),this}get names(){const Q=super.names;if(this.catch)M1(Q,this.catch.names);if(this.finally)M1(Q,this.finally.names);return Q}}class W0 extends z1{constructor(Q){super();this.error=Q}render(Q){return`catch(${this.error})`+super.render(Q)}}W0.kind="catch";class J0 extends z1{render(Q){return"finally"+super.render(Q)}}J0.kind="finally";class F4{constructor(Q,X={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...X,_n:X.lines?"\n":""},this._extScope=Q,this._scope=new n.Scope({parent:Q}),this._nodes=[new G4]}toString(){return this._root.render(this.opts)}name(Q){return this._scope.name(Q)}scopeName(Q){return this._extScope.name(Q)}scopeValue(Q,X){const Y=this._extScope.value(Q,X);return(this._values[Y.prefix]||(this._values[Y.prefix]=new Set)).add(Y),Y}getScopeValue(Q,X){return this._extScope.getValue(Q,X)}scopeRefs(Q){return this._extScope.scopeRefs(Q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(Q,X,Y,Z){const $=this._scope.toName(X);if(Y!==void 0&&Z)this._constants[$.str]=Y;return this._leafNode(new X4(Q,$,Y)),$}const(Q,X,Y){return this._def(n.varKinds.const,Q,X,Y)}let(Q,X,Y){return this._def(n.varKinds.let,Q,X,Y)}var(Q,X,Y){return this._def(n.varKinds.var,Q,X,Y)}assign(Q,X,Y){return this._leafNode(new r0(Q,X,Y))}add(Q,X){return this._leafNode(new Y4(Q,_.operators.ADD,X))}code(Q){if(typeof Q=="function")Q();else if(Q!==b.nil)this._leafNode(new J4(Q));return this}object(...Q){const X=["{"];for(let[Y,Z]of Q){if(X.length>1)X.push(",");if(X.push(Y),Y!==Z||this.opts.es5)X.push(":"),b.addCodeArg(X,Z)}return X.push("}"),new b._Code(X)}if(Q,X,Y){if(this._blockNode(new Y1(Q)),X&&Y)this.code(X).else().code(Y).endIf();else if(X)this.code(X).endIf();else if(Y)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(Q){return this._elseNode(new Y1(Q))}else(){return this._elseNode(new y1)}endIf(){return this._endBlockNode(Y1,y1)}_for(Q,X){if(this._blockNode(Q),X)this.code(X).endFor();return this}for(Q,X){return this._for(new q4(Q),X)}forRange(Q,X,Y,Z,$=this.opts.es5?n.varKinds.var:n.varKinds.let){const W=this._scope.toName(Q);return this._for(new z4($,W,X,Y),()=>Z(W))}forOf(Q,X,Y,Z=n.varKinds.const){const $=this._scope.toName(Q);if(this.opts.es5){const W=X instanceof b.Name?X:this.var("_arr",X);return this.forRange("_i",0,b._`${W}.length`,(J)=>{this.var($,b._`${W}[${J}]`),Y($)})}return this._for(new n0("of",Z,$,X),()=>Y($))}forIn(Q,X,Y,Z=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(Q,b._`Object.keys(${X})`,Y);const $=this._scope.toName(Q);return this._for(new n0("in",Z,$,X),()=>Y($))}endFor(){return this._endBlockNode(D1)}label(Q){return this._leafNode(new Z4(Q))}break(Q){return this._leafNode(new $4(Q))}return(Q){const X=new $0;if(this._blockNode(X),this.code(Q),X.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode($0)}try(Q,X,Y){if(!X&&!Y)throw new Error('CodeGen: "try" without "catch" and "finally"');const Z=new H4;if(this._blockNode(Z),this.code(Q),X){const $=this.name("e");this._currNode=Z.catch=new W0($),X($)}if(Y)this._currNode=Z.finally=new J0,this.code(Y);return this._endBlockNode(W0,J0)}throw(Q){return this._leafNode(new W4(Q))}block(Q,X){if(this._blockStarts.push(this._nodes.length),Q)this.code(Q).endBlock(X);return this}endBlock(Q){const X=this._blockStarts.pop();if(X===void 0)throw new Error("CodeGen: not in self-balancing block");const Y=this._nodes.length-X;if(Y<0||Q!==void 0&&Y!==Q)throw new Error(`CodeGen: wrong number of nodes: ${Y} vs ${Q} expected`);return this._nodes.length=X,this}func(Q,X=b.nil,Y,Z){if(this._blockNode(new Z0(Q,X,Y)),Z)this.code(Z).endFunc();return this}endFunc(){return this._endBlockNode(Z0)}optimize(Q=1){while(Q-- >0)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(Q){return this._currNode.nodes.push(Q),this}_blockNode(Q){this._currNode.nodes.push(Q),this._nodes.push(Q)}_endBlockNode(Q,X){const Y=this._currNode;if(Y instanceof Q||X&&Y instanceof X)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${X?`${Q.kind}/${X.kind}`:Q.kind}"`)}_elseNode(Q){const X=this._currNode;if(!(X instanceof Y1))throw new Error('CodeGen: "else" without "if"');return this._currNode=X.else=Q,this}get _root(){return this._nodes[0]}get _currNode(){const Q=this._nodes;return Q[Q.length-1]}set _currNode(Q){const X=this._nodes;X[X.length-1]=Q}}_.CodeGen=F4;_.not=B4;var ZY=K4(_.operators.AND);_.and=$Y;var WY=K4(_.operators.OR);_.or=JY});var w=L((N4)=>{var FY=function(Q){const X={};for(let Y of Q)X[Y]=!0;return X},BY=function(Q,X){if(typeof X=="boolean")return X;if(Object.keys(X).length===0)return!0;return O4(Q,X),!j4(X,Q.self.RULES.all)},O4=function(Q,X=Q.schema){const{opts:Y,self:Z}=Q;if(!Y.strictSchema)return;if(typeof X==="boolean")return;const $=Z.RULES.keywords;for(let W in X)if(!$[W])D4(Q,`unknown keyword: "${W}"`)},j4=function(Q,X){if(typeof Q=="boolean")return!Q;for(let Y in Q)if(X[Y])return!0;return!1},KY=function(Q,X){if(typeof Q=="boolean")return!Q;for(let Y in Q)if(Y!=="$ref"&&X.all[Y])return!0;return!1},MY=function({topSchemaRef:Q,schemaPath:X},Y,Z,$){if(!$){if(typeof Y=="number"||typeof Y=="boolean")return Y;if(typeof Y=="string")return S._`${Y}`}return S._`${Q}${X}${S.getProperty(Z)}`},VY=function(Q){return U4(decodeURIComponent(Q))},LY=function(Q){return encodeURIComponent(t0(Q))},t0=function(Q){if(typeof Q=="number")return`${Q}`;return Q.replace(/~/g,"~0").replace(/\//g,"~1")},U4=function(Q){return Q.replace(/~1/g,"/").replace(/~0/g,"~")},OY=function(Q,X){if(Array.isArray(Q))for(let Y of Q)X(Y);else X(Q)},V4=function({mergeNames:Q,mergeToName:X,mergeValues:Y,resultToName:Z}){return($,W,J,G)=>{const z=J===void 0?W:J instanceof S.Name?(W instanceof S.Name?Q($,W,J):X($,W,J),J):W instanceof S.Name?(X($,J,W),W):Y(W,J);return G===S.Name&&!(z instanceof S.Name)?Z($,z):z}},A4=function(Q,X){if(X===!0)return Q.var("props",!0);const Y=Q.var("props",S._`{}`);if(X!==void 0)a0(Q,Y,X);return Y},a0=function(Q,X,Y){Object.keys(Y).forEach((Z)=>Q.assign(S._`${X}${S.getProperty(Z)}`,!0))},jY=function(Q,X){return Q.scopeValue("func",{ref:X,code:L4[X.code]||(L4[X.code]=new HY._Code(X.code))})},UY=function(Q,X,Y){if(Q instanceof S.Name){const Z=X===s0.Num;return Y?Z?S._`"[" + ${Q} + "]"`:S._`"['" + ${Q} + "']"`:Z?S._`"/" + ${Q}`:S._`"/" + ${Q}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return Y?S.getProperty(Q).toString():"/"+t0(Q)},D4=function(Q,X,Y=Q.opts.strictSchema){if(!Y)return;if(X=`strict mode: ${X}`,Y===!0)throw new Error(X);Q.self.logger.warn(X)};Object.defineProperty(N4,"__esModule",{value:!0});N4.checkStrictMode=N4.getErrorPath=N4.Type=N4.useFunc=N4.setEvaluated=N4.evaluatedPropsToName=N4.mergeEvaluated=N4.eachItem=N4.unescapeJsonPointer=N4.escapeJsonPointer=N4.escapeFragment=N4.unescapeFragment=N4.schemaRefOrVal=N4.schemaHasRulesButRef=N4.schemaHasRules=N4.checkUnknownRules=N4.alwaysValidSchema=N4.toHash=void 0;var S=I(),HY=v1();N4.toHash=FY;N4.alwaysValidSchema=BY;N4.checkUnknownRules=O4;N4.schemaHasRules=j4;N4.schemaHasRulesButRef=KY;N4.schemaRefOrVal=MY;N4.unescapeFragment=VY;N4.escapeFragment=LY;N4.escapeJsonPointer=t0;N4.unescapeJsonPointer=U4;N4.eachItem=OY;N4.mergeEvaluated={props:V4({mergeNames:(Q,X,Y)=>Q.if(S._`${Y} !== true && ${X} !== undefined`,()=>{Q.if(S._`${X} === true`,()=>Q.assign(Y,!0),()=>Q.assign(Y,S._`${Y} || {}`).code(S._`Object.assign(${Y}, ${X})`))}),mergeToName:(Q,X,Y)=>Q.if(S._`${Y} !== true`,()=>{if(X===!0)Q.assign(Y,!0);else Q.assign(Y,S._`${Y} || {}`),a0(Q,Y,X)}),mergeValues:(Q,X)=>Q===!0?!0:{...Q,...X},resultToName:A4}),items:V4({mergeNames:(Q,X,Y)=>Q.if(S._`${Y} !== true && ${X} !== undefined`,()=>Q.assign(Y,S._`${X} === true ? true : ${Y} > ${X} ? ${Y} : ${X}`)),mergeToName:(Q,X,Y)=>Q.if(S._`${Y} !== true`,()=>Q.assign(Y,X===!0?!0:S._`${Y} > ${X} ? ${Y} : ${X}`)),mergeValues:(Q,X)=>Q===!0?!0:Math.max(Q,X),resultToName:(Q,X)=>Q.var("items",X)})};N4.evaluatedPropsToName=A4;N4.setEvaluated=a0;var L4={};N4.useFunc=jY;var s0;(function(Q){Q[Q.Num=0]="Num",Q[Q.Str=1]="Str"})(s0||(N4.Type=s0={}));N4.getErrorPath=UY;N4.checkStrictMode=D4});var Z1=L((T4)=>{Object.defineProperty(T4,"__esModule",{value:!0});var y=I(),uY={data:new y.Name("data"),valCxt:new y.Name("valCxt"),instancePath:new y.Name("instancePath"),parentData:new y.Name("parentData"),parentDataProperty:new y.Name("parentDataProperty"),rootData:new y.Name("rootData"),dynamicAnchors:new y.Name("dynamicAnchors"),vErrors:new y.Name("vErrors"),errors:new y.Name("errors"),this:new y.Name("this"),self:new y.Name("self"),scope:new y.Name("scope"),json:new y.Name("json"),jsonPos:new y.Name("jsonPos"),jsonLen:new y.Name("jsonLen"),jsonPart:new y.Name("jsonPart")};T4.default=uY});var f1=L((w4)=>{var gY=function(Q,X=w4.keywordError,Y,Z){const{it:$}=Q,{gen:W,compositeRule:J,allErrors:G}=$,z=E4(Q,X,Y);if(Z!==null&&Z!==void 0?Z:J||G)b4(W,z);else R4($,E._`[${z}]`)},lY=function(Q,X=w4.keywordError,Y){const{it:Z}=Q,{gen:$,compositeRule:W,allErrors:J}=Z,G=E4(Q,X,Y);if(b4($,G),!(W||J))R4(Z,f.default.vErrors)},hY=function(Q,X){Q.assign(f.default.errors,X),Q.if(E._`${f.default.vErrors} !== null`,()=>Q.if(X,()=>Q.assign(E._`${f.default.vErrors}.length`,X),()=>Q.assign(f.default.vErrors,null)))},mY=function({gen:Q,keyword:X,schemaValue:Y,data:Z,errsCount:$,it:W}){if($===void 0)throw new Error("ajv implementation error");const J=Q.name("err");Q.forRange("i",$,f.default.errors,(G)=>{if(Q.const(J,E._`${f.default.vErrors}[${G}]`),Q.if(E._`${J}.instancePath === undefined`,()=>Q.assign(E._`${J}.instancePath`,E.strConcat(f.default.instancePath,W.errorPath))),Q.assign(E._`${J}.schemaPath`,E.str`${W.errSchemaPath}/${X}`),W.opts.verbose)Q.assign(E._`${J}.schema`,Y),Q.assign(E._`${J}.data`,Z)})},b4=function(Q,X){const Y=Q.const("err",X);Q.if(E._`${f.default.vErrors} === null`,()=>Q.assign(f.default.vErrors,E._`[${Y}]`),E._`${f.default.vErrors}.push(${Y})`),Q.code(E._`${f.default.errors}++`)},R4=function(Q,X){const{gen:Y,validateName:Z,schemaEnv:$}=Q;if($.$async)Y.throw(E._`new ${Q.ValidationError}(${X})`);else Y.assign(E._`${Z}.errors`,X),Y.return(!1)},E4=function(Q,X,Y){const{createErrors:Z}=Q.it;if(Z===!1)return E._`{}`;return iY(Q,X,Y)},iY=function(Q,X,Y={}){const{gen:Z,it:$}=Q,W=[pY($,Y),dY(Q,Y)];return nY(Q,X,W),Z.object(...W)},pY=function({errorPath:Q},{instancePath:X}){const Y=X?E.str`${Q}${F0.getErrorPath(X,F0.Type.Str)}`:Q;return[f.default.instancePath,E.strConcat(f.default.instancePath,Y)]},dY=function({keyword:Q,it:{errSchemaPath:X}},{schemaPath:Y,parentSchema:Z}){let $=Z?X:E.str`${X}/${Q}`;if(Y)$=E.str`${$}${F0.getErrorPath(Y,F0.Type.Str)}`;return[V1.schemaPath,$]},nY=function(Q,{params:X,message:Y},Z){const{keyword:$,data:W,schemaValue:J,it:G}=Q,{opts:z,propertyName:q,topSchemaRef:H,schemaPath:F}=G;if(Z.push([V1.keyword,$],[V1.params,typeof X=="function"?X(Q):X||E._`{}`]),z.messages)Z.push([V1.message,typeof Y=="function"?Y(Q):Y]);if(z.verbose)Z.push([V1.schema,J],[V1.parentSchema,E._`${H}${F}`],[f.default.data,W]);if(q)Z.push([V1.propertyName,q])};Object.defineProperty(w4,"__esModule",{value:!0});w4.extendErrors=w4.resetErrorsCount=w4.reportExtraError=w4.reportError=w4.keyword$DataError=w4.keywordError=void 0;var E=I(),F0=w(),f=Z1();w4.keywordError={message:({keyword:Q})=>E.str`must pass "${Q}" keyword validation`};w4.keyword$DataError={message:({keyword:Q,schemaType:X})=>X?E.str`"${Q}" keyword must be ${X} ($data)`:E.str`"${Q}" keyword is invalid ($data)`};w4.reportError=gY;w4.reportExtraError=lY;w4.resetErrorsCount=hY;w4.extendErrors=mY;var V1={keyword:new E.Name("keyword"),schemaPath:new E.Name("schemaPath"),params:new E.Name("params"),propertyName:new E.Name("propertyName"),message:new E.Name("message"),schema:new E.Name("schema"),parentSchema:new E.Name("parentSchema")}});var v4=L((C4)=>{var XZ=function(Q){const{gen:X,schema:Y,validateName:Z}=Q;if(Y===!1)P4(Q,!1);else if(typeof Y=="object"&&Y.$async===!0)X.return(eY.default.data);else X.assign(oY._`${Z}.errors`,null),X.return(!0)},YZ=function(Q,X){const{gen:Y,schema:Z}=Q;if(Z===!1)Y.var(X,!1),P4(Q);else Y.var(X,!0)},P4=function(Q,X){const{gen:Y,data:Z}=Q,$={gen:Y,keyword:"false schema",data:Z,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:Q};aY.reportError($,QZ,void 0,X)};Object.defineProperty(C4,"__esModule",{value:!0});C4.boolOrEmptySchema=C4.topBoolOrEmptySchema=void 0;var aY=f1(),oY=I(),eY=Z1(),QZ={message:"boolean schema is false"};C4.topBoolOrEmptySchema=XZ;C4.boolOrEmptySchema=YZ});var e0=L((y4)=>{var JZ=function(Q){return typeof Q=="string"&&WZ.has(Q)},GZ=function(){const Q={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...Q,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},Q.number,Q.string,Q.array,Q.object],post:{rules:[]},all:{},keywords:{}}};Object.defineProperty(y4,"__esModule",{value:!0});y4.getRules=y4.isJSONType=void 0;var $Z=["string","number","integer","boolean","null","object","array"],WZ=new Set($Z);y4.isJSONType=JZ;y4.getRules=GZ});var Q9=L((_4)=>{var zZ=function({schema:Q,self:X},Y){const Z=X.RULES.types[Y];return Z&&Z!==!0&&x4(Q,Z)},x4=function(Q,X){return X.rules.some((Y)=>u4(Q,Y))},u4=function(Q,X){var Y;return Q[X.keyword]!==void 0||((Y=X.definition.implements)===null||Y===void 0?void 0:Y.some((Z)=>Q[Z]!==void 0))};Object.defineProperty(_4,"__esModule",{value:!0});_4.shouldUseRule=_4.shouldUseGroup=_4.schemaHasRulesForType=void 0;_4.schemaHasRulesForType=zZ;_4.shouldUseGroup=x4;_4.shouldUseRule=u4});var x1=L((i4)=>{var VZ=function(Q){const X=h4(Q.type);if(X.includes("null")){if(Q.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!X.length&&Q.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');if(Q.nullable===!0)X.push("null")}return X},h4=function(Q){const X=Array.isArray(Q)?Q:Q?[Q]:[];if(X.every(BZ.isJSONType))return X;throw new Error("type must be JSONType or JSONType[]: "+X.join(","))},LZ=function(Q,X){const{gen:Y,data:Z,opts:$}=Q,W=OZ(X,$.coerceTypes),J=X.length>0&&!(W.length===0&&X.length===1&&KZ.schemaHasRulesForType(Q,X[0]));if(J){const G=Y9(X,Z,$.strictNumbers,I1.Wrong);Y.if(G,()=>{if(W.length)jZ(Q,X,W);else Z9(Q)})}return J},OZ=function(Q,X){return X?Q.filter((Y)=>m4.has(Y)||X==="array"&&Y==="array"):[]},jZ=function(Q,X,Y){const{gen:Z,data:$,opts:W}=Q,J=Z.let("dataType",N._`typeof ${$}`),G=Z.let("coerced",N._`undefined`);if(W.coerceTypes==="array")Z.if(N._`${J} == 'object' && Array.isArray(${$}) && ${$}.length == 1`,()=>Z.assign($,N._`${$}[0]`).assign(J,N._`typeof ${$}`).if(Y9(X,$,W.strictNumbers),()=>Z.assign(G,$)));Z.if(N._`${G} !== undefined`);for(let q of Y)if(m4.has(q)||q==="array"&&W.coerceTypes==="array")z(q);Z.else(),Z9(Q),Z.endIf(),Z.if(N._`${G} !== undefined`,()=>{Z.assign($,G),UZ(Q,G)});function z(q){switch(q){case"string":Z.elseIf(N._`${J} == "number" || ${J} == "boolean"`).assign(G,N._`"" + ${$}`).elseIf(N._`${$} === null`).assign(G,N._`""`);return;case"number":Z.elseIf(N._`${J} == "boolean" || ${$} === null
              || (${J} == "string" && ${$} && ${$} == +${$})`).assign(G,N._`+${$}`);return;case"integer":Z.elseIf(N._`${J} === "boolean" || ${$} === null
              || (${J} === "string" && ${$} && ${$} == +${$} && !(${$} % 1))`).assign(G,N._`+${$}`);return;case"boolean":Z.elseIf(N._`${$} === "false" || ${$} === 0 || ${$} === null`).assign(G,!1).elseIf(N._`${$} === "true" || ${$} === 1`).assign(G,!0);return;case"null":Z.elseIf(N._`${$} === "" || ${$} === 0 || ${$} === false`),Z.assign(G,null);return;case"array":Z.elseIf(N._`${J} === "string" || ${J} === "number"
              || ${J} === "boolean" || ${$} === null`).assign(G,N._`[${$}]`)}}},UZ=function({gen:Q,parentData:X,parentDataProperty:Y},Z){Q.if(N._`${X} !== undefined`,()=>Q.assign(N._`${X}[${Y}]`,Z))},X9=function(Q,X,Y,Z=I1.Correct){const $=Z===I1.Correct?N.operators.EQ:N.operators.NEQ;let W;switch(Q){case"null":return N._`${X} ${$} null`;case"array":W=N._`Array.isArray(${X})`;break;case"object":W=N._`${X} && typeof ${X} == "object" && !Array.isArray(${X})`;break;case"integer":W=J(N._`!(${X} % 1) && !isNaN(${X})`);break;case"number":W=J();break;default:return N._`typeof ${X} ${$} ${Q}`}return Z===I1.Correct?W:N.not(W);function J(G=N.nil){return N.and(N._`typeof ${X} == "number"`,G,Y?N._`isFinite(${X})`:N.nil)}},Y9=function(Q,X,Y,Z){if(Q.length===1)return X9(Q[0],X,Y,Z);let $;const W=l4.toHash(Q);if(W.array&&W.object){const J=N._`typeof ${X} != "object"`;$=W.null?J:N._`!${X} || ${J}`,delete W.null,delete W.array,delete W.object}else $=N.nil;if(W.number)delete W.integer;for(let J in W)$=N.and($,X9(J,X,Y,Z));return $},Z9=function(Q){const X=DZ(Q);MZ.reportError(X,AZ)},DZ=function(Q){const{gen:X,data:Y,schema:Z}=Q,$=l4.schemaRefOrVal(Q,Z,"type");return{gen:X,keyword:"type",data:Y,schema:Z.type,schemaCode:$,schemaValue:$,parentSchema:Z,params:{},it:Q}};Object.defineProperty(i4,"__esModule",{value:!0});i4.reportTypeError=i4.checkDataTypes=i4.checkDataType=i4.coerceAndCheckDataType=i4.getJSONTypes=i4.getSchemaTypes=i4.DataType=void 0;var BZ=e0(),KZ=Q9(),MZ=f1(),N=I(),l4=w(),I1;(function(Q){Q[Q.Correct=0]="Correct",Q[Q.Wrong=1]="Wrong"})(I1||(i4.DataType=I1={}));i4.getSchemaTypes=VZ;i4.getJSONTypes=h4;i4.coerceAndCheckDataType=LZ;var m4=new Set(["string","number","integer","boolean","null"]);i4.checkDataType=X9;i4.checkDataTypes=Y9;var AZ={message:({schema:Q})=>`must be ${Q}`,params:({schema:Q,schemaValue:X})=>typeof Q=="string"?N._`{type: ${Q}}`:N._`{type: ${X}}`};i4.reportTypeError=Z9});var r4=L((n4)=>{var SZ=function(Q,X){const{properties:Y,items:Z}=Q.schema;if(X==="object"&&Y)for(let $ in Y)d4(Q,$,Y[$].default);else if(X==="array"&&Array.isArray(Z))Z.forEach(($,W)=>d4(Q,W,$.default))},d4=function(Q,X,Y){const{gen:Z,compositeRule:$,data:W,opts:J}=Q;if(Y===void 0)return;const G=T1._`${W}${T1.getProperty(X)}`;if($){wZ.checkStrictMode(Q,`default is ignored for: ${G}`);return}let z=T1._`${G} === undefined`;if(J.useDefaults==="empty")z=T1._`${z} || ${G} === null || ${G} === ""`;Z.if(z,T1._`${G} = ${T1.stringify(Y)}`)};Object.defineProperty(n4,"__esModule",{value:!0});n4.assignDefaults=void 0;var T1=I(),wZ=w();n4.assignDefaults=SZ});var h=L((a4)=>{var CZ=function(Q,X){const{gen:Y,data:Z,it:$}=Q;Y.if(J9(Y,Z,X,$.opts.ownProperties),()=>{Q.setParams({missingProperty:C._`${X}`},!0),Q.error()})},kZ=function({gen:Q,data:X,it:{opts:Y}},Z,$){return C.or(...Z.map((W)=>C.and(J9(Q,X,W,Y.ownProperties),C._`${$} = ${W}`)))},vZ=function(Q,X){Q.setParams({missingProperty:X},!0),Q.error()},s4=function(Q){return Q.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:C._`Object.prototype.hasOwnProperty`})},W9=function(Q,X,Y){return C._`${s4(Q)}.call(${X}, ${Y})`},yZ=function(Q,X,Y,Z){const $=C._`${X}${C.getProperty(Y)} !== undefined`;return Z?C._`${$} && ${W9(Q,X,Y)}`:$},J9=function(Q,X,Y,Z){const $=C._`${X}${C.getProperty(Y)} === undefined`;return Z?C.or($,C.not(W9(Q,X,Y))):$},t4=function(Q){return Q?Object.keys(Q).filter((X)=>X!=="__proto__"):[]},fZ=function(Q,X){return t4(X).filter((Y)=>!$9.alwaysValidSchema(Q,X[Y]))},xZ=function({schemaCode:Q,data:X,it:{gen:Y,topSchemaRef:Z,schemaPath:$,errorPath:W},it:J},G,z,q){const H=q?C._`${Q}, ${X}, ${Z}${$}`:X,F=[[H1.default.instancePath,C.strConcat(H1.default.instancePath,W)],[H1.default.parentData,J.parentData],[H1.default.parentDataProperty,J.parentDataProperty],[H1.default.rootData,H1.default.rootData]];if(J.opts.dynamicRef)F.push([H1.default.dynamicAnchors,H1.default.dynamicAnchors]);const j=C._`${H}, ${Y.object(...F)}`;return z!==C.nil?C._`${G}.call(${z}, ${j})`:C._`${G}(${j})`},_Z=function({gen:Q,it:{opts:X}},Y){const Z=X.unicodeRegExp?"u":"",{regExp:$}=X.code,W=$(Y,Z);return Q.scopeValue("pattern",{key:W.toString(),ref:W,code:C._`${$.code==="new RegExp"?uZ:PZ.useFunc(Q,$)}(${Y}, ${Z})`})},gZ=function(Q){const{gen:X,data:Y,keyword:Z,it:$}=Q,W=X.name("valid");if($.allErrors){const G=X.let("valid",!0);return J(()=>X.assign(G,!1)),G}return X.var(W,!0),J(()=>X.break()),W;function J(G){const z=X.const("len",C._`${Y}.length`);X.forRange("i",0,z,(q)=>{Q.subschema({keyword:Z,dataProp:q,dataPropType:$9.Type.Num},W),X.if(C.not(W),G)})}},lZ=function(Q){const{gen:X,schema:Y,keyword:Z,it:$}=Q;if(!Array.isArray(Y))throw new Error("ajv implementation error");if(Y.some((z)=>$9.alwaysValidSchema($,z))&&!$.opts.unevaluated)return;const J=X.let("valid",!1),G=X.name("_valid");X.block(()=>Y.forEach((z,q)=>{const H=Q.subschema({keyword:Z,schemaProp:q,compositeRule:!0},G);if(X.assign(J,C._`${J} || ${G}`),!Q.mergeValidEvaluated(H,G))X.if(C.not(J))})),Q.result(J,()=>Q.reset(),()=>Q.error(!0))};Object.defineProperty(a4,"__esModule",{value:!0});a4.validateUnion=a4.validateArray=a4.usePattern=a4.callValidateCode=a4.schemaProperties=a4.allSchemaProperties=a4.noPropertyInData=a4.propertyInData=a4.isOwnProperty=a4.hasPropFunc=a4.reportMissingProp=a4.checkMissingProp=a4.checkReportMissingProp=void 0;var C=I(),$9=w(),H1=Z1(),PZ=w();a4.checkReportMissingProp=CZ;a4.checkMissingProp=kZ;a4.reportMissingProp=vZ;a4.hasPropFunc=s4;a4.isOwnProperty=W9;a4.propertyInData=yZ;a4.noPropertyInData=J9;a4.allSchemaProperties=t4;a4.schemaProperties=fZ;a4.callValidateCode=xZ;var uZ=C._`new RegExp`;a4.usePattern=_Z;a4.validateArray=gZ;a4.validateUnion=lZ});var Z6=L((X6)=>{var X$=function(Q,X){const{gen:Y,keyword:Z,schema:$,parentSchema:W,it:J}=Q,G=X.macro.call(J.self,$,W,J),z=Q6(Y,Z,G);if(J.opts.validateSchema!==!1)J.self.validateSchema(G,!0);const q=Y.name("valid");Q.subschema({schema:G,schemaPath:x.nil,errSchemaPath:`${J.errSchemaPath}/${Z}`,topSchemaRef:z,compositeRule:!0},q),Q.pass(q,()=>Q.error(!0))},Y$=function(Q,X){var Y;const{gen:Z,keyword:$,schema:W,parentSchema:J,$data:G,it:z}=Q;$$(z,X);const q=!G&&X.compile?X.compile.call(z.self,W,J,z):X.validate,H=Q6(Z,$,q),F=Z.let("valid");Q.block$data(F,j),Q.ok((Y=X.valid)!==null&&Y!==void 0?Y:F);function j(){if(X.errors===!1){if(B(),X.modifying)e4(Q);M(()=>Q.error())}else{const O=X.async?V():K();if(X.modifying)e4(Q);M(()=>Z$(Q,O))}}function V(){const O=Z.let("ruleErrs",null);return Z.try(()=>B(x._`await `),(R)=>Z.assign(F,!1).if(x._`${R} instanceof ${z.ValidationError}`,()=>Z.assign(O,x._`${R}.errors`),()=>Z.throw(R))),O}function K(){const O=x._`${H}.errors`;return Z.assign(O,null),B(x.nil),O}function B(O=X.async?x._`await `:x.nil){const R=z.opts.passContext?L1.default.this:L1.default.self,T=!(("compile"in X)&&!G||X.schema===!1);Z.assign(F,x._`${O}${eZ.callValidateCode(Q,H,R,T)}`,X.modifying)}function M(O){var R;Z.if(x.not((R=X.valid)!==null&&R!==void 0?R:F),O)}},e4=function(Q){const{gen:X,data:Y,it:Z}=Q;X.if(Z.parentData,()=>X.assign(Y,x._`${Z.parentData}[${Z.parentDataProperty}]`))},Z$=function(Q,X){const{gen:Y}=Q;Y.if(x._`Array.isArray(${X})`,()=>{Y.assign(L1.default.vErrors,x._`${L1.default.vErrors} === null ? ${X} : ${L1.default.vErrors}.concat(${X})`).assign(L1.default.errors,x._`${L1.default.vErrors}.length`),Q$.extendErrors(Q)},()=>Q.error())},$$=function({schemaEnv:Q},X){if(X.async&&!Q.$async)throw new Error("async keyword in sync schema")},Q6=function(Q,X,Y){if(Y===void 0)throw new Error(`keyword "${X}" failed to compile`);return Q.scopeValue("keyword",typeof Y=="function"?{ref:Y}:{ref:Y,code:x.stringify(Y)})},W$=function(Q,X,Y=!1){return!X.length||X.some((Z)=>Z==="array"?Array.isArray(Q):Z==="object"?Q&&typeof Q=="object"&&!Array.isArray(Q):typeof Q==Z||Y&&typeof Q=="undefined")},J$=function({schema:Q,opts:X,self:Y,errSchemaPath:Z},$,W){if(Array.isArray($.keyword)?!$.keyword.includes(W):$.keyword!==W)throw new Error("ajv implementation error");const J=$.dependencies;if(J===null||J===void 0?void 0:J.some((G)=>!Object.prototype.hasOwnProperty.call(Q,G)))throw new Error(`parent schema must have dependencies of ${W}: ${J.join(",")}`);if($.validateSchema){if(!$.validateSchema(Q[W])){const z=`keyword "${W}" value is invalid at path "${Z}": `+Y.errorsText($.validateSchema.errors);if(X.validateSchema==="log")Y.logger.error(z);else throw new Error(z)}}};Object.defineProperty(X6,"__esModule",{value:!0});X6.validateKeywordUsage=X6.validSchemaType=X6.funcKeywordCode=X6.macroKeywordCode=void 0;var x=I(),L1=Z1(),eZ=h(),Q$=f1();X6.macroKeywordCode=X$;X6.funcKeywordCode=Y$;X6.validSchemaType=W$;X6.validateKeywordUsage=J$});var G6=L((W6)=>{var H$=function(Q,{keyword:X,schemaProp:Y,schema:Z,schemaPath:$,errSchemaPath:W,topSchemaRef:J}){if(X!==void 0&&Z!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(X!==void 0){const G=Q.schema[X];return Y===void 0?{schema:G,schemaPath:o._`${Q.schemaPath}${o.getProperty(X)}`,errSchemaPath:`${Q.errSchemaPath}/${X}`}:{schema:G[Y],schemaPath:o._`${Q.schemaPath}${o.getProperty(X)}${o.getProperty(Y)}`,errSchemaPath:`${Q.errSchemaPath}/${X}/${$6.escapeFragment(Y)}`}}if(Z!==void 0){if($===void 0||W===void 0||J===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:Z,schemaPath:$,topSchemaRef:J,errSchemaPath:W}}throw new Error('either "keyword" or "schema" must be passed')},F$=function(Q,X,{dataProp:Y,dataPropType:Z,data:$,dataTypes:W,propertyName:J}){if($!==void 0&&Y!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:G}=X;if(Y!==void 0){const{errorPath:q,dataPathArr:H,opts:F}=X,j=G.let("data",o._`${X.data}${o.getProperty(Y)}`,!0);z(j),Q.errorPath=o.str`${q}${$6.getErrorPath(Y,Z,F.jsPropertySyntax)}`,Q.parentDataProperty=o._`${Y}`,Q.dataPathArr=[...H,Q.parentDataProperty]}if($!==void 0){const q=$ instanceof o.Name?$:G.let("data",$,!0);if(z(q),J!==void 0)Q.propertyName=J}if(W)Q.dataTypes=W;function z(q){Q.data=q,Q.dataLevel=X.dataLevel+1,Q.dataTypes=[],X.definedProperties=new Set,Q.parentData=X.data,Q.dataNames=[...X.dataNames,q]}},B$=function(Q,{jtdDiscriminator:X,jtdMetadata:Y,compositeRule:Z,createErrors:$,allErrors:W}){if(Z!==void 0)Q.compositeRule=Z;if($!==void 0)Q.createErrors=$;if(W!==void 0)Q.allErrors=W;Q.jtdDiscriminator=X,Q.jtdMetadata=Y};Object.defineProperty(W6,"__esModule",{value:!0});W6.extendSubschemaMode=W6.extendSubschemaData=W6.getSubschema=void 0;var o=I(),$6=w();W6.getSubschema=H$;W6.extendSubschemaData=F$;W6.extendSubschemaMode=B$});var G9=L((vq,q6)=>{q6.exports=function Q(X,Y){if(X===Y)return!0;if(X&&Y&&typeof X=="object"&&typeof Y=="object"){if(X.constructor!==Y.constructor)return!1;var Z,$,W;if(Array.isArray(X)){if(Z=X.length,Z!=Y.length)return!1;for($=Z;$--!==0;)if(!Q(X[$],Y[$]))return!1;return!0}if(X.constructor===RegExp)return X.source===Y.source&&X.flags===Y.flags;if(X.valueOf!==Object.prototype.valueOf)return X.valueOf()===Y.valueOf();if(X.toString!==Object.prototype.toString)return X.toString()===Y.toString();if(W=Object.keys(X),Z=W.length,Z!==Object.keys(Y).length)return!1;for($=Z;$--!==0;)if(!Object.prototype.hasOwnProperty.call(Y,W[$]))return!1;for($=Z;$--!==0;){var J=W[$];if(!Q(X[J],Y[J]))return!1}return!0}return X!==X&&Y!==Y}});var H6=L((yq,z6)=>{var B0=function(Q,X,Y,Z,$,W,J,G,z,q){if(Z&&typeof Z=="object"&&!Array.isArray(Z)){X(Z,$,W,J,G,z,q);for(var H in Z){var F=Z[H];if(Array.isArray(F)){if(H in F1.arrayKeywords)for(var j=0;j<F.length;j++)B0(Q,X,Y,F[j],$+"/"+H+"/"+j,W,$,H,Z,j)}else if(H in F1.propsKeywords){if(F&&typeof F=="object")for(var V in F)B0(Q,X,Y,F[V],$+"/"+H+"/"+V$(V),W,$,H,Z,V)}else if(H in F1.keywords||Q.allKeys&&!(H in F1.skipKeywords))B0(Q,X,Y,F,$+"/"+H,W,$,H,Z)}Y(Z,$,W,J,G,z,q)}},V$=function(Q){return Q.replace(/~/g,"~0").replace(/\//g,"~1")},F1=z6.exports=function(Q,X,Y){if(typeof X=="function")Y=X,X={};Y=X.cb||Y;var Z=typeof Y=="function"?Y:Y.pre||function(){},$=Y.post||function(){};B0(X,Z,$,Q,"",Q)};F1.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};F1.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};F1.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};F1.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}});var u1=L((M6)=>{var A$=function(Q,X=!0){if(typeof Q=="boolean")return!0;if(X===!0)return!q9(Q);if(!X)return!1;return F6(Q)<=X},q9=function(Q){for(let X in Q){if(D$.has(X))return!0;const Y=Q[X];if(Array.isArray(Y)&&Y.some(q9))return!0;if(typeof Y=="object"&&q9(Y))return!0}return!1},F6=function(Q){let X=0;for(let Y in Q){if(Y==="$ref")return 1/0;if(X++,U$.has(Y))continue;if(typeof Q[Y]=="object")L$.eachItem(Q[Y],(Z)=>X+=F6(Z));if(X===1/0)return 1/0}return X},B6=function(Q,X="",Y){if(Y!==!1)X=b1(X);const Z=Q.parse(X);return K6(Q,Z)},K6=function(Q,X){return Q.serialize(X).split("#")[0]+"#"},b1=function(Q){return Q?Q.replace(N$,""):""},I$=function(Q,X,Y){return Y=b1(Y),Q.resolve(X,Y)},b$=function(Q,X){if(typeof Q=="boolean")return{};const{schemaId:Y,uriResolver:Z}=this.opts,$=b1(Q[Y]||X),W={"":$},J=B6(Z,$,!1),G={},z=new Set;return j$(Q,{allKeys:!0},(F,j,V,K)=>{if(K===void 0)return;const B=J+j;let M=W[K];if(typeof F[Y]=="string")M=O.call(this,F[Y]);R.call(this,F.$anchor),R.call(this,F.$dynamicAnchor),W[j]=M;function O(T){const P=this.opts.uriResolver.resolve;if(T=b1(M?P(M,T):T),z.has(T))throw H(T);z.add(T);let D=this.refs[T];if(typeof D=="string")D=this.refs[D];if(typeof D=="object")q(F,D.schema,T);else if(T!==b1(B))if(T[0]==="#")q(F,G[T],T),G[T]=F;else this.refs[T]=B;return T}function R(T){if(typeof T=="string"){if(!T$.test(T))throw new Error(`invalid anchor "${T}"`);O.call(this,`#${T}`)}}}),G;function q(F,j,V){if(j!==void 0&&!O$(F,j))throw H(V)}function H(F){return new Error(`reference "${F}" resolves to more than one schema`)}};Object.defineProperty(M6,"__esModule",{value:!0});M6.getSchemaRefs=M6.resolveUrl=M6.normalizeId=M6._getFullPath=M6.getFullPath=M6.inlineRef=void 0;var L$=w(),O$=G9(),j$=H6(),U$=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);M6.inlineRef=A$;var D$=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);M6.getFullPath=B6;M6._getFullPath=K6;var N$=/#\/?$/;M6.normalizeId=b1;M6.resolveUrl=I$;var T$=/^[a-z_][-a-z0-9._]*$/i;M6.getSchemaRefs=b$});var l1=L((P6)=>{var v$=function(Q){if(I6(Q)){if(T6(Q),N6(Q)){x$(Q);return}}D6(Q,()=>A6.topBoolOrEmptySchema(Q))},D6=function({gen:Q,validateName:X,schema:Y,schemaEnv:Z,opts:$},W){if($.code.es5)Q.func(X,U._`${A.default.data}, ${A.default.valCxt}`,Z.$async,()=>{Q.code(U._`"use strict"; ${O6(Y,$)}`),f$(Q,$),Q.code(W)});else Q.func(X,U._`${A.default.data}, ${y$($)}`,Z.$async,()=>Q.code(O6(Y,$)).code(W))},y$=function(Q){return U._`{${A.default.instancePath}="", ${A.default.parentData}, ${A.default.parentDataProperty}, ${A.default.rootData}=${A.default.data}${Q.dynamicRef?U._`, ${A.default.dynamicAnchors}={}`:U.nil}}={}`},f$=function(Q,X){Q.if(A.default.valCxt,()=>{if(Q.var(A.default.instancePath,U._`${A.default.valCxt}.${A.default.instancePath}`),Q.var(A.default.parentData,U._`${A.default.valCxt}.${A.default.parentData}`),Q.var(A.default.parentDataProperty,U._`${A.default.valCxt}.${A.default.parentDataProperty}`),Q.var(A.default.rootData,U._`${A.default.valCxt}.${A.default.rootData}`),X.dynamicRef)Q.var(A.default.dynamicAnchors,U._`${A.default.valCxt}.${A.default.dynamicAnchors}`)},()=>{if(Q.var(A.default.instancePath,U._`""`),Q.var(A.default.parentData,U._`undefined`),Q.var(A.default.parentDataProperty,U._`undefined`),Q.var(A.default.rootData,A.default.data),X.dynamicRef)Q.var(A.default.dynamicAnchors,U._`{}`)})},x$=function(Q){const{schema:X,opts:Y,gen:Z}=Q;D6(Q,()=>{if(Y.$comment&&X.$comment)R6(Q);if(h$(Q),Z.let(A.default.vErrors,null),Z.let(A.default.errors,0),Y.unevaluated)u$(Q);b6(Q),p$(Q)});return},u$=function(Q){const{gen:X,validateName:Y}=Q;Q.evaluated=X.const("evaluated",U._`${Y}.evaluated`),X.if(U._`${Q.evaluated}.dynamicProps`,()=>X.assign(U._`${Q.evaluated}.props`,U._`undefined`)),X.if(U._`${Q.evaluated}.dynamicItems`,()=>X.assign(U._`${Q.evaluated}.items`,U._`undefined`))},O6=function(Q,X){const Y=typeof Q=="object"&&Q[X.schemaId];return Y&&(X.code.source||X.code.process)?U._`/*# sourceURL=${Y} */`:U.nil},_$=function(Q,X){if(I6(Q)){if(T6(Q),N6(Q)){g$(Q,X);return}}A6.boolOrEmptySchema(Q,X)},N6=function({schema:Q,self:X}){if(typeof Q=="boolean")return!Q;for(let Y in Q)if(X.RULES.all[Y])return!0;return!1},I6=function(Q){return typeof Q.schema!="boolean"},g$=function(Q,X){const{schema:Y,gen:Z,opts:$}=Q;if($.$comment&&Y.$comment)R6(Q);m$(Q),i$(Q);const W=Z.const("_errs",A.default.errors);b6(Q,W),Z.var(X,U._`${W} === ${A.default.errors}`)},T6=function(Q){$1.checkUnknownRules(Q),l$(Q)},b6=function(Q,X){if(Q.opts.jtd)return j6(Q,[],!1,X);const Y=L6.getSchemaTypes(Q.schema),Z=L6.coerceAndCheckDataType(Q,Y);j6(Q,Y,!Z,X)},l$=function(Q){const{schema:X,errSchemaPath:Y,opts:Z,self:$}=Q;if(X.$ref&&Z.ignoreKeywordsWithRef&&$1.schemaHasRulesButRef(X,$.RULES))$.logger.warn(`\$ref: keywords ignored in schema at path "${Y}"`)},h$=function(Q){const{schema:X,opts:Y}=Q;if(X.default!==void 0&&Y.useDefaults&&Y.strictSchema)$1.checkStrictMode(Q,"default is ignored in the schema root")},m$=function(Q){const X=Q.schema[Q.opts.schemaId];if(X)Q.baseId=k$.resolveUrl(Q.opts.uriResolver,Q.baseId,X)},i$=function(Q){if(Q.schema.$async&&!Q.schemaEnv.$async)throw new Error("async schema in sync schema")},R6=function({gen:Q,schemaEnv:X,schema:Y,errSchemaPath:Z,opts:$}){const W=Y.$comment;if($.$comment===!0)Q.code(U._`${A.default.self}.logger.log(${W})`);else if(typeof $.$comment=="function"){const J=U.str`${Z}/$comment`,G=Q.scopeValue("root",{ref:X.root});Q.code(U._`${A.default.self}.opts.$comment(${W}, ${J}, ${G}.schema)`)}},p$=function(Q){const{gen:X,schemaEnv:Y,validateName:Z,ValidationError:$,opts:W}=Q;if(Y.$async)X.if(U._`${A.default.errors} === 0`,()=>X.return(A.default.data),()=>X.throw(U._`new ${$}(${A.default.vErrors})`));else{if(X.assign(U._`${Z}.errors`,A.default.vErrors),W.unevaluated)d$(Q);X.return(U._`${A.default.errors} === 0`)}},d$=function({gen:Q,evaluated:X,props:Y,items:Z}){if(Y instanceof U.Name)Q.assign(U._`${X}.props`,Y);if(Z instanceof U.Name)Q.assign(U._`${X}.items`,Z)},j6=function(Q,X,Y,Z){const{gen:$,schema:W,data:J,allErrors:G,opts:z,self:q}=Q,{RULES:H}=q;if(W.$ref&&(z.ignoreKeywordsWithRef||!$1.schemaHasRulesButRef(W,H))){$.block(()=>w6(Q,"$ref",H.all.$ref.definition));return}if(!z.jtd)n$(Q,X);$.block(()=>{for(let j of H.rules)F(j);F(H.post)});function F(j){if(!H9.shouldUseGroup(W,j))return;if(j.type){if($.if(K0.checkDataType(j.type,J,z.strictNumbers)),U6(Q,j),X.length===1&&X[0]===j.type&&Y)$.else(),K0.reportTypeError(Q);$.endIf()}else U6(Q,j);if(!G)$.if(U._`${A.default.errors} === ${Z||0}`)}},U6=function(Q,X){const{gen:Y,schema:Z,opts:{useDefaults:$}}=Q;if($)C$.assignDefaults(Q,X.type);Y.block(()=>{for(let W of X.rules)if(H9.shouldUseRule(Z,W))w6(Q,W.keyword,W.definition,X.type)})},n$=function(Q,X){if(Q.schemaEnv.meta||!Q.opts.strictTypes)return;if(c$(Q,X),!Q.opts.allowUnionTypes)r$(Q,X);s$(Q,Q.dataTypes)},c$=function(Q,X){if(!X.length)return;if(!Q.dataTypes.length){Q.dataTypes=X;return}X.forEach((Y)=>{if(!E6(Q.dataTypes,Y))F9(Q,`type "${Y}" not allowed by context "${Q.dataTypes.join(",")}"`)}),a$(Q,X)},r$=function(Q,X){if(X.length>1&&!(X.length===2&&X.includes("null")))F9(Q,"use allowUnionTypes to allow union type keyword")},s$=function(Q,X){const Y=Q.self.RULES.all;for(let Z in Y){const $=Y[Z];if(typeof $=="object"&&H9.shouldUseRule(Q.schema,$)){const{type:W}=$.definition;if(W.length&&!W.some((J)=>t$(X,J)))F9(Q,`missing type "${W.join(",")}" for keyword "${Z}"`)}}},t$=function(Q,X){return Q.includes(X)||X==="number"&&Q.includes("integer")},E6=function(Q,X){return Q.includes(X)||X==="integer"&&Q.includes("number")},a$=function(Q,X){const Y=[];for(let Z of Q.dataTypes)if(E6(X,Z))Y.push(Z);else if(X.includes("integer")&&Z==="number")Y.push("integer");Q.dataTypes=Y},F9=function(Q,X){const Y=Q.schemaEnv.baseId+Q.errSchemaPath;X+=` at "${Y}" (strictTypes)`,$1.checkStrictMode(Q,X,Q.opts.strictTypes)},w6=function(Q,X,Y,Z){const $=new B9(Q,Y,X);if("code"in Y)Y.code($,Z);else if($.$data&&Y.validate)g1.funcKeywordCode($,Y);else if("macro"in Y)g1.macroKeywordCode($,Y);else if(Y.compile||Y.validate)g1.funcKeywordCode($,Y)},S6=function(Q,{dataLevel:X,dataNames:Y,dataPathArr:Z}){let $,W;if(Q==="")return A.default.rootData;if(Q[0]==="/"){if(!o$.test(Q))throw new Error(`Invalid JSON-pointer: ${Q}`);$=Q,W=A.default.rootData}else{const q=e$.exec(Q);if(!q)throw new Error(`Invalid JSON-pointer: ${Q}`);const H=+q[1];if($=q[2],$==="#"){if(H>=X)throw new Error(z("property/index",H));return Z[X-H]}if(H>X)throw new Error(z("data",H));if(W=Y[X-H],!$)return W}let J=W;const G=$.split("/");for(let q of G)if(q)W=U._`${W}${U.getProperty($1.unescapeJsonPointer(q))}`,J=U._`${J} && ${W}`;return J;function z(q,H){return`Cannot access ${q} ${H} levels up, current level is ${X}`}};Object.defineProperty(P6,"__esModule",{value:!0});P6.getData=P6.KeywordCxt=P6.validateFunctionCode=void 0;var A6=v4(),L6=x1(),H9=Q9(),K0=x1(),C$=r4(),g1=Z6(),z9=G6(),U=I(),A=Z1(),k$=u1(),$1=w(),_1=f1();P6.validateFunctionCode=v$;class B9{constructor(Q,X,Y){if(g1.validateKeywordUsage(Q,X,Y),this.gen=Q.gen,this.allErrors=Q.allErrors,this.keyword=Y,this.data=Q.data,this.schema=Q.schema[Y],this.$data=X.$data&&Q.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=$1.schemaRefOrVal(Q,this.schema,Y,this.$data),this.schemaType=X.schemaType,this.parentSchema=Q.schema,this.params={},this.it=Q,this.def=X,this.$data)this.schemaCode=Q.gen.const("vSchema",S6(this.$data,Q));else if(this.schemaCode=this.schemaValue,!g1.validSchemaType(this.schema,X.schemaType,X.allowUndefined))throw new Error(`${Y} value must be ${JSON.stringify(X.schemaType)}`);if("code"in X?X.trackErrors:X.errors!==!1)this.errsCount=Q.gen.const("_errs",A.default.errors)}result(Q,X,Y){this.failResult(U.not(Q),X,Y)}failResult(Q,X,Y){if(this.gen.if(Q),Y)Y();else this.error();if(X){if(this.gen.else(),X(),this.allErrors)this.gen.endIf()}else if(this.allErrors)this.gen.endIf();else this.gen.else()}pass(Q,X){this.failResult(U.not(Q),void 0,X)}fail(Q){if(Q===void 0){if(this.error(),!this.allErrors)this.gen.if(!1);return}if(this.gen.if(Q),this.error(),this.allErrors)this.gen.endIf();else this.gen.else()}fail$data(Q){if(!this.$data)return this.fail(Q);const{schemaCode:X}=this;this.fail(U._`${X} !== undefined && (${U.or(this.invalid$data(),Q)})`)}error(Q,X,Y){if(X){this.setParams(X),this._error(Q,Y),this.setParams({});return}this._error(Q,Y)}_error(Q,X){(Q?_1.reportExtraError:_1.reportError)(this,this.def.error,X)}$dataError(){_1.reportError(this,this.def.$dataError||_1.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');_1.resetErrorsCount(this.gen,this.errsCount)}ok(Q){if(!this.allErrors)this.gen.if(Q)}setParams(Q,X){if(X)Object.assign(this.params,Q);else this.params=Q}block$data(Q,X,Y=U.nil){this.gen.block(()=>{this.check$data(Q,Y),X()})}check$data(Q=U.nil,X=U.nil){if(!this.$data)return;const{gen:Y,schemaCode:Z,schemaType:$,def:W}=this;if(Y.if(U.or(U._`${Z} === undefined`,X)),Q!==U.nil)Y.assign(Q,!0);if($.length||W.validateSchema){if(Y.elseIf(this.invalid$data()),this.$dataError(),Q!==U.nil)Y.assign(Q,!1)}Y.else()}invalid$data(){const{gen:Q,schemaCode:X,schemaType:Y,def:Z,it:$}=this;return U.or(W(),J());function W(){if(Y.length){if(!(X instanceof U.Name))throw new Error("ajv implementation error");const G=Array.isArray(Y)?Y:[Y];return U._`${K0.checkDataTypes(G,X,$.opts.strictNumbers,K0.DataType.Wrong)}`}return U.nil}function J(){if(Z.validateSchema){const G=Q.scopeValue("validate$data",{ref:Z.validateSchema});return U._`!${G}(${X})`}return U.nil}}subschema(Q,X){const Y=z9.getSubschema(this.it,Q);z9.extendSubschemaData(Y,this.it,Q),z9.extendSubschemaMode(Y,Q);const Z={...this.it,...Y,items:void 0,props:void 0};return _$(Z,X),Z}mergeEvaluated(Q,X){const{it:Y,gen:Z}=this;if(!Y.opts.unevaluated)return;if(Y.props!==!0&&Q.props!==void 0)Y.props=$1.mergeEvaluated.props(Z,Q.props,Y.props,X);if(Y.items!==!0&&Q.items!==void 0)Y.items=$1.mergeEvaluated.items(Z,Q.items,Y.items,X)}mergeValidEvaluated(Q,X){const{it:Y,gen:Z}=this;if(Y.opts.unevaluated&&(Y.props!==!0||Y.items!==!0))return Z.if(X,()=>this.mergeEvaluated(Q,U.Name)),!0}}P6.KeywordCxt=B9;var o$=/^\/(?:[^~]|~0|~1)*$/,e$=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;P6.getData=S6});var M0=L((v6)=>{Object.defineProperty(v6,"__esModule",{value:!0});class k6 extends Error{constructor(Q){super("validation failed");this.errors=Q,this.ajv=this.validation=!0}}v6.default=k6});var h1=L((f6)=>{Object.defineProperty(f6,"__esModule",{value:!0});var K9=u1();class y6 extends Error{constructor(Q,X,Y,Z){super(Z||`can't resolve reference ${Y} from id ${X}`);this.missingRef=K9.resolveUrl(Q,X,Y),this.missingSchema=K9.normalizeId(K9.getFullPath(Q,this.missingRef))}}f6.default=y6});var L0=L((_6)=>{var V9=function(Q){const X=u6.call(this,Q);if(X)return X;const Y=r.getFullPath(this.opts.uriResolver,Q.root.baseId),{es5:Z,lines:$}=this.opts.code,{ownProperties:W}=this.opts,J=new c.CodeGen(this.scope,{es5:Z,lines:$,ownProperties:W});let G;if(Q.$async)G=J.scopeValue("Error",{ref:$W.default,code:c._`require("ajv/dist/runtime/validation_error").default`});const z=J.scopeName("validate");Q.validateName=z;const q={gen:J,allErrors:this.opts.allErrors,data:O1.default.data,parentData:O1.default.parentData,parentDataProperty:O1.default.parentDataProperty,dataNames:[O1.default.data],dataPathArr:[c.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:J.scopeValue("schema",this.opts.code.source===!0?{ref:Q.schema,code:c.stringify(Q.schema)}:{ref:Q.schema}),validateName:z,ValidationError:G,schema:Q.schema,schemaEnv:Q,rootId:Y,baseId:Q.baseId||Y,schemaPath:c.nil,errSchemaPath:Q.schemaPath||(this.opts.jtd?"":"#"),errorPath:c._`""`,opts:this.opts,self:this};let H;try{this._compilations.add(Q),WW.validateFunctionCode(q),J.optimize(this.opts.code.optimize);const F=J.toString();if(H=`${J.scopeRefs(O1.default.scope)}return ${F}`,this.opts.code.process)H=this.opts.code.process(H,Q);const V=new Function(`${O1.default.self}`,`${O1.default.scope}`,H)(this,this.scope.get());if(this.scope.value(z,{ref:V}),V.errors=null,V.schema=Q.schema,V.schemaEnv=Q,Q.$async)V.$async=!0;if(this.opts.code.source===!0)V.source={validateName:z,validateCode:F,scopeValues:J._values};if(this.opts.unevaluated){const{props:K,items:B}=q;if(V.evaluated={props:K instanceof c.Name?void 0:K,items:B instanceof c.Name?void 0:B,dynamicProps:K instanceof c.Name,dynamicItems:B instanceof c.Name},V.source)V.source.evaluated=c.stringify(V.evaluated)}return Q.validate=V,Q}catch(F){if(delete Q.validate,delete Q.validateName,H)this.logger.error("Error compiling schema, function code:",H);throw F}finally{this._compilations.delete(Q)}},JW=function(Q,X,Y){var Z;Y=r.resolveUrl(this.opts.uriResolver,X,Y);const $=Q.refs[Y];if($)return $;let W=zW.call(this,Q,Y);if(W===void 0){const J=(Z=Q.localRefs)===null||Z===void 0?void 0:Z[Y],{schemaId:G}=this.opts;if(J)W=new m1({schema:J,schemaId:G,root:Q,baseId:X})}if(W===void 0)return;return Q.refs[Y]=GW.call(this,W)},GW=function(Q){if(r.inlineRef(Q.schema,this.opts.inlineRefs))return Q.schema;return Q.validate?Q:V9.call(this,Q)},u6=function(Q){for(let X of this._compilations)if(qW(X,Q))return X},qW=function(Q,X){return Q.schema===X.schema&&Q.root===X.root&&Q.baseId===X.baseId},zW=function(Q,X){let Y;while(typeof(Y=this.refs[X])=="string")X=Y;return Y||this.schemas[X]||V0.call(this,Q,X)},V0=function(Q,X){const Y=this.opts.uriResolver.parse(X),Z=r._getFullPath(this.opts.uriResolver,Y);let $=r.getFullPath(this.opts.uriResolver,Q.baseId,void 0);if(Object.keys(Q.schema).length>0&&Z===$)return M9.call(this,Y,Q);const W=r.normalizeId(Z),J=this.refs[W]||this.schemas[W];if(typeof J=="string"){const G=V0.call(this,Q,J);if(typeof(G===null||G===void 0?void 0:G.schema)!=="object")return;return M9.call(this,Y,G)}if(typeof(J===null||J===void 0?void 0:J.schema)!=="object")return;if(!J.validate)V9.call(this,J);if(W===r.normalizeId(X)){const{schema:G}=J,{schemaId:z}=this.opts,q=G[z];if(q)$=r.resolveUrl(this.opts.uriResolver,$,q);return new m1({schema:G,schemaId:z,root:Q,baseId:$})}return M9.call(this,Y,J)},M9=function(Q,{baseId:X,schema:Y,root:Z}){var $;if((($=Q.fragment)===null||$===void 0?void 0:$[0])!=="/")return;for(let G of Q.fragment.slice(1).split("/")){if(typeof Y==="boolean")return;const z=Y[x6.unescapeFragment(G)];if(z===void 0)return;Y=z;const q=typeof Y==="object"&&Y[this.opts.schemaId];if(!HW.has(G)&&q)X=r.resolveUrl(this.opts.uriResolver,X,q)}let W;if(typeof Y!="boolean"&&Y.$ref&&!x6.schemaHasRulesButRef(Y,this.RULES)){const G=r.resolveUrl(this.opts.uriResolver,X,Y.$ref);W=V0.call(this,Z,G)}const{schemaId:J}=this.opts;if(W=W||new m1({schema:Y,schemaId:J,root:Z,baseId:X}),W.schema!==W.root.schema)return W;return};Object.defineProperty(_6,"__esModule",{value:!0});_6.resolveSchema=_6.getCompilingSchema=_6.resolveRef=_6.compileSchema=_6.SchemaEnv=void 0;var c=I(),$W=M0(),O1=Z1(),r=u1(),x6=w(),WW=l1();class m1{constructor(Q){var X;this.refs={},this.dynamicAnchors={};let Y;if(typeof Q.schema=="object")Y=Q.schema;this.schema=Q.schema,this.schemaId=Q.schemaId,this.root=Q.root||this,this.baseId=(X=Q.baseId)!==null&&X!==void 0?X:r.normalizeId(Y===null||Y===void 0?void 0:Y[Q.schemaId||"$id"]),this.schemaPath=Q.schemaPath,this.localRefs=Q.localRefs,this.meta=Q.meta,this.$async=Y===null||Y===void 0?void 0:Y.$async,this.refs={}}}_6.SchemaEnv=m1;_6.compileSchema=V9;_6.resolveRef=JW;_6.getCompilingSchema=u6;_6.resolveSchema=V0;var HW=new Set(["properties","patternProperties","enum","dependencies","definitions"])});var l6=L((lq,VW)=>{VW.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var m6=L((hq,h6)=>{var LW={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};h6.exports={HEX:LW}});var t6=L((mq,s6)=>{var n6=function(Q){if(r6(Q,".")<3)return{host:Q,isIPV4:!1};const X=Q.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[Y]=X;if(Y)return{host:UW(Y,"."),isIPV4:!0};else return{host:Q,isIPV4:!1}},L9=function(Q,X=!1){let Y="",Z=!0;for(let $ of Q){if(OW[$]===void 0)return;if($!=="0"&&Z===!0)Z=!1;if(!Z)Y+=$}if(X&&Y.length===0)Y="0";return Y},jW=function(Q){let X=0;const Y={error:!1,address:"",zone:""},Z=[],$=[];let W=!1,J=!1,G=!1;function z(){if($.length){if(W===!1){const q=L9($);if(q!==void 0)Z.push(q);else return Y.error=!0,!1}$.length=0}return!0}for(let q=0;q<Q.length;q++){const H=Q[q];if(H==="["||H==="]")continue;if(H===":"){if(J===!0)G=!0;if(!z())break;if(X++,Z.push(":"),X>7){Y.error=!0;break}if(q-1>=0&&Q[q-1]===":")J=!0;continue}else if(H==="%"){if(!z())break;W=!0}else{$.push(H);continue}}if($.length)if(W)Y.zone=$.join("");else if(G)Z.push($.join(""));else Z.push(L9($));return Y.address=Z.join(""),Y},c6=function(Q,X={}){if(r6(Q,":")<2)return{host:Q,isIPV6:!1};const Y=jW(Q);if(!Y.error){let{address:Z,address:$}=Y;if(Y.zone)Z+="%"+Y.zone,$+="%25"+Y.zone;return{host:Z,escapedHost:$,isIPV6:!0}}else return{host:Q,isIPV6:!1}},UW=function(Q,X){let Y="",Z=!0;const $=Q.length;for(let W=0;W<$;W++){const J=Q[W];if(J==="0"&&Z){if(W+1<=$&&Q[W+1]===X||W+1===$)Y+=J,Z=!1}else{if(J===X)Z=!0;else Z=!1;Y+=J}}return Y},r6=function(Q,X){let Y=0;for(let Z=0;Z<Q.length;Z++)if(Q[Z]===X)Y++;return Y},DW=function(Q){const X=[];while(Q.length)if(Q.match(i6))Q=Q.replace(i6,"");else if(Q.match(p6))Q=Q.replace(p6,"/");else if(Q.match(d6))Q=Q.replace(d6,"/"),X.pop();else if(Q==="."||Q==="..")Q="";else{const Y=Q.match(AW);if(Y){const Z=Y[0];Q=Q.slice(Z.length),X.push(Z)}else throw new Error("Unexpected dot segment condition")}return X.join("")},NW=function(Q,X){const Y=X!==!0?escape:unescape;if(Q.scheme!==void 0)Q.scheme=Y(Q.scheme);if(Q.userinfo!==void 0)Q.userinfo=Y(Q.userinfo);if(Q.host!==void 0)Q.host=Y(Q.host);if(Q.path!==void 0)Q.path=Y(Q.path);if(Q.query!==void 0)Q.query=Y(Q.query);if(Q.fragment!==void 0)Q.fragment=Y(Q.fragment);return Q},IW=function(Q,X){const Y=[];if(Q.userinfo!==void 0)Y.push(Q.userinfo),Y.push("@");if(Q.host!==void 0){let Z=unescape(Q.host);const $=n6(Z);if($.isIPV4)Z=$.host;else{const W=c6($.host,{isIPV4:!1});if(W.isIPV6===!0)Z=`[${W.escapedHost}]`;else Z=Q.host}Y.push(Z)}if(typeof Q.port==="number"||typeof Q.port==="string")Y.push(":"),Y.push(String(Q.port));return Y.length?Y.join(""):void 0},{HEX:OW}=m6(),i6=/^\.\.?\//u,p6=/^\/\.(?:\/|$)/u,d6=/^\/\.\.(?:\/|$)/u,AW=/^\/?(?:.|\n)*?(?=\/|$)/u;s6.exports={recomposeAuthority:IW,normalizeComponentEncoding:NW,removeDotSegments:DW,normalizeIPv4:n6,normalizeIPv6:c6,stringArrayToHexStripped:L9}});var YQ=L((iq,XQ)=>{var a6=function(Q){return typeof Q.secure==="boolean"?Q.secure:String(Q.scheme).toLowerCase()==="wss"},o6=function(Q){if(!Q.host)Q.error=Q.error||"HTTP URIs must have a host.";return Q},e6=function(Q){const X=String(Q.scheme).toLowerCase()==="https";if(Q.port===(X?443:80)||Q.port==="")Q.port=void 0;if(!Q.path)Q.path="/";return Q},RW=function(Q){return Q.secure=a6(Q),Q.resourceName=(Q.path||"/")+(Q.query?"?"+Q.query:""),Q.path=void 0,Q.query=void 0,Q},EW=function(Q){if(Q.port===(a6(Q)?443:80)||Q.port==="")Q.port=void 0;if(typeof Q.secure==="boolean")Q.scheme=Q.secure?"wss":"ws",Q.secure=void 0;if(Q.resourceName){const[X,Y]=Q.resourceName.split("?");Q.path=X&&X!=="/"?X:void 0,Q.query=Y,Q.resourceName=void 0}return Q.fragment=void 0,Q},wW=function(Q,X){if(!Q.path)return Q.error="URN can not be parsed",Q;const Y=Q.path.match(bW);if(Y){const Z=X.scheme||Q.scheme||"urn";Q.nid=Y[1].toLowerCase(),Q.nss=Y[2];const $=`${Z}:${X.nid||Q.nid}`,W=O9[$];if(Q.path=void 0,W)Q=W.parse(Q,X)}else Q.error=Q.error||"URN can not be parsed.";return Q},SW=function(Q,X){const Y=X.scheme||Q.scheme||"urn",Z=Q.nid.toLowerCase(),$=`${Y}:${X.nid||Z}`,W=O9[$];if(W)Q=W.serialize(Q,X);const J=Q,G=Q.nss;return J.path=`${Z||X.nid}:${G}`,X.skipEscape=!0,J},PW=function(Q,X){const Y=Q;if(Y.uuid=Y.nss,Y.nss=void 0,!X.tolerant&&(!Y.uuid||!TW.test(Y.uuid)))Y.error=Y.error||"UUID is not valid.";return Y},CW=function(Q){const X=Q;return X.nss=(Q.uuid||"").toLowerCase(),X},TW=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,bW=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,QQ={scheme:"http",domainHost:!0,parse:o6,serialize:e6},kW={scheme:"https",domainHost:QQ.domainHost,parse:o6,serialize:e6},O0={scheme:"ws",domainHost:!0,parse:RW,serialize:EW},vW={scheme:"wss",domainHost:O0.domainHost,parse:O0.parse,serialize:O0.serialize},yW={scheme:"urn",parse:wW,serialize:SW,skipNormalize:!0},fW={scheme:"urn:uuid",parse:PW,serialize:CW,skipNormalize:!0},O9={http:QQ,https:kW,ws:O0,wss:vW,urn:yW,"urn:uuid":fW};XQ.exports=O9});var $Q=L((pq,U0)=>{var gW=function(Q,X){if(typeof Q==="string")Q=e(W1(Q,X),X);else if(typeof Q==="object")Q=W1(e(Q,X),X);return Q},lW=function(Q,X,Y){const Z=Object.assign({scheme:"null"},Y),$=ZQ(W1(Q,Z),W1(X,Z),Z,!0);return e($,{...Z,skipEscape:!0})},ZQ=function(Q,X,Y,Z){const $={};if(!Z)Q=W1(e(Q,Y),Y),X=W1(e(X,Y),Y);if(Y=Y||{},!Y.tolerant&&X.scheme)$.scheme=X.scheme,$.userinfo=X.userinfo,$.host=X.host,$.port=X.port,$.path=i1(X.path||""),$.query=X.query;else{if(X.userinfo!==void 0||X.host!==void 0||X.port!==void 0)$.userinfo=X.userinfo,$.host=X.host,$.port=X.port,$.path=i1(X.path||""),$.query=X.query;else{if(!X.path)if($.path=Q.path,X.query!==void 0)$.query=X.query;else $.query=Q.query;else{if(X.path.charAt(0)==="/")$.path=i1(X.path);else{if((Q.userinfo!==void 0||Q.host!==void 0||Q.port!==void 0)&&!Q.path)$.path="/"+X.path;else if(!Q.path)$.path=X.path;else $.path=Q.path.slice(0,Q.path.lastIndexOf("/")+1)+X.path;$.path=i1($.path)}$.query=X.query}$.userinfo=Q.userinfo,$.host=Q.host,$.port=Q.port}$.scheme=Q.scheme}return $.fragment=X.fragment,$},hW=function(Q,X,Y){if(typeof Q==="string")Q=unescape(Q),Q=e(j0(W1(Q,Y),!0),{...Y,skipEscape:!0});else if(typeof Q==="object")Q=e(j0(Q,!0),{...Y,skipEscape:!0});if(typeof X==="string")X=unescape(X),X=e(j0(W1(X,Y),!0),{...Y,skipEscape:!0});else if(typeof X==="object")X=e(j0(X,!0),{...Y,skipEscape:!0});return Q.toLowerCase()===X.toLowerCase()},e=function(Q,X){const Y={host:Q.host,scheme:Q.scheme,userinfo:Q.userinfo,port:Q.port,path:Q.path,query:Q.query,nid:Q.nid,nss:Q.nss,uuid:Q.uuid,fragment:Q.fragment,reference:Q.reference,resourceName:Q.resourceName,secure:Q.secure,error:""},Z=Object.assign({},X),$=[],W=j9[(Z.scheme||Y.scheme||"").toLowerCase()];if(W&&W.serialize)W.serialize(Y,Z);if(Y.path!==void 0)if(!Z.skipEscape){if(Y.path=escape(Y.path),Y.scheme!==void 0)Y.path=Y.path.split("%3A").join(":")}else Y.path=unescape(Y.path);if(Z.reference!=="suffix"&&Y.scheme)$.push(Y.scheme),$.push(":");const J=_W(Y,Z);if(J!==void 0){if(Z.reference!=="suffix")$.push("//");if($.push(J),Y.path&&Y.path.charAt(0)!=="/")$.push("/")}if(Y.path!==void 0){let G=Y.path;if(!Z.absolutePath&&(!W||!W.absolutePath))G=i1(G);if(J===void 0)G=G.replace(/^\/\//u,"/%2F");$.push(G)}if(Y.query!==void 0)$.push("?"),$.push(Y.query);if(Y.fragment!==void 0)$.push("#"),$.push(Y.fragment);return $.join("")},iW=function(Q){let X=0;for(let Y=0,Z=Q.length;Y<Z;++Y)if(X=Q.charCodeAt(Y),X>126||mW[X])return!0;return!1},W1=function(Q,X){const Y=Object.assign({},X),Z={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},$=Q.indexOf("%")!==-1;let W=!1;if(Y.reference==="suffix")Q=(Y.scheme?Y.scheme+":":"")+"//"+Q;const J=Q.match(pW);if(J){if(Z.scheme=J[1],Z.userinfo=J[3],Z.host=J[4],Z.port=parseInt(J[5],10),Z.path=J[6]||"",Z.query=J[7],Z.fragment=J[8],isNaN(Z.port))Z.port=J[5];if(Z.host){const z=uW(Z.host);if(z.isIPV4===!1){const q=xW(z.host,{isIPV4:!1});Z.host=q.host.toLowerCase(),W=q.isIPV6}else Z.host=z.host,W=!0}if(Z.scheme===void 0&&Z.userinfo===void 0&&Z.host===void 0&&Z.port===void 0&&!Z.path&&Z.query===void 0)Z.reference="same-document";else if(Z.scheme===void 0)Z.reference="relative";else if(Z.fragment===void 0)Z.reference="absolute";else Z.reference="uri";if(Y.reference&&Y.reference!=="suffix"&&Y.reference!==Z.reference)Z.error=Z.error||"URI is not a "+Y.reference+" reference.";const G=j9[(Y.scheme||Z.scheme||"").toLowerCase()];if(!Y.unicodeSupport&&(!G||!G.unicodeSupport)){if(Z.host&&(Y.domainHost||G&&G.domainHost)&&W===!1&&iW(Z.host))try{Z.host=URL.domainToASCII(Z.host.toLowerCase())}catch(z){Z.error=Z.error||"Host's domain name can not be converted to ASCII: "+z}}if(!G||G&&!G.skipNormalize){if($&&Z.scheme!==void 0)Z.scheme=unescape(Z.scheme);if($&&Z.userinfo!==void 0)Z.userinfo=unescape(Z.userinfo);if($&&Z.host!==void 0)Z.host=unescape(Z.host);if(Z.path!==void 0&&Z.path.length)Z.path=escape(unescape(Z.path));if(Z.fragment!==void 0&&Z.fragment.length)Z.fragment=encodeURI(decodeURIComponent(Z.fragment))}if(G&&G.parse)G.parse(Z,Y)}else Z.error=Z.error||"URI can not be parsed.";return Z},{normalizeIPv6:xW,normalizeIPv4:uW,removeDotSegments:i1,recomposeAuthority:_W,normalizeComponentEncoding:j0}=t6(),j9=YQ(),mW=Array.from({length:127},(Q,X)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(X))),pW=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u,U9={SCHEMES:j9,normalize:gW,resolve:lW,resolveComponents:ZQ,equal:hW,serialize:e,parse:W1};U0.exports=U9;U0.exports.default=U9;U0.exports.fastUri=U9});var GQ=L((JQ)=>{Object.defineProperty(JQ,"__esModule",{value:!0});var WQ=$Q();WQ.code='require("ajv/dist/runtime/uri").default';JQ.default=WQ});var VQ=L((J1)=>{var X5=function(Q){var X,Y,Z,$,W,J,G,z,q,H,F,j,V,K,B,M,O,R,T,P,D,t,Q1,x0,u0;const P1=Q.strict,_0=(X=Q.code)===null||X===void 0?void 0:X.optimize,k9=_0===!0||_0===void 0?1:_0||0,v9=(Z=(Y=Q.code)===null||Y===void 0?void 0:Y.regExp)!==null&&Z!==void 0?Z:KQ,NX=($=Q.uriResolver)!==null&&$!==void 0?$:tW.default;return{strictSchema:(J=(W=Q.strictSchema)!==null&&W!==void 0?W:P1)!==null&&J!==void 0?J:!0,strictNumbers:(z=(G=Q.strictNumbers)!==null&&G!==void 0?G:P1)!==null&&z!==void 0?z:!0,strictTypes:(H=(q=Q.strictTypes)!==null&&q!==void 0?q:P1)!==null&&H!==void 0?H:"log",strictTuples:(j=(F=Q.strictTuples)!==null&&F!==void 0?F:P1)!==null&&j!==void 0?j:"log",strictRequired:(K=(V=Q.strictRequired)!==null&&V!==void 0?V:P1)!==null&&K!==void 0?K:!1,code:Q.code?{...Q.code,optimize:k9,regExp:v9}:{optimize:k9,regExp:v9},loopRequired:(B=Q.loopRequired)!==null&&B!==void 0?B:zQ,loopEnum:(M=Q.loopEnum)!==null&&M!==void 0?M:zQ,meta:(O=Q.meta)!==null&&O!==void 0?O:!0,messages:(R=Q.messages)!==null&&R!==void 0?R:!0,inlineRefs:(T=Q.inlineRefs)!==null&&T!==void 0?T:!0,schemaId:(P=Q.schemaId)!==null&&P!==void 0?P:"$id",addUsedSchema:(D=Q.addUsedSchema)!==null&&D!==void 0?D:!0,validateSchema:(t=Q.validateSchema)!==null&&t!==void 0?t:!0,validateFormats:(Q1=Q.validateFormats)!==null&&Q1!==void 0?Q1:!0,unicodeRegExp:(x0=Q.unicodeRegExp)!==null&&x0!==void 0?x0:!0,int32range:(u0=Q.int32range)!==null&&u0!==void 0?u0:!0,uriResolver:NX}},HQ=function(Q,X,Y,Z="error"){for(let $ in Q){const W=$;if(W in X)this.logger[Z](`${Y}: option ${$}. ${Q[W]}`)}},FQ=function(Q){return Q=d1.normalizeId(Q),this.schemas[Q]||this.refs[Q]},Y5=function(){const Q=this.opts.schemas;if(!Q)return;if(Array.isArray(Q))this.addSchema(Q);else for(let X in Q)this.addSchema(Q[X],X)},Z5=function(){for(let Q in this.opts.formats){const X=this.opts.formats[Q];if(X)this.addFormat(Q,X)}},$5=function(Q){if(Array.isArray(Q)){this.addVocabulary(Q);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let X in Q){const Y=Q[X];if(!Y.keyword)Y.keyword=X;this.addKeyword(Y)}},W5=function(){const Q={...this.opts};for(let X of aW)delete Q[X];return Q},G5=function(Q){if(Q===!1)return J5;if(Q===void 0)return console;if(Q.log&&Q.warn&&Q.error)return Q;throw new Error("logger must implement log, warn and error methods")},z5=function(Q,X){const{RULES:Y}=this;if(D9.eachItem(Q,(Z)=>{if(Y.keywords[Z])throw new Error(`Keyword ${Z} is already defined`);if(!q5.test(Z))throw new Error(`Keyword ${Z} has invalid name`)}),!X)return;if(X.$data&&!(("code"in X)||("validate"in X)))throw new Error('$data keyword must have "code" or "validate" function')},A9=function(Q,X,Y){var Z;const $=X===null||X===void 0?void 0:X.post;if(Y&&$)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:W}=this;let J=$?W.post:W.rules.find(({type:z})=>z===Y);if(!J)J={type:Y,rules:[]},W.rules.push(J);if(W.keywords[Q]=!0,!X)return;const G={keyword:Q,definition:{...X,type:A0.getJSONTypes(X.type),schemaType:A0.getJSONTypes(X.schemaType)}};if(X.before)H5.call(this,J,G,X.before);else J.rules.push(G);W.all[Q]=G,(Z=X.implements)===null||Z===void 0||Z.forEach((z)=>this.addKeyword(z))},H5=function(Q,X,Y){const Z=Q.rules.findIndex(($)=>$.keyword===Y);if(Z>=0)Q.rules.splice(Z,0,X);else Q.rules.push(X),this.logger.warn(`rule ${Y} is not defined`)},F5=function(Q){let{metaSchema:X}=Q;if(X===void 0)return;if(Q.$data&&this.opts.$data)X=MQ(X);Q.validateSchema=this.compile(X,!0)},MQ=function(Q){return{anyOf:[Q,B5]}};Object.defineProperty(J1,"__esModule",{value:!0});J1.CodeGen=J1.Name=J1.nil=J1.stringify=J1.str=J1._=J1.KeywordCxt=void 0;var nW=l1();Object.defineProperty(J1,"KeywordCxt",{enumerable:!0,get:function(){return nW.KeywordCxt}});var R1=I();Object.defineProperty(J1,"_",{enumerable:!0,get:function(){return R1._}});Object.defineProperty(J1,"str",{enumerable:!0,get:function(){return R1.str}});Object.defineProperty(J1,"stringify",{enumerable:!0,get:function(){return R1.stringify}});Object.defineProperty(J1,"nil",{enumerable:!0,get:function(){return R1.nil}});Object.defineProperty(J1,"Name",{enumerable:!0,get:function(){return R1.Name}});Object.defineProperty(J1,"CodeGen",{enumerable:!0,get:function(){return R1.CodeGen}});var cW=M0(),BQ=h1(),rW=e0(),p1=L0(),sW=I(),d1=u1(),A0=x1(),D9=w(),qQ=l6(),tW=GQ(),KQ=(Q,X)=>new RegExp(Q,X);KQ.code="new RegExp";var aW=["removeAdditional","useDefaults","coerceTypes"],oW=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),eW={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},Q5={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},zQ=200;class D0{constructor(Q={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,Q=this.opts={...Q,...X5(Q)};const{es5:X,lines:Y}=this.opts.code;this.scope=new sW.ValueScope({scope:{},prefixes:oW,es5:X,lines:Y}),this.logger=G5(Q.logger);const Z=Q.validateFormats;if(Q.validateFormats=!1,this.RULES=rW.getRules(),HQ.call(this,eW,Q,"NOT SUPPORTED"),HQ.call(this,Q5,Q,"DEPRECATED","warn"),this._metaOpts=W5.call(this),Q.formats)Z5.call(this);if(this._addVocabularies(),this._addDefaultMetaSchema(),Q.keywords)$5.call(this,Q.keywords);if(typeof Q.meta=="object")this.addMetaSchema(Q.meta);Y5.call(this),Q.validateFormats=Z}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:Q,meta:X,schemaId:Y}=this.opts;let Z=qQ;if(Y==="id")Z={...qQ},Z.id=Z.$id,delete Z.$id;if(X&&Q)this.addMetaSchema(Z,Z[Y],!1)}defaultMeta(){const{meta:Q,schemaId:X}=this.opts;return this.opts.defaultMeta=typeof Q=="object"?Q[X]||Q:void 0}validate(Q,X){let Y;if(typeof Q=="string"){if(Y=this.getSchema(Q),!Y)throw new Error(`no schema with key or ref "${Q}"`)}else Y=this.compile(Q);const Z=Y(X);if(!("$async"in Y))this.errors=Y.errors;return Z}compile(Q,X){const Y=this._addSchema(Q,X);return Y.validate||this._compileSchemaEnv(Y)}compileAsync(Q,X){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:Y}=this.opts;return Z.call(this,Q,X);async function Z(q,H){await $.call(this,q.$schema);const F=this._addSchema(q,H);return F.validate||W.call(this,F)}async function $(q){if(q&&!this.getSchema(q))await Z.call(this,{$ref:q},!0)}async function W(q){try{return this._compileSchemaEnv(q)}catch(H){if(!(H instanceof BQ.default))throw H;return J.call(this,H),await G.call(this,H.missingSchema),W.call(this,q)}}function J({missingSchema:q,missingRef:H}){if(this.refs[q])throw new Error(`AnySchema ${q} is loaded but ${H} cannot be resolved`)}async function G(q){const H=await z.call(this,q);if(!this.refs[q])await $.call(this,H.$schema);if(!this.refs[q])this.addSchema(H,q,X)}async function z(q){const H=this._loading[q];if(H)return H;try{return await(this._loading[q]=Y(q))}finally{delete this._loading[q]}}}addSchema(Q,X,Y,Z=this.opts.validateSchema){if(Array.isArray(Q)){for(let W of Q)this.addSchema(W,void 0,Y,Z);return this}let $;if(typeof Q==="object"){const{schemaId:W}=this.opts;if($=Q[W],$!==void 0&&typeof $!="string")throw new Error(`schema ${W} must be string`)}return X=d1.normalizeId(X||$),this._checkUnique(X),this.schemas[X]=this._addSchema(Q,Y,X,Z,!0),this}addMetaSchema(Q,X,Y=this.opts.validateSchema){return this.addSchema(Q,X,!0,Y),this}validateSchema(Q,X){if(typeof Q=="boolean")return!0;let Y;if(Y=Q.$schema,Y!==void 0&&typeof Y!="string")throw new Error("$schema must be a string");if(Y=Y||this.opts.defaultMeta||this.defaultMeta(),!Y)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const Z=this.validate(Y,Q);if(!Z&&X){const $="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error($);else throw new Error($)}return Z}getSchema(Q){let X;while(typeof(X=FQ.call(this,Q))=="string")Q=X;if(X===void 0){const{schemaId:Y}=this.opts,Z=new p1.SchemaEnv({schema:{},schemaId:Y});if(X=p1.resolveSchema.call(this,Z,Q),!X)return;this.refs[Q]=X}return X.validate||this._compileSchemaEnv(X)}removeSchema(Q){if(Q instanceof RegExp)return this._removeAllSchemas(this.schemas,Q),this._removeAllSchemas(this.refs,Q),this;switch(typeof Q){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const X=FQ.call(this,Q);if(typeof X=="object")this._cache.delete(X.schema);return delete this.schemas[Q],delete this.refs[Q],this}case"object":{const X=Q;this._cache.delete(X);let Y=Q[this.opts.schemaId];if(Y)Y=d1.normalizeId(Y),delete this.schemas[Y],delete this.refs[Y];return this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(Q){for(let X of Q)this.addKeyword(X);return this}addKeyword(Q,X){let Y;if(typeof Q=="string"){if(Y=Q,typeof X=="object")this.logger.warn("these parameters are deprecated, see docs for addKeyword"),X.keyword=Y}else if(typeof Q=="object"&&X===void 0){if(X=Q,Y=X.keyword,Array.isArray(Y)&&!Y.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(z5.call(this,Y,X),!X)return D9.eachItem(Y,($)=>A9.call(this,$)),this;F5.call(this,X);const Z={...X,type:A0.getJSONTypes(X.type),schemaType:A0.getJSONTypes(X.schemaType)};return D9.eachItem(Y,Z.type.length===0?($)=>A9.call(this,$,Z):($)=>Z.type.forEach((W)=>A9.call(this,$,Z,W))),this}getKeyword(Q){const X=this.RULES.all[Q];return typeof X=="object"?X.definition:!!X}removeKeyword(Q){const{RULES:X}=this;delete X.keywords[Q],delete X.all[Q];for(let Y of X.rules){const Z=Y.rules.findIndex(($)=>$.keyword===Q);if(Z>=0)Y.rules.splice(Z,1)}return this}addFormat(Q,X){if(typeof X=="string")X=new RegExp(X);return this.formats[Q]=X,this}errorsText(Q=this.errors,{separator:X=", ",dataVar:Y="data"}={}){if(!Q||Q.length===0)return"No errors";return Q.map((Z)=>`${Y}${Z.instancePath} ${Z.message}`).reduce((Z,$)=>Z+X+$)}$dataMetaSchema(Q,X){const Y=this.RULES.all;Q=JSON.parse(JSON.stringify(Q));for(let Z of X){const $=Z.split("/").slice(1);let W=Q;for(let J of $)W=W[J];for(let J in Y){const G=Y[J];if(typeof G!="object")continue;const{$data:z}=G.definition,q=W[J];if(z&&q)W[J]=MQ(q)}}return Q}_removeAllSchemas(Q,X){for(let Y in Q){const Z=Q[Y];if(!X||X.test(Y)){if(typeof Z=="string")delete Q[Y];else if(Z&&!Z.meta)this._cache.delete(Z.schema),delete Q[Y]}}}_addSchema(Q,X,Y,Z=this.opts.validateSchema,$=this.opts.addUsedSchema){let W;const{schemaId:J}=this.opts;if(typeof Q=="object")W=Q[J];else if(this.opts.jtd)throw new Error("schema must be object");else if(typeof Q!="boolean")throw new Error("schema must be object or boolean");let G=this._cache.get(Q);if(G!==void 0)return G;Y=d1.normalizeId(W||Y);const z=d1.getSchemaRefs.call(this,Q,Y);if(G=new p1.SchemaEnv({schema:Q,schemaId:J,meta:X,baseId:Y,localRefs:z}),this._cache.set(G.schema,G),$&&!Y.startsWith("#")){if(Y)this._checkUnique(Y);this.refs[Y]=G}if(Z)this.validateSchema(Q,!0);return G}_checkUnique(Q){if(this.schemas[Q]||this.refs[Q])throw new Error(`schema with key or id "${Q}" already exists`)}_compileSchemaEnv(Q){if(Q.meta)this._compileMetaSchema(Q);else p1.compileSchema.call(this,Q);if(!Q.validate)throw new Error("ajv implementation error");return Q.validate}_compileMetaSchema(Q){const X=this.opts;this.opts=this._metaOpts;try{p1.compileSchema.call(this,Q)}finally{this.opts=X}}}D0.ValidationError=cW.default;D0.MissingRefError=BQ.default;J1.default=D0;var J5={log(){},warn(){},error(){}},q5=/^[a-z_$][a-z0-9_$:-]*$/i,B5={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}});var OQ=L((LQ)=>{Object.defineProperty(LQ,"__esModule",{value:!0});var V5={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};LQ.default=V5});var IQ=L((DQ)=>{var AQ=function(Q,X){const{gen:Y}=Q;return X.validate?Y.scopeValue("validate",{ref:X.validate}):g._`${Y.scopeValue("wrapper",{ref:X})}.validate`},I0=function(Q,X,Y,Z){const{gen:$,it:W}=Q,{allErrors:J,schemaEnv:G,opts:z}=W,q=z.passContext?E1.default.this:g.nil;if(Z)H();else F();function H(){if(!G.$async)throw new Error("async schema referenced by sync schema");const K=$.let("valid");$.try(()=>{if($.code(g._`await ${jQ.callValidateCode(Q,X,q)}`),V(X),!J)$.assign(K,!0)},(B)=>{if($.if(g._`!(${B} instanceof ${W.ValidationError})`,()=>$.throw(B)),j(B),!J)$.assign(K,!1)}),Q.ok(K)}function F(){Q.result(jQ.callValidateCode(Q,X,q),()=>V(X),()=>j(X))}function j(K){const B=g._`${K}.errors`;$.assign(E1.default.vErrors,g._`${E1.default.vErrors} === null ? ${B} : ${E1.default.vErrors}.concat(${B})`),$.assign(E1.default.errors,g._`${E1.default.vErrors}.length`)}function V(K){var B;if(!W.opts.unevaluated)return;const M=(B=Y===null||Y===void 0?void 0:Y.validate)===null||B===void 0?void 0:B.evaluated;if(W.props!==!0)if(M&&!M.dynamicProps){if(M.props!==void 0)W.props=N0.mergeEvaluated.props($,M.props,W.props)}else{const O=$.var("props",g._`${K}.evaluated.props`);W.props=N0.mergeEvaluated.props($,O,W.props,g.Name)}if(W.items!==!0)if(M&&!M.dynamicItems){if(M.items!==void 0)W.items=N0.mergeEvaluated.items($,M.items,W.items)}else{const O=$.var("items",g._`${K}.evaluated.items`);W.items=N0.mergeEvaluated.items($,O,W.items,g.Name)}}};Object.defineProperty(DQ,"__esModule",{value:!0});DQ.callRef=DQ.getValidate=void 0;var O5=h1(),jQ=h(),g=I(),E1=Z1(),UQ=L0(),N0=w(),j5={keyword:"$ref",schemaType:"string",code(Q){const{gen:X,schema:Y,it:Z}=Q,{baseId:$,schemaEnv:W,validateName:J,opts:G,self:z}=Z,{root:q}=W;if((Y==="#"||Y==="#/")&&$===q.baseId)return F();const H=UQ.resolveRef.call(z,q,$,Y);if(H===void 0)throw new O5.default(Z.opts.uriResolver,$,Y);if(H instanceof UQ.SchemaEnv)return j(H);return V(H);function F(){if(W===q)return I0(Q,J,W,W.$async);const K=X.scopeValue("root",{ref:q});return I0(Q,g._`${K}.validate`,q,q.$async)}function j(K){const B=AQ(Q,K);I0(Q,B,K,K.$async)}function V(K){const B=X.scopeValue("schema",G.code.source===!0?{ref:K,code:g.stringify(K)}:{ref:K}),M=X.name("valid"),O=Q.subschema({schema:K,dataTypes:[],schemaPath:g.nil,topSchemaRef:B,errSchemaPath:Y},M);Q.mergeEvaluated(O),Q.ok(M)}}};DQ.getValidate=AQ;DQ.callRef=I0;DQ.default=j5});var bQ=L((TQ)=>{Object.defineProperty(TQ,"__esModule",{value:!0});var D5=OQ(),N5=IQ(),I5=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",D5.default,N5.default];TQ.default=I5});var EQ=L((RQ)=>{Object.defineProperty(RQ,"__esModule",{value:!0});var T0=I(),B1=T0.operators,b0={maximum:{okStr:"<=",ok:B1.LTE,fail:B1.GT},minimum:{okStr:">=",ok:B1.GTE,fail:B1.LT},exclusiveMaximum:{okStr:"<",ok:B1.LT,fail:B1.GTE},exclusiveMinimum:{okStr:">",ok:B1.GT,fail:B1.LTE}},b5={message:({keyword:Q,schemaCode:X})=>T0.str`must be ${b0[Q].okStr} ${X}`,params:({keyword:Q,schemaCode:X})=>T0._`{comparison: ${b0[Q].okStr}, limit: ${X}}`},R5={keyword:Object.keys(b0),type:"number",schemaType:"number",$data:!0,error:b5,code(Q){const{keyword:X,data:Y,schemaCode:Z}=Q;Q.fail$data(T0._`${Y} ${b0[X].fail} ${Z} || isNaN(${Y})`)}};RQ.default=R5});var SQ=L((wQ)=>{Object.defineProperty(wQ,"__esModule",{value:!0});var n1=I(),w5={message:({schemaCode:Q})=>n1.str`must be multiple of ${Q}`,params:({schemaCode:Q})=>n1._`{multipleOf: ${Q}}`},S5={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:w5,code(Q){const{gen:X,data:Y,schemaCode:Z,it:$}=Q,W=$.opts.multipleOfPrecision,J=X.let("res"),G=W?n1._`Math.abs(Math.round(${J}) - ${J}) > 1e-${W}`:n1._`${J} !== parseInt(${J})`;Q.fail$data(n1._`(${Z} === 0 || (${J} = ${Y}/${Z}, ${G}))`)}};wQ.default=S5});var kQ=L((CQ)=>{var PQ=function(Q){const X=Q.length;let Y=0,Z=0,$;while(Z<X)if(Y++,$=Q.charCodeAt(Z++),$>=55296&&$<=56319&&Z<X){if($=Q.charCodeAt(Z),($&64512)===56320)Z++}return Y};Object.defineProperty(CQ,"__esModule",{value:!0});CQ.default=PQ;PQ.code='require("ajv/dist/runtime/ucs2length").default'});var yQ=L((vQ)=>{Object.defineProperty(vQ,"__esModule",{value:!0});var j1=I(),k5=w(),v5=kQ(),y5={message({keyword:Q,schemaCode:X}){const Y=Q==="maxLength"?"more":"fewer";return j1.str`must NOT have ${Y} than ${X} characters`},params:({schemaCode:Q})=>j1._`{limit: ${Q}}`},f5={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:y5,code(Q){const{keyword:X,data:Y,schemaCode:Z,it:$}=Q,W=X==="maxLength"?j1.operators.GT:j1.operators.LT,J=$.opts.unicode===!1?j1._`${Y}.length`:j1._`${k5.useFunc(Q.gen,v5.default)}(${Y})`;Q.fail$data(j1._`${J} ${W} ${Z}`)}};vQ.default=f5});var xQ=L((fQ)=>{Object.defineProperty(fQ,"__esModule",{value:!0});var u5=h(),R0=I(),_5={message:({schemaCode:Q})=>R0.str`must match pattern "${Q}"`,params:({schemaCode:Q})=>R0._`{pattern: ${Q}}`},g5={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:_5,code(Q){const{data:X,$data:Y,schema:Z,schemaCode:$,it:W}=Q,J=W.opts.unicodeRegExp?"u":"",G=Y?R0._`(new RegExp(${$}, ${J}))`:u5.usePattern(Q,Z);Q.fail$data(R0._`!${G}.test(${X})`)}};fQ.default=g5});var _Q=L((uQ)=>{Object.defineProperty(uQ,"__esModule",{value:!0});var c1=I(),h5={message({keyword:Q,schemaCode:X}){const Y=Q==="maxProperties"?"more":"fewer";return c1.str`must NOT have ${Y} than ${X} properties`},params:({schemaCode:Q})=>c1._`{limit: ${Q}}`},m5={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:h5,code(Q){const{keyword:X,data:Y,schemaCode:Z}=Q,$=X==="maxProperties"?c1.operators.GT:c1.operators.LT;Q.fail$data(c1._`Object.keys(${Y}).length ${$} ${Z}`)}};uQ.default=m5});var lQ=L((gQ)=>{Object.defineProperty(gQ,"__esModule",{value:!0});var r1=h(),s1=I(),p5=w(),d5={message:({params:{missingProperty:Q}})=>s1.str`must have required property '${Q}'`,params:({params:{missingProperty:Q}})=>s1._`{missingProperty: ${Q}}`},n5={keyword:"required",type:"object",schemaType:"array",$data:!0,error:d5,code(Q){const{gen:X,schema:Y,schemaCode:Z,data:$,$data:W,it:J}=Q,{opts:G}=J;if(!W&&Y.length===0)return;const z=Y.length>=G.loopRequired;if(J.allErrors)q();else H();if(G.strictRequired){const V=Q.parentSchema.properties,{definedProperties:K}=Q.it;for(let B of Y)if((V===null||V===void 0?void 0:V[B])===void 0&&!K.has(B)){const M=J.schemaEnv.baseId+J.errSchemaPath,O=`required property "${B}" is not defined at "${M}" (strictRequired)`;p5.checkStrictMode(J,O,J.opts.strictRequired)}}function q(){if(z||W)Q.block$data(s1.nil,F);else for(let V of Y)r1.checkReportMissingProp(Q,V)}function H(){const V=X.let("missing");if(z||W){const K=X.let("valid",!0);Q.block$data(K,()=>j(V,K)),Q.ok(K)}else X.if(r1.checkMissingProp(Q,Y,V)),r1.reportMissingProp(Q,V),X.else()}function F(){X.forOf("prop",Z,(V)=>{Q.setParams({missingProperty:V}),X.if(r1.noPropertyInData(X,$,V,G.ownProperties),()=>Q.error())})}function j(V,K){Q.setParams({missingProperty:V}),X.forOf(V,Z,()=>{X.assign(K,r1.propertyInData(X,$,V,G.ownProperties)),X.if(s1.not(K),()=>{Q.error(),X.break()})},s1.nil)}}};gQ.default=n5});var mQ=L((hQ)=>{Object.defineProperty(hQ,"__esModule",{value:!0});var t1=I(),r5={message({keyword:Q,schemaCode:X}){const Y=Q==="maxItems"?"more":"fewer";return t1.str`must NOT have ${Y} than ${X} items`},params:({schemaCode:Q})=>t1._`{limit: ${Q}}`},s5={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:r5,code(Q){const{keyword:X,data:Y,schemaCode:Z}=Q,$=X==="maxItems"?t1.operators.GT:t1.operators.LT;Q.fail$data(t1._`${Y}.length ${$} ${Z}`)}};hQ.default=s5});var E0=L((pQ)=>{Object.defineProperty(pQ,"__esModule",{value:!0});var iQ=G9();iQ.code='require("ajv/dist/runtime/equal").default';pQ.default=iQ});var nQ=L((dQ)=>{Object.defineProperty(dQ,"__esModule",{value:!0});var N9=x1(),v=I(),o5=w(),e5=E0(),QJ={message:({params:{i:Q,j:X}})=>v.str`must NOT have duplicate items (items ## ${X} and ${Q} are identical)`,params:({params:{i:Q,j:X}})=>v._`{i: ${Q}, j: ${X}}`},XJ={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:QJ,code(Q){const{gen:X,data:Y,$data:Z,schema:$,parentSchema:W,schemaCode:J,it:G}=Q;if(!Z&&!$)return;const z=X.let("valid"),q=W.items?N9.getSchemaTypes(W.items):[];Q.block$data(z,H,v._`${J} === false`),Q.ok(z);function H(){const K=X.let("i",v._`${Y}.length`),B=X.let("j");Q.setParams({i:K,j:B}),X.assign(z,!0),X.if(v._`${K} > 1`,()=>(F()?j:V)(K,B))}function F(){return q.length>0&&!q.some((K)=>K==="object"||K==="array")}function j(K,B){const M=X.name("item"),O=N9.checkDataTypes(q,M,G.opts.strictNumbers,N9.DataType.Wrong),R=X.const("indices",v._`{}`);X.for(v._`;${K}--;`,()=>{if(X.let(M,v._`${Y}[${K}]`),X.if(O,v._`continue`),q.length>1)X.if(v._`typeof ${M} == "string"`,v._`${M} += "_"`);X.if(v._`typeof ${R}[${M}] == "number"`,()=>{X.assign(B,v._`${R}[${M}]`),Q.error(),X.assign(z,!1).break()}).code(v._`${R}[${M}] = ${K}`)})}function V(K,B){const M=o5.useFunc(X,e5.default),O=X.name("outer");X.label(O).for(v._`;${K}--;`,()=>X.for(v._`${B} = ${K}; ${B}--;`,()=>X.if(v._`${M}(${Y}[${K}], ${Y}[${B}])`,()=>{Q.error(),X.assign(z,!1).break(O)})))}}};dQ.default=XJ});var rQ=L((cQ)=>{Object.defineProperty(cQ,"__esModule",{value:!0});var I9=I(),ZJ=w(),$J=E0(),WJ={message:"must be equal to constant",params:({schemaCode:Q})=>I9._`{allowedValue: ${Q}}`},JJ={keyword:"const",$data:!0,error:WJ,code(Q){const{gen:X,data:Y,$data:Z,schemaCode:$,schema:W}=Q;if(Z||W&&typeof W=="object")Q.fail$data(I9._`!${ZJ.useFunc(X,$J.default)}(${Y}, ${$})`);else Q.fail(I9._`${W} !== ${Y}`)}};cQ.default=JJ});var tQ=L((sQ)=>{Object.defineProperty(sQ,"__esModule",{value:!0});var a1=I(),qJ=w(),zJ=E0(),HJ={message:"must be equal to one of the allowed values",params:({schemaCode:Q})=>a1._`{allowedValues: ${Q}}`},FJ={keyword:"enum",schemaType:"array",$data:!0,error:HJ,code(Q){const{gen:X,data:Y,$data:Z,schema:$,schemaCode:W,it:J}=Q;if(!Z&&$.length===0)throw new Error("enum must have non-empty array");const G=$.length>=J.opts.loopEnum;let z;const q=()=>z!==null&&z!==void 0?z:z=qJ.useFunc(X,zJ.default);let H;if(G||Z)H=X.let("valid"),Q.block$data(H,F);else{if(!Array.isArray($))throw new Error("ajv implementation error");const V=X.const("vSchema",W);H=a1.or(...$.map((K,B)=>j(V,B)))}Q.pass(H);function F(){X.assign(H,!1),X.forOf("v",W,(V)=>X.if(a1._`${q()}(${Y}, ${V})`,()=>X.assign(H,!0).break()))}function j(V,K){const B=$[K];return typeof B==="object"&&B!==null?a1._`${q()}(${Y}, ${V}[${K}])`:a1._`${Y} === ${B}`}}};sQ.default=FJ});var oQ=L((aQ)=>{Object.defineProperty(aQ,"__esModule",{value:!0});var KJ=EQ(),MJ=SQ(),VJ=yQ(),LJ=xQ(),OJ=_Q(),jJ=lQ(),UJ=mQ(),AJ=nQ(),DJ=rQ(),NJ=tQ(),IJ=[KJ.default,MJ.default,VJ.default,LJ.default,OJ.default,jJ.default,UJ.default,AJ.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},DJ.default,NJ.default];aQ.default=IJ});var b9=L((Q8)=>{var eQ=function(Q,X){const{gen:Y,schema:Z,data:$,keyword:W,it:J}=Q;J.items=!0;const G=Y.const("len",U1._`${$}.length`);if(Z===!1)Q.setParams({len:X.length}),Q.pass(U1._`${G} <= ${X.length}`);else if(typeof Z=="object"&&!T9.alwaysValidSchema(J,Z)){const q=Y.var("valid",U1._`${G} <= ${X.length}`);Y.if(U1.not(q),()=>z(q)),Q.ok(q)}function z(q){Y.forRange("i",X.length,G,(H)=>{if(Q.subschema({keyword:W,dataProp:H,dataPropType:T9.Type.Num},q),!J.allErrors)Y.if(U1.not(q),()=>Y.break())})}};Object.defineProperty(Q8,"__esModule",{value:!0});Q8.validateAdditionalItems=void 0;var U1=I(),T9=w(),bJ={message:({params:{len:Q}})=>U1.str`must NOT have more than ${Q} items`,params:({params:{len:Q}})=>U1._`{limit: ${Q}}`},RJ={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:bJ,code(Q){const{parentSchema:X,it:Y}=Q,{items:Z}=X;if(!Array.isArray(Z)){T9.checkStrictMode(Y,'"additionalItems" is ignored when "items" is not an array of schemas');return}eQ(Q,Z)}};Q8.validateAdditionalItems=eQ;Q8.default=RJ});var R9=L(($8)=>{var Z8=function(Q,X,Y=Q.schema){const{gen:Z,parentSchema:$,data:W,keyword:J,it:G}=Q;if(H($),G.opts.unevaluated&&Y.length&&G.items!==!0)G.items=w0.mergeEvaluated.items(Z,Y.length,G.items);const z=Z.name("valid"),q=Z.const("len",Y8._`${W}.length`);Y.forEach((F,j)=>{if(w0.alwaysValidSchema(G,F))return;Z.if(Y8._`${q} > ${j}`,()=>Q.subschema({keyword:J,schemaProp:j,dataProp:j},z)),Q.ok(z)});function H(F){const{opts:j,errSchemaPath:V}=G,K=Y.length,B=K===F.minItems&&(K===F.maxItems||F[X]===!1);if(j.strictTuples&&!B){const M=`"${J}" is ${K}-tuple, but minItems or maxItems/${X} are not specified or different at path "${V}"`;w0.checkStrictMode(G,M,j.strictTuples)}}};Object.defineProperty($8,"__esModule",{value:!0});$8.validateTuple=void 0;var Y8=I(),w0=w(),wJ=h(),SJ={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(Q){const{schema:X,it:Y}=Q;if(Array.isArray(X))return Z8(Q,"additionalItems",X);if(Y.items=!0,w0.alwaysValidSchema(Y,X))return;Q.ok(wJ.validateArray(Q))}};$8.validateTuple=Z8;$8.default=SJ});var G8=L((J8)=>{Object.defineProperty(J8,"__esModule",{value:!0});var CJ=R9(),kJ={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:(Q)=>CJ.validateTuple(Q,"items")};J8.default=kJ});var H8=L((z8)=>{Object.defineProperty(z8,"__esModule",{value:!0});var q8=I(),yJ=w(),fJ=h(),xJ=b9(),uJ={message:({params:{len:Q}})=>q8.str`must NOT have more than ${Q} items`,params:({params:{len:Q}})=>q8._`{limit: ${Q}}`},_J={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:uJ,code(Q){const{schema:X,parentSchema:Y,it:Z}=Q,{prefixItems:$}=Y;if(Z.items=!0,yJ.alwaysValidSchema(Z,X))return;if($)xJ.validateAdditionalItems(Q,$);else Q.ok(fJ.validateArray(Q))}};z8.default=_J});var B8=L((F8)=>{Object.defineProperty(F8,"__esModule",{value:!0});var m=I(),S0=w(),lJ={message:({params:{min:Q,max:X}})=>X===void 0?m.str`must contain at least ${Q} valid item(s)`:m.str`must contain at least ${Q} and no more than ${X} valid item(s)`,params:({params:{min:Q,max:X}})=>X===void 0?m._`{minContains: ${Q}}`:m._`{minContains: ${Q}, maxContains: ${X}}`},hJ={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:lJ,code(Q){const{gen:X,schema:Y,parentSchema:Z,data:$,it:W}=Q;let J,G;const{minContains:z,maxContains:q}=Z;if(W.opts.next)J=z===void 0?1:z,G=q;else J=1;const H=X.const("len",m._`${$}.length`);if(Q.setParams({min:J,max:G}),G===void 0&&J===0){S0.checkStrictMode(W,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(G!==void 0&&J>G){S0.checkStrictMode(W,'"minContains" > "maxContains" is always invalid'),Q.fail();return}if(S0.alwaysValidSchema(W,Y)){let B=m._`${H} >= ${J}`;if(G!==void 0)B=m._`${B} && ${H} <= ${G}`;Q.pass(B);return}W.items=!0;const F=X.name("valid");if(G===void 0&&J===1)V(F,()=>X.if(F,()=>X.break()));else if(J===0){if(X.let(F,!0),G!==void 0)X.if(m._`${$}.length > 0`,j)}else X.let(F,!1),j();Q.result(F,()=>Q.reset());function j(){const B=X.name("_valid"),M=X.let("count",0);V(B,()=>X.if(B,()=>K(M)))}function V(B,M){X.forRange("i",0,H,(O)=>{Q.subschema({keyword:"contains",dataProp:O,dataPropType:S0.Type.Num,compositeRule:!0},B),M()})}function K(B){if(X.code(m._`${B}++`),G===void 0)X.if(m._`${B} >= ${J}`,()=>X.assign(F,!0).break());else if(X.if(m._`${B} > ${G}`,()=>X.assign(F,!1).break()),J===1)X.assign(F,!0);else X.if(m._`${B} >= ${J}`,()=>X.assign(F,!0))}}};F8.default=hJ});var j8=L((V8)=>{var dJ=function({schema:Q}){const X={},Y={};for(let Z in Q){if(Z==="__proto__")continue;const $=Array.isArray(Q[Z])?X:Y;$[Z]=Q[Z]}return[X,Y]},K8=function(Q,X=Q.schema){const{gen:Y,data:Z,it:$}=Q;if(Object.keys(X).length===0)return;const W=Y.let("missing");for(let J in X){const G=X[J];if(G.length===0)continue;const z=o1.propertyInData(Y,Z,J,$.opts.ownProperties);if(Q.setParams({property:J,depsCount:G.length,deps:G.join(", ")}),$.allErrors)Y.if(z,()=>{for(let q of G)o1.checkReportMissingProp(Q,q)});else Y.if(E9._`${z} && (${o1.checkMissingProp(Q,G,W)})`),o1.reportMissingProp(Q,W),Y.else()}},M8=function(Q,X=Q.schema){const{gen:Y,data:Z,keyword:$,it:W}=Q,J=Y.name("valid");for(let G in X){if(iJ.alwaysValidSchema(W,X[G]))continue;Y.if(o1.propertyInData(Y,Z,G,W.opts.ownProperties),()=>{const z=Q.subschema({keyword:$,schemaProp:G},J);Q.mergeValidEvaluated(z,J)},()=>Y.var(J,!0)),Q.ok(J)}};Object.defineProperty(V8,"__esModule",{value:!0});V8.validateSchemaDeps=V8.validatePropertyDeps=V8.error=void 0;var E9=I(),iJ=w(),o1=h();V8.error={message:({params:{property:Q,depsCount:X,deps:Y}})=>{const Z=X===1?"property":"properties";return E9.str`must have ${Z} ${Y} when property ${Q} is present`},params:({params:{property:Q,depsCount:X,deps:Y,missingProperty:Z}})=>E9._`{property: ${Q},
    missingProperty: ${Z},
    depsCount: ${X},
    deps: ${Y}}`};var pJ={keyword:"dependencies",type:"object",schemaType:"object",error:V8.error,code(Q){const[X,Y]=dJ(Q);K8(Q,X),M8(Q,Y)}};V8.validatePropertyDeps=K8;V8.validateSchemaDeps=M8;V8.default=pJ});var D8=L((A8)=>{Object.defineProperty(A8,"__esModule",{value:!0});var U8=I(),rJ=w(),sJ={message:"property name must be valid",params:({params:Q})=>U8._`{propertyName: ${Q.propertyName}}`},tJ={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:sJ,code(Q){const{gen:X,schema:Y,data:Z,it:$}=Q;if(rJ.alwaysValidSchema($,Y))return;const W=X.name("valid");X.forIn("key",Z,(J)=>{Q.setParams({propertyName:J}),Q.subschema({keyword:"propertyNames",data:J,dataTypes:["string"],propertyName:J,compositeRule:!0},W),X.if(U8.not(W),()=>{if(Q.error(!0),!$.allErrors)X.break()})}),Q.ok(W)}};A8.default=tJ});var w9=L((N8)=>{Object.defineProperty(N8,"__esModule",{value:!0});var P0=h(),s=I(),oJ=Z1(),C0=w(),eJ={message:"must NOT have additional properties",params:({params:Q})=>s._`{additionalProperty: ${Q.additionalProperty}}`},QG={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:eJ,code(Q){const{gen:X,schema:Y,parentSchema:Z,data:$,errsCount:W,it:J}=Q;if(!W)throw new Error("ajv implementation error");const{allErrors:G,opts:z}=J;if(J.props=!0,z.removeAdditional!=="all"&&C0.alwaysValidSchema(J,Y))return;const q=P0.allSchemaProperties(Z.properties),H=P0.allSchemaProperties(Z.patternProperties);F(),Q.ok(s._`${W} === ${oJ.default.errors}`);function F(){X.forIn("key",$,(M)=>{if(!q.length&&!H.length)K(M);else X.if(j(M),()=>K(M))})}function j(M){let O;if(q.length>8){const R=C0.schemaRefOrVal(J,Z.properties,"properties");O=P0.isOwnProperty(X,R,M)}else if(q.length)O=s.or(...q.map((R)=>s._`${M} === ${R}`));else O=s.nil;if(H.length)O=s.or(O,...H.map((R)=>s._`${P0.usePattern(Q,R)}.test(${M})`));return s.not(O)}function V(M){X.code(s._`delete ${$}[${M}]`)}function K(M){if(z.removeAdditional==="all"||z.removeAdditional&&Y===!1){V(M);return}if(Y===!1){if(Q.setParams({additionalProperty:M}),Q.error(),!G)X.break();return}if(typeof Y=="object"&&!C0.alwaysValidSchema(J,Y)){const O=X.name("valid");if(z.removeAdditional==="failing")B(M,O,!1),X.if(s.not(O),()=>{Q.reset(),V(M)});else if(B(M,O),!G)X.if(s.not(O),()=>X.break())}}function B(M,O,R){const T={keyword:"additionalProperties",dataProp:M,dataPropType:C0.Type.Str};if(R===!1)Object.assign(T,{compositeRule:!0,createErrors:!1,allErrors:!1});Q.subschema(T,O)}}};N8.default=QG});var R8=L((b8)=>{Object.defineProperty(b8,"__esModule",{value:!0});var YG=l1(),I8=h(),S9=w(),T8=w9(),ZG={keyword:"properties",type:"object",schemaType:"object",code(Q){const{gen:X,schema:Y,parentSchema:Z,data:$,it:W}=Q;if(W.opts.removeAdditional==="all"&&Z.additionalProperties===void 0)T8.default.code(new YG.KeywordCxt(W,T8.default,"additionalProperties"));const J=I8.allSchemaProperties(Y);for(let F of J)W.definedProperties.add(F);if(W.opts.unevaluated&&J.length&&W.props!==!0)W.props=S9.mergeEvaluated.props(X,S9.toHash(J),W.props);const G=J.filter((F)=>!S9.alwaysValidSchema(W,Y[F]));if(G.length===0)return;const z=X.name("valid");for(let F of G){if(q(F))H(F);else{if(X.if(I8.propertyInData(X,$,F,W.opts.ownProperties)),H(F),!W.allErrors)X.else().var(z,!0);X.endIf()}Q.it.definedProperties.add(F),Q.ok(z)}function q(F){return W.opts.useDefaults&&!W.compositeRule&&Y[F].default!==void 0}function H(F){Q.subschema({keyword:"properties",schemaProp:F,dataProp:F},z)}}};b8.default=ZG});var C8=L((P8)=>{Object.defineProperty(P8,"__esModule",{value:!0});var E8=h(),k0=I(),w8=w(),S8=w(),WG={keyword:"patternProperties",type:"object",schemaType:"object",code(Q){const{gen:X,schema:Y,data:Z,parentSchema:$,it:W}=Q,{opts:J}=W,G=E8.allSchemaProperties(Y),z=G.filter((B)=>w8.alwaysValidSchema(W,Y[B]));if(G.length===0||z.length===G.length&&(!W.opts.unevaluated||W.props===!0))return;const q=J.strictSchema&&!J.allowMatchingProperties&&$.properties,H=X.name("valid");if(W.props!==!0&&!(W.props instanceof k0.Name))W.props=S8.evaluatedPropsToName(X,W.props);const{props:F}=W;j();function j(){for(let B of G){if(q)V(B);if(W.allErrors)K(B);else X.var(H,!0),K(B),X.if(H)}}function V(B){for(let M in q)if(new RegExp(B).test(M))w8.checkStrictMode(W,`property ${M} matches pattern ${B} (use allowMatchingProperties)`)}function K(B){X.forIn("key",Z,(M)=>{X.if(k0._`${E8.usePattern(Q,B)}.test(${M})`,()=>{const O=z.includes(B);if(!O)Q.subschema({keyword:"patternProperties",schemaProp:B,dataProp:M,dataPropType:S8.Type.Str},H);if(W.opts.unevaluated&&F!==!0)X.assign(k0._`${F}[${M}]`,!0);else if(!O&&!W.allErrors)X.if(k0.not(H),()=>X.break())})})}}};P8.default=WG});var v8=L((k8)=>{Object.defineProperty(k8,"__esModule",{value:!0});var GG=w(),qG={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(Q){const{gen:X,schema:Y,it:Z}=Q;if(GG.alwaysValidSchema(Z,Y)){Q.fail();return}const $=X.name("valid");Q.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},$),Q.failResult($,()=>Q.reset(),()=>Q.error())},error:{message:"must NOT be valid"}};k8.default=qG});var f8=L((y8)=>{Object.defineProperty(y8,"__esModule",{value:!0});var HG=h(),FG={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:HG.validateUnion,error:{message:"must match a schema in anyOf"}};y8.default=FG});var u8=L((x8)=>{Object.defineProperty(x8,"__esModule",{value:!0});var v0=I(),KG=w(),MG={message:"must match exactly one schema in oneOf",params:({params:Q})=>v0._`{passingSchemas: ${Q.passing}}`},VG={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:MG,code(Q){const{gen:X,schema:Y,parentSchema:Z,it:$}=Q;if(!Array.isArray(Y))throw new Error("ajv implementation error");if($.opts.discriminator&&Z.discriminator)return;const W=Y,J=X.let("valid",!1),G=X.let("passing",null),z=X.name("_valid");Q.setParams({passing:G}),X.block(q),Q.result(J,()=>Q.reset(),()=>Q.error(!0));function q(){W.forEach((H,F)=>{let j;if(KG.alwaysValidSchema($,H))X.var(z,!0);else j=Q.subschema({keyword:"oneOf",schemaProp:F,compositeRule:!0},z);if(F>0)X.if(v0._`${z} && ${J}`).assign(J,!1).assign(G,v0._`[${G}, ${F}]`).else();X.if(z,()=>{if(X.assign(J,!0),X.assign(G,F),j)Q.mergeEvaluated(j,v0.Name)})})}}};x8.default=VG});var g8=L((_8)=>{Object.defineProperty(_8,"__esModule",{value:!0});var OG=w(),jG={keyword:"allOf",schemaType:"array",code(Q){const{gen:X,schema:Y,it:Z}=Q;if(!Array.isArray(Y))throw new Error("ajv implementation error");const $=X.name("valid");Y.forEach((W,J)=>{if(OG.alwaysValidSchema(Z,W))return;const G=Q.subschema({keyword:"allOf",schemaProp:J},$);Q.ok($),Q.mergeEvaluated(G)})}};_8.default=jG});var i8=L((m8)=>{var l8=function(Q,X){const Y=Q.schema[X];return Y!==void 0&&!h8.alwaysValidSchema(Q,Y)};Object.defineProperty(m8,"__esModule",{value:!0});var y0=I(),h8=w(),AG={message:({params:Q})=>y0.str`must match "${Q.ifClause}" schema`,params:({params:Q})=>y0._`{failingKeyword: ${Q.ifClause}}`},DG={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:AG,code(Q){const{gen:X,parentSchema:Y,it:Z}=Q;if(Y.then===void 0&&Y.else===void 0)h8.checkStrictMode(Z,'"if" without "then" and "else" is ignored');const $=l8(Z,"then"),W=l8(Z,"else");if(!$&&!W)return;const J=X.let("valid",!0),G=X.name("_valid");if(z(),Q.reset(),$&&W){const H=X.let("ifClause");Q.setParams({ifClause:H}),X.if(G,q("then",H),q("else",H))}else if($)X.if(G,q("then"));else X.if(y0.not(G),q("else"));Q.pass(J,()=>Q.error(!0));function z(){const H=Q.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},G);Q.mergeEvaluated(H)}function q(H,F){return()=>{const j=Q.subschema({keyword:H},G);if(X.assign(J,G),Q.mergeValidEvaluated(j,J),F)X.assign(F,y0._`${H}`);else Q.setParams({ifClause:H})}}}};m8.default=DG});var d8=L((p8)=>{Object.defineProperty(p8,"__esModule",{value:!0});var IG=w(),TG={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:Q,parentSchema:X,it:Y}){if(X.if===void 0)IG.checkStrictMode(Y,`"${Q}" without "if" is ignored`)}};p8.default=TG});var c8=L((n8)=>{var mG=function(Q=!1){const X=[xG.default,uG.default,_G.default,gG.default,lG.default,hG.default,kG.default,vG.default,CG.default,yG.default,fG.default];if(Q)X.push(EG.default,SG.default);else X.push(RG.default,wG.default);return X.push(PG.default),X};Object.defineProperty(n8,"__esModule",{value:!0});var RG=b9(),EG=G8(),wG=R9(),SG=H8(),PG=B8(),CG=j8(),kG=D8(),vG=w9(),yG=R8(),fG=C8(),xG=v8(),uG=f8(),_G=u8(),gG=g8(),lG=i8(),hG=d8();n8.default=mG});var s8=L((r8)=>{Object.defineProperty(r8,"__esModule",{value:!0});var k=I(),pG={message:({schemaCode:Q})=>k.str`must match format "${Q}"`,params:({schemaCode:Q})=>k._`{format: ${Q}}`},dG={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:pG,code(Q,X){const{gen:Y,data:Z,$data:$,schema:W,schemaCode:J,it:G}=Q,{opts:z,errSchemaPath:q,schemaEnv:H,self:F}=G;if(!z.validateFormats)return;if($)j();else V();function j(){const K=Y.scopeValue("formats",{ref:F.formats,code:z.code.formats}),B=Y.const("fDef",k._`${K}[${J}]`),M=Y.let("fType"),O=Y.let("format");Y.if(k._`typeof ${B} == "object" && !(${B} instanceof RegExp)`,()=>Y.assign(M,k._`${B}.type || "string"`).assign(O,k._`${B}.validate`),()=>Y.assign(M,k._`"string"`).assign(O,B)),Q.fail$data(k.or(R(),T()));function R(){if(z.strictSchema===!1)return k.nil;return k._`${J} && !${O}`}function T(){const P=H.$async?k._`(${B}.async ? await ${O}(${Z}) : ${O}(${Z}))`:k._`${O}(${Z})`,D=k._`(typeof ${O} == "function" ? ${P} : ${O}.test(${Z}))`;return k._`${O} && ${O} !== true && ${M} === ${X} && !${D}`}}function V(){const K=F.formats[W];if(!K){R();return}if(K===!0)return;const[B,M,O]=T(K);if(B===X)Q.pass(P());function R(){if(z.strictSchema===!1){F.logger.warn(D());return}throw new Error(D());function D(){return`unknown format "${W}" ignored in schema at path "${q}"`}}function T(D){const t=D instanceof RegExp?k.regexpCode(D):z.code.formats?k._`${z.code.formats}${k.getProperty(W)}`:void 0,Q1=Y.scopeValue("formats",{key:W,ref:D,code:t});if(typeof D=="object"&&!(D instanceof RegExp))return[D.type||"string",D.validate,k._`${Q1}.validate`];return["string",D,Q1]}function P(){if(typeof K=="object"&&!(K instanceof RegExp)&&K.async){if(!H.$async)throw new Error("async format in sync schema");return k._`await ${O}(${Z})`}return typeof M=="function"?k._`${O}(${Z})`:k._`${O}.test(${Z})`}}}};r8.default=dG});var a8=L((t8)=>{Object.defineProperty(t8,"__esModule",{value:!0});var cG=s8(),rG=[cG.default];t8.default=rG});var QX=L((o8)=>{Object.defineProperty(o8,"__esModule",{value:!0});o8.contentVocabulary=o8.metadataVocabulary=void 0;o8.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];o8.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var ZX=L((YX)=>{Object.defineProperty(YX,"__esModule",{value:!0});var aG=bQ(),oG=oQ(),eG=c8(),Q7=a8(),XX=QX(),X7=[aG.default,oG.default,eG.default(),Q7.default,XX.metadataVocabulary,XX.contentVocabulary];YX.default=X7});var GX=L((WX)=>{Object.defineProperty(WX,"__esModule",{value:!0});WX.DiscrError=void 0;var $X;(function(Q){Q.Tag="tag",Q.Mapping="mapping"})($X||(WX.DiscrError=$X={}))});var HX=L((zX)=>{Object.defineProperty(zX,"__esModule",{value:!0});var w1=I(),P9=GX(),qX=L0(),Z7=h1(),$7=w(),W7={message:({params:{discrError:Q,tagName:X}})=>Q===P9.DiscrError.Tag?`tag "${X}" must be string`:`value of tag "${X}" must be in oneOf`,params:({params:{discrError:Q,tag:X,tagName:Y}})=>w1._`{error: ${Q}, tag: ${Y}, tagValue: ${X}}`},J7={keyword:"discriminator",type:"object",schemaType:"object",error:W7,code(Q){const{gen:X,data:Y,schema:Z,parentSchema:$,it:W}=Q,{oneOf:J}=$;if(!W.opts.discriminator)throw new Error("discriminator: requires discriminator option");const G=Z.propertyName;if(typeof G!="string")throw new Error("discriminator: requires propertyName");if(Z.mapping)throw new Error("discriminator: mapping is not supported");if(!J)throw new Error("discriminator: requires oneOf keyword");const z=X.let("valid",!1),q=X.const("tag",w1._`${Y}${w1.getProperty(G)}`);X.if(w1._`typeof ${q} == "string"`,()=>H(),()=>Q.error(!1,{discrError:P9.DiscrError.Tag,tag:q,tagName:G})),Q.ok(z);function H(){const V=j();X.if(!1);for(let K in V)X.elseIf(w1._`${q} === ${K}`),X.assign(z,F(V[K]));X.else(),Q.error(!1,{discrError:P9.DiscrError.Mapping,tag:q,tagName:G}),X.endIf()}function F(V){const K=X.name("valid"),B=Q.subschema({keyword:"oneOf",schemaProp:V},K);return Q.mergeEvaluated(B,w1.Name),K}function j(){var V;const K={},B=O($);let M=!0;for(let P=0;P<J.length;P++){let D=J[P];if((D===null||D===void 0?void 0:D.$ref)&&!$7.schemaHasRulesButRef(D,W.self.RULES)){const Q1=D.$ref;if(D=qX.resolveRef.call(W.self,W.schemaEnv.root,W.baseId,Q1),D instanceof qX.SchemaEnv)D=D.schema;if(D===void 0)throw new Z7.default(W.opts.uriResolver,W.baseId,Q1)}const t=(V=D===null||D===void 0?void 0:D.properties)===null||V===void 0?void 0:V[G];if(typeof t!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${G}"`);M=M&&(B||O(D)),R(t,P)}if(!M)throw new Error(`discriminator: "${G}" must be required`);return K;function O({required:P}){return Array.isArray(P)&&P.includes(G)}function R(P,D){if(P.const)T(P.const,D);else if(P.enum)for(let t of P.enum)T(t,D);else throw new Error(`discriminator: "properties/${G}" must have "const" or "enum"`)}function T(P,D){if(typeof P!="string"||P in K)throw new Error(`discriminator: "${G}" values must be unique strings`);K[P]=D}}}};zX.default=J7});var FX=L((_z,q7)=>{q7.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var KX=L((l,C9)=>{Object.defineProperty(l,"__esModule",{value:!0});l.MissingRefError=l.ValidationError=l.CodeGen=l.Name=l.nil=l.stringify=l.str=l._=l.KeywordCxt=l.Ajv=void 0;var z7=VQ(),H7=ZX(),F7=HX(),BX=FX(),B7=["/properties"],f0="http://json-schema.org/draft-07/schema";class e1 extends z7.default{_addVocabularies(){if(super._addVocabularies(),H7.default.forEach((Q)=>this.addVocabulary(Q)),this.opts.discriminator)this.addKeyword(F7.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const Q=this.opts.$data?this.$dataMetaSchema(BX,B7):BX;this.addMetaSchema(Q,f0,!1),this.refs["http://json-schema.org/schema"]=f0}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(f0)?f0:void 0)}}l.Ajv=e1;C9.exports=l=e1;C9.exports.Ajv=e1;Object.defineProperty(l,"__esModule",{value:!0});l.default=e1;var K7=l1();Object.defineProperty(l,"KeywordCxt",{enumerable:!0,get:function(){return K7.KeywordCxt}});var S1=I();Object.defineProperty(l,"_",{enumerable:!0,get:function(){return S1._}});Object.defineProperty(l,"str",{enumerable:!0,get:function(){return S1.str}});Object.defineProperty(l,"stringify",{enumerable:!0,get:function(){return S1.stringify}});Object.defineProperty(l,"nil",{enumerable:!0,get:function(){return S1.nil}});Object.defineProperty(l,"Name",{enumerable:!0,get:function(){return S1.Name}});Object.defineProperty(l,"CodeGen",{enumerable:!0,get:function(){return S1.CodeGen}});var M7=M0();Object.defineProperty(l,"ValidationError",{enumerable:!0,get:function(){return M7.default}});var V7=h1();Object.defineProperty(l,"MissingRefError",{enumerable:!0,get:function(){return V7.default}})});var X1={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*","Access-Control-Allow-Credentials":"true"},SX=/^(([^<>()[\]\\.,;:\s@"A-Z]+(\.[^<>()[\]\\.,;:\s@"A-Z]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-z\-0-9]+\.)+[a-z]{2,}))$/,PX=/.*[0-9].*/,f9=(Q)=>SX.exec(Q)?.[0],f7=(Q)=>PX.exec(Q)?.[0],CX=(Q)=>Buffer.from(Q,"base64").toString("utf-8"),x9=(Q)=>{const X=Q.split(".");return JSON.parse(CX(X[1]))},u9=(Q,X)=>{try{return JSON.parse(X)}catch{return Q}};var K1=(Q)=>({statusCode:403,headers:X1,body:typeof Q==="string"?Q:JSON.stringify(Q)}),_7=(Q,X,Y)=>K1(`User ${Q} has no ${X} rights on node ${Y}`),a=(Q)=>({statusCode:400,headers:X1,body:typeof Q==="string"?Q:JSON.stringify(Q)}),_9=(Q)=>({statusCode:401,headers:X1,body:Q?JSON.stringify(Q):"Unauthorized"}),g9=(Q)=>({statusCode:404,headers:X1,body:Q?JSON.stringify(Q):"Not Found"}),l9=(Q)=>({statusCode:422,headers:X1,body:Q?JSON.stringify(Q):"Unprocessable Entity"}),g0=(Q)=>{if(Q.statusCode)return Q;return console.error(Q),{statusCode:500,headers:X1,body:Q.message}};var h9=a({name:"InvalidEmailError",message:"The email must be valid and must not contain upper case letters or spaces."}),h7=a({name:"InvalidPasswordError",message:"The password must contain at least 8 characters and at least 1 number."}),m7=a({name:"InvalidSrpAError",message:"The SRP A value must be a correctly calculated random hex hash based on big integers."}),i7=a({name:"InvalidRefreshTokenError",message:"Refresh token is invalid."}),m9=a({name:"VerificationCodeMismatchError",message:"The verification code does not match."}),i9=K1({name:"VerificationCodeExpiredError",message:"The verification code has exipired. Please retry via Reset Password Init (in case of pasword reset) or Register Verify Resend (in case of register)."}),p9=g9({name:"UserNotFoundError",message:"No user was found under the given email or user ID."}),p7=K1({name:"UserNotVerifiedError",message:"The user must be verified with Register Verify operation."}),d7=K1({name:"UserExistsError",message:"There is an existing user with the given email address."}),n7=a({name:"UserMissingPasswordChallengeError",message:"The user must have an active require password change challenge."}),c7=K1({name:"PasswordResetRequiredError",message:"The password must be reset."}),r7=l9({name:"PasswordResetMissingParamError",message:"Either a verification code or the users old password are required."}),s7=K1({name:"LoginVerifyError",message:"The password could not be verified. Please check password, userId, secretBlock, signature and timestamp."});var d9=process.env.AWS_REGION||"",n9=process.env.ADMIN_EMAILS||"",a7=process.env.CLOUDFRONT_ACCESS_KEY_ID||"",o7=process.env.CLOUDFRONT_NEW_ACCESS_KEY_PARAMETER||"",e7=process.env.INVITE_USER_VALIDATION_VIEW||"",Qq=process.env.PULL_LAMBDA_NAME||"",Xq=process.env.MEDIA_DOMAIN||"",p=process.env.CLIENT_ID||"",C1=process.env.USER_POOL_ID||"";var MX=EX(KX(),1);import"aws-lambda";var VX=(Q,X,{auth:Y=!0}={})=>new Promise((Z,$)=>{let W;try{if(Y)W=x9(X.headers.Authorization||X.headers.authorization||"");else W={}}catch(J){$(_9());return}try{const J=u9(X.body||{},X.body||""),G=new MX.Ajv;if(G.addKeyword("example"),G.validate(Q,J)){const q=W.email,H=X.headers["x-as-role"]||"user",F=!!X.headers["x-as-admin"]&&n9.includes(q);Z({userEmail:q,body:J,asAdmin:F,asRole:H})}else $(a(JSON.stringify(G.errors)))}catch(J){$(a(J.message))}});import{AdminCreateUserCommand as j7,AdminDeleteUserCommand as FH,AdminGetUserCommand as U7,AdminInitiateAuthCommand as A7,AdminResetUserPasswordCommand as BH,AdminSetUserPasswordCommand as KH,CognitoIdentityProviderClient as D7,ConfirmForgotPasswordCommand as N7,ConfirmSignUpCommand as I7,ForgotPasswordCommand as T7,InitiateAuthCommand as LX,ListUsersCommand as MH,ResendConfirmationCodeCommand as b7,RespondToAuthChallengeCommand as OX,SignUpCommand as R7} from"@aws-sdk/client-cognito-identity-provider";var jX={name:"UserNotVerifiedError",message:"The user must be verified with Register Verify operation."},i=new D7({region:d9,apiVersion:"latest"}),LH=async(Q,X)=>{const Y=new A7({UserPoolId:C1,ClientId:p,AuthFlow:"ADMIN_USER_PASSWORD_AUTH",AuthParameters:{USERNAME:Q,PASSWORD:X}}),Z=await i.send(Y);return{accessToken:Z?.AuthenticationResult?.AccessToken,expiresIn:Z?.AuthenticationResult?.ExpiresIn,idToken:Z?.AuthenticationResult?.IdToken,refreshToken:Z?.AuthenticationResult?.RefreshToken,session:Z?.Session}};var OH=async(Q,X,Y="default")=>{const Z=new j7({UserPoolId:C1,Username:Q,TemporaryPassword:X,ClientMetadata:{templateId:Y}});return i.send(Z)};var jH=async(Q,X)=>{const Y=new LX({ClientId:p,AuthFlow:"USER_SRP_AUTH",AuthParameters:{USERNAME:Q,SRP_A:X}}),Z=await i.send(Y);return{poolname:C1.split("_")[1],userId:Z?.ChallengeParameters?.USERNAME,srpB:Z?.ChallengeParameters?.SRP_B,secretBlock:Z?.ChallengeParameters?.SECRET_BLOCK,salt:Z?.ChallengeParameters?.SALT}},UH=async(Q,X,Y,Z)=>{const $=new OX({ClientId:p,ChallengeName:"PASSWORD_VERIFIER",ChallengeResponses:{USERNAME:Q,TIMESTAMP:Z,PASSWORD_CLAIM_SECRET_BLOCK:X,PASSWORD_CLAIM_SIGNATURE:Y}}),W=await i.send($);return{accessToken:W?.AuthenticationResult?.AccessToken,expiresIn:W?.AuthenticationResult?.ExpiresIn,idToken:W?.AuthenticationResult?.IdToken,refreshToken:W?.AuthenticationResult?.RefreshToken}},AH=async(Q)=>{const X=new LX({ClientId:p,AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:{REFRESH_TOKEN:Q}}),Y=await i.send(X);return{accessToken:Y?.AuthenticationResult?.AccessToken,expiresIn:Y?.AuthenticationResult?.ExpiresIn,idToken:Y?.AuthenticationResult?.IdToken}},DH=async(Q,X,Y=!1)=>{const Z=new R7({ClientId:p,Username:Q,Password:X,ClientMetadata:{skipMessage:Y?"true":"false"}});return await i.send(Z)},UX=async(Q,X)=>{const Y=new I7({ClientId:p,Username:Q,ConfirmationCode:X});await i.send(Y)},NH=async(Q)=>{const X=new b7({ClientId:p,Username:Q});await i.send(X)},IH=async(Q,X=!1)=>{const Y=new T7({ClientId:p,Username:Q,ClientMetadata:{skipMessage:X?"true":"false"}});try{await i.send(Y)}catch(Z){if(!await DX(Q))throw jX;throw Z}},TH=async(Q,X,Y)=>{const Z=new N7({ClientId:p,Username:Q,Password:X,ConfirmationCode:Y});try{await i.send(Z)}catch($){if(!await DX(Q))throw jX;throw $}},bH=async(Q,X,Y)=>{const Z=new OX({ClientId:p,ChallengeName:"NEW_PASSWORD_REQUIRED",ChallengeResponses:{USERNAME:Q,NEW_PASSWORD:X},Session:Y}),$=await i.send(Z);return{accessToken:$?.AuthenticationResult?.AccessToken,expiresIn:$?.AuthenticationResult?.ExpiresIn,idToken:$?.AuthenticationResult?.IdToken,refreshToken:$?.AuthenticationResult?.RefreshToken}},AX=async(Q)=>{const X=new U7({UserPoolId:C1,Username:Q});return i.send(X)},DX=async(Q)=>{const{UserStatus:X}=await AX(Q);return X==="CONFIRMED"},RH=async(Q)=>{try{return await AX(Q),!0}catch(X){return!1}};var E7=!1,w7={type:"object",properties:{email:{type:"string",description:"Email of the user to be registerVerifyd."},verificationCode:{type:"string",description:"Verification code that was sent to the given email."}},required:["email","verificationCode"]},S7=async({body:Q})=>{const{email:X,verificationCode:Y}=Q;if(f9(X)!==X)return h9;try{return await UX(X,Y),{statusCode:200,headers:X1,body:JSON.stringify({message:"Success."})}}catch(Z){switch(Z.name){case"CodeMismatchException":return m9;case"ExpiredCodeException":return i9;case"UserNotFoundException":return p9;default:return g0(Z)}}},PH=async(Q)=>{try{const X=await VX(w7,Q,{auth:E7});return await S7(X)}catch(X){return g0(X)}};export{w7 as schema,PH as handleHttp};

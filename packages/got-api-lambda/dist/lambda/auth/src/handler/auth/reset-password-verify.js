import{createRequire as fX} from"node:module";var PX=Object.create;var{defineProperty:x9,getPrototypeOf:CX,getOwnPropertyNames:kX}=Object;var vX=Object.prototype.hasOwnProperty;var yX=(Q,X,Y)=>{Y=Q!=null?PX(CX(Q)):{};const Z=X||!Q||!Q.__esModule?x9(Y,"default",{value:Q,enumerable:!0}):Y;for(let $ of kX(Q))if(!vX.call(Z,$))x9(Z,$,{get:()=>Q[$],enumerable:!0});return Z};var L=(Q,X)=>()=>(X||Q((X={exports:{}}).exports,X),X.exports);var _7=fX(import.meta.url);var v1=L((X4)=>{var e9=function(Q,...X){const Y=[Q[0]];let Z=0;while(Z<X.length)i0(Y,X[Z]),Y.push(Q[++Z]);return new d(Y)},Q4=function(Q,...X){const Y=[k1(Q[0])];let Z=0;while(Z<X.length)Y.push(m0),i0(Y,X[Z]),Y.push(m0,k1(Q[++Z]));return gX(Y),new d(Y)},i0=function(Q,X){if(X instanceof d)Q.push(...X._items);else if(X instanceof A1)Q.push(X);else Q.push(mX(X))},gX=function(Q){let X=1;while(X<Q.length-1){if(Q[X]===m0){const Y=lX(Q[X-1],Q[X+1]);if(Y!==void 0){Q.splice(X-1,3,Y);continue}Q[X++]="+"}X++}},lX=function(Q,X){if(X==='""')return Q;if(Q==='""')return X;if(typeof Q=="string"){if(X instanceof A1||Q[Q.length-1]!=='"')return;if(typeof X!="string")return`${Q.slice(0,-1)}${X}"`;if(X[0]==='"')return Q.slice(0,-1)+X.slice(1);return}if(typeof X=="string"&&X[0]==='"'&&!(Q instanceof A1))return`"${Q}${X.slice(1)}`;return},hX=function(Q,X){return X.emptyStr()?Q:Q.emptyStr()?X:Q4`${Q}${X}`},mX=function(Q){return typeof Q=="number"||typeof Q=="boolean"||Q===null?Q:k1(Array.isArray(Q)?Q.join(","):Q)},iX=function(Q){return new d(k1(Q))},k1=function(Q){return JSON.stringify(Q).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},pX=function(Q){return typeof Q=="string"&&X4.IDENTIFIER.test(Q)?new d(`.${Q}`):e9`[${Q}]`},dX=function(Q){if(typeof Q=="string"&&X4.IDENTIFIER.test(Q))return new d(`${Q}`);throw new Error(`CodeGen: invalid export name: ${Q}, use explicit \$id name mapping`)},nX=function(Q){return new d(Q.toString())};Object.defineProperty(X4,"__esModule",{value:!0});X4.regexpCode=X4.getEsmExportName=X4.getProperty=X4.safeStringify=X4.stringify=X4.strConcat=X4.addCodeArg=X4.str=X4._=X4.nil=X4._Code=X4.Name=X4.IDENTIFIER=X4._CodeOrName=void 0;class Q0{}X4._CodeOrName=Q0;X4.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class A1 extends Q0{constructor(Q){super();if(!X4.IDENTIFIER.test(Q))throw new Error("CodeGen: name must be a valid identifier");this.str=Q}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}X4.Name=A1;class d extends Q0{constructor(Q){super();this._items=typeof Q==="string"?[Q]:Q}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const Q=this._items[0];return Q===""||Q==='""'}get str(){var Q;return(Q=this._str)!==null&&Q!==void 0?Q:this._str=this._items.reduce((X,Y)=>`${X}${Y}`,"")}get names(){var Q;return(Q=this._names)!==null&&Q!==void 0?Q:this._names=this._items.reduce((X,Y)=>{if(Y instanceof A1)X[Y.str]=(X[Y.str]||0)+1;return X},{})}}X4._Code=d;X4.nil=new d("");X4._=e9;var m0=new d("+");X4.str=Q4;X4.addCodeArg=i0;X4.strConcat=hX;X4.stringify=iX;X4.safeStringify=k1;X4.getProperty=pX;X4.getEsmExportName=dX;X4.regexpCode=nX});var c0=L((W4)=>{Object.defineProperty(W4,"__esModule",{value:!0});W4.ValueScope=W4.ValueScopeName=W4.Scope=W4.varKinds=W4.UsedValueState=void 0;var u=v1();class Z4 extends Error{constructor(Q){super(`CodeGen: "code" for ${Q} not defined`);this.value=Q.value}}var Y0;(function(Q){Q[Q.Started=0]="Started",Q[Q.Completed=1]="Completed"})(Y0||(W4.UsedValueState=Y0={}));W4.varKinds={const:new u.Name("const"),let:new u.Name("let"),var:new u.Name("var")};class d0{constructor({prefixes:Q,parent:X}={}){this._names={},this._prefixes=Q,this._parent=X}toName(Q){return Q instanceof u.Name?Q:this.name(Q)}name(Q){return new u.Name(this._newName(Q))}_newName(Q){const X=this._names[Q]||this._nameGroup(Q);return`${Q}${X.index++}`}_nameGroup(Q){var X,Y;if(((Y=(X=this._parent)===null||X===void 0?void 0:X._prefixes)===null||Y===void 0?void 0:Y.has(Q))||this._prefixes&&!this._prefixes.has(Q))throw new Error(`CodeGen: prefix "${Q}" is not allowed in this scope`);return this._names[Q]={prefix:Q,index:0}}}W4.Scope=d0;class n0 extends u.Name{constructor(Q,X){super(X);this.prefix=Q}setValue(Q,{property:X,itemIndex:Y}){this.value=Q,this.scopePath=u._`.${new u.Name(X)}[${Y}]`}}W4.ValueScopeName=n0;var WY=u._`\n`;class $4 extends d0{constructor(Q){super(Q);this._values={},this._scope=Q.scope,this.opts={...Q,_n:Q.lines?WY:u.nil}}get(){return this._scope}name(Q){return new n0(Q,this._newName(Q))}value(Q,X){var Y;if(X.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const Z=this.toName(Q),{prefix:$}=Z,W=(Y=X.key)!==null&&Y!==void 0?Y:X.ref;let J=this._values[$];if(J){const q=J.get(W);if(q)return q}else J=this._values[$]=new Map;J.set(W,Z);const G=this._scope[$]||(this._scope[$]=[]),z=G.length;return G[z]=X.ref,Z.setValue(X,{property:$,itemIndex:z}),Z}getValue(Q,X){const Y=this._values[Q];if(!Y)return;return Y.get(X)}scopeRefs(Q,X=this._values){return this._reduceValues(X,(Y)=>{if(Y.scopePath===void 0)throw new Error(`CodeGen: name "${Y}" has no value`);return u._`${Q}${Y.scopePath}`})}scopeCode(Q=this._values,X,Y){return this._reduceValues(Q,(Z)=>{if(Z.value===void 0)throw new Error(`CodeGen: name "${Z}" has no value`);return Z.value.code},X,Y)}_reduceValues(Q,X,Y={},Z){let $=u.nil;for(let W in Q){const J=Q[W];if(!J)continue;const G=Y[W]=Y[W]||new Map;J.forEach((z)=>{if(G.has(z))return;G.set(z,Y0.Started);let q=X(z);if(q){const H=this.opts.es5?W4.varKinds.var:W4.varKinds.const;$=u._`${$}${H} ${z} = ${q};${this.opts._n}`}else if(q=Z===null||Z===void 0?void 0:Z(z))$=u._`${$}${q}${this.opts._n}`;else throw new Z4(z);G.set(z,Y0.Completed)})}return $}}W4.ValueScope=$4});var I=L((_)=>{var M1=function(Q,X){for(let Y in X)Q[Y]=(Q[Y]||0)+(X[Y]||0);return Q},G0=function(Q,X){return X instanceof b._CodeOrName?M1(Q,X.names):Q},N1=function(Q,X,Y){if(Q instanceof b.Name)return Z(Q);if(!$(Q))return Q;return new b._Code(Q._items.reduce((W,J)=>{if(J instanceof b.Name)J=Z(J);if(J instanceof b._Code)W.push(...J._items);else W.push(J);return W},[]));function Z(W){const J=Y[W.str];if(J===void 0||X[W.str]!==1)return W;return delete X[W.str],J}function $(W){return W instanceof b._Code&&W._items.some((J)=>J instanceof b.Name&&X[J.str]===1&&Y[J.str]!==void 0)}},zY=function(Q,X){for(let Y in X)Q[Y]=(Q[Y]||0)-(X[Y]||0)},U4=function(Q){return typeof Q=="boolean"||typeof Q=="number"||Q===null?!Q:b._`!${s0(Q)}`},FY=function(...Q){return Q.reduce(HY)},KY=function(...Q){return Q.reduce(BY)},j4=function(Q){return(X,Y)=>X===b.nil?Y:Y===b.nil?X:b._`${s0(X)} ${Q} ${s0(Y)}`},s0=function(Q){return Q instanceof b.Name?Q:b._`(${Q})`};Object.defineProperty(_,"__esModule",{value:!0});_.or=_.and=_.not=_.CodeGen=_.operators=_.varKinds=_.ValueScopeName=_.ValueScope=_.Scope=_.Name=_.regexpCode=_.stringify=_.getProperty=_.nil=_.strConcat=_.str=_._=void 0;var b=v1(),n=c0(),G1=v1();Object.defineProperty(_,"_",{enumerable:!0,get:function(){return G1._}});Object.defineProperty(_,"str",{enumerable:!0,get:function(){return G1.str}});Object.defineProperty(_,"strConcat",{enumerable:!0,get:function(){return G1.strConcat}});Object.defineProperty(_,"nil",{enumerable:!0,get:function(){return G1.nil}});Object.defineProperty(_,"getProperty",{enumerable:!0,get:function(){return G1.getProperty}});Object.defineProperty(_,"stringify",{enumerable:!0,get:function(){return G1.stringify}});Object.defineProperty(_,"regexpCode",{enumerable:!0,get:function(){return G1.regexpCode}});Object.defineProperty(_,"Name",{enumerable:!0,get:function(){return G1.Name}});var q0=c0();Object.defineProperty(_,"Scope",{enumerable:!0,get:function(){return q0.Scope}});Object.defineProperty(_,"ValueScope",{enumerable:!0,get:function(){return q0.ValueScope}});Object.defineProperty(_,"ValueScopeName",{enumerable:!0,get:function(){return q0.ValueScopeName}});Object.defineProperty(_,"varKinds",{enumerable:!0,get:function(){return q0.varKinds}});_.operators={GT:new b._Code(">"),GTE:new b._Code(">="),LT:new b._Code("<"),LTE:new b._Code("<="),EQ:new b._Code("==="),NEQ:new b._Code("!=="),NOT:new b._Code("!"),OR:new b._Code("||"),AND:new b._Code("&&"),ADD:new b._Code("+")};class q1{optimizeNodes(){return this}optimizeNames(Q,X){return this}}class G4 extends q1{constructor(Q,X,Y){super();this.varKind=Q,this.name=X,this.rhs=Y}render({es5:Q,_n:X}){const Y=Q?n.varKinds.var:this.varKind,Z=this.rhs===void 0?"":` = ${this.rhs}`;return`${Y} ${this.name}${Z};`+X}optimizeNames(Q,X){if(!Q[this.name.str])return;if(this.rhs)this.rhs=N1(this.rhs,Q,X);return this}get names(){return this.rhs instanceof b._CodeOrName?this.rhs.names:{}}}class t0 extends q1{constructor(Q,X,Y){super();this.lhs=Q,this.rhs=X,this.sideEffects=Y}render({_n:Q}){return`${this.lhs} = ${this.rhs};`+Q}optimizeNames(Q,X){if(this.lhs instanceof b.Name&&!Q[this.lhs.str]&&!this.sideEffects)return;return this.rhs=N1(this.rhs,Q,X),this}get names(){const Q=this.lhs instanceof b.Name?{}:{...this.lhs.names};return G0(Q,this.rhs)}}class q4 extends t0{constructor(Q,X,Y,Z){super(Q,Y,Z);this.op=X}render({_n:Q}){return`${this.lhs} ${this.op}= ${this.rhs};`+Q}}class z4 extends q1{constructor(Q){super();this.label=Q,this.names={}}render({_n:Q}){return`${this.label}:`+Q}}class H4 extends q1{constructor(Q){super();this.label=Q,this.names={}}render({_n:Q}){return`break${this.label?` ${this.label}`:""};`+Q}}class F4 extends q1{constructor(Q){super();this.error=Q}render({_n:Q}){return`throw ${this.error};`+Q}get names(){return this.error.names}}class B4 extends q1{constructor(Q){super();this.code=Q}render({_n:Q}){return`${this.code};`+Q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(Q,X){return this.code=N1(this.code,Q,X),this}get names(){return this.code instanceof b._CodeOrName?this.code.names:{}}}class z0 extends q1{constructor(Q=[]){super();this.nodes=Q}render(Q){return this.nodes.reduce((X,Y)=>X+Y.render(Q),"")}optimizeNodes(){const{nodes:Q}=this;let X=Q.length;while(X--){const Y=Q[X].optimizeNodes();if(Array.isArray(Y))Q.splice(X,1,...Y);else if(Y)Q[X]=Y;else Q.splice(X,1)}return Q.length>0?this:void 0}optimizeNames(Q,X){const{nodes:Y}=this;let Z=Y.length;while(Z--){const $=Y[Z];if($.optimizeNames(Q,X))continue;zY(Q,$.names),Y.splice(Z,1)}return Y.length>0?this:void 0}get names(){return this.nodes.reduce((Q,X)=>M1(Q,X.names),{})}}class z1 extends z0{render(Q){return"{"+Q._n+super.render(Q)+"}"+Q._n}}class K4 extends z0{}class y1 extends z1{}y1.kind="else";class Y1 extends z1{constructor(Q,X){super(X);this.condition=Q}render(Q){let X=`if(${this.condition})`+super.render(Q);if(this.else)X+="else "+this.else.render(Q);return X}optimizeNodes(){super.optimizeNodes();const Q=this.condition;if(Q===!0)return this.nodes;let X=this.else;if(X){const Y=X.optimizeNodes();X=this.else=Array.isArray(Y)?new y1(Y):Y}if(X){if(Q===!1)return X instanceof Y1?X:X.nodes;if(this.nodes.length)return this;return new Y1(U4(Q),X instanceof Y1?[X]:X.nodes)}if(Q===!1||!this.nodes.length)return;return this}optimizeNames(Q,X){var Y;if(this.else=(Y=this.else)===null||Y===void 0?void 0:Y.optimizeNames(Q,X),!(super.optimizeNames(Q,X)||this.else))return;return this.condition=N1(this.condition,Q,X),this}get names(){const Q=super.names;if(G0(Q,this.condition),this.else)M1(Q,this.else.names);return Q}}Y1.kind="if";class D1 extends z1{}D1.kind="for";class M4 extends D1{constructor(Q){super();this.iteration=Q}render(Q){return`for(${this.iteration})`+super.render(Q)}optimizeNames(Q,X){if(!super.optimizeNames(Q,X))return;return this.iteration=N1(this.iteration,Q,X),this}get names(){return M1(super.names,this.iteration.names)}}class V4 extends D1{constructor(Q,X,Y,Z){super();this.varKind=Q,this.name=X,this.from=Y,this.to=Z}render(Q){const X=Q.es5?n.varKinds.var:this.varKind,{name:Y,from:Z,to:$}=this;return`for(${X} ${Y}=${Z}; ${Y}<${$}; ${Y}++)`+super.render(Q)}get names(){const Q=G0(super.names,this.from);return G0(Q,this.to)}}class r0 extends D1{constructor(Q,X,Y,Z){super();this.loop=Q,this.varKind=X,this.name=Y,this.iterable=Z}render(Q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(Q)}optimizeNames(Q,X){if(!super.optimizeNames(Q,X))return;return this.iterable=N1(this.iterable,Q,X),this}get names(){return M1(super.names,this.iterable.names)}}class Z0 extends z1{constructor(Q,X,Y){super();this.name=Q,this.args=X,this.async=Y}render(Q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(Q)}}Z0.kind="func";class $0 extends z0{render(Q){return"return "+super.render(Q)}}$0.kind="return";class L4 extends z1{render(Q){let X="try"+super.render(Q);if(this.catch)X+=this.catch.render(Q);if(this.finally)X+=this.finally.render(Q);return X}optimizeNodes(){var Q,X;return super.optimizeNodes(),(Q=this.catch)===null||Q===void 0||Q.optimizeNodes(),(X=this.finally)===null||X===void 0||X.optimizeNodes(),this}optimizeNames(Q,X){var Y,Z;return super.optimizeNames(Q,X),(Y=this.catch)===null||Y===void 0||Y.optimizeNames(Q,X),(Z=this.finally)===null||Z===void 0||Z.optimizeNames(Q,X),this}get names(){const Q=super.names;if(this.catch)M1(Q,this.catch.names);if(this.finally)M1(Q,this.finally.names);return Q}}class W0 extends z1{constructor(Q){super();this.error=Q}render(Q){return`catch(${this.error})`+super.render(Q)}}W0.kind="catch";class J0 extends z1{render(Q){return"finally"+super.render(Q)}}J0.kind="finally";class O4{constructor(Q,X={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...X,_n:X.lines?"\n":""},this._extScope=Q,this._scope=new n.Scope({parent:Q}),this._nodes=[new K4]}toString(){return this._root.render(this.opts)}name(Q){return this._scope.name(Q)}scopeName(Q){return this._extScope.name(Q)}scopeValue(Q,X){const Y=this._extScope.value(Q,X);return(this._values[Y.prefix]||(this._values[Y.prefix]=new Set)).add(Y),Y}getScopeValue(Q,X){return this._extScope.getValue(Q,X)}scopeRefs(Q){return this._extScope.scopeRefs(Q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(Q,X,Y,Z){const $=this._scope.toName(X);if(Y!==void 0&&Z)this._constants[$.str]=Y;return this._leafNode(new G4(Q,$,Y)),$}const(Q,X,Y){return this._def(n.varKinds.const,Q,X,Y)}let(Q,X,Y){return this._def(n.varKinds.let,Q,X,Y)}var(Q,X,Y){return this._def(n.varKinds.var,Q,X,Y)}assign(Q,X,Y){return this._leafNode(new t0(Q,X,Y))}add(Q,X){return this._leafNode(new q4(Q,_.operators.ADD,X))}code(Q){if(typeof Q=="function")Q();else if(Q!==b.nil)this._leafNode(new B4(Q));return this}object(...Q){const X=["{"];for(let[Y,Z]of Q){if(X.length>1)X.push(",");if(X.push(Y),Y!==Z||this.opts.es5)X.push(":"),b.addCodeArg(X,Z)}return X.push("}"),new b._Code(X)}if(Q,X,Y){if(this._blockNode(new Y1(Q)),X&&Y)this.code(X).else().code(Y).endIf();else if(X)this.code(X).endIf();else if(Y)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(Q){return this._elseNode(new Y1(Q))}else(){return this._elseNode(new y1)}endIf(){return this._endBlockNode(Y1,y1)}_for(Q,X){if(this._blockNode(Q),X)this.code(X).endFor();return this}for(Q,X){return this._for(new M4(Q),X)}forRange(Q,X,Y,Z,$=this.opts.es5?n.varKinds.var:n.varKinds.let){const W=this._scope.toName(Q);return this._for(new V4($,W,X,Y),()=>Z(W))}forOf(Q,X,Y,Z=n.varKinds.const){const $=this._scope.toName(Q);if(this.opts.es5){const W=X instanceof b.Name?X:this.var("_arr",X);return this.forRange("_i",0,b._`${W}.length`,(J)=>{this.var($,b._`${W}[${J}]`),Y($)})}return this._for(new r0("of",Z,$,X),()=>Y($))}forIn(Q,X,Y,Z=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(Q,b._`Object.keys(${X})`,Y);const $=this._scope.toName(Q);return this._for(new r0("in",Z,$,X),()=>Y($))}endFor(){return this._endBlockNode(D1)}label(Q){return this._leafNode(new z4(Q))}break(Q){return this._leafNode(new H4(Q))}return(Q){const X=new $0;if(this._blockNode(X),this.code(Q),X.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode($0)}try(Q,X,Y){if(!X&&!Y)throw new Error('CodeGen: "try" without "catch" and "finally"');const Z=new L4;if(this._blockNode(Z),this.code(Q),X){const $=this.name("e");this._currNode=Z.catch=new W0($),X($)}if(Y)this._currNode=Z.finally=new J0,this.code(Y);return this._endBlockNode(W0,J0)}throw(Q){return this._leafNode(new F4(Q))}block(Q,X){if(this._blockStarts.push(this._nodes.length),Q)this.code(Q).endBlock(X);return this}endBlock(Q){const X=this._blockStarts.pop();if(X===void 0)throw new Error("CodeGen: not in self-balancing block");const Y=this._nodes.length-X;if(Y<0||Q!==void 0&&Y!==Q)throw new Error(`CodeGen: wrong number of nodes: ${Y} vs ${Q} expected`);return this._nodes.length=X,this}func(Q,X=b.nil,Y,Z){if(this._blockNode(new Z0(Q,X,Y)),Z)this.code(Z).endFunc();return this}endFunc(){return this._endBlockNode(Z0)}optimize(Q=1){while(Q-- >0)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(Q){return this._currNode.nodes.push(Q),this}_blockNode(Q){this._currNode.nodes.push(Q),this._nodes.push(Q)}_endBlockNode(Q,X){const Y=this._currNode;if(Y instanceof Q||X&&Y instanceof X)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${X?`${Q.kind}/${X.kind}`:Q.kind}"`)}_elseNode(Q){const X=this._currNode;if(!(X instanceof Y1))throw new Error('CodeGen: "else" without "if"');return this._currNode=X.else=Q,this}get _root(){return this._nodes[0]}get _currNode(){const Q=this._nodes;return Q[Q.length-1]}set _currNode(Q){const X=this._nodes;X[X.length-1]=Q}}_.CodeGen=O4;_.not=U4;var HY=j4(_.operators.AND);_.and=FY;var BY=j4(_.operators.OR);_.or=KY});var S=L((S4)=>{var UY=function(Q){const X={};for(let Y of Q)X[Y]=!0;return X},jY=function(Q,X){if(typeof X=="boolean")return X;if(Object.keys(X).length===0)return!0;return I4(Q,X),!T4(X,Q.self.RULES.all)},I4=function(Q,X=Q.schema){const{opts:Y,self:Z}=Q;if(!Y.strictSchema)return;if(typeof X==="boolean")return;const $=Z.RULES.keywords;for(let W in X)if(!$[W])R4(Q,`unknown keyword: "${W}"`)},T4=function(Q,X){if(typeof Q=="boolean")return!Q;for(let Y in Q)if(X[Y])return!0;return!1},AY=function(Q,X){if(typeof Q=="boolean")return!Q;for(let Y in Q)if(Y!=="$ref"&&X.all[Y])return!0;return!1},DY=function({topSchemaRef:Q,schemaPath:X},Y,Z,$){if(!$){if(typeof Y=="number"||typeof Y=="boolean")return Y;if(typeof Y=="string")return w._`${Y}`}return w._`${Q}${X}${w.getProperty(Z)}`},NY=function(Q){return b4(decodeURIComponent(Q))},IY=function(Q){return encodeURIComponent(o0(Q))},o0=function(Q){if(typeof Q=="number")return`${Q}`;return Q.replace(/~/g,"~0").replace(/\//g,"~1")},b4=function(Q){return Q.replace(/~1/g,"/").replace(/~0/g,"~")},TY=function(Q,X){if(Array.isArray(Q))for(let Y of Q)X(Y);else X(Q)},D4=function({mergeNames:Q,mergeToName:X,mergeValues:Y,resultToName:Z}){return($,W,J,G)=>{const z=J===void 0?W:J instanceof w.Name?(W instanceof w.Name?Q($,W,J):X($,W,J),J):W instanceof w.Name?(X($,J,W),W):Y(W,J);return G===w.Name&&!(z instanceof w.Name)?Z($,z):z}},E4=function(Q,X){if(X===!0)return Q.var("props",!0);const Y=Q.var("props",w._`{}`);if(X!==void 0)e0(Q,Y,X);return Y},e0=function(Q,X,Y){Object.keys(Y).forEach((Z)=>Q.assign(w._`${X}${w.getProperty(Z)}`,!0))},bY=function(Q,X){return Q.scopeValue("func",{ref:X,code:N4[X.code]||(N4[X.code]=new OY._Code(X.code))})},EY=function(Q,X,Y){if(Q instanceof w.Name){const Z=X===a0.Num;return Y?Z?w._`"[" + ${Q} + "]"`:w._`"['" + ${Q} + "']"`:Z?w._`"/" + ${Q}`:w._`"/" + ${Q}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return Y?w.getProperty(Q).toString():"/"+o0(Q)},R4=function(Q,X,Y=Q.opts.strictSchema){if(!Y)return;if(X=`strict mode: ${X}`,Y===!0)throw new Error(X);Q.self.logger.warn(X)};Object.defineProperty(S4,"__esModule",{value:!0});S4.checkStrictMode=S4.getErrorPath=S4.Type=S4.useFunc=S4.setEvaluated=S4.evaluatedPropsToName=S4.mergeEvaluated=S4.eachItem=S4.unescapeJsonPointer=S4.escapeJsonPointer=S4.escapeFragment=S4.unescapeFragment=S4.schemaRefOrVal=S4.schemaHasRulesButRef=S4.schemaHasRules=S4.checkUnknownRules=S4.alwaysValidSchema=S4.toHash=void 0;var w=I(),OY=v1();S4.toHash=UY;S4.alwaysValidSchema=jY;S4.checkUnknownRules=I4;S4.schemaHasRules=T4;S4.schemaHasRulesButRef=AY;S4.schemaRefOrVal=DY;S4.unescapeFragment=NY;S4.escapeFragment=IY;S4.escapeJsonPointer=o0;S4.unescapeJsonPointer=b4;S4.eachItem=TY;S4.mergeEvaluated={props:D4({mergeNames:(Q,X,Y)=>Q.if(w._`${Y} !== true && ${X} !== undefined`,()=>{Q.if(w._`${X} === true`,()=>Q.assign(Y,!0),()=>Q.assign(Y,w._`${Y} || {}`).code(w._`Object.assign(${Y}, ${X})`))}),mergeToName:(Q,X,Y)=>Q.if(w._`${Y} !== true`,()=>{if(X===!0)Q.assign(Y,!0);else Q.assign(Y,w._`${Y} || {}`),e0(Q,Y,X)}),mergeValues:(Q,X)=>Q===!0?!0:{...Q,...X},resultToName:E4}),items:D4({mergeNames:(Q,X,Y)=>Q.if(w._`${Y} !== true && ${X} !== undefined`,()=>Q.assign(Y,w._`${X} === true ? true : ${Y} > ${X} ? ${Y} : ${X}`)),mergeToName:(Q,X,Y)=>Q.if(w._`${Y} !== true`,()=>Q.assign(Y,X===!0?!0:w._`${Y} > ${X} ? ${Y} : ${X}`)),mergeValues:(Q,X)=>Q===!0?!0:Math.max(Q,X),resultToName:(Q,X)=>Q.var("items",X)})};S4.evaluatedPropsToName=E4;S4.setEvaluated=e0;var N4={};S4.useFunc=bY;var a0;(function(Q){Q[Q.Num=0]="Num",Q[Q.Str=1]="Str"})(a0||(S4.Type=a0={}));S4.getErrorPath=EY;S4.checkStrictMode=R4});var Z1=L((P4)=>{Object.defineProperty(P4,"__esModule",{value:!0});var y=I(),pY={data:new y.Name("data"),valCxt:new y.Name("valCxt"),instancePath:new y.Name("instancePath"),parentData:new y.Name("parentData"),parentDataProperty:new y.Name("parentDataProperty"),rootData:new y.Name("rootData"),dynamicAnchors:new y.Name("dynamicAnchors"),vErrors:new y.Name("vErrors"),errors:new y.Name("errors"),this:new y.Name("this"),self:new y.Name("self"),scope:new y.Name("scope"),json:new y.Name("json"),jsonPos:new y.Name("jsonPos"),jsonLen:new y.Name("jsonLen"),jsonPart:new y.Name("jsonPart")};P4.default=pY});var f1=L((y4)=>{var nY=function(Q,X=y4.keywordError,Y,Z){const{it:$}=Q,{gen:W,compositeRule:J,allErrors:G}=$,z=v4(Q,X,Y);if(Z!==null&&Z!==void 0?Z:J||G)C4(W,z);else k4($,R._`[${z}]`)},cY=function(Q,X=y4.keywordError,Y){const{it:Z}=Q,{gen:$,compositeRule:W,allErrors:J}=Z,G=v4(Q,X,Y);if(C4($,G),!(W||J))k4(Z,f.default.vErrors)},rY=function(Q,X){Q.assign(f.default.errors,X),Q.if(R._`${f.default.vErrors} !== null`,()=>Q.if(X,()=>Q.assign(R._`${f.default.vErrors}.length`,X),()=>Q.assign(f.default.vErrors,null)))},sY=function({gen:Q,keyword:X,schemaValue:Y,data:Z,errsCount:$,it:W}){if($===void 0)throw new Error("ajv implementation error");const J=Q.name("err");Q.forRange("i",$,f.default.errors,(G)=>{if(Q.const(J,R._`${f.default.vErrors}[${G}]`),Q.if(R._`${J}.instancePath === undefined`,()=>Q.assign(R._`${J}.instancePath`,R.strConcat(f.default.instancePath,W.errorPath))),Q.assign(R._`${J}.schemaPath`,R.str`${W.errSchemaPath}/${X}`),W.opts.verbose)Q.assign(R._`${J}.schema`,Y),Q.assign(R._`${J}.data`,Z)})},C4=function(Q,X){const Y=Q.const("err",X);Q.if(R._`${f.default.vErrors} === null`,()=>Q.assign(f.default.vErrors,R._`[${Y}]`),R._`${f.default.vErrors}.push(${Y})`),Q.code(R._`${f.default.errors}++`)},k4=function(Q,X){const{gen:Y,validateName:Z,schemaEnv:$}=Q;if($.$async)Y.throw(R._`new ${Q.ValidationError}(${X})`);else Y.assign(R._`${Z}.errors`,X),Y.return(!1)},v4=function(Q,X,Y){const{createErrors:Z}=Q.it;if(Z===!1)return R._`{}`;return tY(Q,X,Y)},tY=function(Q,X,Y={}){const{gen:Z,it:$}=Q,W=[aY($,Y),oY(Q,Y)];return eY(Q,X,W),Z.object(...W)},aY=function({errorPath:Q},{instancePath:X}){const Y=X?R.str`${Q}${F0.getErrorPath(X,F0.Type.Str)}`:Q;return[f.default.instancePath,R.strConcat(f.default.instancePath,Y)]},oY=function({keyword:Q,it:{errSchemaPath:X}},{schemaPath:Y,parentSchema:Z}){let $=Z?X:R.str`${X}/${Q}`;if(Y)$=R.str`${$}${F0.getErrorPath(Y,F0.Type.Str)}`;return[V1.schemaPath,$]},eY=function(Q,{params:X,message:Y},Z){const{keyword:$,data:W,schemaValue:J,it:G}=Q,{opts:z,propertyName:q,topSchemaRef:H,schemaPath:F}=G;if(Z.push([V1.keyword,$],[V1.params,typeof X=="function"?X(Q):X||R._`{}`]),z.messages)Z.push([V1.message,typeof Y=="function"?Y(Q):Y]);if(z.verbose)Z.push([V1.schema,J],[V1.parentSchema,R._`${H}${F}`],[f.default.data,W]);if(q)Z.push([V1.propertyName,q])};Object.defineProperty(y4,"__esModule",{value:!0});y4.extendErrors=y4.resetErrorsCount=y4.reportExtraError=y4.reportError=y4.keyword$DataError=y4.keywordError=void 0;var R=I(),F0=S(),f=Z1();y4.keywordError={message:({keyword:Q})=>R.str`must pass "${Q}" keyword validation`};y4.keyword$DataError={message:({keyword:Q,schemaType:X})=>X?R.str`"${Q}" keyword must be ${X} ($data)`:R.str`"${Q}" keyword is invalid ($data)`};y4.reportError=nY;y4.reportExtraError=cY;y4.resetErrorsCount=rY;y4.extendErrors=sY;var V1={keyword:new R.Name("keyword"),schemaPath:new R.Name("schemaPath"),params:new R.Name("params"),propertyName:new R.Name("propertyName"),message:new R.Name("message"),schema:new R.Name("schema"),parentSchema:new R.Name("parentSchema")}});var g4=L((u4)=>{var qZ=function(Q){const{gen:X,schema:Y,validateName:Z}=Q;if(Y===!1)x4(Q,!1);else if(typeof Y=="object"&&Y.$async===!0)X.return(JZ.default.data);else X.assign(WZ._`${Z}.errors`,null),X.return(!0)},zZ=function(Q,X){const{gen:Y,schema:Z}=Q;if(Z===!1)Y.var(X,!1),x4(Q);else Y.var(X,!0)},x4=function(Q,X){const{gen:Y,data:Z}=Q,$={gen:Y,keyword:"false schema",data:Z,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:Q};$Z.reportError($,GZ,void 0,X)};Object.defineProperty(u4,"__esModule",{value:!0});u4.boolOrEmptySchema=u4.topBoolOrEmptySchema=void 0;var $Z=f1(),WZ=I(),JZ=Z1(),GZ={message:"boolean schema is false"};u4.topBoolOrEmptySchema=qZ;u4.boolOrEmptySchema=zZ});var X9=L((l4)=>{var KZ=function(Q){return typeof Q=="string"&&BZ.has(Q)},MZ=function(){const Q={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...Q,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},Q.number,Q.string,Q.array,Q.object],post:{rules:[]},all:{},keywords:{}}};Object.defineProperty(l4,"__esModule",{value:!0});l4.getRules=l4.isJSONType=void 0;var FZ=["string","number","integer","boolean","null","object","array"],BZ=new Set(FZ);l4.isJSONType=KZ;l4.getRules=MZ});var Y9=L((p4)=>{var LZ=function({schema:Q,self:X},Y){const Z=X.RULES.types[Y];return Z&&Z!==!0&&m4(Q,Z)},m4=function(Q,X){return X.rules.some((Y)=>i4(Q,Y))},i4=function(Q,X){var Y;return Q[X.keyword]!==void 0||((Y=X.definition.implements)===null||Y===void 0?void 0:Y.some((Z)=>Q[Z]!==void 0))};Object.defineProperty(p4,"__esModule",{value:!0});p4.shouldUseRule=p4.shouldUseGroup=p4.schemaHasRulesForType=void 0;p4.schemaHasRulesForType=LZ;p4.shouldUseGroup=m4;p4.shouldUseRule=i4});var x1=L((s4)=>{var NZ=function(Q){const X=c4(Q.type);if(X.includes("null")){if(Q.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!X.length&&Q.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');if(Q.nullable===!0)X.push("null")}return X},c4=function(Q){const X=Array.isArray(Q)?Q:Q?[Q]:[];if(X.every(jZ.isJSONType))return X;throw new Error("type must be JSONType or JSONType[]: "+X.join(","))},IZ=function(Q,X){const{gen:Y,data:Z,opts:$}=Q,W=TZ(X,$.coerceTypes),J=X.length>0&&!(W.length===0&&X.length===1&&AZ.schemaHasRulesForType(Q,X[0]));if(J){const G=$9(X,Z,$.strictNumbers,I1.Wrong);Y.if(G,()=>{if(W.length)bZ(Q,X,W);else W9(Q)})}return J},TZ=function(Q,X){return X?Q.filter((Y)=>r4.has(Y)||X==="array"&&Y==="array"):[]},bZ=function(Q,X,Y){const{gen:Z,data:$,opts:W}=Q,J=Z.let("dataType",N._`typeof ${$}`),G=Z.let("coerced",N._`undefined`);if(W.coerceTypes==="array")Z.if(N._`${J} == 'object' && Array.isArray(${$}) && ${$}.length == 1`,()=>Z.assign($,N._`${$}[0]`).assign(J,N._`typeof ${$}`).if($9(X,$,W.strictNumbers),()=>Z.assign(G,$)));Z.if(N._`${G} !== undefined`);for(let q of Y)if(r4.has(q)||q==="array"&&W.coerceTypes==="array")z(q);Z.else(),W9(Q),Z.endIf(),Z.if(N._`${G} !== undefined`,()=>{Z.assign($,G),EZ(Q,G)});function z(q){switch(q){case"string":Z.elseIf(N._`${J} == "number" || ${J} == "boolean"`).assign(G,N._`"" + ${$}`).elseIf(N._`${$} === null`).assign(G,N._`""`);return;case"number":Z.elseIf(N._`${J} == "boolean" || ${$} === null
              || (${J} == "string" && ${$} && ${$} == +${$})`).assign(G,N._`+${$}`);return;case"integer":Z.elseIf(N._`${J} === "boolean" || ${$} === null
              || (${J} === "string" && ${$} && ${$} == +${$} && !(${$} % 1))`).assign(G,N._`+${$}`);return;case"boolean":Z.elseIf(N._`${$} === "false" || ${$} === 0 || ${$} === null`).assign(G,!1).elseIf(N._`${$} === "true" || ${$} === 1`).assign(G,!0);return;case"null":Z.elseIf(N._`${$} === "" || ${$} === 0 || ${$} === false`),Z.assign(G,null);return;case"array":Z.elseIf(N._`${J} === "string" || ${J} === "number"
              || ${J} === "boolean" || ${$} === null`).assign(G,N._`[${$}]`)}}},EZ=function({gen:Q,parentData:X,parentDataProperty:Y},Z){Q.if(N._`${X} !== undefined`,()=>Q.assign(N._`${X}[${Y}]`,Z))},Z9=function(Q,X,Y,Z=I1.Correct){const $=Z===I1.Correct?N.operators.EQ:N.operators.NEQ;let W;switch(Q){case"null":return N._`${X} ${$} null`;case"array":W=N._`Array.isArray(${X})`;break;case"object":W=N._`${X} && typeof ${X} == "object" && !Array.isArray(${X})`;break;case"integer":W=J(N._`!(${X} % 1) && !isNaN(${X})`);break;case"number":W=J();break;default:return N._`typeof ${X} ${$} ${Q}`}return Z===I1.Correct?W:N.not(W);function J(G=N.nil){return N.and(N._`typeof ${X} == "number"`,G,Y?N._`isFinite(${X})`:N.nil)}},$9=function(Q,X,Y,Z){if(Q.length===1)return Z9(Q[0],X,Y,Z);let $;const W=n4.toHash(Q);if(W.array&&W.object){const J=N._`typeof ${X} != "object"`;$=W.null?J:N._`!${X} || ${J}`,delete W.null,delete W.array,delete W.object}else $=N.nil;if(W.number)delete W.integer;for(let J in W)$=N.and($,Z9(J,X,Y,Z));return $},W9=function(Q){const X=SZ(Q);DZ.reportError(X,RZ)},SZ=function(Q){const{gen:X,data:Y,schema:Z}=Q,$=n4.schemaRefOrVal(Q,Z,"type");return{gen:X,keyword:"type",data:Y,schema:Z.type,schemaCode:$,schemaValue:$,parentSchema:Z,params:{},it:Q}};Object.defineProperty(s4,"__esModule",{value:!0});s4.reportTypeError=s4.checkDataTypes=s4.checkDataType=s4.coerceAndCheckDataType=s4.getJSONTypes=s4.getSchemaTypes=s4.DataType=void 0;var jZ=X9(),AZ=Y9(),DZ=f1(),N=I(),n4=S(),I1;(function(Q){Q[Q.Correct=0]="Correct",Q[Q.Wrong=1]="Wrong"})(I1||(s4.DataType=I1={}));s4.getSchemaTypes=NZ;s4.getJSONTypes=c4;s4.coerceAndCheckDataType=IZ;var r4=new Set(["string","number","integer","boolean","null"]);s4.checkDataType=Z9;s4.checkDataTypes=$9;var RZ={message:({schema:Q})=>`must be ${Q}`,params:({schema:Q,schemaValue:X})=>typeof Q=="string"?N._`{type: ${Q}}`:N._`{type: ${X}}`};s4.reportTypeError=W9});var Q6=L((o4)=>{var xZ=function(Q,X){const{properties:Y,items:Z}=Q.schema;if(X==="object"&&Y)for(let $ in Y)a4(Q,$,Y[$].default);else if(X==="array"&&Array.isArray(Z))Z.forEach(($,W)=>a4(Q,W,$.default))},a4=function(Q,X,Y){const{gen:Z,compositeRule:$,data:W,opts:J}=Q;if(Y===void 0)return;const G=T1._`${W}${T1.getProperty(X)}`;if($){fZ.checkStrictMode(Q,`default is ignored for: ${G}`);return}let z=T1._`${G} === undefined`;if(J.useDefaults==="empty")z=T1._`${z} || ${G} === null || ${G} === ""`;Z.if(z,T1._`${G} = ${T1.stringify(Y)}`)};Object.defineProperty(o4,"__esModule",{value:!0});o4.assignDefaults=void 0;var T1=I(),fZ=S();o4.assignDefaults=xZ});var h=L((Z6)=>{var _Z=function(Q,X){const{gen:Y,data:Z,it:$}=Q;Y.if(q9(Y,Z,X,$.opts.ownProperties),()=>{Q.setParams({missingProperty:C._`${X}`},!0),Q.error()})},gZ=function({gen:Q,data:X,it:{opts:Y}},Z,$){return C.or(...Z.map((W)=>C.and(q9(Q,X,W,Y.ownProperties),C._`${$} = ${W}`)))},lZ=function(Q,X){Q.setParams({missingProperty:X},!0),Q.error()},X6=function(Q){return Q.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:C._`Object.prototype.hasOwnProperty`})},G9=function(Q,X,Y){return C._`${X6(Q)}.call(${X}, ${Y})`},hZ=function(Q,X,Y,Z){const $=C._`${X}${C.getProperty(Y)} !== undefined`;return Z?C._`${$} && ${G9(Q,X,Y)}`:$},q9=function(Q,X,Y,Z){const $=C._`${X}${C.getProperty(Y)} === undefined`;return Z?C.or($,C.not(G9(Q,X,Y))):$},Y6=function(Q){return Q?Object.keys(Q).filter((X)=>X!=="__proto__"):[]},mZ=function(Q,X){return Y6(X).filter((Y)=>!J9.alwaysValidSchema(Q,X[Y]))},iZ=function({schemaCode:Q,data:X,it:{gen:Y,topSchemaRef:Z,schemaPath:$,errorPath:W},it:J},G,z,q){const H=q?C._`${Q}, ${X}, ${Z}${$}`:X,F=[[H1.default.instancePath,C.strConcat(H1.default.instancePath,W)],[H1.default.parentData,J.parentData],[H1.default.parentDataProperty,J.parentDataProperty],[H1.default.rootData,H1.default.rootData]];if(J.opts.dynamicRef)F.push([H1.default.dynamicAnchors,H1.default.dynamicAnchors]);const U=C._`${H}, ${Y.object(...F)}`;return z!==C.nil?C._`${G}.call(${z}, ${U})`:C._`${G}(${U})`},dZ=function({gen:Q,it:{opts:X}},Y){const Z=X.unicodeRegExp?"u":"",{regExp:$}=X.code,W=$(Y,Z);return Q.scopeValue("pattern",{key:W.toString(),ref:W,code:C._`${$.code==="new RegExp"?pZ:uZ.useFunc(Q,$)}(${Y}, ${Z})`})},nZ=function(Q){const{gen:X,data:Y,keyword:Z,it:$}=Q,W=X.name("valid");if($.allErrors){const G=X.let("valid",!0);return J(()=>X.assign(G,!1)),G}return X.var(W,!0),J(()=>X.break()),W;function J(G){const z=X.const("len",C._`${Y}.length`);X.forRange("i",0,z,(q)=>{Q.subschema({keyword:Z,dataProp:q,dataPropType:J9.Type.Num},W),X.if(C.not(W),G)})}},cZ=function(Q){const{gen:X,schema:Y,keyword:Z,it:$}=Q;if(!Array.isArray(Y))throw new Error("ajv implementation error");if(Y.some((z)=>J9.alwaysValidSchema($,z))&&!$.opts.unevaluated)return;const J=X.let("valid",!1),G=X.name("_valid");X.block(()=>Y.forEach((z,q)=>{const H=Q.subschema({keyword:Z,schemaProp:q,compositeRule:!0},G);if(X.assign(J,C._`${J} || ${G}`),!Q.mergeValidEvaluated(H,G))X.if(C.not(J))})),Q.result(J,()=>Q.reset(),()=>Q.error(!0))};Object.defineProperty(Z6,"__esModule",{value:!0});Z6.validateUnion=Z6.validateArray=Z6.usePattern=Z6.callValidateCode=Z6.schemaProperties=Z6.allSchemaProperties=Z6.noPropertyInData=Z6.propertyInData=Z6.isOwnProperty=Z6.hasPropFunc=Z6.reportMissingProp=Z6.checkMissingProp=Z6.checkReportMissingProp=void 0;var C=I(),J9=S(),H1=Z1(),uZ=S();Z6.checkReportMissingProp=_Z;Z6.checkMissingProp=gZ;Z6.reportMissingProp=lZ;Z6.hasPropFunc=X6;Z6.isOwnProperty=G9;Z6.propertyInData=hZ;Z6.noPropertyInData=q9;Z6.allSchemaProperties=Y6;Z6.schemaProperties=mZ;Z6.callValidateCode=iZ;var pZ=C._`new RegExp`;Z6.usePattern=dZ;Z6.validateArray=nZ;Z6.validateUnion=cZ});var z6=L((G6)=>{var q$=function(Q,X){const{gen:Y,keyword:Z,schema:$,parentSchema:W,it:J}=Q,G=X.macro.call(J.self,$,W,J),z=J6(Y,Z,G);if(J.opts.validateSchema!==!1)J.self.validateSchema(G,!0);const q=Y.name("valid");Q.subschema({schema:G,schemaPath:x.nil,errSchemaPath:`${J.errSchemaPath}/${Z}`,topSchemaRef:z,compositeRule:!0},q),Q.pass(q,()=>Q.error(!0))},z$=function(Q,X){var Y;const{gen:Z,keyword:$,schema:W,parentSchema:J,$data:G,it:z}=Q;F$(z,X);const q=!G&&X.compile?X.compile.call(z.self,W,J,z):X.validate,H=J6(Z,$,q),F=Z.let("valid");Q.block$data(F,U),Q.ok((Y=X.valid)!==null&&Y!==void 0?Y:F);function U(){if(X.errors===!1){if(B(),X.modifying)W6(Q);M(()=>Q.error())}else{const O=X.async?V():K();if(X.modifying)W6(Q);M(()=>H$(Q,O))}}function V(){const O=Z.let("ruleErrs",null);return Z.try(()=>B(x._`await `),(E)=>Z.assign(F,!1).if(x._`${E} instanceof ${z.ValidationError}`,()=>Z.assign(O,x._`${E}.errors`),()=>Z.throw(E))),O}function K(){const O=x._`${H}.errors`;return Z.assign(O,null),B(x.nil),O}function B(O=X.async?x._`await `:x.nil){const E=z.opts.passContext?L1.default.this:L1.default.self,T=!(("compile"in X)&&!G||X.schema===!1);Z.assign(F,x._`${O}${J$.callValidateCode(Q,H,E,T)}`,X.modifying)}function M(O){var E;Z.if(x.not((E=X.valid)!==null&&E!==void 0?E:F),O)}},W6=function(Q){const{gen:X,data:Y,it:Z}=Q;X.if(Z.parentData,()=>X.assign(Y,x._`${Z.parentData}[${Z.parentDataProperty}]`))},H$=function(Q,X){const{gen:Y}=Q;Y.if(x._`Array.isArray(${X})`,()=>{Y.assign(L1.default.vErrors,x._`${L1.default.vErrors} === null ? ${X} : ${L1.default.vErrors}.concat(${X})`).assign(L1.default.errors,x._`${L1.default.vErrors}.length`),G$.extendErrors(Q)},()=>Q.error())},F$=function({schemaEnv:Q},X){if(X.async&&!Q.$async)throw new Error("async keyword in sync schema")},J6=function(Q,X,Y){if(Y===void 0)throw new Error(`keyword "${X}" failed to compile`);return Q.scopeValue("keyword",typeof Y=="function"?{ref:Y}:{ref:Y,code:x.stringify(Y)})},B$=function(Q,X,Y=!1){return!X.length||X.some((Z)=>Z==="array"?Array.isArray(Q):Z==="object"?Q&&typeof Q=="object"&&!Array.isArray(Q):typeof Q==Z||Y&&typeof Q=="undefined")},K$=function({schema:Q,opts:X,self:Y,errSchemaPath:Z},$,W){if(Array.isArray($.keyword)?!$.keyword.includes(W):$.keyword!==W)throw new Error("ajv implementation error");const J=$.dependencies;if(J===null||J===void 0?void 0:J.some((G)=>!Object.prototype.hasOwnProperty.call(Q,G)))throw new Error(`parent schema must have dependencies of ${W}: ${J.join(",")}`);if($.validateSchema){if(!$.validateSchema(Q[W])){const z=`keyword "${W}" value is invalid at path "${Z}": `+Y.errorsText($.validateSchema.errors);if(X.validateSchema==="log")Y.logger.error(z);else throw new Error(z)}}};Object.defineProperty(G6,"__esModule",{value:!0});G6.validateKeywordUsage=G6.validSchemaType=G6.funcKeywordCode=G6.macroKeywordCode=void 0;var x=I(),L1=Z1(),J$=h(),G$=f1();G6.macroKeywordCode=q$;G6.funcKeywordCode=z$;G6.validSchemaType=B$;G6.validateKeywordUsage=K$});var K6=L((F6)=>{var O$=function(Q,{keyword:X,schemaProp:Y,schema:Z,schemaPath:$,errSchemaPath:W,topSchemaRef:J}){if(X!==void 0&&Z!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(X!==void 0){const G=Q.schema[X];return Y===void 0?{schema:G,schemaPath:e._`${Q.schemaPath}${e.getProperty(X)}`,errSchemaPath:`${Q.errSchemaPath}/${X}`}:{schema:G[Y],schemaPath:e._`${Q.schemaPath}${e.getProperty(X)}${e.getProperty(Y)}`,errSchemaPath:`${Q.errSchemaPath}/${X}/${H6.escapeFragment(Y)}`}}if(Z!==void 0){if($===void 0||W===void 0||J===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:Z,schemaPath:$,topSchemaRef:J,errSchemaPath:W}}throw new Error('either "keyword" or "schema" must be passed')},U$=function(Q,X,{dataProp:Y,dataPropType:Z,data:$,dataTypes:W,propertyName:J}){if($!==void 0&&Y!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:G}=X;if(Y!==void 0){const{errorPath:q,dataPathArr:H,opts:F}=X,U=G.let("data",e._`${X.data}${e.getProperty(Y)}`,!0);z(U),Q.errorPath=e.str`${q}${H6.getErrorPath(Y,Z,F.jsPropertySyntax)}`,Q.parentDataProperty=e._`${Y}`,Q.dataPathArr=[...H,Q.parentDataProperty]}if($!==void 0){const q=$ instanceof e.Name?$:G.let("data",$,!0);if(z(q),J!==void 0)Q.propertyName=J}if(W)Q.dataTypes=W;function z(q){Q.data=q,Q.dataLevel=X.dataLevel+1,Q.dataTypes=[],X.definedProperties=new Set,Q.parentData=X.data,Q.dataNames=[...X.dataNames,q]}},j$=function(Q,{jtdDiscriminator:X,jtdMetadata:Y,compositeRule:Z,createErrors:$,allErrors:W}){if(Z!==void 0)Q.compositeRule=Z;if($!==void 0)Q.createErrors=$;if(W!==void 0)Q.allErrors=W;Q.jtdDiscriminator=X,Q.jtdMetadata=Y};Object.defineProperty(F6,"__esModule",{value:!0});F6.extendSubschemaMode=F6.extendSubschemaData=F6.getSubschema=void 0;var e=I(),H6=S();F6.getSubschema=O$;F6.extendSubschemaData=U$;F6.extendSubschemaMode=j$});var z9=L((fq,M6)=>{M6.exports=function Q(X,Y){if(X===Y)return!0;if(X&&Y&&typeof X=="object"&&typeof Y=="object"){if(X.constructor!==Y.constructor)return!1;var Z,$,W;if(Array.isArray(X)){if(Z=X.length,Z!=Y.length)return!1;for($=Z;$--!==0;)if(!Q(X[$],Y[$]))return!1;return!0}if(X.constructor===RegExp)return X.source===Y.source&&X.flags===Y.flags;if(X.valueOf!==Object.prototype.valueOf)return X.valueOf()===Y.valueOf();if(X.toString!==Object.prototype.toString)return X.toString()===Y.toString();if(W=Object.keys(X),Z=W.length,Z!==Object.keys(Y).length)return!1;for($=Z;$--!==0;)if(!Object.prototype.hasOwnProperty.call(Y,W[$]))return!1;for($=Z;$--!==0;){var J=W[$];if(!Q(X[J],Y[J]))return!1}return!0}return X!==X&&Y!==Y}});var L6=L((xq,V6)=>{var B0=function(Q,X,Y,Z,$,W,J,G,z,q){if(Z&&typeof Z=="object"&&!Array.isArray(Z)){X(Z,$,W,J,G,z,q);for(var H in Z){var F=Z[H];if(Array.isArray(F)){if(H in F1.arrayKeywords)for(var U=0;U<F.length;U++)B0(Q,X,Y,F[U],$+"/"+H+"/"+U,W,$,H,Z,U)}else if(H in F1.propsKeywords){if(F&&typeof F=="object")for(var V in F)B0(Q,X,Y,F[V],$+"/"+H+"/"+N$(V),W,$,H,Z,V)}else if(H in F1.keywords||Q.allKeys&&!(H in F1.skipKeywords))B0(Q,X,Y,F,$+"/"+H,W,$,H,Z)}Y(Z,$,W,J,G,z,q)}},N$=function(Q){return Q.replace(/~/g,"~0").replace(/\//g,"~1")},F1=V6.exports=function(Q,X,Y){if(typeof X=="function")Y=X,X={};Y=X.cb||Y;var Z=typeof Y=="function"?Y:Y.pre||function(){},$=Y.post||function(){};B0(X,Z,$,Q,"",Q)};F1.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};F1.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};F1.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};F1.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}});var u1=L((A6)=>{var R$=function(Q,X=!0){if(typeof Q=="boolean")return!0;if(X===!0)return!H9(Q);if(!X)return!1;return O6(Q)<=X},H9=function(Q){for(let X in Q){if(S$.has(X))return!0;const Y=Q[X];if(Array.isArray(Y)&&Y.some(H9))return!0;if(typeof Y=="object"&&H9(Y))return!0}return!1},O6=function(Q){let X=0;for(let Y in Q){if(Y==="$ref")return 1/0;if(X++,E$.has(Y))continue;if(typeof Q[Y]=="object")I$.eachItem(Q[Y],(Z)=>X+=O6(Z));if(X===1/0)return 1/0}return X},U6=function(Q,X="",Y){if(Y!==!1)X=b1(X);const Z=Q.parse(X);return j6(Q,Z)},j6=function(Q,X){return Q.serialize(X).split("#")[0]+"#"},b1=function(Q){return Q?Q.replace(w$,""):""},P$=function(Q,X,Y){return Y=b1(Y),Q.resolve(X,Y)},k$=function(Q,X){if(typeof Q=="boolean")return{};const{schemaId:Y,uriResolver:Z}=this.opts,$=b1(Q[Y]||X),W={"":$},J=U6(Z,$,!1),G={},z=new Set;return b$(Q,{allKeys:!0},(F,U,V,K)=>{if(K===void 0)return;const B=J+U;let M=W[K];if(typeof F[Y]=="string")M=O.call(this,F[Y]);E.call(this,F.$anchor),E.call(this,F.$dynamicAnchor),W[U]=M;function O(T){const P=this.opts.uriResolver.resolve;if(T=b1(M?P(M,T):T),z.has(T))throw H(T);z.add(T);let D=this.refs[T];if(typeof D=="string")D=this.refs[D];if(typeof D=="object")q(F,D.schema,T);else if(T!==b1(B))if(T[0]==="#")q(F,G[T],T),G[T]=F;else this.refs[T]=B;return T}function E(T){if(typeof T=="string"){if(!C$.test(T))throw new Error(`invalid anchor "${T}"`);O.call(this,`#${T}`)}}}),G;function q(F,U,V){if(U!==void 0&&!T$(F,U))throw H(V)}function H(F){return new Error(`reference "${F}" resolves to more than one schema`)}};Object.defineProperty(A6,"__esModule",{value:!0});A6.getSchemaRefs=A6.resolveUrl=A6.normalizeId=A6._getFullPath=A6.getFullPath=A6.inlineRef=void 0;var I$=S(),T$=z9(),b$=L6(),E$=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);A6.inlineRef=R$;var S$=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);A6.getFullPath=U6;A6._getFullPath=j6;var w$=/#\/?$/;A6.normalizeId=b1;A6.resolveUrl=P$;var C$=/^[a-z_][-a-z0-9._]*$/i;A6.getSchemaRefs=k$});var l1=L((x6)=>{var l$=function(Q){if(w6(Q)){if(P6(Q),S6(Q)){i$(Q);return}}R6(Q,()=>E6.topBoolOrEmptySchema(Q))},R6=function({gen:Q,validateName:X,schema:Y,schemaEnv:Z,opts:$},W){if($.code.es5)Q.func(X,j._`${A.default.data}, ${A.default.valCxt}`,Z.$async,()=>{Q.code(j._`"use strict"; ${I6(Y,$)}`),m$(Q,$),Q.code(W)});else Q.func(X,j._`${A.default.data}, ${h$($)}`,Z.$async,()=>Q.code(I6(Y,$)).code(W))},h$=function(Q){return j._`{${A.default.instancePath}="", ${A.default.parentData}, ${A.default.parentDataProperty}, ${A.default.rootData}=${A.default.data}${Q.dynamicRef?j._`, ${A.default.dynamicAnchors}={}`:j.nil}}={}`},m$=function(Q,X){Q.if(A.default.valCxt,()=>{if(Q.var(A.default.instancePath,j._`${A.default.valCxt}.${A.default.instancePath}`),Q.var(A.default.parentData,j._`${A.default.valCxt}.${A.default.parentData}`),Q.var(A.default.parentDataProperty,j._`${A.default.valCxt}.${A.default.parentDataProperty}`),Q.var(A.default.rootData,j._`${A.default.valCxt}.${A.default.rootData}`),X.dynamicRef)Q.var(A.default.dynamicAnchors,j._`${A.default.valCxt}.${A.default.dynamicAnchors}`)},()=>{if(Q.var(A.default.instancePath,j._`""`),Q.var(A.default.parentData,j._`undefined`),Q.var(A.default.parentDataProperty,j._`undefined`),Q.var(A.default.rootData,A.default.data),X.dynamicRef)Q.var(A.default.dynamicAnchors,j._`{}`)})},i$=function(Q){const{schema:X,opts:Y,gen:Z}=Q;R6(Q,()=>{if(Y.$comment&&X.$comment)k6(Q);if(r$(Q),Z.let(A.default.vErrors,null),Z.let(A.default.errors,0),Y.unevaluated)p$(Q);C6(Q),a$(Q)});return},p$=function(Q){const{gen:X,validateName:Y}=Q;Q.evaluated=X.const("evaluated",j._`${Y}.evaluated`),X.if(j._`${Q.evaluated}.dynamicProps`,()=>X.assign(j._`${Q.evaluated}.props`,j._`undefined`)),X.if(j._`${Q.evaluated}.dynamicItems`,()=>X.assign(j._`${Q.evaluated}.items`,j._`undefined`))},I6=function(Q,X){const Y=typeof Q=="object"&&Q[X.schemaId];return Y&&(X.code.source||X.code.process)?j._`/*# sourceURL=${Y} */`:j.nil},d$=function(Q,X){if(w6(Q)){if(P6(Q),S6(Q)){n$(Q,X);return}}E6.boolOrEmptySchema(Q,X)},S6=function({schema:Q,self:X}){if(typeof Q=="boolean")return!Q;for(let Y in Q)if(X.RULES.all[Y])return!0;return!1},w6=function(Q){return typeof Q.schema!="boolean"},n$=function(Q,X){const{schema:Y,gen:Z,opts:$}=Q;if($.$comment&&Y.$comment)k6(Q);s$(Q),t$(Q);const W=Z.const("_errs",A.default.errors);C6(Q,W),Z.var(X,j._`${W} === ${A.default.errors}`)},P6=function(Q){$1.checkUnknownRules(Q),c$(Q)},C6=function(Q,X){if(Q.opts.jtd)return T6(Q,[],!1,X);const Y=N6.getSchemaTypes(Q.schema),Z=N6.coerceAndCheckDataType(Q,Y);T6(Q,Y,!Z,X)},c$=function(Q){const{schema:X,errSchemaPath:Y,opts:Z,self:$}=Q;if(X.$ref&&Z.ignoreKeywordsWithRef&&$1.schemaHasRulesButRef(X,$.RULES))$.logger.warn(`\$ref: keywords ignored in schema at path "${Y}"`)},r$=function(Q){const{schema:X,opts:Y}=Q;if(X.default!==void 0&&Y.useDefaults&&Y.strictSchema)$1.checkStrictMode(Q,"default is ignored in the schema root")},s$=function(Q){const X=Q.schema[Q.opts.schemaId];if(X)Q.baseId=g$.resolveUrl(Q.opts.uriResolver,Q.baseId,X)},t$=function(Q){if(Q.schema.$async&&!Q.schemaEnv.$async)throw new Error("async schema in sync schema")},k6=function({gen:Q,schemaEnv:X,schema:Y,errSchemaPath:Z,opts:$}){const W=Y.$comment;if($.$comment===!0)Q.code(j._`${A.default.self}.logger.log(${W})`);else if(typeof $.$comment=="function"){const J=j.str`${Z}/$comment`,G=Q.scopeValue("root",{ref:X.root});Q.code(j._`${A.default.self}.opts.$comment(${W}, ${J}, ${G}.schema)`)}},a$=function(Q){const{gen:X,schemaEnv:Y,validateName:Z,ValidationError:$,opts:W}=Q;if(Y.$async)X.if(j._`${A.default.errors} === 0`,()=>X.return(A.default.data),()=>X.throw(j._`new ${$}(${A.default.vErrors})`));else{if(X.assign(j._`${Z}.errors`,A.default.vErrors),W.unevaluated)o$(Q);X.return(j._`${A.default.errors} === 0`)}},o$=function({gen:Q,evaluated:X,props:Y,items:Z}){if(Y instanceof j.Name)Q.assign(j._`${X}.props`,Y);if(Z instanceof j.Name)Q.assign(j._`${X}.items`,Z)},T6=function(Q,X,Y,Z){const{gen:$,schema:W,data:J,allErrors:G,opts:z,self:q}=Q,{RULES:H}=q;if(W.$ref&&(z.ignoreKeywordsWithRef||!$1.schemaHasRulesButRef(W,H))){$.block(()=>y6(Q,"$ref",H.all.$ref.definition));return}if(!z.jtd)e$(Q,X);$.block(()=>{for(let U of H.rules)F(U);F(H.post)});function F(U){if(!B9.shouldUseGroup(W,U))return;if(U.type){if($.if(K0.checkDataType(U.type,J,z.strictNumbers)),b6(Q,U),X.length===1&&X[0]===U.type&&Y)$.else(),K0.reportTypeError(Q);$.endIf()}else b6(Q,U);if(!G)$.if(j._`${A.default.errors} === ${Z||0}`)}},b6=function(Q,X){const{gen:Y,schema:Z,opts:{useDefaults:$}}=Q;if($)_$.assignDefaults(Q,X.type);Y.block(()=>{for(let W of X.rules)if(B9.shouldUseRule(Z,W))y6(Q,W.keyword,W.definition,X.type)})},e$=function(Q,X){if(Q.schemaEnv.meta||!Q.opts.strictTypes)return;if(QW(Q,X),!Q.opts.allowUnionTypes)XW(Q,X);YW(Q,Q.dataTypes)},QW=function(Q,X){if(!X.length)return;if(!Q.dataTypes.length){Q.dataTypes=X;return}X.forEach((Y)=>{if(!v6(Q.dataTypes,Y))K9(Q,`type "${Y}" not allowed by context "${Q.dataTypes.join(",")}"`)}),$W(Q,X)},XW=function(Q,X){if(X.length>1&&!(X.length===2&&X.includes("null")))K9(Q,"use allowUnionTypes to allow union type keyword")},YW=function(Q,X){const Y=Q.self.RULES.all;for(let Z in Y){const $=Y[Z];if(typeof $=="object"&&B9.shouldUseRule(Q.schema,$)){const{type:W}=$.definition;if(W.length&&!W.some((J)=>ZW(X,J)))K9(Q,`missing type "${W.join(",")}" for keyword "${Z}"`)}}},ZW=function(Q,X){return Q.includes(X)||X==="number"&&Q.includes("integer")},v6=function(Q,X){return Q.includes(X)||X==="integer"&&Q.includes("number")},$W=function(Q,X){const Y=[];for(let Z of Q.dataTypes)if(v6(X,Z))Y.push(Z);else if(X.includes("integer")&&Z==="number")Y.push("integer");Q.dataTypes=Y},K9=function(Q,X){const Y=Q.schemaEnv.baseId+Q.errSchemaPath;X+=` at "${Y}" (strictTypes)`,$1.checkStrictMode(Q,X,Q.opts.strictTypes)},y6=function(Q,X,Y,Z){const $=new M9(Q,Y,X);if("code"in Y)Y.code($,Z);else if($.$data&&Y.validate)g1.funcKeywordCode($,Y);else if("macro"in Y)g1.macroKeywordCode($,Y);else if(Y.compile||Y.validate)g1.funcKeywordCode($,Y)},f6=function(Q,{dataLevel:X,dataNames:Y,dataPathArr:Z}){let $,W;if(Q==="")return A.default.rootData;if(Q[0]==="/"){if(!WW.test(Q))throw new Error(`Invalid JSON-pointer: ${Q}`);$=Q,W=A.default.rootData}else{const q=JW.exec(Q);if(!q)throw new Error(`Invalid JSON-pointer: ${Q}`);const H=+q[1];if($=q[2],$==="#"){if(H>=X)throw new Error(z("property/index",H));return Z[X-H]}if(H>X)throw new Error(z("data",H));if(W=Y[X-H],!$)return W}let J=W;const G=$.split("/");for(let q of G)if(q)W=j._`${W}${j.getProperty($1.unescapeJsonPointer(q))}`,J=j._`${J} && ${W}`;return J;function z(q,H){return`Cannot access ${q} ${H} levels up, current level is ${X}`}};Object.defineProperty(x6,"__esModule",{value:!0});x6.getData=x6.KeywordCxt=x6.validateFunctionCode=void 0;var E6=g4(),N6=x1(),B9=Y9(),K0=x1(),_$=Q6(),g1=z6(),F9=K6(),j=I(),A=Z1(),g$=u1(),$1=S(),_1=f1();x6.validateFunctionCode=l$;class M9{constructor(Q,X,Y){if(g1.validateKeywordUsage(Q,X,Y),this.gen=Q.gen,this.allErrors=Q.allErrors,this.keyword=Y,this.data=Q.data,this.schema=Q.schema[Y],this.$data=X.$data&&Q.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=$1.schemaRefOrVal(Q,this.schema,Y,this.$data),this.schemaType=X.schemaType,this.parentSchema=Q.schema,this.params={},this.it=Q,this.def=X,this.$data)this.schemaCode=Q.gen.const("vSchema",f6(this.$data,Q));else if(this.schemaCode=this.schemaValue,!g1.validSchemaType(this.schema,X.schemaType,X.allowUndefined))throw new Error(`${Y} value must be ${JSON.stringify(X.schemaType)}`);if("code"in X?X.trackErrors:X.errors!==!1)this.errsCount=Q.gen.const("_errs",A.default.errors)}result(Q,X,Y){this.failResult(j.not(Q),X,Y)}failResult(Q,X,Y){if(this.gen.if(Q),Y)Y();else this.error();if(X){if(this.gen.else(),X(),this.allErrors)this.gen.endIf()}else if(this.allErrors)this.gen.endIf();else this.gen.else()}pass(Q,X){this.failResult(j.not(Q),void 0,X)}fail(Q){if(Q===void 0){if(this.error(),!this.allErrors)this.gen.if(!1);return}if(this.gen.if(Q),this.error(),this.allErrors)this.gen.endIf();else this.gen.else()}fail$data(Q){if(!this.$data)return this.fail(Q);const{schemaCode:X}=this;this.fail(j._`${X} !== undefined && (${j.or(this.invalid$data(),Q)})`)}error(Q,X,Y){if(X){this.setParams(X),this._error(Q,Y),this.setParams({});return}this._error(Q,Y)}_error(Q,X){(Q?_1.reportExtraError:_1.reportError)(this,this.def.error,X)}$dataError(){_1.reportError(this,this.def.$dataError||_1.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');_1.resetErrorsCount(this.gen,this.errsCount)}ok(Q){if(!this.allErrors)this.gen.if(Q)}setParams(Q,X){if(X)Object.assign(this.params,Q);else this.params=Q}block$data(Q,X,Y=j.nil){this.gen.block(()=>{this.check$data(Q,Y),X()})}check$data(Q=j.nil,X=j.nil){if(!this.$data)return;const{gen:Y,schemaCode:Z,schemaType:$,def:W}=this;if(Y.if(j.or(j._`${Z} === undefined`,X)),Q!==j.nil)Y.assign(Q,!0);if($.length||W.validateSchema){if(Y.elseIf(this.invalid$data()),this.$dataError(),Q!==j.nil)Y.assign(Q,!1)}Y.else()}invalid$data(){const{gen:Q,schemaCode:X,schemaType:Y,def:Z,it:$}=this;return j.or(W(),J());function W(){if(Y.length){if(!(X instanceof j.Name))throw new Error("ajv implementation error");const G=Array.isArray(Y)?Y:[Y];return j._`${K0.checkDataTypes(G,X,$.opts.strictNumbers,K0.DataType.Wrong)}`}return j.nil}function J(){if(Z.validateSchema){const G=Q.scopeValue("validate$data",{ref:Z.validateSchema});return j._`!${G}(${X})`}return j.nil}}subschema(Q,X){const Y=F9.getSubschema(this.it,Q);F9.extendSubschemaData(Y,this.it,Q),F9.extendSubschemaMode(Y,Q);const Z={...this.it,...Y,items:void 0,props:void 0};return d$(Z,X),Z}mergeEvaluated(Q,X){const{it:Y,gen:Z}=this;if(!Y.opts.unevaluated)return;if(Y.props!==!0&&Q.props!==void 0)Y.props=$1.mergeEvaluated.props(Z,Q.props,Y.props,X);if(Y.items!==!0&&Q.items!==void 0)Y.items=$1.mergeEvaluated.items(Z,Q.items,Y.items,X)}mergeValidEvaluated(Q,X){const{it:Y,gen:Z}=this;if(Y.opts.unevaluated&&(Y.props!==!0||Y.items!==!0))return Z.if(X,()=>this.mergeEvaluated(Q,j.Name)),!0}}x6.KeywordCxt=M9;var WW=/^\/(?:[^~]|~0|~1)*$/,JW=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;x6.getData=f6});var M0=L((g6)=>{Object.defineProperty(g6,"__esModule",{value:!0});class _6 extends Error{constructor(Q){super("validation failed");this.errors=Q,this.ajv=this.validation=!0}}g6.default=_6});var h1=L((h6)=>{Object.defineProperty(h6,"__esModule",{value:!0});var V9=u1();class l6 extends Error{constructor(Q,X,Y,Z){super(Z||`can't resolve reference ${Y} from id ${X}`);this.missingRef=V9.resolveUrl(Q,X,Y),this.missingSchema=V9.normalizeId(V9.getFullPath(Q,this.missingRef))}}h6.default=l6});var L0=L((p6)=>{var O9=function(Q){const X=i6.call(this,Q);if(X)return X;const Y=r.getFullPath(this.opts.uriResolver,Q.root.baseId),{es5:Z,lines:$}=this.opts.code,{ownProperties:W}=this.opts,J=new c.CodeGen(this.scope,{es5:Z,lines:$,ownProperties:W});let G;if(Q.$async)G=J.scopeValue("Error",{ref:FW.default,code:c._`require("ajv/dist/runtime/validation_error").default`});const z=J.scopeName("validate");Q.validateName=z;const q={gen:J,allErrors:this.opts.allErrors,data:O1.default.data,parentData:O1.default.parentData,parentDataProperty:O1.default.parentDataProperty,dataNames:[O1.default.data],dataPathArr:[c.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:J.scopeValue("schema",this.opts.code.source===!0?{ref:Q.schema,code:c.stringify(Q.schema)}:{ref:Q.schema}),validateName:z,ValidationError:G,schema:Q.schema,schemaEnv:Q,rootId:Y,baseId:Q.baseId||Y,schemaPath:c.nil,errSchemaPath:Q.schemaPath||(this.opts.jtd?"":"#"),errorPath:c._`""`,opts:this.opts,self:this};let H;try{this._compilations.add(Q),BW.validateFunctionCode(q),J.optimize(this.opts.code.optimize);const F=J.toString();if(H=`${J.scopeRefs(O1.default.scope)}return ${F}`,this.opts.code.process)H=this.opts.code.process(H,Q);const V=new Function(`${O1.default.self}`,`${O1.default.scope}`,H)(this,this.scope.get());if(this.scope.value(z,{ref:V}),V.errors=null,V.schema=Q.schema,V.schemaEnv=Q,Q.$async)V.$async=!0;if(this.opts.code.source===!0)V.source={validateName:z,validateCode:F,scopeValues:J._values};if(this.opts.unevaluated){const{props:K,items:B}=q;if(V.evaluated={props:K instanceof c.Name?void 0:K,items:B instanceof c.Name?void 0:B,dynamicProps:K instanceof c.Name,dynamicItems:B instanceof c.Name},V.source)V.source.evaluated=c.stringify(V.evaluated)}return Q.validate=V,Q}catch(F){if(delete Q.validate,delete Q.validateName,H)this.logger.error("Error compiling schema, function code:",H);throw F}finally{this._compilations.delete(Q)}},KW=function(Q,X,Y){var Z;Y=r.resolveUrl(this.opts.uriResolver,X,Y);const $=Q.refs[Y];if($)return $;let W=LW.call(this,Q,Y);if(W===void 0){const J=(Z=Q.localRefs)===null||Z===void 0?void 0:Z[Y],{schemaId:G}=this.opts;if(J)W=new m1({schema:J,schemaId:G,root:Q,baseId:X})}if(W===void 0)return;return Q.refs[Y]=MW.call(this,W)},MW=function(Q){if(r.inlineRef(Q.schema,this.opts.inlineRefs))return Q.schema;return Q.validate?Q:O9.call(this,Q)},i6=function(Q){for(let X of this._compilations)if(VW(X,Q))return X},VW=function(Q,X){return Q.schema===X.schema&&Q.root===X.root&&Q.baseId===X.baseId},LW=function(Q,X){let Y;while(typeof(Y=this.refs[X])=="string")X=Y;return Y||this.schemas[X]||V0.call(this,Q,X)},V0=function(Q,X){const Y=this.opts.uriResolver.parse(X),Z=r._getFullPath(this.opts.uriResolver,Y);let $=r.getFullPath(this.opts.uriResolver,Q.baseId,void 0);if(Object.keys(Q.schema).length>0&&Z===$)return L9.call(this,Y,Q);const W=r.normalizeId(Z),J=this.refs[W]||this.schemas[W];if(typeof J=="string"){const G=V0.call(this,Q,J);if(typeof(G===null||G===void 0?void 0:G.schema)!=="object")return;return L9.call(this,Y,G)}if(typeof(J===null||J===void 0?void 0:J.schema)!=="object")return;if(!J.validate)O9.call(this,J);if(W===r.normalizeId(X)){const{schema:G}=J,{schemaId:z}=this.opts,q=G[z];if(q)$=r.resolveUrl(this.opts.uriResolver,$,q);return new m1({schema:G,schemaId:z,root:Q,baseId:$})}return L9.call(this,Y,J)},L9=function(Q,{baseId:X,schema:Y,root:Z}){var $;if((($=Q.fragment)===null||$===void 0?void 0:$[0])!=="/")return;for(let G of Q.fragment.slice(1).split("/")){if(typeof Y==="boolean")return;const z=Y[m6.unescapeFragment(G)];if(z===void 0)return;Y=z;const q=typeof Y==="object"&&Y[this.opts.schemaId];if(!OW.has(G)&&q)X=r.resolveUrl(this.opts.uriResolver,X,q)}let W;if(typeof Y!="boolean"&&Y.$ref&&!m6.schemaHasRulesButRef(Y,this.RULES)){const G=r.resolveUrl(this.opts.uriResolver,X,Y.$ref);W=V0.call(this,Z,G)}const{schemaId:J}=this.opts;if(W=W||new m1({schema:Y,schemaId:J,root:Z,baseId:X}),W.schema!==W.root.schema)return W;return};Object.defineProperty(p6,"__esModule",{value:!0});p6.resolveSchema=p6.getCompilingSchema=p6.resolveRef=p6.compileSchema=p6.SchemaEnv=void 0;var c=I(),FW=M0(),O1=Z1(),r=u1(),m6=S(),BW=l1();class m1{constructor(Q){var X;this.refs={},this.dynamicAnchors={};let Y;if(typeof Q.schema=="object")Y=Q.schema;this.schema=Q.schema,this.schemaId=Q.schemaId,this.root=Q.root||this,this.baseId=(X=Q.baseId)!==null&&X!==void 0?X:r.normalizeId(Y===null||Y===void 0?void 0:Y[Q.schemaId||"$id"]),this.schemaPath=Q.schemaPath,this.localRefs=Q.localRefs,this.meta=Q.meta,this.$async=Y===null||Y===void 0?void 0:Y.$async,this.refs={}}}p6.SchemaEnv=m1;p6.compileSchema=O9;p6.resolveRef=KW;p6.getCompilingSchema=i6;p6.resolveSchema=V0;var OW=new Set(["properties","patternProperties","enum","dependencies","definitions"])});var n6=L((mq,NW)=>{NW.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var r6=L((iq,c6)=>{var IW={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};c6.exports={HEX:IW}});var YQ=L((pq,XQ)=>{var o6=function(Q){if(QQ(Q,".")<3)return{host:Q,isIPV4:!1};const X=Q.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[Y]=X;if(Y)return{host:EW(Y,"."),isIPV4:!0};else return{host:Q,isIPV4:!1}},U9=function(Q,X=!1){let Y="",Z=!0;for(let $ of Q){if(TW[$]===void 0)return;if($!=="0"&&Z===!0)Z=!1;if(!Z)Y+=$}if(X&&Y.length===0)Y="0";return Y},bW=function(Q){let X=0;const Y={error:!1,address:"",zone:""},Z=[],$=[];let W=!1,J=!1,G=!1;function z(){if($.length){if(W===!1){const q=U9($);if(q!==void 0)Z.push(q);else return Y.error=!0,!1}$.length=0}return!0}for(let q=0;q<Q.length;q++){const H=Q[q];if(H==="["||H==="]")continue;if(H===":"){if(J===!0)G=!0;if(!z())break;if(X++,Z.push(":"),X>7){Y.error=!0;break}if(q-1>=0&&Q[q-1]===":")J=!0;continue}else if(H==="%"){if(!z())break;W=!0}else{$.push(H);continue}}if($.length)if(W)Y.zone=$.join("");else if(G)Z.push($.join(""));else Z.push(U9($));return Y.address=Z.join(""),Y},e6=function(Q,X={}){if(QQ(Q,":")<2)return{host:Q,isIPV6:!1};const Y=bW(Q);if(!Y.error){let{address:Z,address:$}=Y;if(Y.zone)Z+="%"+Y.zone,$+="%25"+Y.zone;return{host:Z,escapedHost:$,isIPV6:!0}}else return{host:Q,isIPV6:!1}},EW=function(Q,X){let Y="",Z=!0;const $=Q.length;for(let W=0;W<$;W++){const J=Q[W];if(J==="0"&&Z){if(W+1<=$&&Q[W+1]===X||W+1===$)Y+=J,Z=!1}else{if(J===X)Z=!0;else Z=!1;Y+=J}}return Y},QQ=function(Q,X){let Y=0;for(let Z=0;Z<Q.length;Z++)if(Q[Z]===X)Y++;return Y},SW=function(Q){const X=[];while(Q.length)if(Q.match(s6))Q=Q.replace(s6,"");else if(Q.match(t6))Q=Q.replace(t6,"/");else if(Q.match(a6))Q=Q.replace(a6,"/"),X.pop();else if(Q==="."||Q==="..")Q="";else{const Y=Q.match(RW);if(Y){const Z=Y[0];Q=Q.slice(Z.length),X.push(Z)}else throw new Error("Unexpected dot segment condition")}return X.join("")},wW=function(Q,X){const Y=X!==!0?escape:unescape;if(Q.scheme!==void 0)Q.scheme=Y(Q.scheme);if(Q.userinfo!==void 0)Q.userinfo=Y(Q.userinfo);if(Q.host!==void 0)Q.host=Y(Q.host);if(Q.path!==void 0)Q.path=Y(Q.path);if(Q.query!==void 0)Q.query=Y(Q.query);if(Q.fragment!==void 0)Q.fragment=Y(Q.fragment);return Q},PW=function(Q,X){const Y=[];if(Q.userinfo!==void 0)Y.push(Q.userinfo),Y.push("@");if(Q.host!==void 0){let Z=unescape(Q.host);const $=o6(Z);if($.isIPV4)Z=$.host;else{const W=e6($.host,{isIPV4:!1});if(W.isIPV6===!0)Z=`[${W.escapedHost}]`;else Z=Q.host}Y.push(Z)}if(typeof Q.port==="number"||typeof Q.port==="string")Y.push(":"),Y.push(String(Q.port));return Y.length?Y.join(""):void 0},{HEX:TW}=r6(),s6=/^\.\.?\//u,t6=/^\/\.(?:\/|$)/u,a6=/^\/\.\.(?:\/|$)/u,RW=/^\/?(?:.|\n)*?(?=\/|$)/u;XQ.exports={recomposeAuthority:PW,normalizeComponentEncoding:wW,removeDotSegments:SW,normalizeIPv4:o6,normalizeIPv6:e6,stringArrayToHexStripped:U9}});var qQ=L((dq,GQ)=>{var ZQ=function(Q){return typeof Q.secure==="boolean"?Q.secure:String(Q.scheme).toLowerCase()==="wss"},$Q=function(Q){if(!Q.host)Q.error=Q.error||"HTTP URIs must have a host.";return Q},WQ=function(Q){const X=String(Q.scheme).toLowerCase()==="https";if(Q.port===(X?443:80)||Q.port==="")Q.port=void 0;if(!Q.path)Q.path="/";return Q},vW=function(Q){return Q.secure=ZQ(Q),Q.resourceName=(Q.path||"/")+(Q.query?"?"+Q.query:""),Q.path=void 0,Q.query=void 0,Q},yW=function(Q){if(Q.port===(ZQ(Q)?443:80)||Q.port==="")Q.port=void 0;if(typeof Q.secure==="boolean")Q.scheme=Q.secure?"wss":"ws",Q.secure=void 0;if(Q.resourceName){const[X,Y]=Q.resourceName.split("?");Q.path=X&&X!=="/"?X:void 0,Q.query=Y,Q.resourceName=void 0}return Q.fragment=void 0,Q},fW=function(Q,X){if(!Q.path)return Q.error="URN can not be parsed",Q;const Y=Q.path.match(kW);if(Y){const Z=X.scheme||Q.scheme||"urn";Q.nid=Y[1].toLowerCase(),Q.nss=Y[2];const $=`${Z}:${X.nid||Q.nid}`,W=j9[$];if(Q.path=void 0,W)Q=W.parse(Q,X)}else Q.error=Q.error||"URN can not be parsed.";return Q},xW=function(Q,X){const Y=X.scheme||Q.scheme||"urn",Z=Q.nid.toLowerCase(),$=`${Y}:${X.nid||Z}`,W=j9[$];if(W)Q=W.serialize(Q,X);const J=Q,G=Q.nss;return J.path=`${Z||X.nid}:${G}`,X.skipEscape=!0,J},uW=function(Q,X){const Y=Q;if(Y.uuid=Y.nss,Y.nss=void 0,!X.tolerant&&(!Y.uuid||!CW.test(Y.uuid)))Y.error=Y.error||"UUID is not valid.";return Y},_W=function(Q){const X=Q;return X.nss=(Q.uuid||"").toLowerCase(),X},CW=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,kW=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,JQ={scheme:"http",domainHost:!0,parse:$Q,serialize:WQ},gW={scheme:"https",domainHost:JQ.domainHost,parse:$Q,serialize:WQ},O0={scheme:"ws",domainHost:!0,parse:vW,serialize:yW},lW={scheme:"wss",domainHost:O0.domainHost,parse:O0.parse,serialize:O0.serialize},hW={scheme:"urn",parse:fW,serialize:xW,skipNormalize:!0},mW={scheme:"urn:uuid",parse:uW,serialize:_W,skipNormalize:!0},j9={http:JQ,https:gW,ws:O0,wss:lW,urn:hW,"urn:uuid":mW};GQ.exports=j9});var HQ=L((nq,j0)=>{var nW=function(Q,X){if(typeof Q==="string")Q=Q1(W1(Q,X),X);else if(typeof Q==="object")Q=W1(Q1(Q,X),X);return Q},cW=function(Q,X,Y){const Z=Object.assign({scheme:"null"},Y),$=zQ(W1(Q,Z),W1(X,Z),Z,!0);return Q1($,{...Z,skipEscape:!0})},zQ=function(Q,X,Y,Z){const $={};if(!Z)Q=W1(Q1(Q,Y),Y),X=W1(Q1(X,Y),Y);if(Y=Y||{},!Y.tolerant&&X.scheme)$.scheme=X.scheme,$.userinfo=X.userinfo,$.host=X.host,$.port=X.port,$.path=i1(X.path||""),$.query=X.query;else{if(X.userinfo!==void 0||X.host!==void 0||X.port!==void 0)$.userinfo=X.userinfo,$.host=X.host,$.port=X.port,$.path=i1(X.path||""),$.query=X.query;else{if(!X.path)if($.path=Q.path,X.query!==void 0)$.query=X.query;else $.query=Q.query;else{if(X.path.charAt(0)==="/")$.path=i1(X.path);else{if((Q.userinfo!==void 0||Q.host!==void 0||Q.port!==void 0)&&!Q.path)$.path="/"+X.path;else if(!Q.path)$.path=X.path;else $.path=Q.path.slice(0,Q.path.lastIndexOf("/")+1)+X.path;$.path=i1($.path)}$.query=X.query}$.userinfo=Q.userinfo,$.host=Q.host,$.port=Q.port}$.scheme=Q.scheme}return $.fragment=X.fragment,$},rW=function(Q,X,Y){if(typeof Q==="string")Q=unescape(Q),Q=Q1(U0(W1(Q,Y),!0),{...Y,skipEscape:!0});else if(typeof Q==="object")Q=Q1(U0(Q,!0),{...Y,skipEscape:!0});if(typeof X==="string")X=unescape(X),X=Q1(U0(W1(X,Y),!0),{...Y,skipEscape:!0});else if(typeof X==="object")X=Q1(U0(X,!0),{...Y,skipEscape:!0});return Q.toLowerCase()===X.toLowerCase()},Q1=function(Q,X){const Y={host:Q.host,scheme:Q.scheme,userinfo:Q.userinfo,port:Q.port,path:Q.path,query:Q.query,nid:Q.nid,nss:Q.nss,uuid:Q.uuid,fragment:Q.fragment,reference:Q.reference,resourceName:Q.resourceName,secure:Q.secure,error:""},Z=Object.assign({},X),$=[],W=A9[(Z.scheme||Y.scheme||"").toLowerCase()];if(W&&W.serialize)W.serialize(Y,Z);if(Y.path!==void 0)if(!Z.skipEscape){if(Y.path=escape(Y.path),Y.scheme!==void 0)Y.path=Y.path.split("%3A").join(":")}else Y.path=unescape(Y.path);if(Z.reference!=="suffix"&&Y.scheme)$.push(Y.scheme),$.push(":");const J=dW(Y,Z);if(J!==void 0){if(Z.reference!=="suffix")$.push("//");if($.push(J),Y.path&&Y.path.charAt(0)!=="/")$.push("/")}if(Y.path!==void 0){let G=Y.path;if(!Z.absolutePath&&(!W||!W.absolutePath))G=i1(G);if(J===void 0)G=G.replace(/^\/\//u,"/%2F");$.push(G)}if(Y.query!==void 0)$.push("?"),$.push(Y.query);if(Y.fragment!==void 0)$.push("#"),$.push(Y.fragment);return $.join("")},tW=function(Q){let X=0;for(let Y=0,Z=Q.length;Y<Z;++Y)if(X=Q.charCodeAt(Y),X>126||sW[X])return!0;return!1},W1=function(Q,X){const Y=Object.assign({},X),Z={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},$=Q.indexOf("%")!==-1;let W=!1;if(Y.reference==="suffix")Q=(Y.scheme?Y.scheme+":":"")+"//"+Q;const J=Q.match(aW);if(J){if(Z.scheme=J[1],Z.userinfo=J[3],Z.host=J[4],Z.port=parseInt(J[5],10),Z.path=J[6]||"",Z.query=J[7],Z.fragment=J[8],isNaN(Z.port))Z.port=J[5];if(Z.host){const z=pW(Z.host);if(z.isIPV4===!1){const q=iW(z.host,{isIPV4:!1});Z.host=q.host.toLowerCase(),W=q.isIPV6}else Z.host=z.host,W=!0}if(Z.scheme===void 0&&Z.userinfo===void 0&&Z.host===void 0&&Z.port===void 0&&!Z.path&&Z.query===void 0)Z.reference="same-document";else if(Z.scheme===void 0)Z.reference="relative";else if(Z.fragment===void 0)Z.reference="absolute";else Z.reference="uri";if(Y.reference&&Y.reference!=="suffix"&&Y.reference!==Z.reference)Z.error=Z.error||"URI is not a "+Y.reference+" reference.";const G=A9[(Y.scheme||Z.scheme||"").toLowerCase()];if(!Y.unicodeSupport&&(!G||!G.unicodeSupport)){if(Z.host&&(Y.domainHost||G&&G.domainHost)&&W===!1&&tW(Z.host))try{Z.host=URL.domainToASCII(Z.host.toLowerCase())}catch(z){Z.error=Z.error||"Host's domain name can not be converted to ASCII: "+z}}if(!G||G&&!G.skipNormalize){if($&&Z.scheme!==void 0)Z.scheme=unescape(Z.scheme);if($&&Z.userinfo!==void 0)Z.userinfo=unescape(Z.userinfo);if($&&Z.host!==void 0)Z.host=unescape(Z.host);if(Z.path!==void 0&&Z.path.length)Z.path=escape(unescape(Z.path));if(Z.fragment!==void 0&&Z.fragment.length)Z.fragment=encodeURI(decodeURIComponent(Z.fragment))}if(G&&G.parse)G.parse(Z,Y)}else Z.error=Z.error||"URI can not be parsed.";return Z},{normalizeIPv6:iW,normalizeIPv4:pW,removeDotSegments:i1,recomposeAuthority:dW,normalizeComponentEncoding:U0}=YQ(),A9=qQ(),sW=Array.from({length:127},(Q,X)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(X))),aW=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u,D9={SCHEMES:A9,normalize:nW,resolve:cW,resolveComponents:zQ,equal:rW,serialize:Q1,parse:W1};j0.exports=D9;j0.exports.default=D9;j0.exports.fastUri=D9});var KQ=L((BQ)=>{Object.defineProperty(BQ,"__esModule",{value:!0});var FQ=HQ();FQ.code='require("ajv/dist/runtime/uri").default';BQ.default=FQ});var DQ=L((J1)=>{var q5=function(Q){var X,Y,Z,$,W,J,G,z,q,H,F,U,V,K,B,M,O,E,T,P,D,t,X1,u0,_0;const P1=Q.strict,g0=(X=Q.code)===null||X===void 0?void 0:X.optimize,y9=g0===!0||g0===void 0?1:g0||0,f9=(Z=(Y=Q.code)===null||Y===void 0?void 0:Y.regExp)!==null&&Z!==void 0?Z:jQ,wX=($=Q.uriResolver)!==null&&$!==void 0?$:Z5.default;return{strictSchema:(J=(W=Q.strictSchema)!==null&&W!==void 0?W:P1)!==null&&J!==void 0?J:!0,strictNumbers:(z=(G=Q.strictNumbers)!==null&&G!==void 0?G:P1)!==null&&z!==void 0?z:!0,strictTypes:(H=(q=Q.strictTypes)!==null&&q!==void 0?q:P1)!==null&&H!==void 0?H:"log",strictTuples:(U=(F=Q.strictTuples)!==null&&F!==void 0?F:P1)!==null&&U!==void 0?U:"log",strictRequired:(K=(V=Q.strictRequired)!==null&&V!==void 0?V:P1)!==null&&K!==void 0?K:!1,code:Q.code?{...Q.code,optimize:y9,regExp:f9}:{optimize:y9,regExp:f9},loopRequired:(B=Q.loopRequired)!==null&&B!==void 0?B:VQ,loopEnum:(M=Q.loopEnum)!==null&&M!==void 0?M:VQ,meta:(O=Q.meta)!==null&&O!==void 0?O:!0,messages:(E=Q.messages)!==null&&E!==void 0?E:!0,inlineRefs:(T=Q.inlineRefs)!==null&&T!==void 0?T:!0,schemaId:(P=Q.schemaId)!==null&&P!==void 0?P:"$id",addUsedSchema:(D=Q.addUsedSchema)!==null&&D!==void 0?D:!0,validateSchema:(t=Q.validateSchema)!==null&&t!==void 0?t:!0,validateFormats:(X1=Q.validateFormats)!==null&&X1!==void 0?X1:!0,unicodeRegExp:(u0=Q.unicodeRegExp)!==null&&u0!==void 0?u0:!0,int32range:(_0=Q.int32range)!==null&&_0!==void 0?_0:!0,uriResolver:wX}},LQ=function(Q,X,Y,Z="error"){for(let $ in Q){const W=$;if(W in X)this.logger[Z](`${Y}: option ${$}. ${Q[W]}`)}},OQ=function(Q){return Q=d1.normalizeId(Q),this.schemas[Q]||this.refs[Q]},z5=function(){const Q=this.opts.schemas;if(!Q)return;if(Array.isArray(Q))this.addSchema(Q);else for(let X in Q)this.addSchema(Q[X],X)},H5=function(){for(let Q in this.opts.formats){const X=this.opts.formats[Q];if(X)this.addFormat(Q,X)}},F5=function(Q){if(Array.isArray(Q)){this.addVocabulary(Q);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let X in Q){const Y=Q[X];if(!Y.keyword)Y.keyword=X;this.addKeyword(Y)}},B5=function(){const Q={...this.opts};for(let X of $5)delete Q[X];return Q},M5=function(Q){if(Q===!1)return K5;if(Q===void 0)return console;if(Q.log&&Q.warn&&Q.error)return Q;throw new Error("logger must implement log, warn and error methods")},L5=function(Q,X){const{RULES:Y}=this;if(I9.eachItem(Q,(Z)=>{if(Y.keywords[Z])throw new Error(`Keyword ${Z} is already defined`);if(!V5.test(Z))throw new Error(`Keyword ${Z} has invalid name`)}),!X)return;if(X.$data&&!(("code"in X)||("validate"in X)))throw new Error('$data keyword must have "code" or "validate" function')},N9=function(Q,X,Y){var Z;const $=X===null||X===void 0?void 0:X.post;if(Y&&$)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:W}=this;let J=$?W.post:W.rules.find(({type:z})=>z===Y);if(!J)J={type:Y,rules:[]},W.rules.push(J);if(W.keywords[Q]=!0,!X)return;const G={keyword:Q,definition:{...X,type:A0.getJSONTypes(X.type),schemaType:A0.getJSONTypes(X.schemaType)}};if(X.before)O5.call(this,J,G,X.before);else J.rules.push(G);W.all[Q]=G,(Z=X.implements)===null||Z===void 0||Z.forEach((z)=>this.addKeyword(z))},O5=function(Q,X,Y){const Z=Q.rules.findIndex(($)=>$.keyword===Y);if(Z>=0)Q.rules.splice(Z,0,X);else Q.rules.push(X),this.logger.warn(`rule ${Y} is not defined`)},U5=function(Q){let{metaSchema:X}=Q;if(X===void 0)return;if(Q.$data&&this.opts.$data)X=AQ(X);Q.validateSchema=this.compile(X,!0)},AQ=function(Q){return{anyOf:[Q,j5]}};Object.defineProperty(J1,"__esModule",{value:!0});J1.CodeGen=J1.Name=J1.nil=J1.stringify=J1.str=J1._=J1.KeywordCxt=void 0;var eW=l1();Object.defineProperty(J1,"KeywordCxt",{enumerable:!0,get:function(){return eW.KeywordCxt}});var E1=I();Object.defineProperty(J1,"_",{enumerable:!0,get:function(){return E1._}});Object.defineProperty(J1,"str",{enumerable:!0,get:function(){return E1.str}});Object.defineProperty(J1,"stringify",{enumerable:!0,get:function(){return E1.stringify}});Object.defineProperty(J1,"nil",{enumerable:!0,get:function(){return E1.nil}});Object.defineProperty(J1,"Name",{enumerable:!0,get:function(){return E1.Name}});Object.defineProperty(J1,"CodeGen",{enumerable:!0,get:function(){return E1.CodeGen}});var Q5=M0(),UQ=h1(),X5=X9(),p1=L0(),Y5=I(),d1=u1(),A0=x1(),I9=S(),MQ=n6(),Z5=KQ(),jQ=(Q,X)=>new RegExp(Q,X);jQ.code="new RegExp";var $5=["removeAdditional","useDefaults","coerceTypes"],W5=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),J5={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},G5={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},VQ=200;class D0{constructor(Q={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,Q=this.opts={...Q,...q5(Q)};const{es5:X,lines:Y}=this.opts.code;this.scope=new Y5.ValueScope({scope:{},prefixes:W5,es5:X,lines:Y}),this.logger=M5(Q.logger);const Z=Q.validateFormats;if(Q.validateFormats=!1,this.RULES=X5.getRules(),LQ.call(this,J5,Q,"NOT SUPPORTED"),LQ.call(this,G5,Q,"DEPRECATED","warn"),this._metaOpts=B5.call(this),Q.formats)H5.call(this);if(this._addVocabularies(),this._addDefaultMetaSchema(),Q.keywords)F5.call(this,Q.keywords);if(typeof Q.meta=="object")this.addMetaSchema(Q.meta);z5.call(this),Q.validateFormats=Z}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:Q,meta:X,schemaId:Y}=this.opts;let Z=MQ;if(Y==="id")Z={...MQ},Z.id=Z.$id,delete Z.$id;if(X&&Q)this.addMetaSchema(Z,Z[Y],!1)}defaultMeta(){const{meta:Q,schemaId:X}=this.opts;return this.opts.defaultMeta=typeof Q=="object"?Q[X]||Q:void 0}validate(Q,X){let Y;if(typeof Q=="string"){if(Y=this.getSchema(Q),!Y)throw new Error(`no schema with key or ref "${Q}"`)}else Y=this.compile(Q);const Z=Y(X);if(!("$async"in Y))this.errors=Y.errors;return Z}compile(Q,X){const Y=this._addSchema(Q,X);return Y.validate||this._compileSchemaEnv(Y)}compileAsync(Q,X){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:Y}=this.opts;return Z.call(this,Q,X);async function Z(q,H){await $.call(this,q.$schema);const F=this._addSchema(q,H);return F.validate||W.call(this,F)}async function $(q){if(q&&!this.getSchema(q))await Z.call(this,{$ref:q},!0)}async function W(q){try{return this._compileSchemaEnv(q)}catch(H){if(!(H instanceof UQ.default))throw H;return J.call(this,H),await G.call(this,H.missingSchema),W.call(this,q)}}function J({missingSchema:q,missingRef:H}){if(this.refs[q])throw new Error(`AnySchema ${q} is loaded but ${H} cannot be resolved`)}async function G(q){const H=await z.call(this,q);if(!this.refs[q])await $.call(this,H.$schema);if(!this.refs[q])this.addSchema(H,q,X)}async function z(q){const H=this._loading[q];if(H)return H;try{return await(this._loading[q]=Y(q))}finally{delete this._loading[q]}}}addSchema(Q,X,Y,Z=this.opts.validateSchema){if(Array.isArray(Q)){for(let W of Q)this.addSchema(W,void 0,Y,Z);return this}let $;if(typeof Q==="object"){const{schemaId:W}=this.opts;if($=Q[W],$!==void 0&&typeof $!="string")throw new Error(`schema ${W} must be string`)}return X=d1.normalizeId(X||$),this._checkUnique(X),this.schemas[X]=this._addSchema(Q,Y,X,Z,!0),this}addMetaSchema(Q,X,Y=this.opts.validateSchema){return this.addSchema(Q,X,!0,Y),this}validateSchema(Q,X){if(typeof Q=="boolean")return!0;let Y;if(Y=Q.$schema,Y!==void 0&&typeof Y!="string")throw new Error("$schema must be a string");if(Y=Y||this.opts.defaultMeta||this.defaultMeta(),!Y)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const Z=this.validate(Y,Q);if(!Z&&X){const $="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error($);else throw new Error($)}return Z}getSchema(Q){let X;while(typeof(X=OQ.call(this,Q))=="string")Q=X;if(X===void 0){const{schemaId:Y}=this.opts,Z=new p1.SchemaEnv({schema:{},schemaId:Y});if(X=p1.resolveSchema.call(this,Z,Q),!X)return;this.refs[Q]=X}return X.validate||this._compileSchemaEnv(X)}removeSchema(Q){if(Q instanceof RegExp)return this._removeAllSchemas(this.schemas,Q),this._removeAllSchemas(this.refs,Q),this;switch(typeof Q){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const X=OQ.call(this,Q);if(typeof X=="object")this._cache.delete(X.schema);return delete this.schemas[Q],delete this.refs[Q],this}case"object":{const X=Q;this._cache.delete(X);let Y=Q[this.opts.schemaId];if(Y)Y=d1.normalizeId(Y),delete this.schemas[Y],delete this.refs[Y];return this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(Q){for(let X of Q)this.addKeyword(X);return this}addKeyword(Q,X){let Y;if(typeof Q=="string"){if(Y=Q,typeof X=="object")this.logger.warn("these parameters are deprecated, see docs for addKeyword"),X.keyword=Y}else if(typeof Q=="object"&&X===void 0){if(X=Q,Y=X.keyword,Array.isArray(Y)&&!Y.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(L5.call(this,Y,X),!X)return I9.eachItem(Y,($)=>N9.call(this,$)),this;U5.call(this,X);const Z={...X,type:A0.getJSONTypes(X.type),schemaType:A0.getJSONTypes(X.schemaType)};return I9.eachItem(Y,Z.type.length===0?($)=>N9.call(this,$,Z):($)=>Z.type.forEach((W)=>N9.call(this,$,Z,W))),this}getKeyword(Q){const X=this.RULES.all[Q];return typeof X=="object"?X.definition:!!X}removeKeyword(Q){const{RULES:X}=this;delete X.keywords[Q],delete X.all[Q];for(let Y of X.rules){const Z=Y.rules.findIndex(($)=>$.keyword===Q);if(Z>=0)Y.rules.splice(Z,1)}return this}addFormat(Q,X){if(typeof X=="string")X=new RegExp(X);return this.formats[Q]=X,this}errorsText(Q=this.errors,{separator:X=", ",dataVar:Y="data"}={}){if(!Q||Q.length===0)return"No errors";return Q.map((Z)=>`${Y}${Z.instancePath} ${Z.message}`).reduce((Z,$)=>Z+X+$)}$dataMetaSchema(Q,X){const Y=this.RULES.all;Q=JSON.parse(JSON.stringify(Q));for(let Z of X){const $=Z.split("/").slice(1);let W=Q;for(let J of $)W=W[J];for(let J in Y){const G=Y[J];if(typeof G!="object")continue;const{$data:z}=G.definition,q=W[J];if(z&&q)W[J]=AQ(q)}}return Q}_removeAllSchemas(Q,X){for(let Y in Q){const Z=Q[Y];if(!X||X.test(Y)){if(typeof Z=="string")delete Q[Y];else if(Z&&!Z.meta)this._cache.delete(Z.schema),delete Q[Y]}}}_addSchema(Q,X,Y,Z=this.opts.validateSchema,$=this.opts.addUsedSchema){let W;const{schemaId:J}=this.opts;if(typeof Q=="object")W=Q[J];else if(this.opts.jtd)throw new Error("schema must be object");else if(typeof Q!="boolean")throw new Error("schema must be object or boolean");let G=this._cache.get(Q);if(G!==void 0)return G;Y=d1.normalizeId(W||Y);const z=d1.getSchemaRefs.call(this,Q,Y);if(G=new p1.SchemaEnv({schema:Q,schemaId:J,meta:X,baseId:Y,localRefs:z}),this._cache.set(G.schema,G),$&&!Y.startsWith("#")){if(Y)this._checkUnique(Y);this.refs[Y]=G}if(Z)this.validateSchema(Q,!0);return G}_checkUnique(Q){if(this.schemas[Q]||this.refs[Q])throw new Error(`schema with key or id "${Q}" already exists`)}_compileSchemaEnv(Q){if(Q.meta)this._compileMetaSchema(Q);else p1.compileSchema.call(this,Q);if(!Q.validate)throw new Error("ajv implementation error");return Q.validate}_compileMetaSchema(Q){const X=this.opts;this.opts=this._metaOpts;try{p1.compileSchema.call(this,Q)}finally{this.opts=X}}}D0.ValidationError=Q5.default;D0.MissingRefError=UQ.default;J1.default=D0;var K5={log(){},warn(){},error(){}},V5=/^[a-z_$][a-z0-9_$:-]*$/i,j5={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}});var IQ=L((NQ)=>{Object.defineProperty(NQ,"__esModule",{value:!0});var N5={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};NQ.default=N5});var wQ=L((RQ)=>{var EQ=function(Q,X){const{gen:Y}=Q;return X.validate?Y.scopeValue("validate",{ref:X.validate}):g._`${Y.scopeValue("wrapper",{ref:X})}.validate`},I0=function(Q,X,Y,Z){const{gen:$,it:W}=Q,{allErrors:J,schemaEnv:G,opts:z}=W,q=z.passContext?R1.default.this:g.nil;if(Z)H();else F();function H(){if(!G.$async)throw new Error("async schema referenced by sync schema");const K=$.let("valid");$.try(()=>{if($.code(g._`await ${TQ.callValidateCode(Q,X,q)}`),V(X),!J)$.assign(K,!0)},(B)=>{if($.if(g._`!(${B} instanceof ${W.ValidationError})`,()=>$.throw(B)),U(B),!J)$.assign(K,!1)}),Q.ok(K)}function F(){Q.result(TQ.callValidateCode(Q,X,q),()=>V(X),()=>U(X))}function U(K){const B=g._`${K}.errors`;$.assign(R1.default.vErrors,g._`${R1.default.vErrors} === null ? ${B} : ${R1.default.vErrors}.concat(${B})`),$.assign(R1.default.errors,g._`${R1.default.vErrors}.length`)}function V(K){var B;if(!W.opts.unevaluated)return;const M=(B=Y===null||Y===void 0?void 0:Y.validate)===null||B===void 0?void 0:B.evaluated;if(W.props!==!0)if(M&&!M.dynamicProps){if(M.props!==void 0)W.props=N0.mergeEvaluated.props($,M.props,W.props)}else{const O=$.var("props",g._`${K}.evaluated.props`);W.props=N0.mergeEvaluated.props($,O,W.props,g.Name)}if(W.items!==!0)if(M&&!M.dynamicItems){if(M.items!==void 0)W.items=N0.mergeEvaluated.items($,M.items,W.items)}else{const O=$.var("items",g._`${K}.evaluated.items`);W.items=N0.mergeEvaluated.items($,O,W.items,g.Name)}}};Object.defineProperty(RQ,"__esModule",{value:!0});RQ.callRef=RQ.getValidate=void 0;var T5=h1(),TQ=h(),g=I(),R1=Z1(),bQ=L0(),N0=S(),b5={keyword:"$ref",schemaType:"string",code(Q){const{gen:X,schema:Y,it:Z}=Q,{baseId:$,schemaEnv:W,validateName:J,opts:G,self:z}=Z,{root:q}=W;if((Y==="#"||Y==="#/")&&$===q.baseId)return F();const H=bQ.resolveRef.call(z,q,$,Y);if(H===void 0)throw new T5.default(Z.opts.uriResolver,$,Y);if(H instanceof bQ.SchemaEnv)return U(H);return V(H);function F(){if(W===q)return I0(Q,J,W,W.$async);const K=X.scopeValue("root",{ref:q});return I0(Q,g._`${K}.validate`,q,q.$async)}function U(K){const B=EQ(Q,K);I0(Q,B,K,K.$async)}function V(K){const B=X.scopeValue("schema",G.code.source===!0?{ref:K,code:g.stringify(K)}:{ref:K}),M=X.name("valid"),O=Q.subschema({schema:K,dataTypes:[],schemaPath:g.nil,topSchemaRef:B,errSchemaPath:Y},M);Q.mergeEvaluated(O),Q.ok(M)}}};RQ.getValidate=EQ;RQ.callRef=I0;RQ.default=b5});var CQ=L((PQ)=>{Object.defineProperty(PQ,"__esModule",{value:!0});var S5=IQ(),w5=wQ(),P5=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",S5.default,w5.default];PQ.default=P5});var vQ=L((kQ)=>{Object.defineProperty(kQ,"__esModule",{value:!0});var T0=I(),B1=T0.operators,b0={maximum:{okStr:"<=",ok:B1.LTE,fail:B1.GT},minimum:{okStr:">=",ok:B1.GTE,fail:B1.LT},exclusiveMaximum:{okStr:"<",ok:B1.LT,fail:B1.GTE},exclusiveMinimum:{okStr:">",ok:B1.GT,fail:B1.LTE}},k5={message:({keyword:Q,schemaCode:X})=>T0.str`must be ${b0[Q].okStr} ${X}`,params:({keyword:Q,schemaCode:X})=>T0._`{comparison: ${b0[Q].okStr}, limit: ${X}}`},v5={keyword:Object.keys(b0),type:"number",schemaType:"number",$data:!0,error:k5,code(Q){const{keyword:X,data:Y,schemaCode:Z}=Q;Q.fail$data(T0._`${Y} ${b0[X].fail} ${Z} || isNaN(${Y})`)}};kQ.default=v5});var fQ=L((yQ)=>{Object.defineProperty(yQ,"__esModule",{value:!0});var n1=I(),f5={message:({schemaCode:Q})=>n1.str`must be multiple of ${Q}`,params:({schemaCode:Q})=>n1._`{multipleOf: ${Q}}`},x5={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:f5,code(Q){const{gen:X,data:Y,schemaCode:Z,it:$}=Q,W=$.opts.multipleOfPrecision,J=X.let("res"),G=W?n1._`Math.abs(Math.round(${J}) - ${J}) > 1e-${W}`:n1._`${J} !== parseInt(${J})`;Q.fail$data(n1._`(${Z} === 0 || (${J} = ${Y}/${Z}, ${G}))`)}};yQ.default=x5});var _Q=L((uQ)=>{var xQ=function(Q){const X=Q.length;let Y=0,Z=0,$;while(Z<X)if(Y++,$=Q.charCodeAt(Z++),$>=55296&&$<=56319&&Z<X){if($=Q.charCodeAt(Z),($&64512)===56320)Z++}return Y};Object.defineProperty(uQ,"__esModule",{value:!0});uQ.default=xQ;xQ.code='require("ajv/dist/runtime/ucs2length").default'});var lQ=L((gQ)=>{Object.defineProperty(gQ,"__esModule",{value:!0});var U1=I(),g5=S(),l5=_Q(),h5={message({keyword:Q,schemaCode:X}){const Y=Q==="maxLength"?"more":"fewer";return U1.str`must NOT have ${Y} than ${X} characters`},params:({schemaCode:Q})=>U1._`{limit: ${Q}}`},m5={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:h5,code(Q){const{keyword:X,data:Y,schemaCode:Z,it:$}=Q,W=X==="maxLength"?U1.operators.GT:U1.operators.LT,J=$.opts.unicode===!1?U1._`${Y}.length`:U1._`${g5.useFunc(Q.gen,l5.default)}(${Y})`;Q.fail$data(U1._`${J} ${W} ${Z}`)}};gQ.default=m5});var mQ=L((hQ)=>{Object.defineProperty(hQ,"__esModule",{value:!0});var p5=h(),E0=I(),d5={message:({schemaCode:Q})=>E0.str`must match pattern "${Q}"`,params:({schemaCode:Q})=>E0._`{pattern: ${Q}}`},n5={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:d5,code(Q){const{data:X,$data:Y,schema:Z,schemaCode:$,it:W}=Q,J=W.opts.unicodeRegExp?"u":"",G=Y?E0._`(new RegExp(${$}, ${J}))`:p5.usePattern(Q,Z);Q.fail$data(E0._`!${G}.test(${X})`)}};hQ.default=n5});var pQ=L((iQ)=>{Object.defineProperty(iQ,"__esModule",{value:!0});var c1=I(),r5={message({keyword:Q,schemaCode:X}){const Y=Q==="maxProperties"?"more":"fewer";return c1.str`must NOT have ${Y} than ${X} properties`},params:({schemaCode:Q})=>c1._`{limit: ${Q}}`},s5={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:r5,code(Q){const{keyword:X,data:Y,schemaCode:Z}=Q,$=X==="maxProperties"?c1.operators.GT:c1.operators.LT;Q.fail$data(c1._`Object.keys(${Y}).length ${$} ${Z}`)}};iQ.default=s5});var nQ=L((dQ)=>{Object.defineProperty(dQ,"__esModule",{value:!0});var r1=h(),s1=I(),a5=S(),o5={message:({params:{missingProperty:Q}})=>s1.str`must have required property '${Q}'`,params:({params:{missingProperty:Q}})=>s1._`{missingProperty: ${Q}}`},e5={keyword:"required",type:"object",schemaType:"array",$data:!0,error:o5,code(Q){const{gen:X,schema:Y,schemaCode:Z,data:$,$data:W,it:J}=Q,{opts:G}=J;if(!W&&Y.length===0)return;const z=Y.length>=G.loopRequired;if(J.allErrors)q();else H();if(G.strictRequired){const V=Q.parentSchema.properties,{definedProperties:K}=Q.it;for(let B of Y)if((V===null||V===void 0?void 0:V[B])===void 0&&!K.has(B)){const M=J.schemaEnv.baseId+J.errSchemaPath,O=`required property "${B}" is not defined at "${M}" (strictRequired)`;a5.checkStrictMode(J,O,J.opts.strictRequired)}}function q(){if(z||W)Q.block$data(s1.nil,F);else for(let V of Y)r1.checkReportMissingProp(Q,V)}function H(){const V=X.let("missing");if(z||W){const K=X.let("valid",!0);Q.block$data(K,()=>U(V,K)),Q.ok(K)}else X.if(r1.checkMissingProp(Q,Y,V)),r1.reportMissingProp(Q,V),X.else()}function F(){X.forOf("prop",Z,(V)=>{Q.setParams({missingProperty:V}),X.if(r1.noPropertyInData(X,$,V,G.ownProperties),()=>Q.error())})}function U(V,K){Q.setParams({missingProperty:V}),X.forOf(V,Z,()=>{X.assign(K,r1.propertyInData(X,$,V,G.ownProperties)),X.if(s1.not(K),()=>{Q.error(),X.break()})},s1.nil)}}};dQ.default=e5});var rQ=L((cQ)=>{Object.defineProperty(cQ,"__esModule",{value:!0});var t1=I(),XJ={message({keyword:Q,schemaCode:X}){const Y=Q==="maxItems"?"more":"fewer";return t1.str`must NOT have ${Y} than ${X} items`},params:({schemaCode:Q})=>t1._`{limit: ${Q}}`},YJ={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:XJ,code(Q){const{keyword:X,data:Y,schemaCode:Z}=Q,$=X==="maxItems"?t1.operators.GT:t1.operators.LT;Q.fail$data(t1._`${Y}.length ${$} ${Z}`)}};cQ.default=YJ});var R0=L((tQ)=>{Object.defineProperty(tQ,"__esModule",{value:!0});var sQ=z9();sQ.code='require("ajv/dist/runtime/equal").default';tQ.default=sQ});var oQ=L((aQ)=>{Object.defineProperty(aQ,"__esModule",{value:!0});var T9=x1(),v=I(),WJ=S(),JJ=R0(),GJ={message:({params:{i:Q,j:X}})=>v.str`must NOT have duplicate items (items ## ${X} and ${Q} are identical)`,params:({params:{i:Q,j:X}})=>v._`{i: ${Q}, j: ${X}}`},qJ={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:GJ,code(Q){const{gen:X,data:Y,$data:Z,schema:$,parentSchema:W,schemaCode:J,it:G}=Q;if(!Z&&!$)return;const z=X.let("valid"),q=W.items?T9.getSchemaTypes(W.items):[];Q.block$data(z,H,v._`${J} === false`),Q.ok(z);function H(){const K=X.let("i",v._`${Y}.length`),B=X.let("j");Q.setParams({i:K,j:B}),X.assign(z,!0),X.if(v._`${K} > 1`,()=>(F()?U:V)(K,B))}function F(){return q.length>0&&!q.some((K)=>K==="object"||K==="array")}function U(K,B){const M=X.name("item"),O=T9.checkDataTypes(q,M,G.opts.strictNumbers,T9.DataType.Wrong),E=X.const("indices",v._`{}`);X.for(v._`;${K}--;`,()=>{if(X.let(M,v._`${Y}[${K}]`),X.if(O,v._`continue`),q.length>1)X.if(v._`typeof ${M} == "string"`,v._`${M} += "_"`);X.if(v._`typeof ${E}[${M}] == "number"`,()=>{X.assign(B,v._`${E}[${M}]`),Q.error(),X.assign(z,!1).break()}).code(v._`${E}[${M}] = ${K}`)})}function V(K,B){const M=WJ.useFunc(X,JJ.default),O=X.name("outer");X.label(O).for(v._`;${K}--;`,()=>X.for(v._`${B} = ${K}; ${B}--;`,()=>X.if(v._`${M}(${Y}[${K}], ${Y}[${B}])`,()=>{Q.error(),X.assign(z,!1).break(O)})))}}};aQ.default=qJ});var Q8=L((eQ)=>{Object.defineProperty(eQ,"__esModule",{value:!0});var b9=I(),HJ=S(),FJ=R0(),BJ={message:"must be equal to constant",params:({schemaCode:Q})=>b9._`{allowedValue: ${Q}}`},KJ={keyword:"const",$data:!0,error:BJ,code(Q){const{gen:X,data:Y,$data:Z,schemaCode:$,schema:W}=Q;if(Z||W&&typeof W=="object")Q.fail$data(b9._`!${HJ.useFunc(X,FJ.default)}(${Y}, ${$})`);else Q.fail(b9._`${W} !== ${Y}`)}};eQ.default=KJ});var Y8=L((X8)=>{Object.defineProperty(X8,"__esModule",{value:!0});var a1=I(),VJ=S(),LJ=R0(),OJ={message:"must be equal to one of the allowed values",params:({schemaCode:Q})=>a1._`{allowedValues: ${Q}}`},UJ={keyword:"enum",schemaType:"array",$data:!0,error:OJ,code(Q){const{gen:X,data:Y,$data:Z,schema:$,schemaCode:W,it:J}=Q;if(!Z&&$.length===0)throw new Error("enum must have non-empty array");const G=$.length>=J.opts.loopEnum;let z;const q=()=>z!==null&&z!==void 0?z:z=VJ.useFunc(X,LJ.default);let H;if(G||Z)H=X.let("valid"),Q.block$data(H,F);else{if(!Array.isArray($))throw new Error("ajv implementation error");const V=X.const("vSchema",W);H=a1.or(...$.map((K,B)=>U(V,B)))}Q.pass(H);function F(){X.assign(H,!1),X.forOf("v",W,(V)=>X.if(a1._`${q()}(${Y}, ${V})`,()=>X.assign(H,!0).break()))}function U(V,K){const B=$[K];return typeof B==="object"&&B!==null?a1._`${q()}(${Y}, ${V}[${K}])`:a1._`${Y} === ${B}`}}};X8.default=UJ});var $8=L((Z8)=>{Object.defineProperty(Z8,"__esModule",{value:!0});var AJ=vQ(),DJ=fQ(),NJ=lQ(),IJ=mQ(),TJ=pQ(),bJ=nQ(),EJ=rQ(),RJ=oQ(),SJ=Q8(),wJ=Y8(),PJ=[AJ.default,DJ.default,NJ.default,IJ.default,TJ.default,bJ.default,EJ.default,RJ.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},SJ.default,wJ.default];Z8.default=PJ});var R9=L((J8)=>{var W8=function(Q,X){const{gen:Y,schema:Z,data:$,keyword:W,it:J}=Q;J.items=!0;const G=Y.const("len",j1._`${$}.length`);if(Z===!1)Q.setParams({len:X.length}),Q.pass(j1._`${G} <= ${X.length}`);else if(typeof Z=="object"&&!E9.alwaysValidSchema(J,Z)){const q=Y.var("valid",j1._`${G} <= ${X.length}`);Y.if(j1.not(q),()=>z(q)),Q.ok(q)}function z(q){Y.forRange("i",X.length,G,(H)=>{if(Q.subschema({keyword:W,dataProp:H,dataPropType:E9.Type.Num},q),!J.allErrors)Y.if(j1.not(q),()=>Y.break())})}};Object.defineProperty(J8,"__esModule",{value:!0});J8.validateAdditionalItems=void 0;var j1=I(),E9=S(),kJ={message:({params:{len:Q}})=>j1.str`must NOT have more than ${Q} items`,params:({params:{len:Q}})=>j1._`{limit: ${Q}}`},vJ={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:kJ,code(Q){const{parentSchema:X,it:Y}=Q,{items:Z}=X;if(!Array.isArray(Z)){E9.checkStrictMode(Y,'"additionalItems" is ignored when "items" is not an array of schemas');return}W8(Q,Z)}};J8.validateAdditionalItems=W8;J8.default=vJ});var S9=L((H8)=>{var z8=function(Q,X,Y=Q.schema){const{gen:Z,parentSchema:$,data:W,keyword:J,it:G}=Q;if(H($),G.opts.unevaluated&&Y.length&&G.items!==!0)G.items=S0.mergeEvaluated.items(Z,Y.length,G.items);const z=Z.name("valid"),q=Z.const("len",q8._`${W}.length`);Y.forEach((F,U)=>{if(S0.alwaysValidSchema(G,F))return;Z.if(q8._`${q} > ${U}`,()=>Q.subschema({keyword:J,schemaProp:U,dataProp:U},z)),Q.ok(z)});function H(F){const{opts:U,errSchemaPath:V}=G,K=Y.length,B=K===F.minItems&&(K===F.maxItems||F[X]===!1);if(U.strictTuples&&!B){const M=`"${J}" is ${K}-tuple, but minItems or maxItems/${X} are not specified or different at path "${V}"`;S0.checkStrictMode(G,M,U.strictTuples)}}};Object.defineProperty(H8,"__esModule",{value:!0});H8.validateTuple=void 0;var q8=I(),S0=S(),fJ=h(),xJ={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(Q){const{schema:X,it:Y}=Q;if(Array.isArray(X))return z8(Q,"additionalItems",X);if(Y.items=!0,S0.alwaysValidSchema(Y,X))return;Q.ok(fJ.validateArray(Q))}};H8.validateTuple=z8;H8.default=xJ});var K8=L((B8)=>{Object.defineProperty(B8,"__esModule",{value:!0});var _J=S9(),gJ={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:(Q)=>_J.validateTuple(Q,"items")};B8.default=gJ});var L8=L((V8)=>{Object.defineProperty(V8,"__esModule",{value:!0});var M8=I(),hJ=S(),mJ=h(),iJ=R9(),pJ={message:({params:{len:Q}})=>M8.str`must NOT have more than ${Q} items`,params:({params:{len:Q}})=>M8._`{limit: ${Q}}`},dJ={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:pJ,code(Q){const{schema:X,parentSchema:Y,it:Z}=Q,{prefixItems:$}=Y;if(Z.items=!0,hJ.alwaysValidSchema(Z,X))return;if($)iJ.validateAdditionalItems(Q,$);else Q.ok(mJ.validateArray(Q))}};V8.default=dJ});var U8=L((O8)=>{Object.defineProperty(O8,"__esModule",{value:!0});var m=I(),w0=S(),cJ={message:({params:{min:Q,max:X}})=>X===void 0?m.str`must contain at least ${Q} valid item(s)`:m.str`must contain at least ${Q} and no more than ${X} valid item(s)`,params:({params:{min:Q,max:X}})=>X===void 0?m._`{minContains: ${Q}}`:m._`{minContains: ${Q}, maxContains: ${X}}`},rJ={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:cJ,code(Q){const{gen:X,schema:Y,parentSchema:Z,data:$,it:W}=Q;let J,G;const{minContains:z,maxContains:q}=Z;if(W.opts.next)J=z===void 0?1:z,G=q;else J=1;const H=X.const("len",m._`${$}.length`);if(Q.setParams({min:J,max:G}),G===void 0&&J===0){w0.checkStrictMode(W,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(G!==void 0&&J>G){w0.checkStrictMode(W,'"minContains" > "maxContains" is always invalid'),Q.fail();return}if(w0.alwaysValidSchema(W,Y)){let B=m._`${H} >= ${J}`;if(G!==void 0)B=m._`${B} && ${H} <= ${G}`;Q.pass(B);return}W.items=!0;const F=X.name("valid");if(G===void 0&&J===1)V(F,()=>X.if(F,()=>X.break()));else if(J===0){if(X.let(F,!0),G!==void 0)X.if(m._`${$}.length > 0`,U)}else X.let(F,!1),U();Q.result(F,()=>Q.reset());function U(){const B=X.name("_valid"),M=X.let("count",0);V(B,()=>X.if(B,()=>K(M)))}function V(B,M){X.forRange("i",0,H,(O)=>{Q.subschema({keyword:"contains",dataProp:O,dataPropType:w0.Type.Num,compositeRule:!0},B),M()})}function K(B){if(X.code(m._`${B}++`),G===void 0)X.if(m._`${B} >= ${J}`,()=>X.assign(F,!0).break());else if(X.if(m._`${B} > ${G}`,()=>X.assign(F,!1).break()),J===1)X.assign(F,!0);else X.if(m._`${B} >= ${J}`,()=>X.assign(F,!0))}}};O8.default=rJ});var T8=L((D8)=>{var oJ=function({schema:Q}){const X={},Y={};for(let Z in Q){if(Z==="__proto__")continue;const $=Array.isArray(Q[Z])?X:Y;$[Z]=Q[Z]}return[X,Y]},j8=function(Q,X=Q.schema){const{gen:Y,data:Z,it:$}=Q;if(Object.keys(X).length===0)return;const W=Y.let("missing");for(let J in X){const G=X[J];if(G.length===0)continue;const z=o1.propertyInData(Y,Z,J,$.opts.ownProperties);if(Q.setParams({property:J,depsCount:G.length,deps:G.join(", ")}),$.allErrors)Y.if(z,()=>{for(let q of G)o1.checkReportMissingProp(Q,q)});else Y.if(w9._`${z} && (${o1.checkMissingProp(Q,G,W)})`),o1.reportMissingProp(Q,W),Y.else()}},A8=function(Q,X=Q.schema){const{gen:Y,data:Z,keyword:$,it:W}=Q,J=Y.name("valid");for(let G in X){if(tJ.alwaysValidSchema(W,X[G]))continue;Y.if(o1.propertyInData(Y,Z,G,W.opts.ownProperties),()=>{const z=Q.subschema({keyword:$,schemaProp:G},J);Q.mergeValidEvaluated(z,J)},()=>Y.var(J,!0)),Q.ok(J)}};Object.defineProperty(D8,"__esModule",{value:!0});D8.validateSchemaDeps=D8.validatePropertyDeps=D8.error=void 0;var w9=I(),tJ=S(),o1=h();D8.error={message:({params:{property:Q,depsCount:X,deps:Y}})=>{const Z=X===1?"property":"properties";return w9.str`must have ${Z} ${Y} when property ${Q} is present`},params:({params:{property:Q,depsCount:X,deps:Y,missingProperty:Z}})=>w9._`{property: ${Q},
    missingProperty: ${Z},
    depsCount: ${X},
    deps: ${Y}}`};var aJ={keyword:"dependencies",type:"object",schemaType:"object",error:D8.error,code(Q){const[X,Y]=oJ(Q);j8(Q,X),A8(Q,Y)}};D8.validatePropertyDeps=j8;D8.validateSchemaDeps=A8;D8.default=aJ});var R8=L((E8)=>{Object.defineProperty(E8,"__esModule",{value:!0});var b8=I(),XG=S(),YG={message:"property name must be valid",params:({params:Q})=>b8._`{propertyName: ${Q.propertyName}}`},ZG={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:YG,code(Q){const{gen:X,schema:Y,data:Z,it:$}=Q;if(XG.alwaysValidSchema($,Y))return;const W=X.name("valid");X.forIn("key",Z,(J)=>{Q.setParams({propertyName:J}),Q.subschema({keyword:"propertyNames",data:J,dataTypes:["string"],propertyName:J,compositeRule:!0},W),X.if(b8.not(W),()=>{if(Q.error(!0),!$.allErrors)X.break()})}),Q.ok(W)}};E8.default=ZG});var P9=L((S8)=>{Object.defineProperty(S8,"__esModule",{value:!0});var P0=h(),s=I(),WG=Z1(),C0=S(),JG={message:"must NOT have additional properties",params:({params:Q})=>s._`{additionalProperty: ${Q.additionalProperty}}`},GG={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:JG,code(Q){const{gen:X,schema:Y,parentSchema:Z,data:$,errsCount:W,it:J}=Q;if(!W)throw new Error("ajv implementation error");const{allErrors:G,opts:z}=J;if(J.props=!0,z.removeAdditional!=="all"&&C0.alwaysValidSchema(J,Y))return;const q=P0.allSchemaProperties(Z.properties),H=P0.allSchemaProperties(Z.patternProperties);F(),Q.ok(s._`${W} === ${WG.default.errors}`);function F(){X.forIn("key",$,(M)=>{if(!q.length&&!H.length)K(M);else X.if(U(M),()=>K(M))})}function U(M){let O;if(q.length>8){const E=C0.schemaRefOrVal(J,Z.properties,"properties");O=P0.isOwnProperty(X,E,M)}else if(q.length)O=s.or(...q.map((E)=>s._`${M} === ${E}`));else O=s.nil;if(H.length)O=s.or(O,...H.map((E)=>s._`${P0.usePattern(Q,E)}.test(${M})`));return s.not(O)}function V(M){X.code(s._`delete ${$}[${M}]`)}function K(M){if(z.removeAdditional==="all"||z.removeAdditional&&Y===!1){V(M);return}if(Y===!1){if(Q.setParams({additionalProperty:M}),Q.error(),!G)X.break();return}if(typeof Y=="object"&&!C0.alwaysValidSchema(J,Y)){const O=X.name("valid");if(z.removeAdditional==="failing")B(M,O,!1),X.if(s.not(O),()=>{Q.reset(),V(M)});else if(B(M,O),!G)X.if(s.not(O),()=>X.break())}}function B(M,O,E){const T={keyword:"additionalProperties",dataProp:M,dataPropType:C0.Type.Str};if(E===!1)Object.assign(T,{compositeRule:!0,createErrors:!1,allErrors:!1});Q.subschema(T,O)}}};S8.default=GG});var k8=L((C8)=>{Object.defineProperty(C8,"__esModule",{value:!0});var zG=l1(),w8=h(),C9=S(),P8=P9(),HG={keyword:"properties",type:"object",schemaType:"object",code(Q){const{gen:X,schema:Y,parentSchema:Z,data:$,it:W}=Q;if(W.opts.removeAdditional==="all"&&Z.additionalProperties===void 0)P8.default.code(new zG.KeywordCxt(W,P8.default,"additionalProperties"));const J=w8.allSchemaProperties(Y);for(let F of J)W.definedProperties.add(F);if(W.opts.unevaluated&&J.length&&W.props!==!0)W.props=C9.mergeEvaluated.props(X,C9.toHash(J),W.props);const G=J.filter((F)=>!C9.alwaysValidSchema(W,Y[F]));if(G.length===0)return;const z=X.name("valid");for(let F of G){if(q(F))H(F);else{if(X.if(w8.propertyInData(X,$,F,W.opts.ownProperties)),H(F),!W.allErrors)X.else().var(z,!0);X.endIf()}Q.it.definedProperties.add(F),Q.ok(z)}function q(F){return W.opts.useDefaults&&!W.compositeRule&&Y[F].default!==void 0}function H(F){Q.subschema({keyword:"properties",schemaProp:F,dataProp:F},z)}}};C8.default=HG});var u8=L((x8)=>{Object.defineProperty(x8,"__esModule",{value:!0});var v8=h(),k0=I(),y8=S(),f8=S(),BG={keyword:"patternProperties",type:"object",schemaType:"object",code(Q){const{gen:X,schema:Y,data:Z,parentSchema:$,it:W}=Q,{opts:J}=W,G=v8.allSchemaProperties(Y),z=G.filter((B)=>y8.alwaysValidSchema(W,Y[B]));if(G.length===0||z.length===G.length&&(!W.opts.unevaluated||W.props===!0))return;const q=J.strictSchema&&!J.allowMatchingProperties&&$.properties,H=X.name("valid");if(W.props!==!0&&!(W.props instanceof k0.Name))W.props=f8.evaluatedPropsToName(X,W.props);const{props:F}=W;U();function U(){for(let B of G){if(q)V(B);if(W.allErrors)K(B);else X.var(H,!0),K(B),X.if(H)}}function V(B){for(let M in q)if(new RegExp(B).test(M))y8.checkStrictMode(W,`property ${M} matches pattern ${B} (use allowMatchingProperties)`)}function K(B){X.forIn("key",Z,(M)=>{X.if(k0._`${v8.usePattern(Q,B)}.test(${M})`,()=>{const O=z.includes(B);if(!O)Q.subschema({keyword:"patternProperties",schemaProp:B,dataProp:M,dataPropType:f8.Type.Str},H);if(W.opts.unevaluated&&F!==!0)X.assign(k0._`${F}[${M}]`,!0);else if(!O&&!W.allErrors)X.if(k0.not(H),()=>X.break())})})}}};x8.default=BG});var g8=L((_8)=>{Object.defineProperty(_8,"__esModule",{value:!0});var MG=S(),VG={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(Q){const{gen:X,schema:Y,it:Z}=Q;if(MG.alwaysValidSchema(Z,Y)){Q.fail();return}const $=X.name("valid");Q.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},$),Q.failResult($,()=>Q.reset(),()=>Q.error())},error:{message:"must NOT be valid"}};_8.default=VG});var h8=L((l8)=>{Object.defineProperty(l8,"__esModule",{value:!0});var OG=h(),UG={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:OG.validateUnion,error:{message:"must match a schema in anyOf"}};l8.default=UG});var i8=L((m8)=>{Object.defineProperty(m8,"__esModule",{value:!0});var v0=I(),AG=S(),DG={message:"must match exactly one schema in oneOf",params:({params:Q})=>v0._`{passingSchemas: ${Q.passing}}`},NG={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:DG,code(Q){const{gen:X,schema:Y,parentSchema:Z,it:$}=Q;if(!Array.isArray(Y))throw new Error("ajv implementation error");if($.opts.discriminator&&Z.discriminator)return;const W=Y,J=X.let("valid",!1),G=X.let("passing",null),z=X.name("_valid");Q.setParams({passing:G}),X.block(q),Q.result(J,()=>Q.reset(),()=>Q.error(!0));function q(){W.forEach((H,F)=>{let U;if(AG.alwaysValidSchema($,H))X.var(z,!0);else U=Q.subschema({keyword:"oneOf",schemaProp:F,compositeRule:!0},z);if(F>0)X.if(v0._`${z} && ${J}`).assign(J,!1).assign(G,v0._`[${G}, ${F}]`).else();X.if(z,()=>{if(X.assign(J,!0),X.assign(G,F),U)Q.mergeEvaluated(U,v0.Name)})})}}};m8.default=NG});var d8=L((p8)=>{Object.defineProperty(p8,"__esModule",{value:!0});var TG=S(),bG={keyword:"allOf",schemaType:"array",code(Q){const{gen:X,schema:Y,it:Z}=Q;if(!Array.isArray(Y))throw new Error("ajv implementation error");const $=X.name("valid");Y.forEach((W,J)=>{if(TG.alwaysValidSchema(Z,W))return;const G=Q.subschema({keyword:"allOf",schemaProp:J},$);Q.ok($),Q.mergeEvaluated(G)})}};p8.default=bG});var s8=L((r8)=>{var n8=function(Q,X){const Y=Q.schema[X];return Y!==void 0&&!c8.alwaysValidSchema(Q,Y)};Object.defineProperty(r8,"__esModule",{value:!0});var y0=I(),c8=S(),RG={message:({params:Q})=>y0.str`must match "${Q.ifClause}" schema`,params:({params:Q})=>y0._`{failingKeyword: ${Q.ifClause}}`},SG={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:RG,code(Q){const{gen:X,parentSchema:Y,it:Z}=Q;if(Y.then===void 0&&Y.else===void 0)c8.checkStrictMode(Z,'"if" without "then" and "else" is ignored');const $=n8(Z,"then"),W=n8(Z,"else");if(!$&&!W)return;const J=X.let("valid",!0),G=X.name("_valid");if(z(),Q.reset(),$&&W){const H=X.let("ifClause");Q.setParams({ifClause:H}),X.if(G,q("then",H),q("else",H))}else if($)X.if(G,q("then"));else X.if(y0.not(G),q("else"));Q.pass(J,()=>Q.error(!0));function z(){const H=Q.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},G);Q.mergeEvaluated(H)}function q(H,F){return()=>{const U=Q.subschema({keyword:H},G);if(X.assign(J,G),Q.mergeValidEvaluated(U,J),F)X.assign(F,y0._`${H}`);else Q.setParams({ifClause:H})}}}};r8.default=SG});var a8=L((t8)=>{Object.defineProperty(t8,"__esModule",{value:!0});var PG=S(),CG={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:Q,parentSchema:X,it:Y}){if(X.if===void 0)PG.checkStrictMode(Y,`"${Q}" without "if" is ignored`)}};t8.default=CG});var e8=L((o8)=>{var sG=function(Q=!1){const X=[iG.default,pG.default,dG.default,nG.default,cG.default,rG.default,gG.default,lG.default,_G.default,hG.default,mG.default];if(Q)X.push(yG.default,xG.default);else X.push(vG.default,fG.default);return X.push(uG.default),X};Object.defineProperty(o8,"__esModule",{value:!0});var vG=R9(),yG=K8(),fG=S9(),xG=L8(),uG=U8(),_G=T8(),gG=R8(),lG=P9(),hG=k8(),mG=u8(),iG=g8(),pG=h8(),dG=i8(),nG=d8(),cG=s8(),rG=a8();o8.default=sG});var XX=L((QX)=>{Object.defineProperty(QX,"__esModule",{value:!0});var k=I(),aG={message:({schemaCode:Q})=>k.str`must match format "${Q}"`,params:({schemaCode:Q})=>k._`{format: ${Q}}`},oG={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:aG,code(Q,X){const{gen:Y,data:Z,$data:$,schema:W,schemaCode:J,it:G}=Q,{opts:z,errSchemaPath:q,schemaEnv:H,self:F}=G;if(!z.validateFormats)return;if($)U();else V();function U(){const K=Y.scopeValue("formats",{ref:F.formats,code:z.code.formats}),B=Y.const("fDef",k._`${K}[${J}]`),M=Y.let("fType"),O=Y.let("format");Y.if(k._`typeof ${B} == "object" && !(${B} instanceof RegExp)`,()=>Y.assign(M,k._`${B}.type || "string"`).assign(O,k._`${B}.validate`),()=>Y.assign(M,k._`"string"`).assign(O,B)),Q.fail$data(k.or(E(),T()));function E(){if(z.strictSchema===!1)return k.nil;return k._`${J} && !${O}`}function T(){const P=H.$async?k._`(${B}.async ? await ${O}(${Z}) : ${O}(${Z}))`:k._`${O}(${Z})`,D=k._`(typeof ${O} == "function" ? ${P} : ${O}.test(${Z}))`;return k._`${O} && ${O} !== true && ${M} === ${X} && !${D}`}}function V(){const K=F.formats[W];if(!K){E();return}if(K===!0)return;const[B,M,O]=T(K);if(B===X)Q.pass(P());function E(){if(z.strictSchema===!1){F.logger.warn(D());return}throw new Error(D());function D(){return`unknown format "${W}" ignored in schema at path "${q}"`}}function T(D){const t=D instanceof RegExp?k.regexpCode(D):z.code.formats?k._`${z.code.formats}${k.getProperty(W)}`:void 0,X1=Y.scopeValue("formats",{key:W,ref:D,code:t});if(typeof D=="object"&&!(D instanceof RegExp))return[D.type||"string",D.validate,k._`${X1}.validate`];return["string",D,X1]}function P(){if(typeof K=="object"&&!(K instanceof RegExp)&&K.async){if(!H.$async)throw new Error("async format in sync schema");return k._`await ${O}(${Z})`}return typeof M=="function"?k._`${O}(${Z})`:k._`${O}.test(${Z})`}}}};QX.default=oG});var ZX=L((YX)=>{Object.defineProperty(YX,"__esModule",{value:!0});var Q7=XX(),X7=[Q7.default];YX.default=X7});var JX=L(($X)=>{Object.defineProperty($X,"__esModule",{value:!0});$X.contentVocabulary=$X.metadataVocabulary=void 0;$X.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];$X.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var zX=L((qX)=>{Object.defineProperty(qX,"__esModule",{value:!0});var $7=CQ(),W7=$8(),J7=e8(),G7=ZX(),GX=JX(),q7=[$7.default,W7.default,J7.default(),G7.default,GX.metadataVocabulary,GX.contentVocabulary];qX.default=q7});var KX=L((FX)=>{Object.defineProperty(FX,"__esModule",{value:!0});FX.DiscrError=void 0;var HX;(function(Q){Q.Tag="tag",Q.Mapping="mapping"})(HX||(FX.DiscrError=HX={}))});var LX=L((VX)=>{Object.defineProperty(VX,"__esModule",{value:!0});var S1=I(),k9=KX(),MX=L0(),H7=h1(),F7=S(),B7={message:({params:{discrError:Q,tagName:X}})=>Q===k9.DiscrError.Tag?`tag "${X}" must be string`:`value of tag "${X}" must be in oneOf`,params:({params:{discrError:Q,tag:X,tagName:Y}})=>S1._`{error: ${Q}, tag: ${Y}, tagValue: ${X}}`},K7={keyword:"discriminator",type:"object",schemaType:"object",error:B7,code(Q){const{gen:X,data:Y,schema:Z,parentSchema:$,it:W}=Q,{oneOf:J}=$;if(!W.opts.discriminator)throw new Error("discriminator: requires discriminator option");const G=Z.propertyName;if(typeof G!="string")throw new Error("discriminator: requires propertyName");if(Z.mapping)throw new Error("discriminator: mapping is not supported");if(!J)throw new Error("discriminator: requires oneOf keyword");const z=X.let("valid",!1),q=X.const("tag",S1._`${Y}${S1.getProperty(G)}`);X.if(S1._`typeof ${q} == "string"`,()=>H(),()=>Q.error(!1,{discrError:k9.DiscrError.Tag,tag:q,tagName:G})),Q.ok(z);function H(){const V=U();X.if(!1);for(let K in V)X.elseIf(S1._`${q} === ${K}`),X.assign(z,F(V[K]));X.else(),Q.error(!1,{discrError:k9.DiscrError.Mapping,tag:q,tagName:G}),X.endIf()}function F(V){const K=X.name("valid"),B=Q.subschema({keyword:"oneOf",schemaProp:V},K);return Q.mergeEvaluated(B,S1.Name),K}function U(){var V;const K={},B=O($);let M=!0;for(let P=0;P<J.length;P++){let D=J[P];if((D===null||D===void 0?void 0:D.$ref)&&!F7.schemaHasRulesButRef(D,W.self.RULES)){const X1=D.$ref;if(D=MX.resolveRef.call(W.self,W.schemaEnv.root,W.baseId,X1),D instanceof MX.SchemaEnv)D=D.schema;if(D===void 0)throw new H7.default(W.opts.uriResolver,W.baseId,X1)}const t=(V=D===null||D===void 0?void 0:D.properties)===null||V===void 0?void 0:V[G];if(typeof t!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${G}"`);M=M&&(B||O(D)),E(t,P)}if(!M)throw new Error(`discriminator: "${G}" must be required`);return K;function O({required:P}){return Array.isArray(P)&&P.includes(G)}function E(P,D){if(P.const)T(P.const,D);else if(P.enum)for(let t of P.enum)T(t,D);else throw new Error(`discriminator: "properties/${G}" must have "const" or "enum"`)}function T(P,D){if(typeof P!="string"||P in K)throw new Error(`discriminator: "${G}" values must be unique strings`);K[P]=D}}}};VX.default=K7});var OX=L((lz,V7)=>{V7.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var jX=L((l,v9)=>{Object.defineProperty(l,"__esModule",{value:!0});l.MissingRefError=l.ValidationError=l.CodeGen=l.Name=l.nil=l.stringify=l.str=l._=l.KeywordCxt=l.Ajv=void 0;var L7=DQ(),O7=zX(),U7=LX(),UX=OX(),j7=["/properties"],f0="http://json-schema.org/draft-07/schema";class e1 extends L7.default{_addVocabularies(){if(super._addVocabularies(),O7.default.forEach((Q)=>this.addVocabulary(Q)),this.opts.discriminator)this.addKeyword(U7.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const Q=this.opts.$data?this.$dataMetaSchema(UX,j7):UX;this.addMetaSchema(Q,f0,!1),this.refs["http://json-schema.org/schema"]=f0}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(f0)?f0:void 0)}}l.Ajv=e1;v9.exports=l=e1;v9.exports.Ajv=e1;Object.defineProperty(l,"__esModule",{value:!0});l.default=e1;var A7=l1();Object.defineProperty(l,"KeywordCxt",{enumerable:!0,get:function(){return A7.KeywordCxt}});var w1=I();Object.defineProperty(l,"_",{enumerable:!0,get:function(){return w1._}});Object.defineProperty(l,"str",{enumerable:!0,get:function(){return w1.str}});Object.defineProperty(l,"stringify",{enumerable:!0,get:function(){return w1.stringify}});Object.defineProperty(l,"nil",{enumerable:!0,get:function(){return w1.nil}});Object.defineProperty(l,"Name",{enumerable:!0,get:function(){return w1.Name}});Object.defineProperty(l,"CodeGen",{enumerable:!0,get:function(){return w1.CodeGen}});var D7=M0();Object.defineProperty(l,"ValidationError",{enumerable:!0,get:function(){return D7.default}});var N7=h1();Object.defineProperty(l,"MissingRefError",{enumerable:!0,get:function(){return N7.default}})});var a={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*","Access-Control-Allow-Credentials":"true"},xX=/^(([^<>()[\]\\.,;:\s@"A-Z]+(\.[^<>()[\]\\.,;:\s@"A-Z]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-z\-0-9]+\.)+[a-z]{2,}))$/,uX=/.*[0-9].*/,u9=(Q)=>xX.exec(Q)?.[0],_9=(Q)=>uX.exec(Q)?.[0],_X=(Q)=>Buffer.from(Q,"base64").toString("utf-8"),g9=(Q)=>{const X=Q.split(".");return JSON.parse(_X(X[1]))},l9=(Q,X)=>{try{return JSON.parse(X)}catch{return Q}};var K1=(Q)=>({statusCode:403,headers:a,body:typeof Q==="string"?Q:JSON.stringify(Q)}),p7=(Q,X,Y)=>K1(`User ${Q} has no ${X} rights on node ${Y}`),o=(Q)=>({statusCode:400,headers:a,body:typeof Q==="string"?Q:JSON.stringify(Q)}),h9=(Q)=>({statusCode:401,headers:a,body:Q?JSON.stringify(Q):"Unauthorized"}),m9=(Q)=>({statusCode:404,headers:a,body:Q?JSON.stringify(Q):"Not Found"}),i9=(Q)=>({statusCode:422,headers:a,body:Q?JSON.stringify(Q):"Unprocessable Entity"}),l0=(Q)=>{if(Q.statusCode)return Q;return console.error(Q),{statusCode:500,headers:a,body:Q.message}};var p9=o({name:"InvalidEmailError",message:"The email must be valid and must not contain upper case letters or spaces."}),d9=o({name:"InvalidPasswordError",message:"The password must contain at least 8 characters and at least 1 number."}),c7=o({name:"InvalidSrpAError",message:"The SRP A value must be a correctly calculated random hex hash based on big integers."}),r7=o({name:"InvalidRefreshTokenError",message:"Refresh token is invalid."}),n9=o({name:"VerificationCodeMismatchError",message:"The verification code does not match."}),c9=K1({name:"VerificationCodeExpiredError",message:"The verification code has exipired. Please retry via Reset Password Init (in case of pasword reset) or Register Verify Resend (in case of register)."}),r9=m9({name:"UserNotFoundError",message:"No user was found under the given email or user ID."}),s9=K1({name:"UserNotVerifiedError",message:"The user must be verified with Register Verify operation."}),s7=K1({name:"UserExistsError",message:"There is an existing user with the given email address."}),t9=o({name:"UserMissingPasswordChallengeError",message:"The user must have an active require password change challenge."}),t7=K1({name:"PasswordResetRequiredError",message:"The password must be reset."}),h0=i9({name:"PasswordResetMissingParamError",message:"Either a verification code or the users old password are required."}),a7=K1({name:"LoginVerifyError",message:"The password could not be verified. Please check password, userId, secretBlock, signature and timestamp."});var a9=process.env.AWS_REGION||"",o9=process.env.ADMIN_EMAILS||"",e7=process.env.CLOUDFRONT_ACCESS_KEY_ID||"",Qq=process.env.CLOUDFRONT_NEW_ACCESS_KEY_PARAMETER||"",Xq=process.env.INVITE_USER_VALIDATION_VIEW||"",Yq=process.env.PULL_LAMBDA_NAME||"",Zq=process.env.MEDIA_DOMAIN||"",p=process.env.CLIENT_ID||"",C1=process.env.USER_POOL_ID||"";var AX=yX(jX(),1);import"aws-lambda";var DX=(Q,X,{auth:Y=!0}={})=>new Promise((Z,$)=>{let W;try{if(Y)W=g9(X.headers.Authorization||X.headers.authorization||"");else W={}}catch(J){$(h9());return}try{const J=l9(X.body||{},X.body||""),G=new AX.Ajv;if(G.addKeyword("example"),G.validate(Q,J)){const q=W.email,H=X.headers["x-as-role"]||"user",F=!!X.headers["x-as-admin"]&&o9.includes(q);Z({userEmail:q,body:J,asAdmin:F,asRole:H})}else $(o(JSON.stringify(G.errors)))}catch(J){$(o(J.message))}});import{AdminCreateUserCommand as b7,AdminDeleteUserCommand as KH,AdminGetUserCommand as E7,AdminInitiateAuthCommand as R7,AdminResetUserPasswordCommand as MH,AdminSetUserPasswordCommand as VH,CognitoIdentityProviderClient as S7,ConfirmForgotPasswordCommand as w7,ConfirmSignUpCommand as P7,ForgotPasswordCommand as C7,InitiateAuthCommand as NX,ListUsersCommand as LH,ResendConfirmationCodeCommand as k7,RespondToAuthChallengeCommand as IX,SignUpCommand as v7} from"@aws-sdk/client-cognito-identity-provider";var TX={name:"UserNotVerifiedError",message:"The user must be verified with Register Verify operation."},i=new S7({region:a9,apiVersion:"latest"}),bX=async(Q,X)=>{const Y=new R7({UserPoolId:C1,ClientId:p,AuthFlow:"ADMIN_USER_PASSWORD_AUTH",AuthParameters:{USERNAME:Q,PASSWORD:X}}),Z=await i.send(Y);return{accessToken:Z?.AuthenticationResult?.AccessToken,expiresIn:Z?.AuthenticationResult?.ExpiresIn,idToken:Z?.AuthenticationResult?.IdToken,refreshToken:Z?.AuthenticationResult?.RefreshToken,session:Z?.Session}};var UH=async(Q,X,Y="default")=>{const Z=new b7({UserPoolId:C1,Username:Q,TemporaryPassword:X,ClientMetadata:{templateId:Y}});return i.send(Z)};var jH=async(Q,X)=>{const Y=new NX({ClientId:p,AuthFlow:"USER_SRP_AUTH",AuthParameters:{USERNAME:Q,SRP_A:X}}),Z=await i.send(Y);return{poolname:C1.split("_")[1],userId:Z?.ChallengeParameters?.USERNAME,srpB:Z?.ChallengeParameters?.SRP_B,secretBlock:Z?.ChallengeParameters?.SECRET_BLOCK,salt:Z?.ChallengeParameters?.SALT}},AH=async(Q,X,Y,Z)=>{const $=new IX({ClientId:p,ChallengeName:"PASSWORD_VERIFIER",ChallengeResponses:{USERNAME:Q,TIMESTAMP:Z,PASSWORD_CLAIM_SECRET_BLOCK:X,PASSWORD_CLAIM_SIGNATURE:Y}}),W=await i.send($);return{accessToken:W?.AuthenticationResult?.AccessToken,expiresIn:W?.AuthenticationResult?.ExpiresIn,idToken:W?.AuthenticationResult?.IdToken,refreshToken:W?.AuthenticationResult?.RefreshToken}},DH=async(Q)=>{const X=new NX({ClientId:p,AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:{REFRESH_TOKEN:Q}}),Y=await i.send(X);return{accessToken:Y?.AuthenticationResult?.AccessToken,expiresIn:Y?.AuthenticationResult?.ExpiresIn,idToken:Y?.AuthenticationResult?.IdToken}},NH=async(Q,X,Y=!1)=>{const Z=new v7({ClientId:p,Username:Q,Password:X,ClientMetadata:{skipMessage:Y?"true":"false"}});return await i.send(Z)},IH=async(Q,X)=>{const Y=new P7({ClientId:p,Username:Q,ConfirmationCode:X});await i.send(Y)},TH=async(Q)=>{const X=new k7({ClientId:p,Username:Q});await i.send(X)},bH=async(Q,X=!1)=>{const Y=new C7({ClientId:p,Username:Q,ClientMetadata:{skipMessage:X?"true":"false"}});try{await i.send(Y)}catch(Z){if(!await SX(Q))throw TX;throw Z}},EX=async(Q,X,Y)=>{const Z=new w7({ClientId:p,Username:Q,Password:X,ConfirmationCode:Y});try{await i.send(Z)}catch($){if(!await SX(Q))throw TX;throw $}},RX=async(Q,X,Y)=>{const Z=new IX({ClientId:p,ChallengeName:"NEW_PASSWORD_REQUIRED",ChallengeResponses:{USERNAME:Q,NEW_PASSWORD:X},Session:Y}),$=await i.send(Z);return{accessToken:$?.AuthenticationResult?.AccessToken,expiresIn:$?.AuthenticationResult?.ExpiresIn,idToken:$?.AuthenticationResult?.IdToken,refreshToken:$?.AuthenticationResult?.RefreshToken}},x0=async(Q)=>{const X=new E7({UserPoolId:C1,Username:Q});return i.send(X)},SX=async(Q)=>{const{UserStatus:X}=await x0(Q);return X==="CONFIRMED"},EH=async(Q)=>{try{return await x0(Q),!0}catch(X){return!1}};var y7=!1,f7={type:"object",properties:{email:{type:"string",description:"E-mail of the user for whom the password is to be reset."},password:{type:"string",description:"New password to be set."},oldPassword:{type:"string",description:"Current password of the user."},verificationCode:{type:"string",description:"Verification code that was sent to the email after Reset Password Init operation."}},required:["email","password"]},x7=async({body:Q})=>{const{email:X,password:Y,oldPassword:Z,verificationCode:$}=Q;if(u9(X)!==X)return p9;if(Y.length<8||_9(Y)!==Y)return d9;if(!Z&&!$)return h0;try{if($)return await EX(X,Y,$),{statusCode:200,headers:a,body:JSON.stringify({message:"Success."})};const{UserStatus:W}=await x0(X);if(W!=="FORCE_CHANGE_PASSWORD")return t9;const{session:J}=await bX(X,Z);if(!J)return h0;const G=await RX(X,Y,J);return{statusCode:200,headers:a,body:JSON.stringify(G)}}catch(W){switch(W.name){case"CodeMismatchException":return n9;case"ExpiredCodeException":return c9;case"UserNotVerifiedError":return s9;case"UserNotFoundException":return r9;default:return l0(W)}}},PH=async(Q)=>{try{const X=await DX(f7,Q,{auth:y7});return await x7(X)}catch(X){return l0(X)}};export{f7 as schema,PH as handleHttp};

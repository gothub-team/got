import{createRequire as XY} from"node:module";var oX=Object.create;var{defineProperty:X9,getPrototypeOf:sX,getOwnPropertyNames:eX}=Object;var QY=Object.prototype.hasOwnProperty;var Y9=(Q,X,Y)=>{Y=Q!=null?oX(sX(Q)):{};const $=X||!Q||!Q.__esModule?X9(Y,"default",{value:Q,enumerable:!0}):Y;for(let Z of eX(Q))if(!QY.call($,Z))X9($,Z,{get:()=>Q[Z],enumerable:!0});return $};var O=(Q,X)=>()=>(X||Q((X={exports:{}}).exports,X),X.exports);var z1=XY(import.meta.url);var l0=O((O9)=>{var K9=function(Q,...X){const Y=[Q[0]];let $=0;while($<X.length)Y6(Y,X[$]),Y.push(Q[++$]);return new a(Y)},M9=function(Q,...X){const Y=[_0(Q[0])];let $=0;while($<X.length)Y.push(X6),Y6(Y,X[$]),Y.push(X6,_0(Q[++$]));return JY(Y),new a(Y)},Y6=function(Q,X){if(X instanceof a)Q.push(...X._items);else if(X instanceof E0)Q.push(X);else Q.push(zY(X))},JY=function(Q){let X=1;while(X<Q.length-1){if(Q[X]===X6){const Y=WY(Q[X-1],Q[X+1]);if(Y!==void 0){Q.splice(X-1,3,Y);continue}Q[X++]="+"}X++}},WY=function(Q,X){if(X==='""')return Q;if(Q==='""')return X;if(typeof Q=="string"){if(X instanceof E0||Q[Q.length-1]!=='"')return;if(typeof X!="string")return`${Q.slice(0,-1)}${X}"`;if(X[0]==='"')return Q.slice(0,-1)+X.slice(1);return}if(typeof X=="string"&&X[0]==='"'&&!(Q instanceof E0))return`"${Q}${X.slice(1)}`;return},GY=function(Q,X){return X.emptyStr()?Q:Q.emptyStr()?X:M9`${Q}${X}`},zY=function(Q){return typeof Q=="number"||typeof Q=="boolean"||Q===null?Q:_0(Array.isArray(Q)?Q.join(","):Q)},FY=function(Q){return new a(_0(Q))},_0=function(Q){return JSON.stringify(Q).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},qY=function(Q){return typeof Q=="string"&&O9.IDENTIFIER.test(Q)?new a(`.${Q}`):K9`[${Q}]`},HY=function(Q){if(typeof Q=="string"&&O9.IDENTIFIER.test(Q))return new a(`${Q}`);throw new Error(`CodeGen: invalid export name: ${Q}, use explicit \$id name mapping`)},KY=function(Q){return new a(Q.toString())};Object.defineProperty(O9,"__esModule",{value:!0});O9.regexpCode=O9.getEsmExportName=O9.getProperty=O9.safeStringify=O9.stringify=O9.strConcat=O9.addCodeArg=O9.str=O9._=O9.nil=O9._Code=O9.Name=O9.IDENTIFIER=O9._CodeOrName=void 0;class H1{}O9._CodeOrName=H1;O9.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class E0 extends H1{constructor(Q){super();if(!O9.IDENTIFIER.test(Q))throw new Error("CodeGen: name must be a valid identifier");this.str=Q}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}O9.Name=E0;class a extends H1{constructor(Q){super();this._items=typeof Q==="string"?[Q]:Q}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const Q=this._items[0];return Q===""||Q==='""'}get str(){var Q;return(Q=this._str)!==null&&Q!==void 0?Q:this._str=this._items.reduce((X,Y)=>`${X}${Y}`,"")}get names(){var Q;return(Q=this._names)!==null&&Q!==void 0?Q:this._names=this._items.reduce((X,Y)=>{if(Y instanceof E0)X[Y.str]=(X[Y.str]||0)+1;return X},{})}}O9._Code=a;O9.nil=new a("");O9._=K9;var X6=new a("+");O9.str=M9;O9.addCodeArg=Y6;O9.strConcat=GY;O9.stringify=FY;O9.safeStringify=_0;O9.getProperty=qY;O9.getEsmExportName=HY;O9.regexpCode=KY});var W6=O((L9)=>{Object.defineProperty(L9,"__esModule",{value:!0});L9.ValueScope=L9.ValueScopeName=L9.Scope=L9.varKinds=L9.UsedValueState=void 0;var g=l0();class j9 extends Error{constructor(Q){super(`CodeGen: "code" for ${Q} not defined`);this.value=Q.value}}var M1;(function(Q){Q[Q.Started=0]="Started",Q[Q.Completed=1]="Completed"})(M1||(L9.UsedValueState=M1={}));L9.varKinds={const:new g.Name("const"),let:new g.Name("let"),var:new g.Name("var")};class Z6{constructor({prefixes:Q,parent:X}={}){this._names={},this._prefixes=Q,this._parent=X}toName(Q){return Q instanceof g.Name?Q:this.name(Q)}name(Q){return new g.Name(this._newName(Q))}_newName(Q){const X=this._names[Q]||this._nameGroup(Q);return`${Q}${X.index++}`}_nameGroup(Q){var X,Y;if(((Y=(X=this._parent)===null||X===void 0?void 0:X._prefixes)===null||Y===void 0?void 0:Y.has(Q))||this._prefixes&&!this._prefixes.has(Q))throw new Error(`CodeGen: prefix "${Q}" is not allowed in this scope`);return this._names[Q]={prefix:Q,index:0}}}L9.Scope=Z6;class J6 extends g.Name{constructor(Q,X){super(X);this.prefix=Q}setValue(Q,{property:X,itemIndex:Y}){this.value=Q,this.scopePath=g._`.${new g.Name(X)}[${Y}]`}}L9.ValueScopeName=J6;var PY=g._`\n`;class A9 extends Z6{constructor(Q){super(Q);this._values={},this._scope=Q.scope,this.opts={...Q,_n:Q.lines?PY:g.nil}}get(){return this._scope}name(Q){return new J6(Q,this._newName(Q))}value(Q,X){var Y;if(X.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const $=this.toName(Q),{prefix:Z}=$,J=(Y=X.key)!==null&&Y!==void 0?Y:X.ref;let W=this._values[Z];if(W){const z=W.get(J);if(z)return z}else W=this._values[Z]=new Map;W.set(J,$);const G=this._scope[Z]||(this._scope[Z]=[]),F=G.length;return G[F]=X.ref,$.setValue(X,{property:Z,itemIndex:F}),$}getValue(Q,X){const Y=this._values[Q];if(!Y)return;return Y.get(X)}scopeRefs(Q,X=this._values){return this._reduceValues(X,(Y)=>{if(Y.scopePath===void 0)throw new Error(`CodeGen: name "${Y}" has no value`);return g._`${Q}${Y.scopePath}`})}scopeCode(Q=this._values,X,Y){return this._reduceValues(Q,($)=>{if($.value===void 0)throw new Error(`CodeGen: name "${$}" has no value`);return $.value.code},X,Y)}_reduceValues(Q,X,Y={},$){let Z=g.nil;for(let J in Q){const W=Q[J];if(!W)continue;const G=Y[J]=Y[J]||new Map;W.forEach((F)=>{if(G.has(F))return;G.set(F,M1.Started);let z=X(F);if(z){const q=this.opts.es5?L9.varKinds.var:L9.varKinds.const;Z=g._`${Z}${q} ${F} = ${z};${this.opts._n}`}else if(z=$===null||$===void 0?void 0:$(F))Z=g._`${Z}${z}${this.opts._n}`;else throw new j9(F);G.set(F,M1.Completed)})}return Z}}L9.ValueScope=A9});var I=O((h)=>{var D0=function(Q,X){for(let Y in X)Q[Y]=(Q[Y]||0)+(X[Y]||0);return Q},L1=function(Q,X){return X instanceof P._CodeOrName?D0(Q,X.names):Q},S0=function(Q,X,Y){if(Q instanceof P.Name)return $(Q);if(!Z(Q))return Q;return new P._Code(Q._items.reduce((J,W)=>{if(W instanceof P.Name)W=$(W);if(W instanceof P._Code)J.push(...W._items);else J.push(W);return J},[]));function $(J){const W=Y[J.str];if(W===void 0||X[J.str]!==1)return J;return delete X[J.str],W}function Z(J){return J instanceof P._Code&&J._items.some((W)=>W instanceof P.Name&&X[W.str]===1&&Y[W.str]!==void 0)}},wY=function(Q,X){for(let Y in X)Q[Y]=(Q[Y]||0)-(X[Y]||0)},C9=function(Q){return typeof Q=="boolean"||typeof Q=="number"||Q===null?!Q:P._`!${z6(Q)}`},CY=function(...Q){return Q.reduce(bY)},vY=function(...Q){return Q.reduce(kY)},k9=function(Q){return(X,Y)=>X===P.nil?Y:Y===P.nil?X:P._`${z6(X)} ${Q} ${z6(Y)}`},z6=function(Q){return Q instanceof P.Name?Q:P._`(${Q})`};Object.defineProperty(h,"__esModule",{value:!0});h.or=h.and=h.not=h.CodeGen=h.operators=h.varKinds=h.ValueScopeName=h.ValueScope=h.Scope=h.Name=h.regexpCode=h.stringify=h.getProperty=h.nil=h.strConcat=h.str=h._=void 0;var P=l0(),t=W6(),M0=l0();Object.defineProperty(h,"_",{enumerable:!0,get:function(){return M0._}});Object.defineProperty(h,"str",{enumerable:!0,get:function(){return M0.str}});Object.defineProperty(h,"strConcat",{enumerable:!0,get:function(){return M0.strConcat}});Object.defineProperty(h,"nil",{enumerable:!0,get:function(){return M0.nil}});Object.defineProperty(h,"getProperty",{enumerable:!0,get:function(){return M0.getProperty}});Object.defineProperty(h,"stringify",{enumerable:!0,get:function(){return M0.stringify}});Object.defineProperty(h,"regexpCode",{enumerable:!0,get:function(){return M0.regexpCode}});Object.defineProperty(h,"Name",{enumerable:!0,get:function(){return M0.Name}});var U1=W6();Object.defineProperty(h,"Scope",{enumerable:!0,get:function(){return U1.Scope}});Object.defineProperty(h,"ValueScope",{enumerable:!0,get:function(){return U1.ValueScope}});Object.defineProperty(h,"ValueScopeName",{enumerable:!0,get:function(){return U1.ValueScopeName}});Object.defineProperty(h,"varKinds",{enumerable:!0,get:function(){return U1.varKinds}});h.operators={GT:new P._Code(">"),GTE:new P._Code(">="),LT:new P._Code("<"),LTE:new P._Code("<="),EQ:new P._Code("==="),NEQ:new P._Code("!=="),NOT:new P._Code("!"),OR:new P._Code("||"),AND:new P._Code("&&"),ADD:new P._Code("+")};class O0{optimizeNodes(){return this}optimizeNames(Q,X){return this}}class D9 extends O0{constructor(Q,X,Y){super();this.varKind=Q,this.name=X,this.rhs=Y}render({es5:Q,_n:X}){const Y=Q?t.varKinds.var:this.varKind,$=this.rhs===void 0?"":` = ${this.rhs}`;return`${Y} ${this.name}${$};`+X}optimizeNames(Q,X){if(!Q[this.name.str])return;if(this.rhs)this.rhs=S0(this.rhs,Q,X);return this}get names(){return this.rhs instanceof P._CodeOrName?this.rhs.names:{}}}class F6 extends O0{constructor(Q,X,Y){super();this.lhs=Q,this.rhs=X,this.sideEffects=Y}render({_n:Q}){return`${this.lhs} = ${this.rhs};`+Q}optimizeNames(Q,X){if(this.lhs instanceof P.Name&&!Q[this.lhs.str]&&!this.sideEffects)return;return this.rhs=S0(this.rhs,Q,X),this}get names(){const Q=this.lhs instanceof P.Name?{}:{...this.lhs.names};return L1(Q,this.rhs)}}class N9 extends F6{constructor(Q,X,Y,$){super(Q,Y,$);this.op=X}render({_n:Q}){return`${this.lhs} ${this.op}= ${this.rhs};`+Q}}class B9 extends O0{constructor(Q){super();this.label=Q,this.names={}}render({_n:Q}){return`${this.label}:`+Q}}class I9 extends O0{constructor(Q){super();this.label=Q,this.names={}}render({_n:Q}){return`break${this.label?` ${this.label}`:""};`+Q}}class T9 extends O0{constructor(Q){super();this.error=Q}render({_n:Q}){return`throw ${this.error};`+Q}get names(){return this.error.names}}class P9 extends O0{constructor(Q){super();this.code=Q}render({_n:Q}){return`${this.code};`+Q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(Q,X){return this.code=S0(this.code,Q,X),this}get names(){return this.code instanceof P._CodeOrName?this.code.names:{}}}class D1 extends O0{constructor(Q=[]){super();this.nodes=Q}render(Q){return this.nodes.reduce((X,Y)=>X+Y.render(Q),"")}optimizeNodes(){const{nodes:Q}=this;let X=Q.length;while(X--){const Y=Q[X].optimizeNodes();if(Array.isArray(Y))Q.splice(X,1,...Y);else if(Y)Q[X]=Y;else Q.splice(X,1)}return Q.length>0?this:void 0}optimizeNames(Q,X){const{nodes:Y}=this;let $=Y.length;while($--){const Z=Y[$];if(Z.optimizeNames(Q,X))continue;wY(Q,Z.names),Y.splice($,1)}return Y.length>0?this:void 0}get names(){return this.nodes.reduce((Q,X)=>D0(Q,X.names),{})}}class V0 extends D1{render(Q){return"{"+Q._n+super.render(Q)+"}"+Q._n}}class E9 extends D1{}class g0 extends V0{}g0.kind="else";class G0 extends V0{constructor(Q,X){super(X);this.condition=Q}render(Q){let X=`if(${this.condition})`+super.render(Q);if(this.else)X+="else "+this.else.render(Q);return X}optimizeNodes(){super.optimizeNodes();const Q=this.condition;if(Q===!0)return this.nodes;let X=this.else;if(X){const Y=X.optimizeNodes();X=this.else=Array.isArray(Y)?new g0(Y):Y}if(X){if(Q===!1)return X instanceof G0?X:X.nodes;if(this.nodes.length)return this;return new G0(C9(Q),X instanceof G0?[X]:X.nodes)}if(Q===!1||!this.nodes.length)return;return this}optimizeNames(Q,X){var Y;if(this.else=(Y=this.else)===null||Y===void 0?void 0:Y.optimizeNames(Q,X),!(super.optimizeNames(Q,X)||this.else))return;return this.condition=S0(this.condition,Q,X),this}get names(){const Q=super.names;if(L1(Q,this.condition),this.else)D0(Q,this.else.names);return Q}}G0.kind="if";class R0 extends V0{}R0.kind="for";class R9 extends R0{constructor(Q){super();this.iteration=Q}render(Q){return`for(${this.iteration})`+super.render(Q)}optimizeNames(Q,X){if(!super.optimizeNames(Q,X))return;return this.iteration=S0(this.iteration,Q,X),this}get names(){return D0(super.names,this.iteration.names)}}class S9 extends R0{constructor(Q,X,Y,$){super();this.varKind=Q,this.name=X,this.from=Y,this.to=$}render(Q){const X=Q.es5?t.varKinds.var:this.varKind,{name:Y,from:$,to:Z}=this;return`for(${X} ${Y}=${$}; ${Y}<${Z}; ${Y}++)`+super.render(Q)}get names(){const Q=L1(super.names,this.from);return L1(Q,this.to)}}class G6 extends R0{constructor(Q,X,Y,$){super();this.loop=Q,this.varKind=X,this.name=Y,this.iterable=$}render(Q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(Q)}optimizeNames(Q,X){if(!super.optimizeNames(Q,X))return;return this.iterable=S0(this.iterable,Q,X),this}get names(){return D0(super.names,this.iterable.names)}}class O1 extends V0{constructor(Q,X,Y){super();this.name=Q,this.args=X,this.async=Y}render(Q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(Q)}}O1.kind="func";class V1 extends D1{render(Q){return"return "+super.render(Q)}}V1.kind="return";class w9 extends V0{render(Q){let X="try"+super.render(Q);if(this.catch)X+=this.catch.render(Q);if(this.finally)X+=this.finally.render(Q);return X}optimizeNodes(){var Q,X;return super.optimizeNodes(),(Q=this.catch)===null||Q===void 0||Q.optimizeNodes(),(X=this.finally)===null||X===void 0||X.optimizeNodes(),this}optimizeNames(Q,X){var Y,$;return super.optimizeNames(Q,X),(Y=this.catch)===null||Y===void 0||Y.optimizeNames(Q,X),($=this.finally)===null||$===void 0||$.optimizeNames(Q,X),this}get names(){const Q=super.names;if(this.catch)D0(Q,this.catch.names);if(this.finally)D0(Q,this.finally.names);return Q}}class j1 extends V0{constructor(Q){super();this.error=Q}render(Q){return`catch(${this.error})`+super.render(Q)}}j1.kind="catch";class A1 extends V0{render(Q){return"finally"+super.render(Q)}}A1.kind="finally";class b9{constructor(Q,X={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...X,_n:X.lines?"\n":""},this._extScope=Q,this._scope=new t.Scope({parent:Q}),this._nodes=[new E9]}toString(){return this._root.render(this.opts)}name(Q){return this._scope.name(Q)}scopeName(Q){return this._extScope.name(Q)}scopeValue(Q,X){const Y=this._extScope.value(Q,X);return(this._values[Y.prefix]||(this._values[Y.prefix]=new Set)).add(Y),Y}getScopeValue(Q,X){return this._extScope.getValue(Q,X)}scopeRefs(Q){return this._extScope.scopeRefs(Q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(Q,X,Y,$){const Z=this._scope.toName(X);if(Y!==void 0&&$)this._constants[Z.str]=Y;return this._leafNode(new D9(Q,Z,Y)),Z}const(Q,X,Y){return this._def(t.varKinds.const,Q,X,Y)}let(Q,X,Y){return this._def(t.varKinds.let,Q,X,Y)}var(Q,X,Y){return this._def(t.varKinds.var,Q,X,Y)}assign(Q,X,Y){return this._leafNode(new F6(Q,X,Y))}add(Q,X){return this._leafNode(new N9(Q,h.operators.ADD,X))}code(Q){if(typeof Q=="function")Q();else if(Q!==P.nil)this._leafNode(new P9(Q));return this}object(...Q){const X=["{"];for(let[Y,$]of Q){if(X.length>1)X.push(",");if(X.push(Y),Y!==$||this.opts.es5)X.push(":"),P.addCodeArg(X,$)}return X.push("}"),new P._Code(X)}if(Q,X,Y){if(this._blockNode(new G0(Q)),X&&Y)this.code(X).else().code(Y).endIf();else if(X)this.code(X).endIf();else if(Y)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(Q){return this._elseNode(new G0(Q))}else(){return this._elseNode(new g0)}endIf(){return this._endBlockNode(G0,g0)}_for(Q,X){if(this._blockNode(Q),X)this.code(X).endFor();return this}for(Q,X){return this._for(new R9(Q),X)}forRange(Q,X,Y,$,Z=this.opts.es5?t.varKinds.var:t.varKinds.let){const J=this._scope.toName(Q);return this._for(new S9(Z,J,X,Y),()=>$(J))}forOf(Q,X,Y,$=t.varKinds.const){const Z=this._scope.toName(Q);if(this.opts.es5){const J=X instanceof P.Name?X:this.var("_arr",X);return this.forRange("_i",0,P._`${J}.length`,(W)=>{this.var(Z,P._`${J}[${W}]`),Y(Z)})}return this._for(new G6("of",$,Z,X),()=>Y(Z))}forIn(Q,X,Y,$=this.opts.es5?t.varKinds.var:t.varKinds.const){if(this.opts.ownProperties)return this.forOf(Q,P._`Object.keys(${X})`,Y);const Z=this._scope.toName(Q);return this._for(new G6("in",$,Z,X),()=>Y(Z))}endFor(){return this._endBlockNode(R0)}label(Q){return this._leafNode(new B9(Q))}break(Q){return this._leafNode(new I9(Q))}return(Q){const X=new V1;if(this._blockNode(X),this.code(Q),X.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(V1)}try(Q,X,Y){if(!X&&!Y)throw new Error('CodeGen: "try" without "catch" and "finally"');const $=new w9;if(this._blockNode($),this.code(Q),X){const Z=this.name("e");this._currNode=$.catch=new j1(Z),X(Z)}if(Y)this._currNode=$.finally=new A1,this.code(Y);return this._endBlockNode(j1,A1)}throw(Q){return this._leafNode(new T9(Q))}block(Q,X){if(this._blockStarts.push(this._nodes.length),Q)this.code(Q).endBlock(X);return this}endBlock(Q){const X=this._blockStarts.pop();if(X===void 0)throw new Error("CodeGen: not in self-balancing block");const Y=this._nodes.length-X;if(Y<0||Q!==void 0&&Y!==Q)throw new Error(`CodeGen: wrong number of nodes: ${Y} vs ${Q} expected`);return this._nodes.length=X,this}func(Q,X=P.nil,Y,$){if(this._blockNode(new O1(Q,X,Y)),$)this.code($).endFunc();return this}endFunc(){return this._endBlockNode(O1)}optimize(Q=1){while(Q-- >0)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(Q){return this._currNode.nodes.push(Q),this}_blockNode(Q){this._currNode.nodes.push(Q),this._nodes.push(Q)}_endBlockNode(Q,X){const Y=this._currNode;if(Y instanceof Q||X&&Y instanceof X)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${X?`${Q.kind}/${X.kind}`:Q.kind}"`)}_elseNode(Q){const X=this._currNode;if(!(X instanceof G0))throw new Error('CodeGen: "else" without "if"');return this._currNode=X.else=Q,this}get _root(){return this._nodes[0]}get _currNode(){const Q=this._nodes;return Q[Q.length-1]}set _currNode(Q){const X=this._nodes;X[X.length-1]=Q}}h.CodeGen=b9;h.not=C9;var bY=k9(h.operators.AND);h.and=CY;var kY=k9(h.operators.OR);h.or=vY});var S=O((h9)=>{var _Y=function(Q){const X={};for(let Y of Q)X[Y]=!0;return X},lY=function(Q,X){if(typeof X=="boolean")return X;if(Object.keys(X).length===0)return!0;return y9(Q,X),!x9(X,Q.self.RULES.all)},y9=function(Q,X=Q.schema){const{opts:Y,self:$}=Q;if(!Y.strictSchema)return;if(typeof X==="boolean")return;const Z=$.RULES.keywords;for(let J in X)if(!Z[J])g9(Q,`unknown keyword: "${J}"`)},x9=function(Q,X){if(typeof Q=="boolean")return!Q;for(let Y in Q)if(X[Y])return!0;return!1},gY=function(Q,X){if(typeof Q=="boolean")return!Q;for(let Y in Q)if(Y!=="$ref"&&X.all[Y])return!0;return!1},hY=function({topSchemaRef:Q,schemaPath:X},Y,$,Z){if(!Z){if(typeof Y=="number"||typeof Y=="boolean")return Y;if(typeof Y=="string")return w._`${Y}`}return w._`${Q}${X}${w.getProperty($)}`},mY=function(Q){return _9(decodeURIComponent(Q))},pY=function(Q){return encodeURIComponent(H6(Q))},H6=function(Q){if(typeof Q=="number")return`${Q}`;return Q.replace(/~/g,"~0").replace(/\//g,"~1")},_9=function(Q){return Q.replace(/~1/g,"/").replace(/~0/g,"~")},iY=function(Q,X){if(Array.isArray(Q))for(let Y of Q)X(Y);else X(Q)},f9=function({mergeNames:Q,mergeToName:X,mergeValues:Y,resultToName:$}){return(Z,J,W,G)=>{const F=W===void 0?J:W instanceof w.Name?(J instanceof w.Name?Q(Z,J,W):X(Z,J,W),W):J instanceof w.Name?(X(Z,W,J),J):Y(J,W);return G===w.Name&&!(F instanceof w.Name)?$(Z,F):F}},l9=function(Q,X){if(X===!0)return Q.var("props",!0);const Y=Q.var("props",w._`{}`);if(X!==void 0)K6(Q,Y,X);return Y},K6=function(Q,X,Y){Object.keys(Y).forEach(($)=>Q.assign(w._`${X}${w.getProperty($)}`,!0))},dY=function(Q,X){return Q.scopeValue("func",{ref:X,code:u9[X.code]||(u9[X.code]=new xY._Code(X.code))})},nY=function(Q,X,Y){if(Q instanceof w.Name){const $=X===q6.Num;return Y?$?w._`"[" + ${Q} + "]"`:w._`"['" + ${Q} + "']"`:$?w._`"/" + ${Q}`:w._`"/" + ${Q}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return Y?w.getProperty(Q).toString():"/"+H6(Q)},g9=function(Q,X,Y=Q.opts.strictSchema){if(!Y)return;if(X=`strict mode: ${X}`,Y===!0)throw new Error(X);Q.self.logger.warn(X)};Object.defineProperty(h9,"__esModule",{value:!0});h9.checkStrictMode=h9.getErrorPath=h9.Type=h9.useFunc=h9.setEvaluated=h9.evaluatedPropsToName=h9.mergeEvaluated=h9.eachItem=h9.unescapeJsonPointer=h9.escapeJsonPointer=h9.escapeFragment=h9.unescapeFragment=h9.schemaRefOrVal=h9.schemaHasRulesButRef=h9.schemaHasRules=h9.checkUnknownRules=h9.alwaysValidSchema=h9.toHash=void 0;var w=I(),xY=l0();h9.toHash=_Y;h9.alwaysValidSchema=lY;h9.checkUnknownRules=y9;h9.schemaHasRules=x9;h9.schemaHasRulesButRef=gY;h9.schemaRefOrVal=hY;h9.unescapeFragment=mY;h9.escapeFragment=pY;h9.escapeJsonPointer=H6;h9.unescapeJsonPointer=_9;h9.eachItem=iY;h9.mergeEvaluated={props:f9({mergeNames:(Q,X,Y)=>Q.if(w._`${Y} !== true && ${X} !== undefined`,()=>{Q.if(w._`${X} === true`,()=>Q.assign(Y,!0),()=>Q.assign(Y,w._`${Y} || {}`).code(w._`Object.assign(${Y}, ${X})`))}),mergeToName:(Q,X,Y)=>Q.if(w._`${Y} !== true`,()=>{if(X===!0)Q.assign(Y,!0);else Q.assign(Y,w._`${Y} || {}`),K6(Q,Y,X)}),mergeValues:(Q,X)=>Q===!0?!0:{...Q,...X},resultToName:l9}),items:f9({mergeNames:(Q,X,Y)=>Q.if(w._`${Y} !== true && ${X} !== undefined`,()=>Q.assign(Y,w._`${X} === true ? true : ${Y} > ${X} ? ${Y} : ${X}`)),mergeToName:(Q,X,Y)=>Q.if(w._`${Y} !== true`,()=>Q.assign(Y,X===!0?!0:w._`${Y} > ${X} ? ${Y} : ${X}`)),mergeValues:(Q,X)=>Q===!0?!0:Math.max(Q,X),resultToName:(Q,X)=>Q.var("items",X)})};h9.evaluatedPropsToName=l9;h9.setEvaluated=K6;var u9={};h9.useFunc=dY;var q6;(function(Q){Q[Q.Num=0]="Num",Q[Q.Str=1]="Str"})(q6||(h9.Type=q6={}));h9.getErrorPath=nY;h9.checkStrictMode=g9});var z0=O((p9)=>{Object.defineProperty(p9,"__esModule",{value:!0});var u=I(),q$={data:new u.Name("data"),valCxt:new u.Name("valCxt"),instancePath:new u.Name("instancePath"),parentData:new u.Name("parentData"),parentDataProperty:new u.Name("parentDataProperty"),rootData:new u.Name("rootData"),dynamicAnchors:new u.Name("dynamicAnchors"),vErrors:new u.Name("vErrors"),errors:new u.Name("errors"),this:new u.Name("this"),self:new u.Name("self"),scope:new u.Name("scope"),json:new u.Name("json"),jsonPos:new u.Name("jsonPos"),jsonLen:new u.Name("jsonLen"),jsonPart:new u.Name("jsonPart")};p9.default=q$});var h0=O((c9)=>{var K$=function(Q,X=c9.keywordError,Y,$){const{it:Z}=Q,{gen:J,compositeRule:W,allErrors:G}=Z,F=n9(Q,X,Y);if($!==null&&$!==void 0?$:W||G)i9(J,F);else d9(Z,R._`[${F}]`)},M$=function(Q,X=c9.keywordError,Y){const{it:$}=Q,{gen:Z,compositeRule:J,allErrors:W}=$,G=n9(Q,X,Y);if(i9(Z,G),!(J||W))d9($,x.default.vErrors)},O$=function(Q,X){Q.assign(x.default.errors,X),Q.if(R._`${x.default.vErrors} !== null`,()=>Q.if(X,()=>Q.assign(R._`${x.default.vErrors}.length`,X),()=>Q.assign(x.default.vErrors,null)))},V$=function({gen:Q,keyword:X,schemaValue:Y,data:$,errsCount:Z,it:J}){if(Z===void 0)throw new Error("ajv implementation error");const W=Q.name("err");Q.forRange("i",Z,x.default.errors,(G)=>{if(Q.const(W,R._`${x.default.vErrors}[${G}]`),Q.if(R._`${W}.instancePath === undefined`,()=>Q.assign(R._`${W}.instancePath`,R.strConcat(x.default.instancePath,J.errorPath))),Q.assign(R._`${W}.schemaPath`,R.str`${J.errSchemaPath}/${X}`),J.opts.verbose)Q.assign(R._`${W}.schema`,Y),Q.assign(R._`${W}.data`,$)})},i9=function(Q,X){const Y=Q.const("err",X);Q.if(R._`${x.default.vErrors} === null`,()=>Q.assign(x.default.vErrors,R._`[${Y}]`),R._`${x.default.vErrors}.push(${Y})`),Q.code(R._`${x.default.errors}++`)},d9=function(Q,X){const{gen:Y,validateName:$,schemaEnv:Z}=Q;if(Z.$async)Y.throw(R._`new ${Q.ValidationError}(${X})`);else Y.assign(R._`${$}.errors`,X),Y.return(!1)},n9=function(Q,X,Y){const{createErrors:$}=Q.it;if($===!1)return R._`{}`;return j$(Q,X,Y)},j$=function(Q,X,Y={}){const{gen:$,it:Z}=Q,J=[A$(Z,Y),L$(Q,Y)];return U$(Q,X,J),$.object(...J)},A$=function({errorPath:Q},{instancePath:X}){const Y=X?R.str`${Q}${B1.getErrorPath(X,B1.Type.Str)}`:Q;return[x.default.instancePath,R.strConcat(x.default.instancePath,Y)]},L$=function({keyword:Q,it:{errSchemaPath:X}},{schemaPath:Y,parentSchema:$}){let Z=$?X:R.str`${X}/${Q}`;if(Y)Z=R.str`${Z}${B1.getErrorPath(Y,B1.Type.Str)}`;return[N0.schemaPath,Z]},U$=function(Q,{params:X,message:Y},$){const{keyword:Z,data:J,schemaValue:W,it:G}=Q,{opts:F,propertyName:z,topSchemaRef:q,schemaPath:H}=G;if($.push([N0.keyword,Z],[N0.params,typeof X=="function"?X(Q):X||R._`{}`]),F.messages)$.push([N0.message,typeof Y=="function"?Y(Q):Y]);if(F.verbose)$.push([N0.schema,W],[N0.parentSchema,R._`${q}${H}`],[x.default.data,J]);if(z)$.push([N0.propertyName,z])};Object.defineProperty(c9,"__esModule",{value:!0});c9.extendErrors=c9.resetErrorsCount=c9.reportExtraError=c9.reportError=c9.keyword$DataError=c9.keywordError=void 0;var R=I(),B1=S(),x=z0();c9.keywordError={message:({keyword:Q})=>R.str`must pass "${Q}" keyword validation`};c9.keyword$DataError={message:({keyword:Q,schemaType:X})=>X?R.str`"${Q}" keyword must be ${X} ($data)`:R.str`"${Q}" keyword is invalid ($data)`};c9.reportError=K$;c9.reportExtraError=M$;c9.resetErrorsCount=O$;c9.extendErrors=V$;var N0={keyword:new R.Name("keyword"),schemaPath:new R.Name("schemaPath"),params:new R.Name("params"),propertyName:new R.Name("propertyName"),message:new R.Name("message"),schema:new R.Name("schema"),parentSchema:new R.Name("parentSchema")}});var s9=O((t9)=>{var S$=function(Q){const{gen:X,schema:Y,validateName:$}=Q;if(Y===!1)a9(Q,!1);else if(typeof Y=="object"&&Y.$async===!0)X.return(E$.default.data);else X.assign(P$._`${$}.errors`,null),X.return(!0)},w$=function(Q,X){const{gen:Y,schema:$}=Q;if($===!1)Y.var(X,!1),a9(Q);else Y.var(X,!0)},a9=function(Q,X){const{gen:Y,data:$}=Q,Z={gen:Y,keyword:"false schema",data:$,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:Q};T$.reportError(Z,R$,void 0,X)};Object.defineProperty(t9,"__esModule",{value:!0});t9.boolOrEmptySchema=t9.topBoolOrEmptySchema=void 0;var T$=h0(),P$=I(),E$=z0(),R$={message:"boolean schema is false"};t9.topBoolOrEmptySchema=S$;t9.boolOrEmptySchema=w$});var O6=O((e9)=>{var v$=function(Q){return typeof Q=="string"&&k$.has(Q)},f$=function(){const Q={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...Q,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},Q.number,Q.string,Q.array,Q.object],post:{rules:[]},all:{},keywords:{}}};Object.defineProperty(e9,"__esModule",{value:!0});e9.getRules=e9.isJSONType=void 0;var C$=["string","number","integer","boolean","null","object","array"],k$=new Set(C$);e9.isJSONType=v$;e9.getRules=f$});var V6=O(($4)=>{var y$=function({schema:Q,self:X},Y){const $=X.RULES.types[Y];return $&&$!==!0&&X4(Q,$)},X4=function(Q,X){return X.rules.some((Y)=>Y4(Q,Y))},Y4=function(Q,X){var Y;return Q[X.keyword]!==void 0||((Y=X.definition.implements)===null||Y===void 0?void 0:Y.some(($)=>Q[$]!==void 0))};Object.defineProperty($4,"__esModule",{value:!0});$4.shouldUseRule=$4.shouldUseGroup=$4.schemaHasRulesForType=void 0;$4.schemaHasRulesForType=y$;$4.shouldUseGroup=X4;$4.shouldUseRule=Y4});var m0=O((z4)=>{var m$=function(Q){const X=W4(Q.type);if(X.includes("null")){if(Q.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!X.length&&Q.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');if(Q.nullable===!0)X.push("null")}return X},W4=function(Q){const X=Array.isArray(Q)?Q:Q?[Q]:[];if(X.every(l$.isJSONType))return X;throw new Error("type must be JSONType or JSONType[]: "+X.join(","))},p$=function(Q,X){const{gen:Y,data:$,opts:Z}=Q,J=i$(X,Z.coerceTypes),W=X.length>0&&!(J.length===0&&X.length===1&&g$.schemaHasRulesForType(Q,X[0]));if(W){const G=A6(X,$,Z.strictNumbers,w0.Wrong);Y.if(G,()=>{if(J.length)d$(Q,X,J);else L6(Q)})}return W},i$=function(Q,X){return X?Q.filter((Y)=>G4.has(Y)||X==="array"&&Y==="array"):[]},d$=function(Q,X,Y){const{gen:$,data:Z,opts:J}=Q,W=$.let("dataType",B._`typeof ${Z}`),G=$.let("coerced",B._`undefined`);if(J.coerceTypes==="array")$.if(B._`${W} == 'object' && Array.isArray(${Z}) && ${Z}.length == 1`,()=>$.assign(Z,B._`${Z}[0]`).assign(W,B._`typeof ${Z}`).if(A6(X,Z,J.strictNumbers),()=>$.assign(G,Z)));$.if(B._`${G} !== undefined`);for(let z of Y)if(G4.has(z)||z==="array"&&J.coerceTypes==="array")F(z);$.else(),L6(Q),$.endIf(),$.if(B._`${G} !== undefined`,()=>{$.assign(Z,G),n$(Q,G)});function F(z){switch(z){case"string":$.elseIf(B._`${W} == "number" || ${W} == "boolean"`).assign(G,B._`"" + ${Z}`).elseIf(B._`${Z} === null`).assign(G,B._`""`);return;case"number":$.elseIf(B._`${W} == "boolean" || ${Z} === null
              || (${W} == "string" && ${Z} && ${Z} == +${Z})`).assign(G,B._`+${Z}`);return;case"integer":$.elseIf(B._`${W} === "boolean" || ${Z} === null
              || (${W} === "string" && ${Z} && ${Z} == +${Z} && !(${Z} % 1))`).assign(G,B._`+${Z}`);return;case"boolean":$.elseIf(B._`${Z} === "false" || ${Z} === 0 || ${Z} === null`).assign(G,!1).elseIf(B._`${Z} === "true" || ${Z} === 1`).assign(G,!0);return;case"null":$.elseIf(B._`${Z} === "" || ${Z} === 0 || ${Z} === false`),$.assign(G,null);return;case"array":$.elseIf(B._`${W} === "string" || ${W} === "number"
              || ${W} === "boolean" || ${Z} === null`).assign(G,B._`[${Z}]`)}}},n$=function({gen:Q,parentData:X,parentDataProperty:Y},$){Q.if(B._`${X} !== undefined`,()=>Q.assign(B._`${X}[${Y}]`,$))},j6=function(Q,X,Y,$=w0.Correct){const Z=$===w0.Correct?B.operators.EQ:B.operators.NEQ;let J;switch(Q){case"null":return B._`${X} ${Z} null`;case"array":J=B._`Array.isArray(${X})`;break;case"object":J=B._`${X} && typeof ${X} == "object" && !Array.isArray(${X})`;break;case"integer":J=W(B._`!(${X} % 1) && !isNaN(${X})`);break;case"number":J=W();break;default:return B._`typeof ${X} ${Z} ${Q}`}return $===w0.Correct?J:B.not(J);function W(G=B.nil){return B.and(B._`typeof ${X} == "number"`,G,Y?B._`isFinite(${X})`:B.nil)}},A6=function(Q,X,Y,$){if(Q.length===1)return j6(Q[0],X,Y,$);let Z;const J=J4.toHash(Q);if(J.array&&J.object){const W=B._`typeof ${X} != "object"`;Z=J.null?W:B._`!${X} || ${W}`,delete J.null,delete J.array,delete J.object}else Z=B.nil;if(J.number)delete J.integer;for(let W in J)Z=B.and(Z,j6(W,X,Y,$));return Z},L6=function(Q){const X=r$(Q);h$.reportError(X,c$)},r$=function(Q){const{gen:X,data:Y,schema:$}=Q,Z=J4.schemaRefOrVal(Q,$,"type");return{gen:X,keyword:"type",data:Y,schema:$.type,schemaCode:Z,schemaValue:Z,parentSchema:$,params:{},it:Q}};Object.defineProperty(z4,"__esModule",{value:!0});z4.reportTypeError=z4.checkDataTypes=z4.checkDataType=z4.coerceAndCheckDataType=z4.getJSONTypes=z4.getSchemaTypes=z4.DataType=void 0;var l$=O6(),g$=V6(),h$=h0(),B=I(),J4=S(),w0;(function(Q){Q[Q.Correct=0]="Correct",Q[Q.Wrong=1]="Wrong"})(w0||(z4.DataType=w0={}));z4.getSchemaTypes=m$;z4.getJSONTypes=W4;z4.coerceAndCheckDataType=p$;var G4=new Set(["string","number","integer","boolean","null"]);z4.checkDataType=j6;z4.checkDataTypes=A6;var c$={message:({schema:Q})=>`must be ${Q}`,params:({schema:Q,schemaValue:X})=>typeof Q=="string"?B._`{type: ${Q}}`:B._`{type: ${X}}`};z4.reportTypeError=L6});var M4=O((H4)=>{var YZ=function(Q,X){const{properties:Y,items:$}=Q.schema;if(X==="object"&&Y)for(let Z in Y)q4(Q,Z,Y[Z].default);else if(X==="array"&&Array.isArray($))$.forEach((Z,J)=>q4(Q,J,Z.default))},q4=function(Q,X,Y){const{gen:$,compositeRule:Z,data:J,opts:W}=Q;if(Y===void 0)return;const G=b0._`${J}${b0.getProperty(X)}`;if(Z){XZ.checkStrictMode(Q,`default is ignored for: ${G}`);return}let F=b0._`${G} === undefined`;if(W.useDefaults==="empty")F=b0._`${F} || ${G} === null || ${G} === ""`;$.if(F,b0._`${G} = ${b0.stringify(Y)}`)};Object.defineProperty(H4,"__esModule",{value:!0});H4.assignDefaults=void 0;var b0=I(),XZ=S();H4.assignDefaults=YZ});var d=O((j4)=>{var ZZ=function(Q,X){const{gen:Y,data:$,it:Z}=Q;Y.if(N6(Y,$,X,Z.opts.ownProperties),()=>{Q.setParams({missingProperty:C._`${X}`},!0),Q.error()})},JZ=function({gen:Q,data:X,it:{opts:Y}},$,Z){return C.or(...$.map((J)=>C.and(N6(Q,X,J,Y.ownProperties),C._`${Z} = ${J}`)))},WZ=function(Q,X){Q.setParams({missingProperty:X},!0),Q.error()},O4=function(Q){return Q.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:C._`Object.prototype.hasOwnProperty`})},D6=function(Q,X,Y){return C._`${O4(Q)}.call(${X}, ${Y})`},GZ=function(Q,X,Y,$){const Z=C._`${X}${C.getProperty(Y)} !== undefined`;return $?C._`${Z} && ${D6(Q,X,Y)}`:Z},N6=function(Q,X,Y,$){const Z=C._`${X}${C.getProperty(Y)} === undefined`;return $?C.or(Z,C.not(D6(Q,X,Y))):Z},V4=function(Q){return Q?Object.keys(Q).filter((X)=>X!=="__proto__"):[]},zZ=function(Q,X){return V4(X).filter((Y)=>!U6.alwaysValidSchema(Q,X[Y]))},FZ=function({schemaCode:Q,data:X,it:{gen:Y,topSchemaRef:$,schemaPath:Z,errorPath:J},it:W},G,F,z){const q=z?C._`${Q}, ${X}, ${$}${Z}`:X,H=[[j0.default.instancePath,C.strConcat(j0.default.instancePath,J)],[j0.default.parentData,W.parentData],[j0.default.parentDataProperty,W.parentDataProperty],[j0.default.rootData,j0.default.rootData]];if(W.opts.dynamicRef)H.push([j0.default.dynamicAnchors,j0.default.dynamicAnchors]);const V=C._`${q}, ${Y.object(...H)}`;return F!==C.nil?C._`${G}.call(${F}, ${V})`:C._`${G}(${V})`},HZ=function({gen:Q,it:{opts:X}},Y){const $=X.unicodeRegExp?"u":"",{regExp:Z}=X.code,J=Z(Y,$);return Q.scopeValue("pattern",{key:J.toString(),ref:J,code:C._`${Z.code==="new RegExp"?qZ:$Z.useFunc(Q,Z)}(${Y}, ${$})`})},KZ=function(Q){const{gen:X,data:Y,keyword:$,it:Z}=Q,J=X.name("valid");if(Z.allErrors){const G=X.let("valid",!0);return W(()=>X.assign(G,!1)),G}return X.var(J,!0),W(()=>X.break()),J;function W(G){const F=X.const("len",C._`${Y}.length`);X.forRange("i",0,F,(z)=>{Q.subschema({keyword:$,dataProp:z,dataPropType:U6.Type.Num},J),X.if(C.not(J),G)})}},MZ=function(Q){const{gen:X,schema:Y,keyword:$,it:Z}=Q;if(!Array.isArray(Y))throw new Error("ajv implementation error");if(Y.some((F)=>U6.alwaysValidSchema(Z,F))&&!Z.opts.unevaluated)return;const W=X.let("valid",!1),G=X.name("_valid");X.block(()=>Y.forEach((F,z)=>{const q=Q.subschema({keyword:$,schemaProp:z,compositeRule:!0},G);if(X.assign(W,C._`${W} || ${G}`),!Q.mergeValidEvaluated(q,G))X.if(C.not(W))})),Q.result(W,()=>Q.reset(),()=>Q.error(!0))};Object.defineProperty(j4,"__esModule",{value:!0});j4.validateUnion=j4.validateArray=j4.usePattern=j4.callValidateCode=j4.schemaProperties=j4.allSchemaProperties=j4.noPropertyInData=j4.propertyInData=j4.isOwnProperty=j4.hasPropFunc=j4.reportMissingProp=j4.checkMissingProp=j4.checkReportMissingProp=void 0;var C=I(),U6=S(),j0=z0(),$Z=S();j4.checkReportMissingProp=ZZ;j4.checkMissingProp=JZ;j4.reportMissingProp=WZ;j4.hasPropFunc=O4;j4.isOwnProperty=D6;j4.propertyInData=GZ;j4.noPropertyInData=N6;j4.allSchemaProperties=V4;j4.schemaProperties=zZ;j4.callValidateCode=FZ;var qZ=C._`new RegExp`;j4.usePattern=HZ;j4.validateArray=KZ;j4.validateUnion=MZ});var B4=O((D4)=>{var SZ=function(Q,X){const{gen:Y,keyword:$,schema:Z,parentSchema:J,it:W}=Q,G=X.macro.call(W.self,Z,J,W),F=U4(Y,$,G);if(W.opts.validateSchema!==!1)W.self.validateSchema(G,!0);const z=Y.name("valid");Q.subschema({schema:G,schemaPath:_.nil,errSchemaPath:`${W.errSchemaPath}/${$}`,topSchemaRef:F,compositeRule:!0},z),Q.pass(z,()=>Q.error(!0))},wZ=function(Q,X){var Y;const{gen:$,keyword:Z,schema:J,parentSchema:W,$data:G,it:F}=Q;CZ(F,X);const z=!G&&X.compile?X.compile.call(F.self,J,W,F):X.validate,q=U4($,Z,z),H=$.let("valid");Q.block$data(H,V),Q.ok((Y=X.valid)!==null&&Y!==void 0?Y:H);function V(){if(X.errors===!1){if(K(),X.modifying)L4(Q);j(()=>Q.error())}else{const L=X.async?A():M();if(X.modifying)L4(Q);j(()=>bZ(Q,L))}}function A(){const L=$.let("ruleErrs",null);return $.try(()=>K(_._`await `),(E)=>$.assign(H,!1).if(_._`${E} instanceof ${F.ValidationError}`,()=>$.assign(L,_._`${E}.errors`),()=>$.throw(E))),L}function M(){const L=_._`${q}.errors`;return $.assign(L,null),K(_.nil),L}function K(L=X.async?_._`await `:_.nil){const E=F.opts.passContext?B0.default.this:B0.default.self,T=!(("compile"in X)&&!G||X.schema===!1);$.assign(H,_._`${L}${EZ.callValidateCode(Q,q,E,T)}`,X.modifying)}function j(L){var E;$.if(_.not((E=X.valid)!==null&&E!==void 0?E:H),L)}},L4=function(Q){const{gen:X,data:Y,it:$}=Q;X.if($.parentData,()=>X.assign(Y,_._`${$.parentData}[${$.parentDataProperty}]`))},bZ=function(Q,X){const{gen:Y}=Q;Y.if(_._`Array.isArray(${X})`,()=>{Y.assign(B0.default.vErrors,_._`${B0.default.vErrors} === null ? ${X} : ${B0.default.vErrors}.concat(${X})`).assign(B0.default.errors,_._`${B0.default.vErrors}.length`),RZ.extendErrors(Q)},()=>Q.error())},CZ=function({schemaEnv:Q},X){if(X.async&&!Q.$async)throw new Error("async keyword in sync schema")},U4=function(Q,X,Y){if(Y===void 0)throw new Error(`keyword "${X}" failed to compile`);return Q.scopeValue("keyword",typeof Y=="function"?{ref:Y}:{ref:Y,code:_.stringify(Y)})},kZ=function(Q,X,Y=!1){return!X.length||X.some(($)=>$==="array"?Array.isArray(Q):$==="object"?Q&&typeof Q=="object"&&!Array.isArray(Q):typeof Q==$||Y&&typeof Q=="undefined")},vZ=function({schema:Q,opts:X,self:Y,errSchemaPath:$},Z,J){if(Array.isArray(Z.keyword)?!Z.keyword.includes(J):Z.keyword!==J)throw new Error("ajv implementation error");const W=Z.dependencies;if(W===null||W===void 0?void 0:W.some((G)=>!Object.prototype.hasOwnProperty.call(Q,G)))throw new Error(`parent schema must have dependencies of ${J}: ${W.join(",")}`);if(Z.validateSchema){if(!Z.validateSchema(Q[J])){const F=`keyword "${J}" value is invalid at path "${$}": `+Y.errorsText(Z.validateSchema.errors);if(X.validateSchema==="log")Y.logger.error(F);else throw new Error(F)}}};Object.defineProperty(D4,"__esModule",{value:!0});D4.validateKeywordUsage=D4.validSchemaType=D4.funcKeywordCode=D4.macroKeywordCode=void 0;var _=I(),B0=z0(),EZ=d(),RZ=h0();D4.macroKeywordCode=SZ;D4.funcKeywordCode=wZ;D4.validSchemaType=kZ;D4.validateKeywordUsage=vZ});var E4=O((T4)=>{var xZ=function(Q,{keyword:X,schemaProp:Y,schema:$,schemaPath:Z,errSchemaPath:J,topSchemaRef:W}){if(X!==void 0&&$!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(X!==void 0){const G=Q.schema[X];return Y===void 0?{schema:G,schemaPath:$0._`${Q.schemaPath}${$0.getProperty(X)}`,errSchemaPath:`${Q.errSchemaPath}/${X}`}:{schema:G[Y],schemaPath:$0._`${Q.schemaPath}${$0.getProperty(X)}${$0.getProperty(Y)}`,errSchemaPath:`${Q.errSchemaPath}/${X}/${I4.escapeFragment(Y)}`}}if($!==void 0){if(Z===void 0||J===void 0||W===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:$,schemaPath:Z,topSchemaRef:W,errSchemaPath:J}}throw new Error('either "keyword" or "schema" must be passed')},_Z=function(Q,X,{dataProp:Y,dataPropType:$,data:Z,dataTypes:J,propertyName:W}){if(Z!==void 0&&Y!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:G}=X;if(Y!==void 0){const{errorPath:z,dataPathArr:q,opts:H}=X,V=G.let("data",$0._`${X.data}${$0.getProperty(Y)}`,!0);F(V),Q.errorPath=$0.str`${z}${I4.getErrorPath(Y,$,H.jsPropertySyntax)}`,Q.parentDataProperty=$0._`${Y}`,Q.dataPathArr=[...q,Q.parentDataProperty]}if(Z!==void 0){const z=Z instanceof $0.Name?Z:G.let("data",Z,!0);if(F(z),W!==void 0)Q.propertyName=W}if(J)Q.dataTypes=J;function F(z){Q.data=z,Q.dataLevel=X.dataLevel+1,Q.dataTypes=[],X.definedProperties=new Set,Q.parentData=X.data,Q.dataNames=[...X.dataNames,z]}},lZ=function(Q,{jtdDiscriminator:X,jtdMetadata:Y,compositeRule:$,createErrors:Z,allErrors:J}){if($!==void 0)Q.compositeRule=$;if(Z!==void 0)Q.createErrors=Z;if(J!==void 0)Q.allErrors=J;Q.jtdDiscriminator=X,Q.jtdMetadata=Y};Object.defineProperty(T4,"__esModule",{value:!0});T4.extendSubschemaMode=T4.extendSubschemaData=T4.getSubschema=void 0;var $0=I(),I4=S();T4.getSubschema=xZ;T4.extendSubschemaData=_Z;T4.extendSubschemaMode=lZ});var B6=O((y7,R4)=>{R4.exports=function Q(X,Y){if(X===Y)return!0;if(X&&Y&&typeof X=="object"&&typeof Y=="object"){if(X.constructor!==Y.constructor)return!1;var $,Z,J;if(Array.isArray(X)){if($=X.length,$!=Y.length)return!1;for(Z=$;Z--!==0;)if(!Q(X[Z],Y[Z]))return!1;return!0}if(X.constructor===RegExp)return X.source===Y.source&&X.flags===Y.flags;if(X.valueOf!==Object.prototype.valueOf)return X.valueOf()===Y.valueOf();if(X.toString!==Object.prototype.toString)return X.toString()===Y.toString();if(J=Object.keys(X),$=J.length,$!==Object.keys(Y).length)return!1;for(Z=$;Z--!==0;)if(!Object.prototype.hasOwnProperty.call(Y,J[Z]))return!1;for(Z=$;Z--!==0;){var W=J[Z];if(!Q(X[W],Y[W]))return!1}return!0}return X!==X&&Y!==Y}});var w4=O((x7,S4)=>{var I1=function(Q,X,Y,$,Z,J,W,G,F,z){if($&&typeof $=="object"&&!Array.isArray($)){X($,Z,J,W,G,F,z);for(var q in $){var H=$[q];if(Array.isArray(H)){if(q in A0.arrayKeywords)for(var V=0;V<H.length;V++)I1(Q,X,Y,H[V],Z+"/"+q+"/"+V,J,Z,q,$,V)}else if(q in A0.propsKeywords){if(H&&typeof H=="object")for(var A in H)I1(Q,X,Y,H[A],Z+"/"+q+"/"+mZ(A),J,Z,q,$,A)}else if(q in A0.keywords||Q.allKeys&&!(q in A0.skipKeywords))I1(Q,X,Y,H,Z+"/"+q,J,Z,q,$)}Y($,Z,J,W,G,F,z)}},mZ=function(Q){return Q.replace(/~/g,"~0").replace(/\//g,"~1")},A0=S4.exports=function(Q,X,Y){if(typeof X=="function")Y=X,X={};Y=X.cb||Y;var $=typeof Y=="function"?Y:Y.pre||function(){},Z=Y.post||function(){};I1(X,$,Z,Q,"",Q)};A0.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};A0.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};A0.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};A0.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}});var p0=O((v4)=>{var cZ=function(Q,X=!0){if(typeof Q=="boolean")return!0;if(X===!0)return!I6(Q);if(!X)return!1;return b4(Q)<=X},I6=function(Q){for(let X in Q){if(rZ.has(X))return!0;const Y=Q[X];if(Array.isArray(Y)&&Y.some(I6))return!0;if(typeof Y=="object"&&I6(Y))return!0}return!1},b4=function(Q){let X=0;for(let Y in Q){if(Y==="$ref")return 1/0;if(X++,nZ.has(Y))continue;if(typeof Q[Y]=="object")pZ.eachItem(Q[Y],($)=>X+=b4($));if(X===1/0)return 1/0}return X},C4=function(Q,X="",Y){if(Y!==!1)X=C0(X);const $=Q.parse(X);return k4(Q,$)},k4=function(Q,X){return Q.serialize(X).split("#")[0]+"#"},C0=function(Q){return Q?Q.replace(aZ,""):""},tZ=function(Q,X,Y){return Y=C0(Y),Q.resolve(X,Y)},sZ=function(Q,X){if(typeof Q=="boolean")return{};const{schemaId:Y,uriResolver:$}=this.opts,Z=C0(Q[Y]||X),J={"":Z},W=C4($,Z,!1),G={},F=new Set;return dZ(Q,{allKeys:!0},(H,V,A,M)=>{if(M===void 0)return;const K=W+V;let j=J[M];if(typeof H[Y]=="string")j=L.call(this,H[Y]);E.call(this,H.$anchor),E.call(this,H.$dynamicAnchor),J[V]=j;function L(T){const b=this.opts.uriResolver.resolve;if(T=C0(j?b(j,T):T),F.has(T))throw q(T);F.add(T);let N=this.refs[T];if(typeof N=="string")N=this.refs[N];if(typeof N=="object")z(H,N.schema,T);else if(T!==C0(K))if(T[0]==="#")z(H,G[T],T),G[T]=H;else this.refs[T]=K;return T}function E(T){if(typeof T=="string"){if(!oZ.test(T))throw new Error(`invalid anchor "${T}"`);L.call(this,`#${T}`)}}}),G;function z(H,V,A){if(V!==void 0&&!iZ(H,V))throw q(A)}function q(H){return new Error(`reference "${H}" resolves to more than one schema`)}};Object.defineProperty(v4,"__esModule",{value:!0});v4.getSchemaRefs=v4.resolveUrl=v4.normalizeId=v4._getFullPath=v4.getFullPath=v4.inlineRef=void 0;var pZ=S(),iZ=B6(),dZ=w4(),nZ=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);v4.inlineRef=cZ;var rZ=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);v4.getFullPath=C4;v4._getFullPath=k4;var aZ=/#\/?$/;v4.normalizeId=C0;v4.resolveUrl=tZ;var oZ=/^[a-z_][-a-z0-9._]*$/i;v4.getSchemaRefs=sZ});var n0=O((a4)=>{var WJ=function(Q){if(m4(Q)){if(p4(Q),h4(Q)){FJ(Q);return}}g4(Q,()=>l4.topBoolOrEmptySchema(Q))},g4=function({gen:Q,validateName:X,schema:Y,schemaEnv:$,opts:Z},J){if(Z.code.es5)Q.func(X,U._`${D.default.data}, ${D.default.valCxt}`,$.$async,()=>{Q.code(U._`"use strict"; ${y4(Y,Z)}`),zJ(Q,Z),Q.code(J)});else Q.func(X,U._`${D.default.data}, ${GJ(Z)}`,$.$async,()=>Q.code(y4(Y,Z)).code(J))},GJ=function(Q){return U._`{${D.default.instancePath}="", ${D.default.parentData}, ${D.default.parentDataProperty}, ${D.default.rootData}=${D.default.data}${Q.dynamicRef?U._`, ${D.default.dynamicAnchors}={}`:U.nil}}={}`},zJ=function(Q,X){Q.if(D.default.valCxt,()=>{if(Q.var(D.default.instancePath,U._`${D.default.valCxt}.${D.default.instancePath}`),Q.var(D.default.parentData,U._`${D.default.valCxt}.${D.default.parentData}`),Q.var(D.default.parentDataProperty,U._`${D.default.valCxt}.${D.default.parentDataProperty}`),Q.var(D.default.rootData,U._`${D.default.valCxt}.${D.default.rootData}`),X.dynamicRef)Q.var(D.default.dynamicAnchors,U._`${D.default.valCxt}.${D.default.dynamicAnchors}`)},()=>{if(Q.var(D.default.instancePath,U._`""`),Q.var(D.default.parentData,U._`undefined`),Q.var(D.default.parentDataProperty,U._`undefined`),Q.var(D.default.rootData,D.default.data),X.dynamicRef)Q.var(D.default.dynamicAnchors,U._`{}`)})},FJ=function(Q){const{schema:X,opts:Y,gen:$}=Q;g4(Q,()=>{if(Y.$comment&&X.$comment)d4(Q);if(OJ(Q),$.let(D.default.vErrors,null),$.let(D.default.errors,0),Y.unevaluated)qJ(Q);i4(Q),AJ(Q)});return},qJ=function(Q){const{gen:X,validateName:Y}=Q;Q.evaluated=X.const("evaluated",U._`${Y}.evaluated`),X.if(U._`${Q.evaluated}.dynamicProps`,()=>X.assign(U._`${Q.evaluated}.props`,U._`undefined`)),X.if(U._`${Q.evaluated}.dynamicItems`,()=>X.assign(U._`${Q.evaluated}.items`,U._`undefined`))},y4=function(Q,X){const Y=typeof Q=="object"&&Q[X.schemaId];return Y&&(X.code.source||X.code.process)?U._`/*# sourceURL=${Y} */`:U.nil},HJ=function(Q,X){if(m4(Q)){if(p4(Q),h4(Q)){KJ(Q,X);return}}l4.boolOrEmptySchema(Q,X)},h4=function({schema:Q,self:X}){if(typeof Q=="boolean")return!Q;for(let Y in Q)if(X.RULES.all[Y])return!0;return!1},m4=function(Q){return typeof Q.schema!="boolean"},KJ=function(Q,X){const{schema:Y,gen:$,opts:Z}=Q;if(Z.$comment&&Y.$comment)d4(Q);VJ(Q),jJ(Q);const J=$.const("_errs",D.default.errors);i4(Q,J),$.var(X,U._`${J} === ${D.default.errors}`)},p4=function(Q){F0.checkUnknownRules(Q),MJ(Q)},i4=function(Q,X){if(Q.opts.jtd)return x4(Q,[],!1,X);const Y=u4.getSchemaTypes(Q.schema),$=u4.coerceAndCheckDataType(Q,Y);x4(Q,Y,!$,X)},MJ=function(Q){const{schema:X,errSchemaPath:Y,opts:$,self:Z}=Q;if(X.$ref&&$.ignoreKeywordsWithRef&&F0.schemaHasRulesButRef(X,Z.RULES))Z.logger.warn(`\$ref: keywords ignored in schema at path "${Y}"`)},OJ=function(Q){const{schema:X,opts:Y}=Q;if(X.default!==void 0&&Y.useDefaults&&Y.strictSchema)F0.checkStrictMode(Q,"default is ignored in the schema root")},VJ=function(Q){const X=Q.schema[Q.opts.schemaId];if(X)Q.baseId=JJ.resolveUrl(Q.opts.uriResolver,Q.baseId,X)},jJ=function(Q){if(Q.schema.$async&&!Q.schemaEnv.$async)throw new Error("async schema in sync schema")},d4=function({gen:Q,schemaEnv:X,schema:Y,errSchemaPath:$,opts:Z}){const J=Y.$comment;if(Z.$comment===!0)Q.code(U._`${D.default.self}.logger.log(${J})`);else if(typeof Z.$comment=="function"){const W=U.str`${$}/$comment`,G=Q.scopeValue("root",{ref:X.root});Q.code(U._`${D.default.self}.opts.$comment(${J}, ${W}, ${G}.schema)`)}},AJ=function(Q){const{gen:X,schemaEnv:Y,validateName:$,ValidationError:Z,opts:J}=Q;if(Y.$async)X.if(U._`${D.default.errors} === 0`,()=>X.return(D.default.data),()=>X.throw(U._`new ${Z}(${D.default.vErrors})`));else{if(X.assign(U._`${$}.errors`,D.default.vErrors),J.unevaluated)LJ(Q);X.return(U._`${D.default.errors} === 0`)}},LJ=function({gen:Q,evaluated:X,props:Y,items:$}){if(Y instanceof U.Name)Q.assign(U._`${X}.props`,Y);if($ instanceof U.Name)Q.assign(U._`${X}.items`,$)},x4=function(Q,X,Y,$){const{gen:Z,schema:J,data:W,allErrors:G,opts:F,self:z}=Q,{RULES:q}=z;if(J.$ref&&(F.ignoreKeywordsWithRef||!F0.schemaHasRulesButRef(J,q))){Z.block(()=>c4(Q,"$ref",q.all.$ref.definition));return}if(!F.jtd)UJ(Q,X);Z.block(()=>{for(let V of q.rules)H(V);H(q.post)});function H(V){if(!P6.shouldUseGroup(J,V))return;if(V.type){if(Z.if(T1.checkDataType(V.type,W,F.strictNumbers)),_4(Q,V),X.length===1&&X[0]===V.type&&Y)Z.else(),T1.reportTypeError(Q);Z.endIf()}else _4(Q,V);if(!G)Z.if(U._`${D.default.errors} === ${$||0}`)}},_4=function(Q,X){const{gen:Y,schema:$,opts:{useDefaults:Z}}=Q;if(Z)ZJ.assignDefaults(Q,X.type);Y.block(()=>{for(let J of X.rules)if(P6.shouldUseRule($,J))c4(Q,J.keyword,J.definition,X.type)})},UJ=function(Q,X){if(Q.schemaEnv.meta||!Q.opts.strictTypes)return;if(DJ(Q,X),!Q.opts.allowUnionTypes)NJ(Q,X);BJ(Q,Q.dataTypes)},DJ=function(Q,X){if(!X.length)return;if(!Q.dataTypes.length){Q.dataTypes=X;return}X.forEach((Y)=>{if(!n4(Q.dataTypes,Y))E6(Q,`type "${Y}" not allowed by context "${Q.dataTypes.join(",")}"`)}),TJ(Q,X)},NJ=function(Q,X){if(X.length>1&&!(X.length===2&&X.includes("null")))E6(Q,"use allowUnionTypes to allow union type keyword")},BJ=function(Q,X){const Y=Q.self.RULES.all;for(let $ in Y){const Z=Y[$];if(typeof Z=="object"&&P6.shouldUseRule(Q.schema,Z)){const{type:J}=Z.definition;if(J.length&&!J.some((W)=>IJ(X,W)))E6(Q,`missing type "${J.join(",")}" for keyword "${$}"`)}}},IJ=function(Q,X){return Q.includes(X)||X==="number"&&Q.includes("integer")},n4=function(Q,X){return Q.includes(X)||X==="integer"&&Q.includes("number")},TJ=function(Q,X){const Y=[];for(let $ of Q.dataTypes)if(n4(X,$))Y.push($);else if(X.includes("integer")&&$==="number")Y.push("integer");Q.dataTypes=Y},E6=function(Q,X){const Y=Q.schemaEnv.baseId+Q.errSchemaPath;X+=` at "${Y}" (strictTypes)`,F0.checkStrictMode(Q,X,Q.opts.strictTypes)},c4=function(Q,X,Y,$){const Z=new R6(Q,Y,X);if("code"in Y)Y.code(Z,$);else if(Z.$data&&Y.validate)d0.funcKeywordCode(Z,Y);else if("macro"in Y)d0.macroKeywordCode(Z,Y);else if(Y.compile||Y.validate)d0.funcKeywordCode(Z,Y)},r4=function(Q,{dataLevel:X,dataNames:Y,dataPathArr:$}){let Z,J;if(Q==="")return D.default.rootData;if(Q[0]==="/"){if(!PJ.test(Q))throw new Error(`Invalid JSON-pointer: ${Q}`);Z=Q,J=D.default.rootData}else{const z=EJ.exec(Q);if(!z)throw new Error(`Invalid JSON-pointer: ${Q}`);const q=+z[1];if(Z=z[2],Z==="#"){if(q>=X)throw new Error(F("property/index",q));return $[X-q]}if(q>X)throw new Error(F("data",q));if(J=Y[X-q],!Z)return J}let W=J;const G=Z.split("/");for(let z of G)if(z)J=U._`${J}${U.getProperty(F0.unescapeJsonPointer(z))}`,W=U._`${W} && ${J}`;return W;function F(z,q){return`Cannot access ${z} ${q} levels up, current level is ${X}`}};Object.defineProperty(a4,"__esModule",{value:!0});a4.getData=a4.KeywordCxt=a4.validateFunctionCode=void 0;var l4=s9(),u4=m0(),P6=V6(),T1=m0(),ZJ=M4(),d0=B4(),T6=E4(),U=I(),D=z0(),JJ=p0(),F0=S(),i0=h0();a4.validateFunctionCode=WJ;class R6{constructor(Q,X,Y){if(d0.validateKeywordUsage(Q,X,Y),this.gen=Q.gen,this.allErrors=Q.allErrors,this.keyword=Y,this.data=Q.data,this.schema=Q.schema[Y],this.$data=X.$data&&Q.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=F0.schemaRefOrVal(Q,this.schema,Y,this.$data),this.schemaType=X.schemaType,this.parentSchema=Q.schema,this.params={},this.it=Q,this.def=X,this.$data)this.schemaCode=Q.gen.const("vSchema",r4(this.$data,Q));else if(this.schemaCode=this.schemaValue,!d0.validSchemaType(this.schema,X.schemaType,X.allowUndefined))throw new Error(`${Y} value must be ${JSON.stringify(X.schemaType)}`);if("code"in X?X.trackErrors:X.errors!==!1)this.errsCount=Q.gen.const("_errs",D.default.errors)}result(Q,X,Y){this.failResult(U.not(Q),X,Y)}failResult(Q,X,Y){if(this.gen.if(Q),Y)Y();else this.error();if(X){if(this.gen.else(),X(),this.allErrors)this.gen.endIf()}else if(this.allErrors)this.gen.endIf();else this.gen.else()}pass(Q,X){this.failResult(U.not(Q),void 0,X)}fail(Q){if(Q===void 0){if(this.error(),!this.allErrors)this.gen.if(!1);return}if(this.gen.if(Q),this.error(),this.allErrors)this.gen.endIf();else this.gen.else()}fail$data(Q){if(!this.$data)return this.fail(Q);const{schemaCode:X}=this;this.fail(U._`${X} !== undefined && (${U.or(this.invalid$data(),Q)})`)}error(Q,X,Y){if(X){this.setParams(X),this._error(Q,Y),this.setParams({});return}this._error(Q,Y)}_error(Q,X){(Q?i0.reportExtraError:i0.reportError)(this,this.def.error,X)}$dataError(){i0.reportError(this,this.def.$dataError||i0.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');i0.resetErrorsCount(this.gen,this.errsCount)}ok(Q){if(!this.allErrors)this.gen.if(Q)}setParams(Q,X){if(X)Object.assign(this.params,Q);else this.params=Q}block$data(Q,X,Y=U.nil){this.gen.block(()=>{this.check$data(Q,Y),X()})}check$data(Q=U.nil,X=U.nil){if(!this.$data)return;const{gen:Y,schemaCode:$,schemaType:Z,def:J}=this;if(Y.if(U.or(U._`${$} === undefined`,X)),Q!==U.nil)Y.assign(Q,!0);if(Z.length||J.validateSchema){if(Y.elseIf(this.invalid$data()),this.$dataError(),Q!==U.nil)Y.assign(Q,!1)}Y.else()}invalid$data(){const{gen:Q,schemaCode:X,schemaType:Y,def:$,it:Z}=this;return U.or(J(),W());function J(){if(Y.length){if(!(X instanceof U.Name))throw new Error("ajv implementation error");const G=Array.isArray(Y)?Y:[Y];return U._`${T1.checkDataTypes(G,X,Z.opts.strictNumbers,T1.DataType.Wrong)}`}return U.nil}function W(){if($.validateSchema){const G=Q.scopeValue("validate$data",{ref:$.validateSchema});return U._`!${G}(${X})`}return U.nil}}subschema(Q,X){const Y=T6.getSubschema(this.it,Q);T6.extendSubschemaData(Y,this.it,Q),T6.extendSubschemaMode(Y,Q);const $={...this.it,...Y,items:void 0,props:void 0};return HJ($,X),$}mergeEvaluated(Q,X){const{it:Y,gen:$}=this;if(!Y.opts.unevaluated)return;if(Y.props!==!0&&Q.props!==void 0)Y.props=F0.mergeEvaluated.props($,Q.props,Y.props,X);if(Y.items!==!0&&Q.items!==void 0)Y.items=F0.mergeEvaluated.items($,Q.items,Y.items,X)}mergeValidEvaluated(Q,X){const{it:Y,gen:$}=this;if(Y.opts.unevaluated&&(Y.props!==!0||Y.items!==!0))return $.if(X,()=>this.mergeEvaluated(Q,U.Name)),!0}}a4.KeywordCxt=R6;var PJ=/^\/(?:[^~]|~0|~1)*$/,EJ=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;a4.getData=r4});var P1=O((s4)=>{Object.defineProperty(s4,"__esModule",{value:!0});class o4 extends Error{constructor(Q){super("validation failed");this.errors=Q,this.ajv=this.validation=!0}}s4.default=o4});var c0=O((Q8)=>{Object.defineProperty(Q8,"__esModule",{value:!0});var S6=p0();class e4 extends Error{constructor(Q,X,Y,$){super($||`can't resolve reference ${Y} from id ${X}`);this.missingRef=S6.resolveUrl(Q,X,Y),this.missingSchema=S6.normalizeId(S6.getFullPath(Q,this.missingRef))}}Q8.default=e4});var R1=O(($8)=>{var b6=function(Q){const X=Y8.call(this,Q);if(X)return X;const Y=s.getFullPath(this.opts.uriResolver,Q.root.baseId),{es5:$,lines:Z}=this.opts.code,{ownProperties:J}=this.opts,W=new o.CodeGen(this.scope,{es5:$,lines:Z,ownProperties:J});let G;if(Q.$async)G=W.scopeValue("Error",{ref:CJ.default,code:o._`require("ajv/dist/runtime/validation_error").default`});const F=W.scopeName("validate");Q.validateName=F;const z={gen:W,allErrors:this.opts.allErrors,data:I0.default.data,parentData:I0.default.parentData,parentDataProperty:I0.default.parentDataProperty,dataNames:[I0.default.data],dataPathArr:[o.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:W.scopeValue("schema",this.opts.code.source===!0?{ref:Q.schema,code:o.stringify(Q.schema)}:{ref:Q.schema}),validateName:F,ValidationError:G,schema:Q.schema,schemaEnv:Q,rootId:Y,baseId:Q.baseId||Y,schemaPath:o.nil,errSchemaPath:Q.schemaPath||(this.opts.jtd?"":"#"),errorPath:o._`""`,opts:this.opts,self:this};let q;try{this._compilations.add(Q),kJ.validateFunctionCode(z),W.optimize(this.opts.code.optimize);const H=W.toString();if(q=`${W.scopeRefs(I0.default.scope)}return ${H}`,this.opts.code.process)q=this.opts.code.process(q,Q);const A=new Function(`${I0.default.self}`,`${I0.default.scope}`,q)(this,this.scope.get());if(this.scope.value(F,{ref:A}),A.errors=null,A.schema=Q.schema,A.schemaEnv=Q,Q.$async)A.$async=!0;if(this.opts.code.source===!0)A.source={validateName:F,validateCode:H,scopeValues:W._values};if(this.opts.unevaluated){const{props:M,items:K}=z;if(A.evaluated={props:M instanceof o.Name?void 0:M,items:K instanceof o.Name?void 0:K,dynamicProps:M instanceof o.Name,dynamicItems:K instanceof o.Name},A.source)A.source.evaluated=o.stringify(A.evaluated)}return Q.validate=A,Q}catch(H){if(delete Q.validate,delete Q.validateName,q)this.logger.error("Error compiling schema, function code:",q);throw H}finally{this._compilations.delete(Q)}},vJ=function(Q,X,Y){var $;Y=s.resolveUrl(this.opts.uriResolver,X,Y);const Z=Q.refs[Y];if(Z)return Z;let J=yJ.call(this,Q,Y);if(J===void 0){const W=($=Q.localRefs)===null||$===void 0?void 0:$[Y],{schemaId:G}=this.opts;if(W)J=new r0({schema:W,schemaId:G,root:Q,baseId:X})}if(J===void 0)return;return Q.refs[Y]=fJ.call(this,J)},fJ=function(Q){if(s.inlineRef(Q.schema,this.opts.inlineRefs))return Q.schema;return Q.validate?Q:b6.call(this,Q)},Y8=function(Q){for(let X of this._compilations)if(uJ(X,Q))return X},uJ=function(Q,X){return Q.schema===X.schema&&Q.root===X.root&&Q.baseId===X.baseId},yJ=function(Q,X){let Y;while(typeof(Y=this.refs[X])=="string")X=Y;return Y||this.schemas[X]||E1.call(this,Q,X)},E1=function(Q,X){const Y=this.opts.uriResolver.parse(X),$=s._getFullPath(this.opts.uriResolver,Y);let Z=s.getFullPath(this.opts.uriResolver,Q.baseId,void 0);if(Object.keys(Q.schema).length>0&&$===Z)return w6.call(this,Y,Q);const J=s.normalizeId($),W=this.refs[J]||this.schemas[J];if(typeof W=="string"){const G=E1.call(this,Q,W);if(typeof(G===null||G===void 0?void 0:G.schema)!=="object")return;return w6.call(this,Y,G)}if(typeof(W===null||W===void 0?void 0:W.schema)!=="object")return;if(!W.validate)b6.call(this,W);if(J===s.normalizeId(X)){const{schema:G}=W,{schemaId:F}=this.opts,z=G[F];if(z)Z=s.resolveUrl(this.opts.uriResolver,Z,z);return new r0({schema:G,schemaId:F,root:Q,baseId:Z})}return w6.call(this,Y,W)},w6=function(Q,{baseId:X,schema:Y,root:$}){var Z;if(((Z=Q.fragment)===null||Z===void 0?void 0:Z[0])!=="/")return;for(let G of Q.fragment.slice(1).split("/")){if(typeof Y==="boolean")return;const F=Y[X8.unescapeFragment(G)];if(F===void 0)return;Y=F;const z=typeof Y==="object"&&Y[this.opts.schemaId];if(!xJ.has(G)&&z)X=s.resolveUrl(this.opts.uriResolver,X,z)}let J;if(typeof Y!="boolean"&&Y.$ref&&!X8.schemaHasRulesButRef(Y,this.RULES)){const G=s.resolveUrl(this.opts.uriResolver,X,Y.$ref);J=E1.call(this,$,G)}const{schemaId:W}=this.opts;if(J=J||new r0({schema:Y,schemaId:W,root:$,baseId:X}),J.schema!==J.root.schema)return J;return};Object.defineProperty($8,"__esModule",{value:!0});$8.resolveSchema=$8.getCompilingSchema=$8.resolveRef=$8.compileSchema=$8.SchemaEnv=void 0;var o=I(),CJ=P1(),I0=z0(),s=p0(),X8=S(),kJ=n0();class r0{constructor(Q){var X;this.refs={},this.dynamicAnchors={};let Y;if(typeof Q.schema=="object")Y=Q.schema;this.schema=Q.schema,this.schemaId=Q.schemaId,this.root=Q.root||this,this.baseId=(X=Q.baseId)!==null&&X!==void 0?X:s.normalizeId(Y===null||Y===void 0?void 0:Y[Q.schemaId||"$id"]),this.schemaPath=Q.schemaPath,this.localRefs=Q.localRefs,this.meta=Q.meta,this.$async=Y===null||Y===void 0?void 0:Y.$async,this.refs={}}}$8.SchemaEnv=r0;$8.compileSchema=b6;$8.resolveRef=vJ;$8.getCompilingSchema=Y8;$8.resolveSchema=E1;var xJ=new Set(["properties","patternProperties","enum","dependencies","definitions"])});var J8=O((p7,mJ)=>{mJ.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var G8=O((i7,W8)=>{var pJ={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};W8.exports={HEX:pJ}});var V8=O((d7,O8)=>{var H8=function(Q){if(M8(Q,".")<3)return{host:Q,isIPV4:!1};const X=Q.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[Y]=X;if(Y)return{host:nJ(Y,"."),isIPV4:!0};else return{host:Q,isIPV4:!1}},C6=function(Q,X=!1){let Y="",$=!0;for(let Z of Q){if(iJ[Z]===void 0)return;if(Z!=="0"&&$===!0)$=!1;if(!$)Y+=Z}if(X&&Y.length===0)Y="0";return Y},dJ=function(Q){let X=0;const Y={error:!1,address:"",zone:""},$=[],Z=[];let J=!1,W=!1,G=!1;function F(){if(Z.length){if(J===!1){const z=C6(Z);if(z!==void 0)$.push(z);else return Y.error=!0,!1}Z.length=0}return!0}for(let z=0;z<Q.length;z++){const q=Q[z];if(q==="["||q==="]")continue;if(q===":"){if(W===!0)G=!0;if(!F())break;if(X++,$.push(":"),X>7){Y.error=!0;break}if(z-1>=0&&Q[z-1]===":")W=!0;continue}else if(q==="%"){if(!F())break;J=!0}else{Z.push(q);continue}}if(Z.length)if(J)Y.zone=Z.join("");else if(G)$.push(Z.join(""));else $.push(C6(Z));return Y.address=$.join(""),Y},K8=function(Q,X={}){if(M8(Q,":")<2)return{host:Q,isIPV6:!1};const Y=dJ(Q);if(!Y.error){let{address:$,address:Z}=Y;if(Y.zone)$+="%"+Y.zone,Z+="%25"+Y.zone;return{host:$,escapedHost:Z,isIPV6:!0}}else return{host:Q,isIPV6:!1}},nJ=function(Q,X){let Y="",$=!0;const Z=Q.length;for(let J=0;J<Z;J++){const W=Q[J];if(W==="0"&&$){if(J+1<=Z&&Q[J+1]===X||J+1===Z)Y+=W,$=!1}else{if(W===X)$=!0;else $=!1;Y+=W}}return Y},M8=function(Q,X){let Y=0;for(let $=0;$<Q.length;$++)if(Q[$]===X)Y++;return Y},rJ=function(Q){const X=[];while(Q.length)if(Q.match(z8))Q=Q.replace(z8,"");else if(Q.match(F8))Q=Q.replace(F8,"/");else if(Q.match(q8))Q=Q.replace(q8,"/"),X.pop();else if(Q==="."||Q==="..")Q="";else{const Y=Q.match(cJ);if(Y){const $=Y[0];Q=Q.slice($.length),X.push($)}else throw new Error("Unexpected dot segment condition")}return X.join("")},aJ=function(Q,X){const Y=X!==!0?escape:unescape;if(Q.scheme!==void 0)Q.scheme=Y(Q.scheme);if(Q.userinfo!==void 0)Q.userinfo=Y(Q.userinfo);if(Q.host!==void 0)Q.host=Y(Q.host);if(Q.path!==void 0)Q.path=Y(Q.path);if(Q.query!==void 0)Q.query=Y(Q.query);if(Q.fragment!==void 0)Q.fragment=Y(Q.fragment);return Q},tJ=function(Q,X){const Y=[];if(Q.userinfo!==void 0)Y.push(Q.userinfo),Y.push("@");if(Q.host!==void 0){let $=unescape(Q.host);const Z=H8($);if(Z.isIPV4)$=Z.host;else{const J=K8(Z.host,{isIPV4:!1});if(J.isIPV6===!0)$=`[${J.escapedHost}]`;else $=Q.host}Y.push($)}if(typeof Q.port==="number"||typeof Q.port==="string")Y.push(":"),Y.push(String(Q.port));return Y.length?Y.join(""):void 0},{HEX:iJ}=G8(),z8=/^\.\.?\//u,F8=/^\/\.(?:\/|$)/u,q8=/^\/\.\.(?:\/|$)/u,cJ=/^\/?(?:.|\n)*?(?=\/|$)/u;O8.exports={recomposeAuthority:tJ,normalizeComponentEncoding:aJ,removeDotSegments:rJ,normalizeIPv4:H8,normalizeIPv6:K8,stringArrayToHexStripped:C6}});var N8=O((n7,D8)=>{var j8=function(Q){return typeof Q.secure==="boolean"?Q.secure:String(Q.scheme).toLowerCase()==="wss"},A8=function(Q){if(!Q.host)Q.error=Q.error||"HTTP URIs must have a host.";return Q},L8=function(Q){const X=String(Q.scheme).toLowerCase()==="https";if(Q.port===(X?443:80)||Q.port==="")Q.port=void 0;if(!Q.path)Q.path="/";return Q},eJ=function(Q){return Q.secure=j8(Q),Q.resourceName=(Q.path||"/")+(Q.query?"?"+Q.query:""),Q.path=void 0,Q.query=void 0,Q},QW=function(Q){if(Q.port===(j8(Q)?443:80)||Q.port==="")Q.port=void 0;if(typeof Q.secure==="boolean")Q.scheme=Q.secure?"wss":"ws",Q.secure=void 0;if(Q.resourceName){const[X,Y]=Q.resourceName.split("?");Q.path=X&&X!=="/"?X:void 0,Q.query=Y,Q.resourceName=void 0}return Q.fragment=void 0,Q},XW=function(Q,X){if(!Q.path)return Q.error="URN can not be parsed",Q;const Y=Q.path.match(sJ);if(Y){const $=X.scheme||Q.scheme||"urn";Q.nid=Y[1].toLowerCase(),Q.nss=Y[2];const Z=`${$}:${X.nid||Q.nid}`,J=k6[Z];if(Q.path=void 0,J)Q=J.parse(Q,X)}else Q.error=Q.error||"URN can not be parsed.";return Q},YW=function(Q,X){const Y=X.scheme||Q.scheme||"urn",$=Q.nid.toLowerCase(),Z=`${Y}:${X.nid||$}`,J=k6[Z];if(J)Q=J.serialize(Q,X);const W=Q,G=Q.nss;return W.path=`${$||X.nid}:${G}`,X.skipEscape=!0,W},$W=function(Q,X){const Y=Q;if(Y.uuid=Y.nss,Y.nss=void 0,!X.tolerant&&(!Y.uuid||!oJ.test(Y.uuid)))Y.error=Y.error||"UUID is not valid.";return Y},ZW=function(Q){const X=Q;return X.nss=(Q.uuid||"").toLowerCase(),X},oJ=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,sJ=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,U8={scheme:"http",domainHost:!0,parse:A8,serialize:L8},JW={scheme:"https",domainHost:U8.domainHost,parse:A8,serialize:L8},S1={scheme:"ws",domainHost:!0,parse:eJ,serialize:QW},WW={scheme:"wss",domainHost:S1.domainHost,parse:S1.parse,serialize:S1.serialize},GW={scheme:"urn",parse:XW,serialize:YW,skipNormalize:!0},zW={scheme:"urn:uuid",parse:$W,serialize:ZW,skipNormalize:!0},k6={http:U8,https:JW,ws:S1,wss:WW,urn:GW,"urn:uuid":zW};D8.exports=k6});var I8=O((c7,b1)=>{var KW=function(Q,X){if(typeof Q==="string")Q=Z0(q0(Q,X),X);else if(typeof Q==="object")Q=q0(Z0(Q,X),X);return Q},MW=function(Q,X,Y){const $=Object.assign({scheme:"null"},Y),Z=B8(q0(Q,$),q0(X,$),$,!0);return Z0(Z,{...$,skipEscape:!0})},B8=function(Q,X,Y,$){const Z={};if(!$)Q=q0(Z0(Q,Y),Y),X=q0(Z0(X,Y),Y);if(Y=Y||{},!Y.tolerant&&X.scheme)Z.scheme=X.scheme,Z.userinfo=X.userinfo,Z.host=X.host,Z.port=X.port,Z.path=a0(X.path||""),Z.query=X.query;else{if(X.userinfo!==void 0||X.host!==void 0||X.port!==void 0)Z.userinfo=X.userinfo,Z.host=X.host,Z.port=X.port,Z.path=a0(X.path||""),Z.query=X.query;else{if(!X.path)if(Z.path=Q.path,X.query!==void 0)Z.query=X.query;else Z.query=Q.query;else{if(X.path.charAt(0)==="/")Z.path=a0(X.path);else{if((Q.userinfo!==void 0||Q.host!==void 0||Q.port!==void 0)&&!Q.path)Z.path="/"+X.path;else if(!Q.path)Z.path=X.path;else Z.path=Q.path.slice(0,Q.path.lastIndexOf("/")+1)+X.path;Z.path=a0(Z.path)}Z.query=X.query}Z.userinfo=Q.userinfo,Z.host=Q.host,Z.port=Q.port}Z.scheme=Q.scheme}return Z.fragment=X.fragment,Z},OW=function(Q,X,Y){if(typeof Q==="string")Q=unescape(Q),Q=Z0(w1(q0(Q,Y),!0),{...Y,skipEscape:!0});else if(typeof Q==="object")Q=Z0(w1(Q,!0),{...Y,skipEscape:!0});if(typeof X==="string")X=unescape(X),X=Z0(w1(q0(X,Y),!0),{...Y,skipEscape:!0});else if(typeof X==="object")X=Z0(w1(X,!0),{...Y,skipEscape:!0});return Q.toLowerCase()===X.toLowerCase()},Z0=function(Q,X){const Y={host:Q.host,scheme:Q.scheme,userinfo:Q.userinfo,port:Q.port,path:Q.path,query:Q.query,nid:Q.nid,nss:Q.nss,uuid:Q.uuid,fragment:Q.fragment,reference:Q.reference,resourceName:Q.resourceName,secure:Q.secure,error:""},$=Object.assign({},X),Z=[],J=v6[($.scheme||Y.scheme||"").toLowerCase()];if(J&&J.serialize)J.serialize(Y,$);if(Y.path!==void 0)if(!$.skipEscape){if(Y.path=escape(Y.path),Y.scheme!==void 0)Y.path=Y.path.split("%3A").join(":")}else Y.path=unescape(Y.path);if($.reference!=="suffix"&&Y.scheme)Z.push(Y.scheme),Z.push(":");const W=HW(Y,$);if(W!==void 0){if($.reference!=="suffix")Z.push("//");if(Z.push(W),Y.path&&Y.path.charAt(0)!=="/")Z.push("/")}if(Y.path!==void 0){let G=Y.path;if(!$.absolutePath&&(!J||!J.absolutePath))G=a0(G);if(W===void 0)G=G.replace(/^\/\//u,"/%2F");Z.push(G)}if(Y.query!==void 0)Z.push("?"),Z.push(Y.query);if(Y.fragment!==void 0)Z.push("#"),Z.push(Y.fragment);return Z.join("")},jW=function(Q){let X=0;for(let Y=0,$=Q.length;Y<$;++Y)if(X=Q.charCodeAt(Y),X>126||VW[X])return!0;return!1},q0=function(Q,X){const Y=Object.assign({},X),$={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},Z=Q.indexOf("%")!==-1;let J=!1;if(Y.reference==="suffix")Q=(Y.scheme?Y.scheme+":":"")+"//"+Q;const W=Q.match(AW);if(W){if($.scheme=W[1],$.userinfo=W[3],$.host=W[4],$.port=parseInt(W[5],10),$.path=W[6]||"",$.query=W[7],$.fragment=W[8],isNaN($.port))$.port=W[5];if($.host){const F=qW($.host);if(F.isIPV4===!1){const z=FW(F.host,{isIPV4:!1});$.host=z.host.toLowerCase(),J=z.isIPV6}else $.host=F.host,J=!0}if($.scheme===void 0&&$.userinfo===void 0&&$.host===void 0&&$.port===void 0&&!$.path&&$.query===void 0)$.reference="same-document";else if($.scheme===void 0)$.reference="relative";else if($.fragment===void 0)$.reference="absolute";else $.reference="uri";if(Y.reference&&Y.reference!=="suffix"&&Y.reference!==$.reference)$.error=$.error||"URI is not a "+Y.reference+" reference.";const G=v6[(Y.scheme||$.scheme||"").toLowerCase()];if(!Y.unicodeSupport&&(!G||!G.unicodeSupport)){if($.host&&(Y.domainHost||G&&G.domainHost)&&J===!1&&jW($.host))try{$.host=URL.domainToASCII($.host.toLowerCase())}catch(F){$.error=$.error||"Host's domain name can not be converted to ASCII: "+F}}if(!G||G&&!G.skipNormalize){if(Z&&$.scheme!==void 0)$.scheme=unescape($.scheme);if(Z&&$.userinfo!==void 0)$.userinfo=unescape($.userinfo);if(Z&&$.host!==void 0)$.host=unescape($.host);if($.path!==void 0&&$.path.length)$.path=escape(unescape($.path));if($.fragment!==void 0&&$.fragment.length)$.fragment=encodeURI(decodeURIComponent($.fragment))}if(G&&G.parse)G.parse($,Y)}else $.error=$.error||"URI can not be parsed.";return $},{normalizeIPv6:FW,normalizeIPv4:qW,removeDotSegments:a0,recomposeAuthority:HW,normalizeComponentEncoding:w1}=V8(),v6=N8(),VW=Array.from({length:127},(Q,X)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(X))),AW=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u,f6={SCHEMES:v6,normalize:KW,resolve:MW,resolveComponents:B8,equal:OW,serialize:Z0,parse:q0};b1.exports=f6;b1.exports.default=f6;b1.exports.fastUri=f6});var E8=O((P8)=>{Object.defineProperty(P8,"__esModule",{value:!0});var T8=I8();T8.code='require("ajv/dist/runtime/uri").default';P8.default=T8});var f8=O((H0)=>{var SW=function(Q){var X,Y,$,Z,J,W,G,F,z,q,H,V,A,M,K,j,L,E,T,b,N,X0,J0,o1,s1;const y0=Q.strict,e1=(X=Q.code)===null||X===void 0?void 0:X.optimize,e6=e1===!0||e1===void 0?1:e1||0,Q9=($=(Y=Q.code)===null||Y===void 0?void 0:Y.regExp)!==null&&$!==void 0?$:k8,tX=(Z=Q.uriResolver)!==null&&Z!==void 0?Z:IW.default;return{strictSchema:(W=(J=Q.strictSchema)!==null&&J!==void 0?J:y0)!==null&&W!==void 0?W:!0,strictNumbers:(F=(G=Q.strictNumbers)!==null&&G!==void 0?G:y0)!==null&&F!==void 0?F:!0,strictTypes:(q=(z=Q.strictTypes)!==null&&z!==void 0?z:y0)!==null&&q!==void 0?q:"log",strictTuples:(V=(H=Q.strictTuples)!==null&&H!==void 0?H:y0)!==null&&V!==void 0?V:"log",strictRequired:(M=(A=Q.strictRequired)!==null&&A!==void 0?A:y0)!==null&&M!==void 0?M:!1,code:Q.code?{...Q.code,optimize:e6,regExp:Q9}:{optimize:e6,regExp:Q9},loopRequired:(K=Q.loopRequired)!==null&&K!==void 0?K:S8,loopEnum:(j=Q.loopEnum)!==null&&j!==void 0?j:S8,meta:(L=Q.meta)!==null&&L!==void 0?L:!0,messages:(E=Q.messages)!==null&&E!==void 0?E:!0,inlineRefs:(T=Q.inlineRefs)!==null&&T!==void 0?T:!0,schemaId:(b=Q.schemaId)!==null&&b!==void 0?b:"$id",addUsedSchema:(N=Q.addUsedSchema)!==null&&N!==void 0?N:!0,validateSchema:(X0=Q.validateSchema)!==null&&X0!==void 0?X0:!0,validateFormats:(J0=Q.validateFormats)!==null&&J0!==void 0?J0:!0,unicodeRegExp:(o1=Q.unicodeRegExp)!==null&&o1!==void 0?o1:!0,int32range:(s1=Q.int32range)!==null&&s1!==void 0?s1:!0,uriResolver:tX}},w8=function(Q,X,Y,$="error"){for(let Z in Q){const J=Z;if(J in X)this.logger[$](`${Y}: option ${Z}. ${Q[J]}`)}},b8=function(Q){return Q=o0.normalizeId(Q),this.schemas[Q]||this.refs[Q]},wW=function(){const Q=this.opts.schemas;if(!Q)return;if(Array.isArray(Q))this.addSchema(Q);else for(let X in Q)this.addSchema(Q[X],X)},bW=function(){for(let Q in this.opts.formats){const X=this.opts.formats[Q];if(X)this.addFormat(Q,X)}},CW=function(Q){if(Array.isArray(Q)){this.addVocabulary(Q);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let X in Q){const Y=Q[X];if(!Y.keyword)Y.keyword=X;this.addKeyword(Y)}},kW=function(){const Q={...this.opts};for(let X of TW)delete Q[X];return Q},fW=function(Q){if(Q===!1)return vW;if(Q===void 0)return console;if(Q.log&&Q.warn&&Q.error)return Q;throw new Error("logger must implement log, warn and error methods")},yW=function(Q,X){const{RULES:Y}=this;if(y6.eachItem(Q,($)=>{if(Y.keywords[$])throw new Error(`Keyword ${$} is already defined`);if(!uW.test($))throw new Error(`Keyword ${$} has invalid name`)}),!X)return;if(X.$data&&!(("code"in X)||("validate"in X)))throw new Error('$data keyword must have "code" or "validate" function')},u6=function(Q,X,Y){var $;const Z=X===null||X===void 0?void 0:X.post;if(Y&&Z)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:J}=this;let W=Z?J.post:J.rules.find(({type:F})=>F===Y);if(!W)W={type:Y,rules:[]},J.rules.push(W);if(J.keywords[Q]=!0,!X)return;const G={keyword:Q,definition:{...X,type:C1.getJSONTypes(X.type),schemaType:C1.getJSONTypes(X.schemaType)}};if(X.before)xW.call(this,W,G,X.before);else W.rules.push(G);J.all[Q]=G,($=X.implements)===null||$===void 0||$.forEach((F)=>this.addKeyword(F))},xW=function(Q,X,Y){const $=Q.rules.findIndex((Z)=>Z.keyword===Y);if($>=0)Q.rules.splice($,0,X);else Q.rules.push(X),this.logger.warn(`rule ${Y} is not defined`)},_W=function(Q){let{metaSchema:X}=Q;if(X===void 0)return;if(Q.$data&&this.opts.$data)X=v8(X);Q.validateSchema=this.compile(X,!0)},v8=function(Q){return{anyOf:[Q,lW]}};Object.defineProperty(H0,"__esModule",{value:!0});H0.CodeGen=H0.Name=H0.nil=H0.stringify=H0.str=H0._=H0.KeywordCxt=void 0;var UW=n0();Object.defineProperty(H0,"KeywordCxt",{enumerable:!0,get:function(){return UW.KeywordCxt}});var k0=I();Object.defineProperty(H0,"_",{enumerable:!0,get:function(){return k0._}});Object.defineProperty(H0,"str",{enumerable:!0,get:function(){return k0.str}});Object.defineProperty(H0,"stringify",{enumerable:!0,get:function(){return k0.stringify}});Object.defineProperty(H0,"nil",{enumerable:!0,get:function(){return k0.nil}});Object.defineProperty(H0,"Name",{enumerable:!0,get:function(){return k0.Name}});Object.defineProperty(H0,"CodeGen",{enumerable:!0,get:function(){return k0.CodeGen}});var DW=P1(),C8=c0(),NW=O6(),t0=R1(),BW=I(),o0=p0(),C1=m0(),y6=S(),R8=J8(),IW=E8(),k8=(Q,X)=>new RegExp(Q,X);k8.code="new RegExp";var TW=["removeAdditional","useDefaults","coerceTypes"],PW=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),EW={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},RW={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},S8=200;class k1{constructor(Q={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,Q=this.opts={...Q,...SW(Q)};const{es5:X,lines:Y}=this.opts.code;this.scope=new BW.ValueScope({scope:{},prefixes:PW,es5:X,lines:Y}),this.logger=fW(Q.logger);const $=Q.validateFormats;if(Q.validateFormats=!1,this.RULES=NW.getRules(),w8.call(this,EW,Q,"NOT SUPPORTED"),w8.call(this,RW,Q,"DEPRECATED","warn"),this._metaOpts=kW.call(this),Q.formats)bW.call(this);if(this._addVocabularies(),this._addDefaultMetaSchema(),Q.keywords)CW.call(this,Q.keywords);if(typeof Q.meta=="object")this.addMetaSchema(Q.meta);wW.call(this),Q.validateFormats=$}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:Q,meta:X,schemaId:Y}=this.opts;let $=R8;if(Y==="id")$={...R8},$.id=$.$id,delete $.$id;if(X&&Q)this.addMetaSchema($,$[Y],!1)}defaultMeta(){const{meta:Q,schemaId:X}=this.opts;return this.opts.defaultMeta=typeof Q=="object"?Q[X]||Q:void 0}validate(Q,X){let Y;if(typeof Q=="string"){if(Y=this.getSchema(Q),!Y)throw new Error(`no schema with key or ref "${Q}"`)}else Y=this.compile(Q);const $=Y(X);if(!("$async"in Y))this.errors=Y.errors;return $}compile(Q,X){const Y=this._addSchema(Q,X);return Y.validate||this._compileSchemaEnv(Y)}compileAsync(Q,X){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:Y}=this.opts;return $.call(this,Q,X);async function $(z,q){await Z.call(this,z.$schema);const H=this._addSchema(z,q);return H.validate||J.call(this,H)}async function Z(z){if(z&&!this.getSchema(z))await $.call(this,{$ref:z},!0)}async function J(z){try{return this._compileSchemaEnv(z)}catch(q){if(!(q instanceof C8.default))throw q;return W.call(this,q),await G.call(this,q.missingSchema),J.call(this,z)}}function W({missingSchema:z,missingRef:q}){if(this.refs[z])throw new Error(`AnySchema ${z} is loaded but ${q} cannot be resolved`)}async function G(z){const q=await F.call(this,z);if(!this.refs[z])await Z.call(this,q.$schema);if(!this.refs[z])this.addSchema(q,z,X)}async function F(z){const q=this._loading[z];if(q)return q;try{return await(this._loading[z]=Y(z))}finally{delete this._loading[z]}}}addSchema(Q,X,Y,$=this.opts.validateSchema){if(Array.isArray(Q)){for(let J of Q)this.addSchema(J,void 0,Y,$);return this}let Z;if(typeof Q==="object"){const{schemaId:J}=this.opts;if(Z=Q[J],Z!==void 0&&typeof Z!="string")throw new Error(`schema ${J} must be string`)}return X=o0.normalizeId(X||Z),this._checkUnique(X),this.schemas[X]=this._addSchema(Q,Y,X,$,!0),this}addMetaSchema(Q,X,Y=this.opts.validateSchema){return this.addSchema(Q,X,!0,Y),this}validateSchema(Q,X){if(typeof Q=="boolean")return!0;let Y;if(Y=Q.$schema,Y!==void 0&&typeof Y!="string")throw new Error("$schema must be a string");if(Y=Y||this.opts.defaultMeta||this.defaultMeta(),!Y)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const $=this.validate(Y,Q);if(!$&&X){const Z="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(Z);else throw new Error(Z)}return $}getSchema(Q){let X;while(typeof(X=b8.call(this,Q))=="string")Q=X;if(X===void 0){const{schemaId:Y}=this.opts,$=new t0.SchemaEnv({schema:{},schemaId:Y});if(X=t0.resolveSchema.call(this,$,Q),!X)return;this.refs[Q]=X}return X.validate||this._compileSchemaEnv(X)}removeSchema(Q){if(Q instanceof RegExp)return this._removeAllSchemas(this.schemas,Q),this._removeAllSchemas(this.refs,Q),this;switch(typeof Q){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const X=b8.call(this,Q);if(typeof X=="object")this._cache.delete(X.schema);return delete this.schemas[Q],delete this.refs[Q],this}case"object":{const X=Q;this._cache.delete(X);let Y=Q[this.opts.schemaId];if(Y)Y=o0.normalizeId(Y),delete this.schemas[Y],delete this.refs[Y];return this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(Q){for(let X of Q)this.addKeyword(X);return this}addKeyword(Q,X){let Y;if(typeof Q=="string"){if(Y=Q,typeof X=="object")this.logger.warn("these parameters are deprecated, see docs for addKeyword"),X.keyword=Y}else if(typeof Q=="object"&&X===void 0){if(X=Q,Y=X.keyword,Array.isArray(Y)&&!Y.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(yW.call(this,Y,X),!X)return y6.eachItem(Y,(Z)=>u6.call(this,Z)),this;_W.call(this,X);const $={...X,type:C1.getJSONTypes(X.type),schemaType:C1.getJSONTypes(X.schemaType)};return y6.eachItem(Y,$.type.length===0?(Z)=>u6.call(this,Z,$):(Z)=>$.type.forEach((J)=>u6.call(this,Z,$,J))),this}getKeyword(Q){const X=this.RULES.all[Q];return typeof X=="object"?X.definition:!!X}removeKeyword(Q){const{RULES:X}=this;delete X.keywords[Q],delete X.all[Q];for(let Y of X.rules){const $=Y.rules.findIndex((Z)=>Z.keyword===Q);if($>=0)Y.rules.splice($,1)}return this}addFormat(Q,X){if(typeof X=="string")X=new RegExp(X);return this.formats[Q]=X,this}errorsText(Q=this.errors,{separator:X=", ",dataVar:Y="data"}={}){if(!Q||Q.length===0)return"No errors";return Q.map(($)=>`${Y}${$.instancePath} ${$.message}`).reduce(($,Z)=>$+X+Z)}$dataMetaSchema(Q,X){const Y=this.RULES.all;Q=JSON.parse(JSON.stringify(Q));for(let $ of X){const Z=$.split("/").slice(1);let J=Q;for(let W of Z)J=J[W];for(let W in Y){const G=Y[W];if(typeof G!="object")continue;const{$data:F}=G.definition,z=J[W];if(F&&z)J[W]=v8(z)}}return Q}_removeAllSchemas(Q,X){for(let Y in Q){const $=Q[Y];if(!X||X.test(Y)){if(typeof $=="string")delete Q[Y];else if($&&!$.meta)this._cache.delete($.schema),delete Q[Y]}}}_addSchema(Q,X,Y,$=this.opts.validateSchema,Z=this.opts.addUsedSchema){let J;const{schemaId:W}=this.opts;if(typeof Q=="object")J=Q[W];else if(this.opts.jtd)throw new Error("schema must be object");else if(typeof Q!="boolean")throw new Error("schema must be object or boolean");let G=this._cache.get(Q);if(G!==void 0)return G;Y=o0.normalizeId(J||Y);const F=o0.getSchemaRefs.call(this,Q,Y);if(G=new t0.SchemaEnv({schema:Q,schemaId:W,meta:X,baseId:Y,localRefs:F}),this._cache.set(G.schema,G),Z&&!Y.startsWith("#")){if(Y)this._checkUnique(Y);this.refs[Y]=G}if($)this.validateSchema(Q,!0);return G}_checkUnique(Q){if(this.schemas[Q]||this.refs[Q])throw new Error(`schema with key or id "${Q}" already exists`)}_compileSchemaEnv(Q){if(Q.meta)this._compileMetaSchema(Q);else t0.compileSchema.call(this,Q);if(!Q.validate)throw new Error("ajv implementation error");return Q.validate}_compileMetaSchema(Q){const X=this.opts;this.opts=this._metaOpts;try{t0.compileSchema.call(this,Q)}finally{this.opts=X}}}k1.ValidationError=DW.default;k1.MissingRefError=C8.default;H0.default=k1;var vW={log(){},warn(){},error(){}},uW=/^[a-z_$][a-z0-9_$:-]*$/i,lW={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}});var y8=O((u8)=>{Object.defineProperty(u8,"__esModule",{value:!0});var mW={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};u8.default=mW});var m8=O((g8)=>{var l8=function(Q,X){const{gen:Y}=Q;return X.validate?Y.scopeValue("validate",{ref:X.validate}):m._`${Y.scopeValue("wrapper",{ref:X})}.validate`},f1=function(Q,X,Y,$){const{gen:Z,it:J}=Q,{allErrors:W,schemaEnv:G,opts:F}=J,z=F.passContext?v0.default.this:m.nil;if($)q();else H();function q(){if(!G.$async)throw new Error("async schema referenced by sync schema");const M=Z.let("valid");Z.try(()=>{if(Z.code(m._`await ${x8.callValidateCode(Q,X,z)}`),A(X),!W)Z.assign(M,!0)},(K)=>{if(Z.if(m._`!(${K} instanceof ${J.ValidationError})`,()=>Z.throw(K)),V(K),!W)Z.assign(M,!1)}),Q.ok(M)}function H(){Q.result(x8.callValidateCode(Q,X,z),()=>A(X),()=>V(X))}function V(M){const K=m._`${M}.errors`;Z.assign(v0.default.vErrors,m._`${v0.default.vErrors} === null ? ${K} : ${v0.default.vErrors}.concat(${K})`),Z.assign(v0.default.errors,m._`${v0.default.vErrors}.length`)}function A(M){var K;if(!J.opts.unevaluated)return;const j=(K=Y===null||Y===void 0?void 0:Y.validate)===null||K===void 0?void 0:K.evaluated;if(J.props!==!0)if(j&&!j.dynamicProps){if(j.props!==void 0)J.props=v1.mergeEvaluated.props(Z,j.props,J.props)}else{const L=Z.var("props",m._`${M}.evaluated.props`);J.props=v1.mergeEvaluated.props(Z,L,J.props,m.Name)}if(J.items!==!0)if(j&&!j.dynamicItems){if(j.items!==void 0)J.items=v1.mergeEvaluated.items(Z,j.items,J.items)}else{const L=Z.var("items",m._`${M}.evaluated.items`);J.items=v1.mergeEvaluated.items(Z,L,J.items,m.Name)}}};Object.defineProperty(g8,"__esModule",{value:!0});g8.callRef=g8.getValidate=void 0;var iW=c0(),x8=d(),m=I(),v0=z0(),_8=R1(),v1=S(),dW={keyword:"$ref",schemaType:"string",code(Q){const{gen:X,schema:Y,it:$}=Q,{baseId:Z,schemaEnv:J,validateName:W,opts:G,self:F}=$,{root:z}=J;if((Y==="#"||Y==="#/")&&Z===z.baseId)return H();const q=_8.resolveRef.call(F,z,Z,Y);if(q===void 0)throw new iW.default($.opts.uriResolver,Z,Y);if(q instanceof _8.SchemaEnv)return V(q);return A(q);function H(){if(J===z)return f1(Q,W,J,J.$async);const M=X.scopeValue("root",{ref:z});return f1(Q,m._`${M}.validate`,z,z.$async)}function V(M){const K=l8(Q,M);f1(Q,K,M,M.$async)}function A(M){const K=X.scopeValue("schema",G.code.source===!0?{ref:M,code:m.stringify(M)}:{ref:M}),j=X.name("valid"),L=Q.subschema({schema:M,dataTypes:[],schemaPath:m.nil,topSchemaRef:K,errSchemaPath:Y},j);Q.mergeEvaluated(L),Q.ok(j)}}};g8.getValidate=l8;g8.callRef=f1;g8.default=dW});var i8=O((p8)=>{Object.defineProperty(p8,"__esModule",{value:!0});var rW=y8(),aW=m8(),tW=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",rW.default,aW.default];p8.default=tW});var n8=O((d8)=>{Object.defineProperty(d8,"__esModule",{value:!0});var u1=I(),L0=u1.operators,y1={maximum:{okStr:"<=",ok:L0.LTE,fail:L0.GT},minimum:{okStr:">=",ok:L0.GTE,fail:L0.LT},exclusiveMaximum:{okStr:"<",ok:L0.LT,fail:L0.GTE},exclusiveMinimum:{okStr:">",ok:L0.GT,fail:L0.LTE}},sW={message:({keyword:Q,schemaCode:X})=>u1.str`must be ${y1[Q].okStr} ${X}`,params:({keyword:Q,schemaCode:X})=>u1._`{comparison: ${y1[Q].okStr}, limit: ${X}}`},eW={keyword:Object.keys(y1),type:"number",schemaType:"number",$data:!0,error:sW,code(Q){const{keyword:X,data:Y,schemaCode:$}=Q;Q.fail$data(u1._`${Y} ${y1[X].fail} ${$} || isNaN(${Y})`)}};d8.default=eW});var r8=O((c8)=>{Object.defineProperty(c8,"__esModule",{value:!0});var s0=I(),XG={message:({schemaCode:Q})=>s0.str`must be multiple of ${Q}`,params:({schemaCode:Q})=>s0._`{multipleOf: ${Q}}`},YG={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:XG,code(Q){const{gen:X,data:Y,schemaCode:$,it:Z}=Q,J=Z.opts.multipleOfPrecision,W=X.let("res"),G=J?s0._`Math.abs(Math.round(${W}) - ${W}) > 1e-${J}`:s0._`${W} !== parseInt(${W})`;Q.fail$data(s0._`(${$} === 0 || (${W} = ${Y}/${$}, ${G}))`)}};c8.default=YG});var o8=O((t8)=>{var a8=function(Q){const X=Q.length;let Y=0,$=0,Z;while($<X)if(Y++,Z=Q.charCodeAt($++),Z>=55296&&Z<=56319&&$<X){if(Z=Q.charCodeAt($),(Z&64512)===56320)$++}return Y};Object.defineProperty(t8,"__esModule",{value:!0});t8.default=a8;a8.code='require("ajv/dist/runtime/ucs2length").default'});var e8=O((s8)=>{Object.defineProperty(s8,"__esModule",{value:!0});var T0=I(),JG=S(),WG=o8(),GG={message({keyword:Q,schemaCode:X}){const Y=Q==="maxLength"?"more":"fewer";return T0.str`must NOT have ${Y} than ${X} characters`},params:({schemaCode:Q})=>T0._`{limit: ${Q}}`},zG={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:GG,code(Q){const{keyword:X,data:Y,schemaCode:$,it:Z}=Q,J=X==="maxLength"?T0.operators.GT:T0.operators.LT,W=Z.opts.unicode===!1?T0._`${Y}.length`:T0._`${JG.useFunc(Q.gen,WG.default)}(${Y})`;Q.fail$data(T0._`${W} ${J} ${$}`)}};s8.default=zG});var X5=O((Q5)=>{Object.defineProperty(Q5,"__esModule",{value:!0});var qG=d(),x1=I(),HG={message:({schemaCode:Q})=>x1.str`must match pattern "${Q}"`,params:({schemaCode:Q})=>x1._`{pattern: ${Q}}`},KG={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:HG,code(Q){const{data:X,$data:Y,schema:$,schemaCode:Z,it:J}=Q,W=J.opts.unicodeRegExp?"u":"",G=Y?x1._`(new RegExp(${Z}, ${W}))`:qG.usePattern(Q,$);Q.fail$data(x1._`!${G}.test(${X})`)}};Q5.default=KG});var $5=O((Y5)=>{Object.defineProperty(Y5,"__esModule",{value:!0});var e0=I(),OG={message({keyword:Q,schemaCode:X}){const Y=Q==="maxProperties"?"more":"fewer";return e0.str`must NOT have ${Y} than ${X} properties`},params:({schemaCode:Q})=>e0._`{limit: ${Q}}`},VG={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:OG,code(Q){const{keyword:X,data:Y,schemaCode:$}=Q,Z=X==="maxProperties"?e0.operators.GT:e0.operators.LT;Q.fail$data(e0._`Object.keys(${Y}).length ${Z} ${$}`)}};Y5.default=VG});var J5=O((Z5)=>{Object.defineProperty(Z5,"__esModule",{value:!0});var Q1=d(),X1=I(),AG=S(),LG={message:({params:{missingProperty:Q}})=>X1.str`must have required property '${Q}'`,params:({params:{missingProperty:Q}})=>X1._`{missingProperty: ${Q}}`},UG={keyword:"required",type:"object",schemaType:"array",$data:!0,error:LG,code(Q){const{gen:X,schema:Y,schemaCode:$,data:Z,$data:J,it:W}=Q,{opts:G}=W;if(!J&&Y.length===0)return;const F=Y.length>=G.loopRequired;if(W.allErrors)z();else q();if(G.strictRequired){const A=Q.parentSchema.properties,{definedProperties:M}=Q.it;for(let K of Y)if((A===null||A===void 0?void 0:A[K])===void 0&&!M.has(K)){const j=W.schemaEnv.baseId+W.errSchemaPath,L=`required property "${K}" is not defined at "${j}" (strictRequired)`;AG.checkStrictMode(W,L,W.opts.strictRequired)}}function z(){if(F||J)Q.block$data(X1.nil,H);else for(let A of Y)Q1.checkReportMissingProp(Q,A)}function q(){const A=X.let("missing");if(F||J){const M=X.let("valid",!0);Q.block$data(M,()=>V(A,M)),Q.ok(M)}else X.if(Q1.checkMissingProp(Q,Y,A)),Q1.reportMissingProp(Q,A),X.else()}function H(){X.forOf("prop",$,(A)=>{Q.setParams({missingProperty:A}),X.if(Q1.noPropertyInData(X,Z,A,G.ownProperties),()=>Q.error())})}function V(A,M){Q.setParams({missingProperty:A}),X.forOf(A,$,()=>{X.assign(M,Q1.propertyInData(X,Z,A,G.ownProperties)),X.if(X1.not(M),()=>{Q.error(),X.break()})},X1.nil)}}};Z5.default=UG});var G5=O((W5)=>{Object.defineProperty(W5,"__esModule",{value:!0});var Y1=I(),NG={message({keyword:Q,schemaCode:X}){const Y=Q==="maxItems"?"more":"fewer";return Y1.str`must NOT have ${Y} than ${X} items`},params:({schemaCode:Q})=>Y1._`{limit: ${Q}}`},BG={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:NG,code(Q){const{keyword:X,data:Y,schemaCode:$}=Q,Z=X==="maxItems"?Y1.operators.GT:Y1.operators.LT;Q.fail$data(Y1._`${Y}.length ${Z} ${$}`)}};W5.default=BG});var _1=O((F5)=>{Object.defineProperty(F5,"__esModule",{value:!0});var z5=B6();z5.code='require("ajv/dist/runtime/equal").default';F5.default=z5});var H5=O((q5)=>{Object.defineProperty(q5,"__esModule",{value:!0});var x6=m0(),v=I(),PG=S(),EG=_1(),RG={message:({params:{i:Q,j:X}})=>v.str`must NOT have duplicate items (items ## ${X} and ${Q} are identical)`,params:({params:{i:Q,j:X}})=>v._`{i: ${Q}, j: ${X}}`},SG={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:RG,code(Q){const{gen:X,data:Y,$data:$,schema:Z,parentSchema:J,schemaCode:W,it:G}=Q;if(!$&&!Z)return;const F=X.let("valid"),z=J.items?x6.getSchemaTypes(J.items):[];Q.block$data(F,q,v._`${W} === false`),Q.ok(F);function q(){const M=X.let("i",v._`${Y}.length`),K=X.let("j");Q.setParams({i:M,j:K}),X.assign(F,!0),X.if(v._`${M} > 1`,()=>(H()?V:A)(M,K))}function H(){return z.length>0&&!z.some((M)=>M==="object"||M==="array")}function V(M,K){const j=X.name("item"),L=x6.checkDataTypes(z,j,G.opts.strictNumbers,x6.DataType.Wrong),E=X.const("indices",v._`{}`);X.for(v._`;${M}--;`,()=>{if(X.let(j,v._`${Y}[${M}]`),X.if(L,v._`continue`),z.length>1)X.if(v._`typeof ${j} == "string"`,v._`${j} += "_"`);X.if(v._`typeof ${E}[${j}] == "number"`,()=>{X.assign(K,v._`${E}[${j}]`),Q.error(),X.assign(F,!1).break()}).code(v._`${E}[${j}] = ${M}`)})}function A(M,K){const j=PG.useFunc(X,EG.default),L=X.name("outer");X.label(L).for(v._`;${M}--;`,()=>X.for(v._`${K} = ${M}; ${K}--;`,()=>X.if(v._`${j}(${Y}[${M}], ${Y}[${K}])`,()=>{Q.error(),X.assign(F,!1).break(L)})))}}};q5.default=SG});var M5=O((K5)=>{Object.defineProperty(K5,"__esModule",{value:!0});var _6=I(),bG=S(),CG=_1(),kG={message:"must be equal to constant",params:({schemaCode:Q})=>_6._`{allowedValue: ${Q}}`},vG={keyword:"const",$data:!0,error:kG,code(Q){const{gen:X,data:Y,$data:$,schemaCode:Z,schema:J}=Q;if($||J&&typeof J=="object")Q.fail$data(_6._`!${bG.useFunc(X,CG.default)}(${Y}, ${Z})`);else Q.fail(_6._`${J} !== ${Y}`)}};K5.default=vG});var V5=O((O5)=>{Object.defineProperty(O5,"__esModule",{value:!0});var $1=I(),uG=S(),yG=_1(),xG={message:"must be equal to one of the allowed values",params:({schemaCode:Q})=>$1._`{allowedValues: ${Q}}`},_G={keyword:"enum",schemaType:"array",$data:!0,error:xG,code(Q){const{gen:X,data:Y,$data:$,schema:Z,schemaCode:J,it:W}=Q;if(!$&&Z.length===0)throw new Error("enum must have non-empty array");const G=Z.length>=W.opts.loopEnum;let F;const z=()=>F!==null&&F!==void 0?F:F=uG.useFunc(X,yG.default);let q;if(G||$)q=X.let("valid"),Q.block$data(q,H);else{if(!Array.isArray(Z))throw new Error("ajv implementation error");const A=X.const("vSchema",J);q=$1.or(...Z.map((M,K)=>V(A,K)))}Q.pass(q);function H(){X.assign(q,!1),X.forOf("v",J,(A)=>X.if($1._`${z()}(${Y}, ${A})`,()=>X.assign(q,!0).break()))}function V(A,M){const K=Z[M];return typeof K==="object"&&K!==null?$1._`${z()}(${Y}, ${A}[${M}])`:$1._`${Y} === ${K}`}}};O5.default=_G});var A5=O((j5)=>{Object.defineProperty(j5,"__esModule",{value:!0});var gG=n8(),hG=r8(),mG=e8(),pG=X5(),iG=$5(),dG=J5(),nG=G5(),cG=H5(),rG=M5(),aG=V5(),tG=[gG.default,hG.default,mG.default,pG.default,iG.default,dG.default,nG.default,cG.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},rG.default,aG.default];j5.default=tG});var g6=O((U5)=>{var L5=function(Q,X){const{gen:Y,schema:$,data:Z,keyword:J,it:W}=Q;W.items=!0;const G=Y.const("len",P0._`${Z}.length`);if($===!1)Q.setParams({len:X.length}),Q.pass(P0._`${G} <= ${X.length}`);else if(typeof $=="object"&&!l6.alwaysValidSchema(W,$)){const z=Y.var("valid",P0._`${G} <= ${X.length}`);Y.if(P0.not(z),()=>F(z)),Q.ok(z)}function F(z){Y.forRange("i",X.length,G,(q)=>{if(Q.subschema({keyword:J,dataProp:q,dataPropType:l6.Type.Num},z),!W.allErrors)Y.if(P0.not(z),()=>Y.break())})}};Object.defineProperty(U5,"__esModule",{value:!0});U5.validateAdditionalItems=void 0;var P0=I(),l6=S(),sG={message:({params:{len:Q}})=>P0.str`must NOT have more than ${Q} items`,params:({params:{len:Q}})=>P0._`{limit: ${Q}}`},eG={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:sG,code(Q){const{parentSchema:X,it:Y}=Q,{items:$}=X;if(!Array.isArray($)){l6.checkStrictMode(Y,'"additionalItems" is ignored when "items" is not an array of schemas');return}L5(Q,$)}};U5.validateAdditionalItems=L5;U5.default=eG});var h6=O((I5)=>{var B5=function(Q,X,Y=Q.schema){const{gen:$,parentSchema:Z,data:J,keyword:W,it:G}=Q;if(q(Z),G.opts.unevaluated&&Y.length&&G.items!==!0)G.items=l1.mergeEvaluated.items($,Y.length,G.items);const F=$.name("valid"),z=$.const("len",N5._`${J}.length`);Y.forEach((H,V)=>{if(l1.alwaysValidSchema(G,H))return;$.if(N5._`${z} > ${V}`,()=>Q.subschema({keyword:W,schemaProp:V,dataProp:V},F)),Q.ok(F)});function q(H){const{opts:V,errSchemaPath:A}=G,M=Y.length,K=M===H.minItems&&(M===H.maxItems||H[X]===!1);if(V.strictTuples&&!K){const j=`"${W}" is ${M}-tuple, but minItems or maxItems/${X} are not specified or different at path "${A}"`;l1.checkStrictMode(G,j,V.strictTuples)}}};Object.defineProperty(I5,"__esModule",{value:!0});I5.validateTuple=void 0;var N5=I(),l1=S(),X3=d(),Y3={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(Q){const{schema:X,it:Y}=Q;if(Array.isArray(X))return B5(Q,"additionalItems",X);if(Y.items=!0,l1.alwaysValidSchema(Y,X))return;Q.ok(X3.validateArray(Q))}};I5.validateTuple=B5;I5.default=Y3});var E5=O((P5)=>{Object.defineProperty(P5,"__esModule",{value:!0});var Z3=h6(),J3={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:(Q)=>Z3.validateTuple(Q,"items")};P5.default=J3});var w5=O((S5)=>{Object.defineProperty(S5,"__esModule",{value:!0});var R5=I(),G3=S(),z3=d(),F3=g6(),q3={message:({params:{len:Q}})=>R5.str`must NOT have more than ${Q} items`,params:({params:{len:Q}})=>R5._`{limit: ${Q}}`},H3={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:q3,code(Q){const{schema:X,parentSchema:Y,it:$}=Q,{prefixItems:Z}=Y;if($.items=!0,G3.alwaysValidSchema($,X))return;if(Z)F3.validateAdditionalItems(Q,Z);else Q.ok(z3.validateArray(Q))}};S5.default=H3});var C5=O((b5)=>{Object.defineProperty(b5,"__esModule",{value:!0});var n=I(),g1=S(),M3={message:({params:{min:Q,max:X}})=>X===void 0?n.str`must contain at least ${Q} valid item(s)`:n.str`must contain at least ${Q} and no more than ${X} valid item(s)`,params:({params:{min:Q,max:X}})=>X===void 0?n._`{minContains: ${Q}}`:n._`{minContains: ${Q}, maxContains: ${X}}`},O3={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:M3,code(Q){const{gen:X,schema:Y,parentSchema:$,data:Z,it:J}=Q;let W,G;const{minContains:F,maxContains:z}=$;if(J.opts.next)W=F===void 0?1:F,G=z;else W=1;const q=X.const("len",n._`${Z}.length`);if(Q.setParams({min:W,max:G}),G===void 0&&W===0){g1.checkStrictMode(J,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(G!==void 0&&W>G){g1.checkStrictMode(J,'"minContains" > "maxContains" is always invalid'),Q.fail();return}if(g1.alwaysValidSchema(J,Y)){let K=n._`${q} >= ${W}`;if(G!==void 0)K=n._`${K} && ${q} <= ${G}`;Q.pass(K);return}J.items=!0;const H=X.name("valid");if(G===void 0&&W===1)A(H,()=>X.if(H,()=>X.break()));else if(W===0){if(X.let(H,!0),G!==void 0)X.if(n._`${Z}.length > 0`,V)}else X.let(H,!1),V();Q.result(H,()=>Q.reset());function V(){const K=X.name("_valid"),j=X.let("count",0);A(K,()=>X.if(K,()=>M(j)))}function A(K,j){X.forRange("i",0,q,(L)=>{Q.subschema({keyword:"contains",dataProp:L,dataPropType:g1.Type.Num,compositeRule:!0},K),j()})}function M(K){if(X.code(n._`${K}++`),G===void 0)X.if(n._`${K} >= ${W}`,()=>X.assign(H,!0).break());else if(X.if(n._`${K} > ${G}`,()=>X.assign(H,!1).break()),W===1)X.assign(H,!0);else X.if(n._`${K} >= ${W}`,()=>X.assign(H,!0))}}};b5.default=O3});var x5=O((f5)=>{var L3=function({schema:Q}){const X={},Y={};for(let $ in Q){if($==="__proto__")continue;const Z=Array.isArray(Q[$])?X:Y;Z[$]=Q[$]}return[X,Y]},k5=function(Q,X=Q.schema){const{gen:Y,data:$,it:Z}=Q;if(Object.keys(X).length===0)return;const J=Y.let("missing");for(let W in X){const G=X[W];if(G.length===0)continue;const F=Z1.propertyInData(Y,$,W,Z.opts.ownProperties);if(Q.setParams({property:W,depsCount:G.length,deps:G.join(", ")}),Z.allErrors)Y.if(F,()=>{for(let z of G)Z1.checkReportMissingProp(Q,z)});else Y.if(m6._`${F} && (${Z1.checkMissingProp(Q,G,J)})`),Z1.reportMissingProp(Q,J),Y.else()}},v5=function(Q,X=Q.schema){const{gen:Y,data:$,keyword:Z,it:J}=Q,W=Y.name("valid");for(let G in X){if(j3.alwaysValidSchema(J,X[G]))continue;Y.if(Z1.propertyInData(Y,$,G,J.opts.ownProperties),()=>{const F=Q.subschema({keyword:Z,schemaProp:G},W);Q.mergeValidEvaluated(F,W)},()=>Y.var(W,!0)),Q.ok(W)}};Object.defineProperty(f5,"__esModule",{value:!0});f5.validateSchemaDeps=f5.validatePropertyDeps=f5.error=void 0;var m6=I(),j3=S(),Z1=d();f5.error={message:({params:{property:Q,depsCount:X,deps:Y}})=>{const $=X===1?"property":"properties";return m6.str`must have ${$} ${Y} when property ${Q} is present`},params:({params:{property:Q,depsCount:X,deps:Y,missingProperty:$}})=>m6._`{property: ${Q},
    missingProperty: ${$},
    depsCount: ${X},
    deps: ${Y}}`};var A3={keyword:"dependencies",type:"object",schemaType:"object",error:f5.error,code(Q){const[X,Y]=L3(Q);k5(Q,X),v5(Q,Y)}};f5.validatePropertyDeps=k5;f5.validateSchemaDeps=v5;f5.default=A3});var g5=O((l5)=>{Object.defineProperty(l5,"__esModule",{value:!0});var _5=I(),N3=S(),B3={message:"property name must be valid",params:({params:Q})=>_5._`{propertyName: ${Q.propertyName}}`},I3={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:B3,code(Q){const{gen:X,schema:Y,data:$,it:Z}=Q;if(N3.alwaysValidSchema(Z,Y))return;const J=X.name("valid");X.forIn("key",$,(W)=>{Q.setParams({propertyName:W}),Q.subschema({keyword:"propertyNames",data:W,dataTypes:["string"],propertyName:W,compositeRule:!0},J),X.if(_5.not(J),()=>{if(Q.error(!0),!Z.allErrors)X.break()})}),Q.ok(J)}};l5.default=I3});var p6=O((h5)=>{Object.defineProperty(h5,"__esModule",{value:!0});var h1=d(),e=I(),P3=z0(),m1=S(),E3={message:"must NOT have additional properties",params:({params:Q})=>e._`{additionalProperty: ${Q.additionalProperty}}`},R3={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:E3,code(Q){const{gen:X,schema:Y,parentSchema:$,data:Z,errsCount:J,it:W}=Q;if(!J)throw new Error("ajv implementation error");const{allErrors:G,opts:F}=W;if(W.props=!0,F.removeAdditional!=="all"&&m1.alwaysValidSchema(W,Y))return;const z=h1.allSchemaProperties($.properties),q=h1.allSchemaProperties($.patternProperties);H(),Q.ok(e._`${J} === ${P3.default.errors}`);function H(){X.forIn("key",Z,(j)=>{if(!z.length&&!q.length)M(j);else X.if(V(j),()=>M(j))})}function V(j){let L;if(z.length>8){const E=m1.schemaRefOrVal(W,$.properties,"properties");L=h1.isOwnProperty(X,E,j)}else if(z.length)L=e.or(...z.map((E)=>e._`${j} === ${E}`));else L=e.nil;if(q.length)L=e.or(L,...q.map((E)=>e._`${h1.usePattern(Q,E)}.test(${j})`));return e.not(L)}function A(j){X.code(e._`delete ${Z}[${j}]`)}function M(j){if(F.removeAdditional==="all"||F.removeAdditional&&Y===!1){A(j);return}if(Y===!1){if(Q.setParams({additionalProperty:j}),Q.error(),!G)X.break();return}if(typeof Y=="object"&&!m1.alwaysValidSchema(W,Y)){const L=X.name("valid");if(F.removeAdditional==="failing")K(j,L,!1),X.if(e.not(L),()=>{Q.reset(),A(j)});else if(K(j,L),!G)X.if(e.not(L),()=>X.break())}}function K(j,L,E){const T={keyword:"additionalProperties",dataProp:j,dataPropType:m1.Type.Str};if(E===!1)Object.assign(T,{compositeRule:!0,createErrors:!1,allErrors:!1});Q.subschema(T,L)}}};h5.default=R3});var d5=O((i5)=>{Object.defineProperty(i5,"__esModule",{value:!0});var w3=n0(),m5=d(),i6=S(),p5=p6(),b3={keyword:"properties",type:"object",schemaType:"object",code(Q){const{gen:X,schema:Y,parentSchema:$,data:Z,it:J}=Q;if(J.opts.removeAdditional==="all"&&$.additionalProperties===void 0)p5.default.code(new w3.KeywordCxt(J,p5.default,"additionalProperties"));const W=m5.allSchemaProperties(Y);for(let H of W)J.definedProperties.add(H);if(J.opts.unevaluated&&W.length&&J.props!==!0)J.props=i6.mergeEvaluated.props(X,i6.toHash(W),J.props);const G=W.filter((H)=>!i6.alwaysValidSchema(J,Y[H]));if(G.length===0)return;const F=X.name("valid");for(let H of G){if(z(H))q(H);else{if(X.if(m5.propertyInData(X,Z,H,J.opts.ownProperties)),q(H),!J.allErrors)X.else().var(F,!0);X.endIf()}Q.it.definedProperties.add(H),Q.ok(F)}function z(H){return J.opts.useDefaults&&!J.compositeRule&&Y[H].default!==void 0}function q(H){Q.subschema({keyword:"properties",schemaProp:H,dataProp:H},F)}}};i5.default=b3});var t5=O((a5)=>{Object.defineProperty(a5,"__esModule",{value:!0});var n5=d(),p1=I(),c5=S(),r5=S(),k3={keyword:"patternProperties",type:"object",schemaType:"object",code(Q){const{gen:X,schema:Y,data:$,parentSchema:Z,it:J}=Q,{opts:W}=J,G=n5.allSchemaProperties(Y),F=G.filter((K)=>c5.alwaysValidSchema(J,Y[K]));if(G.length===0||F.length===G.length&&(!J.opts.unevaluated||J.props===!0))return;const z=W.strictSchema&&!W.allowMatchingProperties&&Z.properties,q=X.name("valid");if(J.props!==!0&&!(J.props instanceof p1.Name))J.props=r5.evaluatedPropsToName(X,J.props);const{props:H}=J;V();function V(){for(let K of G){if(z)A(K);if(J.allErrors)M(K);else X.var(q,!0),M(K),X.if(q)}}function A(K){for(let j in z)if(new RegExp(K).test(j))c5.checkStrictMode(J,`property ${j} matches pattern ${K} (use allowMatchingProperties)`)}function M(K){X.forIn("key",$,(j)=>{X.if(p1._`${n5.usePattern(Q,K)}.test(${j})`,()=>{const L=F.includes(K);if(!L)Q.subschema({keyword:"patternProperties",schemaProp:K,dataProp:j,dataPropType:r5.Type.Str},q);if(J.opts.unevaluated&&H!==!0)X.assign(p1._`${H}[${j}]`,!0);else if(!L&&!J.allErrors)X.if(p1.not(q),()=>X.break())})})}}};a5.default=k3});var s5=O((o5)=>{Object.defineProperty(o5,"__esModule",{value:!0});var f3=S(),u3={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(Q){const{gen:X,schema:Y,it:$}=Q;if(f3.alwaysValidSchema($,Y)){Q.fail();return}const Z=X.name("valid");Q.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},Z),Q.failResult(Z,()=>Q.reset(),()=>Q.error())},error:{message:"must NOT be valid"}};o5.default=u3});var QQ=O((e5)=>{Object.defineProperty(e5,"__esModule",{value:!0});var x3=d(),_3={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:x3.validateUnion,error:{message:"must match a schema in anyOf"}};e5.default=_3});var YQ=O((XQ)=>{Object.defineProperty(XQ,"__esModule",{value:!0});var i1=I(),g3=S(),h3={message:"must match exactly one schema in oneOf",params:({params:Q})=>i1._`{passingSchemas: ${Q.passing}}`},m3={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:h3,code(Q){const{gen:X,schema:Y,parentSchema:$,it:Z}=Q;if(!Array.isArray(Y))throw new Error("ajv implementation error");if(Z.opts.discriminator&&$.discriminator)return;const J=Y,W=X.let("valid",!1),G=X.let("passing",null),F=X.name("_valid");Q.setParams({passing:G}),X.block(z),Q.result(W,()=>Q.reset(),()=>Q.error(!0));function z(){J.forEach((q,H)=>{let V;if(g3.alwaysValidSchema(Z,q))X.var(F,!0);else V=Q.subschema({keyword:"oneOf",schemaProp:H,compositeRule:!0},F);if(H>0)X.if(i1._`${F} && ${W}`).assign(W,!1).assign(G,i1._`[${G}, ${H}]`).else();X.if(F,()=>{if(X.assign(W,!0),X.assign(G,H),V)Q.mergeEvaluated(V,i1.Name)})})}}};XQ.default=m3});var ZQ=O(($Q)=>{Object.defineProperty($Q,"__esModule",{value:!0});var i3=S(),d3={keyword:"allOf",schemaType:"array",code(Q){const{gen:X,schema:Y,it:$}=Q;if(!Array.isArray(Y))throw new Error("ajv implementation error");const Z=X.name("valid");Y.forEach((J,W)=>{if(i3.alwaysValidSchema($,J))return;const G=Q.subschema({keyword:"allOf",schemaProp:W},Z);Q.ok(Z),Q.mergeEvaluated(G)})}};$Q.default=d3});var zQ=O((GQ)=>{var JQ=function(Q,X){const Y=Q.schema[X];return Y!==void 0&&!WQ.alwaysValidSchema(Q,Y)};Object.defineProperty(GQ,"__esModule",{value:!0});var d1=I(),WQ=S(),c3={message:({params:Q})=>d1.str`must match "${Q.ifClause}" schema`,params:({params:Q})=>d1._`{failingKeyword: ${Q.ifClause}}`},r3={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:c3,code(Q){const{gen:X,parentSchema:Y,it:$}=Q;if(Y.then===void 0&&Y.else===void 0)WQ.checkStrictMode($,'"if" without "then" and "else" is ignored');const Z=JQ($,"then"),J=JQ($,"else");if(!Z&&!J)return;const W=X.let("valid",!0),G=X.name("_valid");if(F(),Q.reset(),Z&&J){const q=X.let("ifClause");Q.setParams({ifClause:q}),X.if(G,z("then",q),z("else",q))}else if(Z)X.if(G,z("then"));else X.if(d1.not(G),z("else"));Q.pass(W,()=>Q.error(!0));function F(){const q=Q.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},G);Q.mergeEvaluated(q)}function z(q,H){return()=>{const V=Q.subschema({keyword:q},G);if(X.assign(W,G),Q.mergeValidEvaluated(V,W),H)X.assign(H,d1._`${q}`);else Q.setParams({ifClause:q})}}}};GQ.default=r3});var qQ=O((FQ)=>{Object.defineProperty(FQ,"__esModule",{value:!0});var t3=S(),o3={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:Q,parentSchema:X,it:Y}){if(X.if===void 0)t3.checkStrictMode(Y,`"${Q}" without "if" is ignored`)}};FQ.default=o3});var KQ=O((HQ)=>{var Vz=function(Q=!1){const X=[Fz.default,qz.default,Hz.default,Kz.default,Mz.default,Oz.default,Jz.default,Wz.default,Zz.default,Gz.default,zz.default];if(Q)X.push(Qz.default,Yz.default);else X.push(e3.default,Xz.default);return X.push($z.default),X};Object.defineProperty(HQ,"__esModule",{value:!0});var e3=g6(),Qz=E5(),Xz=h6(),Yz=w5(),$z=C5(),Zz=x5(),Jz=g5(),Wz=p6(),Gz=d5(),zz=t5(),Fz=s5(),qz=QQ(),Hz=YQ(),Kz=ZQ(),Mz=zQ(),Oz=qQ();HQ.default=Vz});var OQ=O((MQ)=>{Object.defineProperty(MQ,"__esModule",{value:!0});var k=I(),Az={message:({schemaCode:Q})=>k.str`must match format "${Q}"`,params:({schemaCode:Q})=>k._`{format: ${Q}}`},Lz={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Az,code(Q,X){const{gen:Y,data:$,$data:Z,schema:J,schemaCode:W,it:G}=Q,{opts:F,errSchemaPath:z,schemaEnv:q,self:H}=G;if(!F.validateFormats)return;if(Z)V();else A();function V(){const M=Y.scopeValue("formats",{ref:H.formats,code:F.code.formats}),K=Y.const("fDef",k._`${M}[${W}]`),j=Y.let("fType"),L=Y.let("format");Y.if(k._`typeof ${K} == "object" && !(${K} instanceof RegExp)`,()=>Y.assign(j,k._`${K}.type || "string"`).assign(L,k._`${K}.validate`),()=>Y.assign(j,k._`"string"`).assign(L,K)),Q.fail$data(k.or(E(),T()));function E(){if(F.strictSchema===!1)return k.nil;return k._`${W} && !${L}`}function T(){const b=q.$async?k._`(${K}.async ? await ${L}(${$}) : ${L}(${$}))`:k._`${L}(${$})`,N=k._`(typeof ${L} == "function" ? ${b} : ${L}.test(${$}))`;return k._`${L} && ${L} !== true && ${j} === ${X} && !${N}`}}function A(){const M=H.formats[J];if(!M){E();return}if(M===!0)return;const[K,j,L]=T(M);if(K===X)Q.pass(b());function E(){if(F.strictSchema===!1){H.logger.warn(N());return}throw new Error(N());function N(){return`unknown format "${J}" ignored in schema at path "${z}"`}}function T(N){const X0=N instanceof RegExp?k.regexpCode(N):F.code.formats?k._`${F.code.formats}${k.getProperty(J)}`:void 0,J0=Y.scopeValue("formats",{key:J,ref:N,code:X0});if(typeof N=="object"&&!(N instanceof RegExp))return[N.type||"string",N.validate,k._`${J0}.validate`];return["string",N,J0]}function b(){if(typeof M=="object"&&!(M instanceof RegExp)&&M.async){if(!q.$async)throw new Error("async format in sync schema");return k._`await ${L}(${$})`}return typeof j=="function"?k._`${L}(${$})`:k._`${L}.test(${$})`}}}};MQ.default=Lz});var jQ=O((VQ)=>{Object.defineProperty(VQ,"__esModule",{value:!0});var Dz=OQ(),Nz=[Dz.default];VQ.default=Nz});var UQ=O((AQ)=>{Object.defineProperty(AQ,"__esModule",{value:!0});AQ.contentVocabulary=AQ.metadataVocabulary=void 0;AQ.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];AQ.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var BQ=O((NQ)=>{Object.defineProperty(NQ,"__esModule",{value:!0});var Tz=i8(),Pz=A5(),Ez=KQ(),Rz=jQ(),DQ=UQ(),Sz=[Tz.default,Pz.default,Ez.default(),Rz.default,DQ.metadataVocabulary,DQ.contentVocabulary];NQ.default=Sz});var EQ=O((TQ)=>{Object.defineProperty(TQ,"__esModule",{value:!0});TQ.DiscrError=void 0;var IQ;(function(Q){Q.Tag="tag",Q.Mapping="mapping"})(IQ||(TQ.DiscrError=IQ={}))});var wQ=O((SQ)=>{Object.defineProperty(SQ,"__esModule",{value:!0});var f0=I(),d6=EQ(),RQ=R1(),bz=c0(),Cz=S(),kz={message:({params:{discrError:Q,tagName:X}})=>Q===d6.DiscrError.Tag?`tag "${X}" must be string`:`value of tag "${X}" must be in oneOf`,params:({params:{discrError:Q,tag:X,tagName:Y}})=>f0._`{error: ${Q}, tag: ${Y}, tagValue: ${X}}`},vz={keyword:"discriminator",type:"object",schemaType:"object",error:kz,code(Q){const{gen:X,data:Y,schema:$,parentSchema:Z,it:J}=Q,{oneOf:W}=Z;if(!J.opts.discriminator)throw new Error("discriminator: requires discriminator option");const G=$.propertyName;if(typeof G!="string")throw new Error("discriminator: requires propertyName");if($.mapping)throw new Error("discriminator: mapping is not supported");if(!W)throw new Error("discriminator: requires oneOf keyword");const F=X.let("valid",!1),z=X.const("tag",f0._`${Y}${f0.getProperty(G)}`);X.if(f0._`typeof ${z} == "string"`,()=>q(),()=>Q.error(!1,{discrError:d6.DiscrError.Tag,tag:z,tagName:G})),Q.ok(F);function q(){const A=V();X.if(!1);for(let M in A)X.elseIf(f0._`${z} === ${M}`),X.assign(F,H(A[M]));X.else(),Q.error(!1,{discrError:d6.DiscrError.Mapping,tag:z,tagName:G}),X.endIf()}function H(A){const M=X.name("valid"),K=Q.subschema({keyword:"oneOf",schemaProp:A},M);return Q.mergeEvaluated(K,f0.Name),M}function V(){var A;const M={},K=L(Z);let j=!0;for(let b=0;b<W.length;b++){let N=W[b];if((N===null||N===void 0?void 0:N.$ref)&&!Cz.schemaHasRulesButRef(N,J.self.RULES)){const J0=N.$ref;if(N=RQ.resolveRef.call(J.self,J.schemaEnv.root,J.baseId,J0),N instanceof RQ.SchemaEnv)N=N.schema;if(N===void 0)throw new bz.default(J.opts.uriResolver,J.baseId,J0)}const X0=(A=N===null||N===void 0?void 0:N.properties)===null||A===void 0?void 0:A[G];if(typeof X0!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${G}"`);j=j&&(K||L(N)),E(X0,b)}if(!j)throw new Error(`discriminator: "${G}" must be required`);return M;function L({required:b}){return Array.isArray(b)&&b.includes(G)}function E(b,N){if(b.const)T(b.const,N);else if(b.enum)for(let X0 of b.enum)T(X0,N);else throw new Error(`discriminator: "properties/${G}" must have "const" or "enum"`)}function T(b,N){if(typeof b!="string"||b in M)throw new Error(`discriminator: "${G}" values must be unique strings`);M[b]=N}}}};SQ.default=vz});var bQ=O((hH,uz)=>{uz.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var kQ=O((p,n6)=>{Object.defineProperty(p,"__esModule",{value:!0});p.MissingRefError=p.ValidationError=p.CodeGen=p.Name=p.nil=p.stringify=p.str=p._=p.KeywordCxt=p.Ajv=void 0;var yz=f8(),xz=BQ(),_z=wQ(),CQ=bQ(),lz=["/properties"],n1="http://json-schema.org/draft-07/schema";class J1 extends yz.default{_addVocabularies(){if(super._addVocabularies(),xz.default.forEach((Q)=>this.addVocabulary(Q)),this.opts.discriminator)this.addKeyword(_z.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const Q=this.opts.$data?this.$dataMetaSchema(CQ,lz):CQ;this.addMetaSchema(Q,n1,!1),this.refs["http://json-schema.org/schema"]=n1}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(n1)?n1:void 0)}}p.Ajv=J1;n6.exports=p=J1;n6.exports.Ajv=J1;Object.defineProperty(p,"__esModule",{value:!0});p.default=J1;var gz=n0();Object.defineProperty(p,"KeywordCxt",{enumerable:!0,get:function(){return gz.KeywordCxt}});var u0=I();Object.defineProperty(p,"_",{enumerable:!0,get:function(){return u0._}});Object.defineProperty(p,"str",{enumerable:!0,get:function(){return u0.str}});Object.defineProperty(p,"stringify",{enumerable:!0,get:function(){return u0.stringify}});Object.defineProperty(p,"nil",{enumerable:!0,get:function(){return u0.nil}});Object.defineProperty(p,"Name",{enumerable:!0,get:function(){return u0.Name}});Object.defineProperty(p,"CodeGen",{enumerable:!0,get:function(){return u0.CodeGen}});var hz=P1();Object.defineProperty(p,"ValidationError",{enumerable:!0,get:function(){return hz.default}});var mz=c0();Object.defineProperty(p,"MissingRefError",{enumerable:!0,get:function(){return mz.default}})});var nQ=O((iQ)=>{Object.defineProperty(iQ,"__esModule",{value:!0});iQ.default=void 0;var vK=iQ.default="ffffffff-ffff-ffff-ffff-ffffffffffff"});var aQ=O((cQ)=>{Object.defineProperty(cQ,"__esModule",{value:!0});cQ.default=void 0;var uK=cQ.default="00000000-0000-0000-0000-000000000000"});var sQ=O((tQ)=>{Object.defineProperty(tQ,"__esModule",{value:!0});tQ.default=void 0;var xK=tQ.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});var W1=O((eQ)=>{var ZF=function(Q){return Q&&Q.__esModule?Q:{default:Q}},JF=function(Q){return typeof Q==="string"&&$F.default.test(Q)};Object.defineProperty(eQ,"__esModule",{value:!0});eQ.default=void 0;var $F=ZF(sQ()),lK=eQ.default=JF});var G1=O((XX)=>{var GF=function(Q){return Q&&Q.__esModule?Q:{default:Q}},zF=function(Q){if(!WF.default(Q))throw TypeError("Invalid UUID");let X;const Y=new Uint8Array(16);return Y[0]=(X=parseInt(Q.slice(0,8),16))>>>24,Y[1]=X>>>16&255,Y[2]=X>>>8&255,Y[3]=X&255,Y[4]=(X=parseInt(Q.slice(9,13),16))>>>8,Y[5]=X&255,Y[6]=(X=parseInt(Q.slice(14,18),16))>>>8,Y[7]=X&255,Y[8]=(X=parseInt(Q.slice(19,23),16))>>>8,Y[9]=X&255,Y[10]=(X=parseInt(Q.slice(24,36),16))/1099511627776&255,Y[11]=X/4294967296&255,Y[12]=X>>>24&255,Y[13]=X>>>16&255,Y[14]=X>>>8&255,Y[15]=X&255,Y};Object.defineProperty(XX,"__esModule",{value:!0});XX.default=void 0;var WF=GF(W1()),hK=XX.default=zF});var K0=O((ZX)=>{var qF=function(Q){return Q&&Q.__esModule?Q:{default:Q}},$X=function(Q,X=0){return(f[Q[X+0]]+f[Q[X+1]]+f[Q[X+2]]+f[Q[X+3]]+"-"+f[Q[X+4]]+f[Q[X+5]]+"-"+f[Q[X+6]]+f[Q[X+7]]+"-"+f[Q[X+8]]+f[Q[X+9]]+"-"+f[Q[X+10]]+f[Q[X+11]]+f[Q[X+12]]+f[Q[X+13]]+f[Q[X+14]]+f[Q[X+15]]).toLowerCase()},HF=function(Q,X=0){const Y=$X(Q,X);if(!FF.default(Y))throw TypeError("Stringified UUID is invalid");return Y};Object.defineProperty(ZX,"__esModule",{value:!0});ZX.default=void 0;ZX.unsafeStringify=$X;var FF=qF(W1()),f=[];for(let Q=0;Q<256;++Q)f.push((Q+256).toString(16).slice(1));var pK=ZX.default=HF});var a1=O((WX)=>{var OF=function(Q){return Q&&Q.__esModule?Q:{default:Q}},VF=function(){if(c1>r1.length-16)MF.default.randomFillSync(r1),c1=0;return r1.slice(c1,c1+=16)};Object.defineProperty(WX,"__esModule",{value:!0});WX.default=VF;var MF=OF(z1("node:crypto")),r1=new Uint8Array(256),c1=r1.length});var t6=O((GX)=>{var UF=function(Q){return Q&&Q.__esModule?Q:{default:Q}},DF=function(Q,X,Y){let $=X&&Y||0;const Z=X||new Array(16);Q=Q||{};let{node:J,clockseq:W}=Q;if(!Q._v6){if(!J)J=c6;if(W==null)W=t1}if(J==null||W==null){const V=Q.random||(Q.rng||AF.default)();if(J==null){if(J=[V[0],V[1],V[2],V[3],V[4],V[5]],!c6&&!Q._v6)J[0]|=1,c6=J}if(W==null){if(W=(V[6]<<8|V[7])&16383,t1===void 0&&!Q._v6)t1=W}}let G=Q.msecs!==void 0?Q.msecs:Date.now(),F=Q.nsecs!==void 0?Q.nsecs:a6+1;const z=G-r6+(F-a6)/1e4;if(z<0&&Q.clockseq===void 0)W=W+1&16383;if((z<0||G>r6)&&Q.nsecs===void 0)F=0;if(F>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");r6=G,a6=F,t1=W,G+=12219292800000;const q=((G&268435455)*1e4+F)%4294967296;Z[$++]=q>>>24&255,Z[$++]=q>>>16&255,Z[$++]=q>>>8&255,Z[$++]=q&255;const H=G/4294967296*1e4&268435455;Z[$++]=H>>>8&255,Z[$++]=H&255,Z[$++]=H>>>24&15|16,Z[$++]=H>>>16&255,Z[$++]=W>>>8|128,Z[$++]=W&255;for(let V=0;V<6;++V)Z[$+V]=J[V];return X||LF.unsafeStringify(Z)};Object.defineProperty(GX,"__esModule",{value:!0});GX.default=void 0;var AF=UF(a1()),LF=K0(),c6,t1,r6=0,a6=0,nK=GX.default=DF});var o6=O((FX)=>{var IF=function(Q){return Q&&Q.__esModule?Q:{default:Q}},TF=function(Q){const X=typeof Q==="string"?NF.default(Q):Q,Y=PF(X);return typeof Q==="string"?BF.unsafeStringify(Y):Y},PF=function(Q,X=!1){return Uint8Array.of((Q[6]&15)<<4|Q[7]>>4&15,(Q[7]&15)<<4|(Q[4]&240)>>4,(Q[4]&15)<<4|(Q[5]&240)>>4,(Q[5]&15)<<4|(Q[0]&240)>>4,(Q[0]&15)<<4|(Q[1]&240)>>4,(Q[1]&15)<<4|(Q[2]&240)>>4,96|Q[2]&15,Q[3],Q[8],Q[9],Q[10],Q[11],Q[12],Q[13],Q[14],Q[15])};Object.defineProperty(FX,"__esModule",{value:!0});FX.default=TF;var NF=IF(G1()),BF=K0()});var s6=O((qX)=>{var wF=function(Q){return Q&&Q.__esModule?Q:{default:Q}},bF=function(Q){Q=unescape(encodeURIComponent(Q));const X=[];for(let Y=0;Y<Q.length;++Y)X.push(Q.charCodeAt(Y));return X},vF=function(Q,X,Y){function $(Z,J,W,G){var F;if(typeof Z==="string")Z=bF(Z);if(typeof J==="string")J=SF.default(J);if(((F=J)===null||F===void 0?void 0:F.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let z=new Uint8Array(16+Z.length);if(z.set(J),z.set(Z,J.length),z=Y(z),z[6]=z[6]&15|X,z[8]=z[8]&63|128,W){G=G||0;for(let q=0;q<16;++q)W[G+q]=z[q];return W}return RF.unsafeStringify(z)}try{$.name=Q}catch(Z){}return $.DNS=CF,$.URL=kF,$};Object.defineProperty(qX,"__esModule",{value:!0});qX.URL=qX.DNS=void 0;qX.default=vF;var RF=K0(),SF=wF(G1()),CF=qX.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",kF=qX.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});var OX=O((KX)=>{var xF=function(Q){return Q&&Q.__esModule?Q:{default:Q}},_F=function(Q){if(Array.isArray(Q))Q=Buffer.from(Q);else if(typeof Q==="string")Q=Buffer.from(Q,"utf8");return yF.default.createHash("md5").update(Q).digest()};Object.defineProperty(KX,"__esModule",{value:!0});KX.default=void 0;var yF=xF(z1("node:crypto")),tK=KX.default=_F});var LX=O((jX)=>{var VX=function(Q){return Q&&Q.__esModule?Q:{default:Q}};Object.defineProperty(jX,"__esModule",{value:!0});jX.default=void 0;var lF=VX(s6()),gF=VX(OX()),hF=lF.default("v3",48,gF.default),sK=jX.default=hF});var NX=O((UX)=>{var pF=function(Q){return Q&&Q.__esModule?Q:{default:Q}};Object.defineProperty(UX,"__esModule",{value:!0});UX.default=void 0;var mF=pF(z1("node:crypto")),QM=UX.default={randomUUID:mF.default.randomUUID}});var EX=O((TX)=>{var IX=function(Q){return Q&&Q.__esModule?Q:{default:Q}},nF=function(Q,X,Y){if(BX.default.randomUUID&&!X&&!Q)return BX.default.randomUUID();Q=Q||{};const $=Q.random||(Q.rng||iF.default)();if($[6]=$[6]&15|64,$[8]=$[8]&63|128,X){Y=Y||0;for(let Z=0;Z<16;++Z)X[Y+Z]=$[Z];return X}return dF.unsafeStringify($)};Object.defineProperty(TX,"__esModule",{value:!0});TX.default=void 0;var BX=IX(NX()),iF=IX(a1()),dF=K0(),YM=TX.default=nF});var wX=O((RX)=>{var rF=function(Q){return Q&&Q.__esModule?Q:{default:Q}},aF=function(Q){if(Array.isArray(Q))Q=Buffer.from(Q);else if(typeof Q==="string")Q=Buffer.from(Q,"utf8");return cF.default.createHash("sha1").update(Q).digest()};Object.defineProperty(RX,"__esModule",{value:!0});RX.default=void 0;var cF=rF(z1("node:crypto")),ZM=RX.default=aF});var vX=O((CX)=>{var bX=function(Q){return Q&&Q.__esModule?Q:{default:Q}};Object.defineProperty(CX,"__esModule",{value:!0});CX.default=void 0;var tF=bX(s6()),oF=bX(wX()),sF=tF.default("v5",80,oF.default),WM=CX.default=sF});var yX=O((uX)=>{var fX=function(Q){return Q&&Q.__esModule?Q:{default:Q}},Yq=function(Q={},X,Y=0){let $=Qq.default({...Q,_v6:!0},new Uint8Array(16));if($=Xq.default($),X){for(let Z=0;Z<16;Z++)X[Y+Z]=$[Z];return X}return eF.unsafeStringify($)};Object.defineProperty(uX,"__esModule",{value:!0});uX.default=Yq;var eF=K0(),Qq=fX(t6()),Xq=fX(o6())});var _X=O((xX)=>{var Wq=function(Q){return Q&&Q.__esModule?Q:{default:Q}},Gq=function(Q){const X=typeof Q==="string"?Zq.default(Q):Q,Y=zq(X);return typeof Q==="string"?Jq.unsafeStringify(Y):Y},zq=function(Q){return Uint8Array.of((Q[3]&15)<<4|Q[4]>>4&15,(Q[4]&15)<<4|(Q[5]&240)>>4,(Q[5]&15)<<4|Q[6]&15,Q[7],(Q[1]&15)<<4|(Q[2]&240)>>4,(Q[2]&15)<<4|(Q[3]&240)>>4,16|(Q[0]&240)>>4,(Q[0]&15)<<4|(Q[1]&240)>>4,Q[8],Q[9],Q[10],Q[11],Q[12],Q[13],Q[14],Q[15])};Object.defineProperty(xX,"__esModule",{value:!0});xX.default=Gq;var Zq=Wq(G1()),Jq=K0()});var pX=O((hX)=>{var Kq=function(Q){return Q&&Q.__esModule?Q:{default:Q}},Mq=function(Q,X,Y){Q=Q||{};let $=X&&Y||0;const Z=X||new Uint8Array(16),J=Q.random||(Q.rng||qq.default)(),W=Q.msecs!==void 0?Q.msecs:Date.now();let G=Q.seq!==void 0?Q.seq:null,F=gX,z=lX;if(W>Q0&&Q.msecs===void 0){if(Q0=W,G!==null)F=null,z=null}if(G!==null){if(G>2147483647)G=2147483647;F=G>>>19&4095,z=G&524287}if(F===null||z===null)F=J[6]&127,F=F<<8|J[7],z=J[8]&63,z=z<<8|J[9],z=z<<5|J[10]>>>3;if(W+1e4>Q0&&G===null){if(++z>524287){if(z=0,++F>4095)F=0,Q0++}}else Q0=W;return gX=F,lX=z,Z[$++]=Q0/1099511627776&255,Z[$++]=Q0/4294967296&255,Z[$++]=Q0/16777216&255,Z[$++]=Q0/65536&255,Z[$++]=Q0/256&255,Z[$++]=Q0&255,Z[$++]=F>>>4&15|112,Z[$++]=F&255,Z[$++]=z>>>13&63|128,Z[$++]=z>>>5&255,Z[$++]=z<<3&255|J[10]&7,Z[$++]=J[11],Z[$++]=J[12],Z[$++]=J[13],Z[$++]=J[14],Z[$++]=J[15],X||Hq.unsafeStringify(Z)};Object.defineProperty(hX,"__esModule",{value:!0});hX.default=void 0;var qq=Kq(a1()),Hq=K0(),lX=null,gX=null,Q0=0,qM=hX.default=Mq});var nX=O((iX)=>{var Vq=function(Q){return Q&&Q.__esModule?Q:{default:Q}},jq=function(Q){if(!Oq.default(Q))throw TypeError("Invalid UUID");return parseInt(Q.slice(14,15),16)};Object.defineProperty(iX,"__esModule",{value:!0});iX.default=void 0;var Oq=Vq(W1()),KM=iX.default=jq});var cX=O((y)=>{var i=function(Q){return Q&&Q.__esModule?Q:{default:Q}};Object.defineProperty(y,"__esModule",{value:!0});Object.defineProperty(y,"MAX",{enumerable:!0,get:function(){return Aq.default}});Object.defineProperty(y,"NIL",{enumerable:!0,get:function(){return Lq.default}});Object.defineProperty(y,"parse",{enumerable:!0,get:function(){return Uq.default}});Object.defineProperty(y,"stringify",{enumerable:!0,get:function(){return Dq.default}});Object.defineProperty(y,"v1",{enumerable:!0,get:function(){return Nq.default}});Object.defineProperty(y,"v1ToV6",{enumerable:!0,get:function(){return Bq.default}});Object.defineProperty(y,"v3",{enumerable:!0,get:function(){return Iq.default}});Object.defineProperty(y,"v4",{enumerable:!0,get:function(){return Tq.default}});Object.defineProperty(y,"v5",{enumerable:!0,get:function(){return Pq.default}});Object.defineProperty(y,"v6",{enumerable:!0,get:function(){return Eq.default}});Object.defineProperty(y,"v6ToV1",{enumerable:!0,get:function(){return Rq.default}});Object.defineProperty(y,"v7",{enumerable:!0,get:function(){return Sq.default}});Object.defineProperty(y,"validate",{enumerable:!0,get:function(){return wq.default}});Object.defineProperty(y,"version",{enumerable:!0,get:function(){return bq.default}});var Aq=i(nQ()),Lq=i(aQ()),Uq=i(G1()),Dq=i(K0()),Nq=i(t6()),Bq=i(o6()),Iq=i(LX()),Tq=i(EX()),Pq=i(vX()),Eq=i(yX()),Rq=i(_X()),Sq=i(pX()),wq=i(W1()),bq=i(nX())});var W0={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*","Access-Control-Allow-Credentials":"true"},YY=/^(([^<>()[\]\\.,;:\s@"A-Z]+(\.[^<>()[\]\\.,;:\s@"A-Z]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-z\-0-9]+\.)+[a-z]{2,}))$/,$Y=/.*[0-9].*/,xq=(Q)=>YY.exec(Q)?.[0],_q=(Q)=>$Y.exec(Q)?.[0],ZY=(Q)=>Buffer.from(Q,"base64").toString("utf-8"),$9=(Q)=>{const X=Q.split(".");return JSON.parse(ZY(X[1]))},F1=(Q,X)=>{try{return JSON.parse(X)}catch{return Q}};var U0=(Q)=>({statusCode:403,headers:W0,body:typeof Q==="string"?Q:JSON.stringify(Q)}),Z9=(Q,X,Y)=>U0(`User ${Q} has no ${X} rights on node ${Y}`),Y0=(Q)=>({statusCode:400,headers:W0,body:typeof Q==="string"?Q:JSON.stringify(Q)}),J9=(Q)=>({statusCode:401,headers:W0,body:Q?JSON.stringify(Q):"Unauthorized"}),W9=(Q)=>({statusCode:404,headers:W0,body:Q?JSON.stringify(Q):"Not Found"}),G9=(Q)=>({statusCode:422,headers:W0,body:Q?JSON.stringify(Q):"Unprocessable Entity"}),Q6=(Q)=>{if(Q.statusCode)return Q;return console.error(Q),{statusCode:500,headers:W0,body:Q.message}};var pq=Y0({name:"InvalidEmailError",message:"The email must be valid and must not contain upper case letters or spaces."}),iq=Y0({name:"InvalidPasswordError",message:"The password must contain at least 8 characters and at least 1 number."}),dq=Y0({name:"InvalidSrpAError",message:"The SRP A value must be a correctly calculated random hex hash based on big integers."}),nq=Y0({name:"InvalidRefreshTokenError",message:"Refresh token is invalid."}),cq=Y0({name:"VerificationCodeMismatchError",message:"The verification code does not match."}),rq=U0({name:"VerificationCodeExpiredError",message:"The verification code has exipired. Please retry via Reset Password Init (in case of pasword reset) or Register Verify Resend (in case of register)."}),aq=W9({name:"UserNotFoundError",message:"No user was found under the given email or user ID."}),tq=U0({name:"UserNotVerifiedError",message:"The user must be verified with Register Verify operation."}),z9=U0({name:"UserExistsError",message:"There is an existing user with the given email address."}),oq=Y0({name:"UserMissingPasswordChallengeError",message:"The user must have an active require password change challenge."}),sq=U0({name:"PasswordResetRequiredError",message:"The password must be reset."}),eq=G9({name:"PasswordResetMissingParamError",message:"Either a verification code or the users old password are required."}),Q7=U0({name:"LoginVerifyError",message:"The password could not be verified. Please check password, userId, secretBlock, signature and timestamp."});var q1=process.env.AWS_REGION||"",F9=process.env.ADMIN_EMAILS||"",Y7=process.env.CLOUDFRONT_ACCESS_KEY_ID||"",$7=process.env.CLOUDFRONT_NEW_ACCESS_KEY_PARAMETER||"",q9=process.env.INVITE_USER_VALIDATION_VIEW||"",H9=process.env.PULL_LAMBDA_NAME||"",Z7=process.env.MEDIA_DOMAIN||"",r=process.env.CLIENT_ID||"",x0=process.env.USER_POOL_ID||"";var vQ=Y9(kQ(),1);import"aws-lambda";var fQ=(Q,X,{auth:Y=!0}={})=>new Promise(($,Z)=>{let J;try{if(Y)J=$9(X.headers.Authorization||X.headers.authorization||"");else J={}}catch(W){Z(J9());return}try{const W=F1(X.body||{},X.body||""),G=new vQ.Ajv;if(G.addKeyword("example"),G.validate(Q,W)){const z=J.email,q=X.headers["x-as-role"]||"user",H=!!X.headers["x-as-admin"]&&F9.includes(z);$({userEmail:z,body:W,asAdmin:H,asRole:q})}else Z(Y0(JSON.stringify(G.errors)))}catch(W){Z(Y0(W.message))}});import{LambdaClient as dz,InvokeCommand as nz} from"@aws-sdk/client-lambda";var cz=new dz({region:q1,apiVersion:"latest"}),uQ=new TextDecoder,yQ=async(Q,X)=>{const Y=new nz({FunctionName:Q,Payload:JSON.stringify({body:X}),InvocationType:"RequestResponse"});try{const $=await cz.send(Y);if($.FunctionError)return Promise.reject(JSON.parse(uQ.decode($.Payload)));return JSON.parse(uQ.decode($.Payload))}catch($){console.error($);return}};import{AdminCreateUserCommand as rz,AdminDeleteUserCommand as AK,AdminGetUserCommand as az,AdminInitiateAuthCommand as tz,AdminResetUserPasswordCommand as LK,AdminSetUserPasswordCommand as UK,CognitoIdentityProviderClient as oz,ConfirmForgotPasswordCommand as sz,ConfirmSignUpCommand as ez,ForgotPasswordCommand as QF,InitiateAuthCommand as xQ,ListUsersCommand as DK,ResendConfirmationCodeCommand as XF,RespondToAuthChallengeCommand as _Q,SignUpCommand as YF} from"@aws-sdk/client-cognito-identity-provider";var lQ={name:"UserNotVerifiedError",message:"The user must be verified with Register Verify operation."},c=new oz({region:q1,apiVersion:"latest"}),BK=async(Q,X)=>{const Y=new tz({UserPoolId:x0,ClientId:r,AuthFlow:"ADMIN_USER_PASSWORD_AUTH",AuthParameters:{USERNAME:Q,PASSWORD:X}}),$=await c.send(Y);return{accessToken:$?.AuthenticationResult?.AccessToken,expiresIn:$?.AuthenticationResult?.ExpiresIn,idToken:$?.AuthenticationResult?.IdToken,refreshToken:$?.AuthenticationResult?.RefreshToken,session:$?.Session}};var gQ=async(Q,X,Y="default")=>{const $=new rz({UserPoolId:x0,Username:Q,TemporaryPassword:X,ClientMetadata:{templateId:Y}});return c.send($)};var IK=async(Q,X)=>{const Y=new xQ({ClientId:r,AuthFlow:"USER_SRP_AUTH",AuthParameters:{USERNAME:Q,SRP_A:X}}),$=await c.send(Y);return{poolname:x0.split("_")[1],userId:$?.ChallengeParameters?.USERNAME,srpB:$?.ChallengeParameters?.SRP_B,secretBlock:$?.ChallengeParameters?.SECRET_BLOCK,salt:$?.ChallengeParameters?.SALT}},TK=async(Q,X,Y,$)=>{const Z=new _Q({ClientId:r,ChallengeName:"PASSWORD_VERIFIER",ChallengeResponses:{USERNAME:Q,TIMESTAMP:$,PASSWORD_CLAIM_SECRET_BLOCK:X,PASSWORD_CLAIM_SIGNATURE:Y}}),J=await c.send(Z);return{accessToken:J?.AuthenticationResult?.AccessToken,expiresIn:J?.AuthenticationResult?.ExpiresIn,idToken:J?.AuthenticationResult?.IdToken,refreshToken:J?.AuthenticationResult?.RefreshToken}},PK=async(Q)=>{const X=new xQ({ClientId:r,AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:{REFRESH_TOKEN:Q}}),Y=await c.send(X);return{accessToken:Y?.AuthenticationResult?.AccessToken,expiresIn:Y?.AuthenticationResult?.ExpiresIn,idToken:Y?.AuthenticationResult?.IdToken}},EK=async(Q,X,Y=!1)=>{const $=new YF({ClientId:r,Username:Q,Password:X,ClientMetadata:{skipMessage:Y?"true":"false"}});return await c.send($)},RK=async(Q,X)=>{const Y=new ez({ClientId:r,Username:Q,ConfirmationCode:X});await c.send(Y)},SK=async(Q)=>{const X=new XF({ClientId:r,Username:Q});await c.send(X)},wK=async(Q,X=!1)=>{const Y=new QF({ClientId:r,Username:Q,ClientMetadata:{skipMessage:X?"true":"false"}});try{await c.send(Y)}catch($){if(!await mQ(Q))throw lQ;throw $}},bK=async(Q,X,Y)=>{const $=new sz({ClientId:r,Username:Q,Password:X,ConfirmationCode:Y});try{await c.send($)}catch(Z){if(!await mQ(Q))throw lQ;throw Z}},CK=async(Q,X,Y)=>{const $=new _Q({ClientId:r,ChallengeName:"NEW_PASSWORD_REQUIRED",ChallengeResponses:{USERNAME:Q,NEW_PASSWORD:X},Session:Y}),Z=await c.send($);return{accessToken:Z?.AuthenticationResult?.AccessToken,expiresIn:Z?.AuthenticationResult?.ExpiresIn,idToken:Z?.AuthenticationResult?.IdToken,refreshToken:Z?.AuthenticationResult?.RefreshToken}},hQ=async(Q)=>{const X=new az({UserPoolId:x0,Username:Q});return c.send(X)},mQ=async(Q)=>{const{UserStatus:X}=await hQ(Q);return X==="CONFIRMED"},pQ=async(Q)=>{try{return await hQ(Q),!0}catch(X){return!1}};var l=Y9(cX(),1),VM=l.default.v1,jM=l.default.v1ToV6,AM=l.default.v3,rX=l.default.v4,LM=l.default.v5,UM=l.default.v6,DM=l.default.v6ToV1,NM=l.default.v7,BM=l.default.NIL,IM=l.default.MAX,TM=l.default.version,PM=l.default.validate,EM=l.default.stringify,RM=l.default.parse;var Cq=!0,kq={type:"object",properties:{email:{type:"string",description:"Email of the user to be invited."},id:{type:"string",description:"Id of the node the executing user wants to use for rights validation."},templateId:{type:"string",description:"Identifier of the email template that will be used to send credentials to the invited user."}},required:["email","id"]},aX=async({userEmail:Q,body:X,asAdmin:Y})=>{const{email:$,id:Z,templateId:J}=X;if(await pQ($))return z9;const G=F1({},q9),z=await yQ(H9,{userEmail:Q,body:G,asAdmin:Y});if(!(z?.body?JSON.parse(z.body):{})?.rights?.[Z]?.user?.[Q]?.admin)return Z9(Q||"","admin",Z);const H=rX().replace(/-/g,"").slice(0,16);return await gQ($,H,J),{statusCode:201,headers:W0,body:JSON.stringify({message:`User ${$} was successfully invited.`})}},vM=async(Q)=>{try{const X=await fQ(kq,Q,{auth:Cq});return await aX(X)}catch(X){return Q6(X)}},fM=async({body:Q})=>{try{return await aX(Q)}catch(X){return Q6(X)}};export{kq as schema,fM as handleInvoke,vM as handleHttp};

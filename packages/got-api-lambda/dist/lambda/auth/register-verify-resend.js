var ll=Object.create;var No=Object.defineProperty;var pl=Object.getOwnPropertyDescriptor;var dl=Object.getOwnPropertyNames;var ml=Object.getPrototypeOf,hl=Object.prototype.hasOwnProperty;var A=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),yl=(r,e)=>{for(var t in e)No(r,t,{get:e[t],enumerable:!0})},ms=(r,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of dl(e))!hl.call(r,n)&&n!==t&&No(r,n,{get:()=>e[n],enumerable:!(o=pl(e,n))||o.enumerable});return r};var Dn=(r,e,t)=>(t=r!=null?ll(ml(r)):{},ms(e||!r||!r.__esModule?No(t,"default",{value:r,enumerable:!0}):t,r)),vl=r=>ms(No({},"__esModule",{value:!0}),r);var Zt=A(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.regexpCode=K.getEsmExportName=K.getProperty=K.safeStringify=K.stringify=K.strConcat=K.addCodeArg=K.str=K._=K.nil=K._Code=K.Name=K.IDENTIFIER=K._CodeOrName=void 0;var Yt=class{};K._CodeOrName=Yt;K.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Vr=class extends Yt{constructor(e){if(super(),!K.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};K.Name=Vr;var He=class extends Yt{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((t,o)=>`${t}${o}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((t,o)=>(o instanceof Vr&&(t[o.str]=(t[o.str]||0)+1),t),{})}};K._Code=He;K.nil=new He("");function Ms(r,...e){let t=[r[0]],o=0;for(;o<e.length;)fa(t,e[o]),t.push(r[++o]);return new He(t)}K._=Ms;var ca=new He("+");function Fs(r,...e){let t=[Qt(r[0])],o=0;for(;o<e.length;)t.push(ca),fa(t,e[o]),t.push(ca,Qt(r[++o]));return dd(t),new He(t)}K.str=Fs;function fa(r,e){e instanceof He?r.push(...e._items):e instanceof Vr?r.push(e):r.push(yd(e))}K.addCodeArg=fa;function dd(r){let e=1;for(;e<r.length-1;){if(r[e]===ca){let t=md(r[e-1],r[e+1]);if(t!==void 0){r.splice(e-1,3,t);continue}r[e++]="+"}e++}}function md(r,e){if(e==='""')return r;if(r==='""')return e;if(typeof r=="string")return e instanceof Vr||r[r.length-1]!=='"'?void 0:typeof e!="string"?`${r.slice(0,-1)}${e}"`:e[0]==='"'?r.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(r instanceof Vr))return`"${r}${e.slice(1)}`}function hd(r,e){return e.emptyStr()?r:r.emptyStr()?e:Fs`${r}${e}`}K.strConcat=hd;function yd(r){return typeof r=="number"||typeof r=="boolean"||r===null?r:Qt(Array.isArray(r)?r.join(","):r)}function vd(r){return new He(Qt(r))}K.stringify=vd;function Qt(r){return JSON.stringify(r).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}K.safeStringify=Qt;function _d(r){return typeof r=="string"&&K.IDENTIFIER.test(r)?new He(`.${r}`):Ms`[${r}]`}K.getProperty=_d;function gd(r){if(typeof r=="string"&&K.IDENTIFIER.test(r))return new He(`${r}`);throw new Error(`CodeGen: invalid export name: ${r}, use explicit $id name mapping`)}K.getEsmExportName=gd;function xd(r){return new He(r.toString())}K.regexpCode=xd});var ma=A(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.ValueScope=Ae.ValueScopeName=Ae.Scope=Ae.varKinds=Ae.UsedValueState=void 0;var Ce=Zt(),la=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},pa;(function(r){r[r.Started=0]="Started",r[r.Completed=1]="Completed"})(pa=Ae.UsedValueState||(Ae.UsedValueState={}));Ae.varKinds={const:new Ce.Name("const"),let:new Ce.Name("let"),var:new Ce.Name("var")};var zo=class{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof Ce.Name?e:this.name(e)}name(e){return new Ce.Name(this._newName(e))}_newName(e){let t=this._names[e]||this._nameGroup(e);return`${e}${t.index++}`}_nameGroup(e){var t,o;if(!((o=(t=this._parent)===null||t===void 0?void 0:t._prefixes)===null||o===void 0)&&o.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};Ae.Scope=zo;var Ho=class extends Ce.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:o}){this.value=e,this.scopePath=(0,Ce._)`.${new Ce.Name(t)}[${o}]`}};Ae.ValueScopeName=Ho;var wd=(0,Ce._)`\n`,da=class extends zo{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?wd:Ce.nil}}get(){return this._scope}name(e){return new Ho(e,this._newName(e))}value(e,t){var o;if(t.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let n=this.toName(e),{prefix:a}=n,i=(o=t.key)!==null&&o!==void 0?o:t.ref,u=this._values[a];if(u){let m=u.get(i);if(m)return m}else u=this._values[a]=new Map;u.set(i,n);let l=this._scope[a]||(this._scope[a]=[]),d=l.length;return l[d]=t.ref,n.setValue(t,{property:a,itemIndex:d}),n}getValue(e,t){let o=this._values[e];if(o)return o.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,o=>{if(o.scopePath===void 0)throw new Error(`CodeGen: name "${o}" has no value`);return(0,Ce._)`${e}${o.scopePath}`})}scopeCode(e=this._values,t,o){return this._reduceValues(e,n=>{if(n.value===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return n.value.code},t,o)}_reduceValues(e,t,o={},n){let a=Ce.nil;for(let i in e){let u=e[i];if(!u)continue;let l=o[i]=o[i]||new Map;u.forEach(d=>{if(l.has(d))return;l.set(d,pa.Started);let m=t(d);if(m){let v=this.opts.es5?Ae.varKinds.var:Ae.varKinds.const;a=(0,Ce._)`${a}${v} ${d} = ${m};${this.opts._n}`}else if(m=n?.(d))a=(0,Ce._)`${a}${m}${this.opts._n}`;else throw new la(d);l.set(d,pa.Completed)})}return a}};Ae.ValueScope=da});var M=A(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});D.or=D.and=D.not=D.CodeGen=D.operators=D.varKinds=D.ValueScopeName=D.ValueScope=D.Scope=D.Name=D.regexpCode=D.stringify=D.getProperty=D.nil=D.strConcat=D.str=D._=void 0;var L=Zt(),Qe=ma(),Nr=Zt();Object.defineProperty(D,"_",{enumerable:!0,get:function(){return Nr._}});Object.defineProperty(D,"str",{enumerable:!0,get:function(){return Nr.str}});Object.defineProperty(D,"strConcat",{enumerable:!0,get:function(){return Nr.strConcat}});Object.defineProperty(D,"nil",{enumerable:!0,get:function(){return Nr.nil}});Object.defineProperty(D,"getProperty",{enumerable:!0,get:function(){return Nr.getProperty}});Object.defineProperty(D,"stringify",{enumerable:!0,get:function(){return Nr.stringify}});Object.defineProperty(D,"regexpCode",{enumerable:!0,get:function(){return Nr.regexpCode}});Object.defineProperty(D,"Name",{enumerable:!0,get:function(){return Nr.Name}});var Yo=ma();Object.defineProperty(D,"Scope",{enumerable:!0,get:function(){return Yo.Scope}});Object.defineProperty(D,"ValueScope",{enumerable:!0,get:function(){return Yo.ValueScope}});Object.defineProperty(D,"ValueScopeName",{enumerable:!0,get:function(){return Yo.ValueScopeName}});Object.defineProperty(D,"varKinds",{enumerable:!0,get:function(){return Yo.varKinds}});D.operators={GT:new L._Code(">"),GTE:new L._Code(">="),LT:new L._Code("<"),LTE:new L._Code("<="),EQ:new L._Code("==="),NEQ:new L._Code("!=="),NOT:new L._Code("!"),OR:new L._Code("||"),AND:new L._Code("&&"),ADD:new L._Code("+")};var Er=class{optimizeNodes(){return this}optimizeNames(e,t){return this}},ha=class extends Er{constructor(e,t,o){super(),this.varKind=e,this.name=t,this.rhs=o}render({es5:e,_n:t}){let o=e?Qe.varKinds.var:this.varKind,n=this.rhs===void 0?"":` = ${this.rhs}`;return`${o} ${this.name}${n};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=dt(this.rhs,e,t)),this}get names(){return this.rhs instanceof L._CodeOrName?this.rhs.names:{}}},Go=class extends Er{constructor(e,t,o){super(),this.lhs=e,this.rhs=t,this.sideEffects=o}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,t){if(!(this.lhs instanceof L.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=dt(this.rhs,e,t),this}get names(){let e=this.lhs instanceof L.Name?{}:{...this.lhs.names};return Xo(e,this.rhs)}},ya=class extends Go{constructor(e,t,o,n){super(e,o,n),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},va=class extends Er{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},_a=class extends Er{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},ga=class extends Er{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},xa=class extends Er{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=dt(this.code,e,t),this}get names(){return this.code instanceof L._CodeOrName?this.code.names:{}}},eo=class extends Er{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((t,o)=>t+o.render(e),"")}optimizeNodes(){let{nodes:e}=this,t=e.length;for(;t--;){let o=e[t].optimizeNodes();Array.isArray(o)?e.splice(t,1,...o):o?e[t]=o:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){let{nodes:o}=this,n=o.length;for(;n--;){let a=o[n];a.optimizeNames(e,t)||(Ed(e,a.names),o.splice(n,1))}return o.length>0?this:void 0}get names(){return this.nodes.reduce((e,t)=>Kr(e,t.names),{})}},$r=class extends eo{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},wa=class extends eo{},pt=class extends $r{};pt.kind="else";var Br=class r extends $r{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let t=this.else;if(t){let o=t.optimizeNodes();t=this.else=Array.isArray(o)?new pt(o):o}if(t)return e===!1?t instanceof r?t:t.nodes:this.nodes.length?this:new r(Ls(e),t instanceof r?[t]:t.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,t){var o;if(this.else=(o=this.else)===null||o===void 0?void 0:o.optimizeNames(e,t),!!(super.optimizeNames(e,t)||this.else))return this.condition=dt(this.condition,e,t),this}get names(){let e=super.names;return Xo(e,this.condition),this.else&&Kr(e,this.else.names),e}};Br.kind="if";var Wr=class extends $r{};Wr.kind="for";var Ea=class extends Wr{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=dt(this.iteration,e,t),this}get names(){return Kr(super.names,this.iteration.names)}},$a=class extends Wr{constructor(e,t,o,n){super(),this.varKind=e,this.name=t,this.from=o,this.to=n}render(e){let t=e.es5?Qe.varKinds.var:this.varKind,{name:o,from:n,to:a}=this;return`for(${t} ${o}=${n}; ${o}<${a}; ${o}++)`+super.render(e)}get names(){let e=Xo(super.names,this.from);return Xo(e,this.to)}},Jo=class extends Wr{constructor(e,t,o,n){super(),this.loop=e,this.varKind=t,this.name=o,this.iterable=n}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=dt(this.iterable,e,t),this}get names(){return Kr(super.names,this.iterable.names)}},ro=class extends $r{constructor(e,t,o){super(),this.name=e,this.args=t,this.async=o}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};ro.kind="func";var to=class extends eo{render(e){return"return "+super.render(e)}};to.kind="return";var Sa=class extends $r{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(t=this.finally)===null||t===void 0||t.optimizeNodes(),this}optimizeNames(e,t){var o,n;return super.optimizeNames(e,t),(o=this.catch)===null||o===void 0||o.optimizeNames(e,t),(n=this.finally)===null||n===void 0||n.optimizeNames(e,t),this}get names(){let e=super.names;return this.catch&&Kr(e,this.catch.names),this.finally&&Kr(e,this.finally.names),e}},oo=class extends $r{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};oo.kind="catch";var no=class extends $r{render(e){return"finally"+super.render(e)}};no.kind="finally";var ba=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?`
`:""},this._extScope=e,this._scope=new Qe.Scope({parent:e}),this._nodes=[new wa]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){let o=this._extScope.value(e,t);return(this._values[o.prefix]||(this._values[o.prefix]=new Set)).add(o),o}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,o,n){let a=this._scope.toName(t);return o!==void 0&&n&&(this._constants[a.str]=o),this._leafNode(new ha(e,a,o)),a}const(e,t,o){return this._def(Qe.varKinds.const,e,t,o)}let(e,t,o){return this._def(Qe.varKinds.let,e,t,o)}var(e,t,o){return this._def(Qe.varKinds.var,e,t,o)}assign(e,t,o){return this._leafNode(new Go(e,t,o))}add(e,t){return this._leafNode(new ya(e,D.operators.ADD,t))}code(e){return typeof e=="function"?e():e!==L.nil&&this._leafNode(new xa(e)),this}object(...e){let t=["{"];for(let[o,n]of e)t.length>1&&t.push(","),t.push(o),(o!==n||this.opts.es5)&&(t.push(":"),(0,L.addCodeArg)(t,n));return t.push("}"),new L._Code(t)}if(e,t,o){if(this._blockNode(new Br(e)),t&&o)this.code(t).else().code(o).endIf();else if(t)this.code(t).endIf();else if(o)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new Br(e))}else(){return this._elseNode(new pt)}endIf(){return this._endBlockNode(Br,pt)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new Ea(e),t)}forRange(e,t,o,n,a=this.opts.es5?Qe.varKinds.var:Qe.varKinds.let){let i=this._scope.toName(e);return this._for(new $a(a,i,t,o),()=>n(i))}forOf(e,t,o,n=Qe.varKinds.const){let a=this._scope.toName(e);if(this.opts.es5){let i=t instanceof L.Name?t:this.var("_arr",t);return this.forRange("_i",0,(0,L._)`${i}.length`,u=>{this.var(a,(0,L._)`${i}[${u}]`),o(a)})}return this._for(new Jo("of",n,a,t),()=>o(a))}forIn(e,t,o,n=this.opts.es5?Qe.varKinds.var:Qe.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,L._)`Object.keys(${t})`,o);let a=this._scope.toName(e);return this._for(new Jo("in",n,a,t),()=>o(a))}endFor(){return this._endBlockNode(Wr)}label(e){return this._leafNode(new va(e))}break(e){return this._leafNode(new _a(e))}return(e){let t=new to;if(this._blockNode(t),this.code(e),t.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(to)}try(e,t,o){if(!t&&!o)throw new Error('CodeGen: "try" without "catch" and "finally"');let n=new Sa;if(this._blockNode(n),this.code(e),t){let a=this.name("e");this._currNode=n.catch=new oo(a),t(a)}return o&&(this._currNode=n.finally=new no,this.code(o)),this._endBlockNode(oo,no)}throw(e){return this._leafNode(new ga(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){let t=this._blockStarts.pop();if(t===void 0)throw new Error("CodeGen: not in self-balancing block");let o=this._nodes.length-t;if(o<0||e!==void 0&&o!==e)throw new Error(`CodeGen: wrong number of nodes: ${o} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=L.nil,o,n){return this._blockNode(new ro(e,t,o)),n&&this.code(n).endFunc(),this}endFunc(){return this._endBlockNode(ro)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){let o=this._currNode;if(o instanceof e||t&&o instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){let t=this._currNode;if(!(t instanceof Br))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let t=this._nodes;t[t.length-1]=e}};D.CodeGen=ba;function Kr(r,e){for(let t in e)r[t]=(r[t]||0)+(e[t]||0);return r}function Xo(r,e){return e instanceof L._CodeOrName?Kr(r,e.names):r}function dt(r,e,t){if(r instanceof L.Name)return o(r);if(!n(r))return r;return new L._Code(r._items.reduce((a,i)=>(i instanceof L.Name&&(i=o(i)),i instanceof L._Code?a.push(...i._items):a.push(i),a),[]));function o(a){let i=t[a.str];return i===void 0||e[a.str]!==1?a:(delete e[a.str],i)}function n(a){return a instanceof L._Code&&a._items.some(i=>i instanceof L.Name&&e[i.str]===1&&t[i.str]!==void 0)}}function Ed(r,e){for(let t in e)r[t]=(r[t]||0)-(e[t]||0)}function Ls(r){return typeof r=="boolean"||typeof r=="number"||r===null?!r:(0,L._)`!${Pa(r)}`}D.not=Ls;var $d=Vs(D.operators.AND);function Sd(...r){return r.reduce($d)}D.and=Sd;var bd=Vs(D.operators.OR);function Pd(...r){return r.reduce(bd)}D.or=Pd;function Vs(r){return(e,t)=>e===L.nil?t:t===L.nil?e:(0,L._)`${Pa(e)} ${r} ${Pa(t)}`}function Pa(r){return r instanceof L.Name?r:(0,L._)`(${r})`}});var z=A(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.checkStrictMode=U.getErrorPath=U.Type=U.useFunc=U.setEvaluated=U.evaluatedPropsToName=U.mergeEvaluated=U.eachItem=U.unescapeJsonPointer=U.escapeJsonPointer=U.escapeFragment=U.unescapeFragment=U.schemaRefOrVal=U.schemaHasRulesButRef=U.schemaHasRules=U.checkUnknownRules=U.alwaysValidSchema=U.toHash=void 0;var re=M(),Rd=Zt();function Ad(r){let e={};for(let t of r)e[t]=!0;return e}U.toHash=Ad;function Id(r,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(Ks(r,e),!zs(e,r.self.RULES.all))}U.alwaysValidSchema=Id;function Ks(r,e=r.schema){let{opts:t,self:o}=r;if(!t.strictSchema||typeof e=="boolean")return;let n=o.RULES.keywords;for(let a in e)n[a]||Xs(r,`unknown keyword: "${a}"`)}U.checkUnknownRules=Ks;function zs(r,e){if(typeof r=="boolean")return!r;for(let t in r)if(e[t])return!0;return!1}U.schemaHasRules=zs;function Nd(r,e){if(typeof r=="boolean")return!r;for(let t in r)if(t!=="$ref"&&e.all[t])return!0;return!1}U.schemaHasRulesButRef=Nd;function Od({topSchemaRef:r,schemaPath:e},t,o,n){if(!n){if(typeof t=="number"||typeof t=="boolean")return t;if(typeof t=="string")return(0,re._)`${t}`}return(0,re._)`${r}${e}${(0,re.getProperty)(o)}`}U.schemaRefOrVal=Od;function Cd(r){return Hs(decodeURIComponent(r))}U.unescapeFragment=Cd;function Td(r){return encodeURIComponent(Ra(r))}U.escapeFragment=Td;function Ra(r){return typeof r=="number"?`${r}`:r.replace(/~/g,"~0").replace(/\//g,"~1")}U.escapeJsonPointer=Ra;function Hs(r){return r.replace(/~1/g,"/").replace(/~0/g,"~")}U.unescapeJsonPointer=Hs;function kd(r,e){if(Array.isArray(r))for(let t of r)e(t);else e(r)}U.eachItem=kd;function Bs({mergeNames:r,mergeToName:e,mergeValues:t,resultToName:o}){return(n,a,i,u)=>{let l=i===void 0?a:i instanceof re.Name?(a instanceof re.Name?r(n,a,i):e(n,a,i),i):a instanceof re.Name?(e(n,i,a),a):t(a,i);return u===re.Name&&!(l instanceof re.Name)?o(n,l):l}}U.mergeEvaluated={props:Bs({mergeNames:(r,e,t)=>r.if((0,re._)`${t} !== true && ${e} !== undefined`,()=>{r.if((0,re._)`${e} === true`,()=>r.assign(t,!0),()=>r.assign(t,(0,re._)`${t} || {}`).code((0,re._)`Object.assign(${t}, ${e})`))}),mergeToName:(r,e,t)=>r.if((0,re._)`${t} !== true`,()=>{e===!0?r.assign(t,!0):(r.assign(t,(0,re._)`${t} || {}`),Aa(r,t,e))}),mergeValues:(r,e)=>r===!0?!0:{...r,...e},resultToName:Gs}),items:Bs({mergeNames:(r,e,t)=>r.if((0,re._)`${t} !== true && ${e} !== undefined`,()=>r.assign(t,(0,re._)`${e} === true ? true : ${t} > ${e} ? ${t} : ${e}`)),mergeToName:(r,e,t)=>r.if((0,re._)`${t} !== true`,()=>r.assign(t,e===!0?!0:(0,re._)`${t} > ${e} ? ${t} : ${e}`)),mergeValues:(r,e)=>r===!0?!0:Math.max(r,e),resultToName:(r,e)=>r.var("items",e)})};function Gs(r,e){if(e===!0)return r.var("props",!0);let t=r.var("props",(0,re._)`{}`);return e!==void 0&&Aa(r,t,e),t}U.evaluatedPropsToName=Gs;function Aa(r,e,t){Object.keys(t).forEach(o=>r.assign((0,re._)`${e}${(0,re.getProperty)(o)}`,!0))}U.setEvaluated=Aa;var Ws={};function qd(r,e){return r.scopeValue("func",{ref:e,code:Ws[e.code]||(Ws[e.code]=new Rd._Code(e.code))})}U.useFunc=qd;var Js;(function(r){r[r.Num=0]="Num",r[r.Str=1]="Str"})(Js=U.Type||(U.Type={}));function jd(r,e,t){if(r instanceof re.Name){let o=e===Js.Num;return t?o?(0,re._)`"[" + ${r} + "]"`:(0,re._)`"['" + ${r} + "']"`:o?(0,re._)`"/" + ${r}`:(0,re._)`"/" + ${r}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return t?(0,re.getProperty)(r).toString():"/"+Ra(r)}U.getErrorPath=jd;function Xs(r,e,t=r.opts.strictSchema){if(t){if(e=`strict mode: ${e}`,t===!0)throw new Error(e);r.self.logger.warn(e)}}U.checkStrictMode=Xs});var Sr=A(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});var Se=M(),Dd={data:new Se.Name("data"),valCxt:new Se.Name("valCxt"),instancePath:new Se.Name("instancePath"),parentData:new Se.Name("parentData"),parentDataProperty:new Se.Name("parentDataProperty"),rootData:new Se.Name("rootData"),dynamicAnchors:new Se.Name("dynamicAnchors"),vErrors:new Se.Name("vErrors"),errors:new Se.Name("errors"),this:new Se.Name("this"),self:new Se.Name("self"),scope:new Se.Name("scope"),json:new Se.Name("json"),jsonPos:new Se.Name("jsonPos"),jsonLen:new Se.Name("jsonLen"),jsonPart:new Se.Name("jsonPart")};Ia.default=Dd});var ao=A(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.extendErrors=be.resetErrorsCount=be.reportExtraError=be.reportError=be.keyword$DataError=be.keywordError=void 0;var B=M(),Qo=z(),Ie=Sr();be.keywordError={message:({keyword:r})=>(0,B.str)`must pass "${r}" keyword validation`};be.keyword$DataError={message:({keyword:r,schemaType:e})=>e?(0,B.str)`"${r}" keyword must be ${e} ($data)`:(0,B.str)`"${r}" keyword is invalid ($data)`};function Ud(r,e=be.keywordError,t,o){let{it:n}=r,{gen:a,compositeRule:i,allErrors:u}=n,l=Zs(r,e,t);o??(i||u)?Ys(a,l):Qs(n,(0,B._)`[${l}]`)}be.reportError=Ud;function Md(r,e=be.keywordError,t){let{it:o}=r,{gen:n,compositeRule:a,allErrors:i}=o,u=Zs(r,e,t);Ys(n,u),a||i||Qs(o,Ie.default.vErrors)}be.reportExtraError=Md;function Fd(r,e){r.assign(Ie.default.errors,e),r.if((0,B._)`${Ie.default.vErrors} !== null`,()=>r.if(e,()=>r.assign((0,B._)`${Ie.default.vErrors}.length`,e),()=>r.assign(Ie.default.vErrors,null)))}be.resetErrorsCount=Fd;function Ld({gen:r,keyword:e,schemaValue:t,data:o,errsCount:n,it:a}){if(n===void 0)throw new Error("ajv implementation error");let i=r.name("err");r.forRange("i",n,Ie.default.errors,u=>{r.const(i,(0,B._)`${Ie.default.vErrors}[${u}]`),r.if((0,B._)`${i}.instancePath === undefined`,()=>r.assign((0,B._)`${i}.instancePath`,(0,B.strConcat)(Ie.default.instancePath,a.errorPath))),r.assign((0,B._)`${i}.schemaPath`,(0,B.str)`${a.errSchemaPath}/${e}`),a.opts.verbose&&(r.assign((0,B._)`${i}.schema`,t),r.assign((0,B._)`${i}.data`,o))})}be.extendErrors=Ld;function Ys(r,e){let t=r.const("err",e);r.if((0,B._)`${Ie.default.vErrors} === null`,()=>r.assign(Ie.default.vErrors,(0,B._)`[${t}]`),(0,B._)`${Ie.default.vErrors}.push(${t})`),r.code((0,B._)`${Ie.default.errors}++`)}function Qs(r,e){let{gen:t,validateName:o,schemaEnv:n}=r;n.$async?t.throw((0,B._)`new ${r.ValidationError}(${e})`):(t.assign((0,B._)`${o}.errors`,e),t.return(!1))}var zr={keyword:new B.Name("keyword"),schemaPath:new B.Name("schemaPath"),params:new B.Name("params"),propertyName:new B.Name("propertyName"),message:new B.Name("message"),schema:new B.Name("schema"),parentSchema:new B.Name("parentSchema")};function Zs(r,e,t){let{createErrors:o}=r.it;return o===!1?(0,B._)`{}`:Vd(r,e,t)}function Vd(r,e,t={}){let{gen:o,it:n}=r,a=[Bd(n,t),Wd(r,t)];return Kd(r,e,a),o.object(...a)}function Bd({errorPath:r},{instancePath:e}){let t=e?(0,B.str)`${r}${(0,Qo.getErrorPath)(e,Qo.Type.Str)}`:r;return[Ie.default.instancePath,(0,B.strConcat)(Ie.default.instancePath,t)]}function Wd({keyword:r,it:{errSchemaPath:e}},{schemaPath:t,parentSchema:o}){let n=o?e:(0,B.str)`${e}/${r}`;return t&&(n=(0,B.str)`${n}${(0,Qo.getErrorPath)(t,Qo.Type.Str)}`),[zr.schemaPath,n]}function Kd(r,{params:e,message:t},o){let{keyword:n,data:a,schemaValue:i,it:u}=r,{opts:l,propertyName:d,topSchemaRef:m,schemaPath:v}=u;o.push([zr.keyword,n],[zr.params,typeof e=="function"?e(r):e||(0,B._)`{}`]),l.messages&&o.push([zr.message,typeof t=="function"?t(r):t]),l.verbose&&o.push([zr.schema,i],[zr.parentSchema,(0,B._)`${m}${v}`],[Ie.default.data,a]),d&&o.push([zr.propertyName,d])}});var ru=A(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.boolOrEmptySchema=mt.topBoolOrEmptySchema=void 0;var zd=ao(),Hd=M(),Gd=Sr(),Jd={message:"boolean schema is false"};function Xd(r){let{gen:e,schema:t,validateName:o}=r;t===!1?eu(r,!1):typeof t=="object"&&t.$async===!0?e.return(Gd.default.data):(e.assign((0,Hd._)`${o}.errors`,null),e.return(!0))}mt.topBoolOrEmptySchema=Xd;function Yd(r,e){let{gen:t,schema:o}=r;o===!1?(t.var(e,!1),eu(r)):t.var(e,!0)}mt.boolOrEmptySchema=Yd;function eu(r,e){let{gen:t,data:o}=r,n={gen:t,keyword:"false schema",data:o,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:r};(0,zd.reportError)(n,Jd,void 0,e)}});var Na=A(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.getRules=ht.isJSONType=void 0;var Qd=["string","number","integer","boolean","null","object","array"],Zd=new Set(Qd);function em(r){return typeof r=="string"&&Zd.has(r)}ht.isJSONType=em;function rm(){let r={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...r,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},r.number,r.string,r.array,r.object],post:{rules:[]},all:{},keywords:{}}}ht.getRules=rm});var Oa=A(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.shouldUseRule=Or.shouldUseGroup=Or.schemaHasRulesForType=void 0;function tm({schema:r,self:e},t){let o=e.RULES.types[t];return o&&o!==!0&&tu(r,o)}Or.schemaHasRulesForType=tm;function tu(r,e){return e.rules.some(t=>ou(r,t))}Or.shouldUseGroup=tu;function ou(r,e){var t;return r[e.keyword]!==void 0||((t=e.definition.implements)===null||t===void 0?void 0:t.some(o=>r[o]!==void 0))}Or.shouldUseRule=ou});var so=A(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.reportTypeError=ge.checkDataTypes=ge.checkDataType=ge.coerceAndCheckDataType=ge.getJSONTypes=ge.getSchemaTypes=ge.DataType=void 0;var om=Na(),nm=Oa(),am=ao(),j=M(),nu=z(),io;(function(r){r[r.Correct=0]="Correct",r[r.Wrong=1]="Wrong"})(io=ge.DataType||(ge.DataType={}));function im(r){let e=au(r.type);if(e.includes("null")){if(r.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&r.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');r.nullable===!0&&e.push("null")}return e}ge.getSchemaTypes=im;function au(r){let e=Array.isArray(r)?r:r?[r]:[];if(e.every(om.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}ge.getJSONTypes=au;function sm(r,e){let{gen:t,data:o,opts:n}=r,a=um(e,n.coerceTypes),i=e.length>0&&!(a.length===0&&e.length===1&&(0,nm.schemaHasRulesForType)(r,e[0]));if(i){let u=Ta(e,o,n.strictNumbers,io.Wrong);t.if(u,()=>{a.length?cm(r,e,a):ka(r)})}return i}ge.coerceAndCheckDataType=sm;var iu=new Set(["string","number","integer","boolean","null"]);function um(r,e){return e?r.filter(t=>iu.has(t)||e==="array"&&t==="array"):[]}function cm(r,e,t){let{gen:o,data:n,opts:a}=r,i=o.let("dataType",(0,j._)`typeof ${n}`),u=o.let("coerced",(0,j._)`undefined`);a.coerceTypes==="array"&&o.if((0,j._)`${i} == 'object' && Array.isArray(${n}) && ${n}.length == 1`,()=>o.assign(n,(0,j._)`${n}[0]`).assign(i,(0,j._)`typeof ${n}`).if(Ta(e,n,a.strictNumbers),()=>o.assign(u,n))),o.if((0,j._)`${u} !== undefined`);for(let d of t)(iu.has(d)||d==="array"&&a.coerceTypes==="array")&&l(d);o.else(),ka(r),o.endIf(),o.if((0,j._)`${u} !== undefined`,()=>{o.assign(n,u),fm(r,u)});function l(d){switch(d){case"string":o.elseIf((0,j._)`${i} == "number" || ${i} == "boolean"`).assign(u,(0,j._)`"" + ${n}`).elseIf((0,j._)`${n} === null`).assign(u,(0,j._)`""`);return;case"number":o.elseIf((0,j._)`${i} == "boolean" || ${n} === null
              || (${i} == "string" && ${n} && ${n} == +${n})`).assign(u,(0,j._)`+${n}`);return;case"integer":o.elseIf((0,j._)`${i} === "boolean" || ${n} === null
              || (${i} === "string" && ${n} && ${n} == +${n} && !(${n} % 1))`).assign(u,(0,j._)`+${n}`);return;case"boolean":o.elseIf((0,j._)`${n} === "false" || ${n} === 0 || ${n} === null`).assign(u,!1).elseIf((0,j._)`${n} === "true" || ${n} === 1`).assign(u,!0);return;case"null":o.elseIf((0,j._)`${n} === "" || ${n} === 0 || ${n} === false`),o.assign(u,null);return;case"array":o.elseIf((0,j._)`${i} === "string" || ${i} === "number"
              || ${i} === "boolean" || ${n} === null`).assign(u,(0,j._)`[${n}]`)}}}function fm({gen:r,parentData:e,parentDataProperty:t},o){r.if((0,j._)`${e} !== undefined`,()=>r.assign((0,j._)`${e}[${t}]`,o))}function Ca(r,e,t,o=io.Correct){let n=o===io.Correct?j.operators.EQ:j.operators.NEQ,a;switch(r){case"null":return(0,j._)`${e} ${n} null`;case"array":a=(0,j._)`Array.isArray(${e})`;break;case"object":a=(0,j._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":a=i((0,j._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":a=i();break;default:return(0,j._)`typeof ${e} ${n} ${r}`}return o===io.Correct?a:(0,j.not)(a);function i(u=j.nil){return(0,j.and)((0,j._)`typeof ${e} == "number"`,u,t?(0,j._)`isFinite(${e})`:j.nil)}}ge.checkDataType=Ca;function Ta(r,e,t,o){if(r.length===1)return Ca(r[0],e,t,o);let n,a=(0,nu.toHash)(r);if(a.array&&a.object){let i=(0,j._)`typeof ${e} != "object"`;n=a.null?i:(0,j._)`!${e} || ${i}`,delete a.null,delete a.array,delete a.object}else n=j.nil;a.number&&delete a.integer;for(let i in a)n=(0,j.and)(n,Ca(i,e,t,o));return n}ge.checkDataTypes=Ta;var lm={message:({schema:r})=>`must be ${r}`,params:({schema:r,schemaValue:e})=>typeof r=="string"?(0,j._)`{type: ${r}}`:(0,j._)`{type: ${e}}`};function ka(r){let e=pm(r);(0,am.reportError)(e,lm)}ge.reportTypeError=ka;function pm(r){let{gen:e,data:t,schema:o}=r,n=(0,nu.schemaRefOrVal)(r,o,"type");return{gen:e,keyword:"type",data:t,schema:o.type,schemaCode:n,schemaValue:n,parentSchema:o,params:{},it:r}}});var uu=A(Zo=>{"use strict";Object.defineProperty(Zo,"__esModule",{value:!0});Zo.assignDefaults=void 0;var yt=M(),dm=z();function mm(r,e){let{properties:t,items:o}=r.schema;if(e==="object"&&t)for(let n in t)su(r,n,t[n].default);else e==="array"&&Array.isArray(o)&&o.forEach((n,a)=>su(r,a,n.default))}Zo.assignDefaults=mm;function su(r,e,t){let{gen:o,compositeRule:n,data:a,opts:i}=r;if(t===void 0)return;let u=(0,yt._)`${a}${(0,yt.getProperty)(e)}`;if(n){(0,dm.checkStrictMode)(r,`default is ignored for: ${u}`);return}let l=(0,yt._)`${u} === undefined`;i.useDefaults==="empty"&&(l=(0,yt._)`${l} || ${u} === null || ${u} === ""`),o.if(l,(0,yt._)`${u} = ${(0,yt.stringify)(t)}`)}});var Ge=A(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.validateUnion=Z.validateArray=Z.usePattern=Z.callValidateCode=Z.schemaProperties=Z.allSchemaProperties=Z.noPropertyInData=Z.propertyInData=Z.isOwnProperty=Z.hasPropFunc=Z.reportMissingProp=Z.checkMissingProp=Z.checkReportMissingProp=void 0;var te=M(),qa=z(),Cr=Sr(),hm=z();function ym(r,e){let{gen:t,data:o,it:n}=r;t.if(Da(t,o,e,n.opts.ownProperties),()=>{r.setParams({missingProperty:(0,te._)`${e}`},!0),r.error()})}Z.checkReportMissingProp=ym;function vm({gen:r,data:e,it:{opts:t}},o,n){return(0,te.or)(...o.map(a=>(0,te.and)(Da(r,e,a,t.ownProperties),(0,te._)`${n} = ${a}`)))}Z.checkMissingProp=vm;function _m(r,e){r.setParams({missingProperty:e},!0),r.error()}Z.reportMissingProp=_m;function cu(r){return r.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,te._)`Object.prototype.hasOwnProperty`})}Z.hasPropFunc=cu;function ja(r,e,t){return(0,te._)`${cu(r)}.call(${e}, ${t})`}Z.isOwnProperty=ja;function gm(r,e,t,o){let n=(0,te._)`${e}${(0,te.getProperty)(t)} !== undefined`;return o?(0,te._)`${n} && ${ja(r,e,t)}`:n}Z.propertyInData=gm;function Da(r,e,t,o){let n=(0,te._)`${e}${(0,te.getProperty)(t)} === undefined`;return o?(0,te.or)(n,(0,te.not)(ja(r,e,t))):n}Z.noPropertyInData=Da;function fu(r){return r?Object.keys(r).filter(e=>e!=="__proto__"):[]}Z.allSchemaProperties=fu;function xm(r,e){return fu(e).filter(t=>!(0,qa.alwaysValidSchema)(r,e[t]))}Z.schemaProperties=xm;function wm({schemaCode:r,data:e,it:{gen:t,topSchemaRef:o,schemaPath:n,errorPath:a},it:i},u,l,d){let m=d?(0,te._)`${r}, ${e}, ${o}${n}`:e,v=[[Cr.default.instancePath,(0,te.strConcat)(Cr.default.instancePath,a)],[Cr.default.parentData,i.parentData],[Cr.default.parentDataProperty,i.parentDataProperty],[Cr.default.rootData,Cr.default.rootData]];i.opts.dynamicRef&&v.push([Cr.default.dynamicAnchors,Cr.default.dynamicAnchors]);let $=(0,te._)`${m}, ${t.object(...v)}`;return l!==te.nil?(0,te._)`${u}.call(${l}, ${$})`:(0,te._)`${u}(${$})`}Z.callValidateCode=wm;var Em=(0,te._)`new RegExp`;function $m({gen:r,it:{opts:e}},t){let o=e.unicodeRegExp?"u":"",{regExp:n}=e.code,a=n(t,o);return r.scopeValue("pattern",{key:a.toString(),ref:a,code:(0,te._)`${n.code==="new RegExp"?Em:(0,hm.useFunc)(r,n)}(${t}, ${o})`})}Z.usePattern=$m;function Sm(r){let{gen:e,data:t,keyword:o,it:n}=r,a=e.name("valid");if(n.allErrors){let u=e.let("valid",!0);return i(()=>e.assign(u,!1)),u}return e.var(a,!0),i(()=>e.break()),a;function i(u){let l=e.const("len",(0,te._)`${t}.length`);e.forRange("i",0,l,d=>{r.subschema({keyword:o,dataProp:d,dataPropType:qa.Type.Num},a),e.if((0,te.not)(a),u)})}}Z.validateArray=Sm;function bm(r){let{gen:e,schema:t,keyword:o,it:n}=r;if(!Array.isArray(t))throw new Error("ajv implementation error");if(t.some(l=>(0,qa.alwaysValidSchema)(n,l))&&!n.opts.unevaluated)return;let i=e.let("valid",!1),u=e.name("_valid");e.block(()=>t.forEach((l,d)=>{let m=r.subschema({keyword:o,schemaProp:d,compositeRule:!0},u);e.assign(i,(0,te._)`${i} || ${u}`),r.mergeValidEvaluated(m,u)||e.if((0,te.not)(i))})),r.result(i,()=>r.reset(),()=>r.error(!0))}Z.validateUnion=bm});var du=A(fr=>{"use strict";Object.defineProperty(fr,"__esModule",{value:!0});fr.validateKeywordUsage=fr.validSchemaType=fr.funcKeywordCode=fr.macroKeywordCode=void 0;var Ne=M(),Hr=Sr(),Pm=Ge(),Rm=ao();function Am(r,e){let{gen:t,keyword:o,schema:n,parentSchema:a,it:i}=r,u=e.macro.call(i.self,n,a,i),l=pu(t,o,u);i.opts.validateSchema!==!1&&i.self.validateSchema(u,!0);let d=t.name("valid");r.subschema({schema:u,schemaPath:Ne.nil,errSchemaPath:`${i.errSchemaPath}/${o}`,topSchemaRef:l,compositeRule:!0},d),r.pass(d,()=>r.error(!0))}fr.macroKeywordCode=Am;function Im(r,e){var t;let{gen:o,keyword:n,schema:a,parentSchema:i,$data:u,it:l}=r;Om(l,e);let d=!u&&e.compile?e.compile.call(l.self,a,i,l):e.validate,m=pu(o,n,d),v=o.let("valid");r.block$data(v,$),r.ok((t=e.valid)!==null&&t!==void 0?t:v);function $(){if(e.errors===!1)w(),e.modifying&&lu(r),S(()=>r.error());else{let h=e.async?g():x();e.modifying&&lu(r),S(()=>Nm(r,h))}}function g(){let h=o.let("ruleErrs",null);return o.try(()=>w((0,Ne._)`await `),E=>o.assign(v,!1).if((0,Ne._)`${E} instanceof ${l.ValidationError}`,()=>o.assign(h,(0,Ne._)`${E}.errors`),()=>o.throw(E))),h}function x(){let h=(0,Ne._)`${m}.errors`;return o.assign(h,null),w(Ne.nil),h}function w(h=e.async?(0,Ne._)`await `:Ne.nil){let E=l.opts.passContext?Hr.default.this:Hr.default.self,P=!("compile"in e&&!u||e.schema===!1);o.assign(v,(0,Ne._)`${h}${(0,Pm.callValidateCode)(r,m,E,P)}`,e.modifying)}function S(h){var E;o.if((0,Ne.not)((E=e.valid)!==null&&E!==void 0?E:v),h)}}fr.funcKeywordCode=Im;function lu(r){let{gen:e,data:t,it:o}=r;e.if(o.parentData,()=>e.assign(t,(0,Ne._)`${o.parentData}[${o.parentDataProperty}]`))}function Nm(r,e){let{gen:t}=r;t.if((0,Ne._)`Array.isArray(${e})`,()=>{t.assign(Hr.default.vErrors,(0,Ne._)`${Hr.default.vErrors} === null ? ${e} : ${Hr.default.vErrors}.concat(${e})`).assign(Hr.default.errors,(0,Ne._)`${Hr.default.vErrors}.length`),(0,Rm.extendErrors)(r)},()=>r.error())}function Om({schemaEnv:r},e){if(e.async&&!r.$async)throw new Error("async keyword in sync schema")}function pu(r,e,t){if(t===void 0)throw new Error(`keyword "${e}" failed to compile`);return r.scopeValue("keyword",typeof t=="function"?{ref:t}:{ref:t,code:(0,Ne.stringify)(t)})}function Cm(r,e,t=!1){return!e.length||e.some(o=>o==="array"?Array.isArray(r):o==="object"?r&&typeof r=="object"&&!Array.isArray(r):typeof r==o||t&&typeof r>"u")}fr.validSchemaType=Cm;function Tm({schema:r,opts:e,self:t,errSchemaPath:o},n,a){if(Array.isArray(n.keyword)?!n.keyword.includes(a):n.keyword!==a)throw new Error("ajv implementation error");let i=n.dependencies;if(i?.some(u=>!Object.prototype.hasOwnProperty.call(r,u)))throw new Error(`parent schema must have dependencies of ${a}: ${i.join(",")}`);if(n.validateSchema&&!n.validateSchema(r[a])){let l=`keyword "${a}" value is invalid at path "${o}": `+t.errorsText(n.validateSchema.errors);if(e.validateSchema==="log")t.logger.error(l);else throw new Error(l)}}fr.validateKeywordUsage=Tm});var hu=A(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.extendSubschemaMode=Tr.extendSubschemaData=Tr.getSubschema=void 0;var lr=M(),mu=z();function km(r,{keyword:e,schemaProp:t,schema:o,schemaPath:n,errSchemaPath:a,topSchemaRef:i}){if(e!==void 0&&o!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let u=r.schema[e];return t===void 0?{schema:u,schemaPath:(0,lr._)`${r.schemaPath}${(0,lr.getProperty)(e)}`,errSchemaPath:`${r.errSchemaPath}/${e}`}:{schema:u[t],schemaPath:(0,lr._)`${r.schemaPath}${(0,lr.getProperty)(e)}${(0,lr.getProperty)(t)}`,errSchemaPath:`${r.errSchemaPath}/${e}/${(0,mu.escapeFragment)(t)}`}}if(o!==void 0){if(n===void 0||a===void 0||i===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:o,schemaPath:n,topSchemaRef:i,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')}Tr.getSubschema=km;function qm(r,e,{dataProp:t,dataPropType:o,data:n,dataTypes:a,propertyName:i}){if(n!==void 0&&t!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:u}=e;if(t!==void 0){let{errorPath:d,dataPathArr:m,opts:v}=e,$=u.let("data",(0,lr._)`${e.data}${(0,lr.getProperty)(t)}`,!0);l($),r.errorPath=(0,lr.str)`${d}${(0,mu.getErrorPath)(t,o,v.jsPropertySyntax)}`,r.parentDataProperty=(0,lr._)`${t}`,r.dataPathArr=[...m,r.parentDataProperty]}if(n!==void 0){let d=n instanceof lr.Name?n:u.let("data",n,!0);l(d),i!==void 0&&(r.propertyName=i)}a&&(r.dataTypes=a);function l(d){r.data=d,r.dataLevel=e.dataLevel+1,r.dataTypes=[],e.definedProperties=new Set,r.parentData=e.data,r.dataNames=[...e.dataNames,d]}}Tr.extendSubschemaData=qm;function jm(r,{jtdDiscriminator:e,jtdMetadata:t,compositeRule:o,createErrors:n,allErrors:a}){o!==void 0&&(r.compositeRule=o),n!==void 0&&(r.createErrors=n),a!==void 0&&(r.allErrors=a),r.jtdDiscriminator=e,r.jtdMetadata=t}Tr.extendSubschemaMode=jm});var Ua=A((HB,yu)=>{"use strict";yu.exports=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var o,n,a;if(Array.isArray(e)){if(o=e.length,o!=t.length)return!1;for(n=o;n--!==0;)if(!r(e[n],t[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(a=Object.keys(e),o=a.length,o!==Object.keys(t).length)return!1;for(n=o;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,a[n]))return!1;for(n=o;n--!==0;){var i=a[n];if(!r(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}});var _u=A((GB,vu)=>{"use strict";var kr=vu.exports=function(r,e,t){typeof e=="function"&&(t=e,e={}),t=e.cb||t;var o=typeof t=="function"?t:t.pre||function(){},n=t.post||function(){};en(e,o,n,r,"",r)};kr.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};kr.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};kr.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};kr.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function en(r,e,t,o,n,a,i,u,l,d){if(o&&typeof o=="object"&&!Array.isArray(o)){e(o,n,a,i,u,l,d);for(var m in o){var v=o[m];if(Array.isArray(v)){if(m in kr.arrayKeywords)for(var $=0;$<v.length;$++)en(r,e,t,v[$],n+"/"+m+"/"+$,a,n,m,o,$)}else if(m in kr.propsKeywords){if(v&&typeof v=="object")for(var g in v)en(r,e,t,v[g],n+"/"+m+"/"+Dm(g),a,n,m,o,g)}else(m in kr.keywords||r.allKeys&&!(m in kr.skipKeywords))&&en(r,e,t,v,n+"/"+m,a,n,m,o)}t(o,n,a,i,u,l,d)}}function Dm(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}});var uo=A(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.getSchemaRefs=Te.resolveUrl=Te.normalizeId=Te._getFullPath=Te.getFullPath=Te.inlineRef=void 0;var Um=z(),Mm=Ua(),Fm=_u(),Lm=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Vm(r,e=!0){return typeof r=="boolean"?!0:e===!0?!Ma(r):e?gu(r)<=e:!1}Te.inlineRef=Vm;var Bm=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Ma(r){for(let e in r){if(Bm.has(e))return!0;let t=r[e];if(Array.isArray(t)&&t.some(Ma)||typeof t=="object"&&Ma(t))return!0}return!1}function gu(r){let e=0;for(let t in r){if(t==="$ref")return 1/0;if(e++,!Lm.has(t)&&(typeof r[t]=="object"&&(0,Um.eachItem)(r[t],o=>e+=gu(o)),e===1/0))return 1/0}return e}function xu(r,e="",t){t!==!1&&(e=vt(e));let o=r.parse(e);return wu(r,o)}Te.getFullPath=xu;function wu(r,e){return r.serialize(e).split("#")[0]+"#"}Te._getFullPath=wu;var Wm=/#\/?$/;function vt(r){return r?r.replace(Wm,""):""}Te.normalizeId=vt;function Km(r,e,t){return t=vt(t),r.resolve(e,t)}Te.resolveUrl=Km;var zm=/^[a-z_][-a-z0-9._]*$/i;function Hm(r,e){if(typeof r=="boolean")return{};let{schemaId:t,uriResolver:o}=this.opts,n=vt(r[t]||e),a={"":n},i=xu(o,n,!1),u={},l=new Set;return Fm(r,{allKeys:!0},(v,$,g,x)=>{if(x===void 0)return;let w=i+$,S=a[x];typeof v[t]=="string"&&(S=h.call(this,v[t])),E.call(this,v.$anchor),E.call(this,v.$dynamicAnchor),a[$]=S;function h(P){let N=this.opts.uriResolver.resolve;if(P=vt(S?N(S,P):P),l.has(P))throw m(P);l.add(P);let I=this.refs[P];return typeof I=="string"&&(I=this.refs[I]),typeof I=="object"?d(v,I.schema,P):P!==vt(w)&&(P[0]==="#"?(d(v,u[P],P),u[P]=v):this.refs[P]=w),P}function E(P){if(typeof P=="string"){if(!zm.test(P))throw new Error(`invalid anchor "${P}"`);h.call(this,`#${P}`)}}}),u;function d(v,$,g){if($!==void 0&&!Mm(v,$))throw m(g)}function m(v){return new Error(`reference "${v}" resolves to more than one schema`)}}Te.getSchemaRefs=Hm});var lo=A(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.getData=qr.KeywordCxt=qr.validateFunctionCode=void 0;var Pu=ru(),Eu=so(),La=Oa(),rn=so(),Gm=uu(),fo=du(),Fa=hu(),C=M(),T=Sr(),Jm=uo(),br=z(),co=ao();function Xm(r){if(Iu(r)&&(Nu(r),Au(r))){Zm(r);return}Ru(r,()=>(0,Pu.topBoolOrEmptySchema)(r))}qr.validateFunctionCode=Xm;function Ru({gen:r,validateName:e,schema:t,schemaEnv:o,opts:n},a){n.code.es5?r.func(e,(0,C._)`${T.default.data}, ${T.default.valCxt}`,o.$async,()=>{r.code((0,C._)`"use strict"; ${$u(t,n)}`),Qm(r,n),r.code(a)}):r.func(e,(0,C._)`${T.default.data}, ${Ym(n)}`,o.$async,()=>r.code($u(t,n)).code(a))}function Ym(r){return(0,C._)`{${T.default.instancePath}="", ${T.default.parentData}, ${T.default.parentDataProperty}, ${T.default.rootData}=${T.default.data}${r.dynamicRef?(0,C._)`, ${T.default.dynamicAnchors}={}`:C.nil}}={}`}function Qm(r,e){r.if(T.default.valCxt,()=>{r.var(T.default.instancePath,(0,C._)`${T.default.valCxt}.${T.default.instancePath}`),r.var(T.default.parentData,(0,C._)`${T.default.valCxt}.${T.default.parentData}`),r.var(T.default.parentDataProperty,(0,C._)`${T.default.valCxt}.${T.default.parentDataProperty}`),r.var(T.default.rootData,(0,C._)`${T.default.valCxt}.${T.default.rootData}`),e.dynamicRef&&r.var(T.default.dynamicAnchors,(0,C._)`${T.default.valCxt}.${T.default.dynamicAnchors}`)},()=>{r.var(T.default.instancePath,(0,C._)`""`),r.var(T.default.parentData,(0,C._)`undefined`),r.var(T.default.parentDataProperty,(0,C._)`undefined`),r.var(T.default.rootData,T.default.data),e.dynamicRef&&r.var(T.default.dynamicAnchors,(0,C._)`{}`)})}function Zm(r){let{schema:e,opts:t,gen:o}=r;Ru(r,()=>{t.$comment&&e.$comment&&Cu(r),nh(r),o.let(T.default.vErrors,null),o.let(T.default.errors,0),t.unevaluated&&eh(r),Ou(r),sh(r)})}function eh(r){let{gen:e,validateName:t}=r;r.evaluated=e.const("evaluated",(0,C._)`${t}.evaluated`),e.if((0,C._)`${r.evaluated}.dynamicProps`,()=>e.assign((0,C._)`${r.evaluated}.props`,(0,C._)`undefined`)),e.if((0,C._)`${r.evaluated}.dynamicItems`,()=>e.assign((0,C._)`${r.evaluated}.items`,(0,C._)`undefined`))}function $u(r,e){let t=typeof r=="object"&&r[e.schemaId];return t&&(e.code.source||e.code.process)?(0,C._)`/*# sourceURL=${t} */`:C.nil}function rh(r,e){if(Iu(r)&&(Nu(r),Au(r))){th(r,e);return}(0,Pu.boolOrEmptySchema)(r,e)}function Au({schema:r,self:e}){if(typeof r=="boolean")return!r;for(let t in r)if(e.RULES.all[t])return!0;return!1}function Iu(r){return typeof r.schema!="boolean"}function th(r,e){let{schema:t,gen:o,opts:n}=r;n.$comment&&t.$comment&&Cu(r),ah(r),ih(r);let a=o.const("_errs",T.default.errors);Ou(r,a),o.var(e,(0,C._)`${a} === ${T.default.errors}`)}function Nu(r){(0,br.checkUnknownRules)(r),oh(r)}function Ou(r,e){if(r.opts.jtd)return Su(r,[],!1,e);let t=(0,Eu.getSchemaTypes)(r.schema),o=(0,Eu.coerceAndCheckDataType)(r,t);Su(r,t,!o,e)}function oh(r){let{schema:e,errSchemaPath:t,opts:o,self:n}=r;e.$ref&&o.ignoreKeywordsWithRef&&(0,br.schemaHasRulesButRef)(e,n.RULES)&&n.logger.warn(`$ref: keywords ignored in schema at path "${t}"`)}function nh(r){let{schema:e,opts:t}=r;e.default!==void 0&&t.useDefaults&&t.strictSchema&&(0,br.checkStrictMode)(r,"default is ignored in the schema root")}function ah(r){let e=r.schema[r.opts.schemaId];e&&(r.baseId=(0,Jm.resolveUrl)(r.opts.uriResolver,r.baseId,e))}function ih(r){if(r.schema.$async&&!r.schemaEnv.$async)throw new Error("async schema in sync schema")}function Cu({gen:r,schemaEnv:e,schema:t,errSchemaPath:o,opts:n}){let a=t.$comment;if(n.$comment===!0)r.code((0,C._)`${T.default.self}.logger.log(${a})`);else if(typeof n.$comment=="function"){let i=(0,C.str)`${o}/$comment`,u=r.scopeValue("root",{ref:e.root});r.code((0,C._)`${T.default.self}.opts.$comment(${a}, ${i}, ${u}.schema)`)}}function sh(r){let{gen:e,schemaEnv:t,validateName:o,ValidationError:n,opts:a}=r;t.$async?e.if((0,C._)`${T.default.errors} === 0`,()=>e.return(T.default.data),()=>e.throw((0,C._)`new ${n}(${T.default.vErrors})`)):(e.assign((0,C._)`${o}.errors`,T.default.vErrors),a.unevaluated&&uh(r),e.return((0,C._)`${T.default.errors} === 0`))}function uh({gen:r,evaluated:e,props:t,items:o}){t instanceof C.Name&&r.assign((0,C._)`${e}.props`,t),o instanceof C.Name&&r.assign((0,C._)`${e}.items`,o)}function Su(r,e,t,o){let{gen:n,schema:a,data:i,allErrors:u,opts:l,self:d}=r,{RULES:m}=d;if(a.$ref&&(l.ignoreKeywordsWithRef||!(0,br.schemaHasRulesButRef)(a,m))){n.block(()=>ku(r,"$ref",m.all.$ref.definition));return}l.jtd||ch(r,e),n.block(()=>{for(let $ of m.rules)v($);v(m.post)});function v($){(0,La.shouldUseGroup)(a,$)&&($.type?(n.if((0,rn.checkDataType)($.type,i,l.strictNumbers)),bu(r,$),e.length===1&&e[0]===$.type&&t&&(n.else(),(0,rn.reportTypeError)(r)),n.endIf()):bu(r,$),u||n.if((0,C._)`${T.default.errors} === ${o||0}`))}}function bu(r,e){let{gen:t,schema:o,opts:{useDefaults:n}}=r;n&&(0,Gm.assignDefaults)(r,e.type),t.block(()=>{for(let a of e.rules)(0,La.shouldUseRule)(o,a)&&ku(r,a.keyword,a.definition,e.type)})}function ch(r,e){r.schemaEnv.meta||!r.opts.strictTypes||(fh(r,e),r.opts.allowUnionTypes||lh(r,e),ph(r,r.dataTypes))}function fh(r,e){if(e.length){if(!r.dataTypes.length){r.dataTypes=e;return}e.forEach(t=>{Tu(r.dataTypes,t)||Va(r,`type "${t}" not allowed by context "${r.dataTypes.join(",")}"`)}),mh(r,e)}}function lh(r,e){e.length>1&&!(e.length===2&&e.includes("null"))&&Va(r,"use allowUnionTypes to allow union type keyword")}function ph(r,e){let t=r.self.RULES.all;for(let o in t){let n=t[o];if(typeof n=="object"&&(0,La.shouldUseRule)(r.schema,n)){let{type:a}=n.definition;a.length&&!a.some(i=>dh(e,i))&&Va(r,`missing type "${a.join(",")}" for keyword "${o}"`)}}}function dh(r,e){return r.includes(e)||e==="number"&&r.includes("integer")}function Tu(r,e){return r.includes(e)||e==="integer"&&r.includes("number")}function mh(r,e){let t=[];for(let o of r.dataTypes)Tu(e,o)?t.push(o):e.includes("integer")&&o==="number"&&t.push("integer");r.dataTypes=t}function Va(r,e){let t=r.schemaEnv.baseId+r.errSchemaPath;e+=` at "${t}" (strictTypes)`,(0,br.checkStrictMode)(r,e,r.opts.strictTypes)}var tn=class{constructor(e,t,o){if((0,fo.validateKeywordUsage)(e,t,o),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=o,this.data=e.data,this.schema=e.schema[o],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,br.schemaRefOrVal)(e,this.schema,o,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",qu(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,fo.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${o} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:t.errors!==!1)&&(this.errsCount=e.gen.const("_errs",T.default.errors))}result(e,t,o){this.failResult((0,C.not)(e),t,o)}failResult(e,t,o){this.gen.if(e),o?o():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,C.not)(e),void 0,t)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:t}=this;this.fail((0,C._)`${t} !== undefined && (${(0,C.or)(this.invalid$data(),e)})`)}error(e,t,o){if(t){this.setParams(t),this._error(e,o),this.setParams({});return}this._error(e,o)}_error(e,t){(e?co.reportExtraError:co.reportError)(this,this.def.error,t)}$dataError(){(0,co.reportError)(this,this.def.$dataError||co.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,co.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,o=C.nil){this.gen.block(()=>{this.check$data(e,o),t()})}check$data(e=C.nil,t=C.nil){if(!this.$data)return;let{gen:o,schemaCode:n,schemaType:a,def:i}=this;o.if((0,C.or)((0,C._)`${n} === undefined`,t)),e!==C.nil&&o.assign(e,!0),(a.length||i.validateSchema)&&(o.elseIf(this.invalid$data()),this.$dataError(),e!==C.nil&&o.assign(e,!1)),o.else()}invalid$data(){let{gen:e,schemaCode:t,schemaType:o,def:n,it:a}=this;return(0,C.or)(i(),u());function i(){if(o.length){if(!(t instanceof C.Name))throw new Error("ajv implementation error");let l=Array.isArray(o)?o:[o];return(0,C._)`${(0,rn.checkDataTypes)(l,t,a.opts.strictNumbers,rn.DataType.Wrong)}`}return C.nil}function u(){if(n.validateSchema){let l=e.scopeValue("validate$data",{ref:n.validateSchema});return(0,C._)`!${l}(${t})`}return C.nil}}subschema(e,t){let o=(0,Fa.getSubschema)(this.it,e);(0,Fa.extendSubschemaData)(o,this.it,e),(0,Fa.extendSubschemaMode)(o,e);let n={...this.it,...o,items:void 0,props:void 0};return rh(n,t),n}mergeEvaluated(e,t){let{it:o,gen:n}=this;o.opts.unevaluated&&(o.props!==!0&&e.props!==void 0&&(o.props=br.mergeEvaluated.props(n,e.props,o.props,t)),o.items!==!0&&e.items!==void 0&&(o.items=br.mergeEvaluated.items(n,e.items,o.items,t)))}mergeValidEvaluated(e,t){let{it:o,gen:n}=this;if(o.opts.unevaluated&&(o.props!==!0||o.items!==!0))return n.if(t,()=>this.mergeEvaluated(e,C.Name)),!0}};qr.KeywordCxt=tn;function ku(r,e,t,o){let n=new tn(r,t,e);"code"in t?t.code(n,o):n.$data&&t.validate?(0,fo.funcKeywordCode)(n,t):"macro"in t?(0,fo.macroKeywordCode)(n,t):(t.compile||t.validate)&&(0,fo.funcKeywordCode)(n,t)}var hh=/^\/(?:[^~]|~0|~1)*$/,yh=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function qu(r,{dataLevel:e,dataNames:t,dataPathArr:o}){let n,a;if(r==="")return T.default.rootData;if(r[0]==="/"){if(!hh.test(r))throw new Error(`Invalid JSON-pointer: ${r}`);n=r,a=T.default.rootData}else{let d=yh.exec(r);if(!d)throw new Error(`Invalid JSON-pointer: ${r}`);let m=+d[1];if(n=d[2],n==="#"){if(m>=e)throw new Error(l("property/index",m));return o[e-m]}if(m>e)throw new Error(l("data",m));if(a=t[e-m],!n)return a}let i=a,u=n.split("/");for(let d of u)d&&(a=(0,C._)`${a}${(0,C.getProperty)((0,br.unescapeJsonPointer)(d))}`,i=(0,C._)`${i} && ${a}`);return i;function l(d,m){return`Cannot access ${d} ${m} levels up, current level is ${e}`}}qr.getData=qu});var on=A(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});var Ba=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};Wa.default=Ba});var nn=A(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});var Ka=uo(),za=class extends Error{constructor(e,t,o,n){super(n||`can't resolve reference ${o} from id ${t}`),this.missingRef=(0,Ka.resolveUrl)(e,t,o),this.missingSchema=(0,Ka.normalizeId)((0,Ka.getFullPath)(e,this.missingRef))}};Ha.default=za});var sn=A(Je=>{"use strict";Object.defineProperty(Je,"__esModule",{value:!0});Je.resolveSchema=Je.getCompilingSchema=Je.resolveRef=Je.compileSchema=Je.SchemaEnv=void 0;var Ze=M(),vh=on(),Gr=Sr(),er=uo(),ju=z(),_h=lo(),_t=class{constructor(e){var t;this.refs={},this.dynamicAnchors={};let o;typeof e.schema=="object"&&(o=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(t=e.baseId)!==null&&t!==void 0?t:(0,er.normalizeId)(o?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=o?.$async,this.refs={}}};Je.SchemaEnv=_t;function Ja(r){let e=Du.call(this,r);if(e)return e;let t=(0,er.getFullPath)(this.opts.uriResolver,r.root.baseId),{es5:o,lines:n}=this.opts.code,{ownProperties:a}=this.opts,i=new Ze.CodeGen(this.scope,{es5:o,lines:n,ownProperties:a}),u;r.$async&&(u=i.scopeValue("Error",{ref:vh.default,code:(0,Ze._)`require("ajv/dist/runtime/validation_error").default`}));let l=i.scopeName("validate");r.validateName=l;let d={gen:i,allErrors:this.opts.allErrors,data:Gr.default.data,parentData:Gr.default.parentData,parentDataProperty:Gr.default.parentDataProperty,dataNames:[Gr.default.data],dataPathArr:[Ze.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:i.scopeValue("schema",this.opts.code.source===!0?{ref:r.schema,code:(0,Ze.stringify)(r.schema)}:{ref:r.schema}),validateName:l,ValidationError:u,schema:r.schema,schemaEnv:r,rootId:t,baseId:r.baseId||t,schemaPath:Ze.nil,errSchemaPath:r.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Ze._)`""`,opts:this.opts,self:this},m;try{this._compilations.add(r),(0,_h.validateFunctionCode)(d),i.optimize(this.opts.code.optimize);let v=i.toString();m=`${i.scopeRefs(Gr.default.scope)}return ${v}`,this.opts.code.process&&(m=this.opts.code.process(m,r));let g=new Function(`${Gr.default.self}`,`${Gr.default.scope}`,m)(this,this.scope.get());if(this.scope.value(l,{ref:g}),g.errors=null,g.schema=r.schema,g.schemaEnv=r,r.$async&&(g.$async=!0),this.opts.code.source===!0&&(g.source={validateName:l,validateCode:v,scopeValues:i._values}),this.opts.unevaluated){let{props:x,items:w}=d;g.evaluated={props:x instanceof Ze.Name?void 0:x,items:w instanceof Ze.Name?void 0:w,dynamicProps:x instanceof Ze.Name,dynamicItems:w instanceof Ze.Name},g.source&&(g.source.evaluated=(0,Ze.stringify)(g.evaluated))}return r.validate=g,r}catch(v){throw delete r.validate,delete r.validateName,m&&this.logger.error("Error compiling schema, function code:",m),v}finally{this._compilations.delete(r)}}Je.compileSchema=Ja;function gh(r,e,t){var o;t=(0,er.resolveUrl)(this.opts.uriResolver,e,t);let n=r.refs[t];if(n)return n;let a=Eh.call(this,r,t);if(a===void 0){let i=(o=r.localRefs)===null||o===void 0?void 0:o[t],{schemaId:u}=this.opts;i&&(a=new _t({schema:i,schemaId:u,root:r,baseId:e}))}if(a!==void 0)return r.refs[t]=xh.call(this,a)}Je.resolveRef=gh;function xh(r){return(0,er.inlineRef)(r.schema,this.opts.inlineRefs)?r.schema:r.validate?r:Ja.call(this,r)}function Du(r){for(let e of this._compilations)if(wh(e,r))return e}Je.getCompilingSchema=Du;function wh(r,e){return r.schema===e.schema&&r.root===e.root&&r.baseId===e.baseId}function Eh(r,e){let t;for(;typeof(t=this.refs[e])=="string";)e=t;return t||this.schemas[e]||an.call(this,r,e)}function an(r,e){let t=this.opts.uriResolver.parse(e),o=(0,er._getFullPath)(this.opts.uriResolver,t),n=(0,er.getFullPath)(this.opts.uriResolver,r.baseId,void 0);if(Object.keys(r.schema).length>0&&o===n)return Ga.call(this,t,r);let a=(0,er.normalizeId)(o),i=this.refs[a]||this.schemas[a];if(typeof i=="string"){let u=an.call(this,r,i);return typeof u?.schema!="object"?void 0:Ga.call(this,t,u)}if(typeof i?.schema=="object"){if(i.validate||Ja.call(this,i),a===(0,er.normalizeId)(e)){let{schema:u}=i,{schemaId:l}=this.opts,d=u[l];return d&&(n=(0,er.resolveUrl)(this.opts.uriResolver,n,d)),new _t({schema:u,schemaId:l,root:r,baseId:n})}return Ga.call(this,t,i)}}Je.resolveSchema=an;var $h=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Ga(r,{baseId:e,schema:t,root:o}){var n;if(((n=r.fragment)===null||n===void 0?void 0:n[0])!=="/")return;for(let u of r.fragment.slice(1).split("/")){if(typeof t=="boolean")return;let l=t[(0,ju.unescapeFragment)(u)];if(l===void 0)return;t=l;let d=typeof t=="object"&&t[this.opts.schemaId];!$h.has(u)&&d&&(e=(0,er.resolveUrl)(this.opts.uriResolver,e,d))}let a;if(typeof t!="boolean"&&t.$ref&&!(0,ju.schemaHasRulesButRef)(t,this.RULES)){let u=(0,er.resolveUrl)(this.opts.uriResolver,e,t.$ref);a=an.call(this,o,u)}let{schemaId:i}=this.opts;if(a=a||new _t({schema:t,schemaId:i,root:o,baseId:e}),a.schema!==a.root.schema)return a}});var Uu=A((eW,Sh)=>{Sh.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Fu=A((un,Mu)=>{(function(r,e){typeof un=="object"&&typeof Mu<"u"?e(un):typeof define=="function"&&define.amd?define(["exports"],e):e(r.URI=r.URI||{})})(un,function(r){"use strict";function e(){for(var c=arguments.length,s=Array(c),f=0;f<c;f++)s[f]=arguments[f];if(s.length>1){s[0]=s[0].slice(0,-1);for(var y=s.length-1,_=1;_<y;++_)s[_]=s[_].slice(1,-1);return s[y]=s[y].slice(1),s.join("")}else return s[0]}function t(c){return"(?:"+c+")"}function o(c){return c===void 0?"undefined":c===null?"null":Object.prototype.toString.call(c).split(" ").pop().split("]").shift().toLowerCase()}function n(c){return c.toUpperCase()}function a(c){return c!=null?c instanceof Array?c:typeof c.length!="number"||c.split||c.setInterval||c.call?[c]:Array.prototype.slice.call(c):[]}function i(c,s){var f=c;if(s)for(var y in s)f[y]=s[y];return f}function u(c){var s="[A-Za-z]",f="[\\x0D]",y="[0-9]",_="[\\x22]",R=e(y,"[A-Fa-f]"),q="[\\x0A]",W="[\\x20]",G=t(t("%[EFef]"+R+"%"+R+R+"%"+R+R)+"|"+t("%[89A-Fa-f]"+R+"%"+R+R)+"|"+t("%"+R+R)),fe="[\\:\\/\\?\\#\\[\\]\\@]",V="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",ae=e(fe,V),le=c?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",oe=c?"[\\uE000-\\uF8FF]":"[]",H=e(s,y,"[\\-\\.\\_\\~]",le),ie=t(s+e(s,y,"[\\+\\-\\.]")+"*"),Y=t(t(G+"|"+e(H,V,"[\\:]"))+"*"),Dr=t(t("25[0-5]")+"|"+t("2[0-4]"+y)+"|"+t("1"+y+y)+"|"+t("[1-9]"+y)+"|"+y),je=t(t("25[0-5]")+"|"+t("2[0-4]"+y)+"|"+t("1"+y+y)+"|"+t("0?[1-9]"+y)+"|0?0?"+y),We=t(je+"\\."+je+"\\."+je+"\\."+je),ee=t(R+"{1,4}"),De=t(t(ee+"\\:"+ee)+"|"+We),Ke=t(t(ee+"\\:")+"{6}"+De),ar=t("\\:\\:"+t(ee+"\\:")+"{5}"+De),Ur=t(t(ee)+"?\\:\\:"+t(ee+"\\:")+"{4}"+De),hr=t(t(t(ee+"\\:")+"{0,1}"+ee)+"?\\:\\:"+t(ee+"\\:")+"{3}"+De),It=t(t(t(ee+"\\:")+"{0,2}"+ee)+"?\\:\\:"+t(ee+"\\:")+"{2}"+De),Ro=t(t(t(ee+"\\:")+"{0,3}"+ee)+"?\\:\\:"+ee+"\\:"+De),Ao=t(t(t(ee+"\\:")+"{0,4}"+ee)+"?\\:\\:"+De),at=t(t(t(ee+"\\:")+"{0,5}"+ee)+"?\\:\\:"+ee),it=t(t(t(ee+"\\:")+"{0,6}"+ee)+"?\\:\\:"),yr=t([Ke,ar,Ur,hr,It,Ro,Ao,at,it].join("|")),st=t(t(H+"|"+G)+"+"),qn=t(yr+"\\%25"+st),Mr=t(yr+t("\\%25|\\%(?!"+R+"{2})")+st),nl=t("[vV]"+R+"+\\."+e(H,V,"[\\:]")+"+"),al=t("\\["+t(Mr+"|"+yr+"|"+nl)+"\\]"),fs=t(t(G+"|"+e(H,V))+"*"),Nt=t(al+"|"+We+"(?!"+fs+")|"+fs),Ot=t(y+"*"),ls=t(t(Y+"@")+"?"+Nt+t("\\:"+Ot)+"?"),Ct=t(G+"|"+e(H,V,"[\\:\\@]")),il=t(Ct+"*"),ps=t(Ct+"+"),sl=t(t(G+"|"+e(H,V,"[\\@]"))+"+"),vr=t(t("\\/"+il)+"*"),ut=t("\\/"+t(ps+vr)+"?"),jn=t(sl+vr),Io=t(ps+vr),ct="(?!"+Ct+")",w_=t(vr+"|"+ut+"|"+jn+"|"+Io+"|"+ct),ft=t(t(Ct+"|"+e("[\\/\\?]",oe))+"*"),Tt=t(t(Ct+"|[\\/\\?]")+"*"),ds=t(t("\\/\\/"+ls+vr)+"|"+ut+"|"+Io+"|"+ct),ul=t(ie+"\\:"+ds+t("\\?"+ft)+"?"+t("\\#"+Tt)+"?"),cl=t(t("\\/\\/"+ls+vr)+"|"+ut+"|"+jn+"|"+ct),fl=t(cl+t("\\?"+ft)+"?"+t("\\#"+Tt)+"?"),E_=t(ul+"|"+fl),$_=t(ie+"\\:"+ds+t("\\?"+ft)+"?"),S_="^("+ie+")\\:"+t(t("\\/\\/("+t("("+Y+")@")+"?("+Nt+")"+t("\\:("+Ot+")")+"?)")+"?("+vr+"|"+ut+"|"+Io+"|"+ct+")")+t("\\?("+ft+")")+"?"+t("\\#("+Tt+")")+"?$",b_="^(){0}"+t(t("\\/\\/("+t("("+Y+")@")+"?("+Nt+")"+t("\\:("+Ot+")")+"?)")+"?("+vr+"|"+ut+"|"+jn+"|"+ct+")")+t("\\?("+ft+")")+"?"+t("\\#("+Tt+")")+"?$",P_="^("+ie+")\\:"+t(t("\\/\\/("+t("("+Y+")@")+"?("+Nt+")"+t("\\:("+Ot+")")+"?)")+"?("+vr+"|"+ut+"|"+Io+"|"+ct+")")+t("\\?("+ft+")")+"?$",R_="^"+t("\\#("+Tt+")")+"?$",A_="^"+t("("+Y+")@")+"?("+Nt+")"+t("\\:("+Ot+")")+"?$";return{NOT_SCHEME:new RegExp(e("[^]",s,y,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",H,V),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",H,V),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",H,V),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",H,V),"g"),NOT_QUERY:new RegExp(e("[^\\%]",H,V,"[\\:\\@\\/\\?]",oe),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",H,V,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",H,V),"g"),UNRESERVED:new RegExp(H,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",H,ae),"g"),PCT_ENCODED:new RegExp(G,"g"),IPV4ADDRESS:new RegExp("^("+We+")$"),IPV6ADDRESS:new RegExp("^\\[?("+yr+")"+t(t("\\%25|\\%(?!"+R+"{2})")+"("+st+")")+"?\\]?$")}}var l=u(!1),d=u(!0),m=function(){function c(s,f){var y=[],_=!0,R=!1,q=void 0;try{for(var W=s[Symbol.iterator](),G;!(_=(G=W.next()).done)&&(y.push(G.value),!(f&&y.length===f));_=!0);}catch(fe){R=!0,q=fe}finally{try{!_&&W.return&&W.return()}finally{if(R)throw q}}return y}return function(s,f){if(Array.isArray(s))return s;if(Symbol.iterator in Object(s))return c(s,f);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=function(c){if(Array.isArray(c)){for(var s=0,f=Array(c.length);s<c.length;s++)f[s]=c[s];return f}else return Array.from(c)},$=2147483647,g=36,x=1,w=26,S=38,h=700,E=72,P=128,N="-",I=/^xn--/,k=/[^\0-\x7E]/,he=/[\x2E\u3002\uFF0E\uFF61]/g,ye={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ve=g-x,ue=Math.floor,qe=String.fromCharCode;function Ve(c){throw new RangeError(ye[c])}function Zr(c,s){for(var f=[],y=c.length;y--;)f[y]=s(c[y]);return f}function et(c,s){var f=c.split("@"),y="";f.length>1&&(y=f[0]+"@",c=f[1]),c=c.replace(he,".");var _=c.split("."),R=Zr(_,s).join(".");return y+R}function Pt(c){for(var s=[],f=0,y=c.length;f<y;){var _=c.charCodeAt(f++);if(_>=55296&&_<=56319&&f<y){var R=c.charCodeAt(f++);(R&64512)==56320?s.push(((_&1023)<<10)+(R&1023)+65536):(s.push(_),f--)}else s.push(_)}return s}var Nn=function(s){return String.fromCodePoint.apply(String,v(s))},qf=function(s){return s-48<10?s-22:s-65<26?s-65:s-97<26?s-97:g},Hi=function(s,f){return s+22+75*(s<26)-((f!=0)<<5)},Gi=function(s,f,y){var _=0;for(s=y?ue(s/h):s>>1,s+=ue(s/f);s>ve*w>>1;_+=g)s=ue(s/ve);return ue(_+(ve+1)*s/(s+S))},Ji=function(s){var f=[],y=s.length,_=0,R=P,q=E,W=s.lastIndexOf(N);W<0&&(W=0);for(var G=0;G<W;++G)s.charCodeAt(G)>=128&&Ve("not-basic"),f.push(s.charCodeAt(G));for(var fe=W>0?W+1:0;fe<y;){for(var V=_,ae=1,le=g;;le+=g){fe>=y&&Ve("invalid-input");var oe=qf(s.charCodeAt(fe++));(oe>=g||oe>ue(($-_)/ae))&&Ve("overflow"),_+=oe*ae;var H=le<=q?x:le>=q+w?w:le-q;if(oe<H)break;var ie=g-H;ae>ue($/ie)&&Ve("overflow"),ae*=ie}var Y=f.length+1;q=Gi(_-V,Y,V==0),ue(_/Y)>$-R&&Ve("overflow"),R+=ue(_/Y),_%=Y,f.splice(_++,0,R)}return String.fromCodePoint.apply(String,f)},Xi=function(s){var f=[];s=Pt(s);var y=s.length,_=P,R=0,q=E,W=!0,G=!1,fe=void 0;try{for(var V=s[Symbol.iterator](),ae;!(W=(ae=V.next()).done);W=!0){var le=ae.value;le<128&&f.push(qe(le))}}catch(Mr){G=!0,fe=Mr}finally{try{!W&&V.return&&V.return()}finally{if(G)throw fe}}var oe=f.length,H=oe;for(oe&&f.push(N);H<y;){var ie=$,Y=!0,Dr=!1,je=void 0;try{for(var We=s[Symbol.iterator](),ee;!(Y=(ee=We.next()).done);Y=!0){var De=ee.value;De>=_&&De<ie&&(ie=De)}}catch(Mr){Dr=!0,je=Mr}finally{try{!Y&&We.return&&We.return()}finally{if(Dr)throw je}}var Ke=H+1;ie-_>ue(($-R)/Ke)&&Ve("overflow"),R+=(ie-_)*Ke,_=ie;var ar=!0,Ur=!1,hr=void 0;try{for(var It=s[Symbol.iterator](),Ro;!(ar=(Ro=It.next()).done);ar=!0){var Ao=Ro.value;if(Ao<_&&++R>$&&Ve("overflow"),Ao==_){for(var at=R,it=g;;it+=g){var yr=it<=q?x:it>=q+w?w:it-q;if(at<yr)break;var st=at-yr,qn=g-yr;f.push(qe(Hi(yr+st%qn,0))),at=ue(st/qn)}f.push(qe(Hi(at,0))),q=Gi(R,Ke,H==oe),R=0,++H}}}catch(Mr){Ur=!0,hr=Mr}finally{try{!ar&&It.return&&It.return()}finally{if(Ur)throw hr}}++R,++_}return f.join("")},jf=function(s){return et(s,function(f){return I.test(f)?Ji(f.slice(4).toLowerCase()):f})},Df=function(s){return et(s,function(f){return k.test(f)?"xn--"+Xi(f):f})},rt={version:"2.1.0",ucs2:{decode:Pt,encode:Nn},decode:Ji,encode:Xi,toASCII:Df,toUnicode:jf},Be={};function tr(c){var s=c.charCodeAt(0),f=void 0;return s<16?f="%0"+s.toString(16).toUpperCase():s<128?f="%"+s.toString(16).toUpperCase():s<2048?f="%"+(s>>6|192).toString(16).toUpperCase()+"%"+(s&63|128).toString(16).toUpperCase():f="%"+(s>>12|224).toString(16).toUpperCase()+"%"+(s>>6&63|128).toString(16).toUpperCase()+"%"+(s&63|128).toString(16).toUpperCase(),f}function tt(c){for(var s="",f=0,y=c.length;f<y;){var _=parseInt(c.substr(f+1,2),16);if(_<128)s+=String.fromCharCode(_),f+=3;else if(_>=194&&_<224){if(y-f>=6){var R=parseInt(c.substr(f+4,2),16);s+=String.fromCharCode((_&31)<<6|R&63)}else s+=c.substr(f,6);f+=6}else if(_>=224){if(y-f>=9){var q=parseInt(c.substr(f+4,2),16),W=parseInt(c.substr(f+7,2),16);s+=String.fromCharCode((_&15)<<12|(q&63)<<6|W&63)}else s+=c.substr(f,9);f+=9}else s+=c.substr(f,3),f+=3}return s}function On(c,s){function f(y){var _=tt(y);return _.match(s.UNRESERVED)?_:y}return c.scheme&&(c.scheme=String(c.scheme).replace(s.PCT_ENCODED,f).toLowerCase().replace(s.NOT_SCHEME,"")),c.userinfo!==void 0&&(c.userinfo=String(c.userinfo).replace(s.PCT_ENCODED,f).replace(s.NOT_USERINFO,tr).replace(s.PCT_ENCODED,n)),c.host!==void 0&&(c.host=String(c.host).replace(s.PCT_ENCODED,f).toLowerCase().replace(s.NOT_HOST,tr).replace(s.PCT_ENCODED,n)),c.path!==void 0&&(c.path=String(c.path).replace(s.PCT_ENCODED,f).replace(c.scheme?s.NOT_PATH:s.NOT_PATH_NOSCHEME,tr).replace(s.PCT_ENCODED,n)),c.query!==void 0&&(c.query=String(c.query).replace(s.PCT_ENCODED,f).replace(s.NOT_QUERY,tr).replace(s.PCT_ENCODED,n)),c.fragment!==void 0&&(c.fragment=String(c.fragment).replace(s.PCT_ENCODED,f).replace(s.NOT_FRAGMENT,tr).replace(s.PCT_ENCODED,n)),c}function Cn(c){return c.replace(/^0*(.*)/,"$1")||"0"}function Tn(c,s){var f=c.match(s.IPV4ADDRESS)||[],y=m(f,2),_=y[1];return _?_.split(".").map(Cn).join("."):c}function Yi(c,s){var f=c.match(s.IPV6ADDRESS)||[],y=m(f,3),_=y[1],R=y[2];if(_){for(var q=_.toLowerCase().split("::").reverse(),W=m(q,2),G=W[0],fe=W[1],V=fe?fe.split(":").map(Cn):[],ae=G.split(":").map(Cn),le=s.IPV4ADDRESS.test(ae[ae.length-1]),oe=le?7:8,H=ae.length-oe,ie=Array(oe),Y=0;Y<oe;++Y)ie[Y]=V[Y]||ae[H+Y]||"";le&&(ie[oe-1]=Tn(ie[oe-1],s));var Dr=ie.reduce(function(Ke,ar,Ur){if(!ar||ar==="0"){var hr=Ke[Ke.length-1];hr&&hr.index+hr.length===Ur?hr.length++:Ke.push({index:Ur,length:1})}return Ke},[]),je=Dr.sort(function(Ke,ar){return ar.length-Ke.length})[0],We=void 0;if(je&&je.length>1){var ee=ie.slice(0,je.index),De=ie.slice(je.index+je.length);We=ee.join(":")+"::"+De.join(":")}else We=ie.join(":");return R&&(We+="%"+R),We}else return c}var Uf=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Mf="".match(/(){0}/)[1]===void 0;function dr(c){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f={},y=s.iri!==!1?d:l;s.reference==="suffix"&&(c=(s.scheme?s.scheme+":":"")+"//"+c);var _=c.match(Uf);if(_){Mf?(f.scheme=_[1],f.userinfo=_[3],f.host=_[4],f.port=parseInt(_[5],10),f.path=_[6]||"",f.query=_[7],f.fragment=_[8],isNaN(f.port)&&(f.port=_[5])):(f.scheme=_[1]||void 0,f.userinfo=c.indexOf("@")!==-1?_[3]:void 0,f.host=c.indexOf("//")!==-1?_[4]:void 0,f.port=parseInt(_[5],10),f.path=_[6]||"",f.query=c.indexOf("?")!==-1?_[7]:void 0,f.fragment=c.indexOf("#")!==-1?_[8]:void 0,isNaN(f.port)&&(f.port=c.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?_[4]:void 0)),f.host&&(f.host=Yi(Tn(f.host,y),y)),f.scheme===void 0&&f.userinfo===void 0&&f.host===void 0&&f.port===void 0&&!f.path&&f.query===void 0?f.reference="same-document":f.scheme===void 0?f.reference="relative":f.fragment===void 0?f.reference="absolute":f.reference="uri",s.reference&&s.reference!=="suffix"&&s.reference!==f.reference&&(f.error=f.error||"URI is not a "+s.reference+" reference.");var R=Be[(s.scheme||f.scheme||"").toLowerCase()];if(!s.unicodeSupport&&(!R||!R.unicodeSupport)){if(f.host&&(s.domainHost||R&&R.domainHost))try{f.host=rt.toASCII(f.host.replace(y.PCT_ENCODED,tt).toLowerCase())}catch(q){f.error=f.error||"Host's domain name can not be converted to ASCII via punycode: "+q}On(f,l)}else On(f,y);R&&R.parse&&R.parse(f,s)}else f.error=f.error||"URI can not be parsed.";return f}function Ff(c,s){var f=s.iri!==!1?d:l,y=[];return c.userinfo!==void 0&&(y.push(c.userinfo),y.push("@")),c.host!==void 0&&y.push(Yi(Tn(String(c.host),f),f).replace(f.IPV6ADDRESS,function(_,R,q){return"["+R+(q?"%25"+q:"")+"]"})),(typeof c.port=="number"||typeof c.port=="string")&&(y.push(":"),y.push(String(c.port))),y.length?y.join(""):void 0}var Qi=/^\.\.?\//,Zi=/^\/\.(\/|$)/,es=/^\/\.\.(\/|$)/,Lf=/^\/?(?:.|\n)*?(?=\/|$)/;function ot(c){for(var s=[];c.length;)if(c.match(Qi))c=c.replace(Qi,"");else if(c.match(Zi))c=c.replace(Zi,"/");else if(c.match(es))c=c.replace(es,"/"),s.pop();else if(c==="."||c==="..")c="";else{var f=c.match(Lf);if(f){var y=f[0];c=c.slice(y.length),s.push(y)}else throw new Error("Unexpected dot segment condition")}return s.join("")}function or(c){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=s.iri?d:l,y=[],_=Be[(s.scheme||c.scheme||"").toLowerCase()];if(_&&_.serialize&&_.serialize(c,s),c.host&&!f.IPV6ADDRESS.test(c.host)){if(s.domainHost||_&&_.domainHost)try{c.host=s.iri?rt.toUnicode(c.host):rt.toASCII(c.host.replace(f.PCT_ENCODED,tt).toLowerCase())}catch(W){c.error=c.error||"Host's domain name can not be converted to "+(s.iri?"Unicode":"ASCII")+" via punycode: "+W}}On(c,f),s.reference!=="suffix"&&c.scheme&&(y.push(c.scheme),y.push(":"));var R=Ff(c,s);if(R!==void 0&&(s.reference!=="suffix"&&y.push("//"),y.push(R),c.path&&c.path.charAt(0)!=="/"&&y.push("/")),c.path!==void 0){var q=c.path;!s.absolutePath&&(!_||!_.absolutePath)&&(q=ot(q)),R===void 0&&(q=q.replace(/^\/\//,"/%2F")),y.push(q)}return c.query!==void 0&&(y.push("?"),y.push(c.query)),c.fragment!==void 0&&(y.push("#"),y.push(c.fragment)),y.join("")}function rs(c,s){var f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},y=arguments[3],_={};return y||(c=dr(or(c,f),f),s=dr(or(s,f),f)),f=f||{},!f.tolerant&&s.scheme?(_.scheme=s.scheme,_.userinfo=s.userinfo,_.host=s.host,_.port=s.port,_.path=ot(s.path||""),_.query=s.query):(s.userinfo!==void 0||s.host!==void 0||s.port!==void 0?(_.userinfo=s.userinfo,_.host=s.host,_.port=s.port,_.path=ot(s.path||""),_.query=s.query):(s.path?(s.path.charAt(0)==="/"?_.path=ot(s.path):((c.userinfo!==void 0||c.host!==void 0||c.port!==void 0)&&!c.path?_.path="/"+s.path:c.path?_.path=c.path.slice(0,c.path.lastIndexOf("/")+1)+s.path:_.path=s.path,_.path=ot(_.path)),_.query=s.query):(_.path=c.path,s.query!==void 0?_.query=s.query:_.query=c.query),_.userinfo=c.userinfo,_.host=c.host,_.port=c.port),_.scheme=c.scheme),_.fragment=s.fragment,_}function Vf(c,s,f){var y=i({scheme:"null"},f);return or(rs(dr(c,y),dr(s,y),y,!0),y)}function Bf(c,s){return typeof c=="string"?c=or(dr(c,s),s):o(c)==="object"&&(c=dr(or(c,s),s)),c}function Wf(c,s,f){return typeof c=="string"?c=or(dr(c,f),f):o(c)==="object"&&(c=or(c,f)),typeof s=="string"?s=or(dr(s,f),f):o(s)==="object"&&(s=or(s,f)),c===s}function Kf(c,s){return c&&c.toString().replace(!s||!s.iri?l.ESCAPE:d.ESCAPE,tr)}function mr(c,s){return c&&c.toString().replace(!s||!s.iri?l.PCT_ENCODED:d.PCT_ENCODED,tt)}var Rt={scheme:"http",domainHost:!0,parse:function(s,f){return s.host||(s.error=s.error||"HTTP URIs must have a host."),s},serialize:function(s,f){var y=String(s.scheme).toLowerCase()==="https";return(s.port===(y?443:80)||s.port==="")&&(s.port=void 0),s.path||(s.path="/"),s}},ts={scheme:"https",domainHost:Rt.domainHost,parse:Rt.parse,serialize:Rt.serialize};function os(c){return typeof c.secure=="boolean"?c.secure:String(c.scheme).toLowerCase()==="wss"}var At={scheme:"ws",domainHost:!0,parse:function(s,f){var y=s;return y.secure=os(y),y.resourceName=(y.path||"/")+(y.query?"?"+y.query:""),y.path=void 0,y.query=void 0,y},serialize:function(s,f){if((s.port===(os(s)?443:80)||s.port==="")&&(s.port=void 0),typeof s.secure=="boolean"&&(s.scheme=s.secure?"wss":"ws",s.secure=void 0),s.resourceName){var y=s.resourceName.split("?"),_=m(y,2),R=_[0],q=_[1];s.path=R&&R!=="/"?R:void 0,s.query=q,s.resourceName=void 0}return s.fragment=void 0,s}},ns={scheme:"wss",domainHost:At.domainHost,parse:At.parse,serialize:At.serialize},zf={},Hf=!0,as="[A-Za-z0-9\\-\\.\\_\\~"+(Hf?"\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF":"")+"]",nr="[0-9A-Fa-f]",Gf=t(t("%[EFef]"+nr+"%"+nr+nr+"%"+nr+nr)+"|"+t("%[89A-Fa-f]"+nr+"%"+nr+nr)+"|"+t("%"+nr+nr)),Jf="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Xf="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Yf=e(Xf,'[\\"\\\\]'),Qf="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Zf=new RegExp(as,"g"),nt=new RegExp(Gf,"g"),el=new RegExp(e("[^]",Jf,"[\\.]",'[\\"]',Yf),"g"),is=new RegExp(e("[^]",as,Qf),"g"),rl=is;function kn(c){var s=tt(c);return s.match(Zf)?s:c}var ss={scheme:"mailto",parse:function(s,f){var y=s,_=y.to=y.path?y.path.split(","):[];if(y.path=void 0,y.query){for(var R=!1,q={},W=y.query.split("&"),G=0,fe=W.length;G<fe;++G){var V=W[G].split("=");switch(V[0]){case"to":for(var ae=V[1].split(","),le=0,oe=ae.length;le<oe;++le)_.push(ae[le]);break;case"subject":y.subject=mr(V[1],f);break;case"body":y.body=mr(V[1],f);break;default:R=!0,q[mr(V[0],f)]=mr(V[1],f);break}}R&&(y.headers=q)}y.query=void 0;for(var H=0,ie=_.length;H<ie;++H){var Y=_[H].split("@");if(Y[0]=mr(Y[0]),f.unicodeSupport)Y[1]=mr(Y[1],f).toLowerCase();else try{Y[1]=rt.toASCII(mr(Y[1],f).toLowerCase())}catch(Dr){y.error=y.error||"Email address's domain name can not be converted to ASCII via punycode: "+Dr}_[H]=Y.join("@")}return y},serialize:function(s,f){var y=s,_=a(s.to);if(_){for(var R=0,q=_.length;R<q;++R){var W=String(_[R]),G=W.lastIndexOf("@"),fe=W.slice(0,G).replace(nt,kn).replace(nt,n).replace(el,tr),V=W.slice(G+1);try{V=f.iri?rt.toUnicode(V):rt.toASCII(mr(V,f).toLowerCase())}catch(H){y.error=y.error||"Email address's domain name can not be converted to "+(f.iri?"Unicode":"ASCII")+" via punycode: "+H}_[R]=fe+"@"+V}y.path=_.join(",")}var ae=s.headers=s.headers||{};s.subject&&(ae.subject=s.subject),s.body&&(ae.body=s.body);var le=[];for(var oe in ae)ae[oe]!==zf[oe]&&le.push(oe.replace(nt,kn).replace(nt,n).replace(is,tr)+"="+ae[oe].replace(nt,kn).replace(nt,n).replace(rl,tr));return le.length&&(y.query=le.join("&")),y}},tl=/^([^\:]+)\:(.*)/,us={scheme:"urn",parse:function(s,f){var y=s.path&&s.path.match(tl),_=s;if(y){var R=f.scheme||_.scheme||"urn",q=y[1].toLowerCase(),W=y[2],G=R+":"+(f.nid||q),fe=Be[G];_.nid=q,_.nss=W,_.path=void 0,fe&&(_=fe.parse(_,f))}else _.error=_.error||"URN can not be parsed.";return _},serialize:function(s,f){var y=f.scheme||s.scheme||"urn",_=s.nid,R=y+":"+(f.nid||_),q=Be[R];q&&(s=q.serialize(s,f));var W=s,G=s.nss;return W.path=(_||f.nid)+":"+G,W}},ol=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,cs={scheme:"urn:uuid",parse:function(s,f){var y=s;return y.uuid=y.nss,y.nss=void 0,!f.tolerant&&(!y.uuid||!y.uuid.match(ol))&&(y.error=y.error||"UUID is not valid."),y},serialize:function(s,f){var y=s;return y.nss=(s.uuid||"").toLowerCase(),y}};Be[Rt.scheme]=Rt,Be[ts.scheme]=ts,Be[At.scheme]=At,Be[ns.scheme]=ns,Be[ss.scheme]=ss,Be[us.scheme]=us,Be[cs.scheme]=cs,r.SCHEMES=Be,r.pctEncChar=tr,r.pctDecChars=tt,r.parse=dr,r.removeDotSegments=ot,r.serialize=or,r.resolveComponents=rs,r.resolve=Vf,r.normalize=Bf,r.equal=Wf,r.escapeComponent=Kf,r.unescapeComponent=mr,Object.defineProperty(r,"__esModule",{value:!0})})});var Vu=A(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});var Lu=Fu();Lu.code='require("ajv/dist/runtime/uri").default';Xa.default=Lu});var Xu=A(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.CodeGen=xe.Name=xe.nil=xe.stringify=xe.str=xe._=xe.KeywordCxt=void 0;var bh=lo();Object.defineProperty(xe,"KeywordCxt",{enumerable:!0,get:function(){return bh.KeywordCxt}});var gt=M();Object.defineProperty(xe,"_",{enumerable:!0,get:function(){return gt._}});Object.defineProperty(xe,"str",{enumerable:!0,get:function(){return gt.str}});Object.defineProperty(xe,"stringify",{enumerable:!0,get:function(){return gt.stringify}});Object.defineProperty(xe,"nil",{enumerable:!0,get:function(){return gt.nil}});Object.defineProperty(xe,"Name",{enumerable:!0,get:function(){return gt.Name}});Object.defineProperty(xe,"CodeGen",{enumerable:!0,get:function(){return gt.CodeGen}});var Ph=on(),Hu=nn(),Rh=Na(),po=sn(),Ah=M(),mo=uo(),cn=so(),Qa=z(),Bu=Uu(),Ih=Vu(),Gu=(r,e)=>new RegExp(r,e);Gu.code="new RegExp";var Nh=["removeAdditional","useDefaults","coerceTypes"],Oh=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),Ch={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},Th={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},Wu=200;function kh(r){var e,t,o,n,a,i,u,l,d,m,v,$,g,x,w,S,h,E,P,N,I,k,he,ye,ve;let ue=r.strict,qe=(e=r.code)===null||e===void 0?void 0:e.optimize,Ve=qe===!0||qe===void 0?1:qe||0,Zr=(o=(t=r.code)===null||t===void 0?void 0:t.regExp)!==null&&o!==void 0?o:Gu,et=(n=r.uriResolver)!==null&&n!==void 0?n:Ih.default;return{strictSchema:(i=(a=r.strictSchema)!==null&&a!==void 0?a:ue)!==null&&i!==void 0?i:!0,strictNumbers:(l=(u=r.strictNumbers)!==null&&u!==void 0?u:ue)!==null&&l!==void 0?l:!0,strictTypes:(m=(d=r.strictTypes)!==null&&d!==void 0?d:ue)!==null&&m!==void 0?m:"log",strictTuples:($=(v=r.strictTuples)!==null&&v!==void 0?v:ue)!==null&&$!==void 0?$:"log",strictRequired:(x=(g=r.strictRequired)!==null&&g!==void 0?g:ue)!==null&&x!==void 0?x:!1,code:r.code?{...r.code,optimize:Ve,regExp:Zr}:{optimize:Ve,regExp:Zr},loopRequired:(w=r.loopRequired)!==null&&w!==void 0?w:Wu,loopEnum:(S=r.loopEnum)!==null&&S!==void 0?S:Wu,meta:(h=r.meta)!==null&&h!==void 0?h:!0,messages:(E=r.messages)!==null&&E!==void 0?E:!0,inlineRefs:(P=r.inlineRefs)!==null&&P!==void 0?P:!0,schemaId:(N=r.schemaId)!==null&&N!==void 0?N:"$id",addUsedSchema:(I=r.addUsedSchema)!==null&&I!==void 0?I:!0,validateSchema:(k=r.validateSchema)!==null&&k!==void 0?k:!0,validateFormats:(he=r.validateFormats)!==null&&he!==void 0?he:!0,unicodeRegExp:(ye=r.unicodeRegExp)!==null&&ye!==void 0?ye:!0,int32range:(ve=r.int32range)!==null&&ve!==void 0?ve:!0,uriResolver:et}}var ho=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...kh(e)};let{es5:t,lines:o}=this.opts.code;this.scope=new Ah.ValueScope({scope:{},prefixes:Oh,es5:t,lines:o}),this.logger=Fh(e.logger);let n=e.validateFormats;e.validateFormats=!1,this.RULES=(0,Rh.getRules)(),Ku.call(this,Ch,e,"NOT SUPPORTED"),Ku.call(this,Th,e,"DEPRECATED","warn"),this._metaOpts=Uh.call(this),e.formats&&jh.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&Dh.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),qh.call(this),e.validateFormats=n}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:t,schemaId:o}=this.opts,n=Bu;o==="id"&&(n={...Bu},n.id=n.$id,delete n.$id),t&&e&&this.addMetaSchema(n,n[o],!1)}defaultMeta(){let{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[t]||e:void 0}validate(e,t){let o;if(typeof e=="string"){if(o=this.getSchema(e),!o)throw new Error(`no schema with key or ref "${e}"`)}else o=this.compile(e);let n=o(t);return"$async"in o||(this.errors=o.errors),n}compile(e,t){let o=this._addSchema(e,t);return o.validate||this._compileSchemaEnv(o)}compileAsync(e,t){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:o}=this.opts;return n.call(this,e,t);async function n(m,v){await a.call(this,m.$schema);let $=this._addSchema(m,v);return $.validate||i.call(this,$)}async function a(m){m&&!this.getSchema(m)&&await n.call(this,{$ref:m},!0)}async function i(m){try{return this._compileSchemaEnv(m)}catch(v){if(!(v instanceof Hu.default))throw v;return u.call(this,v),await l.call(this,v.missingSchema),i.call(this,m)}}function u({missingSchema:m,missingRef:v}){if(this.refs[m])throw new Error(`AnySchema ${m} is loaded but ${v} cannot be resolved`)}async function l(m){let v=await d.call(this,m);this.refs[m]||await a.call(this,v.$schema),this.refs[m]||this.addSchema(v,m,t)}async function d(m){let v=this._loading[m];if(v)return v;try{return await(this._loading[m]=o(m))}finally{delete this._loading[m]}}}addSchema(e,t,o,n=this.opts.validateSchema){if(Array.isArray(e)){for(let i of e)this.addSchema(i,void 0,o,n);return this}let a;if(typeof e=="object"){let{schemaId:i}=this.opts;if(a=e[i],a!==void 0&&typeof a!="string")throw new Error(`schema ${i} must be string`)}return t=(0,mo.normalizeId)(t||a),this._checkUnique(t),this.schemas[t]=this._addSchema(e,o,t,n,!0),this}addMetaSchema(e,t,o=this.opts.validateSchema){return this.addSchema(e,t,!0,o),this}validateSchema(e,t){if(typeof e=="boolean")return!0;let o;if(o=e.$schema,o!==void 0&&typeof o!="string")throw new Error("$schema must be a string");if(o=o||this.opts.defaultMeta||this.defaultMeta(),!o)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let n=this.validate(o,e);if(!n&&t){let a="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(a);else throw new Error(a)}return n}getSchema(e){let t;for(;typeof(t=zu.call(this,e))=="string";)e=t;if(t===void 0){let{schemaId:o}=this.opts,n=new po.SchemaEnv({schema:{},schemaId:o});if(t=po.resolveSchema.call(this,n,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let t=zu.call(this,e);return typeof t=="object"&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let t=e;this._cache.delete(t);let o=e[this.opts.schemaId];return o&&(o=(0,mo.normalizeId)(o),delete this.schemas[o],delete this.refs[o]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let t of e)this.addKeyword(t);return this}addKeyword(e,t){let o;if(typeof e=="string")o=e,typeof t=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=o);else if(typeof e=="object"&&t===void 0){if(t=e,o=t.keyword,Array.isArray(o)&&!o.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Vh.call(this,o,t),!t)return(0,Qa.eachItem)(o,a=>Ya.call(this,a)),this;Wh.call(this,t);let n={...t,type:(0,cn.getJSONTypes)(t.type),schemaType:(0,cn.getJSONTypes)(t.schemaType)};return(0,Qa.eachItem)(o,n.type.length===0?a=>Ya.call(this,a,n):a=>n.type.forEach(i=>Ya.call(this,a,n,i))),this}getKeyword(e){let t=this.RULES.all[e];return typeof t=="object"?t.definition:!!t}removeKeyword(e){let{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(let o of t.rules){let n=o.rules.findIndex(a=>a.keyword===e);n>=0&&o.rules.splice(n,1)}return this}addFormat(e,t){return typeof t=="string"&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:o="data"}={}){return!e||e.length===0?"No errors":e.map(n=>`${o}${n.instancePath} ${n.message}`).reduce((n,a)=>n+t+a)}$dataMetaSchema(e,t){let o=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let n of t){let a=n.split("/").slice(1),i=e;for(let u of a)i=i[u];for(let u in o){let l=o[u];if(typeof l!="object")continue;let{$data:d}=l.definition,m=i[u];d&&m&&(i[u]=Ju(m))}}return e}_removeAllSchemas(e,t){for(let o in e){let n=e[o];(!t||t.test(o))&&(typeof n=="string"?delete e[o]:n&&!n.meta&&(this._cache.delete(n.schema),delete e[o]))}}_addSchema(e,t,o,n=this.opts.validateSchema,a=this.opts.addUsedSchema){let i,{schemaId:u}=this.opts;if(typeof e=="object")i=e[u];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let l=this._cache.get(e);if(l!==void 0)return l;o=(0,mo.normalizeId)(i||o);let d=mo.getSchemaRefs.call(this,e,o);return l=new po.SchemaEnv({schema:e,schemaId:u,meta:t,baseId:o,localRefs:d}),this._cache.set(l.schema,l),a&&!o.startsWith("#")&&(o&&this._checkUnique(o),this.refs[o]=l),n&&this.validateSchema(e,!0),l}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):po.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let t=this.opts;this.opts=this._metaOpts;try{po.compileSchema.call(this,e)}finally{this.opts=t}}};xe.default=ho;ho.ValidationError=Ph.default;ho.MissingRefError=Hu.default;function Ku(r,e,t,o="error"){for(let n in r){let a=n;a in e&&this.logger[o](`${t}: option ${n}. ${r[a]}`)}}function zu(r){return r=(0,mo.normalizeId)(r),this.schemas[r]||this.refs[r]}function qh(){let r=this.opts.schemas;if(r)if(Array.isArray(r))this.addSchema(r);else for(let e in r)this.addSchema(r[e],e)}function jh(){for(let r in this.opts.formats){let e=this.opts.formats[r];e&&this.addFormat(r,e)}}function Dh(r){if(Array.isArray(r)){this.addVocabulary(r);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in r){let t=r[e];t.keyword||(t.keyword=e),this.addKeyword(t)}}function Uh(){let r={...this.opts};for(let e of Nh)delete r[e];return r}var Mh={log(){},warn(){},error(){}};function Fh(r){if(r===!1)return Mh;if(r===void 0)return console;if(r.log&&r.warn&&r.error)return r;throw new Error("logger must implement log, warn and error methods")}var Lh=/^[a-z_$][a-z0-9_$:-]*$/i;function Vh(r,e){let{RULES:t}=this;if((0,Qa.eachItem)(r,o=>{if(t.keywords[o])throw new Error(`Keyword ${o} is already defined`);if(!Lh.test(o))throw new Error(`Keyword ${o} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function Ya(r,e,t){var o;let n=e?.post;if(t&&n)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:a}=this,i=n?a.post:a.rules.find(({type:l})=>l===t);if(i||(i={type:t,rules:[]},a.rules.push(i)),a.keywords[r]=!0,!e)return;let u={keyword:r,definition:{...e,type:(0,cn.getJSONTypes)(e.type),schemaType:(0,cn.getJSONTypes)(e.schemaType)}};e.before?Bh.call(this,i,u,e.before):i.rules.push(u),a.all[r]=u,(o=e.implements)===null||o===void 0||o.forEach(l=>this.addKeyword(l))}function Bh(r,e,t){let o=r.rules.findIndex(n=>n.keyword===t);o>=0?r.rules.splice(o,0,e):(r.rules.push(e),this.logger.warn(`rule ${t} is not defined`))}function Wh(r){let{metaSchema:e}=r;e!==void 0&&(r.$data&&this.opts.$data&&(e=Ju(e)),r.validateSchema=this.compile(e,!0))}var Kh={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Ju(r){return{anyOf:[r,Kh]}}});var Yu=A(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});var zh={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Za.default=zh});var rc=A(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.callRef=Jr.getValidate=void 0;var Hh=nn(),Qu=Ge(),ke=M(),xt=Sr(),Zu=sn(),fn=z(),Gh={keyword:"$ref",schemaType:"string",code(r){let{gen:e,schema:t,it:o}=r,{baseId:n,schemaEnv:a,validateName:i,opts:u,self:l}=o,{root:d}=a;if((t==="#"||t==="#/")&&n===d.baseId)return v();let m=Zu.resolveRef.call(l,d,n,t);if(m===void 0)throw new Hh.default(o.opts.uriResolver,n,t);if(m instanceof Zu.SchemaEnv)return $(m);return g(m);function v(){if(a===d)return ln(r,i,a,a.$async);let x=e.scopeValue("root",{ref:d});return ln(r,(0,ke._)`${x}.validate`,d,d.$async)}function $(x){let w=ec(r,x);ln(r,w,x,x.$async)}function g(x){let w=e.scopeValue("schema",u.code.source===!0?{ref:x,code:(0,ke.stringify)(x)}:{ref:x}),S=e.name("valid"),h=r.subschema({schema:x,dataTypes:[],schemaPath:ke.nil,topSchemaRef:w,errSchemaPath:t},S);r.mergeEvaluated(h),r.ok(S)}}};function ec(r,e){let{gen:t}=r;return e.validate?t.scopeValue("validate",{ref:e.validate}):(0,ke._)`${t.scopeValue("wrapper",{ref:e})}.validate`}Jr.getValidate=ec;function ln(r,e,t,o){let{gen:n,it:a}=r,{allErrors:i,schemaEnv:u,opts:l}=a,d=l.passContext?xt.default.this:ke.nil;o?m():v();function m(){if(!u.$async)throw new Error("async schema referenced by sync schema");let x=n.let("valid");n.try(()=>{n.code((0,ke._)`await ${(0,Qu.callValidateCode)(r,e,d)}`),g(e),i||n.assign(x,!0)},w=>{n.if((0,ke._)`!(${w} instanceof ${a.ValidationError})`,()=>n.throw(w)),$(w),i||n.assign(x,!1)}),r.ok(x)}function v(){r.result((0,Qu.callValidateCode)(r,e,d),()=>g(e),()=>$(e))}function $(x){let w=(0,ke._)`${x}.errors`;n.assign(xt.default.vErrors,(0,ke._)`${xt.default.vErrors} === null ? ${w} : ${xt.default.vErrors}.concat(${w})`),n.assign(xt.default.errors,(0,ke._)`${xt.default.vErrors}.length`)}function g(x){var w;if(!a.opts.unevaluated)return;let S=(w=t?.validate)===null||w===void 0?void 0:w.evaluated;if(a.props!==!0)if(S&&!S.dynamicProps)S.props!==void 0&&(a.props=fn.mergeEvaluated.props(n,S.props,a.props));else{let h=n.var("props",(0,ke._)`${x}.evaluated.props`);a.props=fn.mergeEvaluated.props(n,h,a.props,ke.Name)}if(a.items!==!0)if(S&&!S.dynamicItems)S.items!==void 0&&(a.items=fn.mergeEvaluated.items(n,S.items,a.items));else{let h=n.var("items",(0,ke._)`${x}.evaluated.items`);a.items=fn.mergeEvaluated.items(n,h,a.items,ke.Name)}}}Jr.callRef=ln;Jr.default=Gh});var tc=A(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});var Jh=Yu(),Xh=rc(),Yh=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Jh.default,Xh.default];ei.default=Yh});var oc=A(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});var pn=M(),jr=pn.operators,dn={maximum:{okStr:"<=",ok:jr.LTE,fail:jr.GT},minimum:{okStr:">=",ok:jr.GTE,fail:jr.LT},exclusiveMaximum:{okStr:"<",ok:jr.LT,fail:jr.GTE},exclusiveMinimum:{okStr:">",ok:jr.GT,fail:jr.LTE}},Qh={message:({keyword:r,schemaCode:e})=>(0,pn.str)`must be ${dn[r].okStr} ${e}`,params:({keyword:r,schemaCode:e})=>(0,pn._)`{comparison: ${dn[r].okStr}, limit: ${e}}`},Zh={keyword:Object.keys(dn),type:"number",schemaType:"number",$data:!0,error:Qh,code(r){let{keyword:e,data:t,schemaCode:o}=r;r.fail$data((0,pn._)`${t} ${dn[e].fail} ${o} || isNaN(${t})`)}};ri.default=Zh});var nc=A(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});var yo=M(),ey={message:({schemaCode:r})=>(0,yo.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,yo._)`{multipleOf: ${r}}`},ry={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:ey,code(r){let{gen:e,data:t,schemaCode:o,it:n}=r,a=n.opts.multipleOfPrecision,i=e.let("res"),u=a?(0,yo._)`Math.abs(Math.round(${i}) - ${i}) > 1e-${a}`:(0,yo._)`${i} !== parseInt(${i})`;r.fail$data((0,yo._)`(${o} === 0 || (${i} = ${t}/${o}, ${u}))`)}};ti.default=ry});var ic=A(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});function ac(r){let e=r.length,t=0,o=0,n;for(;o<e;)t++,n=r.charCodeAt(o++),n>=55296&&n<=56319&&o<e&&(n=r.charCodeAt(o),(n&64512)===56320&&o++);return t}oi.default=ac;ac.code='require("ajv/dist/runtime/ucs2length").default'});var sc=A(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});var Xr=M(),ty=z(),oy=ic(),ny={message({keyword:r,schemaCode:e}){let t=r==="maxLength"?"more":"fewer";return(0,Xr.str)`must NOT have ${t} than ${e} characters`},params:({schemaCode:r})=>(0,Xr._)`{limit: ${r}}`},ay={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:ny,code(r){let{keyword:e,data:t,schemaCode:o,it:n}=r,a=e==="maxLength"?Xr.operators.GT:Xr.operators.LT,i=n.opts.unicode===!1?(0,Xr._)`${t}.length`:(0,Xr._)`${(0,ty.useFunc)(r.gen,oy.default)}(${t})`;r.fail$data((0,Xr._)`${i} ${a} ${o}`)}};ni.default=ay});var uc=A(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});var iy=Ge(),mn=M(),sy={message:({schemaCode:r})=>(0,mn.str)`must match pattern "${r}"`,params:({schemaCode:r})=>(0,mn._)`{pattern: ${r}}`},uy={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:sy,code(r){let{data:e,$data:t,schema:o,schemaCode:n,it:a}=r,i=a.opts.unicodeRegExp?"u":"",u=t?(0,mn._)`(new RegExp(${n}, ${i}))`:(0,iy.usePattern)(r,o);r.fail$data((0,mn._)`!${u}.test(${e})`)}};ai.default=uy});var cc=A(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});var vo=M(),cy={message({keyword:r,schemaCode:e}){let t=r==="maxProperties"?"more":"fewer";return(0,vo.str)`must NOT have ${t} than ${e} properties`},params:({schemaCode:r})=>(0,vo._)`{limit: ${r}}`},fy={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:cy,code(r){let{keyword:e,data:t,schemaCode:o}=r,n=e==="maxProperties"?vo.operators.GT:vo.operators.LT;r.fail$data((0,vo._)`Object.keys(${t}).length ${n} ${o}`)}};ii.default=fy});var fc=A(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});var _o=Ge(),go=M(),ly=z(),py={message:({params:{missingProperty:r}})=>(0,go.str)`must have required property '${r}'`,params:({params:{missingProperty:r}})=>(0,go._)`{missingProperty: ${r}}`},dy={keyword:"required",type:"object",schemaType:"array",$data:!0,error:py,code(r){let{gen:e,schema:t,schemaCode:o,data:n,$data:a,it:i}=r,{opts:u}=i;if(!a&&t.length===0)return;let l=t.length>=u.loopRequired;if(i.allErrors?d():m(),u.strictRequired){let g=r.parentSchema.properties,{definedProperties:x}=r.it;for(let w of t)if(g?.[w]===void 0&&!x.has(w)){let S=i.schemaEnv.baseId+i.errSchemaPath,h=`required property "${w}" is not defined at "${S}" (strictRequired)`;(0,ly.checkStrictMode)(i,h,i.opts.strictRequired)}}function d(){if(l||a)r.block$data(go.nil,v);else for(let g of t)(0,_o.checkReportMissingProp)(r,g)}function m(){let g=e.let("missing");if(l||a){let x=e.let("valid",!0);r.block$data(x,()=>$(g,x)),r.ok(x)}else e.if((0,_o.checkMissingProp)(r,t,g)),(0,_o.reportMissingProp)(r,g),e.else()}function v(){e.forOf("prop",o,g=>{r.setParams({missingProperty:g}),e.if((0,_o.noPropertyInData)(e,n,g,u.ownProperties),()=>r.error())})}function $(g,x){r.setParams({missingProperty:g}),e.forOf(g,o,()=>{e.assign(x,(0,_o.propertyInData)(e,n,g,u.ownProperties)),e.if((0,go.not)(x),()=>{r.error(),e.break()})},go.nil)}}};si.default=dy});var lc=A(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});var xo=M(),my={message({keyword:r,schemaCode:e}){let t=r==="maxItems"?"more":"fewer";return(0,xo.str)`must NOT have ${t} than ${e} items`},params:({schemaCode:r})=>(0,xo._)`{limit: ${r}}`},hy={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:my,code(r){let{keyword:e,data:t,schemaCode:o}=r,n=e==="maxItems"?xo.operators.GT:xo.operators.LT;r.fail$data((0,xo._)`${t}.length ${n} ${o}`)}};ui.default=hy});var hn=A(ci=>{"use strict";Object.defineProperty(ci,"__esModule",{value:!0});var pc=Ua();pc.code='require("ajv/dist/runtime/equal").default';ci.default=pc});var dc=A(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});var fi=so(),we=M(),yy=z(),vy=hn(),_y={message:({params:{i:r,j:e}})=>(0,we.str)`must NOT have duplicate items (items ## ${e} and ${r} are identical)`,params:({params:{i:r,j:e}})=>(0,we._)`{i: ${r}, j: ${e}}`},gy={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:_y,code(r){let{gen:e,data:t,$data:o,schema:n,parentSchema:a,schemaCode:i,it:u}=r;if(!o&&!n)return;let l=e.let("valid"),d=a.items?(0,fi.getSchemaTypes)(a.items):[];r.block$data(l,m,(0,we._)`${i} === false`),r.ok(l);function m(){let x=e.let("i",(0,we._)`${t}.length`),w=e.let("j");r.setParams({i:x,j:w}),e.assign(l,!0),e.if((0,we._)`${x} > 1`,()=>(v()?$:g)(x,w))}function v(){return d.length>0&&!d.some(x=>x==="object"||x==="array")}function $(x,w){let S=e.name("item"),h=(0,fi.checkDataTypes)(d,S,u.opts.strictNumbers,fi.DataType.Wrong),E=e.const("indices",(0,we._)`{}`);e.for((0,we._)`;${x}--;`,()=>{e.let(S,(0,we._)`${t}[${x}]`),e.if(h,(0,we._)`continue`),d.length>1&&e.if((0,we._)`typeof ${S} == "string"`,(0,we._)`${S} += "_"`),e.if((0,we._)`typeof ${E}[${S}] == "number"`,()=>{e.assign(w,(0,we._)`${E}[${S}]`),r.error(),e.assign(l,!1).break()}).code((0,we._)`${E}[${S}] = ${x}`)})}function g(x,w){let S=(0,yy.useFunc)(e,vy.default),h=e.name("outer");e.label(h).for((0,we._)`;${x}--;`,()=>e.for((0,we._)`${w} = ${x}; ${w}--;`,()=>e.if((0,we._)`${S}(${t}[${x}], ${t}[${w}])`,()=>{r.error(),e.assign(l,!1).break(h)})))}}};li.default=gy});var mc=A(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});var pi=M(),xy=z(),wy=hn(),Ey={message:"must be equal to constant",params:({schemaCode:r})=>(0,pi._)`{allowedValue: ${r}}`},$y={keyword:"const",$data:!0,error:Ey,code(r){let{gen:e,data:t,$data:o,schemaCode:n,schema:a}=r;o||a&&typeof a=="object"?r.fail$data((0,pi._)`!${(0,xy.useFunc)(e,wy.default)}(${t}, ${n})`):r.fail((0,pi._)`${a} !== ${t}`)}};di.default=$y});var hc=A(mi=>{"use strict";Object.defineProperty(mi,"__esModule",{value:!0});var wo=M(),Sy=z(),by=hn(),Py={message:"must be equal to one of the allowed values",params:({schemaCode:r})=>(0,wo._)`{allowedValues: ${r}}`},Ry={keyword:"enum",schemaType:"array",$data:!0,error:Py,code(r){let{gen:e,data:t,$data:o,schema:n,schemaCode:a,it:i}=r;if(!o&&n.length===0)throw new Error("enum must have non-empty array");let u=n.length>=i.opts.loopEnum,l,d=()=>l??(l=(0,Sy.useFunc)(e,by.default)),m;if(u||o)m=e.let("valid"),r.block$data(m,v);else{if(!Array.isArray(n))throw new Error("ajv implementation error");let g=e.const("vSchema",a);m=(0,wo.or)(...n.map((x,w)=>$(g,w)))}r.pass(m);function v(){e.assign(m,!1),e.forOf("v",a,g=>e.if((0,wo._)`${d()}(${t}, ${g})`,()=>e.assign(m,!0).break()))}function $(g,x){let w=n[x];return typeof w=="object"&&w!==null?(0,wo._)`${d()}(${t}, ${g}[${x}])`:(0,wo._)`${t} === ${w}`}}};mi.default=Ry});var yc=A(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});var Ay=oc(),Iy=nc(),Ny=sc(),Oy=uc(),Cy=cc(),Ty=fc(),ky=lc(),qy=dc(),jy=mc(),Dy=hc(),Uy=[Ay.default,Iy.default,Ny.default,Oy.default,Cy.default,Ty.default,ky.default,qy.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},jy.default,Dy.default];hi.default=Uy});var vi=A(Eo=>{"use strict";Object.defineProperty(Eo,"__esModule",{value:!0});Eo.validateAdditionalItems=void 0;var Yr=M(),yi=z(),My={message:({params:{len:r}})=>(0,Yr.str)`must NOT have more than ${r} items`,params:({params:{len:r}})=>(0,Yr._)`{limit: ${r}}`},Fy={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:My,code(r){let{parentSchema:e,it:t}=r,{items:o}=e;if(!Array.isArray(o)){(0,yi.checkStrictMode)(t,'"additionalItems" is ignored when "items" is not an array of schemas');return}vc(r,o)}};function vc(r,e){let{gen:t,schema:o,data:n,keyword:a,it:i}=r;i.items=!0;let u=t.const("len",(0,Yr._)`${n}.length`);if(o===!1)r.setParams({len:e.length}),r.pass((0,Yr._)`${u} <= ${e.length}`);else if(typeof o=="object"&&!(0,yi.alwaysValidSchema)(i,o)){let d=t.var("valid",(0,Yr._)`${u} <= ${e.length}`);t.if((0,Yr.not)(d),()=>l(d)),r.ok(d)}function l(d){t.forRange("i",e.length,u,m=>{r.subschema({keyword:a,dataProp:m,dataPropType:yi.Type.Num},d),i.allErrors||t.if((0,Yr.not)(d),()=>t.break())})}}Eo.validateAdditionalItems=vc;Eo.default=Fy});var _i=A($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.validateTuple=void 0;var _c=M(),yn=z(),Ly=Ge(),Vy={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(r){let{schema:e,it:t}=r;if(Array.isArray(e))return gc(r,"additionalItems",e);t.items=!0,!(0,yn.alwaysValidSchema)(t,e)&&r.ok((0,Ly.validateArray)(r))}};function gc(r,e,t=r.schema){let{gen:o,parentSchema:n,data:a,keyword:i,it:u}=r;m(n),u.opts.unevaluated&&t.length&&u.items!==!0&&(u.items=yn.mergeEvaluated.items(o,t.length,u.items));let l=o.name("valid"),d=o.const("len",(0,_c._)`${a}.length`);t.forEach((v,$)=>{(0,yn.alwaysValidSchema)(u,v)||(o.if((0,_c._)`${d} > ${$}`,()=>r.subschema({keyword:i,schemaProp:$,dataProp:$},l)),r.ok(l))});function m(v){let{opts:$,errSchemaPath:g}=u,x=t.length,w=x===v.minItems&&(x===v.maxItems||v[e]===!1);if($.strictTuples&&!w){let S=`"${i}" is ${x}-tuple, but minItems or maxItems/${e} are not specified or different at path "${g}"`;(0,yn.checkStrictMode)(u,S,$.strictTuples)}}}$o.validateTuple=gc;$o.default=Vy});var xc=A(gi=>{"use strict";Object.defineProperty(gi,"__esModule",{value:!0});var By=_i(),Wy={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:r=>(0,By.validateTuple)(r,"items")};gi.default=Wy});var Ec=A(xi=>{"use strict";Object.defineProperty(xi,"__esModule",{value:!0});var wc=M(),Ky=z(),zy=Ge(),Hy=vi(),Gy={message:({params:{len:r}})=>(0,wc.str)`must NOT have more than ${r} items`,params:({params:{len:r}})=>(0,wc._)`{limit: ${r}}`},Jy={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Gy,code(r){let{schema:e,parentSchema:t,it:o}=r,{prefixItems:n}=t;o.items=!0,!(0,Ky.alwaysValidSchema)(o,e)&&(n?(0,Hy.validateAdditionalItems)(r,n):r.ok((0,zy.validateArray)(r)))}};xi.default=Jy});var $c=A(wi=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});var Xe=M(),vn=z(),Xy={message:({params:{min:r,max:e}})=>e===void 0?(0,Xe.str)`must contain at least ${r} valid item(s)`:(0,Xe.str)`must contain at least ${r} and no more than ${e} valid item(s)`,params:({params:{min:r,max:e}})=>e===void 0?(0,Xe._)`{minContains: ${r}}`:(0,Xe._)`{minContains: ${r}, maxContains: ${e}}`},Yy={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Xy,code(r){let{gen:e,schema:t,parentSchema:o,data:n,it:a}=r,i,u,{minContains:l,maxContains:d}=o;a.opts.next?(i=l===void 0?1:l,u=d):i=1;let m=e.const("len",(0,Xe._)`${n}.length`);if(r.setParams({min:i,max:u}),u===void 0&&i===0){(0,vn.checkStrictMode)(a,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(u!==void 0&&i>u){(0,vn.checkStrictMode)(a,'"minContains" > "maxContains" is always invalid'),r.fail();return}if((0,vn.alwaysValidSchema)(a,t)){let w=(0,Xe._)`${m} >= ${i}`;u!==void 0&&(w=(0,Xe._)`${w} && ${m} <= ${u}`),r.pass(w);return}a.items=!0;let v=e.name("valid");u===void 0&&i===1?g(v,()=>e.if(v,()=>e.break())):i===0?(e.let(v,!0),u!==void 0&&e.if((0,Xe._)`${n}.length > 0`,$)):(e.let(v,!1),$()),r.result(v,()=>r.reset());function $(){let w=e.name("_valid"),S=e.let("count",0);g(w,()=>e.if(w,()=>x(S)))}function g(w,S){e.forRange("i",0,m,h=>{r.subschema({keyword:"contains",dataProp:h,dataPropType:vn.Type.Num,compositeRule:!0},w),S()})}function x(w){e.code((0,Xe._)`${w}++`),u===void 0?e.if((0,Xe._)`${w} >= ${i}`,()=>e.assign(v,!0).break()):(e.if((0,Xe._)`${w} > ${u}`,()=>e.assign(v,!1).break()),i===1?e.assign(v,!0):e.if((0,Xe._)`${w} >= ${i}`,()=>e.assign(v,!0)))}}};wi.default=Yy});var Pc=A(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});pr.validateSchemaDeps=pr.validatePropertyDeps=pr.error=void 0;var Ei=M(),Qy=z(),So=Ge();pr.error={message:({params:{property:r,depsCount:e,deps:t}})=>{let o=e===1?"property":"properties";return(0,Ei.str)`must have ${o} ${t} when property ${r} is present`},params:({params:{property:r,depsCount:e,deps:t,missingProperty:o}})=>(0,Ei._)`{property: ${r},
    missingProperty: ${o},
    depsCount: ${e},
    deps: ${t}}`};var Zy={keyword:"dependencies",type:"object",schemaType:"object",error:pr.error,code(r){let[e,t]=ev(r);Sc(r,e),bc(r,t)}};function ev({schema:r}){let e={},t={};for(let o in r){if(o==="__proto__")continue;let n=Array.isArray(r[o])?e:t;n[o]=r[o]}return[e,t]}function Sc(r,e=r.schema){let{gen:t,data:o,it:n}=r;if(Object.keys(e).length===0)return;let a=t.let("missing");for(let i in e){let u=e[i];if(u.length===0)continue;let l=(0,So.propertyInData)(t,o,i,n.opts.ownProperties);r.setParams({property:i,depsCount:u.length,deps:u.join(", ")}),n.allErrors?t.if(l,()=>{for(let d of u)(0,So.checkReportMissingProp)(r,d)}):(t.if((0,Ei._)`${l} && (${(0,So.checkMissingProp)(r,u,a)})`),(0,So.reportMissingProp)(r,a),t.else())}}pr.validatePropertyDeps=Sc;function bc(r,e=r.schema){let{gen:t,data:o,keyword:n,it:a}=r,i=t.name("valid");for(let u in e)(0,Qy.alwaysValidSchema)(a,e[u])||(t.if((0,So.propertyInData)(t,o,u,a.opts.ownProperties),()=>{let l=r.subschema({keyword:n,schemaProp:u},i);r.mergeValidEvaluated(l,i)},()=>t.var(i,!0)),r.ok(i))}pr.validateSchemaDeps=bc;pr.default=Zy});var Ac=A($i=>{"use strict";Object.defineProperty($i,"__esModule",{value:!0});var Rc=M(),rv=z(),tv={message:"property name must be valid",params:({params:r})=>(0,Rc._)`{propertyName: ${r.propertyName}}`},ov={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:tv,code(r){let{gen:e,schema:t,data:o,it:n}=r;if((0,rv.alwaysValidSchema)(n,t))return;let a=e.name("valid");e.forIn("key",o,i=>{r.setParams({propertyName:i}),r.subschema({keyword:"propertyNames",data:i,dataTypes:["string"],propertyName:i,compositeRule:!0},a),e.if((0,Rc.not)(a),()=>{r.error(!0),n.allErrors||e.break()})}),r.ok(a)}};$i.default=ov});var bi=A(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});var _n=Ge(),rr=M(),nv=Sr(),gn=z(),av={message:"must NOT have additional properties",params:({params:r})=>(0,rr._)`{additionalProperty: ${r.additionalProperty}}`},iv={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:av,code(r){let{gen:e,schema:t,parentSchema:o,data:n,errsCount:a,it:i}=r;if(!a)throw new Error("ajv implementation error");let{allErrors:u,opts:l}=i;if(i.props=!0,l.removeAdditional!=="all"&&(0,gn.alwaysValidSchema)(i,t))return;let d=(0,_n.allSchemaProperties)(o.properties),m=(0,_n.allSchemaProperties)(o.patternProperties);v(),r.ok((0,rr._)`${a} === ${nv.default.errors}`);function v(){e.forIn("key",n,S=>{!d.length&&!m.length?x(S):e.if($(S),()=>x(S))})}function $(S){let h;if(d.length>8){let E=(0,gn.schemaRefOrVal)(i,o.properties,"properties");h=(0,_n.isOwnProperty)(e,E,S)}else d.length?h=(0,rr.or)(...d.map(E=>(0,rr._)`${S} === ${E}`)):h=rr.nil;return m.length&&(h=(0,rr.or)(h,...m.map(E=>(0,rr._)`${(0,_n.usePattern)(r,E)}.test(${S})`))),(0,rr.not)(h)}function g(S){e.code((0,rr._)`delete ${n}[${S}]`)}function x(S){if(l.removeAdditional==="all"||l.removeAdditional&&t===!1){g(S);return}if(t===!1){r.setParams({additionalProperty:S}),r.error(),u||e.break();return}if(typeof t=="object"&&!(0,gn.alwaysValidSchema)(i,t)){let h=e.name("valid");l.removeAdditional==="failing"?(w(S,h,!1),e.if((0,rr.not)(h),()=>{r.reset(),g(S)})):(w(S,h),u||e.if((0,rr.not)(h),()=>e.break()))}}function w(S,h,E){let P={keyword:"additionalProperties",dataProp:S,dataPropType:gn.Type.Str};E===!1&&Object.assign(P,{compositeRule:!0,createErrors:!1,allErrors:!1}),r.subschema(P,h)}}};Si.default=iv});var Oc=A(Ri=>{"use strict";Object.defineProperty(Ri,"__esModule",{value:!0});var sv=lo(),Ic=Ge(),Pi=z(),Nc=bi(),uv={keyword:"properties",type:"object",schemaType:"object",code(r){let{gen:e,schema:t,parentSchema:o,data:n,it:a}=r;a.opts.removeAdditional==="all"&&o.additionalProperties===void 0&&Nc.default.code(new sv.KeywordCxt(a,Nc.default,"additionalProperties"));let i=(0,Ic.allSchemaProperties)(t);for(let v of i)a.definedProperties.add(v);a.opts.unevaluated&&i.length&&a.props!==!0&&(a.props=Pi.mergeEvaluated.props(e,(0,Pi.toHash)(i),a.props));let u=i.filter(v=>!(0,Pi.alwaysValidSchema)(a,t[v]));if(u.length===0)return;let l=e.name("valid");for(let v of u)d(v)?m(v):(e.if((0,Ic.propertyInData)(e,n,v,a.opts.ownProperties)),m(v),a.allErrors||e.else().var(l,!0),e.endIf()),r.it.definedProperties.add(v),r.ok(l);function d(v){return a.opts.useDefaults&&!a.compositeRule&&t[v].default!==void 0}function m(v){r.subschema({keyword:"properties",schemaProp:v,dataProp:v},l)}}};Ri.default=uv});var qc=A(Ai=>{"use strict";Object.defineProperty(Ai,"__esModule",{value:!0});var Cc=Ge(),xn=M(),Tc=z(),kc=z(),cv={keyword:"patternProperties",type:"object",schemaType:"object",code(r){let{gen:e,schema:t,data:o,parentSchema:n,it:a}=r,{opts:i}=a,u=(0,Cc.allSchemaProperties)(t),l=u.filter(w=>(0,Tc.alwaysValidSchema)(a,t[w]));if(u.length===0||l.length===u.length&&(!a.opts.unevaluated||a.props===!0))return;let d=i.strictSchema&&!i.allowMatchingProperties&&n.properties,m=e.name("valid");a.props!==!0&&!(a.props instanceof xn.Name)&&(a.props=(0,kc.evaluatedPropsToName)(e,a.props));let{props:v}=a;$();function $(){for(let w of u)d&&g(w),a.allErrors?x(w):(e.var(m,!0),x(w),e.if(m))}function g(w){for(let S in d)new RegExp(w).test(S)&&(0,Tc.checkStrictMode)(a,`property ${S} matches pattern ${w} (use allowMatchingProperties)`)}function x(w){e.forIn("key",o,S=>{e.if((0,xn._)`${(0,Cc.usePattern)(r,w)}.test(${S})`,()=>{let h=l.includes(w);h||r.subschema({keyword:"patternProperties",schemaProp:w,dataProp:S,dataPropType:kc.Type.Str},m),a.opts.unevaluated&&v!==!0?e.assign((0,xn._)`${v}[${S}]`,!0):!h&&!a.allErrors&&e.if((0,xn.not)(m),()=>e.break())})})}}};Ai.default=cv});var jc=A(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});var fv=z(),lv={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(r){let{gen:e,schema:t,it:o}=r;if((0,fv.alwaysValidSchema)(o,t)){r.fail();return}let n=e.name("valid");r.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},n),r.failResult(n,()=>r.reset(),()=>r.error())},error:{message:"must NOT be valid"}};Ii.default=lv});var Dc=A(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});var pv=Ge(),dv={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:pv.validateUnion,error:{message:"must match a schema in anyOf"}};Ni.default=dv});var Uc=A(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});var wn=M(),mv=z(),hv={message:"must match exactly one schema in oneOf",params:({params:r})=>(0,wn._)`{passingSchemas: ${r.passing}}`},yv={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:hv,code(r){let{gen:e,schema:t,parentSchema:o,it:n}=r;if(!Array.isArray(t))throw new Error("ajv implementation error");if(n.opts.discriminator&&o.discriminator)return;let a=t,i=e.let("valid",!1),u=e.let("passing",null),l=e.name("_valid");r.setParams({passing:u}),e.block(d),r.result(i,()=>r.reset(),()=>r.error(!0));function d(){a.forEach((m,v)=>{let $;(0,mv.alwaysValidSchema)(n,m)?e.var(l,!0):$=r.subschema({keyword:"oneOf",schemaProp:v,compositeRule:!0},l),v>0&&e.if((0,wn._)`${l} && ${i}`).assign(i,!1).assign(u,(0,wn._)`[${u}, ${v}]`).else(),e.if(l,()=>{e.assign(i,!0),e.assign(u,v),$&&r.mergeEvaluated($,wn.Name)})})}}};Oi.default=yv});var Mc=A(Ci=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});var vv=z(),_v={keyword:"allOf",schemaType:"array",code(r){let{gen:e,schema:t,it:o}=r;if(!Array.isArray(t))throw new Error("ajv implementation error");let n=e.name("valid");t.forEach((a,i)=>{if((0,vv.alwaysValidSchema)(o,a))return;let u=r.subschema({keyword:"allOf",schemaProp:i},n);r.ok(n),r.mergeEvaluated(u)})}};Ci.default=_v});var Vc=A(Ti=>{"use strict";Object.defineProperty(Ti,"__esModule",{value:!0});var En=M(),Lc=z(),gv={message:({params:r})=>(0,En.str)`must match "${r.ifClause}" schema`,params:({params:r})=>(0,En._)`{failingKeyword: ${r.ifClause}}`},xv={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:gv,code(r){let{gen:e,parentSchema:t,it:o}=r;t.then===void 0&&t.else===void 0&&(0,Lc.checkStrictMode)(o,'"if" without "then" and "else" is ignored');let n=Fc(o,"then"),a=Fc(o,"else");if(!n&&!a)return;let i=e.let("valid",!0),u=e.name("_valid");if(l(),r.reset(),n&&a){let m=e.let("ifClause");r.setParams({ifClause:m}),e.if(u,d("then",m),d("else",m))}else n?e.if(u,d("then")):e.if((0,En.not)(u),d("else"));r.pass(i,()=>r.error(!0));function l(){let m=r.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},u);r.mergeEvaluated(m)}function d(m,v){return()=>{let $=r.subschema({keyword:m},u);e.assign(i,u),r.mergeValidEvaluated($,i),v?e.assign(v,(0,En._)`${m}`):r.setParams({ifClause:m})}}}};function Fc(r,e){let t=r.schema[e];return t!==void 0&&!(0,Lc.alwaysValidSchema)(r,t)}Ti.default=xv});var Bc=A(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});var wv=z(),Ev={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:r,parentSchema:e,it:t}){e.if===void 0&&(0,wv.checkStrictMode)(t,`"${r}" without "if" is ignored`)}};ki.default=Ev});var Wc=A(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});var $v=vi(),Sv=xc(),bv=_i(),Pv=Ec(),Rv=$c(),Av=Pc(),Iv=Ac(),Nv=bi(),Ov=Oc(),Cv=qc(),Tv=jc(),kv=Dc(),qv=Uc(),jv=Mc(),Dv=Vc(),Uv=Bc();function Mv(r=!1){let e=[Tv.default,kv.default,qv.default,jv.default,Dv.default,Uv.default,Iv.default,Nv.default,Av.default,Ov.default,Cv.default];return r?e.push(Sv.default,Pv.default):e.push($v.default,bv.default),e.push(Rv.default),e}qi.default=Mv});var Kc=A(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});var ce=M(),Fv={message:({schemaCode:r})=>(0,ce.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,ce._)`{format: ${r}}`},Lv={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Fv,code(r,e){let{gen:t,data:o,$data:n,schema:a,schemaCode:i,it:u}=r,{opts:l,errSchemaPath:d,schemaEnv:m,self:v}=u;if(!l.validateFormats)return;n?$():g();function $(){let x=t.scopeValue("formats",{ref:v.formats,code:l.code.formats}),w=t.const("fDef",(0,ce._)`${x}[${i}]`),S=t.let("fType"),h=t.let("format");t.if((0,ce._)`typeof ${w} == "object" && !(${w} instanceof RegExp)`,()=>t.assign(S,(0,ce._)`${w}.type || "string"`).assign(h,(0,ce._)`${w}.validate`),()=>t.assign(S,(0,ce._)`"string"`).assign(h,w)),r.fail$data((0,ce.or)(E(),P()));function E(){return l.strictSchema===!1?ce.nil:(0,ce._)`${i} && !${h}`}function P(){let N=m.$async?(0,ce._)`(${w}.async ? await ${h}(${o}) : ${h}(${o}))`:(0,ce._)`${h}(${o})`,I=(0,ce._)`(typeof ${h} == "function" ? ${N} : ${h}.test(${o}))`;return(0,ce._)`${h} && ${h} !== true && ${S} === ${e} && !${I}`}}function g(){let x=v.formats[a];if(!x){E();return}if(x===!0)return;let[w,S,h]=P(x);w===e&&r.pass(N());function E(){if(l.strictSchema===!1){v.logger.warn(I());return}throw new Error(I());function I(){return`unknown format "${a}" ignored in schema at path "${d}"`}}function P(I){let k=I instanceof RegExp?(0,ce.regexpCode)(I):l.code.formats?(0,ce._)`${l.code.formats}${(0,ce.getProperty)(a)}`:void 0,he=t.scopeValue("formats",{key:a,ref:I,code:k});return typeof I=="object"&&!(I instanceof RegExp)?[I.type||"string",I.validate,(0,ce._)`${he}.validate`]:["string",I,he]}function N(){if(typeof x=="object"&&!(x instanceof RegExp)&&x.async){if(!m.$async)throw new Error("async format in sync schema");return(0,ce._)`await ${h}(${o})`}return typeof S=="function"?(0,ce._)`${h}(${o})`:(0,ce._)`${h}.test(${o})`}}}};ji.default=Lv});var zc=A(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});var Vv=Kc(),Bv=[Vv.default];Di.default=Bv});var Hc=A(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.contentVocabulary=wt.metadataVocabulary=void 0;wt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];wt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var Jc=A(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});var Wv=tc(),Kv=yc(),zv=Wc(),Hv=zc(),Gc=Hc(),Gv=[Wv.default,Kv.default,(0,zv.default)(),Hv.default,Gc.metadataVocabulary,Gc.contentVocabulary];Ui.default=Gv});var Xc=A(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});bo.DiscrError=void 0;var Jv;(function(r){r.Tag="tag",r.Mapping="mapping"})(Jv=bo.DiscrError||(bo.DiscrError={}))});var Qc=A(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});var Et=M(),Mi=Xc(),Yc=sn(),Xv=z(),Yv={message:({params:{discrError:r,tagName:e}})=>r===Mi.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:r,tag:e,tagName:t}})=>(0,Et._)`{error: ${r}, tag: ${t}, tagValue: ${e}}`},Qv={keyword:"discriminator",type:"object",schemaType:"object",error:Yv,code(r){let{gen:e,data:t,schema:o,parentSchema:n,it:a}=r,{oneOf:i}=n;if(!a.opts.discriminator)throw new Error("discriminator: requires discriminator option");let u=o.propertyName;if(typeof u!="string")throw new Error("discriminator: requires propertyName");if(o.mapping)throw new Error("discriminator: mapping is not supported");if(!i)throw new Error("discriminator: requires oneOf keyword");let l=e.let("valid",!1),d=e.const("tag",(0,Et._)`${t}${(0,Et.getProperty)(u)}`);e.if((0,Et._)`typeof ${d} == "string"`,()=>m(),()=>r.error(!1,{discrError:Mi.DiscrError.Tag,tag:d,tagName:u})),r.ok(l);function m(){let g=$();e.if(!1);for(let x in g)e.elseIf((0,Et._)`${d} === ${x}`),e.assign(l,v(g[x]));e.else(),r.error(!1,{discrError:Mi.DiscrError.Mapping,tag:d,tagName:u}),e.endIf()}function v(g){let x=e.name("valid"),w=r.subschema({keyword:"oneOf",schemaProp:g},x);return r.mergeEvaluated(w,Et.Name),x}function $(){var g;let x={},w=h(n),S=!0;for(let N=0;N<i.length;N++){let I=i[N];I?.$ref&&!(0,Xv.schemaHasRulesButRef)(I,a.self.RULES)&&(I=Yc.resolveRef.call(a.self,a.schemaEnv.root,a.baseId,I?.$ref),I instanceof Yc.SchemaEnv&&(I=I.schema));let k=(g=I?.properties)===null||g===void 0?void 0:g[u];if(typeof k!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${u}"`);S=S&&(w||h(I)),E(k,N)}if(!S)throw new Error(`discriminator: "${u}" must be required`);return x;function h({required:N}){return Array.isArray(N)&&N.includes(u)}function E(N,I){if(N.const)P(N.const,I);else if(N.enum)for(let k of N.enum)P(k,I);else throw new Error(`discriminator: "properties/${u}" must have "const" or "enum"`)}function P(N,I){if(typeof N!="string"||N in x)throw new Error(`discriminator: "${u}" values must be unique strings`);x[N]=I}}}};Fi.default=Qv});var Zc=A((VW,Zv)=>{Zv.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var tf=A((se,rf)=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.MissingRefError=se.ValidationError=se.CodeGen=se.Name=se.nil=se.stringify=se.str=se._=se.KeywordCxt=void 0;var e_=Xu(),r_=Jc(),t_=Qc(),ef=Zc(),o_=["/properties"],$n="http://json-schema.org/draft-07/schema",Sn=class extends e_.default{_addVocabularies(){super._addVocabularies(),r_.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(t_.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(ef,o_):ef;this.addMetaSchema(e,$n,!1),this.refs["http://json-schema.org/schema"]=$n}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema($n)?$n:void 0)}};rf.exports=se=Sn;Object.defineProperty(se,"__esModule",{value:!0});se.default=Sn;var n_=lo();Object.defineProperty(se,"KeywordCxt",{enumerable:!0,get:function(){return n_.KeywordCxt}});var $t=M();Object.defineProperty(se,"_",{enumerable:!0,get:function(){return $t._}});Object.defineProperty(se,"str",{enumerable:!0,get:function(){return $t.str}});Object.defineProperty(se,"stringify",{enumerable:!0,get:function(){return $t.stringify}});Object.defineProperty(se,"nil",{enumerable:!0,get:function(){return $t.nil}});Object.defineProperty(se,"Name",{enumerable:!0,get:function(){return $t.Name}});Object.defineProperty(se,"CodeGen",{enumerable:!0,get:function(){return $t.CodeGen}});var a_=on();Object.defineProperty(se,"ValidationError",{enumerable:!0,get:function(){return a_.default}});var i_=nn();Object.defineProperty(se,"MissingRefError",{enumerable:!0,get:function(){return i_.default}})});var nf=A((bn,of)=>{(function(r,e){typeof bn=="object"?of.exports=bn=e():typeof define=="function"&&define.amd?define([],e):r.CryptoJS=e()})(bn,function(){var r=r||function(e,t){var o;if(typeof window<"u"&&window.crypto&&(o=window.crypto),typeof self<"u"&&self.crypto&&(o=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(o=globalThis.crypto),!o&&typeof window<"u"&&window.msCrypto&&(o=window.msCrypto),!o&&typeof global<"u"&&global.crypto&&(o=global.crypto),!o&&typeof require=="function")try{o=require("crypto")}catch{}var n=function(){if(o){if(typeof o.getRandomValues=="function")try{return o.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof o.randomBytes=="function")try{return o.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function h(){}return function(E){var P;return h.prototype=E,P=new h,h.prototype=null,P}}(),i={},u=i.lib={},l=u.Base=function(){return{extend:function(h){var E=a(this);return h&&E.mixIn(h),(!E.hasOwnProperty("init")||this.init===E.init)&&(E.init=function(){E.$super.init.apply(this,arguments)}),E.init.prototype=E,E.$super=this,E},create:function(){var h=this.extend();return h.init.apply(h,arguments),h},init:function(){},mixIn:function(h){for(var E in h)h.hasOwnProperty(E)&&(this[E]=h[E]);h.hasOwnProperty("toString")&&(this.toString=h.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=u.WordArray=l.extend({init:function(h,E){h=this.words=h||[],E!=t?this.sigBytes=E:this.sigBytes=h.length*4},toString:function(h){return(h||v).stringify(this)},concat:function(h){var E=this.words,P=h.words,N=this.sigBytes,I=h.sigBytes;if(this.clamp(),N%4)for(var k=0;k<I;k++){var he=P[k>>>2]>>>24-k%4*8&255;E[N+k>>>2]|=he<<24-(N+k)%4*8}else for(var ye=0;ye<I;ye+=4)E[N+ye>>>2]=P[ye>>>2];return this.sigBytes+=I,this},clamp:function(){var h=this.words,E=this.sigBytes;h[E>>>2]&=4294967295<<32-E%4*8,h.length=e.ceil(E/4)},clone:function(){var h=l.clone.call(this);return h.words=this.words.slice(0),h},random:function(h){for(var E=[],P=0;P<h;P+=4)E.push(n());return new d.init(E,h)}}),m=i.enc={},v=m.Hex={stringify:function(h){for(var E=h.words,P=h.sigBytes,N=[],I=0;I<P;I++){var k=E[I>>>2]>>>24-I%4*8&255;N.push((k>>>4).toString(16)),N.push((k&15).toString(16))}return N.join("")},parse:function(h){for(var E=h.length,P=[],N=0;N<E;N+=2)P[N>>>3]|=parseInt(h.substr(N,2),16)<<24-N%8*4;return new d.init(P,E/2)}},$=m.Latin1={stringify:function(h){for(var E=h.words,P=h.sigBytes,N=[],I=0;I<P;I++){var k=E[I>>>2]>>>24-I%4*8&255;N.push(String.fromCharCode(k))}return N.join("")},parse:function(h){for(var E=h.length,P=[],N=0;N<E;N++)P[N>>>2]|=(h.charCodeAt(N)&255)<<24-N%4*8;return new d.init(P,E)}},g=m.Utf8={stringify:function(h){try{return decodeURIComponent(escape($.stringify(h)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(h){return $.parse(unescape(encodeURIComponent(h)))}},x=u.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(h){typeof h=="string"&&(h=g.parse(h)),this._data.concat(h),this._nDataBytes+=h.sigBytes},_process:function(h){var E,P=this._data,N=P.words,I=P.sigBytes,k=this.blockSize,he=k*4,ye=I/he;h?ye=e.ceil(ye):ye=e.max((ye|0)-this._minBufferSize,0);var ve=ye*k,ue=e.min(ve*4,I);if(ve){for(var qe=0;qe<ve;qe+=k)this._doProcessBlock(N,qe);E=N.splice(0,ve),P.sigBytes-=ue}return new d.init(E,ue)},clone:function(){var h=l.clone.call(this);return h._data=this._data.clone(),h},_minBufferSize:0}),w=u.Hasher=x.extend({cfg:l.extend(),init:function(h){this.cfg=this.cfg.extend(h),this.reset()},reset:function(){x.reset.call(this),this._doReset()},update:function(h){return this._append(h),this._process(),this},finalize:function(h){h&&this._append(h);var E=this._doFinalize();return E},blockSize:512/32,_createHelper:function(h){return function(E,P){return new h.init(P).finalize(E)}},_createHmacHelper:function(h){return function(E,P){return new S.HMAC.init(h,P).finalize(E)}}}),S=i.algo={};return i}(Math);return r})});var sf=A((Pn,af)=>{(function(r,e){typeof Pn=="object"?af.exports=Pn=e(nf()):typeof define=="function"&&define.amd?define(["./core"],e):e(r.CryptoJS)})(Pn,function(r){return function(e){var t=r,o=t.lib,n=o.WordArray,a=o.Hasher,i=t.algo,u=[],l=[];(function(){function v(w){for(var S=e.sqrt(w),h=2;h<=S;h++)if(!(w%h))return!1;return!0}function $(w){return(w-(w|0))*4294967296|0}for(var g=2,x=0;x<64;)v(g)&&(x<8&&(u[x]=$(e.pow(g,1/2))),l[x]=$(e.pow(g,1/3)),x++),g++})();var d=[],m=i.SHA256=a.extend({_doReset:function(){this._hash=new n.init(u.slice(0))},_doProcessBlock:function(v,$){for(var g=this._hash.words,x=g[0],w=g[1],S=g[2],h=g[3],E=g[4],P=g[5],N=g[6],I=g[7],k=0;k<64;k++){if(k<16)d[k]=v[$+k]|0;else{var he=d[k-15],ye=(he<<25|he>>>7)^(he<<14|he>>>18)^he>>>3,ve=d[k-2],ue=(ve<<15|ve>>>17)^(ve<<13|ve>>>19)^ve>>>10;d[k]=ye+d[k-7]+ue+d[k-16]}var qe=E&P^~E&N,Ve=x&w^x&S^w&S,Zr=(x<<30|x>>>2)^(x<<19|x>>>13)^(x<<10|x>>>22),et=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),Pt=I+et+qe+l[k]+d[k],Nn=Zr+Ve;I=N,N=P,P=E,E=h+Pt|0,h=S,S=w,w=x,x=Pt+Nn|0}g[0]=g[0]+x|0,g[1]=g[1]+w|0,g[2]=g[2]+S|0,g[3]=g[3]+h|0,g[4]=g[4]+E|0,g[5]=g[5]+P|0,g[6]=g[6]+N|0,g[7]=g[7]+I|0},_doFinalize:function(){var v=this._data,$=v.words,g=this._nDataBytes*8,x=v.sigBytes*8;return $[x>>>5]|=128<<24-x%32,$[(x+64>>>9<<4)+14]=e.floor(g/4294967296),$[(x+64>>>9<<4)+15]=g,v.sigBytes=$.length*4,this._process(),this._hash},clone:function(){var v=a.clone.call(this);return v._hash=this._hash.clone(),v}});t.SHA256=a._createHelper(m),t.HmacSHA256=a._createHmacHelper(m)}(Math),r.SHA256})});var x_={};yl(x_,{handleHttp:()=>kf});module.exports=vl(x_);var _l=function(){return!0},Un=_l;function J(r){return r!=null&&typeof r=="object"&&r["@@functional/placeholder"]===!0}function b(r){return function e(t){return arguments.length===0||J(t)?e:r.apply(this,arguments)}}function p(r){return function e(t,o){switch(arguments.length){case 0:return e;case 1:return J(t)?e:b(function(n){return r(t,n)});default:return J(t)&&J(o)?e:J(t)?b(function(n){return r(n,o)}):J(o)?b(function(n){return r(t,n)}):r(t,o)}}}function Ue(r,e){r=r||[],e=e||[];var t,o=r.length,n=e.length,a=[];for(t=0;t<o;)a[a.length]=r[t],t+=1;for(t=0;t<n;)a[a.length]=e[t],t+=1;return a}function Pe(r,e){switch(r){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,o){return e.apply(this,arguments)};case 3:return function(t,o,n){return e.apply(this,arguments)};case 4:return function(t,o,n,a){return e.apply(this,arguments)};case 5:return function(t,o,n,a,i){return e.apply(this,arguments)};case 6:return function(t,o,n,a,i,u){return e.apply(this,arguments)};case 7:return function(t,o,n,a,i,u,l){return e.apply(this,arguments)};case 8:return function(t,o,n,a,i,u,l,d){return e.apply(this,arguments)};case 9:return function(t,o,n,a,i,u,l,d,m){return e.apply(this,arguments)};case 10:return function(t,o,n,a,i,u,l,d,m,v){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function _r(r,e,t){return function(){for(var o=[],n=0,a=r,i=0;i<e.length||n<arguments.length;){var u;i<e.length&&(!J(e[i])||n>=arguments.length)?u=e[i]:(u=arguments[n],n+=1),o[i]=u,J(u)||(a-=1),i+=1}return a<=0?t.apply(this,o):Pe(a,_r(r,o,t))}}var gl=p(function(e,t){return e===1?b(t):Pe(e,_r(e,[],t))}),pe=gl;function O(r){return function e(t,o,n){switch(arguments.length){case 0:return e;case 1:return J(t)?e:p(function(a,i){return r(t,a,i)});case 2:return J(t)&&J(o)?e:J(t)?p(function(a,i){return r(a,o,i)}):J(o)?p(function(a,i){return r(t,a,i)}):b(function(a){return r(t,o,a)});default:return J(t)&&J(o)&&J(n)?e:J(t)&&J(o)?p(function(a,i){return r(a,i,n)}):J(t)&&J(n)?p(function(a,i){return r(a,o,i)}):J(o)&&J(n)?p(function(a,i){return r(t,a,i)}):J(t)?b(function(a){return r(a,o,n)}):J(o)?b(function(a){return r(t,a,n)}):J(n)?b(function(a){return r(t,o,a)}):r(t,o,n)}}}var xl=O(function(e,t,o){var n=o.length;if(e>=n||e<-n)return o;var a=(n+e)%n,i=Ue(o);return i[a]=t(o[a]),i}),Mn=xl;var de=Array.isArray||function(e){return e!=null&&e.length>=0&&Object.prototype.toString.call(e)==="[object Array]"};function kt(r){return r!=null&&typeof r["@@transducer/step"]=="function"}function Q(r,e,t){return function(){if(arguments.length===0)return t();var o=arguments[arguments.length-1];if(!de(o)){for(var n=0;n<r.length;){if(typeof o[r[n]]=="function")return o[r[n]].apply(o,Array.prototype.slice.call(arguments,0,-1));n+=1}if(kt(o)){var a=e.apply(null,Array.prototype.slice.call(arguments,0,-1));return a(o)}}return t.apply(this,arguments)}}function Ye(r){return r&&r["@@transducer/reduced"]?r:{"@@transducer/value":r,"@@transducer/reduced":!0}}var X={init:function(){return this.xf["@@transducer/init"]()},result:function(r){return this.xf["@@transducer/result"](r)}};function ir(r,e){for(var t=0,o=e.length,n=Array(o);t<o;)n[t]=r(e[t]),t+=1;return n}function sr(r){return Object.prototype.toString.call(r)==="[object String]"}var wl=b(function(e){return de(e)?!0:!e||typeof e!="object"||sr(e)?!1:e.length===0?!0:e.length>0?e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1):!1}),qt=wl;var El=function(){function r(e){this.f=e}return r.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},r.prototype["@@transducer/result"]=function(e){return e},r.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},r}();function Oo(r){return new El(r)}var $l=p(function(e,t){return Pe(e.length,function(){return e.apply(t,arguments)})}),Fn=$l;function Sl(r,e,t){for(var o=0,n=t.length;o<n;){if(e=r["@@transducer/step"](e,t[o]),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}o+=1}return r["@@transducer/result"](e)}function hs(r,e,t){for(var o=t.next();!o.done;){if(e=r["@@transducer/step"](e,o.value),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}o=t.next()}return r["@@transducer/result"](e)}function ys(r,e,t,o){return r["@@transducer/result"](t[o](Fn(r["@@transducer/step"],r),e))}var vs=typeof Symbol<"u"?Symbol.iterator:"@@iterator";function me(r,e,t){if(typeof r=="function"&&(r=Oo(r)),qt(t))return Sl(r,e,t);if(typeof t["fantasy-land/reduce"]=="function")return ys(r,e,t,"fantasy-land/reduce");if(t[vs]!=null)return hs(r,e,t[vs]());if(typeof t.next=="function")return hs(r,e,t);if(typeof t.reduce=="function")return ys(r,e,t,"reduce");throw new TypeError("reduce: list must be array or iterable")}var bl=function(){function r(e,t){this.xf=t,this.f=e}return r.prototype["@@transducer/init"]=X.init,r.prototype["@@transducer/result"]=X.result,r.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},r}(),Pl=p(function(e,t){return new bl(e,t)}),_s=Pl;function ne(r,e){return Object.prototype.hasOwnProperty.call(e,r)}var gs=Object.prototype.toString,Rl=function(){return gs.call(arguments)==="[object Arguments]"?function(e){return gs.call(e)==="[object Arguments]"}:function(e){return ne("callee",e)}}(),Co=Rl;var Al=!{toString:null}.propertyIsEnumerable("toString"),xs=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],ws=function(){"use strict";return arguments.propertyIsEnumerable("length")}(),Il=function(e,t){for(var o=0;o<e.length;){if(e[o]===t)return!0;o+=1}return!1},Nl=typeof Object.keys=="function"&&!ws?b(function(e){return Object(e)!==e?[]:Object.keys(e)}):b(function(e){if(Object(e)!==e)return[];var t,o,n=[],a=ws&&Co(e);for(t in e)ne(t,e)&&(!a||t!=="length")&&(n[n.length]=t);if(Al)for(o=xs.length-1;o>=0;)t=xs[o],ne(t,e)&&!Il(n,t)&&(n[n.length]=t),o-=1;return n}),_e=Nl;var Ol=p(Q(["fantasy-land/map","map"],_s,function(e,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return pe(t.length,function(){return e.call(this,t.apply(this,arguments))});case"[object Object]":return me(function(o,n){return o[n]=e(t[n]),o},{},_e(t));default:return ir(e,t)}})),Me=Ol;var gr=Number.isInteger||function(e){return e<<0===e};var Cl=p(function(e,t){var o=e<0?t.length+e:e;return sr(t)?t.charAt(o):t[o]}),ur=Cl;var Tl=p(function(e,t){if(t!=null)return gr(e)?ur(e,t):t[e]}),xr=Tl;var kl=O(me),ze=kl;var ql=b(function(e){return function(){return e}}),Dt=ql;function Fr(r){var e=Object.prototype.toString.call(r);return e==="[object Function]"||e==="[object AsyncFunction]"||e==="[object GeneratorFunction]"||e==="[object AsyncGeneratorFunction]"}var Ll=b(function(e){return e===null?"Null":e===void 0?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}),Ut=Ll;function Kn(r,e){return function(){return e.call(this,r.apply(this,arguments))}}function Pr(r,e){return function(){var t=arguments.length;if(t===0)return e();var o=arguments[t-1];return de(o)||typeof o[r]!="function"?e.apply(this,arguments):o[r].apply(o,Array.prototype.slice.call(arguments,0,t-1))}}var Wl=O(Pr("slice",function(e,t,o){return Array.prototype.slice.call(o,e,t)})),Fe=Wl;var Kl=b(Pr("tail",Fe(1,1/0))),ko=Kl;function wr(){if(arguments.length===0)throw new Error("pipe requires at least one argument");return Pe(arguments[0].length,ze(Kn,arguments[0],ko(arguments)))}var zl=b(function(e){return sr(e)?e.split("").reverse().join(""):Array.prototype.slice.call(e,0).reverse()}),qo=zl;function Le(){if(arguments.length===0)throw new Error("compose requires at least one argument");return wr.apply(this,qo(arguments))}var Hl=ur(0),jo=Hl;function Uo(r){for(var e=[],t;!(t=r.next()).done;)e.push(t.value);return e}function Rr(r,e,t){for(var o=0,n=t.length;o<n;){if(r(e,t[o]))return!0;o+=1}return!1}function zn(r){var e=String(r).match(/^function (\w*)/);return e==null?"":e[1]}function Jl(r,e){return r===e?r!==0||1/r===1/e:r!==r&&e!==e}var Mt=typeof Object.is=="function"?Object.is:Jl;function Ps(r,e,t,o){var n=Uo(r),a=Uo(e);function i(u,l){return Ft(u,l,t.slice(),o.slice())}return!Rr(function(u,l){return!Rr(i,l,u)},a,n)}function Ft(r,e,t,o){if(Mt(r,e))return!0;var n=Ut(r);if(n!==Ut(e))return!1;if(typeof r["fantasy-land/equals"]=="function"||typeof e["fantasy-land/equals"]=="function")return typeof r["fantasy-land/equals"]=="function"&&r["fantasy-land/equals"](e)&&typeof e["fantasy-land/equals"]=="function"&&e["fantasy-land/equals"](r);if(typeof r.equals=="function"||typeof e.equals=="function")return typeof r.equals=="function"&&r.equals(e)&&typeof e.equals=="function"&&e.equals(r);switch(n){case"Arguments":case"Array":case"Object":if(typeof r.constructor=="function"&&zn(r.constructor)==="Promise")return r===e;break;case"Boolean":case"Number":case"String":if(!(typeof r==typeof e&&Mt(r.valueOf(),e.valueOf())))return!1;break;case"Date":if(!Mt(r.valueOf(),e.valueOf()))return!1;break;case"Error":return r.name===e.name&&r.message===e.message;case"RegExp":if(!(r.source===e.source&&r.global===e.global&&r.ignoreCase===e.ignoreCase&&r.multiline===e.multiline&&r.sticky===e.sticky&&r.unicode===e.unicode))return!1;break}for(var a=t.length-1;a>=0;){if(t[a]===r)return o[a]===e;a-=1}switch(n){case"Map":return r.size!==e.size?!1:Ps(r.entries(),e.entries(),t.concat([r]),o.concat([e]));case"Set":return r.size!==e.size?!1:Ps(r.values(),e.values(),t.concat([r]),o.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var i=_e(r);if(i.length!==_e(e).length)return!1;var u=t.concat([r]),l=o.concat([e]);for(a=i.length-1;a>=0;){var d=i[a];if(!(ne(d,e)&&Ft(e[d],r[d],u,l)))return!1;a-=1}return!0}var Xl=p(function(e,t){return Ft(e,t,[],[])}),Re=Xl;function Mo(r,e,t){var o,n;if(typeof r.indexOf=="function")switch(typeof e){case"number":if(e===0){for(o=1/e;t<r.length;){if(n=r[t],n===0&&1/n===o)return t;t+=1}return-1}else if(e!==e){for(;t<r.length;){if(n=r[t],typeof n=="number"&&n!==n)return t;t+=1}return-1}return r.indexOf(e,t);case"string":case"boolean":case"function":case"undefined":return r.indexOf(e,t);case"object":if(e===null)return r.indexOf(e,t)}for(;t<r.length;){if(Re(r[t],e))return t;t+=1}return-1}function Lr(r,e){return Mo(e,r,0)>=0}function Lt(r){var e=r.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+e.replace(/"/g,'\\"')+'"'}var Vt=function(e){return(e<10?"0":"")+e},Yl=typeof Date.prototype.toISOString=="function"?function(e){return e.toISOString()}:function(e){return e.getUTCFullYear()+"-"+Vt(e.getUTCMonth()+1)+"-"+Vt(e.getUTCDate())+"T"+Vt(e.getUTCHours())+":"+Vt(e.getUTCMinutes())+":"+Vt(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},Rs=Yl;function Fo(r){return function(){return!r.apply(this,arguments)}}function Bt(r,e){for(var t=0,o=e.length,n=[];t<o;)r(e[t])&&(n[n.length]=e[t]),t+=1;return n}function cr(r){return Object.prototype.toString.call(r)==="[object Object]"}var Ql=function(){function r(e,t){this.xf=t,this.f=e}return r.prototype["@@transducer/init"]=X.init,r.prototype["@@transducer/result"]=X.result,r.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):e},r}(),Zl=p(function(e,t){return new Ql(e,t)}),As=Zl;var ep=p(Q(["fantasy-land/filter","filter"],As,function(r,e){return cr(e)?me(function(t,o){return r(e[o])&&(t[o]=e[o]),t},{},_e(e)):Bt(r,e)})),Lo=ep;var rp=p(function(e,t){return Lo(Fo(e),t)}),Wt=rp;function Kt(r,e){var t=function(i){var u=e.concat([r]);return Lr(i,u)?"<Circular>":Kt(i,u)},o=function(a,i){return ir(function(u){return Lt(u)+": "+t(a[u])},i.slice().sort())};switch(Object.prototype.toString.call(r)){case"[object Arguments]":return"(function() { return arguments; }("+ir(t,r).join(", ")+"))";case"[object Array]":return"["+ir(t,r).concat(o(r,Wt(function(a){return/^\d+$/.test(a)},_e(r)))).join(", ")+"]";case"[object Boolean]":return typeof r=="object"?"new Boolean("+t(r.valueOf())+")":r.toString();case"[object Date]":return"new Date("+(isNaN(r.valueOf())?t(NaN):Lt(Rs(r)))+")";case"[object Null]":return"null";case"[object Number]":return typeof r=="object"?"new Number("+t(r.valueOf())+")":1/r===-1/0?"-0":r.toString(10);case"[object String]":return typeof r=="object"?"new String("+t(r.valueOf())+")":Lt(r);case"[object Undefined]":return"undefined";default:if(typeof r.toString=="function"){var n=r.toString();if(n!=="[object Object]")return n}return"{"+o(r,_e(r)).join(", ")+"}"}}var tp=b(function(e){return Kt(e,[])}),zt=tp;var op=b(function(e){return pe(e.length,e)}),Ht=op;var ap=p(function(e,t){return t==null||t!==t?e:t}),Vo=ap;var up=function(){function r(e,t){this.xf=t,this.n=e,this.i=0}return r.prototype["@@transducer/init"]=X.init,r.prototype["@@transducer/result"]=X.result,r.prototype["@@transducer/step"]=function(e,t){this.i+=1;var o=this.n===0?e:this.xf["@@transducer/step"](e,t);return this.n>=0&&this.i>=this.n?Ye(o):o},r}(),cp=p(function(e,t){return new up(e,t)}),Os=cp;var fp=p(Q(["take"],Os,function(e,t){return Fe(0,e<0?1/0:e,t)})),Ar=fp;function Jn(r){var e=Object.prototype.toString.call(r);return e==="[object Uint8ClampedArray]"||e==="[object Int8Array]"||e==="[object Uint8Array]"||e==="[object Int16Array]"||e==="[object Uint16Array]"||e==="[object Int32Array]"||e==="[object Uint32Array]"||e==="[object Float32Array]"||e==="[object Float64Array]"||e==="[object BigInt64Array]"||e==="[object BigUint64Array]"}var mp=b(function(e){return e!=null&&typeof e["fantasy-land/empty"]=="function"?e["fantasy-land/empty"]():e!=null&&e.constructor!=null&&typeof e.constructor["fantasy-land/empty"]=="function"?e.constructor["fantasy-land/empty"]():e!=null&&typeof e.empty=="function"?e.empty():e!=null&&e.constructor!=null&&typeof e.constructor.empty=="function"?e.constructor.empty():de(e)?[]:sr(e)?"":cr(e)?{}:Co(e)?function(){return arguments}():Jn(e)?e.constructor.from(""):void 0}),Xn=mp;var gp=p(function(e,t){return pe(e+1,function(){var o=arguments[e];if(o!=null&&Fr(o[t]))return o[t].apply(o,Array.prototype.slice.call(arguments,0,e));throw new TypeError(zt(o)+' does not have a method named "'+t+'"')})}),lt=gp;var xp=p(function(e,t){return t instanceof e||t!=null&&(t.constructor===e||e.name==="Object"&&typeof t=="object")}),Bo=xp;var wp=b(function(e){return e!=null&&Re(e,Xn(e))}),Zn=wp;var $p=p(function(e,t){return function(o){return function(n){return Me(function(a){return t(a,n)},o(e(n)))}}}),Gt=$p;var Sp=O(function(e,t,o){return Mn(e,Dt(t),o)}),ea=Sp;var bp=b(function(e){return Gt(ur(e),ea(e))}),ra=bp;var Rp=p(function(e,t){return t.match(e)||[]}),ta=Rp;var Np=O(function(e,t,o){var n={},a;for(a in t)ne(a,t)&&(n[a]=ne(a,o)?e(a,t[a],o[a]):t[a]);for(a in o)ne(a,o)&&!ne(a,n)&&(n[a]=o[a]);return n}),Wo=Np;var Op=O(function r(e,t,o){return Wo(function(n,a,i){return cr(a)&&cr(i)?r(e,a,i):e(n,a,i)},t,o)}),Xt=Op;var Cp=p(function(e,t){return Xt(function(o,n,a){return a},e,t)}),Ko=Cp;var Lp=O(function(e,t,o){return Vo(e,xr(t,o))}),oa=Lp;var Bp=O(function(e,t,o){return o.replace(e,t)}),na=Bp;var Hp=lt(1,"split"),Ir=Hp;var Yp=function(){function r(e,t){this.xf=t,this.f=e}return r.prototype["@@transducer/init"]=X.init,r.prototype["@@transducer/result"]=X.result,r.prototype["@@transducer/step"]=function(e,t){return this.f(t),this.xf["@@transducer/step"](e,t)},r}(),Qp=p(function(e,t){return new Yp(e,t)}),Us=Qp;var Zp=p(Q([],Us,function(e,t){return e(t),t})),aa=Zp;var hq=typeof String.prototype.trim=="function";var od=function(r){return{value:r,"fantasy-land/map":function(){return this}}},nd=p(function(e,t){return e(od)(t).value}),ia=nd;var ad=O(function(e,t,o){return e(o)?t(o):o}),sa=ad;var vf=Dn(tf(),1);var uf=Dn(sf(),1),cf=r=>`${(0,uf.default)(r)}`,s_=process.env.STAGE||"",St=process.env.AWS_REGION||"",u_={dev:`https://${process.env.API_DOMAIN}/`,local:"http://localhost:4000/dev/"},BW=u_[s_]||`https://${process.env.API_DOMAIN}/`,WW=process.env.BUCKET_LOGS||"",KW=process.env.BUCKET_EDGES||"",zW=process.env.BUCKET_REVERSE_EDGES||"",HW=process.env.BUCKET_NODES||"",GW=process.env.BUCKET_OWNERS||"",JW=process.env.BUCKET_RIGHTS_ADMIN||"",XW=process.env.BUCKET_RIGHTS_READ||"",YW=process.env.BUCKET_RIGHTS_WRITE||"",QW=process.env.BUCKET_TEST_BEDS||"",ZW=process.env.BUCKET_MEDIA||"",eK=process.env.CLOUDFRONT_ACCESS_KEY_ID||"",rK=process.env.CLOUDFRONT_NEW_ACCESS_KEY_PARAMETER||"",c_=process.env.INVITE_USER_VALIDATION_VIEW||"",f_=process.env.PULL_LAMBDA_NAME||"",tK=process.env.NOTIFICATIONS_EMAIL_ACCOUNT_PARAMETER_NAME||"",ff=process.env.ADMIN_EMAILS||"",oK=process.env.API_DOMAIN||"",nK=process.env.MEDIA_DOMAIN||"",Li=process.env.USER_POOL_ID||"",Rn=process.env.CLIENT_ID||"",aK=process.env.CUSTOM_MAIL_MESSAGE_KEY_ARN||"";var iK=process.env.CACHE_CONTAINERS||0,sK=process.env.ENABLE_TRAFFIC_SPLITTING==="false"?!1:process.env.ENABLE_TRAFFIC_SPLITTING||"";var lf=()=>new Date().toISOString(),fK=Le(Ar(10),lf),lK=Le(Ar(7),lf),bt={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*","Access-Control-Allow-Credentials":!0},pf=/^(([^<>()[\]\\.,;:\s@"A-Z]+(\.[^<>()[\]\\.,;:\s@"A-Z]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-z\-0-9]+\.)+[a-z]{2,}))$/,pK=aa(console.log),l_=r=>Buffer.from(r,"base64").toString("utf-8"),df=wr(Ir("."),ia(ra(1)),l_,JSON.parse),Vi=Ht((r,e)=>{try{return JSON.parse(e)}catch{return r}});var dK=Le(Bo(Function),oa(!1,"then"));var Po=r=>({statusCode:400,headers:bt,body:JSON.stringify(r)}),mf=r=>({statusCode:401,headers:bt,body:r?JSON.stringify(r):"Unauthorized"}),hf=r=>({statusCode:404,headers:bt,body:r?JSON.stringify(r):"Not Found"});var yf=r=>r.statusCode?r:(console.error(r),{statusCode:500,headers:bt,body:r.message}),p_={toEdge:r=>wr(Ir("/"),e=>({fromType:e[0],from:e[1],toType:e[2],to:e[3]}))(r),reverseEdge:r=>({...r,fromType:r.toType,from:r.to,toType:r.fromType,to:r.from}),fromEdge:r=>`${r.from}/${r.fromType}/${r.toType}/${r.to}`,toEdgeTuple:r=>Le(([e,t,o,n])=>[t,e,o,n],Ir("/"))(r),fromEdgeTuple:([r,e,t,o])=>`${e}/${r}/${t}/${o}`,toScope:r=>{let e=r.slice(0,-1).lastIndexOf(".");return e===-1?"":r.substring(0,e+1)},fromNodeIdWildcard:r=>r.slice(-1)!=="*"?"":r.slice(0,-1),toRight:r=>wr(Ir("/"),e=>({nodeId:e[0],principalType:e[1],principal:e[2]}))(r),fromRight:r=>`${r.nodeId}/${r.principalType}/${r.principal}`,toOwnership:r=>wr(Ir("/"),e=>({nodeId:e[0],principal:e[2]}))(r),fromOwnership:r=>`${r.nodeId}/user/${r.principal}`,filePrefix:(r,e)=>cf(`${r}/${e}`),toFileKey:({nodeId:r,prop:e,filename:t})=>`file/${p_.filePrefix(r,e)}/${t}`,toFileRefKey:({nodeId:r,prop:e})=>`ref/${r}/${e}`,toFileMetadataKey:({fileKey:r})=>`metadata/${r}`,toLogKey:({type:r,userEmail:e,timestamp:t,requestId:o})=>`${r}/${e}/${t}/${o}`,fromLogKey:Le(([r,e,t,o])=>({type:r,userEmail:e,timestamp:t,requestId:o}),Ir("/"))},mK=ze(Ko,{});var hK=sa(Zn,Un);var _f=(r,e,{auth:t=!0}={})=>new Promise((o,n)=>{let a;try{t?a=df(e.headers.Authorization||e.headers.authorization||""):a={}}catch{n(mf());return}try{let i=Vi(e.body||{},e.body||""),u=new vf.default;if(u.addKeyword("example"),u.validate(r,i)){let d=a.email,m=e.headers["x-as-role"]||"user",v=!!e.headers["x-as-admin"]&&ff.includes(d);o({userEmail:d,body:i,asAdmin:v,asRole:m})}else n(Po(u.errors))}catch(i){n(Po(i.message))}}),gf=r=>Le(jo,ta(r)),xf=gf(pf),d_=gf(/.*[0-9].*/);var Oe=require("@aws-sdk/client-cognito-identity-provider");var wf=Dn(require("crypto")),In=new Uint8Array(256),An=In.length;function Bi(){return An>In.length-16&&(wf.default.randomFillSync(In),An=0),In.slice(An,An+=16)}var Ef=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function m_(r){return typeof r=="string"&&Ef.test(r)}var $f=m_;var Ee=[];for(let r=0;r<256;++r)Ee.push((r+256).toString(16).substr(1));function h_(r,e=0){let t=(Ee[r[e+0]]+Ee[r[e+1]]+Ee[r[e+2]]+Ee[r[e+3]]+"-"+Ee[r[e+4]]+Ee[r[e+5]]+"-"+Ee[r[e+6]]+Ee[r[e+7]]+"-"+Ee[r[e+8]]+Ee[r[e+9]]+"-"+Ee[r[e+10]]+Ee[r[e+11]]+Ee[r[e+12]]+Ee[r[e+13]]+Ee[r[e+14]]+Ee[r[e+15]]).toLowerCase();if(!$f(t))throw TypeError("Stringified UUID is invalid");return t}var Sf=h_;function y_(r,e,t){r=r||{};let o=r.random||(r.rng||Bi)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,e){t=t||0;for(let n=0;n<16;++n)e[t+n]=o[n];return e}return Sf(o)}var Wi=y_;var Qr=new Oe.CognitoIdentityProviderClient({region:St,apiVersion:"latest"}),__=()=>Le(Ar(16),na(/-/g,""))(Wi()),bf=(r,e)=>({admin:{userExists:async t=>{let o=new Oe.AdminGetUserCommand({UserPoolId:r,Username:t});return Qr.send(o).then(()=>!0).catch(()=>!1)},inviteUser:async(t,o="default",n=void 0)=>{let a=n||__(),i=new Oe.AdminCreateUserCommand({UserPoolId:r,Username:t,TemporaryPassword:a,ClientMetadata:{templateId:o}});return Qr.send(i)},createUser:async(t,o)=>{await Qr.send(new Oe.AdminCreateUserCommand({UserPoolId:r,Username:t,TemporaryPassword:o,MessageAction:"SUPPRESS"}));let n=await Qr.send(new Oe.AdminInitiateAuthCommand({AuthFlow:"ADMIN_NO_SRP_AUTH",ClientId:e,UserPoolId:r,AuthParameters:{PASSWORD:o,NEW_PASSWORD:o,USERNAME:t}})).then(a=>a.Session);await Qr.send(new Oe.AdminRespondToAuthChallengeCommand({ChallengeName:"NEW_PASSWORD_REQUIRED",ClientId:e,UserPoolId:r,ChallengeResponses:{NEW_PASSWORD:o,USERNAME:t},Session:n})),await Qr.send(new Oe.AdminUpdateUserAttributesCommand({Username:t,UserPoolId:r,UserAttributes:[{Name:"email_verified",Value:"true"}]}))},deleteUser:async t=>{let o=new Oe.AdminDeleteUserCommand({UserPoolId:r,Username:t});return new Promise((n,a)=>{Qr.send(o,i=>{i?a(i):n()})})}}});var F={InvalidEmailError:{name:"InvalidEmailError",message:"The email must be valid and must not contain upper case letters or spaces."},InvalidPasswordError:{name:"InvalidPasswordError",message:"The password must contain at least 8 characters and at least 1 number."},InvalidSrpAError:{name:"InvalidSrpAError",message:"The SRP A value must be a correctly calculated random hex hash based on big integers."},InvalidRefreshTokenError:{name:"InvalidRefreshTokenError",message:"Refresh token is invalid."},VerificationCodeMismatchError:{name:"VerificationCodeMismatchError",message:"The verification code does not match."},VerificationCodeExpiredError:{name:"VerificationCodeExpiredError",message:"The verification code has exipired. Please retry via Reset Password Init (in case of pasword reset) or Register Verify Resend (in case of register)."},UserNotFoundError:{name:"UserNotFoundError",message:"No user was found under the given email or user ID."},UserNotVerifiedError:{name:"UserNotVerifiedError",message:"The user must be verified with Register Verify operation."},UserExistsError:{name:"UserExistsError",message:"There is an existing user with the given email address."},UserMissingPasswordChallengeError:{name:"UserMissingPasswordChallengeError",message:"The user must have an active require password change challenge."},PasswordResetRequiredError:{name:"PasswordResetRequiredError",message:"The password must be reset."},PasswordResetMissingParamError:{name:"PasswordResetMissingParamError",message:"Either a verification code or the users old password are required."},LoginVerifyError:{name:"LoginVerifyError",message:"The password could not be verified. Please check password, userId, secretBlock, signature and timestamp."}};var Pf={type:"object",properties:{email:{type:"string",description:"Email of the user to be logged in."},srpA:{type:"string",description:"Client SRP A value that will be used to initiate an SRP auth process."}},required:["email","srpA"]},kK={summary:"Login Init",description:"This operation initiates a user login with a client generated SRP A value and returns challenge parameters needed to calculate the signature. The signature is then sent back to the server using the Login Verify operation.",operationId:"loginInit",tags:["Auth"],responses:{200:{description:"OK",content:{"application/json":{schema:{type:"object",properties:{poolname:{type:"string",description:"Name of server side pool that is used by the hash algorithm on the client side to calculate the signature."},userId:{type:"string",description:"Server side UUID identifying the user during the SRP process."},srpB:{type:"string",description:"Servers SRP B value that is used by the hash algorithm on the client side to calculate the signature."},secretBlock:{type:"string",description:"Secret block of the server. It must be sent along with the signature via the Login Verify operation in order for the server to remember the session. It is also used by the hash algorithm on the client side to calculate the signature."},salt:{type:"string",description:"Random salt that is used by the hash algorithm on the client side to calculate the signature."}}}}}},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[F.InvalidEmailError,F.InvalidSrpAError]}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[F.UserNotVerifiedError,F.PasswordResetRequiredError]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[F.UserNotFoundError]}}}},500:{description:"Internal Server Error"}},requestBody:{content:{"application/json":{schema:Pf}}}},Rf={type:"object",properties:{userId:{type:"string",description:"ID of the user to be logged in. It is returned by the Login Init operation."},secretBlock:{type:"string",description:"Server secret block which was returned by the Login Init operation. It needs to be sent along with the signature in order for the server to remember the session."},signature:{type:"string",description:"Client signature that is used by the server to verify that the client knows the password."},timestamp:{type:"string",description:"Timestamp of the moment when the signature was calculated. It is part of the signature and is also used to verify it."}},required:["userId","secretBlock","signature","timestamp"]},qK={summary:"Login Verify",description:"This operation executes a user login using an SRP signature calculated by the client and returns all auth tokens in case of success.",operationId:"loginVerify",tags:["Auth"],responses:{200:{description:"OK",content:{"application/json":{schema:{type:"object",properties:{accessToken:{type:"string",description:"OAuth access token. It can be used as Authorization header along with all Got API calls."},expiresIn:{type:"number",description:"The expiration period of the authentication result in seconds."},idToken:{type:"string",description:"OAuth ID token. Never send it along with any API calls."},refreshToken:{type:"string",description:"The refresh token which can be stored in the session and be used to restore auth tokens via Login Refresh operation."}}}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[F.LoginVerifyError,F.UserNotVerifiedError,F.PasswordResetRequiredError]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[F.UserNotFoundError]}}}}},requestBody:{content:{"application/json":{schema:Rf}}}},Af={type:"object",properties:{refreshToken:{type:"string",description:"The refresh token can be used instead to retrieve new access tokens."}},required:["refreshToken"]},jK={summary:"Login Refresh",description:"This operation executes a user login using a refresh token and returns all auth tokens in case of success.",operationId:"loginRefresh",tags:["Auth"],responses:{200:{description:"OK",content:{"application/json":{schema:{type:"object",properties:{accessToken:{type:"string",description:"OAuth access token. It can be used as Authorization header along with all Got API calls."},expiresIn:{type:"string",description:"The expiration period of the authentication result in seconds."},idToken:{type:"string",description:"OAuth ID token. Never send it along with any API calls."}}}}}},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[F.InvalidRefreshTokenError]}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[F.UserNotVerifiedError,F.PasswordResetRequiredError]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[F.UserNotFoundError]}}}}},requestBody:{content:{"application/json":{schema:Af}}}},If={type:"object",properties:{email:{type:"string",description:"Email of the user to be registered."},password:{type:"string",description:"Password of the user to be registered."}},required:["email","password"]},DK={summary:"Register Init",description:"This operation registers a new user with the API in order for him to authenticate for all API operations.",operationId:"registerInit",tags:["Auth"],responses:{200:{description:"OK"},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[F.InvalidEmailError,F.InvalidPasswordError]}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[F.UserExistsError]}}}},500:{description:"Internal Server Error"}},requestBody:{content:{"application/json":{schema:If}}}},Nf={type:"object",properties:{email:{type:"string",description:"Email of the user to be registerVerifyd."},verificationCode:{type:"string",description:"Verification code that was sent to the given email."}},required:["email","verificationCode"]},UK={summary:"Register Verify",description:"This operation verifies a previously registered user with an verification code that was sent to his email after the register operation.",operationId:"registerVerify",tags:["Auth"],responses:{200:{description:"OK"},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[F.InvalidEmailError,F.VerificationCodeMismatchError]}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[F.VerificationCodeExpiredError]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[F.UserNotFoundError]}}}},500:{description:"Internal Server Error"}},requestBody:{content:{"application/json":{schema:Nf}}}},Ki={type:"object",properties:{email:{type:"string",description:"Email of the user which the verification code should be resent for."}},required:["email"]},MK={summary:"Register Verify Resend",description:"This operation resends the verification code for a previously registered but not yet verified user.",operationId:"registerVerifyResend",tags:["Auth"],responses:{200:{description:"OK"},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[F.InvalidEmailError]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[F.UserNotFoundError]}}}},500:{description:"Internal Server Error"}},requestBody:{content:{"application/json":{schema:Ki}}}},Of={type:"object",properties:{email:{type:"string",description:"Email of the user which wants to reset the password."}},required:["email"]},FK={summary:"Reset Password Init",description:"This operation initiates the forgot password procedure. An email with verification code is sent automatically to the users email.",operationId:"resetPasswordInit",tags:["Auth"],responses:{200:{description:"OK"},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[F.InvalidEmailError]}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[F.UserNotVerifiedError]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[F.UserNotFoundError]}}}},500:{description:"Internal Server Error"}},requestBody:{content:{"application/json":{schema:Of}}}},Cf={type:"object",properties:{email:{type:"string",description:"E-mail of the user for whom the password is to be reset."},password:{type:"string",description:"New password to be set."},oldPassword:{type:"string",description:"Current password of the user."},verificationCode:{type:"string",description:"Verification code that was sent to the email after Reset Password Init operation."}},required:["email","password"]},LK={summary:"Reset Password Verify",description:"This operation resets the password of the given user using the email address and verification code sent to this email address after calling the Reset Password Init operation.",operationId:"resetPasswordVerify",tags:["Auth"],responses:{200:{description:"OK"},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[F.InvalidEmailError,F.InvalidPasswordError,F.VerificationCodeMismatchError]}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[F.VerificationCodeExpiredError,F.UserNotVerifiedError]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[F.UserNotFoundError]}}}},500:{description:"Internal Server Error"}},requestBody:{content:{"application/json":{schema:Cf}}}};var $e=require("@aws-sdk/client-cognito-identity-provider");var g_=new $e.CognitoIdentityProviderClient({region:St,apiVersion:"latest"});var Tf=async r=>{let e=new $e.ResendConfirmationCodeCommand({ClientId:Rn,Username:r});await g_.send(e)};var zi=require("@aws-sdk/client-lambda");var HK=new zi.LambdaClient({region:St,apiVersion:"latest"}),GK=new TextDecoder;var xz=bf(Li,Rn);var kf=async r=>_f(Ki,r,{auth:!1}).then(async({body:{email:e}})=>xf(e)!==e?Po(F.InvalidEmailError):(await Tf(e),{statusCode:200,headers:bt,body:JSON.stringify({message:"Success."})})).catch(e=>{switch(e.name){case"UserNotFoundException":return hf(F.UserNotFoundError);default:return yf(e)}});0&&(module.exports={handleHttp});
/*! Bundled license information:

uri-js/dist/es5/uri.all.js:
  (** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js *)
*/

var Ad=Object.create;var zr=Object.defineProperty;var xd=Object.getOwnPropertyDescriptor;var Rd=Object.getOwnPropertyNames;var Td=Object.getPrototypeOf,Pd=Object.prototype.hasOwnProperty;var v=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Od=(e,t)=>{for(var r in t)zr(e,r,{get:t[r],enumerable:!0})},Wo=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Rd(t))!Pd.call(e,i)&&i!==r&&zr(e,i,{get:()=>t[i],enumerable:!(n=xd(t,i))||n.enumerable});return e};var Uo=(e,t,r)=>(r=e!=null?Ad(Td(e)):{},Wo(t||!e||!e.__esModule?zr(r,"default",{value:e,enumerable:!0}):r,e)),Cd=e=>Wo(zr({},"__esModule",{value:!0}),e);var cr=v(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.regexpCode=K.getEsmExportName=K.getProperty=K.safeStringify=K.stringify=K.strConcat=K.addCodeArg=K.str=K._=K.nil=K._Code=K.Name=K.IDENTIFIER=K._CodeOrName=void 0;var or=class{};K._CodeOrName=or;K.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var ht=class extends or{constructor(t){if(super(),!K.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};K.Name=ht;var Pe=class extends or{constructor(t){super(),this._items=typeof t=="string"?[t]:t}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let t=this._items[0];return t===""||t==='""'}get str(){var t;return(t=this._str)!==null&&t!==void 0?t:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var t;return(t=this._names)!==null&&t!==void 0?t:this._names=this._items.reduce((r,n)=>(n instanceof ht&&(r[n.str]=(r[n.str]||0)+1),r),{})}};K._Code=Pe;K.nil=new Pe("");function Qo(e,...t){let r=[e[0]],n=0;for(;n<t.length;)mi(r,t[n]),r.push(e[++n]);return new Pe(r)}K._=Qo;var pi=new Pe("+");function Xo(e,...t){let r=[ar(e[0])],n=0;for(;n<t.length;)r.push(pi),mi(r,t[n]),r.push(pi,ar(e[++n]));return Md(r),new Pe(r)}K.str=Xo;function mi(e,t){t instanceof Pe?e.push(...t._items):t instanceof ht?e.push(t):e.push(jd(t))}K.addCodeArg=mi;function Md(e){let t=1;for(;t<e.length-1;){if(e[t]===pi){let r=Fd(e[t-1],e[t+1]);if(r!==void 0){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}function Fd(e,t){if(t==='""')return e;if(e==='""')return t;if(typeof e=="string")return t instanceof ht||e[e.length-1]!=='"'?void 0:typeof t!="string"?`${e.slice(0,-1)}${t}"`:t[0]==='"'?e.slice(0,-1)+t.slice(1):void 0;if(typeof t=="string"&&t[0]==='"'&&!(e instanceof ht))return`"${e}${t.slice(1)}`}function qd(e,t){return t.emptyStr()?e:e.emptyStr()?t:Xo`${e}${t}`}K.strConcat=qd;function jd(e){return typeof e=="number"||typeof e=="boolean"||e===null?e:ar(Array.isArray(e)?e.join(","):e)}function Dd(e){return new Pe(ar(e))}K.stringify=Dd;function ar(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}K.safeStringify=ar;function Ld(e){return typeof e=="string"&&K.IDENTIFIER.test(e)?new Pe(`.${e}`):Qo`[${e}]`}K.getProperty=Ld;function Wd(e){if(typeof e=="string"&&K.IDENTIFIER.test(e))return new Pe(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)}K.getEsmExportName=Wd;function Ud(e){return new Pe(e.toString())}K.regexpCode=Ud});var vi=v(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.ValueScope=be.ValueScopeName=be.Scope=be.varKinds=be.UsedValueState=void 0;var Se=cr(),gi=class extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}},Yr;(function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"})(Yr||(be.UsedValueState=Yr={}));be.varKinds={const:new Se.Name("const"),let:new Se.Name("let"),var:new Se.Name("var")};var Jr=class{constructor({prefixes:t,parent:r}={}){this._names={},this._prefixes=t,this._parent=r}toName(t){return t instanceof Se.Name?t:this.name(t)}name(t){return new Se.Name(this._newName(t))}_newName(t){let r=this._names[t]||this._nameGroup(t);return`${t}${r.index++}`}_nameGroup(t){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(t)||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}};be.Scope=Jr;var Qr=class extends Se.Name{constructor(t,r){super(r),this.prefix=t}setValue(t,{property:r,itemIndex:n}){this.value=t,this.scopePath=(0,Se._)`.${new Se.Name(r)}[${n}]`}};be.ValueScopeName=Qr;var Kd=(0,Se._)`\n`,yi=class extends Jr{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts={...t,_n:t.lines?Kd:Se.nil}}get(){return this._scope}name(t){return new Qr(t,this._newName(t))}value(t,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let i=this.toName(t),{prefix:s}=i,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[s];if(a){let u=a.get(o);if(u)return u}else a=this._values[s]=new Map;a.set(o,i);let c=this._scope[s]||(this._scope[s]=[]),l=c.length;return c[l]=r.ref,i.setValue(r,{property:s,itemIndex:l}),i}getValue(t,r){let n=this._values[t];if(n)return n.get(r)}scopeRefs(t,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,Se._)`${t}${n.scopePath}`})}scopeCode(t=this._values,r,n){return this._reduceValues(t,i=>{if(i.value===void 0)throw new Error(`CodeGen: name "${i}" has no value`);return i.value.code},r,n)}_reduceValues(t,r,n={},i){let s=Se.nil;for(let o in t){let a=t[o];if(!a)continue;let c=n[o]=n[o]||new Map;a.forEach(l=>{if(c.has(l))return;c.set(l,Yr.Started);let u=r(l);if(u){let f=this.opts.es5?be.varKinds.var:be.varKinds.const;s=(0,Se._)`${s}${f} ${l} = ${u};${this.opts._n}`}else if(u=i?.(l))s=(0,Se._)`${s}${u}${this.opts._n}`;else throw new gi(l);c.set(l,Yr.Completed)})}return s}};be.ValueScope=yi});var M=v(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.or=I.and=I.not=I.CodeGen=I.operators=I.varKinds=I.ValueScopeName=I.ValueScope=I.Scope=I.Name=I.regexpCode=I.stringify=I.getProperty=I.nil=I.strConcat=I.str=I._=void 0;var L=cr(),Me=vi(),rt=cr();Object.defineProperty(I,"_",{enumerable:!0,get:function(){return rt._}});Object.defineProperty(I,"str",{enumerable:!0,get:function(){return rt.str}});Object.defineProperty(I,"strConcat",{enumerable:!0,get:function(){return rt.strConcat}});Object.defineProperty(I,"nil",{enumerable:!0,get:function(){return rt.nil}});Object.defineProperty(I,"getProperty",{enumerable:!0,get:function(){return rt.getProperty}});Object.defineProperty(I,"stringify",{enumerable:!0,get:function(){return rt.stringify}});Object.defineProperty(I,"regexpCode",{enumerable:!0,get:function(){return rt.regexpCode}});Object.defineProperty(I,"Name",{enumerable:!0,get:function(){return rt.Name}});var tn=vi();Object.defineProperty(I,"Scope",{enumerable:!0,get:function(){return tn.Scope}});Object.defineProperty(I,"ValueScope",{enumerable:!0,get:function(){return tn.ValueScope}});Object.defineProperty(I,"ValueScopeName",{enumerable:!0,get:function(){return tn.ValueScopeName}});Object.defineProperty(I,"varKinds",{enumerable:!0,get:function(){return tn.varKinds}});I.operators={GT:new L._Code(">"),GTE:new L._Code(">="),LT:new L._Code("<"),LTE:new L._Code("<="),EQ:new L._Code("==="),NEQ:new L._Code("!=="),NOT:new L._Code("!"),OR:new L._Code("||"),AND:new L._Code("&&"),ADD:new L._Code("+")};var Ge=class{optimizeNodes(){return this}optimizeNames(t,r){return this}},_i=class extends Ge{constructor(t,r,n){super(),this.varKind=t,this.name=r,this.rhs=n}render({es5:t,_n:r}){let n=t?Me.varKinds.var:this.varKind,i=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${i};`+r}optimizeNames(t,r){if(t[this.name.str])return this.rhs&&(this.rhs=It(this.rhs,t,r)),this}get names(){return this.rhs instanceof L._CodeOrName?this.rhs.names:{}}},Xr=class extends Ge{constructor(t,r,n){super(),this.lhs=t,this.rhs=r,this.sideEffects=n}render({_n:t}){return`${this.lhs} = ${this.rhs};`+t}optimizeNames(t,r){if(!(this.lhs instanceof L.Name&&!t[this.lhs.str]&&!this.sideEffects))return this.rhs=It(this.rhs,t,r),this}get names(){let t=this.lhs instanceof L.Name?{}:{...this.lhs.names};return en(t,this.rhs)}},wi=class extends Xr{constructor(t,r,n,i){super(t,n,i),this.op=r}render({_n:t}){return`${this.lhs} ${this.op}= ${this.rhs};`+t}},Ei=class extends Ge{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`${this.label}:`+t}},Si=class extends Ge{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`break${this.label?` ${this.label}`:""};`+t}},bi=class extends Ge{constructor(t){super(),this.error=t}render({_n:t}){return`throw ${this.error};`+t}get names(){return this.error.names}},$i=class extends Ge{constructor(t){super(),this.code=t}render({_n:t}){return`${this.code};`+t}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(t,r){return this.code=It(this.code,t,r),this}get names(){return this.code instanceof L._CodeOrName?this.code.names:{}}},ur=class extends Ge{constructor(t=[]){super(),this.nodes=t}render(t){return this.nodes.reduce((r,n)=>r+n.render(t),"")}optimizeNodes(){let{nodes:t}=this,r=t.length;for(;r--;){let n=t[r].optimizeNodes();Array.isArray(n)?t.splice(r,1,...n):n?t[r]=n:t.splice(r,1)}return t.length>0?this:void 0}optimizeNames(t,r){let{nodes:n}=this,i=n.length;for(;i--;){let s=n[i];s.optimizeNames(t,r)||(Vd(t,s.names),n.splice(i,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((t,r)=>gt(t,r.names),{})}},Be=class extends ur{render(t){return"{"+t._n+super.render(t)+"}"+t._n}},Ai=class extends ur{},kt=class extends Be{};kt.kind="else";var pt=class e extends Be{constructor(t,r){super(r),this.condition=t}render(t){let r=`if(${this.condition})`+super.render(t);return this.else&&(r+="else "+this.else.render(t)),r}optimizeNodes(){super.optimizeNodes();let t=this.condition;if(t===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new kt(n):n}if(r)return t===!1?r instanceof e?r:r.nodes:this.nodes.length?this:new e(Zo(t),r instanceof e?[r]:r.nodes);if(!(t===!1||!this.nodes.length))return this}optimizeNames(t,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(t,r),!!(super.optimizeNames(t,r)||this.else))return this.condition=It(this.condition,t,r),this}get names(){let t=super.names;return en(t,this.condition),this.else&&gt(t,this.else.names),t}};pt.kind="if";var mt=class extends Be{};mt.kind="for";var xi=class extends mt{constructor(t){super(),this.iteration=t}render(t){return`for(${this.iteration})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iteration=It(this.iteration,t,r),this}get names(){return gt(super.names,this.iteration.names)}},Ri=class extends mt{constructor(t,r,n,i){super(),this.varKind=t,this.name=r,this.from=n,this.to=i}render(t){let r=t.es5?Me.varKinds.var:this.varKind,{name:n,from:i,to:s}=this;return`for(${r} ${n}=${i}; ${n}<${s}; ${n}++)`+super.render(t)}get names(){let t=en(super.names,this.from);return en(t,this.to)}},Zr=class extends mt{constructor(t,r,n,i){super(),this.loop=t,this.varKind=r,this.name=n,this.iterable=i}render(t){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iterable=It(this.iterable,t,r),this}get names(){return gt(super.names,this.iterable.names)}},lr=class extends Be{constructor(t,r,n){super(),this.name=t,this.args=r,this.async=n}render(t){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(t)}};lr.kind="func";var fr=class extends ur{render(t){return"return "+super.render(t)}};fr.kind="return";var Ti=class extends Be{render(t){let r="try"+super.render(t);return this.catch&&(r+=this.catch.render(t)),this.finally&&(r+=this.finally.render(t)),r}optimizeNodes(){var t,r;return super.optimizeNodes(),(t=this.catch)===null||t===void 0||t.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(t,r){var n,i;return super.optimizeNames(t,r),(n=this.catch)===null||n===void 0||n.optimizeNames(t,r),(i=this.finally)===null||i===void 0||i.optimizeNames(t,r),this}get names(){let t=super.names;return this.catch&&gt(t,this.catch.names),this.finally&&gt(t,this.finally.names),t}},dr=class extends Be{constructor(t){super(),this.error=t}render(t){return`catch(${this.error})`+super.render(t)}};dr.kind="catch";var hr=class extends Be{render(t){return"finally"+super.render(t)}};hr.kind="finally";var Pi=class{constructor(t,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=t,this._scope=new Me.Scope({parent:t}),this._nodes=[new Ai]}toString(){return this._root.render(this.opts)}name(t){return this._scope.name(t)}scopeName(t){return this._extScope.name(t)}scopeValue(t,r){let n=this._extScope.value(t,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(t,r){return this._extScope.getValue(t,r)}scopeRefs(t){return this._extScope.scopeRefs(t,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(t,r,n,i){let s=this._scope.toName(r);return n!==void 0&&i&&(this._constants[s.str]=n),this._leafNode(new _i(t,s,n)),s}const(t,r,n){return this._def(Me.varKinds.const,t,r,n)}let(t,r,n){return this._def(Me.varKinds.let,t,r,n)}var(t,r,n){return this._def(Me.varKinds.var,t,r,n)}assign(t,r,n){return this._leafNode(new Xr(t,r,n))}add(t,r){return this._leafNode(new wi(t,I.operators.ADD,r))}code(t){return typeof t=="function"?t():t!==L.nil&&this._leafNode(new $i(t)),this}object(...t){let r=["{"];for(let[n,i]of t)r.length>1&&r.push(","),r.push(n),(n!==i||this.opts.es5)&&(r.push(":"),(0,L.addCodeArg)(r,i));return r.push("}"),new L._Code(r)}if(t,r,n){if(this._blockNode(new pt(t)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(t){return this._elseNode(new pt(t))}else(){return this._elseNode(new kt)}endIf(){return this._endBlockNode(pt,kt)}_for(t,r){return this._blockNode(t),r&&this.code(r).endFor(),this}for(t,r){return this._for(new xi(t),r)}forRange(t,r,n,i,s=this.opts.es5?Me.varKinds.var:Me.varKinds.let){let o=this._scope.toName(t);return this._for(new Ri(s,o,r,n),()=>i(o))}forOf(t,r,n,i=Me.varKinds.const){let s=this._scope.toName(t);if(this.opts.es5){let o=r instanceof L.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,L._)`${o}.length`,a=>{this.var(s,(0,L._)`${o}[${a}]`),n(s)})}return this._for(new Zr("of",i,s,r),()=>n(s))}forIn(t,r,n,i=this.opts.es5?Me.varKinds.var:Me.varKinds.const){if(this.opts.ownProperties)return this.forOf(t,(0,L._)`Object.keys(${r})`,n);let s=this._scope.toName(t);return this._for(new Zr("in",i,s,r),()=>n(s))}endFor(){return this._endBlockNode(mt)}label(t){return this._leafNode(new Ei(t))}break(t){return this._leafNode(new Si(t))}return(t){let r=new fr;if(this._blockNode(r),this.code(t),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(fr)}try(t,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let i=new Ti;if(this._blockNode(i),this.code(t),r){let s=this.name("e");this._currNode=i.catch=new dr(s),r(s)}return n&&(this._currNode=i.finally=new hr,this.code(n)),this._endBlockNode(dr,hr)}throw(t){return this._leafNode(new bi(t))}block(t,r){return this._blockStarts.push(this._nodes.length),t&&this.code(t).endBlock(r),this}endBlock(t){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||t!==void 0&&n!==t)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${t} expected`);return this._nodes.length=r,this}func(t,r=L.nil,n,i){return this._blockNode(new lr(t,r,n)),i&&this.code(i).endFunc(),this}endFunc(){return this._endBlockNode(lr)}optimize(t=1){for(;t-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(t){return this._currNode.nodes.push(t),this}_blockNode(t){this._currNode.nodes.push(t),this._nodes.push(t)}_endBlockNode(t,r){let n=this._currNode;if(n instanceof t||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${t.kind}/${r.kind}`:t.kind}"`)}_elseNode(t){let r=this._currNode;if(!(r instanceof pt))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=t,this}get _root(){return this._nodes[0]}get _currNode(){let t=this._nodes;return t[t.length-1]}set _currNode(t){let r=this._nodes;r[r.length-1]=t}};I.CodeGen=Pi;function gt(e,t){for(let r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function en(e,t){return t instanceof L._CodeOrName?gt(e,t.names):e}function It(e,t,r){if(e instanceof L.Name)return n(e);if(!i(e))return e;return new L._Code(e._items.reduce((s,o)=>(o instanceof L.Name&&(o=n(o)),o instanceof L._Code?s.push(...o._items):s.push(o),s),[]));function n(s){let o=r[s.str];return o===void 0||t[s.str]!==1?s:(delete t[s.str],o)}function i(s){return s instanceof L._Code&&s._items.some(o=>o instanceof L.Name&&t[o.str]===1&&r[o.str]!==void 0)}}function Vd(e,t){for(let r in t)e[r]=(e[r]||0)-(t[r]||0)}function Zo(e){return typeof e=="boolean"||typeof e=="number"||e===null?!e:(0,L._)`!${Oi(e)}`}I.not=Zo;var Hd=ea(I.operators.AND);function zd(...e){return e.reduce(Hd)}I.and=zd;var Gd=ea(I.operators.OR);function Bd(...e){return e.reduce(Gd)}I.or=Bd;function ea(e){return(t,r)=>t===L.nil?r:r===L.nil?t:(0,L._)`${Oi(t)} ${e} ${Oi(r)}`}function Oi(e){return e instanceof L.Name?e:(0,L._)`(${e})`}});var V=v(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.checkStrictMode=F.getErrorPath=F.Type=F.useFunc=F.setEvaluated=F.evaluatedPropsToName=F.mergeEvaluated=F.eachItem=F.unescapeJsonPointer=F.escapeJsonPointer=F.escapeFragment=F.unescapeFragment=F.schemaRefOrVal=F.schemaHasRulesButRef=F.schemaHasRules=F.checkUnknownRules=F.alwaysValidSchema=F.toHash=void 0;var B=M(),Yd=cr();function Jd(e){let t={};for(let r of e)t[r]=!0;return t}F.toHash=Jd;function Qd(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(na(e,t),!ia(t,e.self.RULES.all))}F.alwaysValidSchema=Qd;function na(e,t=e.schema){let{opts:r,self:n}=e;if(!r.strictSchema||typeof t=="boolean")return;let i=n.RULES.keywords;for(let s in t)i[s]||aa(e,`unknown keyword: "${s}"`)}F.checkUnknownRules=na;function ia(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(t[r])return!0;return!1}F.schemaHasRules=ia;function Xd(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}F.schemaHasRulesButRef=Xd;function Zd({topSchemaRef:e,schemaPath:t},r,n,i){if(!i){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,B._)`${r}`}return(0,B._)`${e}${t}${(0,B.getProperty)(n)}`}F.schemaRefOrVal=Zd;function eh(e){return sa(decodeURIComponent(e))}F.unescapeFragment=eh;function th(e){return encodeURIComponent(Ni(e))}F.escapeFragment=th;function Ni(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}F.escapeJsonPointer=Ni;function sa(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}F.unescapeJsonPointer=sa;function rh(e,t){if(Array.isArray(e))for(let r of e)t(r);else t(e)}F.eachItem=rh;function ta({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:n}){return(i,s,o,a)=>{let c=o===void 0?s:o instanceof B.Name?(s instanceof B.Name?e(i,s,o):t(i,s,o),o):s instanceof B.Name?(t(i,o,s),s):r(s,o);return a===B.Name&&!(c instanceof B.Name)?n(i,c):c}}F.mergeEvaluated={props:ta({mergeNames:(e,t,r)=>e.if((0,B._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,B._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,B._)`${r} || {}`).code((0,B._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,B._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,B._)`${r} || {}`),ki(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:oa}),items:ta({mergeNames:(e,t,r)=>e.if((0,B._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,B._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,B._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,B._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function oa(e,t){if(t===!0)return e.var("props",!0);let r=e.var("props",(0,B._)`{}`);return t!==void 0&&ki(e,r,t),r}F.evaluatedPropsToName=oa;function ki(e,t,r){Object.keys(r).forEach(n=>e.assign((0,B._)`${t}${(0,B.getProperty)(n)}`,!0))}F.setEvaluated=ki;var ra={};function nh(e,t){return e.scopeValue("func",{ref:t,code:ra[t.code]||(ra[t.code]=new Yd._Code(t.code))})}F.useFunc=nh;var Ci;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(Ci||(F.Type=Ci={}));function ih(e,t,r){if(e instanceof B.Name){let n=t===Ci.Num;return r?n?(0,B._)`"[" + ${e} + "]"`:(0,B._)`"['" + ${e} + "']"`:n?(0,B._)`"/" + ${e}`:(0,B._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,B.getProperty)(e).toString():"/"+Ni(e)}F.getErrorPath=ih;function aa(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}F.checkStrictMode=aa});var Ye=v(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});var he=M(),sh={data:new he.Name("data"),valCxt:new he.Name("valCxt"),instancePath:new he.Name("instancePath"),parentData:new he.Name("parentData"),parentDataProperty:new he.Name("parentDataProperty"),rootData:new he.Name("rootData"),dynamicAnchors:new he.Name("dynamicAnchors"),vErrors:new he.Name("vErrors"),errors:new he.Name("errors"),this:new he.Name("this"),self:new he.Name("self"),scope:new he.Name("scope"),json:new he.Name("json"),jsonPos:new he.Name("jsonPos"),jsonLen:new he.Name("jsonLen"),jsonPart:new he.Name("jsonPart")};Ii.default=sh});var pr=v(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.extendErrors=pe.resetErrorsCount=pe.reportExtraError=pe.reportError=pe.keyword$DataError=pe.keywordError=void 0;var W=M(),rn=V(),ve=Ye();pe.keywordError={message:({keyword:e})=>(0,W.str)`must pass "${e}" keyword validation`};pe.keyword$DataError={message:({keyword:e,schemaType:t})=>t?(0,W.str)`"${e}" keyword must be ${t} ($data)`:(0,W.str)`"${e}" keyword is invalid ($data)`};function oh(e,t=pe.keywordError,r,n){let{it:i}=e,{gen:s,compositeRule:o,allErrors:a}=i,c=la(e,t,r);n??(o||a)?ca(s,c):ua(i,(0,W._)`[${c}]`)}pe.reportError=oh;function ah(e,t=pe.keywordError,r){let{it:n}=e,{gen:i,compositeRule:s,allErrors:o}=n,a=la(e,t,r);ca(i,a),s||o||ua(n,ve.default.vErrors)}pe.reportExtraError=ah;function ch(e,t){e.assign(ve.default.errors,t),e.if((0,W._)`${ve.default.vErrors} !== null`,()=>e.if(t,()=>e.assign((0,W._)`${ve.default.vErrors}.length`,t),()=>e.assign(ve.default.vErrors,null)))}pe.resetErrorsCount=ch;function uh({gen:e,keyword:t,schemaValue:r,data:n,errsCount:i,it:s}){if(i===void 0)throw new Error("ajv implementation error");let o=e.name("err");e.forRange("i",i,ve.default.errors,a=>{e.const(o,(0,W._)`${ve.default.vErrors}[${a}]`),e.if((0,W._)`${o}.instancePath === undefined`,()=>e.assign((0,W._)`${o}.instancePath`,(0,W.strConcat)(ve.default.instancePath,s.errorPath))),e.assign((0,W._)`${o}.schemaPath`,(0,W.str)`${s.errSchemaPath}/${t}`),s.opts.verbose&&(e.assign((0,W._)`${o}.schema`,r),e.assign((0,W._)`${o}.data`,n))})}pe.extendErrors=uh;function ca(e,t){let r=e.const("err",t);e.if((0,W._)`${ve.default.vErrors} === null`,()=>e.assign(ve.default.vErrors,(0,W._)`[${r}]`),(0,W._)`${ve.default.vErrors}.push(${r})`),e.code((0,W._)`${ve.default.errors}++`)}function ua(e,t){let{gen:r,validateName:n,schemaEnv:i}=e;i.$async?r.throw((0,W._)`new ${e.ValidationError}(${t})`):(r.assign((0,W._)`${n}.errors`,t),r.return(!1))}var yt={keyword:new W.Name("keyword"),schemaPath:new W.Name("schemaPath"),params:new W.Name("params"),propertyName:new W.Name("propertyName"),message:new W.Name("message"),schema:new W.Name("schema"),parentSchema:new W.Name("parentSchema")};function la(e,t,r){let{createErrors:n}=e.it;return n===!1?(0,W._)`{}`:lh(e,t,r)}function lh(e,t,r={}){let{gen:n,it:i}=e,s=[fh(i,r),dh(e,r)];return hh(e,t,s),n.object(...s)}function fh({errorPath:e},{instancePath:t}){let r=t?(0,W.str)`${e}${(0,rn.getErrorPath)(t,rn.Type.Str)}`:e;return[ve.default.instancePath,(0,W.strConcat)(ve.default.instancePath,r)]}function dh({keyword:e,it:{errSchemaPath:t}},{schemaPath:r,parentSchema:n}){let i=n?t:(0,W.str)`${t}/${e}`;return r&&(i=(0,W.str)`${i}${(0,rn.getErrorPath)(r,rn.Type.Str)}`),[yt.schemaPath,i]}function hh(e,{params:t,message:r},n){let{keyword:i,data:s,schemaValue:o,it:a}=e,{opts:c,propertyName:l,topSchemaRef:u,schemaPath:f}=a;n.push([yt.keyword,i],[yt.params,typeof t=="function"?t(e):t||(0,W._)`{}`]),c.messages&&n.push([yt.message,typeof r=="function"?r(e):r]),c.verbose&&n.push([yt.schema,o],[yt.parentSchema,(0,W._)`${u}${f}`],[ve.default.data,s]),l&&n.push([yt.propertyName,l])}});var da=v(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.boolOrEmptySchema=Mt.topBoolOrEmptySchema=void 0;var ph=pr(),mh=M(),gh=Ye(),yh={message:"boolean schema is false"};function vh(e){let{gen:t,schema:r,validateName:n}=e;r===!1?fa(e,!1):typeof r=="object"&&r.$async===!0?t.return(gh.default.data):(t.assign((0,mh._)`${n}.errors`,null),t.return(!0))}Mt.topBoolOrEmptySchema=vh;function _h(e,t){let{gen:r,schema:n}=e;n===!1?(r.var(t,!1),fa(e)):r.var(t,!0)}Mt.boolOrEmptySchema=_h;function fa(e,t){let{gen:r,data:n}=e,i={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,ph.reportError)(i,yh,void 0,t)}});var Mi=v(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.getRules=Ft.isJSONType=void 0;var wh=["string","number","integer","boolean","null","object","array"],Eh=new Set(wh);function Sh(e){return typeof e=="string"&&Eh.has(e)}Ft.isJSONType=Sh;function bh(){let e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Ft.getRules=bh});var Fi=v(nt=>{"use strict";Object.defineProperty(nt,"__esModule",{value:!0});nt.shouldUseRule=nt.shouldUseGroup=nt.schemaHasRulesForType=void 0;function $h({schema:e,self:t},r){let n=t.RULES.types[r];return n&&n!==!0&&ha(e,n)}nt.schemaHasRulesForType=$h;function ha(e,t){return t.rules.some(r=>pa(e,r))}nt.shouldUseGroup=ha;function pa(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}nt.shouldUseRule=pa});var mr=v(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.reportTypeError=me.checkDataTypes=me.checkDataType=me.coerceAndCheckDataType=me.getJSONTypes=me.getSchemaTypes=me.DataType=void 0;var Ah=Mi(),xh=Fi(),Rh=pr(),k=M(),ma=V(),qt;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(qt||(me.DataType=qt={}));function Th(e){let t=ga(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}me.getSchemaTypes=Th;function ga(e){let t=Array.isArray(e)?e:e?[e]:[];if(t.every(Ah.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}me.getJSONTypes=ga;function Ph(e,t){let{gen:r,data:n,opts:i}=e,s=Oh(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,xh.schemaHasRulesForType)(e,t[0]));if(o){let a=ji(t,n,i.strictNumbers,qt.Wrong);r.if(a,()=>{s.length?Ch(e,t,s):Di(e)})}return o}me.coerceAndCheckDataType=Ph;var ya=new Set(["string","number","integer","boolean","null"]);function Oh(e,t){return t?e.filter(r=>ya.has(r)||t==="array"&&r==="array"):[]}function Ch(e,t,r){let{gen:n,data:i,opts:s}=e,o=n.let("dataType",(0,k._)`typeof ${i}`),a=n.let("coerced",(0,k._)`undefined`);s.coerceTypes==="array"&&n.if((0,k._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>n.assign(i,(0,k._)`${i}[0]`).assign(o,(0,k._)`typeof ${i}`).if(ji(t,i,s.strictNumbers),()=>n.assign(a,i))),n.if((0,k._)`${a} !== undefined`);for(let l of r)(ya.has(l)||l==="array"&&s.coerceTypes==="array")&&c(l);n.else(),Di(e),n.endIf(),n.if((0,k._)`${a} !== undefined`,()=>{n.assign(i,a),Nh(e,a)});function c(l){switch(l){case"string":n.elseIf((0,k._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,k._)`"" + ${i}`).elseIf((0,k._)`${i} === null`).assign(a,(0,k._)`""`);return;case"number":n.elseIf((0,k._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,k._)`+${i}`);return;case"integer":n.elseIf((0,k._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,k._)`+${i}`);return;case"boolean":n.elseIf((0,k._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,k._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":n.elseIf((0,k._)`${i} === "" || ${i} === 0 || ${i} === false`),n.assign(a,null);return;case"array":n.elseIf((0,k._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,k._)`[${i}]`)}}}function Nh({gen:e,parentData:t,parentDataProperty:r},n){e.if((0,k._)`${t} !== undefined`,()=>e.assign((0,k._)`${t}[${r}]`,n))}function qi(e,t,r,n=qt.Correct){let i=n===qt.Correct?k.operators.EQ:k.operators.NEQ,s;switch(e){case"null":return(0,k._)`${t} ${i} null`;case"array":s=(0,k._)`Array.isArray(${t})`;break;case"object":s=(0,k._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,k._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,k._)`typeof ${t} ${i} ${e}`}return n===qt.Correct?s:(0,k.not)(s);function o(a=k.nil){return(0,k.and)((0,k._)`typeof ${t} == "number"`,a,r?(0,k._)`isFinite(${t})`:k.nil)}}me.checkDataType=qi;function ji(e,t,r,n){if(e.length===1)return qi(e[0],t,r,n);let i,s=(0,ma.toHash)(e);if(s.array&&s.object){let o=(0,k._)`typeof ${t} != "object"`;i=s.null?o:(0,k._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=k.nil;s.number&&delete s.integer;for(let o in s)i=(0,k.and)(i,qi(o,t,r,n));return i}me.checkDataTypes=ji;var kh={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,k._)`{type: ${e}}`:(0,k._)`{type: ${t}}`};function Di(e){let t=Ih(e);(0,Rh.reportError)(t,kh)}me.reportTypeError=Di;function Ih(e){let{gen:t,data:r,schema:n}=e,i=(0,ma.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:i,schemaValue:i,parentSchema:n,params:{},it:e}}});var _a=v(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});nn.assignDefaults=void 0;var jt=M(),Mh=V();function Fh(e,t){let{properties:r,items:n}=e.schema;if(t==="object"&&r)for(let i in r)va(e,i,r[i].default);else t==="array"&&Array.isArray(n)&&n.forEach((i,s)=>va(e,s,i.default))}nn.assignDefaults=Fh;function va(e,t,r){let{gen:n,compositeRule:i,data:s,opts:o}=e;if(r===void 0)return;let a=(0,jt._)`${s}${(0,jt.getProperty)(t)}`;if(i){(0,Mh.checkStrictMode)(e,`default is ignored for: ${a}`);return}let c=(0,jt._)`${a} === undefined`;o.useDefaults==="empty"&&(c=(0,jt._)`${c} || ${a} === null || ${a} === ""`),n.if(c,(0,jt._)`${a} = ${(0,jt.stringify)(r)}`)}});var Oe=v(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.validateUnion=G.validateArray=G.usePattern=G.callValidateCode=G.schemaProperties=G.allSchemaProperties=G.noPropertyInData=G.propertyInData=G.isOwnProperty=G.hasPropFunc=G.reportMissingProp=G.checkMissingProp=G.checkReportMissingProp=void 0;var Q=M(),Li=V(),it=Ye(),qh=V();function jh(e,t){let{gen:r,data:n,it:i}=e;r.if(Ui(r,n,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,Q._)`${t}`},!0),e.error()})}G.checkReportMissingProp=jh;function Dh({gen:e,data:t,it:{opts:r}},n,i){return(0,Q.or)(...n.map(s=>(0,Q.and)(Ui(e,t,s,r.ownProperties),(0,Q._)`${i} = ${s}`)))}G.checkMissingProp=Dh;function Lh(e,t){e.setParams({missingProperty:t},!0),e.error()}G.reportMissingProp=Lh;function wa(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Q._)`Object.prototype.hasOwnProperty`})}G.hasPropFunc=wa;function Wi(e,t,r){return(0,Q._)`${wa(e)}.call(${t}, ${r})`}G.isOwnProperty=Wi;function Wh(e,t,r,n){let i=(0,Q._)`${t}${(0,Q.getProperty)(r)} !== undefined`;return n?(0,Q._)`${i} && ${Wi(e,t,r)}`:i}G.propertyInData=Wh;function Ui(e,t,r,n){let i=(0,Q._)`${t}${(0,Q.getProperty)(r)} === undefined`;return n?(0,Q.or)(i,(0,Q.not)(Wi(e,t,r))):i}G.noPropertyInData=Ui;function Ea(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}G.allSchemaProperties=Ea;function Uh(e,t){return Ea(t).filter(r=>!(0,Li.alwaysValidSchema)(e,t[r]))}G.schemaProperties=Uh;function Kh({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:i,errorPath:s},it:o},a,c,l){let u=l?(0,Q._)`${e}, ${t}, ${n}${i}`:t,f=[[it.default.instancePath,(0,Q.strConcat)(it.default.instancePath,s)],[it.default.parentData,o.parentData],[it.default.parentDataProperty,o.parentDataProperty],[it.default.rootData,it.default.rootData]];o.opts.dynamicRef&&f.push([it.default.dynamicAnchors,it.default.dynamicAnchors]);let m=(0,Q._)`${u}, ${r.object(...f)}`;return c!==Q.nil?(0,Q._)`${a}.call(${c}, ${m})`:(0,Q._)`${a}(${m})`}G.callValidateCode=Kh;var Vh=(0,Q._)`new RegExp`;function Hh({gen:e,it:{opts:t}},r){let n=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(r,n);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,Q._)`${i.code==="new RegExp"?Vh:(0,qh.useFunc)(e,i)}(${r}, ${n})`})}G.usePattern=Hh;function zh(e){let{gen:t,data:r,keyword:n,it:i}=e,s=t.name("valid");if(i.allErrors){let a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){let c=t.const("len",(0,Q._)`${r}.length`);t.forRange("i",0,c,l=>{e.subschema({keyword:n,dataProp:l,dataPropType:Li.Type.Num},s),t.if((0,Q.not)(s),a)})}}G.validateArray=zh;function Gh(e){let{gen:t,schema:r,keyword:n,it:i}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,Li.alwaysValidSchema)(i,c))&&!i.opts.unevaluated)return;let o=t.let("valid",!1),a=t.name("_valid");t.block(()=>r.forEach((c,l)=>{let u=e.subschema({keyword:n,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,Q._)`${o} || ${a}`),e.mergeValidEvaluated(u,a)||t.if((0,Q.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}G.validateUnion=Gh});var $a=v(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.validateKeywordUsage=Le.validSchemaType=Le.funcKeywordCode=Le.macroKeywordCode=void 0;var _e=M(),vt=Ye(),Bh=Oe(),Yh=pr();function Jh(e,t){let{gen:r,keyword:n,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),c=ba(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let l=r.name("valid");e.subschema({schema:a,schemaPath:_e.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:c,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}Le.macroKeywordCode=Jh;function Qh(e,t){var r;let{gen:n,keyword:i,schema:s,parentSchema:o,$data:a,it:c}=e;Zh(c,t);let l=!a&&t.compile?t.compile.call(c.self,s,o,c):t.validate,u=ba(n,i,l),f=n.let("valid");e.block$data(f,m),e.ok((r=t.valid)!==null&&r!==void 0?r:f);function m(){if(t.errors===!1)g(),t.modifying&&Sa(e),d(()=>e.error());else{let y=t.async?p():h();t.modifying&&Sa(e),d(()=>Xh(e,y))}}function p(){let y=n.let("ruleErrs",null);return n.try(()=>g((0,_e._)`await `),w=>n.assign(f,!1).if((0,_e._)`${w} instanceof ${c.ValidationError}`,()=>n.assign(y,(0,_e._)`${w}.errors`),()=>n.throw(w))),y}function h(){let y=(0,_e._)`${u}.errors`;return n.assign(y,null),g(_e.nil),y}function g(y=t.async?(0,_e._)`await `:_e.nil){let w=c.opts.passContext?vt.default.this:vt.default.self,b=!("compile"in t&&!a||t.schema===!1);n.assign(f,(0,_e._)`${y}${(0,Bh.callValidateCode)(e,u,w,b)}`,t.modifying)}function d(y){var w;n.if((0,_e.not)((w=t.valid)!==null&&w!==void 0?w:f),y)}}Le.funcKeywordCode=Qh;function Sa(e){let{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,_e._)`${n.parentData}[${n.parentDataProperty}]`))}function Xh(e,t){let{gen:r}=e;r.if((0,_e._)`Array.isArray(${t})`,()=>{r.assign(vt.default.vErrors,(0,_e._)`${vt.default.vErrors} === null ? ${t} : ${vt.default.vErrors}.concat(${t})`).assign(vt.default.errors,(0,_e._)`${vt.default.vErrors}.length`),(0,Yh.extendErrors)(e)},()=>e.error())}function Zh({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function ba(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,_e.stringify)(r)})}function ep(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}Le.validSchemaType=ep;function tp({schema:e,opts:t,self:r,errSchemaPath:n},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");let o=i.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){let c=`keyword "${s}" value is invalid at path "${n}": `+r.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(c);else throw new Error(c)}}Le.validateKeywordUsage=tp});var xa=v(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.extendSubschemaMode=st.extendSubschemaData=st.getSubschema=void 0;var We=M(),Aa=V();function rp(e,{keyword:t,schemaProp:r,schema:n,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){let a=e.schema[t];return r===void 0?{schema:a,schemaPath:(0,We._)`${e.schemaPath}${(0,We.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[r],schemaPath:(0,We._)`${e.schemaPath}${(0,We.getProperty)(t)}${(0,We.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,Aa.escapeFragment)(r)}`}}if(n!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}st.getSubschema=rp;function np(e,t,{dataProp:r,dataPropType:n,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=t;if(r!==void 0){let{errorPath:l,dataPathArr:u,opts:f}=t,m=a.let("data",(0,We._)`${t.data}${(0,We.getProperty)(r)}`,!0);c(m),e.errorPath=(0,We.str)`${l}${(0,Aa.getErrorPath)(r,n,f.jsPropertySyntax)}`,e.parentDataProperty=(0,We._)`${r}`,e.dataPathArr=[...u,e.parentDataProperty]}if(i!==void 0){let l=i instanceof We.Name?i:a.let("data",i,!0);c(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function c(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}st.extendSubschemaData=np;function ip(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:i,allErrors:s}){n!==void 0&&(e.compositeRule=n),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=r}st.extendSubschemaMode=ip});var Ki=v((bE,Ra)=>{"use strict";Ra.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,i,s;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=n;i--!==0;){var o=s[i];if(!e(t[o],r[o]))return!1}return!0}return t!==t&&r!==r}});var Pa=v(($E,Ta)=>{"use strict";var ot=Ta.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},i=r.post||function(){};sn(t,n,i,e,"",e)};ot.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};ot.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};ot.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};ot.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function sn(e,t,r,n,i,s,o,a,c,l){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,i,s,o,a,c,l);for(var u in n){var f=n[u];if(Array.isArray(f)){if(u in ot.arrayKeywords)for(var m=0;m<f.length;m++)sn(e,t,r,f[m],i+"/"+u+"/"+m,s,i,u,n,m)}else if(u in ot.propsKeywords){if(f&&typeof f=="object")for(var p in f)sn(e,t,r,f[p],i+"/"+u+"/"+sp(p),s,i,u,n,p)}else(u in ot.keywords||e.allKeys&&!(u in ot.skipKeywords))&&sn(e,t,r,f,i+"/"+u,s,i,u,n)}r(n,i,s,o,a,c,l)}}function sp(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}});var gr=v($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.getSchemaRefs=$e.resolveUrl=$e.normalizeId=$e._getFullPath=$e.getFullPath=$e.inlineRef=void 0;var op=V(),ap=Ki(),cp=Pa(),up=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function lp(e,t=!0){return typeof e=="boolean"?!0:t===!0?!Vi(e):t?Oa(e)<=t:!1}$e.inlineRef=lp;var fp=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Vi(e){for(let t in e){if(fp.has(t))return!0;let r=e[t];if(Array.isArray(r)&&r.some(Vi)||typeof r=="object"&&Vi(r))return!0}return!1}function Oa(e){let t=0;for(let r in e){if(r==="$ref")return 1/0;if(t++,!up.has(r)&&(typeof e[r]=="object"&&(0,op.eachItem)(e[r],n=>t+=Oa(n)),t===1/0))return 1/0}return t}function Ca(e,t="",r){r!==!1&&(t=Dt(t));let n=e.parse(t);return Na(e,n)}$e.getFullPath=Ca;function Na(e,t){return e.serialize(t).split("#")[0]+"#"}$e._getFullPath=Na;var dp=/#\/?$/;function Dt(e){return e?e.replace(dp,""):""}$e.normalizeId=Dt;function hp(e,t,r){return r=Dt(r),e.resolve(t,r)}$e.resolveUrl=hp;var pp=/^[a-z_][-a-z0-9._]*$/i;function mp(e,t){if(typeof e=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,i=Dt(e[r]||t),s={"":i},o=Ca(n,i,!1),a={},c=new Set;return cp(e,{allKeys:!0},(f,m,p,h)=>{if(h===void 0)return;let g=o+m,d=s[h];typeof f[r]=="string"&&(d=y.call(this,f[r])),w.call(this,f.$anchor),w.call(this,f.$dynamicAnchor),s[m]=d;function y(b){let A=this.opts.uriResolver.resolve;if(b=Dt(d?A(d,b):b),c.has(b))throw u(b);c.add(b);let E=this.refs[b];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,b):b!==Dt(g)&&(b[0]==="#"?(l(f,a[b],b),a[b]=f):this.refs[b]=g),b}function w(b){if(typeof b=="string"){if(!pp.test(b))throw new Error(`invalid anchor "${b}"`);y.call(this,`#${b}`)}}}),a;function l(f,m,p){if(m!==void 0&&!ap(f,m))throw u(p)}function u(f){return new Error(`reference "${f}" resolves to more than one schema`)}}$e.getSchemaRefs=mp});var _r=v(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.getData=at.KeywordCxt=at.validateFunctionCode=void 0;var qa=da(),ka=mr(),zi=Fi(),on=mr(),gp=_a(),vr=$a(),Hi=xa(),x=M(),C=Ye(),yp=gr(),Je=V(),yr=pr();function vp(e){if(La(e)&&(Wa(e),Da(e))){Ep(e);return}ja(e,()=>(0,qa.topBoolOrEmptySchema)(e))}at.validateFunctionCode=vp;function ja({gen:e,validateName:t,schema:r,schemaEnv:n,opts:i},s){i.code.es5?e.func(t,(0,x._)`${C.default.data}, ${C.default.valCxt}`,n.$async,()=>{e.code((0,x._)`"use strict"; ${Ia(r,i)}`),wp(e,i),e.code(s)}):e.func(t,(0,x._)`${C.default.data}, ${_p(i)}`,n.$async,()=>e.code(Ia(r,i)).code(s))}function _p(e){return(0,x._)`{${C.default.instancePath}="", ${C.default.parentData}, ${C.default.parentDataProperty}, ${C.default.rootData}=${C.default.data}${e.dynamicRef?(0,x._)`, ${C.default.dynamicAnchors}={}`:x.nil}}={}`}function wp(e,t){e.if(C.default.valCxt,()=>{e.var(C.default.instancePath,(0,x._)`${C.default.valCxt}.${C.default.instancePath}`),e.var(C.default.parentData,(0,x._)`${C.default.valCxt}.${C.default.parentData}`),e.var(C.default.parentDataProperty,(0,x._)`${C.default.valCxt}.${C.default.parentDataProperty}`),e.var(C.default.rootData,(0,x._)`${C.default.valCxt}.${C.default.rootData}`),t.dynamicRef&&e.var(C.default.dynamicAnchors,(0,x._)`${C.default.valCxt}.${C.default.dynamicAnchors}`)},()=>{e.var(C.default.instancePath,(0,x._)`""`),e.var(C.default.parentData,(0,x._)`undefined`),e.var(C.default.parentDataProperty,(0,x._)`undefined`),e.var(C.default.rootData,C.default.data),t.dynamicRef&&e.var(C.default.dynamicAnchors,(0,x._)`{}`)})}function Ep(e){let{schema:t,opts:r,gen:n}=e;ja(e,()=>{r.$comment&&t.$comment&&Ka(e),xp(e),n.let(C.default.vErrors,null),n.let(C.default.errors,0),r.unevaluated&&Sp(e),Ua(e),Pp(e)})}function Sp(e){let{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,x._)`${r}.evaluated`),t.if((0,x._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,x._)`${e.evaluated}.props`,(0,x._)`undefined`)),t.if((0,x._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,x._)`${e.evaluated}.items`,(0,x._)`undefined`))}function Ia(e,t){let r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,x._)`/*# sourceURL=${r} */`:x.nil}function bp(e,t){if(La(e)&&(Wa(e),Da(e))){$p(e,t);return}(0,qa.boolOrEmptySchema)(e,t)}function Da({schema:e,self:t}){if(typeof e=="boolean")return!e;for(let r in e)if(t.RULES.all[r])return!0;return!1}function La(e){return typeof e.schema!="boolean"}function $p(e,t){let{schema:r,gen:n,opts:i}=e;i.$comment&&r.$comment&&Ka(e),Rp(e),Tp(e);let s=n.const("_errs",C.default.errors);Ua(e,s),n.var(t,(0,x._)`${s} === ${C.default.errors}`)}function Wa(e){(0,Je.checkUnknownRules)(e),Ap(e)}function Ua(e,t){if(e.opts.jtd)return Ma(e,[],!1,t);let r=(0,ka.getSchemaTypes)(e.schema),n=(0,ka.coerceAndCheckDataType)(e,r);Ma(e,r,!n,t)}function Ap(e){let{schema:t,errSchemaPath:r,opts:n,self:i}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,Je.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function xp(e){let{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,Je.checkStrictMode)(e,"default is ignored in the schema root")}function Rp(e){let t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,yp.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function Tp(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function Ka({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:i}){let s=r.$comment;if(i.$comment===!0)e.code((0,x._)`${C.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){let o=(0,x.str)`${n}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,x._)`${C.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function Pp(e){let{gen:t,schemaEnv:r,validateName:n,ValidationError:i,opts:s}=e;r.$async?t.if((0,x._)`${C.default.errors} === 0`,()=>t.return(C.default.data),()=>t.throw((0,x._)`new ${i}(${C.default.vErrors})`)):(t.assign((0,x._)`${n}.errors`,C.default.vErrors),s.unevaluated&&Op(e),t.return((0,x._)`${C.default.errors} === 0`))}function Op({gen:e,evaluated:t,props:r,items:n}){r instanceof x.Name&&e.assign((0,x._)`${t}.props`,r),n instanceof x.Name&&e.assign((0,x._)`${t}.items`,n)}function Ma(e,t,r,n){let{gen:i,schema:s,data:o,allErrors:a,opts:c,self:l}=e,{RULES:u}=l;if(s.$ref&&(c.ignoreKeywordsWithRef||!(0,Je.schemaHasRulesButRef)(s,u))){i.block(()=>Ha(e,"$ref",u.all.$ref.definition));return}c.jtd||Cp(e,t),i.block(()=>{for(let m of u.rules)f(m);f(u.post)});function f(m){(0,zi.shouldUseGroup)(s,m)&&(m.type?(i.if((0,on.checkDataType)(m.type,o,c.strictNumbers)),Fa(e,m),t.length===1&&t[0]===m.type&&r&&(i.else(),(0,on.reportTypeError)(e)),i.endIf()):Fa(e,m),a||i.if((0,x._)`${C.default.errors} === ${n||0}`))}}function Fa(e,t){let{gen:r,schema:n,opts:{useDefaults:i}}=e;i&&(0,gp.assignDefaults)(e,t.type),r.block(()=>{for(let s of t.rules)(0,zi.shouldUseRule)(n,s)&&Ha(e,s.keyword,s.definition,t.type)})}function Cp(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(Np(e,t),e.opts.allowUnionTypes||kp(e,t),Ip(e,e.dataTypes))}function Np(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{Va(e.dataTypes,r)||Gi(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),Fp(e,t)}}function kp(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&Gi(e,"use allowUnionTypes to allow union type keyword")}function Ip(e,t){let r=e.self.RULES.all;for(let n in r){let i=r[n];if(typeof i=="object"&&(0,zi.shouldUseRule)(e.schema,i)){let{type:s}=i.definition;s.length&&!s.some(o=>Mp(t,o))&&Gi(e,`missing type "${s.join(",")}" for keyword "${n}"`)}}}function Mp(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function Va(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function Fp(e,t){let r=[];for(let n of e.dataTypes)Va(t,n)?r.push(n):t.includes("integer")&&n==="number"&&r.push("integer");e.dataTypes=r}function Gi(e,t){let r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,Je.checkStrictMode)(e,t,e.opts.strictTypes)}var an=class{constructor(t,r,n){if((0,vr.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Je.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",za(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,vr.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",C.default.errors))}result(t,r,n){this.failResult((0,x.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,x.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);let{schemaCode:r}=this;this.fail((0,x._)`${r} !== undefined && (${(0,x.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?yr.reportExtraError:yr.reportError)(this,this.def.error,r)}$dataError(){(0,yr.reportError)(this,this.def.$dataError||yr.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,yr.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=x.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=x.nil,r=x.nil){if(!this.$data)return;let{gen:n,schemaCode:i,schemaType:s,def:o}=this;n.if((0,x.or)((0,x._)`${i} === undefined`,r)),t!==x.nil&&n.assign(t,!0),(s.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==x.nil&&n.assign(t,!1)),n.else()}invalid$data(){let{gen:t,schemaCode:r,schemaType:n,def:i,it:s}=this;return(0,x.or)(o(),a());function o(){if(n.length){if(!(r instanceof x.Name))throw new Error("ajv implementation error");let c=Array.isArray(n)?n:[n];return(0,x._)`${(0,on.checkDataTypes)(c,r,s.opts.strictNumbers,on.DataType.Wrong)}`}return x.nil}function a(){if(i.validateSchema){let c=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,x._)`!${c}(${r})`}return x.nil}}subschema(t,r){let n=(0,Hi.getSubschema)(this.it,t);(0,Hi.extendSubschemaData)(n,this.it,t),(0,Hi.extendSubschemaMode)(n,t);let i={...this.it,...n,items:void 0,props:void 0};return bp(i,r),i}mergeEvaluated(t,r){let{it:n,gen:i}=this;n.opts.unevaluated&&(n.props!==!0&&t.props!==void 0&&(n.props=Je.mergeEvaluated.props(i,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=Je.mergeEvaluated.items(i,t.items,n.items,r)))}mergeValidEvaluated(t,r){let{it:n,gen:i}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return i.if(r,()=>this.mergeEvaluated(t,x.Name)),!0}};at.KeywordCxt=an;function Ha(e,t,r,n){let i=new an(e,r,t);"code"in r?r.code(i,n):i.$data&&r.validate?(0,vr.funcKeywordCode)(i,r):"macro"in r?(0,vr.macroKeywordCode)(i,r):(r.compile||r.validate)&&(0,vr.funcKeywordCode)(i,r)}var qp=/^\/(?:[^~]|~0|~1)*$/,jp=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function za(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let i,s;if(e==="")return C.default.rootData;if(e[0]==="/"){if(!qp.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=C.default.rootData}else{let l=jp.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);let u=+l[1];if(i=l[2],i==="#"){if(u>=t)throw new Error(c("property/index",u));return n[t-u]}if(u>t)throw new Error(c("data",u));if(s=r[t-u],!i)return s}let o=s,a=i.split("/");for(let l of a)l&&(s=(0,x._)`${s}${(0,x.getProperty)((0,Je.unescapeJsonPointer)(l))}`,o=(0,x._)`${o} && ${s}`);return o;function c(l,u){return`Cannot access ${l} ${u} levels up, current level is ${t}`}}at.getData=za});var cn=v(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});var Bi=class extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}};Yi.default=Bi});var wr=v(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});var Ji=gr(),Qi=class extends Error{constructor(t,r,n,i){super(i||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,Ji.resolveUrl)(t,r,n),this.missingSchema=(0,Ji.normalizeId)((0,Ji.getFullPath)(t,this.missingRef))}};Xi.default=Qi});var ln=v(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.resolveSchema=Ce.getCompilingSchema=Ce.resolveRef=Ce.compileSchema=Ce.SchemaEnv=void 0;var Fe=M(),Dp=cn(),_t=Ye(),qe=gr(),Ga=V(),Lp=_r(),Lt=class{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,qe.normalizeId)(n?.[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n?.$async,this.refs={}}};Ce.SchemaEnv=Lt;function es(e){let t=Ba.call(this,e);if(t)return t;let r=(0,qe.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new Fe.CodeGen(this.scope,{es5:n,lines:i,ownProperties:s}),a;e.$async&&(a=o.scopeValue("Error",{ref:Dp.default,code:(0,Fe._)`require("ajv/dist/runtime/validation_error").default`}));let c=o.scopeName("validate");e.validateName=c;let l={gen:o,allErrors:this.opts.allErrors,data:_t.default.data,parentData:_t.default.parentData,parentDataProperty:_t.default.parentDataProperty,dataNames:[_t.default.data],dataPathArr:[Fe.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Fe.stringify)(e.schema)}:{ref:e.schema}),validateName:c,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:Fe.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Fe._)`""`,opts:this.opts,self:this},u;try{this._compilations.add(e),(0,Lp.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);let f=o.toString();u=`${o.scopeRefs(_t.default.scope)}return ${f}`,this.opts.code.process&&(u=this.opts.code.process(u,e));let p=new Function(`${_t.default.self}`,`${_t.default.scope}`,u)(this,this.scope.get());if(this.scope.value(c,{ref:p}),p.errors=null,p.schema=e.schema,p.schemaEnv=e,e.$async&&(p.$async=!0),this.opts.code.source===!0&&(p.source={validateName:c,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){let{props:h,items:g}=l;p.evaluated={props:h instanceof Fe.Name?void 0:h,items:g instanceof Fe.Name?void 0:g,dynamicProps:h instanceof Fe.Name,dynamicItems:g instanceof Fe.Name},p.source&&(p.source.evaluated=(0,Fe.stringify)(p.evaluated))}return e.validate=p,e}catch(f){throw delete e.validate,delete e.validateName,u&&this.logger.error("Error compiling schema, function code:",u),f}finally{this._compilations.delete(e)}}Ce.compileSchema=es;function Wp(e,t,r){var n;r=(0,qe.resolveUrl)(this.opts.uriResolver,t,r);let i=e.refs[r];if(i)return i;let s=Vp.call(this,e,r);if(s===void 0){let o=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(s=new Lt({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[r]=Up.call(this,s)}Ce.resolveRef=Wp;function Up(e){return(0,qe.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:es.call(this,e)}function Ba(e){for(let t of this._compilations)if(Kp(t,e))return t}Ce.getCompilingSchema=Ba;function Kp(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Vp(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||un.call(this,e,t)}function un(e,t){let r=this.opts.uriResolver.parse(t),n=(0,qe._getFullPath)(this.opts.uriResolver,r),i=(0,qe.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===i)return Zi.call(this,r,e);let s=(0,qe.normalizeId)(n),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){let a=un.call(this,e,o);return typeof a?.schema!="object"?void 0:Zi.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||es.call(this,o),s===(0,qe.normalizeId)(t)){let{schema:a}=o,{schemaId:c}=this.opts,l=a[c];return l&&(i=(0,qe.resolveUrl)(this.opts.uriResolver,i,l)),new Lt({schema:a,schemaId:c,root:e,baseId:i})}return Zi.call(this,r,o)}}Ce.resolveSchema=un;var Hp=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Zi(e,{baseId:t,schema:r,root:n}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(let a of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let c=r[(0,Ga.unescapeFragment)(a)];if(c===void 0)return;r=c;let l=typeof r=="object"&&r[this.opts.schemaId];!Hp.has(a)&&l&&(t=(0,qe.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof r!="boolean"&&r.$ref&&!(0,Ga.schemaHasRulesButRef)(r,this.RULES)){let a=(0,qe.resolveUrl)(this.opts.uriResolver,t,r.$ref);s=un.call(this,n,a)}let{schemaId:o}=this.opts;if(s=s||new Lt({schema:r,schemaId:o,root:n,baseId:t}),s.schema!==s.root.schema)return s}});var Ya=v((OE,zp)=>{zp.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Qa=v((CE,Ja)=>{"use strict";var Gp={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Ja.exports={HEX:Gp}});var sc=v((NE,ic)=>{"use strict";var{HEX:Bp}=Qa();function tc(e){if(nc(e,".")<3)return{host:e,isIPV4:!1};let t=e.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[r]=t;return r?{host:Jp(r,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function ts(e,t=!1){let r="",n=!0;for(let i of e){if(Bp[i]===void 0)return;i!=="0"&&n===!0&&(n=!1),n||(r+=i)}return t&&r.length===0&&(r="0"),r}function Yp(e){let t=0,r={error:!1,address:"",zone:""},n=[],i=[],s=!1,o=!1,a=!1;function c(){if(i.length){if(s===!1){let l=ts(i);if(l!==void 0)n.push(l);else return r.error=!0,!1}i.length=0}return!0}for(let l=0;l<e.length;l++){let u=e[l];if(!(u==="["||u==="]"))if(u===":"){if(o===!0&&(a=!0),!c())break;if(t++,n.push(":"),t>7){r.error=!0;break}l-1>=0&&e[l-1]===":"&&(o=!0);continue}else if(u==="%"){if(!c())break;s=!0}else{i.push(u);continue}}return i.length&&(s?r.zone=i.join(""):a?n.push(i.join("")):n.push(ts(i))),r.address=n.join(""),r}function rc(e,t={}){if(nc(e,":")<2)return{host:e,isIPV6:!1};let r=Yp(e);if(r.error)return{host:e,isIPV6:!1};{let n=r.address,i=r.address;return r.zone&&(n+="%"+r.zone,i+="%25"+r.zone),{host:n,escapedHost:i,isIPV6:!0}}}function Jp(e,t){let r="",n=!0,i=e.length;for(let s=0;s<i;s++){let o=e[s];o==="0"&&n?(s+1<=i&&e[s+1]===t||s+1===i)&&(r+=o,n=!1):(o===t?n=!0:n=!1,r+=o)}return r}function nc(e,t){let r=0;for(let n=0;n<e.length;n++)e[n]===t&&r++;return r}var Xa=/^\.\.?\//u,Za=/^\/\.(?:\/|$)/u,ec=/^\/\.\.(?:\/|$)/u,Qp=/^\/?(?:.|\n)*?(?=\/|$)/u;function Xp(e){let t=[];for(;e.length;)if(e.match(Xa))e=e.replace(Xa,"");else if(e.match(Za))e=e.replace(Za,"/");else if(e.match(ec))e=e.replace(ec,"/"),t.pop();else if(e==="."||e==="..")e="";else{let r=e.match(Qp);if(r){let n=r[0];e=e.slice(n.length),t.push(n)}else throw new Error("Unexpected dot segment condition")}return t.join("")}function Zp(e,t){let r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function em(e,t){let r=[];if(e.userinfo!==void 0&&(r.push(e.userinfo),r.push("@")),e.host!==void 0){let n=unescape(e.host),i=tc(n);if(i.isIPV4)n=i.host;else{let s=rc(i.host,{isIPV4:!1});s.isIPV6===!0?n=`[${s.escapedHost}]`:n=e.host}r.push(n)}return(typeof e.port=="number"||typeof e.port=="string")&&(r.push(":"),r.push(String(e.port))),r.length?r.join(""):void 0}ic.exports={recomposeAuthority:em,normalizeComponentEncoding:Zp,removeDotSegments:Xp,normalizeIPv4:tc,normalizeIPv6:rc,stringArrayToHexStripped:ts}});var fc=v((kE,lc)=>{"use strict";var tm=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,rm=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function oc(e){return typeof e.secure=="boolean"?e.secure:String(e.scheme).toLowerCase()==="wss"}function ac(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function cc(e){let t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function nm(e){return e.secure=oc(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function im(e){if((e.port===(oc(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){let[t,r]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function sm(e,t){if(!e.path)return e.error="URN can not be parsed",e;let r=e.path.match(rm);if(r){let n=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];let i=`${n}:${t.nid||e.nid}`,s=rs[i];e.path=void 0,s&&(e=s.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function om(e,t){let r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase(),i=`${r}:${t.nid||n}`,s=rs[i];s&&(e=s.serialize(e,t));let o=e,a=e.nss;return o.path=`${n||t.nid}:${a}`,t.skipEscape=!0,o}function am(e,t){let r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!tm.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function cm(e){let t=e;return t.nss=(e.uuid||"").toLowerCase(),t}var uc={scheme:"http",domainHost:!0,parse:ac,serialize:cc},um={scheme:"https",domainHost:uc.domainHost,parse:ac,serialize:cc},fn={scheme:"ws",domainHost:!0,parse:nm,serialize:im},lm={scheme:"wss",domainHost:fn.domainHost,parse:fn.parse,serialize:fn.serialize},fm={scheme:"urn",parse:sm,serialize:om,skipNormalize:!0},dm={scheme:"urn:uuid",parse:am,serialize:cm,skipNormalize:!0},rs={http:uc,https:um,ws:fn,wss:lm,urn:fm,"urn:uuid":dm};lc.exports=rs});var hc=v((IE,hn)=>{"use strict";var{normalizeIPv6:hm,normalizeIPv4:pm,removeDotSegments:Er,recomposeAuthority:mm,normalizeComponentEncoding:dn}=sc(),ns=fc();function gm(e,t){return typeof e=="string"?e=Ue(Qe(e,t),t):typeof e=="object"&&(e=Qe(Ue(e,t),t)),e}function ym(e,t,r){let n=Object.assign({scheme:"null"},r),i=dc(Qe(e,n),Qe(t,n),n,!0);return Ue(i,{...n,skipEscape:!0})}function dc(e,t,r,n){let i={};return n||(e=Qe(Ue(e,r),r),t=Qe(Ue(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=Er(t.path||""),i.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=Er(t.path||""),i.query=t.query):(t.path?(t.path.charAt(0)==="/"?i.path=Er(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?i.path="/"+t.path:e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path,i.path=Er(i.path)),i.query=t.query):(i.path=e.path,t.query!==void 0?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function vm(e,t,r){return typeof e=="string"?(e=unescape(e),e=Ue(dn(Qe(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=Ue(dn(e,!0),{...r,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=Ue(dn(Qe(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=Ue(dn(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function Ue(e,t){let r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},n=Object.assign({},t),i=[],s=ns[(n.scheme||r.scheme||"").toLowerCase()];s&&s.serialize&&s.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&(i.push(r.scheme),i.push(":"));let o=mm(r,n);if(o!==void 0&&(n.reference!=="suffix"&&i.push("//"),i.push(o),r.path&&r.path.charAt(0)!=="/"&&i.push("/")),r.path!==void 0){let a=r.path;!n.absolutePath&&(!s||!s.absolutePath)&&(a=Er(a)),o===void 0&&(a=a.replace(/^\/\//u,"/%2F")),i.push(a)}return r.query!==void 0&&(i.push("?"),i.push(r.query)),r.fragment!==void 0&&(i.push("#"),i.push(r.fragment)),i.join("")}var _m=Array.from({length:127},(e,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t)));function wm(e){let t=0;for(let r=0,n=e.length;r<n;++r)if(t=e.charCodeAt(r),t>126||_m[t])return!0;return!1}var Em=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Qe(e,t){let r=Object.assign({},t),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},i=e.indexOf("%")!==-1,s=!1;r.reference==="suffix"&&(e=(r.scheme?r.scheme+":":"")+"//"+e);let o=e.match(Em);if(o){if(n.scheme=o[1],n.userinfo=o[3],n.host=o[4],n.port=parseInt(o[5],10),n.path=o[6]||"",n.query=o[7],n.fragment=o[8],isNaN(n.port)&&(n.port=o[5]),n.host){let c=pm(n.host);if(c.isIPV4===!1){let l=hm(c.host,{isIPV4:!1});n.host=l.host.toLowerCase(),s=l.isIPV6}else n.host=c.host,s=!0}n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&!n.path&&n.query===void 0?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");let a=ns[(r.scheme||n.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!a||!a.unicodeSupport)&&n.host&&(r.domainHost||a&&a.domainHost)&&s===!1&&wm(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(c){n.error=n.error||"Host's domain name can not be converted to ASCII: "+c}(!a||a&&!a.skipNormalize)&&(i&&n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),i&&n.userinfo!==void 0&&(n.userinfo=unescape(n.userinfo)),i&&n.host!==void 0&&(n.host=unescape(n.host)),n.path!==void 0&&n.path.length&&(n.path=escape(unescape(n.path))),n.fragment!==void 0&&n.fragment.length&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),a&&a.parse&&a.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}var is={SCHEMES:ns,normalize:gm,resolve:ym,resolveComponents:dc,equal:vm,serialize:Ue,parse:Qe};hn.exports=is;hn.exports.default=is;hn.exports.fastUri=is});var mc=v(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});var pc=hc();pc.code='require("ajv/dist/runtime/uri").default';ss.default=pc});var bc=v(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});le.CodeGen=le.Name=le.nil=le.stringify=le.str=le._=le.KeywordCxt=void 0;var Sm=_r();Object.defineProperty(le,"KeywordCxt",{enumerable:!0,get:function(){return Sm.KeywordCxt}});var Wt=M();Object.defineProperty(le,"_",{enumerable:!0,get:function(){return Wt._}});Object.defineProperty(le,"str",{enumerable:!0,get:function(){return Wt.str}});Object.defineProperty(le,"stringify",{enumerable:!0,get:function(){return Wt.stringify}});Object.defineProperty(le,"nil",{enumerable:!0,get:function(){return Wt.nil}});Object.defineProperty(le,"Name",{enumerable:!0,get:function(){return Wt.Name}});Object.defineProperty(le,"CodeGen",{enumerable:!0,get:function(){return Wt.CodeGen}});var bm=cn(),wc=wr(),$m=Mi(),Sr=ln(),Am=M(),br=gr(),pn=mr(),as=V(),gc=Ya(),xm=mc(),Ec=(e,t)=>new RegExp(e,t);Ec.code="new RegExp";var Rm=["removeAdditional","useDefaults","coerceTypes"],Tm=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),Pm={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},Om={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},yc=200;function Cm(e){var t,r,n,i,s,o,a,c,l,u,f,m,p,h,g,d,y,w,b,A,E,N,q,ye,P;let j=e.strict,D=(t=e.code)===null||t===void 0?void 0:t.optimize,ne=D===!0||D===void 0?1:D||0,ee=(n=(r=e.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:Ec,ie=(i=e.uriResolver)!==null&&i!==void 0?i:xm.default;return{strictSchema:(o=(s=e.strictSchema)!==null&&s!==void 0?s:j)!==null&&o!==void 0?o:!0,strictNumbers:(c=(a=e.strictNumbers)!==null&&a!==void 0?a:j)!==null&&c!==void 0?c:!0,strictTypes:(u=(l=e.strictTypes)!==null&&l!==void 0?l:j)!==null&&u!==void 0?u:"log",strictTuples:(m=(f=e.strictTuples)!==null&&f!==void 0?f:j)!==null&&m!==void 0?m:"log",strictRequired:(h=(p=e.strictRequired)!==null&&p!==void 0?p:j)!==null&&h!==void 0?h:!1,code:e.code?{...e.code,optimize:ne,regExp:ee}:{optimize:ne,regExp:ee},loopRequired:(g=e.loopRequired)!==null&&g!==void 0?g:yc,loopEnum:(d=e.loopEnum)!==null&&d!==void 0?d:yc,meta:(y=e.meta)!==null&&y!==void 0?y:!0,messages:(w=e.messages)!==null&&w!==void 0?w:!0,inlineRefs:(b=e.inlineRefs)!==null&&b!==void 0?b:!0,schemaId:(A=e.schemaId)!==null&&A!==void 0?A:"$id",addUsedSchema:(E=e.addUsedSchema)!==null&&E!==void 0?E:!0,validateSchema:(N=e.validateSchema)!==null&&N!==void 0?N:!0,validateFormats:(q=e.validateFormats)!==null&&q!==void 0?q:!0,unicodeRegExp:(ye=e.unicodeRegExp)!==null&&ye!==void 0?ye:!0,int32range:(P=e.int32range)!==null&&P!==void 0?P:!0,uriResolver:ie}}var $r=class{constructor(t={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts={...t,...Cm(t)};let{es5:r,lines:n}=this.opts.code;this.scope=new Am.ValueScope({scope:{},prefixes:Tm,es5:r,lines:n}),this.logger=qm(t.logger);let i=t.validateFormats;t.validateFormats=!1,this.RULES=(0,$m.getRules)(),vc.call(this,Pm,t,"NOT SUPPORTED"),vc.call(this,Om,t,"DEPRECATED","warn"),this._metaOpts=Mm.call(this),t.formats&&km.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&Im.call(this,t.keywords),typeof t.meta=="object"&&this.addMetaSchema(t.meta),Nm.call(this),t.validateFormats=i}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:t,meta:r,schemaId:n}=this.opts,i=gc;n==="id"&&(i={...gc},i.id=i.$id,delete i.$id),r&&t&&this.addMetaSchema(i,i[n],!1)}defaultMeta(){let{meta:t,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof t=="object"?t[r]||t:void 0}validate(t,r){let n;if(typeof t=="string"){if(n=this.getSchema(t),!n)throw new Error(`no schema with key or ref "${t}"`)}else n=this.compile(t);let i=n(r);return"$async"in n||(this.errors=n.errors),i}compile(t,r){let n=this._addSchema(t,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(t,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return i.call(this,t,r);async function i(u,f){await s.call(this,u.$schema);let m=this._addSchema(u,f);return m.validate||o.call(this,m)}async function s(u){u&&!this.getSchema(u)&&await i.call(this,{$ref:u},!0)}async function o(u){try{return this._compileSchemaEnv(u)}catch(f){if(!(f instanceof wc.default))throw f;return a.call(this,f),await c.call(this,f.missingSchema),o.call(this,u)}}function a({missingSchema:u,missingRef:f}){if(this.refs[u])throw new Error(`AnySchema ${u} is loaded but ${f} cannot be resolved`)}async function c(u){let f=await l.call(this,u);this.refs[u]||await s.call(this,f.$schema),this.refs[u]||this.addSchema(f,u,r)}async function l(u){let f=this._loading[u];if(f)return f;try{return await(this._loading[u]=n(u))}finally{delete this._loading[u]}}}addSchema(t,r,n,i=this.opts.validateSchema){if(Array.isArray(t)){for(let o of t)this.addSchema(o,void 0,n,i);return this}let s;if(typeof t=="object"){let{schemaId:o}=this.opts;if(s=t[o],s!==void 0&&typeof s!="string")throw new Error(`schema ${o} must be string`)}return r=(0,br.normalizeId)(r||s),this._checkUnique(r),this.schemas[r]=this._addSchema(t,n,r,i,!0),this}addMetaSchema(t,r,n=this.opts.validateSchema){return this.addSchema(t,r,!0,n),this}validateSchema(t,r){if(typeof t=="boolean")return!0;let n;if(n=t.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let i=this.validate(n,t);if(!i&&r){let s="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(s);else throw new Error(s)}return i}getSchema(t){let r;for(;typeof(r=_c.call(this,t))=="string";)t=r;if(r===void 0){let{schemaId:n}=this.opts,i=new Sr.SchemaEnv({schema:{},schemaId:n});if(r=Sr.resolveSchema.call(this,i,t),!r)return;this.refs[t]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(t){if(t instanceof RegExp)return this._removeAllSchemas(this.schemas,t),this._removeAllSchemas(this.refs,t),this;switch(typeof t){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=_c.call(this,t);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[t],delete this.refs[t],this}case"object":{let r=t;this._cache.delete(r);let n=t[this.opts.schemaId];return n&&(n=(0,br.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(t){for(let r of t)this.addKeyword(r);return this}addKeyword(t,r){let n;if(typeof t=="string")n=t,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof t=="object"&&r===void 0){if(r=t,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Dm.call(this,n,r),!r)return(0,as.eachItem)(n,s=>os.call(this,s)),this;Wm.call(this,r);let i={...r,type:(0,pn.getJSONTypes)(r.type),schemaType:(0,pn.getJSONTypes)(r.schemaType)};return(0,as.eachItem)(n,i.type.length===0?s=>os.call(this,s,i):s=>i.type.forEach(o=>os.call(this,s,i,o))),this}getKeyword(t){let r=this.RULES.all[t];return typeof r=="object"?r.definition:!!r}removeKeyword(t){let{RULES:r}=this;delete r.keywords[t],delete r.all[t];for(let n of r.rules){let i=n.rules.findIndex(s=>s.keyword===t);i>=0&&n.rules.splice(i,1)}return this}addFormat(t,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[t]=r,this}errorsText(t=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!t||t.length===0?"No errors":t.map(i=>`${n}${i.instancePath} ${i.message}`).reduce((i,s)=>i+r+s)}$dataMetaSchema(t,r){let n=this.RULES.all;t=JSON.parse(JSON.stringify(t));for(let i of r){let s=i.split("/").slice(1),o=t;for(let a of s)o=o[a];for(let a in n){let c=n[a];if(typeof c!="object")continue;let{$data:l}=c.definition,u=o[a];l&&u&&(o[a]=Sc(u))}}return t}_removeAllSchemas(t,r){for(let n in t){let i=t[n];(!r||r.test(n))&&(typeof i=="string"?delete t[n]:i&&!i.meta&&(this._cache.delete(i.schema),delete t[n]))}}_addSchema(t,r,n,i=this.opts.validateSchema,s=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof t=="object")o=t[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof t!="boolean")throw new Error("schema must be object or boolean")}let c=this._cache.get(t);if(c!==void 0)return c;n=(0,br.normalizeId)(o||n);let l=br.getSchemaRefs.call(this,t,n);return c=new Sr.SchemaEnv({schema:t,schemaId:a,meta:r,baseId:n,localRefs:l}),this._cache.set(c.schema,c),s&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=c),i&&this.validateSchema(t,!0),c}_checkUnique(t){if(this.schemas[t]||this.refs[t])throw new Error(`schema with key or id "${t}" already exists`)}_compileSchemaEnv(t){if(t.meta?this._compileMetaSchema(t):Sr.compileSchema.call(this,t),!t.validate)throw new Error("ajv implementation error");return t.validate}_compileMetaSchema(t){let r=this.opts;this.opts=this._metaOpts;try{Sr.compileSchema.call(this,t)}finally{this.opts=r}}};$r.ValidationError=bm.default;$r.MissingRefError=wc.default;le.default=$r;function vc(e,t,r,n="error"){for(let i in e){let s=i;s in t&&this.logger[n](`${r}: option ${i}. ${e[s]}`)}}function _c(e){return e=(0,br.normalizeId)(e),this.schemas[e]||this.refs[e]}function Nm(){let e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(let t in e)this.addSchema(e[t],t)}function km(){for(let e in this.opts.formats){let t=this.opts.formats[e];t&&this.addFormat(e,t)}}function Im(e){if(Array.isArray(e)){this.addVocabulary(e);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let t in e){let r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}function Mm(){let e={...this.opts};for(let t of Rm)delete e[t];return e}var Fm={log(){},warn(){},error(){}};function qm(e){if(e===!1)return Fm;if(e===void 0)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}var jm=/^[a-z_$][a-z0-9_$:-]*$/i;function Dm(e,t){let{RULES:r}=this;if((0,as.eachItem)(e,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!jm.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!t&&t.$data&&!("code"in t||"validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function os(e,t,r){var n;let i=t?.post;if(r&&i)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:s}=this,o=i?s.post:s.rules.find(({type:c})=>c===r);if(o||(o={type:r,rules:[]},s.rules.push(o)),s.keywords[e]=!0,!t)return;let a={keyword:e,definition:{...t,type:(0,pn.getJSONTypes)(t.type),schemaType:(0,pn.getJSONTypes)(t.schemaType)}};t.before?Lm.call(this,o,a,t.before):o.rules.push(a),s.all[e]=a,(n=t.implements)===null||n===void 0||n.forEach(c=>this.addKeyword(c))}function Lm(e,t,r){let n=e.rules.findIndex(i=>i.keyword===r);n>=0?e.rules.splice(n,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function Wm(e){let{metaSchema:t}=e;t!==void 0&&(e.$data&&this.opts.$data&&(t=Sc(t)),e.validateSchema=this.compile(t,!0))}var Um={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Sc(e){return{anyOf:[e,Um]}}});var $c=v(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});var Km={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};cs.default=Km});var Tc=v(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.callRef=wt.getValidate=void 0;var Vm=wr(),Ac=Oe(),Ae=M(),Ut=Ye(),xc=ln(),mn=V(),Hm={keyword:"$ref",schemaType:"string",code(e){let{gen:t,schema:r,it:n}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:c}=n,{root:l}=s;if((r==="#"||r==="#/")&&i===l.baseId)return f();let u=xc.resolveRef.call(c,l,i,r);if(u===void 0)throw new Vm.default(n.opts.uriResolver,i,r);if(u instanceof xc.SchemaEnv)return m(u);return p(u);function f(){if(s===l)return gn(e,o,s,s.$async);let h=t.scopeValue("root",{ref:l});return gn(e,(0,Ae._)`${h}.validate`,l,l.$async)}function m(h){let g=Rc(e,h);gn(e,g,h,h.$async)}function p(h){let g=t.scopeValue("schema",a.code.source===!0?{ref:h,code:(0,Ae.stringify)(h)}:{ref:h}),d=t.name("valid"),y=e.subschema({schema:h,dataTypes:[],schemaPath:Ae.nil,topSchemaRef:g,errSchemaPath:r},d);e.mergeEvaluated(y),e.ok(d)}}};function Rc(e,t){let{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,Ae._)`${r.scopeValue("wrapper",{ref:t})}.validate`}wt.getValidate=Rc;function gn(e,t,r,n){let{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:c}=s,l=c.passContext?Ut.default.this:Ae.nil;n?u():f();function u(){if(!a.$async)throw new Error("async schema referenced by sync schema");let h=i.let("valid");i.try(()=>{i.code((0,Ae._)`await ${(0,Ac.callValidateCode)(e,t,l)}`),p(t),o||i.assign(h,!0)},g=>{i.if((0,Ae._)`!(${g} instanceof ${s.ValidationError})`,()=>i.throw(g)),m(g),o||i.assign(h,!1)}),e.ok(h)}function f(){e.result((0,Ac.callValidateCode)(e,t,l),()=>p(t),()=>m(t))}function m(h){let g=(0,Ae._)`${h}.errors`;i.assign(Ut.default.vErrors,(0,Ae._)`${Ut.default.vErrors} === null ? ${g} : ${Ut.default.vErrors}.concat(${g})`),i.assign(Ut.default.errors,(0,Ae._)`${Ut.default.vErrors}.length`)}function p(h){var g;if(!s.opts.unevaluated)return;let d=(g=r?.validate)===null||g===void 0?void 0:g.evaluated;if(s.props!==!0)if(d&&!d.dynamicProps)d.props!==void 0&&(s.props=mn.mergeEvaluated.props(i,d.props,s.props));else{let y=i.var("props",(0,Ae._)`${h}.evaluated.props`);s.props=mn.mergeEvaluated.props(i,y,s.props,Ae.Name)}if(s.items!==!0)if(d&&!d.dynamicItems)d.items!==void 0&&(s.items=mn.mergeEvaluated.items(i,d.items,s.items));else{let y=i.var("items",(0,Ae._)`${h}.evaluated.items`);s.items=mn.mergeEvaluated.items(i,y,s.items,Ae.Name)}}}wt.callRef=gn;wt.default=Hm});var Pc=v(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});var zm=$c(),Gm=Tc(),Bm=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",zm.default,Gm.default];us.default=Bm});var Oc=v(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});var yn=M(),ct=yn.operators,vn={maximum:{okStr:"<=",ok:ct.LTE,fail:ct.GT},minimum:{okStr:">=",ok:ct.GTE,fail:ct.LT},exclusiveMaximum:{okStr:"<",ok:ct.LT,fail:ct.GTE},exclusiveMinimum:{okStr:">",ok:ct.GT,fail:ct.LTE}},Ym={message:({keyword:e,schemaCode:t})=>(0,yn.str)`must be ${vn[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,yn._)`{comparison: ${vn[e].okStr}, limit: ${t}}`},Jm={keyword:Object.keys(vn),type:"number",schemaType:"number",$data:!0,error:Ym,code(e){let{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,yn._)`${r} ${vn[t].fail} ${n} || isNaN(${r})`)}};ls.default=Jm});var Cc=v(fs=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});var Ar=M(),Qm={message:({schemaCode:e})=>(0,Ar.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Ar._)`{multipleOf: ${e}}`},Xm={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Qm,code(e){let{gen:t,data:r,schemaCode:n,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,Ar._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,Ar._)`${o} !== parseInt(${o})`;e.fail$data((0,Ar._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};fs.default=Xm});var kc=v(ds=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});function Nc(e){let t=e.length,r=0,n=0,i;for(;n<t;)r++,i=e.charCodeAt(n++),i>=55296&&i<=56319&&n<t&&(i=e.charCodeAt(n),(i&64512)===56320&&n++);return r}ds.default=Nc;Nc.code='require("ajv/dist/runtime/ucs2length").default'});var Ic=v(hs=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});var Et=M(),Zm=V(),eg=kc(),tg={message({keyword:e,schemaCode:t}){let r=e==="maxLength"?"more":"fewer";return(0,Et.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,Et._)`{limit: ${e}}`},rg={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:tg,code(e){let{keyword:t,data:r,schemaCode:n,it:i}=e,s=t==="maxLength"?Et.operators.GT:Et.operators.LT,o=i.opts.unicode===!1?(0,Et._)`${r}.length`:(0,Et._)`${(0,Zm.useFunc)(e.gen,eg.default)}(${r})`;e.fail$data((0,Et._)`${o} ${s} ${n}`)}};hs.default=rg});var Mc=v(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});var ng=Oe(),_n=M(),ig={message:({schemaCode:e})=>(0,_n.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,_n._)`{pattern: ${e}}`},sg={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:ig,code(e){let{data:t,$data:r,schema:n,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=r?(0,_n._)`(new RegExp(${i}, ${o}))`:(0,ng.usePattern)(e,n);e.fail$data((0,_n._)`!${a}.test(${t})`)}};ps.default=sg});var Fc=v(ms=>{"use strict";Object.defineProperty(ms,"__esModule",{value:!0});var xr=M(),og={message({keyword:e,schemaCode:t}){let r=e==="maxProperties"?"more":"fewer";return(0,xr.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,xr._)`{limit: ${e}}`},ag={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:og,code(e){let{keyword:t,data:r,schemaCode:n}=e,i=t==="maxProperties"?xr.operators.GT:xr.operators.LT;e.fail$data((0,xr._)`Object.keys(${r}).length ${i} ${n}`)}};ms.default=ag});var qc=v(gs=>{"use strict";Object.defineProperty(gs,"__esModule",{value:!0});var Rr=Oe(),Tr=M(),cg=V(),ug={message:({params:{missingProperty:e}})=>(0,Tr.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Tr._)`{missingProperty: ${e}}`},lg={keyword:"required",type:"object",schemaType:"array",$data:!0,error:ug,code(e){let{gen:t,schema:r,schemaCode:n,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&r.length===0)return;let c=r.length>=a.loopRequired;if(o.allErrors?l():u(),a.strictRequired){let p=e.parentSchema.properties,{definedProperties:h}=e.it;for(let g of r)if(p?.[g]===void 0&&!h.has(g)){let d=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${g}" is not defined at "${d}" (strictRequired)`;(0,cg.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(c||s)e.block$data(Tr.nil,f);else for(let p of r)(0,Rr.checkReportMissingProp)(e,p)}function u(){let p=t.let("missing");if(c||s){let h=t.let("valid",!0);e.block$data(h,()=>m(p,h)),e.ok(h)}else t.if((0,Rr.checkMissingProp)(e,r,p)),(0,Rr.reportMissingProp)(e,p),t.else()}function f(){t.forOf("prop",n,p=>{e.setParams({missingProperty:p}),t.if((0,Rr.noPropertyInData)(t,i,p,a.ownProperties),()=>e.error())})}function m(p,h){e.setParams({missingProperty:p}),t.forOf(p,n,()=>{t.assign(h,(0,Rr.propertyInData)(t,i,p,a.ownProperties)),t.if((0,Tr.not)(h),()=>{e.error(),t.break()})},Tr.nil)}}};gs.default=lg});var jc=v(ys=>{"use strict";Object.defineProperty(ys,"__esModule",{value:!0});var Pr=M(),fg={message({keyword:e,schemaCode:t}){let r=e==="maxItems"?"more":"fewer";return(0,Pr.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,Pr._)`{limit: ${e}}`},dg={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:fg,code(e){let{keyword:t,data:r,schemaCode:n}=e,i=t==="maxItems"?Pr.operators.GT:Pr.operators.LT;e.fail$data((0,Pr._)`${r}.length ${i} ${n}`)}};ys.default=dg});var wn=v(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});var Dc=Ki();Dc.code='require("ajv/dist/runtime/equal").default';vs.default=Dc});var Lc=v(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});var _s=mr(),fe=M(),hg=V(),pg=wn(),mg={message:({params:{i:e,j:t}})=>(0,fe.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,fe._)`{i: ${e}, j: ${t}}`},gg={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:mg,code(e){let{gen:t,data:r,$data:n,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!n&&!i)return;let c=t.let("valid"),l=s.items?(0,_s.getSchemaTypes)(s.items):[];e.block$data(c,u,(0,fe._)`${o} === false`),e.ok(c);function u(){let h=t.let("i",(0,fe._)`${r}.length`),g=t.let("j");e.setParams({i:h,j:g}),t.assign(c,!0),t.if((0,fe._)`${h} > 1`,()=>(f()?m:p)(h,g))}function f(){return l.length>0&&!l.some(h=>h==="object"||h==="array")}function m(h,g){let d=t.name("item"),y=(0,_s.checkDataTypes)(l,d,a.opts.strictNumbers,_s.DataType.Wrong),w=t.const("indices",(0,fe._)`{}`);t.for((0,fe._)`;${h}--;`,()=>{t.let(d,(0,fe._)`${r}[${h}]`),t.if(y,(0,fe._)`continue`),l.length>1&&t.if((0,fe._)`typeof ${d} == "string"`,(0,fe._)`${d} += "_"`),t.if((0,fe._)`typeof ${w}[${d}] == "number"`,()=>{t.assign(g,(0,fe._)`${w}[${d}]`),e.error(),t.assign(c,!1).break()}).code((0,fe._)`${w}[${d}] = ${h}`)})}function p(h,g){let d=(0,hg.useFunc)(t,pg.default),y=t.name("outer");t.label(y).for((0,fe._)`;${h}--;`,()=>t.for((0,fe._)`${g} = ${h}; ${g}--;`,()=>t.if((0,fe._)`${d}(${r}[${h}], ${r}[${g}])`,()=>{e.error(),t.assign(c,!1).break(y)})))}}};ws.default=gg});var Wc=v(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});var Es=M(),yg=V(),vg=wn(),_g={message:"must be equal to constant",params:({schemaCode:e})=>(0,Es._)`{allowedValue: ${e}}`},wg={keyword:"const",$data:!0,error:_g,code(e){let{gen:t,data:r,$data:n,schemaCode:i,schema:s}=e;n||s&&typeof s=="object"?e.fail$data((0,Es._)`!${(0,yg.useFunc)(t,vg.default)}(${r}, ${i})`):e.fail((0,Es._)`${s} !== ${r}`)}};Ss.default=wg});var Uc=v(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});var Or=M(),Eg=V(),Sg=wn(),bg={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,Or._)`{allowedValues: ${e}}`},$g={keyword:"enum",schemaType:"array",$data:!0,error:bg,code(e){let{gen:t,data:r,$data:n,schema:i,schemaCode:s,it:o}=e;if(!n&&i.length===0)throw new Error("enum must have non-empty array");let a=i.length>=o.opts.loopEnum,c,l=()=>c??(c=(0,Eg.useFunc)(t,Sg.default)),u;if(a||n)u=t.let("valid"),e.block$data(u,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");let p=t.const("vSchema",s);u=(0,Or.or)(...i.map((h,g)=>m(p,g)))}e.pass(u);function f(){t.assign(u,!1),t.forOf("v",s,p=>t.if((0,Or._)`${l()}(${r}, ${p})`,()=>t.assign(u,!0).break()))}function m(p,h){let g=i[h];return typeof g=="object"&&g!==null?(0,Or._)`${l()}(${r}, ${p}[${h}])`:(0,Or._)`${r} === ${g}`}}};bs.default=$g});var Kc=v($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});var Ag=Oc(),xg=Cc(),Rg=Ic(),Tg=Mc(),Pg=Fc(),Og=qc(),Cg=jc(),Ng=Lc(),kg=Wc(),Ig=Uc(),Mg=[Ag.default,xg.default,Rg.default,Tg.default,Pg.default,Og.default,Cg.default,Ng.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},kg.default,Ig.default];$s.default=Mg});var xs=v(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.validateAdditionalItems=void 0;var St=M(),As=V(),Fg={message:({params:{len:e}})=>(0,St.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,St._)`{limit: ${e}}`},qg={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Fg,code(e){let{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,As.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Vc(e,n)}};function Vc(e,t){let{gen:r,schema:n,data:i,keyword:s,it:o}=e;o.items=!0;let a=r.const("len",(0,St._)`${i}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,St._)`${a} <= ${t.length}`);else if(typeof n=="object"&&!(0,As.alwaysValidSchema)(o,n)){let l=r.var("valid",(0,St._)`${a} <= ${t.length}`);r.if((0,St.not)(l),()=>c(l)),e.ok(l)}function c(l){r.forRange("i",t.length,a,u=>{e.subschema({keyword:s,dataProp:u,dataPropType:As.Type.Num},l),o.allErrors||r.if((0,St.not)(l),()=>r.break())})}}Cr.validateAdditionalItems=Vc;Cr.default=qg});var Rs=v(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});Nr.validateTuple=void 0;var Hc=M(),En=V(),jg=Oe(),Dg={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){let{schema:t,it:r}=e;if(Array.isArray(t))return zc(e,"additionalItems",t);r.items=!0,!(0,En.alwaysValidSchema)(r,t)&&e.ok((0,jg.validateArray)(e))}};function zc(e,t,r=e.schema){let{gen:n,parentSchema:i,data:s,keyword:o,it:a}=e;u(i),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=En.mergeEvaluated.items(n,r.length,a.items));let c=n.name("valid"),l=n.const("len",(0,Hc._)`${s}.length`);r.forEach((f,m)=>{(0,En.alwaysValidSchema)(a,f)||(n.if((0,Hc._)`${l} > ${m}`,()=>e.subschema({keyword:o,schemaProp:m,dataProp:m},c)),e.ok(c))});function u(f){let{opts:m,errSchemaPath:p}=a,h=r.length,g=h===f.minItems&&(h===f.maxItems||f[t]===!1);if(m.strictTuples&&!g){let d=`"${o}" is ${h}-tuple, but minItems or maxItems/${t} are not specified or different at path "${p}"`;(0,En.checkStrictMode)(a,d,m.strictTuples)}}}Nr.validateTuple=zc;Nr.default=Dg});var Gc=v(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});var Lg=Rs(),Wg={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Lg.validateTuple)(e,"items")};Ts.default=Wg});var Yc=v(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});var Bc=M(),Ug=V(),Kg=Oe(),Vg=xs(),Hg={message:({params:{len:e}})=>(0,Bc.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Bc._)`{limit: ${e}}`},zg={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Hg,code(e){let{schema:t,parentSchema:r,it:n}=e,{prefixItems:i}=r;n.items=!0,!(0,Ug.alwaysValidSchema)(n,t)&&(i?(0,Vg.validateAdditionalItems)(e,i):e.ok((0,Kg.validateArray)(e)))}};Ps.default=zg});var Jc=v(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});var Ne=M(),Sn=V(),Gg={message:({params:{min:e,max:t}})=>t===void 0?(0,Ne.str)`must contain at least ${e} valid item(s)`:(0,Ne.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Ne._)`{minContains: ${e}}`:(0,Ne._)`{minContains: ${e}, maxContains: ${t}}`},Bg={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Gg,code(e){let{gen:t,schema:r,parentSchema:n,data:i,it:s}=e,o,a,{minContains:c,maxContains:l}=n;s.opts.next?(o=c===void 0?1:c,a=l):o=1;let u=t.const("len",(0,Ne._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,Sn.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,Sn.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,Sn.alwaysValidSchema)(s,r)){let g=(0,Ne._)`${u} >= ${o}`;a!==void 0&&(g=(0,Ne._)`${g} && ${u} <= ${a}`),e.pass(g);return}s.items=!0;let f=t.name("valid");a===void 0&&o===1?p(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,Ne._)`${i}.length > 0`,m)):(t.let(f,!1),m()),e.result(f,()=>e.reset());function m(){let g=t.name("_valid"),d=t.let("count",0);p(g,()=>t.if(g,()=>h(d)))}function p(g,d){t.forRange("i",0,u,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:Sn.Type.Num,compositeRule:!0},g),d()})}function h(g){t.code((0,Ne._)`${g}++`),a===void 0?t.if((0,Ne._)`${g} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,Ne._)`${g} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,Ne._)`${g} >= ${o}`,()=>t.assign(f,!0)))}}};Os.default=Bg});var Zc=v(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.validateSchemaDeps=Ke.validatePropertyDeps=Ke.error=void 0;var Cs=M(),Yg=V(),kr=Oe();Ke.error={message:({params:{property:e,depsCount:t,deps:r}})=>{let n=t===1?"property":"properties";return(0,Cs.str)`must have ${n} ${r} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:r,missingProperty:n}})=>(0,Cs._)`{property: ${e},
    missingProperty: ${n},
    depsCount: ${t},
    deps: ${r}}`};var Jg={keyword:"dependencies",type:"object",schemaType:"object",error:Ke.error,code(e){let[t,r]=Qg(e);Qc(e,t),Xc(e,r)}};function Qg({schema:e}){let t={},r={};for(let n in e){if(n==="__proto__")continue;let i=Array.isArray(e[n])?t:r;i[n]=e[n]}return[t,r]}function Qc(e,t=e.schema){let{gen:r,data:n,it:i}=e;if(Object.keys(t).length===0)return;let s=r.let("missing");for(let o in t){let a=t[o];if(a.length===0)continue;let c=(0,kr.propertyInData)(r,n,o,i.opts.ownProperties);e.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),i.allErrors?r.if(c,()=>{for(let l of a)(0,kr.checkReportMissingProp)(e,l)}):(r.if((0,Cs._)`${c} && (${(0,kr.checkMissingProp)(e,a,s)})`),(0,kr.reportMissingProp)(e,s),r.else())}}Ke.validatePropertyDeps=Qc;function Xc(e,t=e.schema){let{gen:r,data:n,keyword:i,it:s}=e,o=r.name("valid");for(let a in t)(0,Yg.alwaysValidSchema)(s,t[a])||(r.if((0,kr.propertyInData)(r,n,a,s.opts.ownProperties),()=>{let c=e.subschema({keyword:i,schemaProp:a},o);e.mergeValidEvaluated(c,o)},()=>r.var(o,!0)),e.ok(o))}Ke.validateSchemaDeps=Xc;Ke.default=Jg});var tu=v(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});var eu=M(),Xg=V(),Zg={message:"property name must be valid",params:({params:e})=>(0,eu._)`{propertyName: ${e.propertyName}}`},ey={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Zg,code(e){let{gen:t,schema:r,data:n,it:i}=e;if((0,Xg.alwaysValidSchema)(i,r))return;let s=t.name("valid");t.forIn("key",n,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,eu.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};Ns.default=ey});var Is=v(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});var bn=Oe(),je=M(),ty=Ye(),$n=V(),ry={message:"must NOT have additional properties",params:({params:e})=>(0,je._)`{additionalProperty: ${e.additionalProperty}}`},ny={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:ry,code(e){let{gen:t,schema:r,parentSchema:n,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");let{allErrors:a,opts:c}=o;if(o.props=!0,c.removeAdditional!=="all"&&(0,$n.alwaysValidSchema)(o,r))return;let l=(0,bn.allSchemaProperties)(n.properties),u=(0,bn.allSchemaProperties)(n.patternProperties);f(),e.ok((0,je._)`${s} === ${ty.default.errors}`);function f(){t.forIn("key",i,d=>{!l.length&&!u.length?h(d):t.if(m(d),()=>h(d))})}function m(d){let y;if(l.length>8){let w=(0,$n.schemaRefOrVal)(o,n.properties,"properties");y=(0,bn.isOwnProperty)(t,w,d)}else l.length?y=(0,je.or)(...l.map(w=>(0,je._)`${d} === ${w}`)):y=je.nil;return u.length&&(y=(0,je.or)(y,...u.map(w=>(0,je._)`${(0,bn.usePattern)(e,w)}.test(${d})`))),(0,je.not)(y)}function p(d){t.code((0,je._)`delete ${i}[${d}]`)}function h(d){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){p(d);return}if(r===!1){e.setParams({additionalProperty:d}),e.error(),a||t.break();return}if(typeof r=="object"&&!(0,$n.alwaysValidSchema)(o,r)){let y=t.name("valid");c.removeAdditional==="failing"?(g(d,y,!1),t.if((0,je.not)(y),()=>{e.reset(),p(d)})):(g(d,y),a||t.if((0,je.not)(y),()=>t.break()))}}function g(d,y,w){let b={keyword:"additionalProperties",dataProp:d,dataPropType:$n.Type.Str};w===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,y)}}};ks.default=ny});var iu=v(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});var iy=_r(),ru=Oe(),Ms=V(),nu=Is(),sy={keyword:"properties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,parentSchema:n,data:i,it:s}=e;s.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&nu.default.code(new iy.KeywordCxt(s,nu.default,"additionalProperties"));let o=(0,ru.allSchemaProperties)(r);for(let f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=Ms.mergeEvaluated.props(t,(0,Ms.toHash)(o),s.props));let a=o.filter(f=>!(0,Ms.alwaysValidSchema)(s,r[f]));if(a.length===0)return;let c=t.name("valid");for(let f of a)l(f)?u(f):(t.if((0,ru.propertyInData)(t,i,f,s.opts.ownProperties)),u(f),s.allErrors||t.else().var(c,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(c);function l(f){return s.opts.useDefaults&&!s.compositeRule&&r[f].default!==void 0}function u(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},c)}}};Fs.default=sy});var cu=v(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});var su=Oe(),An=M(),ou=V(),au=V(),oy={keyword:"patternProperties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,data:n,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,su.allSchemaProperties)(r),c=a.filter(g=>(0,ou.alwaysValidSchema)(s,r[g]));if(a.length===0||c.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;let l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,u=t.name("valid");s.props!==!0&&!(s.props instanceof An.Name)&&(s.props=(0,au.evaluatedPropsToName)(t,s.props));let{props:f}=s;m();function m(){for(let g of a)l&&p(g),s.allErrors?h(g):(t.var(u,!0),h(g),t.if(u))}function p(g){for(let d in l)new RegExp(g).test(d)&&(0,ou.checkStrictMode)(s,`property ${d} matches pattern ${g} (use allowMatchingProperties)`)}function h(g){t.forIn("key",n,d=>{t.if((0,An._)`${(0,su.usePattern)(e,g)}.test(${d})`,()=>{let y=c.includes(g);y||e.subschema({keyword:"patternProperties",schemaProp:g,dataProp:d,dataPropType:au.Type.Str},u),s.opts.unevaluated&&f!==!0?t.assign((0,An._)`${f}[${d}]`,!0):!y&&!s.allErrors&&t.if((0,An.not)(u),()=>t.break())})})}}};qs.default=oy});var uu=v(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});var ay=V(),cy={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){let{gen:t,schema:r,it:n}=e;if((0,ay.alwaysValidSchema)(n,r)){e.fail();return}let i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};js.default=cy});var lu=v(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});var uy=Oe(),ly={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:uy.validateUnion,error:{message:"must match a schema in anyOf"}};Ds.default=ly});var fu=v(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});var xn=M(),fy=V(),dy={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,xn._)`{passingSchemas: ${e.passing}}`},hy={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:dy,code(e){let{gen:t,schema:r,parentSchema:n,it:i}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(i.opts.discriminator&&n.discriminator)return;let s=r,o=t.let("valid",!1),a=t.let("passing",null),c=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((u,f)=>{let m;(0,fy.alwaysValidSchema)(i,u)?t.var(c,!0):m=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},c),f>0&&t.if((0,xn._)`${c} && ${o}`).assign(o,!1).assign(a,(0,xn._)`[${a}, ${f}]`).else(),t.if(c,()=>{t.assign(o,!0),t.assign(a,f),m&&e.mergeEvaluated(m,xn.Name)})})}}};Ls.default=hy});var du=v(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});var py=V(),my={keyword:"allOf",schemaType:"array",code(e){let{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");let i=t.name("valid");r.forEach((s,o)=>{if((0,py.alwaysValidSchema)(n,s))return;let a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};Ws.default=my});var mu=v(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});var Rn=M(),pu=V(),gy={message:({params:e})=>(0,Rn.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,Rn._)`{failingKeyword: ${e.ifClause}}`},yy={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:gy,code(e){let{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,pu.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let i=hu(n,"then"),s=hu(n,"else");if(!i&&!s)return;let o=t.let("valid",!0),a=t.name("_valid");if(c(),e.reset(),i&&s){let u=t.let("ifClause");e.setParams({ifClause:u}),t.if(a,l("then",u),l("else",u))}else i?t.if(a,l("then")):t.if((0,Rn.not)(a),l("else"));e.pass(o,()=>e.error(!0));function c(){let u=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(u)}function l(u,f){return()=>{let m=e.subschema({keyword:u},a);t.assign(o,a),e.mergeValidEvaluated(m,o),f?t.assign(f,(0,Rn._)`${u}`):e.setParams({ifClause:u})}}}};function hu(e,t){let r=e.schema[t];return r!==void 0&&!(0,pu.alwaysValidSchema)(e,r)}Us.default=yy});var gu=v(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});var vy=V(),_y={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,vy.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};Ks.default=_y});var yu=v(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});var wy=xs(),Ey=Gc(),Sy=Rs(),by=Yc(),$y=Jc(),Ay=Zc(),xy=tu(),Ry=Is(),Ty=iu(),Py=cu(),Oy=uu(),Cy=lu(),Ny=fu(),ky=du(),Iy=mu(),My=gu();function Fy(e=!1){let t=[Oy.default,Cy.default,Ny.default,ky.default,Iy.default,My.default,xy.default,Ry.default,Ay.default,Ty.default,Py.default];return e?t.push(Ey.default,by.default):t.push(wy.default,Sy.default),t.push($y.default),t}Vs.default=Fy});var vu=v(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});var oe=M(),qy={message:({schemaCode:e})=>(0,oe.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,oe._)`{format: ${e}}`},jy={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:qy,code(e,t){let{gen:r,data:n,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:c,errSchemaPath:l,schemaEnv:u,self:f}=a;if(!c.validateFormats)return;i?m():p();function m(){let h=r.scopeValue("formats",{ref:f.formats,code:c.code.formats}),g=r.const("fDef",(0,oe._)`${h}[${o}]`),d=r.let("fType"),y=r.let("format");r.if((0,oe._)`typeof ${g} == "object" && !(${g} instanceof RegExp)`,()=>r.assign(d,(0,oe._)`${g}.type || "string"`).assign(y,(0,oe._)`${g}.validate`),()=>r.assign(d,(0,oe._)`"string"`).assign(y,g)),e.fail$data((0,oe.or)(w(),b()));function w(){return c.strictSchema===!1?oe.nil:(0,oe._)`${o} && !${y}`}function b(){let A=u.$async?(0,oe._)`(${g}.async ? await ${y}(${n}) : ${y}(${n}))`:(0,oe._)`${y}(${n})`,E=(0,oe._)`(typeof ${y} == "function" ? ${A} : ${y}.test(${n}))`;return(0,oe._)`${y} && ${y} !== true && ${d} === ${t} && !${E}`}}function p(){let h=f.formats[s];if(!h){w();return}if(h===!0)return;let[g,d,y]=b(h);g===t&&e.pass(A());function w(){if(c.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function b(E){let N=E instanceof RegExp?(0,oe.regexpCode)(E):c.code.formats?(0,oe._)`${c.code.formats}${(0,oe.getProperty)(s)}`:void 0,q=r.scopeValue("formats",{key:s,ref:E,code:N});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,oe._)`${q}.validate`]:["string",E,q]}function A(){if(typeof h=="object"&&!(h instanceof RegExp)&&h.async){if(!u.$async)throw new Error("async format in sync schema");return(0,oe._)`await ${y}(${n})`}return typeof d=="function"?(0,oe._)`${y}(${n})`:(0,oe._)`${y}.test(${n})`}}}};Hs.default=jy});var _u=v(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});var Dy=vu(),Ly=[Dy.default];zs.default=Ly});var wu=v(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.contentVocabulary=Kt.metadataVocabulary=void 0;Kt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Kt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var Su=v(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});var Wy=Pc(),Uy=Kc(),Ky=yu(),Vy=_u(),Eu=wu(),Hy=[Wy.default,Uy.default,(0,Ky.default)(),Vy.default,Eu.metadataVocabulary,Eu.contentVocabulary];Gs.default=Hy});var $u=v(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});Tn.DiscrError=void 0;var bu;(function(e){e.Tag="tag",e.Mapping="mapping"})(bu||(Tn.DiscrError=bu={}))});var xu=v(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});var Vt=M(),Bs=$u(),Au=ln(),zy=wr(),Gy=V(),By={message:({params:{discrError:e,tagName:t}})=>e===Bs.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,Vt._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},Yy={keyword:"discriminator",type:"object",schemaType:"object",error:By,code(e){let{gen:t,data:r,schema:n,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let c=t.let("valid",!1),l=t.const("tag",(0,Vt._)`${r}${(0,Vt.getProperty)(a)}`);t.if((0,Vt._)`typeof ${l} == "string"`,()=>u(),()=>e.error(!1,{discrError:Bs.DiscrError.Tag,tag:l,tagName:a})),e.ok(c);function u(){let p=m();t.if(!1);for(let h in p)t.elseIf((0,Vt._)`${l} === ${h}`),t.assign(c,f(p[h]));t.else(),e.error(!1,{discrError:Bs.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(p){let h=t.name("valid"),g=e.subschema({keyword:"oneOf",schemaProp:p},h);return e.mergeEvaluated(g,Vt.Name),h}function m(){var p;let h={},g=y(i),d=!0;for(let A=0;A<o.length;A++){let E=o[A];if(E?.$ref&&!(0,Gy.schemaHasRulesButRef)(E,s.self.RULES)){let q=E.$ref;if(E=Au.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,q),E instanceof Au.SchemaEnv&&(E=E.schema),E===void 0)throw new zy.default(s.opts.uriResolver,s.baseId,q)}let N=(p=E?.properties)===null||p===void 0?void 0:p[a];if(typeof N!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);d=d&&(g||y(E)),w(N,A)}if(!d)throw new Error(`discriminator: "${a}" must be required`);return h;function y({required:A}){return Array.isArray(A)&&A.includes(a)}function w(A,E){if(A.const)b(A.const,E);else if(A.enum)for(let N of A.enum)b(N,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(A,E){if(typeof A!="string"||A in h)throw new Error(`discriminator: "${a}" values must be unique strings`);h[A]=E}}}};Ys.default=Yy});var Ru=v((SS,Jy)=>{Jy.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var Pu=v((X,Js)=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.MissingRefError=X.ValidationError=X.CodeGen=X.Name=X.nil=X.stringify=X.str=X._=X.KeywordCxt=X.Ajv=void 0;var Qy=bc(),Xy=Su(),Zy=xu(),Tu=Ru(),e0=["/properties"],Pn="http://json-schema.org/draft-07/schema",Ht=class extends Qy.default{_addVocabularies(){super._addVocabularies(),Xy.default.forEach(t=>this.addVocabulary(t)),this.opts.discriminator&&this.addKeyword(Zy.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let t=this.opts.$data?this.$dataMetaSchema(Tu,e0):Tu;this.addMetaSchema(t,Pn,!1),this.refs["http://json-schema.org/schema"]=Pn}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Pn)?Pn:void 0)}};X.Ajv=Ht;Js.exports=X=Ht;Js.exports.Ajv=Ht;Object.defineProperty(X,"__esModule",{value:!0});X.default=Ht;var t0=_r();Object.defineProperty(X,"KeywordCxt",{enumerable:!0,get:function(){return t0.KeywordCxt}});var zt=M();Object.defineProperty(X,"_",{enumerable:!0,get:function(){return zt._}});Object.defineProperty(X,"str",{enumerable:!0,get:function(){return zt.str}});Object.defineProperty(X,"stringify",{enumerable:!0,get:function(){return zt.stringify}});Object.defineProperty(X,"nil",{enumerable:!0,get:function(){return zt.nil}});Object.defineProperty(X,"Name",{enumerable:!0,get:function(){return zt.Name}});Object.defineProperty(X,"CodeGen",{enumerable:!0,get:function(){return zt.CodeGen}});var r0=cn();Object.defineProperty(X,"ValidationError",{enumerable:!0,get:function(){return r0.default}});var n0=wr();Object.defineProperty(X,"MissingRefError",{enumerable:!0,get:function(){return n0.default}})});var $t=v((bS,bt)=>{"use strict";function Ou(e){return typeof e>"u"||e===null}function i0(e){return typeof e=="object"&&e!==null}function s0(e){return Array.isArray(e)?e:Ou(e)?[]:[e]}function o0(e,t){var r,n,i,s;if(t)for(s=Object.keys(t),r=0,n=s.length;r<n;r+=1)i=s[r],e[i]=t[i];return e}function a0(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function c0(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}bt.exports.isNothing=Ou;bt.exports.isObject=i0;bt.exports.toArray=s0;bt.exports.repeat=a0;bt.exports.isNegativeZero=c0;bt.exports.extend=o0});var Gt=v(($S,Cu)=>{"use strict";function Ir(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Ir.prototype=Object.create(Error.prototype);Ir.prototype.constructor=Ir;Ir.prototype.toString=function(t){var r=this.name+": ";return r+=this.reason||"(unknown reason)",!t&&this.mark&&(r+=" "+this.mark.toString()),r};Cu.exports=Ir});var Iu=v((AS,ku)=>{"use strict";var Nu=$t();function Qs(e,t,r,n,i){this.name=e,this.buffer=t,this.position=r,this.line=n,this.column=i}Qs.prototype.getSnippet=function(t,r){var n,i,s,o,a;if(!this.buffer)return null;for(t=t||4,r=r||75,n="",i=this.position;i>0&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(i-1))===-1;)if(i-=1,this.position-i>r/2-1){n=" ... ",i+=5;break}for(s="",o=this.position;o<this.buffer.length&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(o))===-1;)if(o+=1,o-this.position>r/2-1){s=" ... ",o-=5;break}return a=this.buffer.slice(i,o),Nu.repeat(" ",t)+n+a+s+`
`+Nu.repeat(" ",t+this.position-i+n.length)+"^"};Qs.prototype.toString=function(t){var r,n="";return this.name&&(n+='in "'+this.name+'" '),n+="at line "+(this.line+1)+", column "+(this.column+1),t||(r=this.getSnippet(),r&&(n+=`:
`+r)),n};ku.exports=Qs});var ue=v((xS,Fu)=>{"use strict";var Mu=Gt(),u0=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],l0=["scalar","sequence","mapping"];function f0(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function d0(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(u0.indexOf(r)===-1)throw new Mu('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=f0(t.styleAliases||null),l0.indexOf(this.kind)===-1)throw new Mu('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}Fu.exports=d0});var At=v((RS,ju)=>{"use strict";var qu=$t(),On=Gt(),h0=ue();function Xs(e,t,r){var n=[];return e.include.forEach(function(i){r=Xs(i,t,r)}),e[t].forEach(function(i){r.forEach(function(s,o){s.tag===i.tag&&s.kind===i.kind&&n.push(o)}),r.push(i)}),r.filter(function(i,s){return n.indexOf(s)===-1})}function p0(){var e={scalar:{},sequence:{},mapping:{},fallback:{}},t,r;function n(i){e[i.kind][i.tag]=e.fallback[i.tag]=i}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function Bt(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach(function(t){if(t.loadKind&&t.loadKind!=="scalar")throw new On("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=Xs(this,"implicit",[]),this.compiledExplicit=Xs(this,"explicit",[]),this.compiledTypeMap=p0(this.compiledImplicit,this.compiledExplicit)}Bt.DEFAULT=null;Bt.create=function(){var t,r;switch(arguments.length){case 1:t=Bt.DEFAULT,r=arguments[0];break;case 2:t=arguments[0],r=arguments[1];break;default:throw new On("Wrong number of arguments for Schema.create function")}if(t=qu.toArray(t),r=qu.toArray(r),!t.every(function(n){return n instanceof Bt}))throw new On("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!r.every(function(n){return n instanceof h0}))throw new On("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new Bt({include:t,explicit:r})};ju.exports=Bt});var Lu=v((TS,Du)=>{"use strict";var m0=ue();Du.exports=new m0("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}})});var Uu=v((PS,Wu)=>{"use strict";var g0=ue();Wu.exports=new g0("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}})});var Vu=v((OS,Ku)=>{"use strict";var y0=ue();Ku.exports=new y0("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}})});var Cn=v((CS,Hu)=>{"use strict";var v0=At();Hu.exports=new v0({explicit:[Lu(),Uu(),Vu()]})});var Gu=v((NS,zu)=>{"use strict";var _0=ue();function w0(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function E0(){return null}function S0(e){return e===null}zu.exports=new _0("tag:yaml.org,2002:null",{kind:"scalar",resolve:w0,construct:E0,predicate:S0,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})});var Yu=v((kS,Bu)=>{"use strict";var b0=ue();function $0(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function A0(e){return e==="true"||e==="True"||e==="TRUE"}function x0(e){return Object.prototype.toString.call(e)==="[object Boolean]"}Bu.exports=new b0("tag:yaml.org,2002:bool",{kind:"scalar",resolve:$0,construct:A0,predicate:x0,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})});var Qu=v((IS,Ju)=>{"use strict";var R0=$t(),T0=ue();function P0(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function O0(e){return 48<=e&&e<=55}function C0(e){return 48<=e&&e<=57}function N0(e){if(e===null)return!1;var t=e.length,r=0,n=!1,i;if(!t)return!1;if(i=e[r],(i==="-"||i==="+")&&(i=e[++r]),i==="0"){if(r+1===t)return!0;if(i=e[++r],i==="b"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<t;r++)if(i=e[r],i!=="_"){if(!P0(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}for(;r<t;r++)if(i=e[r],i!=="_"){if(!O0(e.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="_")return!1;for(;r<t;r++)if(i=e[r],i!=="_"){if(i===":")break;if(!C0(e.charCodeAt(r)))return!1;n=!0}return!n||i==="_"?!1:i!==":"?!0:/^(:[0-5]?[0-9])+$/.test(e.slice(r))}function k0(e){var t=e,r=1,n,i,s=[];return t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0"?0:n==="0"?t[1]==="b"?r*parseInt(t.slice(2),2):t[1]==="x"?r*parseInt(t,16):r*parseInt(t,8):t.indexOf(":")!==-1?(t.split(":").forEach(function(o){s.unshift(parseInt(o,10))}),t=0,i=1,s.forEach(function(o){t+=o*i,i*=60}),r*t):r*parseInt(t,10)}function I0(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!R0.isNegativeZero(e)}Ju.exports=new T0("tag:yaml.org,2002:int",{kind:"scalar",resolve:N0,construct:k0,predicate:I0,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0"+e.toString(8):"-0"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})});var el=v((MS,Zu)=>{"use strict";var Xu=$t(),M0=ue(),F0=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function q0(e){return!(e===null||!F0.test(e)||e[e.length-1]==="_")}function j0(e){var t,r,n,i;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,i=[],"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:t.indexOf(":")>=0?(t.split(":").forEach(function(s){i.unshift(parseFloat(s,10))}),t=0,n=1,i.forEach(function(s){t+=s*n,n*=60}),r*t):r*parseFloat(t,10)}var D0=/^[-+]?[0-9]+e/;function L0(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Xu.isNegativeZero(e))return"-0.0";return r=e.toString(10),D0.test(r)?r.replace("e",".e"):r}function W0(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Xu.isNegativeZero(e))}Zu.exports=new M0("tag:yaml.org,2002:float",{kind:"scalar",resolve:q0,construct:j0,predicate:W0,represent:L0,defaultStyle:"lowercase"})});var Zs=v((FS,tl)=>{"use strict";var U0=At();tl.exports=new U0({include:[Cn()],implicit:[Gu(),Yu(),Qu(),el()]})});var eo=v((qS,rl)=>{"use strict";var K0=At();rl.exports=new K0({include:[Zs()]})});var ol=v((jS,sl)=>{"use strict";var V0=ue(),nl=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),il=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function H0(e){return e===null?!1:nl.exec(e)!==null||il.exec(e)!==null}function z0(e){var t,r,n,i,s,o,a,c=0,l=null,u,f,m;if(t=nl.exec(e),t===null&&(t=il.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(r,n,i));if(s=+t[4],o=+t[5],a=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(u=+t[10],f=+(t[11]||0),l=(u*60+f)*6e4,t[9]==="-"&&(l=-l)),m=new Date(Date.UTC(r,n,i,s,o,a,c)),l&&m.setTime(m.getTime()-l),m}function G0(e){return e.toISOString()}sl.exports=new V0("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:H0,construct:z0,instanceOf:Date,represent:G0})});var cl=v((DS,al)=>{"use strict";var B0=ue();function Y0(e){return e==="<<"||e===null}al.exports=new B0("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Y0})});var fl=v((LS,ll)=>{"use strict";var xt;try{ul=require,xt=ul("buffer").Buffer}catch{}var ul,J0=ue(),to=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Q0(e){if(e===null)return!1;var t,r,n=0,i=e.length,s=to;for(r=0;r<i;r++)if(t=s.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function X0(e){var t,r,n=e.replace(/[\r\n=]/g,""),i=n.length,s=to,o=0,a=[];for(t=0;t<i;t++)t%4===0&&t&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(n.charAt(t));return r=i%4*6,r===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):r===18?(a.push(o>>10&255),a.push(o>>2&255)):r===12&&a.push(o>>4&255),xt?xt.from?xt.from(a):new xt(a):a}function Z0(e){var t="",r=0,n,i,s=e.length,o=to;for(n=0;n<s;n++)n%3===0&&n&&(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]),r=(r<<8)+e[n];return i=s%3,i===0?(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]):i===2?(t+=o[r>>10&63],t+=o[r>>4&63],t+=o[r<<2&63],t+=o[64]):i===1&&(t+=o[r>>2&63],t+=o[r<<4&63],t+=o[64],t+=o[64]),t}function ev(e){return xt&&xt.isBuffer(e)}ll.exports=new J0("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Q0,construct:X0,predicate:ev,represent:Z0})});var hl=v((WS,dl)=>{"use strict";var tv=ue(),rv=Object.prototype.hasOwnProperty,nv=Object.prototype.toString;function iv(e){if(e===null)return!0;var t=[],r,n,i,s,o,a=e;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],o=!1,nv.call(i)!=="[object Object]")return!1;for(s in i)if(rv.call(i,s))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(s)===-1)t.push(s);else return!1}return!0}function sv(e){return e!==null?e:[]}dl.exports=new tv("tag:yaml.org,2002:omap",{kind:"sequence",resolve:iv,construct:sv})});var ml=v((US,pl)=>{"use strict";var ov=ue(),av=Object.prototype.toString;function cv(e){if(e===null)return!0;var t,r,n,i,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1){if(n=o[t],av.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;s[t]=[i[0],n[i[0]]]}return!0}function uv(e){if(e===null)return[];var t,r,n,i,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1)n=o[t],i=Object.keys(n),s[t]=[i[0],n[i[0]]];return s}pl.exports=new ov("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:cv,construct:uv})});var yl=v((KS,gl)=>{"use strict";var lv=ue(),fv=Object.prototype.hasOwnProperty;function dv(e){if(e===null)return!0;var t,r=e;for(t in r)if(fv.call(r,t)&&r[t]!==null)return!1;return!0}function hv(e){return e!==null?e:{}}gl.exports=new lv("tag:yaml.org,2002:set",{kind:"mapping",resolve:dv,construct:hv})});var Yt=v((VS,vl)=>{"use strict";var pv=At();vl.exports=new pv({include:[eo()],implicit:[ol(),cl()],explicit:[fl(),hl(),ml(),yl()]})});var wl=v((HS,_l)=>{"use strict";var mv=ue();function gv(){return!0}function yv(){}function vv(){return""}function _v(e){return typeof e>"u"}_l.exports=new mv("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:gv,construct:yv,predicate:_v,represent:vv})});var Sl=v((zS,El)=>{"use strict";var wv=ue();function Ev(e){if(e===null||e.length===0)return!1;var t=e,r=/\/([gim]*)$/.exec(e),n="";return!(t[0]==="/"&&(r&&(n=r[1]),n.length>3||t[t.length-n.length-1]!=="/"))}function Sv(e){var t=e,r=/\/([gim]*)$/.exec(e),n="";return t[0]==="/"&&(r&&(n=r[1]),t=t.slice(1,t.length-n.length-1)),new RegExp(t,n)}function bv(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}function $v(e){return Object.prototype.toString.call(e)==="[object RegExp]"}El.exports=new wv("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:Ev,construct:Sv,predicate:$v,represent:bv})});var Al=v((GS,$l)=>{"use strict";var Nn;try{bl=require,Nn=bl("esprima")}catch{typeof window<"u"&&(Nn=window.esprima)}var bl,Av=ue();function xv(e){if(e===null)return!1;try{var t="("+e+")",r=Nn.parse(t,{range:!0});return!(r.type!=="Program"||r.body.length!==1||r.body[0].type!=="ExpressionStatement"||r.body[0].expression.type!=="ArrowFunctionExpression"&&r.body[0].expression.type!=="FunctionExpression")}catch{return!1}}function Rv(e){var t="("+e+")",r=Nn.parse(t,{range:!0}),n=[],i;if(r.type!=="Program"||r.body.length!==1||r.body[0].type!=="ExpressionStatement"||r.body[0].expression.type!=="ArrowFunctionExpression"&&r.body[0].expression.type!=="FunctionExpression")throw new Error("Failed to resolve function");return r.body[0].expression.params.forEach(function(s){n.push(s.name)}),i=r.body[0].expression.body.range,r.body[0].expression.body.type==="BlockStatement"?new Function(n,t.slice(i[0]+1,i[1]-1)):new Function(n,"return "+t.slice(i[0],i[1]))}function Tv(e){return e.toString()}function Pv(e){return Object.prototype.toString.call(e)==="[object Function]"}$l.exports=new Av("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:xv,construct:Rv,predicate:Pv,represent:Tv})});var Mr=v((BS,Rl)=>{"use strict";var xl=At();Rl.exports=xl.DEFAULT=new xl({include:[Yt()],explicit:[wl(),Sl(),Al()]})});var zl=v((YS,Fr)=>{"use strict";var Xe=$t(),Il=Gt(),Ov=Iu(),Ml=Yt(),Cv=Mr(),lt=Object.prototype.hasOwnProperty,kn=1,Fl=2,ql=3,In=4,ro=1,Nv=2,Tl=3,kv=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Iv=/[\x85\u2028\u2029]/,Mv=/[,\[\]\{\}]/,jl=/^(?:!|!!|![a-z\-]+!)$/i,Dl=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Pl(e){return Object.prototype.toString.call(e)}function Ve(e){return e===10||e===13}function Tt(e){return e===9||e===32}function xe(e){return e===9||e===32||e===10||e===13}function Jt(e){return e===44||e===91||e===93||e===123||e===125}function Fv(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function qv(e){return e===120?2:e===117?4:e===85?8:0}function jv(e){return 48<=e&&e<=57?e-48:-1}function Ol(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function Dv(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var Ll=new Array(256),Wl=new Array(256);for(Rt=0;Rt<256;Rt++)Ll[Rt]=Ol(Rt)?1:0,Wl[Rt]=Ol(Rt);var Rt;function Lv(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||Cv,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function Ul(e,t){return new Il(t,new Ov(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function T(e,t){throw Ul(e,t)}function Mn(e,t){e.onWarning&&e.onWarning.call(null,Ul(e,t))}var Cl={YAML:function(t,r,n){var i,s,o;t.version!==null&&T(t,"duplication of %YAML directive"),n.length!==1&&T(t,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&T(t,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),o=parseInt(i[2],10),s!==1&&T(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&Mn(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var i,s;n.length!==2&&T(t,"TAG directive accepts exactly two arguments"),i=n[0],s=n[1],jl.test(i)||T(t,"ill-formed tag handle (first argument) of the TAG directive"),lt.call(t.tagMap,i)&&T(t,'there is a previously declared suffix for "'+i+'" tag handle'),Dl.test(s)||T(t,"ill-formed tag prefix (second argument) of the TAG directive"),t.tagMap[i]=s}};function ut(e,t,r,n){var i,s,o,a;if(t<r){if(a=e.input.slice(t,r),n)for(i=0,s=a.length;i<s;i+=1)o=a.charCodeAt(i),o===9||32<=o&&o<=1114111||T(e,"expected valid JSON character");else kv.test(a)&&T(e,"the stream contains non-printable characters");e.result+=a}}function Nl(e,t,r,n){var i,s,o,a;for(Xe.isObject(r)||T(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),o=0,a=i.length;o<a;o+=1)s=i[o],lt.call(t,s)||(t[s]=r[s],n[s]=!0)}function Qt(e,t,r,n,i,s,o,a){var c,l;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),c=0,l=i.length;c<l;c+=1)Array.isArray(i[c])&&T(e,"nested arrays are not supported inside keys"),typeof i=="object"&&Pl(i[c])==="[object Object]"&&(i[c]="[object Object]");if(typeof i=="object"&&Pl(i)==="[object Object]"&&(i="[object Object]"),i=String(i),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,l=s.length;c<l;c+=1)Nl(e,t,s[c],r);else Nl(e,t,s,r);else!e.json&&!lt.call(r,i)&&lt.call(t,i)&&(e.line=o||e.line,e.position=a||e.position,T(e,"duplicated mapping key")),t[i]=s,delete r[i];return t}function no(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):T(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function ae(e,t,r){for(var n=0,i=e.input.charCodeAt(e.position);i!==0;){for(;Tt(i);)i=e.input.charCodeAt(++e.position);if(t&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(Ve(i))for(no(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&Mn(e,"deficient indentation"),n}function Fn(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||xe(r)))}function io(e,t){t===1?e.result+=" ":t>1&&(e.result+=Xe.repeat(`
`,t-1))}function Wv(e,t,r){var n,i,s,o,a,c,l,u,f=e.kind,m=e.result,p;if(p=e.input.charCodeAt(e.position),xe(p)||Jt(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(i=e.input.charCodeAt(e.position+1),xe(i)||r&&Jt(i)))return!1;for(e.kind="scalar",e.result="",s=o=e.position,a=!1;p!==0;){if(p===58){if(i=e.input.charCodeAt(e.position+1),xe(i)||r&&Jt(i))break}else if(p===35){if(n=e.input.charCodeAt(e.position-1),xe(n))break}else{if(e.position===e.lineStart&&Fn(e)||r&&Jt(p))break;if(Ve(p))if(c=e.line,l=e.lineStart,u=e.lineIndent,ae(e,!1,-1),e.lineIndent>=t){a=!0,p=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=c,e.lineStart=l,e.lineIndent=u;break}}a&&(ut(e,s,o,!1),io(e,e.line-c),s=o=e.position,a=!1),Tt(p)||(o=e.position+1),p=e.input.charCodeAt(++e.position)}return ut(e,s,o,!1),e.result?!0:(e.kind=f,e.result=m,!1)}function Uv(e,t){var r,n,i;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(ut(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,i=e.position;else return!0;else Ve(r)?(ut(e,n,i,!0),io(e,ae(e,!1,t)),n=i=e.position):e.position===e.lineStart&&Fn(e)?T(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);T(e,"unexpected end of the stream within a single quoted scalar")}function Kv(e,t){var r,n,i,s,o,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return ut(e,r,e.position,!0),e.position++,!0;if(a===92){if(ut(e,r,e.position,!0),a=e.input.charCodeAt(++e.position),Ve(a))ae(e,!1,t);else if(a<256&&Ll[a])e.result+=Wl[a],e.position++;else if((o=qv(a))>0){for(i=o,s=0;i>0;i--)a=e.input.charCodeAt(++e.position),(o=Fv(a))>=0?s=(s<<4)+o:T(e,"expected hexadecimal character");e.result+=Dv(s),e.position++}else T(e,"unknown escape sequence");r=n=e.position}else Ve(a)?(ut(e,r,n,!0),io(e,ae(e,!1,t)),r=n=e.position):e.position===e.lineStart&&Fn(e)?T(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}T(e,"unexpected end of the stream within a double quoted scalar")}function Vv(e,t){var r=!0,n,i=e.tag,s,o=e.anchor,a,c,l,u,f,m={},p,h,g,d;if(d=e.input.charCodeAt(e.position),d===91)c=93,f=!1,s=[];else if(d===123)c=125,f=!0,s={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),d=e.input.charCodeAt(++e.position);d!==0;){if(ae(e,!0,t),d=e.input.charCodeAt(e.position),d===c)return e.position++,e.tag=i,e.anchor=o,e.kind=f?"mapping":"sequence",e.result=s,!0;r||T(e,"missed comma between flow collection entries"),h=p=g=null,l=u=!1,d===63&&(a=e.input.charCodeAt(e.position+1),xe(a)&&(l=u=!0,e.position++,ae(e,!0,t))),n=e.line,Xt(e,t,kn,!1,!0),h=e.tag,p=e.result,ae(e,!0,t),d=e.input.charCodeAt(e.position),(u||e.line===n)&&d===58&&(l=!0,d=e.input.charCodeAt(++e.position),ae(e,!0,t),Xt(e,t,kn,!1,!0),g=e.result),f?Qt(e,s,m,h,p,g):l?s.push(Qt(e,null,m,h,p,g)):s.push(p),ae(e,!0,t),d=e.input.charCodeAt(e.position),d===44?(r=!0,d=e.input.charCodeAt(++e.position)):r=!1}T(e,"unexpected end of the stream within a flow collection")}function Hv(e,t){var r,n,i=ro,s=!1,o=!1,a=t,c=0,l=!1,u,f;if(f=e.input.charCodeAt(e.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)ro===i?i=f===43?Tl:Nv:T(e,"repeat of a chomping mode identifier");else if((u=jv(f))>=0)u===0?T(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?T(e,"repeat of an indentation width identifier"):(a=t+u-1,o=!0);else break;if(Tt(f)){do f=e.input.charCodeAt(++e.position);while(Tt(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!Ve(f)&&f!==0)}for(;f!==0;){for(no(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!o||e.lineIndent<a)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>a&&(a=e.lineIndent),Ve(f)){c++;continue}if(e.lineIndent<a){i===Tl?e.result+=Xe.repeat(`
`,s?1+c:c):i===ro&&s&&(e.result+=`
`);break}for(n?Tt(f)?(l=!0,e.result+=Xe.repeat(`
`,s?1+c:c)):l?(l=!1,e.result+=Xe.repeat(`
`,c+1)):c===0?s&&(e.result+=" "):e.result+=Xe.repeat(`
`,c):e.result+=Xe.repeat(`
`,s?1+c:c),s=!0,o=!0,c=0,r=e.position;!Ve(f)&&f!==0;)f=e.input.charCodeAt(++e.position);ut(e,r,e.position,!1)}return!0}function kl(e,t){var r,n=e.tag,i=e.anchor,s=[],o,a=!1,c;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),c=e.input.charCodeAt(e.position);c!==0&&!(c!==45||(o=e.input.charCodeAt(e.position+1),!xe(o)));){if(a=!0,e.position++,ae(e,!0,-1)&&e.lineIndent<=t){s.push(null),c=e.input.charCodeAt(e.position);continue}if(r=e.line,Xt(e,t,ql,!1,!0),s.push(e.result),ae(e,!0,-1),c=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&c!==0)T(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=n,e.anchor=i,e.kind="sequence",e.result=s,!0):!1}function zv(e,t,r){var n,i,s,o,a=e.tag,c=e.anchor,l={},u={},f=null,m=null,p=null,h=!1,g=!1,d;for(e.anchor!==null&&(e.anchorMap[e.anchor]=l),d=e.input.charCodeAt(e.position);d!==0;){if(n=e.input.charCodeAt(e.position+1),s=e.line,o=e.position,(d===63||d===58)&&xe(n))d===63?(h&&(Qt(e,l,u,f,m,null),f=m=p=null),g=!0,h=!0,i=!0):h?(h=!1,i=!0):T(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,d=n;else if(Xt(e,r,Fl,!1,!0))if(e.line===s){for(d=e.input.charCodeAt(e.position);Tt(d);)d=e.input.charCodeAt(++e.position);if(d===58)d=e.input.charCodeAt(++e.position),xe(d)||T(e,"a whitespace character is expected after the key-value separator within a block mapping"),h&&(Qt(e,l,u,f,m,null),f=m=p=null),g=!0,h=!1,i=!1,f=e.tag,m=e.result;else if(g)T(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=a,e.anchor=c,!0}else if(g)T(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=a,e.anchor=c,!0;else break;if((e.line===s||e.lineIndent>t)&&(Xt(e,t,In,!0,i)&&(h?m=e.result:p=e.result),h||(Qt(e,l,u,f,m,p,s,o),f=m=p=null),ae(e,!0,-1),d=e.input.charCodeAt(e.position)),e.lineIndent>t&&d!==0)T(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return h&&Qt(e,l,u,f,m,null),g&&(e.tag=a,e.anchor=c,e.kind="mapping",e.result=l),g}function Gv(e){var t,r=!1,n=!1,i,s,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&T(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(r=!0,o=e.input.charCodeAt(++e.position)):o===33?(n=!0,i="!!",o=e.input.charCodeAt(++e.position)):i="!",t=e.position,r){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(s=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):T(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!xe(o);)o===33&&(n?T(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(t-1,e.position+1),jl.test(i)||T(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),Mv.test(s)&&T(e,"tag suffix cannot contain flow indicator characters")}return s&&!Dl.test(s)&&T(e,"tag name cannot contain such characters: "+s),r?e.tag=s:lt.call(e.tagMap,i)?e.tag=e.tagMap[i]+s:i==="!"?e.tag="!"+s:i==="!!"?e.tag="tag:yaml.org,2002:"+s:T(e,'undeclared tag handle "'+i+'"'),!0}function Bv(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&T(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!xe(r)&&!Jt(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&T(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function Yv(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!xe(n)&&!Jt(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&T(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),lt.call(e.anchorMap,r)||T(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],ae(e,!0,-1),!0}function Xt(e,t,r,n,i){var s,o,a,c=1,l=!1,u=!1,f,m,p,h,g;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=o=a=In===r||ql===r,n&&ae(e,!0,-1)&&(l=!0,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)),c===1)for(;Gv(e)||Bv(e);)ae(e,!0,-1)?(l=!0,a=s,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)):a=!1;if(a&&(a=l||i),(c===1||In===r)&&(kn===r||Fl===r?h=t:h=t+1,g=e.position-e.lineStart,c===1?a&&(kl(e,g)||zv(e,g,h))||Vv(e,h)?u=!0:(o&&Hv(e,h)||Uv(e,h)||Kv(e,h)?u=!0:Yv(e)?(u=!0,(e.tag!==null||e.anchor!==null)&&T(e,"alias node should not have any properties")):Wv(e,h,kn===r)&&(u=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):c===0&&(u=a&&kl(e,g))),e.tag!==null&&e.tag!=="!")if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&T(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,m=e.implicitTypes.length;f<m;f+=1)if(p=e.implicitTypes[f],p.resolve(e.result)){e.result=p.construct(e.result),e.tag=p.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else lt.call(e.typeMap[e.kind||"fallback"],e.tag)?(p=e.typeMap[e.kind||"fallback"][e.tag],e.result!==null&&p.kind!==e.kind&&T(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+p.kind+'", not "'+e.kind+'"'),p.resolve(e.result)?(e.result=p.construct(e.result),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):T(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):T(e,"unknown tag !<"+e.tag+">");return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||u}function Jv(e){var t=e.position,r,n,i,s=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};(o=e.input.charCodeAt(e.position))!==0&&(ae(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(s=!0,o=e.input.charCodeAt(++e.position),r=e.position;o!==0&&!xe(o);)o=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),i=[],n.length<1&&T(e,"directive name must not be less than one character in length");o!==0;){for(;Tt(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!Ve(o));break}if(Ve(o))break;for(r=e.position;o!==0&&!xe(o);)o=e.input.charCodeAt(++e.position);i.push(e.input.slice(r,e.position))}o!==0&&no(e),lt.call(Cl,n)?Cl[n](e,n,i):Mn(e,'unknown document directive "'+n+'"')}if(ae(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,ae(e,!0,-1)):s&&T(e,"directives end mark is expected"),Xt(e,e.lineIndent-1,In,!1,!0),ae(e,!0,-1),e.checkLineBreaks&&Iv.test(e.input.slice(t,e.position))&&Mn(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Fn(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,ae(e,!0,-1));return}if(e.position<e.length-1)T(e,"end of the stream or a document separator is expected");else return}function Kl(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new Lv(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,T(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)Jv(r);return r.documents}function Vl(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=Kl(e,r);if(typeof t!="function")return n;for(var i=0,s=n.length;i<s;i+=1)t(n[i])}function Hl(e,t){var r=Kl(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new Il("expected a single document in the stream, but found more")}}function Qv(e,t,r){return typeof t=="object"&&t!==null&&typeof r>"u"&&(r=t,t=null),Vl(e,t,Xe.extend({schema:Ml},r))}function Xv(e,t){return Hl(e,Xe.extend({schema:Ml},t))}Fr.exports.loadAll=Vl;Fr.exports.load=Hl;Fr.exports.safeLoadAll=Qv;Fr.exports.safeLoad=Xv});var gf=v((JS,co)=>{"use strict";var jr=$t(),Dr=Gt(),Zv=Mr(),e_=Yt(),ef=Object.prototype.toString,tf=Object.prototype.hasOwnProperty,t_=9,qr=10,r_=13,n_=32,i_=33,s_=34,rf=35,o_=37,a_=38,c_=39,u_=42,nf=44,l_=45,sf=58,f_=61,d_=62,h_=63,p_=64,of=91,af=93,m_=96,cf=123,g_=124,uf=125,ge={};ge[0]="\\0";ge[7]="\\a";ge[8]="\\b";ge[9]="\\t";ge[10]="\\n";ge[11]="\\v";ge[12]="\\f";ge[13]="\\r";ge[27]="\\e";ge[34]='\\"';ge[92]="\\\\";ge[133]="\\N";ge[160]="\\_";ge[8232]="\\L";ge[8233]="\\P";var y_=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function v_(e,t){var r,n,i,s,o,a,c;if(t===null)return{};for(r={},n=Object.keys(t),i=0,s=n.length;i<s;i+=1)o=n[i],a=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),c=e.compiledTypeMap.fallback[o],c&&tf.call(c.styleAliases,a)&&(a=c.styleAliases[a]),r[o]=a;return r}function Gl(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new Dr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+jr.repeat("0",n-t.length)+t}function __(e){this.schema=e.schema||Zv,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=jr.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=v_(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Bl(e,t){for(var r=jr.repeat(" ",t),n=0,i=-1,s="",o,a=e.length;n<a;)i=e.indexOf(`
`,n),i===-1?(o=e.slice(n),n=a):(o=e.slice(n,i+1),n=i+1),o.length&&o!==`
`&&(s+=r),s+=o;return s}function so(e,t){return`
`+jr.repeat(" ",e.indent*t)}function w_(e,t){var r,n,i;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(i=e.implicitTypes[r],i.resolve(t))return!0;return!1}function ao(e){return e===n_||e===t_}function Zt(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==65279||65536<=e&&e<=1114111}function E_(e){return Zt(e)&&!ao(e)&&e!==65279&&e!==r_&&e!==qr}function Yl(e,t){return Zt(e)&&e!==65279&&e!==nf&&e!==of&&e!==af&&e!==cf&&e!==uf&&e!==sf&&(e!==rf||t&&E_(t))}function S_(e){return Zt(e)&&e!==65279&&!ao(e)&&e!==l_&&e!==h_&&e!==sf&&e!==nf&&e!==of&&e!==af&&e!==cf&&e!==uf&&e!==rf&&e!==a_&&e!==u_&&e!==i_&&e!==g_&&e!==f_&&e!==d_&&e!==c_&&e!==s_&&e!==o_&&e!==p_&&e!==m_}function lf(e){var t=/^\n* /;return t.test(e)}var ff=1,df=2,hf=3,pf=4,qn=5;function b_(e,t,r,n,i){var s,o,a,c=!1,l=!1,u=n!==-1,f=-1,m=S_(e.charCodeAt(0))&&!ao(e.charCodeAt(e.length-1));if(t)for(s=0;s<e.length;s++){if(o=e.charCodeAt(s),!Zt(o))return qn;a=s>0?e.charCodeAt(s-1):null,m=m&&Yl(o,a)}else{for(s=0;s<e.length;s++){if(o=e.charCodeAt(s),o===qr)c=!0,u&&(l=l||s-f-1>n&&e[f+1]!==" ",f=s);else if(!Zt(o))return qn;a=s>0?e.charCodeAt(s-1):null,m=m&&Yl(o,a)}l=l||u&&s-f-1>n&&e[f+1]!==" "}return!c&&!l?m&&!i(e)?ff:df:r>9&&lf(e)?qn:l?pf:hf}function $_(e,t,r,n){e.dump=function(){if(t.length===0)return"''";if(!e.noCompatMode&&y_.indexOf(t)!==-1)return"'"+t+"'";var i=e.indent*Math.max(1,r),s=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-i),o=n||e.flowLevel>-1&&r>=e.flowLevel;function a(c){return w_(e,c)}switch(b_(t,o,e.indent,s,a)){case ff:return t;case df:return"'"+t.replace(/'/g,"''")+"'";case hf:return"|"+Jl(t,e.indent)+Ql(Bl(t,i));case pf:return">"+Jl(t,e.indent)+Ql(Bl(A_(t,s),i));case qn:return'"'+x_(t,s)+'"';default:throw new Dr("impossible error: invalid scalar style")}}()}function Jl(e,t){var r=lf(e)?String(t):"",n=e[e.length-1]===`
`,i=n&&(e[e.length-2]===`
`||e===`
`),s=i?"+":n?"":"-";return r+s+`
`}function Ql(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function A_(e,t){for(var r=/(\n+)([^\n]*)/g,n=function(){var l=e.indexOf(`
`);return l=l!==-1?l:e.length,r.lastIndex=l,Xl(e.slice(0,l),t)}(),i=e[0]===`
`||e[0]===" ",s,o;o=r.exec(e);){var a=o[1],c=o[2];s=c[0]===" ",n+=a+(!i&&!s&&c!==""?`
`:"")+Xl(c,t),i=s}return n}function Xl(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,i=0,s,o=0,a=0,c="";n=r.exec(e);)a=n.index,a-i>t&&(s=o>i?o:a,c+=`
`+e.slice(i,s),i=s+1),o=a;return c+=`
`,e.length-i>t&&o>i?c+=e.slice(i,o)+`
`+e.slice(o+1):c+=e.slice(i),c.slice(1)}function x_(e){for(var t="",r,n,i,s=0;s<e.length;s++){if(r=e.charCodeAt(s),r>=55296&&r<=56319&&(n=e.charCodeAt(s+1),n>=56320&&n<=57343)){t+=Gl((r-55296)*1024+n-56320+65536),s++;continue}i=ge[r],t+=!i&&Zt(r)?e[s]:i||Gl(r)}return t}function R_(e,t,r){var n="",i=e.tag,s,o;for(s=0,o=r.length;s<o;s+=1)Pt(e,t,r[s],!1,!1)&&(s!==0&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=i,e.dump="["+n+"]"}function T_(e,t,r,n){var i="",s=e.tag,o,a;for(o=0,a=r.length;o<a;o+=1)Pt(e,t+1,r[o],!0,!0)&&((!n||o!==0)&&(i+=so(e,t)),e.dump&&qr===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=s,e.dump=i||"[]"}function P_(e,t,r){var n="",i=e.tag,s=Object.keys(r),o,a,c,l,u;for(o=0,a=s.length;o<a;o+=1)u="",o!==0&&(u+=", "),e.condenseFlow&&(u+='"'),c=s[o],l=r[c],Pt(e,t,c,!1,!1)&&(e.dump.length>1024&&(u+="? "),u+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Pt(e,t,l,!1,!1)&&(u+=e.dump,n+=u));e.tag=i,e.dump="{"+n+"}"}function O_(e,t,r,n){var i="",s=e.tag,o=Object.keys(r),a,c,l,u,f,m;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new Dr("sortKeys must be a boolean or a function");for(a=0,c=o.length;a<c;a+=1)m="",(!n||a!==0)&&(m+=so(e,t)),l=o[a],u=r[l],Pt(e,t+1,l,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&qr===e.dump.charCodeAt(0)?m+="?":m+="? "),m+=e.dump,f&&(m+=so(e,t)),Pt(e,t+1,u,!0,f)&&(e.dump&&qr===e.dump.charCodeAt(0)?m+=":":m+=": ",m+=e.dump,i+=m));e.tag=s,e.dump=i||"{}"}function Zl(e,t,r){var n,i,s,o,a,c;for(i=r?e.explicitTypes:e.implicitTypes,s=0,o=i.length;s<o;s+=1)if(a=i[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(e.tag=r?a.tag:"?",a.represent){if(c=e.styleMap[a.tag]||a.defaultStyle,ef.call(a.represent)==="[object Function]")n=a.represent(t,c);else if(tf.call(a.represent,c))n=a.represent[c](t,c);else throw new Dr("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');e.dump=n}return!0}return!1}function Pt(e,t,r,n,i,s){e.tag=null,e.dump=r,Zl(e,r,!1)||Zl(e,r,!0);var o=ef.call(e.dump);n&&(n=e.flowLevel<0||e.flowLevel>t);var a=o==="[object Object]"||o==="[object Array]",c,l;if(a&&(c=e.duplicates.indexOf(r),l=c!==-1),(e.tag!==null&&e.tag!=="?"||l||e.indent!==2&&t>0)&&(i=!1),l&&e.usedDuplicates[c])e.dump="*ref_"+c;else{if(a&&l&&!e.usedDuplicates[c]&&(e.usedDuplicates[c]=!0),o==="[object Object]")n&&Object.keys(e.dump).length!==0?(O_(e,t,e.dump,i),l&&(e.dump="&ref_"+c+e.dump)):(P_(e,t,e.dump),l&&(e.dump="&ref_"+c+" "+e.dump));else if(o==="[object Array]"){var u=e.noArrayIndent&&t>0?t-1:t;n&&e.dump.length!==0?(T_(e,u,e.dump,i),l&&(e.dump="&ref_"+c+e.dump)):(R_(e,u,e.dump),l&&(e.dump="&ref_"+c+" "+e.dump))}else if(o==="[object String]")e.tag!=="?"&&$_(e,e.dump,t,s);else{if(e.skipInvalid)return!1;throw new Dr("unacceptable kind of an object to dump "+o)}e.tag!==null&&e.tag!=="?"&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function C_(e,t){var r=[],n=[],i,s;for(oo(e,r,n),i=0,s=n.length;i<s;i+=1)t.duplicates.push(r[n[i]]);t.usedDuplicates=new Array(s)}function oo(e,t,r){var n,i,s;if(e!==null&&typeof e=="object")if(i=t.indexOf(e),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(t.push(e),Array.isArray(e))for(i=0,s=e.length;i<s;i+=1)oo(e[i],t,r);else for(n=Object.keys(e),i=0,s=n.length;i<s;i+=1)oo(e[n[i]],t,r)}function mf(e,t){t=t||{};var r=new __(t);return r.noRefs||C_(e,r),Pt(r,0,e,!0,!0)?r.dump+`
`:""}function N_(e,t){return mf(e,jr.extend({schema:e_},t))}co.exports.dump=mf;co.exports.safeDump=N_});var vf=v((QS,se)=>{"use strict";var jn=zl(),yf=gf();function Dn(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}se.exports.Type=ue();se.exports.Schema=At();se.exports.FAILSAFE_SCHEMA=Cn();se.exports.JSON_SCHEMA=Zs();se.exports.CORE_SCHEMA=eo();se.exports.DEFAULT_SAFE_SCHEMA=Yt();se.exports.DEFAULT_FULL_SCHEMA=Mr();se.exports.load=jn.load;se.exports.loadAll=jn.loadAll;se.exports.safeLoad=jn.safeLoad;se.exports.safeLoadAll=jn.safeLoadAll;se.exports.dump=yf.dump;se.exports.safeDump=yf.safeDump;se.exports.YAMLException=Gt();se.exports.MINIMAL_SCHEMA=Cn();se.exports.SAFE_SCHEMA=Yt();se.exports.DEFAULT_SCHEMA=Mr();se.exports.scan=Dn("scan");se.exports.parse=Dn("parse");se.exports.compose=Dn("compose");se.exports.addConstructor=Dn("addConstructor")});var uo=v((XS,_f)=>{"use strict";var k_=vf();_f.exports=k_});var Ef=v((ZS,wf)=>{var lo=uo();wf.exports=function(){var t=["scalar","mapping","sequence"];function r(u){var f=u.split("::");return f[f.length-1]}function n(u,f){var m=r(u),p="!"+m,h=u==="Fn::GetAtt"?function(g){return{"Fn::GetAtt":Array.isArray(g)?g:g.split(".")}}:function(g){return d={},d[u]=g,d;var d};return new lo.Type(p,{kind:f,construct:h})}function i(u){return t.map(function(f){return n(u,f)})}var s=function(){for(var u=[],f=0;f<arguments.length;f++)u=u.concat(o(arguments[f]));return u},o=function(u,f){var m=typeof Symbol=="function"&&u[Symbol.iterator];if(!m)return u;var p=m.call(u),h,g=[],d;try{for(;(f===void 0||f-- >0)&&!(h=p.next()).done;)g.push(h.value)}catch(y){d={error:y}}finally{try{h&&!h.done&&(m=p.return)&&m.call(p)}finally{if(d)throw d.error}}return g},a={Ref:{}},c=[];for(var l in a)c.push.apply(c,s(i(l)));return lo.Schema.create(lo.CORE_SCHEMA,c)}});var bf=v((eb,Sf)=>{var ft=require("constants"),I_=process.cwd,Ln=null,M_=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Ln||(Ln=I_.call(process)),Ln};try{process.cwd()}catch{}typeof process.chdir=="function"&&(fo=process.chdir,process.chdir=function(e){Ln=null,fo.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,fo));var fo;Sf.exports=F_;function F_(e){ft.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=s(e.chown),e.fchown=s(e.fchown),e.lchown=s(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=o(e.chownSync),e.fchownSync=o(e.fchownSync),e.lchownSync=o(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=a(e.stat),e.fstat=a(e.fstat),e.lstat=a(e.lstat),e.statSync=c(e.statSync),e.fstatSync=c(e.fstatSync),e.lstatSync=c(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(u,f,m){m&&process.nextTick(m)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(u,f,m,p){p&&process.nextTick(p)},e.lchownSync=function(){}),M_==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(u){function f(m,p,h){var g=Date.now(),d=0;u(m,p,function y(w){if(w&&(w.code==="EACCES"||w.code==="EPERM"||w.code==="EBUSY")&&Date.now()-g<6e4){setTimeout(function(){e.stat(p,function(b,A){b&&b.code==="ENOENT"?u(m,p,y):h(w)})},d),d<100&&(d+=10);return}h&&h(w)})}return Object.setPrototypeOf&&Object.setPrototypeOf(f,u),f}(e.rename)),e.read=typeof e.read!="function"?e.read:function(u){function f(m,p,h,g,d,y){var w;if(y&&typeof y=="function"){var b=0;w=function(A,E,N){if(A&&A.code==="EAGAIN"&&b<10)return b++,u.call(e,m,p,h,g,d,w);y.apply(this,arguments)}}return u.call(e,m,p,h,g,d,w)}return Object.setPrototypeOf&&Object.setPrototypeOf(f,u),f}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(u){return function(f,m,p,h,g){for(var d=0;;)try{return u.call(e,f,m,p,h,g)}catch(y){if(y.code==="EAGAIN"&&d<10){d++;continue}throw y}}}(e.readSync);function t(u){u.lchmod=function(f,m,p){u.open(f,ft.O_WRONLY|ft.O_SYMLINK,m,function(h,g){if(h){p&&p(h);return}u.fchmod(g,m,function(d){u.close(g,function(y){p&&p(d||y)})})})},u.lchmodSync=function(f,m){var p=u.openSync(f,ft.O_WRONLY|ft.O_SYMLINK,m),h=!0,g;try{g=u.fchmodSync(p,m),h=!1}finally{if(h)try{u.closeSync(p)}catch{}else u.closeSync(p)}return g}}function r(u){ft.hasOwnProperty("O_SYMLINK")&&u.futimes?(u.lutimes=function(f,m,p,h){u.open(f,ft.O_SYMLINK,function(g,d){if(g){h&&h(g);return}u.futimes(d,m,p,function(y){u.close(d,function(w){h&&h(y||w)})})})},u.lutimesSync=function(f,m,p){var h=u.openSync(f,ft.O_SYMLINK),g,d=!0;try{g=u.futimesSync(h,m,p),d=!1}finally{if(d)try{u.closeSync(h)}catch{}else u.closeSync(h)}return g}):u.futimes&&(u.lutimes=function(f,m,p,h){h&&process.nextTick(h)},u.lutimesSync=function(){})}function n(u){return u&&function(f,m,p){return u.call(e,f,m,function(h){l(h)&&(h=null),p&&p.apply(this,arguments)})}}function i(u){return u&&function(f,m){try{return u.call(e,f,m)}catch(p){if(!l(p))throw p}}}function s(u){return u&&function(f,m,p,h){return u.call(e,f,m,p,function(g){l(g)&&(g=null),h&&h.apply(this,arguments)})}}function o(u){return u&&function(f,m,p){try{return u.call(e,f,m,p)}catch(h){if(!l(h))throw h}}}function a(u){return u&&function(f,m,p){typeof m=="function"&&(p=m,m=null);function h(g,d){d&&(d.uid<0&&(d.uid+=4294967296),d.gid<0&&(d.gid+=4294967296)),p&&p.apply(this,arguments)}return m?u.call(e,f,m,h):u.call(e,f,h)}}function c(u){return u&&function(f,m){var p=m?u.call(e,f,m):u.call(e,f);return p&&(p.uid<0&&(p.uid+=4294967296),p.gid<0&&(p.gid+=4294967296)),p}}function l(u){if(!u||u.code==="ENOSYS")return!0;var f=!process.getuid||process.getuid()!==0;return!!(f&&(u.code==="EINVAL"||u.code==="EPERM"))}}});var xf=v((tb,Af)=>{var $f=require("stream").Stream;Af.exports=q_;function q_(e){return{ReadStream:t,WriteStream:r};function t(n,i){if(!(this instanceof t))return new t(n,i);$f.call(this);var s=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var o=Object.keys(i),a=0,c=o.length;a<c;a++){var l=o[a];this[l]=i[l]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}e.open(this.path,this.flags,this.mode,function(u,f){if(u){s.emit("error",u),s.readable=!1;return}s.fd=f,s.emit("open",f),s._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);$f.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var s=Object.keys(i),o=0,a=s.length;o<a;o++){var c=s[o];this[c]=i[c]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var Tf=v((rb,Rf)=>{"use strict";Rf.exports=D_;var j_=Object.getPrototypeOf||function(e){return e.__proto__};function D_(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:j_(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}});var Nf=v((nb,mo)=>{var re=require("fs"),L_=bf(),W_=xf(),U_=Tf(),Wn=require("util"),de,Kn;typeof Symbol=="function"&&typeof Symbol.for=="function"?(de=Symbol.for("graceful-fs.queue"),Kn=Symbol.for("graceful-fs.previous")):(de="___graceful-fs.queue",Kn="___graceful-fs.previous");function K_(){}function Cf(e,t){Object.defineProperty(e,de,{get:function(){return t}})}var Ot=K_;Wn.debuglog?Ot=Wn.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Ot=function(){var e=Wn.format.apply(Wn,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});re[de]||(Pf=global[de]||[],Cf(re,Pf),re.close=function(e){function t(r,n){return e.call(re,r,function(i){i||Of(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,Kn,{value:e}),t}(re.close),re.closeSync=function(e){function t(r){e.apply(re,arguments),Of()}return Object.defineProperty(t,Kn,{value:e}),t}(re.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Ot(re[de]),require("assert").equal(re[de].length,0)}));var Pf;global[de]||Cf(global,re[de]);mo.exports=ho(U_(re));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!re.__patched&&(mo.exports=ho(re),re.__patched=!0);function ho(e){L_(e),e.gracefulify=ho,e.createReadStream=E,e.createWriteStream=N;var t=e.readFile;e.readFile=r;function r(P,j,D){return typeof j=="function"&&(D=j,j=null),ne(P,j,D);function ne(ee,ie,J,Z){return t(ee,ie,function(z){z&&(z.code==="EMFILE"||z.code==="ENFILE")?er([ne,[ee,ie,J],z,Z||Date.now(),Date.now()]):typeof J=="function"&&J.apply(this,arguments)})}}var n=e.writeFile;e.writeFile=i;function i(P,j,D,ne){return typeof D=="function"&&(ne=D,D=null),ee(P,j,D,ne);function ee(ie,J,Z,z,ce){return n(ie,J,Z,function(Y){Y&&(Y.code==="EMFILE"||Y.code==="ENFILE")?er([ee,[ie,J,Z,z],Y,ce||Date.now(),Date.now()]):typeof z=="function"&&z.apply(this,arguments)})}}var s=e.appendFile;s&&(e.appendFile=o);function o(P,j,D,ne){return typeof D=="function"&&(ne=D,D=null),ee(P,j,D,ne);function ee(ie,J,Z,z,ce){return s(ie,J,Z,function(Y){Y&&(Y.code==="EMFILE"||Y.code==="ENFILE")?er([ee,[ie,J,Z,z],Y,ce||Date.now(),Date.now()]):typeof z=="function"&&z.apply(this,arguments)})}}var a=e.copyFile;a&&(e.copyFile=c);function c(P,j,D,ne){return typeof D=="function"&&(ne=D,D=0),ee(P,j,D,ne);function ee(ie,J,Z,z,ce){return a(ie,J,Z,function(Y){Y&&(Y.code==="EMFILE"||Y.code==="ENFILE")?er([ee,[ie,J,Z,z],Y,ce||Date.now(),Date.now()]):typeof z=="function"&&z.apply(this,arguments)})}}var l=e.readdir;e.readdir=f;var u=/^v[0-5]\./;function f(P,j,D){typeof j=="function"&&(D=j,j=null);var ne=u.test(process.version)?function(J,Z,z,ce){return l(J,ee(J,Z,z,ce))}:function(J,Z,z,ce){return l(J,Z,ee(J,Z,z,ce))};return ne(P,j,D);function ee(ie,J,Z,z){return function(ce,Y){ce&&(ce.code==="EMFILE"||ce.code==="ENFILE")?er([ne,[ie,J,Z],ce,z||Date.now(),Date.now()]):(Y&&Y.sort&&Y.sort(),typeof Z=="function"&&Z.call(this,ce,Y))}}}if(process.version.substr(0,4)==="v0.8"){var m=W_(e);y=m.ReadStream,b=m.WriteStream}var p=e.ReadStream;p&&(y.prototype=Object.create(p.prototype),y.prototype.open=w);var h=e.WriteStream;h&&(b.prototype=Object.create(h.prototype),b.prototype.open=A),Object.defineProperty(e,"ReadStream",{get:function(){return y},set:function(P){y=P},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return b},set:function(P){b=P},enumerable:!0,configurable:!0});var g=y;Object.defineProperty(e,"FileReadStream",{get:function(){return g},set:function(P){g=P},enumerable:!0,configurable:!0});var d=b;Object.defineProperty(e,"FileWriteStream",{get:function(){return d},set:function(P){d=P},enumerable:!0,configurable:!0});function y(P,j){return this instanceof y?(p.apply(this,arguments),this):y.apply(Object.create(y.prototype),arguments)}function w(){var P=this;ye(P.path,P.flags,P.mode,function(j,D){j?(P.autoClose&&P.destroy(),P.emit("error",j)):(P.fd=D,P.emit("open",D),P.read())})}function b(P,j){return this instanceof b?(h.apply(this,arguments),this):b.apply(Object.create(b.prototype),arguments)}function A(){var P=this;ye(P.path,P.flags,P.mode,function(j,D){j?(P.destroy(),P.emit("error",j)):(P.fd=D,P.emit("open",D))})}function E(P,j){return new e.ReadStream(P,j)}function N(P,j){return new e.WriteStream(P,j)}var q=e.open;e.open=ye;function ye(P,j,D,ne){return typeof D=="function"&&(ne=D,D=null),ee(P,j,D,ne);function ee(ie,J,Z,z,ce){return q(ie,J,Z,function(Y,qo){Y&&(Y.code==="EMFILE"||Y.code==="ENFILE")?er([ee,[ie,J,Z,z],Y,ce||Date.now(),Date.now()]):typeof z=="function"&&z.apply(this,arguments)})}}return e}function er(e){Ot("ENQUEUE",e[0].name,e[1]),re[de].push(e),po()}var Un;function Of(){for(var e=Date.now(),t=0;t<re[de].length;++t)re[de][t].length>2&&(re[de][t][3]=e,re[de][t][4]=e);po()}function po(){if(clearTimeout(Un),Un=void 0,re[de].length!==0){var e=re[de].shift(),t=e[0],r=e[1],n=e[2],i=e[3],s=e[4];if(i===void 0)Ot("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-i>=6e4){Ot("TIMEOUT",t.name,r);var o=r.pop();typeof o=="function"&&o.call(null,n)}else{var a=Date.now()-s,c=Math.max(s-i,1),l=Math.min(c*1.2,100);a>=l?(Ot("RETRY",t.name,r),t.apply(null,r.concat([i]))):re[de].push(e)}Un===void 0&&(Un=setTimeout(po,0))}}});var If=v((ib,kf)=>{"use strict";var V_=require("path");kf.exports=(e,t)=>{let r=new Map;for(let[s,o]of e)r.set(s,{filePath:s,parent:void 0,children:void 0,entries:1,active:!0,value:o});let n=r.size;for(let s of r.values()){let o=V_.dirname(s.filePath);if(o!==s.filePath){let a=r.get(o);if(a===void 0)a={filePath:o,parent:void 0,children:[s],entries:s.entries,active:!1,value:void 0},r.set(o,a),s.parent=a;else{s.parent=a,a.children===void 0?a.children=[s]:a.children.push(s);do a.entries+=s.entries,a=a.parent;while(a)}}}for(;n>t;){let s=n-t,o,a=1/0;for(let f of r.values()){if(f.entries<=1||!f.children||!f.parent||f.children.length===0||f.children.length===1&&!f.value)continue;let m=f.entries-1>=s?f.entries-1-s:s-f.entries+1+t*.3;m<a&&(o=f,a=m)}if(!o)break;let c=o.entries-1;o.active=!0,o.entries=1,n-=c;let l=o.parent;for(;l;)l.entries-=c,l=l.parent;let u=new Set(o.children);for(let f of u)if(f.active=!1,f.entries=0,f.children)for(let m of f.children)u.add(m)}let i=new Map;for(let s of r.values()){if(!s.active)continue;let o=new Map,a=new Set([s]);for(let c of a)if(!(c.active&&c!==s)){if(c.value)if(Array.isArray(c.value))for(let l of c.value)o.set(l,c.filePath);else o.set(c.value,c.filePath);if(c.children)for(let l of c.children)a.add(l)}i.set(s.filePath,o)}return i}});var Eo=v(zn=>{"use strict";var Ff=require("fs"),Hn=require("path"),{EventEmitter:H_}=require("events"),z_=If(),qf=require("os").platform()==="darwin",G_=require("os").platform()==="win32",B_=qf||G_,Mf=+process.env.WATCHPACK_WATCHER_LIMIT||(qf?2e3:1e4),Vn=!!process.env.WATCHPACK_RECURSIVE_WATCHER_LOGGING,yo=!1,tr=0,Lr=new Map,Wr=new Map,Ur=new Map,Ct=new Map,vo=class{constructor(t){this.filePath=t,this.watchers=new Set,this.watcher=void 0;try{let r=Ff.watch(t);this.watcher=r,r.on("change",(n,i)=>{for(let s of this.watchers)s.emit("change",n,i)}),r.on("error",n=>{for(let i of this.watchers)i.emit("error",n)})}catch(r){process.nextTick(()=>{for(let n of this.watchers)n.emit("error",r)})}tr++}add(t){Ct.set(t,this),this.watchers.add(t)}remove(t){this.watchers.delete(t),this.watchers.size===0&&(Ur.delete(this.filePath),tr--,this.watcher&&this.watcher.close())}getWatchers(){return this.watchers}},_o=class{constructor(t){this.rootPath=t,this.mapWatcherToPath=new Map,this.mapPathToWatchers=new Map,this.watcher=void 0;try{let r=Ff.watch(t,{recursive:!0});this.watcher=r,r.on("change",(n,i)=>{if(i){let s=Hn.dirname(i),o=this.mapPathToWatchers.get(s);if(Vn&&process.stderr.write(`[watchpack] dispatch ${n} event in recursive watcher (${this.rootPath}) for '${i}' to ${o?o.size:0} watchers
`),o===void 0)return;for(let a of o)a.emit("change",n,Hn.basename(i))}else{Vn&&process.stderr.write(`[watchpack] dispatch ${n} event in recursive watcher (${this.rootPath}) to all watchers
`);for(let s of this.mapWatcherToPath.keys())s.emit("change",n)}}),r.on("error",n=>{for(let i of this.mapWatcherToPath.keys())i.emit("error",n)})}catch(r){process.nextTick(()=>{for(let n of this.mapWatcherToPath.keys())n.emit("error",r)})}tr++,Vn&&process.stderr.write(`[watchpack] created recursive watcher at ${t}
`)}add(t,r){Ct.set(r,this);let n=t.slice(this.rootPath.length+1)||".";this.mapWatcherToPath.set(r,n);let i=this.mapPathToWatchers.get(n);if(i===void 0){let s=new Set;s.add(r),this.mapPathToWatchers.set(n,s)}else i.add(r)}remove(t){let r=this.mapWatcherToPath.get(t);if(!r)return;this.mapWatcherToPath.delete(t);let n=this.mapPathToWatchers.get(r);n.delete(t),n.size===0&&this.mapPathToWatchers.delete(r),this.mapWatcherToPath.size===0&&(Wr.delete(this.rootPath),tr--,this.watcher&&this.watcher.close(),Vn&&process.stderr.write(`[watchpack] closed recursive watcher at ${this.rootPath}
`))}getWatchers(){return this.mapWatcherToPath}},wo=class extends H_{close(){if(Lr.has(this)){Lr.delete(this);return}Ct.get(this).remove(this),Ct.delete(this)}},go=e=>{let t=Ur.get(e);if(t!==void 0)return t;let r=new vo(e);return Ur.set(e,r),r},Y_=e=>{let t=Wr.get(e);if(t!==void 0)return t;let r=new _o(e);return Wr.set(e,r),r},jf=()=>{let e=new Map,t=(n,i)=>{let s=e.get(i);s===void 0?e.set(i,n):Array.isArray(s)?s.push(n):e.set(i,[s,n])};for(let[n,i]of Lr)t(n,i);if(Lr.clear(),!B_||Mf-tr>=e.size){for(let[n,i]of e){let s=go(n);if(Array.isArray(i))for(let o of i)s.add(o);else s.add(i)}return}for(let n of Wr.values())for(let[i,s]of n.getWatchers())t(i,Hn.join(n.rootPath,s));for(let n of Ur.values())for(let i of n.getWatchers())t(i,n.filePath);let r=z_(e,Mf*.9);for(let[n,i]of r)if(i.size===1)for(let[s,o]of i){let a=go(o),c=Ct.get(s);c!==a&&(a.add(s),c!==void 0&&c.remove(s))}else{let s=new Set(i.values());if(s.size>1){let o=Y_(n);for(let[a,c]of i){let l=Ct.get(a);l!==o&&(o.add(c,a),l!==void 0&&l.remove(a))}}else for(let o of s){let a=go(o);for(let c of i.keys()){let l=Ct.get(c);l!==a&&(a.add(c),l!==void 0&&l.remove(c))}}}};zn.watch=e=>{let t=new wo,r=Ur.get(e);if(r!==void 0)return r.add(t),t;let n=e;for(;;){let i=Wr.get(n);if(i!==void 0)return i.add(e,t),t;let s=Hn.dirname(n);if(s===n)break;n=s}return Lr.set(t,e),yo||jf(),t};zn.batch=e=>{yo=!0;try{e()}finally{yo=!1,jf()}};zn.getNumberOfWatchers=()=>tr});var Kf=v((ob,$o)=>{"use strict";var Uf=require("events").EventEmitter,Gn=Nf(),Kr=require("path"),J_=Eo(),nr=Object.freeze({}),we=2e3,Df=require("os").platform()==="darwin",Vr=process.env.WATCHPACK_POLLING,Lf=`${+Vr}`===Vr?+Vr:!!Vr&&Vr!=="false";function rr(e){return e.toLowerCase()}function Q_(e,t){return function(){if(--e===0)return t()}}var So=class extends Uf{constructor(t,r,n){super(),this.directoryWatcher=t,this.path=r,this.startTime=n&&+n}checkStartTime(t,r){let n=this.startTime;return typeof n!="number"?!r:n<=t}close(){this.emit("closed")}},bo=class extends Uf{constructor(t,r,n){super(),Lf&&(n.poll=Lf),this.watcherManager=t,this.options=n,this.path=r,this.files=new Map,this.filesWithoutCase=new Map,this.directories=new Map,this.lastWatchEvent=0,this.initialScan=!0,this.ignored=n.ignored||(()=>!1),this.nestedWatching=!1,this.polledWatching=typeof n.poll=="number"?n.poll:n.poll?5007:!1,this.timeout=void 0,this.initialScanRemoved=new Set,this.initialScanFinished=void 0,this.watchers=new Map,this.parentWatcher=null,this.refs=0,this._activeEvents=new Map,this.closed=!1,this.scanning=!1,this.scanAgain=!1,this.scanAgainInitial=!1,this.createWatcher(),this.doScan(!0)}createWatcher(){try{this.polledWatching?this.watcher={close:()=>{this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)}}:(Df&&this.watchInParentDirectory(),this.watcher=J_.watch(this.path),this.watcher.on("change",this.onWatchEvent.bind(this)),this.watcher.on("error",this.onWatcherError.bind(this)))}catch(t){this.onWatcherError(t)}}forEachWatcher(t,r){let n=this.watchers.get(rr(t));if(n!==void 0)for(let i of n)r(i)}setMissing(t,r,n){this.initialScan&&this.initialScanRemoved.add(t);let i=this.directories.get(t);if(i&&(this.nestedWatching&&i.close(),this.directories.delete(t),this.forEachWatcher(t,o=>o.emit("remove",n)),r||this.forEachWatcher(this.path,o=>o.emit("change",t,null,n,r))),this.files.get(t)){this.files.delete(t);let o=rr(t),a=this.filesWithoutCase.get(o)-1;a<=0?(this.filesWithoutCase.delete(o),this.forEachWatcher(t,c=>c.emit("remove",n))):this.filesWithoutCase.set(o,a),r||this.forEachWatcher(this.path,c=>c.emit("change",t,null,n,r))}}setFileTime(t,r,n,i,s){let o=Date.now();if(this.ignored(t))return;let a=this.files.get(t),c,l;if(n)c=Math.min(o,r)+we,l=we;else if(c=o,l=0,a&&a.timestamp===r&&r+we<o)return;if(!(i&&a&&a.timestamp===r)){if(this.files.set(t,{safeTime:c,accuracy:l,timestamp:r}),a)n||this.forEachWatcher(t,u=>u.emit("change",r,s));else{let u=rr(t),f=this.filesWithoutCase.get(u);this.filesWithoutCase.set(u,(f||0)+1),f!==void 0&&this.doScan(!1),this.forEachWatcher(t,m=>{(!n||m.checkStartTime(c,n))&&m.emit("change",r,s)})}this.forEachWatcher(this.path,u=>{(!n||u.checkStartTime(c,n))&&u.emit("change",t,c,s,n)})}}setDirectory(t,r,n,i){if(!this.ignored(t)){if(t===this.path)n||this.forEachWatcher(this.path,s=>s.emit("change",t,r,i,n));else if(!this.directories.get(t)){let o=Date.now();this.nestedWatching?this.createNestedWatcher(t):this.directories.set(t,!0);let a;n?a=Math.min(o,r)+we:a=o,this.forEachWatcher(t,c=>{(!n||c.checkStartTime(a,!1))&&c.emit("change",r,i)}),this.forEachWatcher(this.path,c=>{(!n||c.checkStartTime(a,n))&&c.emit("change",t,a,i,n)})}}}createNestedWatcher(t){let r=this.watcherManager.watchDirectory(t,1);r.on("change",(n,i,s,o)=>{this.forEachWatcher(this.path,a=>{(!o||a.checkStartTime(i,o))&&a.emit("change",n,i,s,o)})}),this.directories.set(t,r)}setNestedWatching(t){if(this.nestedWatching!==!!t)if(this.nestedWatching=!!t,this.nestedWatching)for(let r of this.directories.keys())this.createNestedWatcher(r);else for(let[r,n]of this.directories)n.close(),this.directories.set(r,!0)}watch(t,r){let n=rr(t),i=this.watchers.get(n);i===void 0&&(i=new Set,this.watchers.set(n,i)),this.refs++;let s=new So(this,t,r);s.on("closed",()=>{if(--this.refs<=0){this.close();return}i.delete(s),i.size===0&&(this.watchers.delete(n),this.path===t&&this.setNestedWatching(!1))}),i.add(s);let o;if(t===this.path){this.setNestedWatching(!0),o=this.lastWatchEvent;for(let a of this.files.values())Bn(a),o=Math.max(o,a.safeTime)}else{let a=this.files.get(t);a?(Bn(a),o=a.safeTime):o=0}return o?o>=r&&process.nextTick(()=>{this.closed||(t===this.path?s.emit("change",t,o,"watch (outdated on attach)",!0):s.emit("change",o,"watch (outdated on attach)",!0))}):this.initialScan?this.initialScanRemoved.has(t)&&process.nextTick(()=>{this.closed||s.emit("remove")}):t!==this.path&&!this.directories.has(t)&&s.checkStartTime(this.initialScanFinished,!1)&&process.nextTick(()=>{this.closed||s.emit("initial-missing","watch (missing on attach)")}),s}onWatchEvent(t,r){if(this.closed)return;if(!r){this.doScan(!1);return}let n=Kr.join(this.path,r);if(!this.ignored(n))if(this._activeEvents.get(r)===void 0){this._activeEvents.set(r,!1);let i=()=>{this.closed||(this._activeEvents.set(r,!1),Gn.lstat(n,(s,o)=>{if(!this.closed){if(this._activeEvents.get(r)===!0){process.nextTick(i);return}this._activeEvents.delete(r),s&&(s.code!=="ENOENT"&&s.code!=="EPERM"&&s.code!=="EBUSY"?this.onStatsError(s):r===Kr.basename(this.path)&&(Gn.existsSync(this.path)||this.onDirectoryRemoved("stat failed"))),this.lastWatchEvent=Date.now(),o?o.isDirectory()?this.setDirectory(n,+o.birthtime||1,!1,t):(o.isFile()||o.isSymbolicLink())&&(o.mtime&&Wf(o.mtime),this.setFileTime(n,+o.mtime||+o.ctime||1,!1,!1,t)):this.setMissing(n,!1,t)}}))};process.nextTick(i)}else this._activeEvents.set(r,!0)}onWatcherError(t){this.closed||t&&(t.code!=="EPERM"&&t.code!=="ENOENT"&&console.error("Watchpack Error (watcher): "+t),this.onDirectoryRemoved("watch error"))}onStatsError(t){t&&console.error("Watchpack Error (stats): "+t)}onScanError(t){t&&console.error("Watchpack Error (initial scan): "+t),this.onScanFinished()}onScanFinished(){this.polledWatching&&(this.timeout=setTimeout(()=>{this.closed||this.doScan(!1)},this.polledWatching))}onDirectoryRemoved(t){this.watcher&&(this.watcher.close(),this.watcher=null),this.watchInParentDirectory();let r=`directory-removed (${t})`;for(let n of this.directories.keys())this.setMissing(n,null,r);for(let n of this.files.keys())this.setMissing(n,null,r)}watchInParentDirectory(){if(!this.parentWatcher){let t=Kr.dirname(this.path);if(Kr.dirname(t)===t)return;this.parentWatcher=this.watcherManager.watchFile(this.path,1),this.parentWatcher.on("change",(r,n)=>{this.closed||((!Df||this.polledWatching)&&this.parentWatcher&&(this.parentWatcher.close(),this.parentWatcher=null),this.watcher||(this.createWatcher(),this.doScan(!1),this.forEachWatcher(this.path,i=>i.emit("change",this.path,r,n,!1))))}),this.parentWatcher.on("remove",()=>{this.onDirectoryRemoved("parent directory removed")})}}doScan(t){if(this.scanning){this.scanAgain?t||(this.scanAgainInitial=!1):(this.scanAgain=!0,this.scanAgainInitial=t);return}this.scanning=!0,this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),process.nextTick(()=>{this.closed||Gn.readdir(this.path,(r,n)=>{if(this.closed)return;if(r){if(r.code==="ENOENT"||r.code==="EPERM"?this.onDirectoryRemoved("scan readdir failed"):this.onScanError(r),this.initialScan=!1,this.initialScanFinished=Date.now(),t)for(let o of this.watchers.values())for(let a of o)a.checkStartTime(this.initialScanFinished,!1)&&a.emit("initial-missing","scan (parent directory missing in initial scan)");this.scanAgain?(this.scanAgain=!1,this.doScan(this.scanAgainInitial)):this.scanning=!1;return}let i=new Set(n.map(o=>Kr.join(this.path,o.normalize("NFC"))));for(let o of this.files.keys())i.has(o)||this.setMissing(o,t,"scan (missing)");for(let o of this.directories.keys())i.has(o)||this.setMissing(o,t,"scan (missing)");if(this.scanAgain){this.scanAgain=!1,this.doScan(t);return}let s=Q_(i.size+1,()=>{if(!this.closed){if(this.initialScan=!1,this.initialScanRemoved=null,this.initialScanFinished=Date.now(),t){let o=new Map(this.watchers);o.delete(rr(this.path));for(let a of i)o.delete(rr(a));for(let a of o.values())for(let c of a)c.checkStartTime(this.initialScanFinished,!1)&&c.emit("initial-missing","scan (missing in initial scan)")}this.scanAgain?(this.scanAgain=!1,this.doScan(this.scanAgainInitial)):(this.scanning=!1,this.onScanFinished())}});for(let o of i)Gn.lstat(o,(a,c)=>{if(!this.closed){if(a){a.code==="ENOENT"||a.code==="EPERM"||a.code==="EACCES"||a.code==="EBUSY"?this.setMissing(o,t,"scan ("+a.code+")"):this.onScanError(a),s();return}c.isFile()||c.isSymbolicLink()?(c.mtime&&Wf(c.mtime),this.setFileTime(o,+c.mtime||+c.ctime||1,t,!0,"scan (file)")):c.isDirectory()&&(!t||!this.directories.has(o))&&this.setDirectory(o,+c.birthtime||1,t,"scan (dir)"),s()}});s()})})}getTimes(){let t=Object.create(null),r=this.lastWatchEvent;for(let[n,i]of this.files)Bn(i),r=Math.max(r,i.safeTime),t[n]=Math.max(i.safeTime,i.timestamp);if(this.nestedWatching){for(let n of this.directories.values()){let i=n.directoryWatcher.getTimes();for(let s of Object.keys(i)){let o=i[s];r=Math.max(r,o),t[s]=o}}t[this.path]=r}if(!this.initialScan)for(let n of this.watchers.values())for(let i of n){let s=i.path;Object.prototype.hasOwnProperty.call(t,s)||(t[s]=null)}return t}collectTimeInfoEntries(t,r){let n=this.lastWatchEvent;for(let[i,s]of this.files)Bn(s),n=Math.max(n,s.safeTime),t.set(i,s);if(this.nestedWatching){for(let i of this.directories.values())n=Math.max(n,i.directoryWatcher.collectTimeInfoEntries(t,r));t.set(this.path,nr),r.set(this.path,{safeTime:n})}else{for(let i of this.directories.keys())t.set(i,nr),r.has(i)||r.set(i,nr);t.set(this.path,nr),r.set(this.path,nr)}if(!this.initialScan)for(let i of this.watchers.values())for(let s of i){let o=s.path;t.has(o)||t.set(o,null)}return n}close(){if(this.closed=!0,this.initialScan=!1,this.watcher&&(this.watcher.close(),this.watcher=null),this.nestedWatching){for(let t of this.directories.values())t.close();this.directories.clear()}this.parentWatcher&&(this.parentWatcher.close(),this.parentWatcher=null),this.emit("closed")}};$o.exports=bo;$o.exports.EXISTANCE_ONLY_TIME_ENTRY=nr;function Bn(e){e.accuracy>we&&(e.safeTime=e.safeTime-e.accuracy+we,e.accuracy=we)}function Wf(e){e&&(we>1&&e%1!==0?we=1:we>10&&e%10!==0?we=10:we>100&&e%100!==0?we=100:we>1e3&&e%1e3!==0&&(we=1e3))}});var Hf=v((ab,Ao)=>{"use strict";var X_=require("path"),Z_=Kf(),Yn=class{constructor(t){this.options=t,this.directoryWatchers=new Map}getDirectoryWatcher(t){let r=this.directoryWatchers.get(t);if(r===void 0){let n=new Z_(this,t,this.options);return this.directoryWatchers.set(t,n),n.on("closed",()=>{this.directoryWatchers.delete(t)}),n}return r}watchFile(t,r){let n=X_.dirname(t);return n===t?null:this.getDirectoryWatcher(n).watch(t,r)}watchDirectory(t,r){return this.getDirectoryWatcher(t).watch(t,r)}},Vf=new WeakMap;Ao.exports=e=>{let t=Vf.get(e);if(t!==void 0)return t;let r=new Yn(e);return Vf.set(e,r),r};Ao.exports.WatcherManager=Yn});var Bf=v((cb,Gf)=>{"use strict";var ew=require("fs"),Jn=require("path"),zf=new Set(["EINVAL","ENOENT"]);process.platform==="win32"&&zf.add("UNKNOWN");var xo=class{constructor(){this.cache=new Map}resolve(t){let r=this.cache.get(t);if(r!==void 0)return r;let n=Jn.dirname(t);if(n===t){let o=Object.freeze([t]);return this.cache.set(t,o),o}let i=this.resolve(n),s=t;if(i[0]!==n){let o=Jn.basename(t);s=Jn.resolve(i[0],o)}try{let o=ew.readlinkSync(s),a=Jn.resolve(i[0],o),c=this.resolve(a),l;if(c.length>1&&i.length>1){let u=new Set(c);u.add(s);for(let f=1;f<i.length;f++)u.add(i[f]);l=Object.freeze(Array.from(u))}else i.length>1?(l=i.slice(),l[0]=c[0],l.push(s),Object.freeze(l)):c.length>1?(l=c.slice(),l.push(s),Object.freeze(l)):l=Object.freeze([c[0],s]);return this.cache.set(t,l),l}catch(o){if(!zf.has(o.code))throw o;let a=i.slice();return a[0]=s,Object.freeze(a),this.cache.set(t,a),a}}};Gf.exports=xo});var Jf=v((ub,Yf)=>{Yf.exports=function(e,t){if(typeof e!="string")throw new TypeError("Expected a string");for(var r=String(e),n="",i=t?!!t.extended:!1,s=t?!!t.globstar:!1,o=!1,a=t&&typeof t.flags=="string"?t.flags:"",c,l=0,u=r.length;l<u;l++)switch(c=r[l],c){case"/":case"$":case"^":case"+":case".":case"(":case")":case"=":case"!":case"|":n+="\\"+c;break;case"?":if(i){n+=".";break}case"[":case"]":if(i){n+=c;break}case"{":if(i){o=!0,n+="(";break}case"}":if(i){o=!1,n+=")";break}case",":if(o){n+="|";break}n+="\\"+c;break;case"*":for(var f=r[l-1],m=1;r[l+1]==="*";)m++,l++;var p=r[l+1];if(!s)n+=".*";else{var h=m>1&&(f==="/"||f===void 0)&&(p==="/"||p===void 0);h?(n+="((?:[^/]*(?:/|$))*)",l++):n+="([^/]*)"}break;default:n+=c}return(!a||!~a.indexOf("g"))&&(n="^"+n+"$"),new RegExp(n,a)}});var ed=v((lb,Zf)=>{"use strict";var tw=Hf(),rw=Bf(),nw=require("events").EventEmitter,iw=Jf(),sw=Eo(),Qn=[],ow={};function Xn(e,t){for(let r of e){let n=r.watcher;t.has(n.directoryWatcher)||t.add(n.directoryWatcher)}}var Qf=e=>{let t=iw(e,{globstar:!0,extended:!0}).source;return t.slice(0,t.length-1)+"(?:$|\\/)"},aw=e=>{if(Array.isArray(e)){let t=new RegExp(e.map(r=>Qf(r)).join("|"));return r=>t.test(r.replace(/\\/g,"/"))}else if(typeof e=="string"){let t=new RegExp(Qf(e));return r=>t.test(r.replace(/\\/g,"/"))}else{if(e instanceof RegExp)return t=>e.test(t.replace(/\\/g,"/"));if(e instanceof Function)return e;if(e)throw new Error(`Invalid option for 'ignored': ${e}`);return()=>!1}},cw=e=>({followSymlinks:!!e.followSymlinks,ignored:aw(e.ignored),poll:e.poll}),Xf=new WeakMap,uw=e=>{let t=Xf.get(e);if(t!==void 0)return t;let r=cw(e);return Xf.set(e,r),r},Ro=class{constructor(t,r,n){this.files=Array.isArray(n)?n:[n],this.watcher=r,r.on("initial-missing",i=>{for(let s of this.files)t._missing.has(s)||t._onRemove(s,s,i)}),r.on("change",(i,s)=>{for(let o of this.files)t._onChange(o,i,o,s)}),r.on("remove",i=>{for(let s of this.files)t._onRemove(s,s,i)})}update(t){Array.isArray(t)?this.files=t:this.files.length!==1?this.files=[t]:this.files[0]!==t&&(this.files[0]=t)}close(){this.watcher.close()}},To=class{constructor(t,r,n){this.directories=Array.isArray(n)?n:[n],this.watcher=r,r.on("initial-missing",i=>{for(let s of this.directories)t._onRemove(s,s,i)}),r.on("change",(i,s,o)=>{for(let a of this.directories)t._onChange(a,s,i,o)}),r.on("remove",i=>{for(let s of this.directories)t._onRemove(s,s,i)})}update(t){Array.isArray(t)?this.directories=t:this.directories.length!==1?this.directories=[t]:this.directories[0]!==t&&(this.directories[0]=t)}close(){this.watcher.close()}},Po=class extends nw{constructor(t){super(),t||(t=ow),this.options=t,this.aggregateTimeout=typeof t.aggregateTimeout=="number"?t.aggregateTimeout:200,this.watcherOptions=uw(t),this.watcherManager=tw(this.watcherOptions),this.fileWatchers=new Map,this.directoryWatchers=new Map,this._missing=new Set,this.startTime=void 0,this.paused=!1,this.aggregatedChanges=new Set,this.aggregatedRemovals=new Set,this.aggregateTimer=void 0,this._onTimeout=this._onTimeout.bind(this)}watch(t,r,n){let i,s,o,a;r?(i=t,s=r,o=Qn,a=n):{files:i=Qn,directories:s=Qn,missing:o=Qn,startTime:a}=t,this.paused=!1;let c=this.fileWatchers,l=this.directoryWatchers,u=this.watcherOptions.ignored,f=d=>!u(d),m=(d,y,w)=>{let b=d.get(y);b===void 0?d.set(y,w):Array.isArray(b)?b.push(w):d.set(y,[b,w])},p=new Map,h=new Map,g=new Set;if(this.watcherOptions.followSymlinks){let d=new rw;for(let y of i)if(f(y))for(let w of d.resolve(y))(y===w||f(w))&&m(p,w,y);for(let y of o)if(f(y))for(let w of d.resolve(y))(y===w||f(w))&&(g.add(y),m(p,w,y));for(let y of s)if(f(y)){let w=!0;for(let b of d.resolve(y))f(b)&&m(w?h:p,b,y),w=!1}}else{for(let d of i)f(d)&&m(p,d,d);for(let d of o)f(d)&&(g.add(d),m(p,d,d));for(let d of s)f(d)&&m(h,d,d)}for(let[d,y]of c){let w=p.get(d);w===void 0?(y.close(),c.delete(d)):(y.update(w),p.delete(d))}for(let[d,y]of l){let w=h.get(d);w===void 0?(y.close(),l.delete(d)):(y.update(w),h.delete(d))}sw.batch(()=>{for(let[d,y]of p){let w=this.watcherManager.watchFile(d,a);w&&c.set(d,new Ro(this,w,y))}for(let[d,y]of h){let w=this.watcherManager.watchDirectory(d,a);w&&l.set(d,new To(this,w,y))}}),this._missing=g,this.startTime=a}close(){this.paused=!0,this.aggregateTimer&&clearTimeout(this.aggregateTimer);for(let t of this.fileWatchers.values())t.close();for(let t of this.directoryWatchers.values())t.close();this.fileWatchers.clear(),this.directoryWatchers.clear()}pause(){this.paused=!0,this.aggregateTimer&&clearTimeout(this.aggregateTimer)}getTimes(){let t=new Set;Xn(this.fileWatchers.values(),t),Xn(this.directoryWatchers.values(),t);let r=Object.create(null);for(let n of t){let i=n.getTimes();for(let s of Object.keys(i))r[s]=i[s]}return r}getTimeInfoEntries(){let t=new Map;return this.collectTimeInfoEntries(t,t),t}collectTimeInfoEntries(t,r){let n=new Set;Xn(this.fileWatchers.values(),n),Xn(this.directoryWatchers.values(),n);let i={value:0};for(let s of n)s.collectTimeInfoEntries(t,r,i)}getAggregated(){this.aggregateTimer&&(clearTimeout(this.aggregateTimer),this.aggregateTimer=void 0);let t=this.aggregatedChanges,r=this.aggregatedRemovals;return this.aggregatedChanges=new Set,this.aggregatedRemovals=new Set,{changes:t,removals:r}}_onChange(t,r,n,i){n=n||t,this.paused||(this.emit("change",n,r,i),this.aggregateTimer&&clearTimeout(this.aggregateTimer),this.aggregateTimer=setTimeout(this._onTimeout,this.aggregateTimeout)),this.aggregatedRemovals.delete(t),this.aggregatedChanges.add(t)}_onRemove(t,r,n){r=r||t,this.paused||(this.emit("remove",r,n),this.aggregateTimer&&clearTimeout(this.aggregateTimer),this.aggregateTimer=setTimeout(this._onTimeout,this.aggregateTimeout)),this.aggregatedChanges.delete(t),this.aggregatedRemovals.add(t)}_onTimeout(){this.aggregateTimer=void 0;let t=this.aggregatedChanges,r=this.aggregatedRemovals;this.aggregatedChanges=new Set,this.aggregatedRemovals=new Set,this.emit("aggregated",t,r)}};Zf.exports=Po});var rd=v((fb,td)=>{"use strict";var lw=require("child_process").exec,ke=require("fs"),fw=require("os"),ir=require("path"),Zn=uo(),ei=Ef(),dw=require("child_process").spawn,hw=ed(),He=function(e){return this.settings=e||{},this};He.prototype._resolve_refs=function(e){return this.envs={},typeof e.AWS_KEY=="object"&&Object.prototype.hasOwnProperty.call(e.AWS_KEY,"Ref")&&typeof e.AWS_KEY.Ref=="string"&&e.AWS_KEY.Ref.indexOf("env.")===0&&(this.envs[e.AWS_KEY.Ref.split("env.")[1]]=process.env[e.AWS_KEY.Ref.split("env.")[1]],e.AWS_KEY=process.env[e.AWS_KEY.Ref.split("env.")[1]]),typeof e.AWS_SECRET=="object"&&Object.prototype.hasOwnProperty.call(e.AWS_SECRET,"Ref")&&typeof e.AWS_SECRET.Ref=="string"&&e.AWS_SECRET.Ref.indexOf("env.")===0&&(this.envs[e.AWS_SECRET.Ref.split("env.")[1]]=process.env[e.AWS_SECRET.Ref.split("env.")[1]],e.AWS_SECRET=process.env[e.AWS_SECRET.Ref.split("env.")[1]]),typeof e.Role=="object"&&Object.prototype.hasOwnProperty.call(e.Role,"Ref")&&typeof e.Role.Ref=="string"&&e.Role.Ref.indexOf("env.")===0&&(this.envs[e.Role.Ref.split("env.")[1]]=process.env[e.Role.Ref.split("env.")[1]],e.Role=process.env[e.Role.Ref.split("env.")[1]]),e};He.prototype._parse_config_file=function(e){e.substr(-7)===".lambda"&&(e=e.substr(0,e.length-7));var t=e+".lambda";ke.existsSync(t)||(console.log("Lambda config not found ("+e+".lambda )"),process.exit(-1));var r;try{r=Zn.safeLoad(ke.readFileSync(t,"utf8"),{schema:ei(),onWarning:function(s){console.error(s)},json:!0})}catch(s){console.log("Invalid config file ("+e+".lambda )",s),this.settings.exitOnError!==!1&&process.exit(-1);return}r=this._resolve_refs(r),r.FunctionName||(r.FunctionName=e.split("/").slice(-1)[0]);var n=e.split("/").slice(0,-1).join("/"),i;return r.PATH.substr(0,1)==="/"||r.PATH.substr(0,2)=="~/"?i=r.PATH.replace(/\/\.\//g,"/"):i=(process.cwd()+"/"+n+"/"+r.PATH).replace(/\/\.\//g,"/"),i.substr(-1)!=="/"&&(i+="/"),r.PATH=i,r};He.prototype.deploy=function(e){var t=require("aws-sdk");process.env.AWSPILOT_DOCKER_WORKDIR&&process.chdir(process.env.AWSPILOT_DOCKER_WORKDIR),e.substr(-7)===".lambda"&&(e=e.substr(0,e.length-7));var r=e+".lambda";ke.existsSync(r)||(console.log("Lambda config not found ("+e+".lambda )"),process.exit(-1));try{var n=Zn.safeLoad(ke.readFileSync(r,"utf8"),{schema:ei(),onWarning:function(h){console.error(h)},json:!0})}catch(h){console.log("Invalid config file ("+e+".lambda )",h),s.settings.exitOnError!==!1&&process.exit(-1);return}typeof n.AWS_KEY=="object"&&Object.prototype.hasOwnProperty.call(n.AWS_KEY,"Ref")&&typeof n.AWS_KEY.Ref=="string"&&n.AWS_KEY.Ref.indexOf("env.")===0&&(n.AWS_KEY=process.env[n.AWS_KEY.Ref.split("env.")[1]]),typeof n.AWS_SECRET=="object"&&Object.prototype.hasOwnProperty.call(n.AWS_SECRET,"Ref")&&typeof n.AWS_SECRET.Ref=="string"&&n.AWS_SECRET.Ref.indexOf("env.")===0&&(n.AWS_SECRET=process.env[n.AWS_SECRET.Ref.split("env.")[1]]),typeof n.Role=="object"&&Object.prototype.hasOwnProperty.call(n.Role,"Ref")&&typeof n.Role.Ref=="string"&&n.Role.Ref.indexOf("env.")===0&&(n.Role=process.env[n.Role.Ref.split("env.")[1]]),n.FunctionName||(n.FunctionName=e.split("/").slice(-1)[0]),/^([a-zA-Z0-9-_.]+)(:(\$LATEST|[a-zA-Z0-9-_]+))?$/.test(n.FunctionName)||(console.log("Invalid function name",n.FunctionName),process.exit(-1)),t.config.update({accessKeyId:n.AWS_KEY,secretAccessKey:n.AWS_SECRET,region:n.AWS_REGION});var i=new t.Lambda({apiVersion:"2015-03-31"}),s=this,o=ir.join(fw.tmpdir(),n.FunctionName+"-"+new Date().getTime()+".zip"),a=e.split("/").slice(0,-1).join("/"),c;n.PATH.substr(0,1)==="/"||n.PATH.substr(0,2)=="~/"?c=n.PATH.replace(/\/\.\//g,"/"):c=(process.cwd()+"/"+a+"/"+n.PATH).replace(/\/\.\//g,"/"),c.substr(-1)!=="/"&&(c+="/"),ke.existsSync(c)||(console.log("No such directory:"+c),process.exit(-1));var l=process.cwd();process.chdir(c);var u=".";try{var f=ke.readFileSync("package.json","utf8");if(f){var m=JSON.parse(f).files;typeof m=="object"&&(u=m.join(" "))}}catch{}var p="zip -r -9  "+o+" "+u;lw(p,{maxBuffer:1024*1024*5},function(h){if(process.chdir(l),h)throw console.log("Error generating zip file"),h;var g=ke.readFileSync(o);typeof n.Environment!="object"&&(n.Environment={}),typeof n.Environment.Variables!="object"&&(n.Environment.Variables={}),typeof n.Tags!="object"&&(n.Tags={});var d={Code:{ZipFile:g},Description:n.Description,FunctionName:n.FunctionName,Handler:n.Handler,MemorySize:n.MemorySize,Publish:!0,Role:n.Role,Runtime:n.Runtime||"nodejs10.x",Timeout:n.Timeout,Environment:n.Environment,Layers:n.Layers||[],Tags:n.Tags};ke.unlinkSync(o),i.createFunction(d,function(y){if(y&&y.code!=="ResourceConflictException"){console.log("ERROR:",y),s.settings.exitOnError!==!1&&process.exit(-1);return}if(y&&y.code==="ResourceConflictException"){var w={Description:n.Description,FunctionName:n.FunctionName,Handler:n.Handler,MemorySize:n.MemorySize,Role:n.Role,Runtime:n.Runtime||"nodejs10.x",Timeout:n.Timeout,Environment:n.Environment,Layers:n.Layers||[]};i.updateFunctionConfiguration(w,function(b,A){if(b){console.log("ERROR:",b),s.settings.exitOnError!==!1&&process.exit(-1);return}var E={FunctionName:n.FunctionName,Publish:!0,ZipFile:g};i.updateFunctionCode(E,function(N){if(N){console.log("ERROR:",N),s.settings.exitOnError!==!1&&process.exit(-1);return}if(Object.keys(n.Tags).length){i.tagResource({Resource:A.FunctionArn,Tags:n.Tags},function(q){q&&console.log("WARNING: tagResource failed on function ",n.FunctionName),console.log("Deployed!")});return}console.log("Deployed!")})});return}console.log("Deployed!")})})};He.prototype.delete=function(e){var t=require("aws-sdk");e.substr(-7)===".lambda"&&(e=e.substr(0,e.length-7));var r=e+".lambda";ke.existsSync(r)||(console.log("Lambda config not found ("+e+".lambda )"),process.exit(-1));try{var n=Zn.safeLoad(ke.readFileSync(r,"utf8"),{schema:ei(),onWarning:function(s){console.error(s)},json:!0})}catch(s){console.log("Invalid config file ("+e+".lambda )",s),process.exit(-1)}typeof n.AWS_KEY=="object"&&Object.prototype.hasOwnProperty.call(n.AWS_KEY,"Ref")&&typeof n.AWS_KEY.Ref=="string"&&n.AWS_KEY.Ref.indexOf("env.")===0&&(n.AWS_KEY=process.env[n.AWS_KEY.Ref.split("env.")[1]]),typeof n.AWS_SECRET=="object"&&Object.prototype.hasOwnProperty.call(n.AWS_SECRET,"Ref")&&typeof n.AWS_SECRET.Ref=="string"&&n.AWS_SECRET.Ref.indexOf("env.")===0&&(n.AWS_SECRET=process.env[n.AWS_SECRET.Ref.split("env.")[1]]),typeof n.Role=="object"&&Object.prototype.hasOwnProperty.call(n.Role,"Ref")&&typeof n.Role.Ref=="string"&&n.Role.Ref.indexOf("env.")===0&&(n.Role=process.env[n.Role.Ref.split("env.")[1]]),t.config.update({accessKeyId:n.AWS_KEY,secretAccessKey:n.AWS_SECRET,region:n.AWS_REGION}),n.FunctionName||(n.FunctionName=e.split("/").slice(-1)[0]);var i=new t.Lambda({apiVersion:"2015-03-31"});i.deleteFunction({FunctionName:n.FunctionName},function(s){s&&s.code!=="ResourceNotFoundException"&&(console.log("delete error:",s),process.exit(-1)),s&&s.code==="ResourceNotFoundException"?console.log("WARNING: deleteFunction ",n.FunctionName,": ResourceNotFoundException "):console.log("Deleted!")})};He.prototype.invoke=function(e){var t=require("aws-sdk");e.substr(-7)===".lambda"&&(e=e.substr(0,e.length-7));var r=e+".lambda";ke.existsSync(r)||(console.log("Lambda config not found ("+e+".lambda )"),process.exit(-1));try{var n=Zn.safeLoad(ke.readFileSync(r,"utf8"),{schema:ei(),onWarning:function(o){console.error(o)},json:!0})}catch(o){console.log("Invalid config file ("+e+".lambda )",o),process.exit(-1)}typeof n.AWS_KEY=="object"&&Object.prototype.hasOwnProperty.call(n.AWS_KEY,"Ref")&&typeof n.AWS_KEY.Ref=="string"&&n.AWS_KEY.Ref.indexOf("env.")===0&&(n.AWS_KEY=process.env[n.AWS_KEY.Ref.split("env.")[1]]),typeof n.AWS_SECRET=="object"&&Object.prototype.hasOwnProperty.call(n.AWS_SECRET,"Ref")&&typeof n.AWS_SECRET.Ref=="string"&&n.AWS_SECRET.Ref.indexOf("env.")===0&&(n.AWS_SECRET=process.env[n.AWS_SECRET.Ref.split("env.")[1]]),typeof n.Role=="object"&&Object.prototype.hasOwnProperty.call(n.Role,"Ref")&&typeof n.Role.Ref=="string"&&n.Role.Ref.indexOf("env.")===0&&(n.Role=process.env[n.Role.Ref.split("env.")[1]]),t.config.update({accessKeyId:n.AWS_KEY,secretAccessKey:n.AWS_SECRET,region:n.AWS_REGION}),n.FunctionName||(n.FunctionName=e.split("/").slice(-1)[0]);var i=new t.Lambda({apiVersion:"2015-03-31"}),s={FunctionName:n.FunctionName,InvocationType:"RequestResponse",LogType:"Tail",Payload:JSON.stringify({})};i.invoke(s,function(o,a){o&&(console.log("invoke error:",o),process.exit(-1));try{console.log(JSON.stringify(JSON.parse(a.Payload),null,"	"))}catch{}console.log("------------"),console.log(Buffer.from(a.LogResult,"base64").toString())})};He.prototype.start=function(e){var t=new He({exitOnError:!1}),r=t._parse_config_file(e),n=ir.resolve(e),i=process.cwd(),s=new hw({aggregateTimeout:3e3,ignored:"**/.git"});console.log("---|",process.env.AWSPILOT_DOCKER_WORKDIR?"DOCKER":"LOCAL",new Date().toISOString());try{t.deploy(e)}catch(c){console.log(c)}var o=[n],a=[r.PATH];process.env.AWSPILOT_DOCKER_WORKDIR&&(o=[],a=[r.PATH,ir.dirname(n)]),s.watch({files:o,directories:a,startTime:Date.now()-1e4}),s.on("aggregated",function(c,l){console.log(`
---|`,process.env.AWSPILOT_DOCKER_WORKDIR?"DOCKER":"LOCAL",new Date().toISOString()),Array.from(c).map(function(u){console.log("---| * ",u)}),Array.from(l).map(function(u){console.log("---| - ",u)});try{process.chdir(i),t.deploy(e)}catch(u){console.log(u)}})};He.prototype.start_docker=function(e){var t=new He({exitOnError:!0}),r=t._parse_config_file(e),n=[];Object.keys(t.envs).map(function(s){n.push("-e"),n.push(s+"="+t.envs[s])});var i=ir.resolve(e);dw("docker",["run","-it","--rm","-v",i+":"+i,"-v",r.PATH+":"+r.PATH,"-e","AWSPILOT_DOCKER_WORKDIR="+ir.dirname(i)+"/","-e","AWSPILOT_LAMBDA_CONFIG="+i.slice(ir.dirname(i).length+1)].concat(n).concat(["awspilotdev/lambda_deploy_nodejs8.10"]),{stdio:[process.stdin,process.stdout,process.stderr]})};td.exports=new He});var Cw={};Od(Cw,{handleHttp:()=>Pw,handleInvoke:()=>Ow,schema:()=>hd});module.exports=Cd(Cw);var ai=(e,t)=>{let r=t.get(e);return r||(r=new Map,t.set(e,r)),r},Nd=(e,t,r)=>(r.set(e,t),r),ci=(e,t,r,n)=>{let i=ai(e,n);return Nd(t,r,i),n},et=(e,t,r,n,i)=>{let s=ai(e,i);return ci(t,r,n,s),i},ui=(e,t,r,n,i,s)=>{let o=ai(e,s);return et(t,r,n,i,o),s};var ze={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*","Access-Control-Allow-Credentials":"true"};var kd=e=>Buffer.from(e,"base64").toString("utf-8"),Ko=e=>{let t=e.split(".");return JSON.parse(kd(t[1]))},Vo=(e,t)=>{try{return JSON.parse(t)}catch{return e}},Ho=(e,t)=>{let r=e.indexOf(t);return r===-1?e:e.substring(0,r)};var Nt=e=>({statusCode:403,headers:ze,body:typeof e=="string"?e:JSON.stringify(e)});var De=e=>({statusCode:400,headers:ze,body:typeof e=="string"?e:JSON.stringify(e)}),zo=e=>({statusCode:401,headers:ze,body:e?JSON.stringify(e):"Unauthorized"}),Go=e=>({statusCode:404,headers:ze,body:e?JSON.stringify(e):"Not Found"}),Bo=e=>({statusCode:422,headers:ze,body:e?JSON.stringify(e):"Unprocessable Entity"}),li=e=>e.statusCode?e:(console.error(e),{statusCode:500,headers:ze,body:e.message});var Lw=De({name:"InvalidEmailError",message:"The email must be valid and must not contain upper case letters or spaces."}),Ww=De({name:"InvalidPasswordError",message:"The password must contain at least 8 characters and at least 1 number."}),Uw=De({name:"InvalidSrpAError",message:"The SRP A value must be a correctly calculated random hex hash based on big integers."}),Kw=De({name:"InvalidRefreshTokenError",message:"Refresh token is invalid."}),Vw=De({name:"VerificationCodeMismatchError",message:"The verification code does not match."}),Hw=Nt({name:"VerificationCodeExpiredError",message:"The verification code has exipired. Please retry via Reset Password Init (in case of pasword reset) or Register Verify Resend (in case of register)."}),zw=Go({name:"UserNotFoundError",message:"No user was found under the given email or user ID."}),Gw=Nt({name:"UserNotVerifiedError",message:"The user must be verified with Register Verify operation."}),Bw=Nt({name:"UserExistsError",message:"There is an existing user with the given email address."}),Yw=De({name:"UserMissingPasswordChallengeError",message:"The user must have an active require password change challenge."}),Jw=Nt({name:"PasswordResetRequiredError",message:"The password must be reset."}),Qw=Bo({name:"PasswordResetMissingParamError",message:"Either a verification code or the users old password are required."}),Xw=Nt({name:"LoginVerifyError",message:"The password could not be verified. Please check password, userId, secretBlock, signature and timestamp."});var Gr=process.env.AWS_REGION||"",Yo=process.env.ADMIN_EMAILS||"",fi=process.env.CLOUDFRONT_ACCESS_KEY_ID||"",sr=process.env.CLOUDFRONT_NEW_ACCESS_KEY_PARAMETER||"",eE=process.env.INVITE_USER_VALIDATION_VIEW||"",tE=process.env.PULL_LAMBDA_NAME||"",di=process.env.MEDIA_DOMAIN||"",rE=process.env.CLIENT_ID||"",nE=process.env.USER_POOL_ID||"";var Id=require("crypto");var Jo=(e=100)=>{let t=[],r=0,n=0,i=0,s=u=>{t[n]=u,n+=1},o=()=>{let u=t[r];return delete t[r],r+=1,u},a=()=>n-r,c=u=>{let f=new Promise((m,p)=>{s(async()=>{await u().then(m).catch(p)})});return l(),f},l=async()=>{if(i<e&&a()>0){let u=o();i+=1,u&&await u(),i-=1,l()}};return{queueLoad:c,length:a}};var Br=(e,t,r)=>{let n=r.get(e);if(n!=null)return n.get(t)},hi=(e,t,r,n)=>{let i=n.get(e);if(i!=null)return Br(t,r,i)};var tt=e=>{if(typeof e=="string")return e;let t="{";if(e.keys!=null){let r=e,n=r.keys(),i=r.size,s=0;for(let o of n){let a=r.get(o);s<i-1?t+=`"${o}":${tt(a)},`:t+=`"${o}":${tt(a)}`,s+=1}}else{let r=e,n=Object.keys(r);for(let i=0;i<n.length;i++){let s=n[i];i<n.length-1?t+=`"${s}":${tt(r[s])},`:t+=`"${s}":${tt(r[s])}`}}return t+="}",t};var nd=Uo(Pu(),1),db=Uo(rd(),1);var id=(e,t,{auth:r=!0}={})=>new Promise((n,i)=>{let s;try{r?s=Ko(t.headers.Authorization||t.headers.authorization||""):s={}}catch{i(zo());return}try{let o=Vo(t.body||{},t.body||""),a=new nd.default;if(a.addKeyword("example"),a.validate(e,o)){let l=s.email,u=t.headers["x-as-role"]||"user",f=!!t.headers["x-as-admin"]&&Yo.includes(l);n({userEmail:l,body:o,asAdmin:f,asRole:u})}else i(De(JSON.stringify(a.errors)))}catch(o){i(De(o.message))}});var Oo=e=>{if(e==null)return;let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r],i=e[n],[s,o]=n.split("/"),a=i;a.fromType=s,a.toType=o;let c=i.edges;c!=null&&Oo(c)}};var sd=()=>{let e=[];return{addPromise:n=>(e.push(n),n),awaitPromises:async()=>{for(;!(e.length<=0);){let n=e;e=[],await Promise.all(n)}}}};var Hr=(e,t)=>e.replaceAll("$NODEID",t),od=async(e,t,r,n)=>{let i=performance.now();Oo(e);let{addPromise:s,awaitPromises:o}=sd(),{dataCache:a,signer:c,loader:l,graphAssembler:u}=n,{writeNode:f,writeMetadata:m,writeEdgeReverse:p,writeRights:h,writeFiles:g,getGraphJson:d,getLog:y}=u,w=0,b=0,A=0,E=async _=>await l.getNode(_)!=null,N=_=>l.getRead(_,"user",t),q=_=>l.getWrite(_,"user",t),ye=_=>l.getAdmin(_,"user",t),P=async _=>_==="public"||await N(_),j=(_,S)=>l.getRead(_,"role",S),D=(_,S)=>l.getWrite(_,"role",S),ne=(_,S)=>l.getAdmin(_,"role",S),ee=async(_,S="user")=>r?E(_):S==="user"?await E(_)&&await N(_):await E(_)&&await P(S)&&await j(_,S),ie=async(_,S="user")=>r?E(_):S==="user"?await E(_)&&await ye(_):await E(_)&&await P(S)&&await ne(_,S),J=(_,S)=>{let $=a.nodes.getNode(_);return $!=null?(S&&S(_,$),$):s(Z(_,S))},Z=async(_,S)=>{let $=a.nodes.getNodePromise(_);if($!=null){let R=await $;return S&&S(_,R),R}else{let R=l.getNode(_);a.nodes.setNodePromise(_,R);let O=await R;if(O!==null)return a.nodes.setNode(_,O),a.nodes.removeNodePromise(_),S&&S(_,O),O;a.nodes.removeNodePromise(_)}return null},z=(_,S,$,R)=>{if(!S||!$){console.log("LOADEDGE:: Invalid edge key",`${_}/${S}/${$}/${R}`);return}m(_,S,$,R,"true")},ce=(_,S,$,R)=>{if(!S||!$){console.log("LOADEDGE:: Invalid edge key",`${_}/${S}/${$}/${R}`);return}p(_,S,$,R)},Y=(_,S,$,R,O,H)=>{(!$||!R)&&console.log("LOADMETADATA:: Invalid edge key",`${_}/${$}/${R}/${O}`);let U=a.metadata.getMetadata(_,S,O);U!=null?H&&H(_,$,R,O,U):s(qo(_,S,$,R,O,H))},qo=async(_,S,$,R,O,H)=>{let U=a.metadata.getMetadataPromise(_,S,O);if(U!=null){let te=await U;H&&H(_,$,R,O,te)}else{let te=l.getMetadata(_,S,O);a.metadata.setMetadataPromise(_,S,O,te);let Re=await te;a.metadata.setMetadata(_,S,O,Re),a.metadata.removeMetadataPromise(_,S,O),H&&H(_,$,R,O,Re)}},md=async _=>{let S=await l.listRights(_),$=S.get("user"),R=S.get("role");if(!$&&!R)return;let O={};$&&(O.user=$),R&&(O.role=R),h(_,O)},gd=async(_,S)=>{S==="user"?await q(_)?h(_,`{"user":{"${t}":{"read":true,"write":true}}}`):h(_,`{"user":{"${t}":{"read":true}}}`):await D(_,S)?h(_,`{"role":{"${S}":{"read":true,"write":true}}}`):h(_,`{"role":{"${S}":{"read":true}}}`)},yd=async(_,{fileKey:S,prop:$},R)=>{let O=await l.getFileHead(S);if(!O)return;let{contentType:H,etag:U,modifiedDate:te}=O,Re=a.urls.getUrl(S,U);if(Re&&Re.expire>Date.now()){R&&R(_,$,JSON.stringify({etag:U,contentType:H,modifiedDate:te,url:Re.url}));return}else{a.urls.removeUrl(S,U);let Ee=c.signUrl(c.getUrl(S,U)),dt=1e3*60*60*12;a.urls.setUrl(S,U,{url:Ee,expire:Date.now()+dt}),R&&R(_,$,JSON.stringify({etag:U,contentType:H,modifiedDate:te,url:Ee}))}},vd=async(_,S)=>{let $=await l.getFileRefs(_);if($)for(let R=0;R<$.length;R++){let O=$[R];s(yd(_,O,S))}},jo=async(_,S,$)=>{let{include:R,edges:O}=S;if(O){let H=Object.keys(O);for(let U=0;U<H.length;U++){let te=H[U];s(_d(_,te,O[te],$))}}R?.node&&J(_,f),R?.files&&s(vd(_,g)),R?.rights&&(await ie(_,$)?await md(_):await gd(_,$))},oi=async(_,S,$,R,O,H,U,te)=>{await ee(R,S)&&(s(jo(R,_,S)),Ed(O,$,H,U,te,_))},_d=async(_,S,$,R)=>{if(S.includes("*")){s(wd(_,S,$,R));return}let{fromType:O,toType:H}=$;if($.reverse){let U=_,te=await l.getReverseEdges(U,`${H}/${O}`);if(te==null)return;let Re=te.keys();for(let Ee of Re){let dt=$.role?Hr($.role,Ee):R;s(oi($,dt,S,Ee,Ee,O,H,U))}}else{let U=_,te=await l.getEdges(U,S);if(te==null)return;let Re=te.keys();for(let Ee of Re){let dt=$.role?Hr($.role,Ee):R;s(oi($,dt,S,Ee,U,O,H,Ee))}}},wd=async(_,S,$,R)=>{if($.reverse)throw new Error("Reverse wildcards are not supported");{let O=_,H=await l.getEdgesWildcard(O,S);for(let U=0;U<H.length;U++){let[te,Re,Ee]=H[U],dt=$.role?Hr($.role,Ee):R;s(oi($,dt,`${te}/${Re}`,Ee,O,te,Re,Ee))}}},Ed=(_,S,$,R,O,H)=>{let{include:U,reverse:te}=H;U?.edges&&!U.metadata?z(_,$,R,O):U?.edges&&U.metadata&&Y(_,S,$,R,O,m),te&&ce(_,$,R,O)},Sd=_=>{if(_.endsWith("*"))return _.slice(0,-1)},bd=async(_,S)=>{let $=await l.getNodesWildcard(_);if($)for(let R=0;R<$.length;R++){let O=$[R],H=S.role?Hr(S.role,O):"user";s(Do(O,S,H))}},Do=async(_,S,$)=>{if(await ee(_,$))return jo(_,S,$)};(()=>{if(e==null)return;let _=Object.keys(e);for(let S=0;S<_.length;S++){let $=_[S],R=Sd($);if(R){s(bd(R,e[$]));continue}let O=e[$],H=O.role?Hr(O.role,$):"user";s(Do($,O,H))}})(),await o();let Lo=d(),$d={graphAssembler:y(),loader:l.getLog(),request:{payloadBytes:Lo.length,time:performance.now()-i,sendTime:0,timeQueryNode:w,timeQueryEdge:b,timeLoadEdge:A}};return[Lo,$d]};var ad=()=>{let e=new Map,t=new Map,r=new Map,n=new Map,i=new Map,s=0,o=0,a=0;return{writeNode:(g,d)=>{e.set(g,d)},writeMetadata:(g,d,y,w,b)=>{ui(d,g,y,w,b,t)},writeEdgeReverse:(g,d,y,w)=>{ui(y,w,d,g,"true",r)},writeRights:(g,d)=>{n.set(g,d)},writeFiles:(g,d,y)=>{ci(g,d,y,i)},getGraphJson:()=>{let g=new Map;if(e.size>0&&g.set("nodes",e),t.size>0&&g.set("edges",t),n.size>0){let w=tt(n);g.set("rights",w)}if(i.size>0&&g.set("files",i),r.size>0){let w=`{"reverseEdges":${tt(r)}}`;g.set("index",w)}let d=performance.now(),y=tt(g);return a+=performance.now()-d,y},getLog:()=>({timeNode:s,timeMetadata:o,timeJson:a})}};var yw=require("@aws-sdk/s3-request-presigner"),Te=require("@aws-sdk/client-s3");var ti=require("@aws-sdk/client-ssm");var pw=new ti.SSMClient({region:Gr,apiVersion:"latest"}),ri=async(e,t=!1)=>{let r=new ti.GetParameterCommand({Name:e,WithDecryption:t});try{let n=await pw.send(r);return n.Parameter?n.Parameter.Value:void 0}catch(n){console.error(n);return}};var mw=require("@aws-sdk/cloudfront-signer"),gw=()=>{let e=null;return async()=>(e||(e=ri(sr||"CLOUDFRONT_ACCESS_KEY",!0).catch(console.error)),e)},Lb=gw(),Wb=1*24*60*60*1e3;var Co=new Te.S3Client({region:Gr,apiVersion:"latest"}),vw=e=>new Promise((t,r)=>{let n=[];e.on("data",i=>n.push(i)),e.on("error",r),e.on("end",()=>t(Buffer.concat(n)))});var ni=async(e,t)=>{let r=new Te.GetObjectCommand({Bucket:e,Key:t});try{let n=await Co.send(r);return n.Body?vw(n.Body):null}catch{return}};var No=async(e,t)=>{let r=new Te.HeadObjectCommand({Bucket:e,Key:t});try{let n=await Co.send(r);return{etag:n.ETag||"",contentType:n.ContentType||"",modifiedDate:n.LastModified?.toISOString()||"",metadata:n.Metadata,size:n.ContentLength||0}}catch{return!1}};var _w=(e,t)=>({subscribe:r=>{try{let n=async i=>{let s=new Te.ListObjectsV2Command({Bucket:e,Prefix:t,ContinuationToken:i}),o=await Co.send(s).then(({Contents:a,NextContinuationToken:c})=>(r.next(a||[]),c));o?n(o):r.complete()};n()}catch(n){r.error(n)}}}),ww=async(e,t,r)=>new Promise((n,i)=>{_w(e,t).subscribe({next:s=>s.forEach(({Key:o,ETag:a})=>{o&&a&&r(o,a)}),complete:()=>n(!0),error:s=>i(s)})}),Ze=async(e,t)=>{let r=[];return await ww(e,t,n=>{r.push(n)}),r};var Gb=process.env.BUCKET_LOGS||"",ii=process.env.BUCKET_EDGES||"",cd=process.env.BUCKET_REVERSE_EDGES||"",ko=process.env.BUCKET_NODES||"",Bb=process.env.BUCKET_OWNERS||"",Io=process.env.BUCKET_RIGHTS_ADMIN||"",Mo=process.env.BUCKET_RIGHTS_READ||"",Fo=process.env.BUCKET_RIGHTS_WRITE||"",si=process.env.BUCKET_MEDIA||"";var{queueLoad:Ie}=Jo(200),Ew=async e=>Ze(ko,e),Sw=async(e,t)=>Ze(ii,`${e}/${t}/`),bw=async(e,t)=>Ze(cd,`${e}/${t}/`),$w=async(e,t)=>{let r=Ho(t,"*"),n=await Ze(ii,`${e}/${r}`),i=new RegExp(t.replaceAll("*",".*").replaceAll("/","\\/"));return r.length<t.length-2?n.filter(s=>s.match(i)):n},Aw=async e=>{let[,,t]=e.split("/"),r=await ni(si,e),{fileKey:n=""}=r?JSON.parse(r.toString()):{};return{prop:t,fileKey:n}},xw=async e=>{let t=await Ze(si,`ref/${e}`),r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=Aw(t[n]);return Promise.all(r)},ud=()=>{let e=0,t=0,r=0,n=async h=>{e+=1;let g=await Ie(()=>ni(ko,h));return g==null?null:g.toString()},i=h=>async(g,d,y)=>!!await Ie(()=>No(h,`${g}/${d}/${y}`)),s=async(h,g,d)=>{t+=1;let y=await Ie(()=>ni(ii,h+"/"+g+"/"+d));return y==null?"true":y.toString()},o=h=>Ie(()=>No(si,h)),a=async h=>Ie(()=>xw(h)),c=async(h,g)=>{let d=await Ie(()=>$w(h,`${g}/`));if(!d)return[];let y=new Array(d.length);for(let w=0;w<d.length;w++){let[,b,A,E]=d[w].split("/");y[w]=[b,A,E]}return y},l=async(h,g)=>{let d=await Ie(()=>Sw(h,g)),y=new Map;for(let w=0;w<d.length;w++){let[,,,b]=d[w].split("/");y.set(b,!0)}return y},u=async(h,g)=>{let d=await Ie(()=>bw(h,g)),y=new Map;for(let w=0;w<d.length;w++){let[,,,b]=d[w].split("/");y.set(b,!0)}return y},f=async h=>Ie(()=>Ew(h)),m=async h=>{let g=Ie(()=>Ze(Mo,`${h}/`)),d=Ie(()=>Ze(Fo,`${h}/`)),y=Ie(()=>Ze(Io,`${h}/`)),w=await g,b=await d,A=await y,E=new Map;for(let N=0;N<w.length;N++){let[,q,ye]=w[N].split("/");(q==="user"||q==="role")&&et(q,ye,"read","true",E)}for(let N=0;N<b.length;N++){let[,q,ye]=b[N].split("/");(q==="user"||q==="role")&&et(q,ye,"write","true",E)}for(let N=0;N<A.length;N++){let[,q,ye]=A[N].split("/");(q==="user"||q==="role")&&et(q,ye,"admin","true",E)}return E},p=()=>({nodes:e,metadata:t,files:r});return{getNode:n,getRead:i(Mo),getWrite:i(Fo),getAdmin:i(Io),getMetadata:s,getFileHead:o,getFileRefs:a,getEdges:l,getReverseEdges:u,getEdgesWildcard:c,getNodesWildcard:f,listRights:m,getLog:p}};var ld=require("@aws-sdk/cloudfront-signer");var fd=async()=>{let e=await ri(sr,!0),t=1*24*60*60*1e3;return{getUrl:(i,s)=>`https://${di}/${i}?etag=${s}`,signUrl:(i,s=t)=>(0,ld.getSignedUrl)({url:i,keyPairId:fi||"",dateLessThan:new Date(Date.now()+s).toISOString(),privateKey:e||""})}};var dd=()=>{let e=new Map,t=A=>e.get(A),r=(A,E)=>{e.set(A,E)},n=A=>{e.delete(A)},i=new Map,s=A=>i.get(A),o=(A,E)=>{i.set(A,E)},a=A=>{i.delete(A)},c=new Map,l=(A,E,N)=>hi(A,E,N,c),u=(A,E,N,q)=>{et(A,E,N,q,c)},f=(A,E,N)=>{let q=Br(A,E,c);q?.delete(N)},m=new Map,p=(A,E,N)=>hi(A,E,N,m),h=(A,E,N,q)=>{et(A,E,N,q,m)},g=(A,E,N)=>{let q=Br(A,E,m);q?.delete(N)},d=new Map;return{nodes:{getNode:t,setNode:r,removeNode:n,getNodePromise:s,setNodePromise:o,removeNodePromise:a},metadata:{getMetadata:l,setMetadata:u,removeMetadata:f,getMetadataPromise:p,removeMetadataPromise:g,setMetadataPromise:h},urls:{getUrl:(A,E)=>d.get(A+"/"+E),setUrl:(A,E,N)=>{d.set(A+"/"+E,N)},removeUrl:(A,E)=>{d.delete(A+"/"+E)}}}};var Rw=!0,Tw=e=>({type:"object",description:"Holds a query object that specifies how the graph should be queried from a given entry point. The entry point can be a node ID or an edge pointing do a set of nodes",additionalProperties:!1,properties:{as:{type:"string",description:"Defines an optional alias for the query object, which is currently ignored by the API."},role:{type:"string",description:"Defines the role which will be used to check the rights of the given node. If no role is given, the rights of the current user will be used."},reverse:{type:"boolean",description:"Defines if the edge should be read out in reverse"},edges:{type:"object",description:"Specifies a hashmap of edge types `fromType/toType` which should further be fetched from a given node or another parent edge query.",additionalProperties:e},include:{type:"object",description:'Specifies which data should be returned for the given node or for multiple nodes the given edge type (e.g. "todo-app/todo-list") is pointing to',additionalProperties:!1,example:{node:!0,metadata:!0,rights:!0,files:!1,edges:!1},properties:{node:{type:"boolean",description:"`true` when the node(s) data should be included in the response. `false` when they should explicitly be excluded from the response."},edges:{type:"boolean",description:"`true` when the edges should be included in the response. `false` when they should explicitly be excluded from the response."},metadata:{type:"boolean",description:"`true` when edge metadata data should be included in the response. `false` when they should explicitly be excluded from the response."},rights:{type:"boolean",description:"`true` when the node rights should be included in the response. `false` when they should explicitly be excluded from the response."},files:{type:"boolean",description:"`true` when the node files should be included in the response. `false` when they should explicitly be excluded from the response."}}}}}),hd={type:"object",additionalProperties:{$ref:"#/definitions/Query"},definitions:{Query:Tw({$ref:"#/definitions/Query"})}},pd=async({userEmail:e,asAdmin:t,asRole:r,body:n})=>{let i=await fd(),[s]=await od(n,e||"",t,{dataCache:dd(),graphAssembler:ad(),loader:ud(),signer:i});return{statusCode:200,headers:ze,body:s}},Pw=async e=>{try{let t=await id(hd,e,{auth:Rw});return await pd(t)}catch(t){return li(t)}},Ow=async({body:e})=>{try{return await pd(e)}catch(t){return li(t)}};0&&(module.exports={handleHttp,handleInvoke,schema});

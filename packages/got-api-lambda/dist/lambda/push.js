var ah=Object.create;var dn=Object.defineProperty;var ch=Object.getOwnPropertyDescriptor;var lh=Object.getOwnPropertyNames;var uh=Object.getPrototypeOf,fh=Object.prototype.hasOwnProperty;var E=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),dh=(e,t)=>{for(var r in t)dn(e,r,{get:t[r],enumerable:!0})},ia=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of lh(t))!fh.call(e,s)&&s!==r&&dn(e,s,{get:()=>t[s],enumerable:!(n=ch(t,s))||n.enumerable});return e};var oa=(e,t,r)=>(r=e!=null?ah(uh(e)):{},ia(t||!e||!e.__esModule?dn(r,"default",{value:e,enumerable:!0}):r,e)),hh=e=>ia(dn({},"__esModule",{value:!0}),e);var _r=E(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.regexpCode=V.getEsmExportName=V.getProperty=V.safeStringify=V.stringify=V.strConcat=V.addCodeArg=V.str=V._=V.nil=V._Code=V.Name=V.IDENTIFIER=V._CodeOrName=void 0;var yr=class{};V._CodeOrName=yr;V.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var vt=class extends yr{constructor(t){if(super(),!V.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};V.Name=vt;var Pe=class extends yr{constructor(t){super(),this._items=typeof t=="string"?[t]:t}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let t=this._items[0];return t===""||t==='""'}get str(){var t;return(t=this._str)!==null&&t!==void 0?t:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var t;return(t=this._names)!==null&&t!==void 0?t:this._names=this._items.reduce((r,n)=>(n instanceof vt&&(r[n.str]=(r[n.str]||0)+1),r),{})}};V._Code=Pe;V.nil=new Pe("");function ya(e,...t){let r=[e[0]],n=0;for(;n<t.length;)Ns(r,t[n]),r.push(e[++n]);return new Pe(r)}V._=ya;var Cs=new Pe("+");function va(e,...t){let r=[vr(e[0])],n=0;for(;n<t.length;)r.push(Cs),Ns(r,t[n]),r.push(Cs,vr(e[++n]));return gh(r),new Pe(r)}V.str=va;function Ns(e,t){t instanceof Pe?e.push(...t._items):t instanceof vt?e.push(t):e.push(_h(t))}V.addCodeArg=Ns;function gh(e){let t=1;for(;t<e.length-1;){if(e[t]===Cs){let r=yh(e[t-1],e[t+1]);if(r!==void 0){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}function yh(e,t){if(t==='""')return e;if(e==='""')return t;if(typeof e=="string")return t instanceof vt||e[e.length-1]!=='"'?void 0:typeof t!="string"?`${e.slice(0,-1)}${t}"`:t[0]==='"'?e.slice(0,-1)+t.slice(1):void 0;if(typeof t=="string"&&t[0]==='"'&&!(e instanceof vt))return`"${e}${t.slice(1)}`}function vh(e,t){return t.emptyStr()?e:e.emptyStr()?t:va`${e}${t}`}V.strConcat=vh;function _h(e){return typeof e=="number"||typeof e=="boolean"||e===null?e:vr(Array.isArray(e)?e.join(","):e)}function wh(e){return new Pe(vr(e))}V.stringify=wh;function vr(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}V.safeStringify=vr;function Eh(e){return typeof e=="string"&&V.IDENTIFIER.test(e)?new Pe(`.${e}`):ya`[${e}]`}V.getProperty=Eh;function Sh(e){if(typeof e=="string"&&V.IDENTIFIER.test(e))return new Pe(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)}V.getEsmExportName=Sh;function bh(e){return new Pe(e.toString())}V.regexpCode=bh});var ks=E(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.ValueScope=Te.ValueScopeName=Te.Scope=Te.varKinds=Te.UsedValueState=void 0;var Re=_r(),Ms=class extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}},yn;(function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"})(yn||(Te.UsedValueState=yn={}));Te.varKinds={const:new Re.Name("const"),let:new Re.Name("let"),var:new Re.Name("var")};var vn=class{constructor({prefixes:t,parent:r}={}){this._names={},this._prefixes=t,this._parent=r}toName(t){return t instanceof Re.Name?t:this.name(t)}name(t){return new Re.Name(this._newName(t))}_newName(t){let r=this._names[t]||this._nameGroup(t);return`${t}${r.index++}`}_nameGroup(t){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(t)||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}};Te.Scope=vn;var _n=class extends Re.Name{constructor(t,r){super(r),this.prefix=t}setValue(t,{property:r,itemIndex:n}){this.value=t,this.scopePath=(0,Re._)`.${new Re.Name(r)}[${n}]`}};Te.ValueScopeName=_n;var Rh=(0,Re._)`\n`,Fs=class extends vn{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts={...t,_n:t.lines?Rh:Re.nil}}get(){return this._scope}name(t){return new _n(t,this._newName(t))}value(t,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(t),{prefix:i}=s,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[i];if(a){let l=a.get(o);if(l)return l}else a=this._values[i]=new Map;a.set(o,s);let c=this._scope[i]||(this._scope[i]=[]),u=c.length;return c[u]=r.ref,s.setValue(r,{property:i,itemIndex:u}),s}getValue(t,r){let n=this._values[t];if(n)return n.get(r)}scopeRefs(t,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,Re._)`${t}${n.scopePath}`})}scopeCode(t=this._values,r,n){return this._reduceValues(t,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(t,r,n={},s){let i=Re.nil;for(let o in t){let a=t[o];if(!a)continue;let c=n[o]=n[o]||new Map;a.forEach(u=>{if(c.has(u))return;c.set(u,yn.Started);let l=r(u);if(l){let f=this.opts.es5?Te.varKinds.var:Te.varKinds.const;i=(0,Re._)`${i}${f} ${u} = ${l};${this.opts._n}`}else if(l=s?.(u))i=(0,Re._)`${i}${l}${this.opts._n}`;else throw new Ms(u);c.set(u,yn.Completed)})}return i}};Te.ValueScope=Fs});var D=E(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.or=j.and=j.not=j.CodeGen=j.operators=j.varKinds=j.ValueScopeName=j.ValueScope=j.Scope=j.Name=j.regexpCode=j.stringify=j.getProperty=j.nil=j.strConcat=j.str=j._=void 0;var W=_r(),Ie=ks(),at=_r();Object.defineProperty(j,"_",{enumerable:!0,get:function(){return at._}});Object.defineProperty(j,"str",{enumerable:!0,get:function(){return at.str}});Object.defineProperty(j,"strConcat",{enumerable:!0,get:function(){return at.strConcat}});Object.defineProperty(j,"nil",{enumerable:!0,get:function(){return at.nil}});Object.defineProperty(j,"getProperty",{enumerable:!0,get:function(){return at.getProperty}});Object.defineProperty(j,"stringify",{enumerable:!0,get:function(){return at.stringify}});Object.defineProperty(j,"regexpCode",{enumerable:!0,get:function(){return at.regexpCode}});Object.defineProperty(j,"Name",{enumerable:!0,get:function(){return at.Name}});var bn=ks();Object.defineProperty(j,"Scope",{enumerable:!0,get:function(){return bn.Scope}});Object.defineProperty(j,"ValueScope",{enumerable:!0,get:function(){return bn.ValueScope}});Object.defineProperty(j,"ValueScopeName",{enumerable:!0,get:function(){return bn.ValueScopeName}});Object.defineProperty(j,"varKinds",{enumerable:!0,get:function(){return bn.varKinds}});j.operators={GT:new W._Code(">"),GTE:new W._Code(">="),LT:new W._Code("<"),LTE:new W._Code("<="),EQ:new W._Code("==="),NEQ:new W._Code("!=="),NOT:new W._Code("!"),OR:new W._Code("||"),AND:new W._Code("&&"),ADD:new W._Code("+")};var Qe=class{optimizeNodes(){return this}optimizeNames(t,r){return this}},Is=class extends Qe{constructor(t,r,n){super(),this.varKind=t,this.name=r,this.rhs=n}render({es5:t,_n:r}){let n=t?Ie.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(t,r){if(t[this.name.str])return this.rhs&&(this.rhs=Vt(this.rhs,t,r)),this}get names(){return this.rhs instanceof W._CodeOrName?this.rhs.names:{}}},wn=class extends Qe{constructor(t,r,n){super(),this.lhs=t,this.rhs=r,this.sideEffects=n}render({_n:t}){return`${this.lhs} = ${this.rhs};`+t}optimizeNames(t,r){if(!(this.lhs instanceof W.Name&&!t[this.lhs.str]&&!this.sideEffects))return this.rhs=Vt(this.rhs,t,r),this}get names(){let t=this.lhs instanceof W.Name?{}:{...this.lhs.names};return Sn(t,this.rhs)}},js=class extends wn{constructor(t,r,n,s){super(t,n,s),this.op=r}render({_n:t}){return`${this.lhs} ${this.op}= ${this.rhs};`+t}},Ds=class extends Qe{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`${this.label}:`+t}},qs=class extends Qe{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`break${this.label?` ${this.label}`:""};`+t}},Gs=class extends Qe{constructor(t){super(),this.error=t}render({_n:t}){return`throw ${this.error};`+t}get names(){return this.error.names}},Ls=class extends Qe{constructor(t){super(),this.code=t}render({_n:t}){return`${this.code};`+t}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(t,r){return this.code=Vt(this.code,t,r),this}get names(){return this.code instanceof W._CodeOrName?this.code.names:{}}},wr=class extends Qe{constructor(t=[]){super(),this.nodes=t}render(t){return this.nodes.reduce((r,n)=>r+n.render(t),"")}optimizeNodes(){let{nodes:t}=this,r=t.length;for(;r--;){let n=t[r].optimizeNodes();Array.isArray(n)?t.splice(r,1,...n):n?t[r]=n:t.splice(r,1)}return t.length>0?this:void 0}optimizeNames(t,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(t,r)||(Th(t,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((t,r)=>Et(t,r.names),{})}},Xe=class extends wr{render(t){return"{"+t._n+super.render(t)+"}"+t._n}},Ws=class extends wr{},Ut=class extends Xe{};Ut.kind="else";var _t=class e extends Xe{constructor(t,r){super(r),this.condition=t}render(t){let r=`if(${this.condition})`+super.render(t);return this.else&&(r+="else "+this.else.render(t)),r}optimizeNodes(){super.optimizeNodes();let t=this.condition;if(t===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new Ut(n):n}if(r)return t===!1?r instanceof e?r:r.nodes:this.nodes.length?this:new e(_a(t),r instanceof e?[r]:r.nodes);if(!(t===!1||!this.nodes.length))return this}optimizeNames(t,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(t,r),!!(super.optimizeNames(t,r)||this.else))return this.condition=Vt(this.condition,t,r),this}get names(){let t=super.names;return Sn(t,this.condition),this.else&&Et(t,this.else.names),t}};_t.kind="if";var wt=class extends Xe{};wt.kind="for";var Us=class extends wt{constructor(t){super(),this.iteration=t}render(t){return`for(${this.iteration})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iteration=Vt(this.iteration,t,r),this}get names(){return Et(super.names,this.iteration.names)}},Vs=class extends wt{constructor(t,r,n,s){super(),this.varKind=t,this.name=r,this.from=n,this.to=s}render(t){let r=t.es5?Ie.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(t)}get names(){let t=Sn(super.names,this.from);return Sn(t,this.to)}},En=class extends wt{constructor(t,r,n,s){super(),this.loop=t,this.varKind=r,this.name=n,this.iterable=s}render(t){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iterable=Vt(this.iterable,t,r),this}get names(){return Et(super.names,this.iterable.names)}},Er=class extends Xe{constructor(t,r,n){super(),this.name=t,this.args=r,this.async=n}render(t){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(t)}};Er.kind="func";var Sr=class extends wr{render(t){return"return "+super.render(t)}};Sr.kind="return";var Ks=class extends Xe{render(t){let r="try"+super.render(t);return this.catch&&(r+=this.catch.render(t)),this.finally&&(r+=this.finally.render(t)),r}optimizeNodes(){var t,r;return super.optimizeNodes(),(t=this.catch)===null||t===void 0||t.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(t,r){var n,s;return super.optimizeNames(t,r),(n=this.catch)===null||n===void 0||n.optimizeNames(t,r),(s=this.finally)===null||s===void 0||s.optimizeNames(t,r),this}get names(){let t=super.names;return this.catch&&Et(t,this.catch.names),this.finally&&Et(t,this.finally.names),t}},br=class extends Xe{constructor(t){super(),this.error=t}render(t){return`catch(${this.error})`+super.render(t)}};br.kind="catch";var Rr=class extends Xe{render(t){return"finally"+super.render(t)}};Rr.kind="finally";var Hs=class{constructor(t,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=t,this._scope=new Ie.Scope({parent:t}),this._nodes=[new Ws]}toString(){return this._root.render(this.opts)}name(t){return this._scope.name(t)}scopeName(t){return this._extScope.name(t)}scopeValue(t,r){let n=this._extScope.value(t,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(t,r){return this._extScope.getValue(t,r)}scopeRefs(t){return this._extScope.scopeRefs(t,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(t,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new Is(t,i,n)),i}const(t,r,n){return this._def(Ie.varKinds.const,t,r,n)}let(t,r,n){return this._def(Ie.varKinds.let,t,r,n)}var(t,r,n){return this._def(Ie.varKinds.var,t,r,n)}assign(t,r,n){return this._leafNode(new wn(t,r,n))}add(t,r){return this._leafNode(new js(t,j.operators.ADD,r))}code(t){return typeof t=="function"?t():t!==W.nil&&this._leafNode(new Ls(t)),this}object(...t){let r=["{"];for(let[n,s]of t)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,W.addCodeArg)(r,s));return r.push("}"),new W._Code(r)}if(t,r,n){if(this._blockNode(new _t(t)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(t){return this._elseNode(new _t(t))}else(){return this._elseNode(new Ut)}endIf(){return this._endBlockNode(_t,Ut)}_for(t,r){return this._blockNode(t),r&&this.code(r).endFor(),this}for(t,r){return this._for(new Us(t),r)}forRange(t,r,n,s,i=this.opts.es5?Ie.varKinds.var:Ie.varKinds.let){let o=this._scope.toName(t);return this._for(new Vs(i,o,r,n),()=>s(o))}forOf(t,r,n,s=Ie.varKinds.const){let i=this._scope.toName(t);if(this.opts.es5){let o=r instanceof W.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,W._)`${o}.length`,a=>{this.var(i,(0,W._)`${o}[${a}]`),n(i)})}return this._for(new En("of",s,i,r),()=>n(i))}forIn(t,r,n,s=this.opts.es5?Ie.varKinds.var:Ie.varKinds.const){if(this.opts.ownProperties)return this.forOf(t,(0,W._)`Object.keys(${r})`,n);let i=this._scope.toName(t);return this._for(new En("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(wt)}label(t){return this._leafNode(new Ds(t))}break(t){return this._leafNode(new qs(t))}return(t){let r=new Sr;if(this._blockNode(r),this.code(t),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Sr)}try(t,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new Ks;if(this._blockNode(s),this.code(t),r){let i=this.name("e");this._currNode=s.catch=new br(i),r(i)}return n&&(this._currNode=s.finally=new Rr,this.code(n)),this._endBlockNode(br,Rr)}throw(t){return this._leafNode(new Gs(t))}block(t,r){return this._blockStarts.push(this._nodes.length),t&&this.code(t).endBlock(r),this}endBlock(t){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||t!==void 0&&n!==t)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${t} expected`);return this._nodes.length=r,this}func(t,r=W.nil,n,s){return this._blockNode(new Er(t,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(Er)}optimize(t=1){for(;t-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(t){return this._currNode.nodes.push(t),this}_blockNode(t){this._currNode.nodes.push(t),this._nodes.push(t)}_endBlockNode(t,r){let n=this._currNode;if(n instanceof t||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${t.kind}/${r.kind}`:t.kind}"`)}_elseNode(t){let r=this._currNode;if(!(r instanceof _t))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=t,this}get _root(){return this._nodes[0]}get _currNode(){let t=this._nodes;return t[t.length-1]}set _currNode(t){let r=this._nodes;r[r.length-1]=t}};j.CodeGen=Hs;function Et(e,t){for(let r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function Sn(e,t){return t instanceof W._CodeOrName?Et(e,t.names):e}function Vt(e,t,r){if(e instanceof W.Name)return n(e);if(!s(e))return e;return new W._Code(e._items.reduce((i,o)=>(o instanceof W.Name&&(o=n(o)),o instanceof W._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||t[i.str]!==1?i:(delete t[i.str],o)}function s(i){return i instanceof W._Code&&i._items.some(o=>o instanceof W.Name&&t[o.str]===1&&r[o.str]!==void 0)}}function Th(e,t){for(let r in t)e[r]=(e[r]||0)-(t[r]||0)}function _a(e){return typeof e=="boolean"||typeof e=="number"||e===null?!e:(0,W._)`!${zs(e)}`}j.not=_a;var Oh=wa(j.operators.AND);function Ah(...e){return e.reduce(Oh)}j.and=Ah;var $h=wa(j.operators.OR);function xh(...e){return e.reduce($h)}j.or=xh;function wa(e){return(t,r)=>t===W.nil?r:r===W.nil?t:(0,W._)`${zs(t)} ${e} ${zs(r)}`}function zs(e){return e instanceof W.Name?e:(0,W._)`(${e})`}});var K=E(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.checkStrictMode=q.getErrorPath=q.Type=q.useFunc=q.setEvaluated=q.evaluatedPropsToName=q.mergeEvaluated=q.eachItem=q.unescapeJsonPointer=q.escapeJsonPointer=q.escapeFragment=q.unescapeFragment=q.schemaRefOrVal=q.schemaHasRulesButRef=q.schemaHasRules=q.checkUnknownRules=q.alwaysValidSchema=q.toHash=void 0;var Q=D(),Ph=_r();function Ch(e){let t={};for(let r of e)t[r]=!0;return t}q.toHash=Ch;function Nh(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(ba(e,t),!Ra(t,e.self.RULES.all))}q.alwaysValidSchema=Nh;function ba(e,t=e.schema){let{opts:r,self:n}=e;if(!r.strictSchema||typeof t=="boolean")return;let s=n.RULES.keywords;for(let i in t)s[i]||Aa(e,`unknown keyword: "${i}"`)}q.checkUnknownRules=ba;function Ra(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(t[r])return!0;return!1}q.schemaHasRules=Ra;function Mh(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}q.schemaHasRulesButRef=Mh;function Fh({topSchemaRef:e,schemaPath:t},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,Q._)`${r}`}return(0,Q._)`${e}${t}${(0,Q.getProperty)(n)}`}q.schemaRefOrVal=Fh;function kh(e){return Ta(decodeURIComponent(e))}q.unescapeFragment=kh;function Ih(e){return encodeURIComponent(Ys(e))}q.escapeFragment=Ih;function Ys(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}q.escapeJsonPointer=Ys;function Ta(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}q.unescapeJsonPointer=Ta;function jh(e,t){if(Array.isArray(e))for(let r of e)t(r);else t(e)}q.eachItem=jh;function Ea({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{let c=o===void 0?i:o instanceof Q.Name?(i instanceof Q.Name?e(s,i,o):t(s,i,o),o):i instanceof Q.Name?(t(s,o,i),i):r(i,o);return a===Q.Name&&!(c instanceof Q.Name)?n(s,c):c}}q.mergeEvaluated={props:Ea({mergeNames:(e,t,r)=>e.if((0,Q._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,Q._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,Q._)`${r} || {}`).code((0,Q._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,Q._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,Q._)`${r} || {}`),Js(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:Oa}),items:Ea({mergeNames:(e,t,r)=>e.if((0,Q._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,Q._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,Q._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,Q._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function Oa(e,t){if(t===!0)return e.var("props",!0);let r=e.var("props",(0,Q._)`{}`);return t!==void 0&&Js(e,r,t),r}q.evaluatedPropsToName=Oa;function Js(e,t,r){Object.keys(r).forEach(n=>e.assign((0,Q._)`${t}${(0,Q.getProperty)(n)}`,!0))}q.setEvaluated=Js;var Sa={};function Dh(e,t){return e.scopeValue("func",{ref:t,code:Sa[t.code]||(Sa[t.code]=new Ph._Code(t.code))})}q.useFunc=Dh;var Bs;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(Bs||(q.Type=Bs={}));function qh(e,t,r){if(e instanceof Q.Name){let n=t===Bs.Num;return r?n?(0,Q._)`"[" + ${e} + "]"`:(0,Q._)`"['" + ${e} + "']"`:n?(0,Q._)`"/" + ${e}`:(0,Q._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,Q.getProperty)(e).toString():"/"+Ys(e)}q.getErrorPath=qh;function Aa(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}q.checkStrictMode=Aa});var Ze=E(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});var me=D(),Gh={data:new me.Name("data"),valCxt:new me.Name("valCxt"),instancePath:new me.Name("instancePath"),parentData:new me.Name("parentData"),parentDataProperty:new me.Name("parentDataProperty"),rootData:new me.Name("rootData"),dynamicAnchors:new me.Name("dynamicAnchors"),vErrors:new me.Name("vErrors"),errors:new me.Name("errors"),this:new me.Name("this"),self:new me.Name("self"),scope:new me.Name("scope"),json:new me.Name("json"),jsonPos:new me.Name("jsonPos"),jsonLen:new me.Name("jsonLen"),jsonPart:new me.Name("jsonPart")};Qs.default=Gh});var Tr=E(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.extendErrors=ge.resetErrorsCount=ge.reportExtraError=ge.reportError=ge.keyword$DataError=ge.keywordError=void 0;var U=D(),Rn=K(),we=Ze();ge.keywordError={message:({keyword:e})=>(0,U.str)`must pass "${e}" keyword validation`};ge.keyword$DataError={message:({keyword:e,schemaType:t})=>t?(0,U.str)`"${e}" keyword must be ${t} ($data)`:(0,U.str)`"${e}" keyword is invalid ($data)`};function Lh(e,t=ge.keywordError,r,n){let{it:s}=e,{gen:i,compositeRule:o,allErrors:a}=s,c=Pa(e,t,r);n??(o||a)?$a(i,c):xa(s,(0,U._)`[${c}]`)}ge.reportError=Lh;function Wh(e,t=ge.keywordError,r){let{it:n}=e,{gen:s,compositeRule:i,allErrors:o}=n,a=Pa(e,t,r);$a(s,a),i||o||xa(n,we.default.vErrors)}ge.reportExtraError=Wh;function Uh(e,t){e.assign(we.default.errors,t),e.if((0,U._)`${we.default.vErrors} !== null`,()=>e.if(t,()=>e.assign((0,U._)`${we.default.vErrors}.length`,t),()=>e.assign(we.default.vErrors,null)))}ge.resetErrorsCount=Uh;function Vh({gen:e,keyword:t,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let o=e.name("err");e.forRange("i",s,we.default.errors,a=>{e.const(o,(0,U._)`${we.default.vErrors}[${a}]`),e.if((0,U._)`${o}.instancePath === undefined`,()=>e.assign((0,U._)`${o}.instancePath`,(0,U.strConcat)(we.default.instancePath,i.errorPath))),e.assign((0,U._)`${o}.schemaPath`,(0,U.str)`${i.errSchemaPath}/${t}`),i.opts.verbose&&(e.assign((0,U._)`${o}.schema`,r),e.assign((0,U._)`${o}.data`,n))})}ge.extendErrors=Vh;function $a(e,t){let r=e.const("err",t);e.if((0,U._)`${we.default.vErrors} === null`,()=>e.assign(we.default.vErrors,(0,U._)`[${r}]`),(0,U._)`${we.default.vErrors}.push(${r})`),e.code((0,U._)`${we.default.errors}++`)}function xa(e,t){let{gen:r,validateName:n,schemaEnv:s}=e;s.$async?r.throw((0,U._)`new ${e.ValidationError}(${t})`):(r.assign((0,U._)`${n}.errors`,t),r.return(!1))}var St={keyword:new U.Name("keyword"),schemaPath:new U.Name("schemaPath"),params:new U.Name("params"),propertyName:new U.Name("propertyName"),message:new U.Name("message"),schema:new U.Name("schema"),parentSchema:new U.Name("parentSchema")};function Pa(e,t,r){let{createErrors:n}=e.it;return n===!1?(0,U._)`{}`:Kh(e,t,r)}function Kh(e,t,r={}){let{gen:n,it:s}=e,i=[Hh(s,r),zh(e,r)];return Bh(e,t,i),n.object(...i)}function Hh({errorPath:e},{instancePath:t}){let r=t?(0,U.str)`${e}${(0,Rn.getErrorPath)(t,Rn.Type.Str)}`:e;return[we.default.instancePath,(0,U.strConcat)(we.default.instancePath,r)]}function zh({keyword:e,it:{errSchemaPath:t}},{schemaPath:r,parentSchema:n}){let s=n?t:(0,U.str)`${t}/${e}`;return r&&(s=(0,U.str)`${s}${(0,Rn.getErrorPath)(r,Rn.Type.Str)}`),[St.schemaPath,s]}function Bh(e,{params:t,message:r},n){let{keyword:s,data:i,schemaValue:o,it:a}=e,{opts:c,propertyName:u,topSchemaRef:l,schemaPath:f}=a;n.push([St.keyword,s],[St.params,typeof t=="function"?t(e):t||(0,U._)`{}`]),c.messages&&n.push([St.message,typeof r=="function"?r(e):r]),c.verbose&&n.push([St.schema,o],[St.parentSchema,(0,U._)`${l}${f}`],[we.default.data,i]),u&&n.push([St.propertyName,u])}});var Na=E(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.boolOrEmptySchema=Kt.topBoolOrEmptySchema=void 0;var Yh=Tr(),Jh=D(),Qh=Ze(),Xh={message:"boolean schema is false"};function Zh(e){let{gen:t,schema:r,validateName:n}=e;r===!1?Ca(e,!1):typeof r=="object"&&r.$async===!0?t.return(Qh.default.data):(t.assign((0,Jh._)`${n}.errors`,null),t.return(!0))}Kt.topBoolOrEmptySchema=Zh;function ep(e,t){let{gen:r,schema:n}=e;n===!1?(r.var(t,!1),Ca(e)):r.var(t,!0)}Kt.boolOrEmptySchema=ep;function Ca(e,t){let{gen:r,data:n}=e,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,Yh.reportError)(s,Xh,void 0,t)}});var Xs=E(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.getRules=Ht.isJSONType=void 0;var tp=["string","number","integer","boolean","null","object","array"],rp=new Set(tp);function np(e){return typeof e=="string"&&rp.has(e)}Ht.isJSONType=np;function sp(){let e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Ht.getRules=sp});var Zs=E(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.shouldUseRule=ct.shouldUseGroup=ct.schemaHasRulesForType=void 0;function ip({schema:e,self:t},r){let n=t.RULES.types[r];return n&&n!==!0&&Ma(e,n)}ct.schemaHasRulesForType=ip;function Ma(e,t){return t.rules.some(r=>Fa(e,r))}ct.shouldUseGroup=Ma;function Fa(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}ct.shouldUseRule=Fa});var Or=E(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.reportTypeError=ye.checkDataTypes=ye.checkDataType=ye.coerceAndCheckDataType=ye.getJSONTypes=ye.getSchemaTypes=ye.DataType=void 0;var op=Xs(),ap=Zs(),cp=Tr(),k=D(),ka=K(),zt;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(zt||(ye.DataType=zt={}));function lp(e){let t=Ia(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}ye.getSchemaTypes=lp;function Ia(e){let t=Array.isArray(e)?e:e?[e]:[];if(t.every(op.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}ye.getJSONTypes=Ia;function up(e,t){let{gen:r,data:n,opts:s}=e,i=fp(t,s.coerceTypes),o=t.length>0&&!(i.length===0&&t.length===1&&(0,ap.schemaHasRulesForType)(e,t[0]));if(o){let a=ti(t,n,s.strictNumbers,zt.Wrong);r.if(a,()=>{i.length?dp(e,t,i):ri(e)})}return o}ye.coerceAndCheckDataType=up;var ja=new Set(["string","number","integer","boolean","null"]);function fp(e,t){return t?e.filter(r=>ja.has(r)||t==="array"&&r==="array"):[]}function dp(e,t,r){let{gen:n,data:s,opts:i}=e,o=n.let("dataType",(0,k._)`typeof ${s}`),a=n.let("coerced",(0,k._)`undefined`);i.coerceTypes==="array"&&n.if((0,k._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,k._)`${s}[0]`).assign(o,(0,k._)`typeof ${s}`).if(ti(t,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,k._)`${a} !== undefined`);for(let u of r)(ja.has(u)||u==="array"&&i.coerceTypes==="array")&&c(u);n.else(),ri(e),n.endIf(),n.if((0,k._)`${a} !== undefined`,()=>{n.assign(s,a),hp(e,a)});function c(u){switch(u){case"string":n.elseIf((0,k._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,k._)`"" + ${s}`).elseIf((0,k._)`${s} === null`).assign(a,(0,k._)`""`);return;case"number":n.elseIf((0,k._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,k._)`+${s}`);return;case"integer":n.elseIf((0,k._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,k._)`+${s}`);return;case"boolean":n.elseIf((0,k._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,k._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,k._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,k._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,k._)`[${s}]`)}}}function hp({gen:e,parentData:t,parentDataProperty:r},n){e.if((0,k._)`${t} !== undefined`,()=>e.assign((0,k._)`${t}[${r}]`,n))}function ei(e,t,r,n=zt.Correct){let s=n===zt.Correct?k.operators.EQ:k.operators.NEQ,i;switch(e){case"null":return(0,k._)`${t} ${s} null`;case"array":i=(0,k._)`Array.isArray(${t})`;break;case"object":i=(0,k._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":i=o((0,k._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":i=o();break;default:return(0,k._)`typeof ${t} ${s} ${e}`}return n===zt.Correct?i:(0,k.not)(i);function o(a=k.nil){return(0,k.and)((0,k._)`typeof ${t} == "number"`,a,r?(0,k._)`isFinite(${t})`:k.nil)}}ye.checkDataType=ei;function ti(e,t,r,n){if(e.length===1)return ei(e[0],t,r,n);let s,i=(0,ka.toHash)(e);if(i.array&&i.object){let o=(0,k._)`typeof ${t} != "object"`;s=i.null?o:(0,k._)`!${t} || ${o}`,delete i.null,delete i.array,delete i.object}else s=k.nil;i.number&&delete i.integer;for(let o in i)s=(0,k.and)(s,ei(o,t,r,n));return s}ye.checkDataTypes=ti;var pp={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,k._)`{type: ${e}}`:(0,k._)`{type: ${t}}`};function ri(e){let t=mp(e);(0,cp.reportError)(t,pp)}ye.reportTypeError=ri;function mp(e){let{gen:t,data:r,schema:n}=e,s=(0,ka.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:e}}});var qa=E(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});Tn.assignDefaults=void 0;var Bt=D(),gp=K();function yp(e,t){let{properties:r,items:n}=e.schema;if(t==="object"&&r)for(let s in r)Da(e,s,r[s].default);else t==="array"&&Array.isArray(n)&&n.forEach((s,i)=>Da(e,i,s.default))}Tn.assignDefaults=yp;function Da(e,t,r){let{gen:n,compositeRule:s,data:i,opts:o}=e;if(r===void 0)return;let a=(0,Bt._)`${i}${(0,Bt.getProperty)(t)}`;if(s){(0,gp.checkStrictMode)(e,`default is ignored for: ${a}`);return}let c=(0,Bt._)`${a} === undefined`;o.useDefaults==="empty"&&(c=(0,Bt._)`${c} || ${a} === null || ${a} === ""`),n.if(c,(0,Bt._)`${a} = ${(0,Bt.stringify)(r)}`)}});var Ce=E(Y=>{"use strict";Object.defineProperty(Y,"__esModule",{value:!0});Y.validateUnion=Y.validateArray=Y.usePattern=Y.callValidateCode=Y.schemaProperties=Y.allSchemaProperties=Y.noPropertyInData=Y.propertyInData=Y.isOwnProperty=Y.hasPropFunc=Y.reportMissingProp=Y.checkMissingProp=Y.checkReportMissingProp=void 0;var Z=D(),ni=K(),lt=Ze(),vp=K();function _p(e,t){let{gen:r,data:n,it:s}=e;r.if(ii(r,n,t,s.opts.ownProperties),()=>{e.setParams({missingProperty:(0,Z._)`${t}`},!0),e.error()})}Y.checkReportMissingProp=_p;function wp({gen:e,data:t,it:{opts:r}},n,s){return(0,Z.or)(...n.map(i=>(0,Z.and)(ii(e,t,i,r.ownProperties),(0,Z._)`${s} = ${i}`)))}Y.checkMissingProp=wp;function Ep(e,t){e.setParams({missingProperty:t},!0),e.error()}Y.reportMissingProp=Ep;function Ga(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Z._)`Object.prototype.hasOwnProperty`})}Y.hasPropFunc=Ga;function si(e,t,r){return(0,Z._)`${Ga(e)}.call(${t}, ${r})`}Y.isOwnProperty=si;function Sp(e,t,r,n){let s=(0,Z._)`${t}${(0,Z.getProperty)(r)} !== undefined`;return n?(0,Z._)`${s} && ${si(e,t,r)}`:s}Y.propertyInData=Sp;function ii(e,t,r,n){let s=(0,Z._)`${t}${(0,Z.getProperty)(r)} === undefined`;return n?(0,Z.or)(s,(0,Z.not)(si(e,t,r))):s}Y.noPropertyInData=ii;function La(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Y.allSchemaProperties=La;function bp(e,t){return La(t).filter(r=>!(0,ni.alwaysValidSchema)(e,t[r]))}Y.schemaProperties=bp;function Rp({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,c,u){let l=u?(0,Z._)`${e}, ${t}, ${n}${s}`:t,f=[[lt.default.instancePath,(0,Z.strConcat)(lt.default.instancePath,i)],[lt.default.parentData,o.parentData],[lt.default.parentDataProperty,o.parentDataProperty],[lt.default.rootData,lt.default.rootData]];o.opts.dynamicRef&&f.push([lt.default.dynamicAnchors,lt.default.dynamicAnchors]);let d=(0,Z._)`${l}, ${r.object(...f)}`;return c!==Z.nil?(0,Z._)`${a}.call(${c}, ${d})`:(0,Z._)`${a}(${d})`}Y.callValidateCode=Rp;var Tp=(0,Z._)`new RegExp`;function Op({gen:e,it:{opts:t}},r){let n=t.unicodeRegExp?"u":"",{regExp:s}=t.code,i=s(r,n);return e.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,Z._)`${s.code==="new RegExp"?Tp:(0,vp.useFunc)(e,s)}(${r}, ${n})`})}Y.usePattern=Op;function Ap(e){let{gen:t,data:r,keyword:n,it:s}=e,i=t.name("valid");if(s.allErrors){let a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(i,!0),o(()=>t.break()),i;function o(a){let c=t.const("len",(0,Z._)`${r}.length`);t.forRange("i",0,c,u=>{e.subschema({keyword:n,dataProp:u,dataPropType:ni.Type.Num},i),t.if((0,Z.not)(i),a)})}}Y.validateArray=Ap;function $p(e){let{gen:t,schema:r,keyword:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,ni.alwaysValidSchema)(s,c))&&!s.opts.unevaluated)return;let o=t.let("valid",!1),a=t.name("_valid");t.block(()=>r.forEach((c,u)=>{let l=e.subschema({keyword:n,schemaProp:u,compositeRule:!0},a);t.assign(o,(0,Z._)`${o} || ${a}`),e.mergeValidEvaluated(l,a)||t.if((0,Z.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Y.validateUnion=$p});var Va=E(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.validateKeywordUsage=Le.validSchemaType=Le.funcKeywordCode=Le.macroKeywordCode=void 0;var Ee=D(),bt=Ze(),xp=Ce(),Pp=Tr();function Cp(e,t){let{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=e,a=t.macro.call(o.self,s,i,o),c=Ua(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let u=r.name("valid");e.subschema({schema:a,schemaPath:Ee.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:c,compositeRule:!0},u),e.pass(u,()=>e.error(!0))}Le.macroKeywordCode=Cp;function Np(e,t){var r;let{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:c}=e;Fp(c,t);let u=!a&&t.compile?t.compile.call(c.self,i,o,c):t.validate,l=Ua(n,s,u),f=n.let("valid");e.block$data(f,d),e.ok((r=t.valid)!==null&&r!==void 0?r:f);function d(){if(t.errors===!1)g(),t.modifying&&Wa(e),m(()=>e.error());else{let v=t.async?h():p();t.modifying&&Wa(e),m(()=>Mp(e,v))}}function h(){let v=n.let("ruleErrs",null);return n.try(()=>g((0,Ee._)`await `),w=>n.assign(f,!1).if((0,Ee._)`${w} instanceof ${c.ValidationError}`,()=>n.assign(v,(0,Ee._)`${w}.errors`),()=>n.throw(w))),v}function p(){let v=(0,Ee._)`${l}.errors`;return n.assign(v,null),g(Ee.nil),v}function g(v=t.async?(0,Ee._)`await `:Ee.nil){let w=c.opts.passContext?bt.default.this:bt.default.self,S=!("compile"in t&&!a||t.schema===!1);n.assign(f,(0,Ee._)`${v}${(0,xp.callValidateCode)(e,l,w,S)}`,t.modifying)}function m(v){var w;n.if((0,Ee.not)((w=t.valid)!==null&&w!==void 0?w:f),v)}}Le.funcKeywordCode=Np;function Wa(e){let{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,Ee._)`${n.parentData}[${n.parentDataProperty}]`))}function Mp(e,t){let{gen:r}=e;r.if((0,Ee._)`Array.isArray(${t})`,()=>{r.assign(bt.default.vErrors,(0,Ee._)`${bt.default.vErrors} === null ? ${t} : ${bt.default.vErrors}.concat(${t})`).assign(bt.default.errors,(0,Ee._)`${bt.default.vErrors}.length`),(0,Pp.extendErrors)(e)},()=>e.error())}function Fp({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function Ua(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Ee.stringify)(r)})}function kp(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}Le.validSchemaType=kp;function Ip({schema:e,opts:t,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(e[i])){let c=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(c);else throw new Error(c)}}Le.validateKeywordUsage=Ip});var Ha=E(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.extendSubschemaMode=ut.extendSubschemaData=ut.getSubschema=void 0;var We=D(),Ka=K();function jp(e,{keyword:t,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){let a=e.schema[t];return r===void 0?{schema:a,schemaPath:(0,We._)`${e.schemaPath}${(0,We.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[r],schemaPath:(0,We._)`${e.schemaPath}${(0,We.getProperty)(t)}${(0,We.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,Ka.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}ut.getSubschema=jp;function Dp(e,t,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=t;if(r!==void 0){let{errorPath:u,dataPathArr:l,opts:f}=t,d=a.let("data",(0,We._)`${t.data}${(0,We.getProperty)(r)}`,!0);c(d),e.errorPath=(0,We.str)`${u}${(0,Ka.getErrorPath)(r,n,f.jsPropertySyntax)}`,e.parentDataProperty=(0,We._)`${r}`,e.dataPathArr=[...l,e.parentDataProperty]}if(s!==void 0){let u=s instanceof We.Name?s:a.let("data",s,!0);c(u),o!==void 0&&(e.propertyName=o)}i&&(e.dataTypes=i);function c(u){e.data=u,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,u]}}ut.extendSubschemaData=Dp;function qp(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(e.compositeRule=n),s!==void 0&&(e.createErrors=s),i!==void 0&&(e.allErrors=i),e.jtdDiscriminator=t,e.jtdMetadata=r}ut.extendSubschemaMode=qp});var oi=E((yS,za)=>{"use strict";za.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var o=i[s];if(!e(t[o],r[o]))return!1}return!0}return t!==t&&r!==r}});var Ya=E((vS,Ba)=>{"use strict";var ft=Ba.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};On(t,n,s,e,"",e)};ft.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};ft.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};ft.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};ft.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function On(e,t,r,n,s,i,o,a,c,u){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,s,i,o,a,c,u);for(var l in n){var f=n[l];if(Array.isArray(f)){if(l in ft.arrayKeywords)for(var d=0;d<f.length;d++)On(e,t,r,f[d],s+"/"+l+"/"+d,i,s,l,n,d)}else if(l in ft.propsKeywords){if(f&&typeof f=="object")for(var h in f)On(e,t,r,f[h],s+"/"+l+"/"+Gp(h),i,s,l,n,h)}else(l in ft.keywords||e.allKeys&&!(l in ft.skipKeywords))&&On(e,t,r,f,s+"/"+l,i,s,l,n)}r(n,s,i,o,a,c,u)}}function Gp(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}});var Ar=E(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.getSchemaRefs=Oe.resolveUrl=Oe.normalizeId=Oe._getFullPath=Oe.getFullPath=Oe.inlineRef=void 0;var Lp=K(),Wp=oi(),Up=Ya(),Vp=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Kp(e,t=!0){return typeof e=="boolean"?!0:t===!0?!ai(e):t?Ja(e)<=t:!1}Oe.inlineRef=Kp;var Hp=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function ai(e){for(let t in e){if(Hp.has(t))return!0;let r=e[t];if(Array.isArray(r)&&r.some(ai)||typeof r=="object"&&ai(r))return!0}return!1}function Ja(e){let t=0;for(let r in e){if(r==="$ref")return 1/0;if(t++,!Vp.has(r)&&(typeof e[r]=="object"&&(0,Lp.eachItem)(e[r],n=>t+=Ja(n)),t===1/0))return 1/0}return t}function Qa(e,t="",r){r!==!1&&(t=Yt(t));let n=e.parse(t);return Xa(e,n)}Oe.getFullPath=Qa;function Xa(e,t){return e.serialize(t).split("#")[0]+"#"}Oe._getFullPath=Xa;var zp=/#\/?$/;function Yt(e){return e?e.replace(zp,""):""}Oe.normalizeId=Yt;function Bp(e,t,r){return r=Yt(r),e.resolve(t,r)}Oe.resolveUrl=Bp;var Yp=/^[a-z_][-a-z0-9._]*$/i;function Jp(e,t){if(typeof e=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=Yt(e[r]||t),i={"":s},o=Qa(n,s,!1),a={},c=new Set;return Up(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;let g=o+d,m=i[p];typeof f[r]=="string"&&(m=v.call(this,f[r])),w.call(this,f.$anchor),w.call(this,f.$dynamicAnchor),i[d]=m;function v(S){let b=this.opts.uriResolver.resolve;if(S=Yt(m?b(m,S):S),c.has(S))throw l(S);c.add(S);let R=this.refs[S];return typeof R=="string"&&(R=this.refs[R]),typeof R=="object"?u(f,R.schema,S):S!==Yt(g)&&(S[0]==="#"?(u(f,a[S],S),a[S]=f):this.refs[S]=g),S}function w(S){if(typeof S=="string"){if(!Yp.test(S))throw new Error(`invalid anchor "${S}"`);v.call(this,`#${S}`)}}}),a;function u(f,d,h){if(d!==void 0&&!Wp(f,d))throw l(h)}function l(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Oe.getSchemaRefs=Jp});var Pr=E(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.getData=dt.KeywordCxt=dt.validateFunctionCode=void 0;var nc=Na(),Za=Or(),li=Zs(),An=Or(),Qp=qa(),xr=Va(),ci=Ha(),$=D(),F=Ze(),Xp=Ar(),et=K(),$r=Tr();function Zp(e){if(oc(e)&&(ac(e),ic(e))){rm(e);return}sc(e,()=>(0,nc.topBoolOrEmptySchema)(e))}dt.validateFunctionCode=Zp;function sc({gen:e,validateName:t,schema:r,schemaEnv:n,opts:s},i){s.code.es5?e.func(t,(0,$._)`${F.default.data}, ${F.default.valCxt}`,n.$async,()=>{e.code((0,$._)`"use strict"; ${ec(r,s)}`),tm(e,s),e.code(i)}):e.func(t,(0,$._)`${F.default.data}, ${em(s)}`,n.$async,()=>e.code(ec(r,s)).code(i))}function em(e){return(0,$._)`{${F.default.instancePath}="", ${F.default.parentData}, ${F.default.parentDataProperty}, ${F.default.rootData}=${F.default.data}${e.dynamicRef?(0,$._)`, ${F.default.dynamicAnchors}={}`:$.nil}}={}`}function tm(e,t){e.if(F.default.valCxt,()=>{e.var(F.default.instancePath,(0,$._)`${F.default.valCxt}.${F.default.instancePath}`),e.var(F.default.parentData,(0,$._)`${F.default.valCxt}.${F.default.parentData}`),e.var(F.default.parentDataProperty,(0,$._)`${F.default.valCxt}.${F.default.parentDataProperty}`),e.var(F.default.rootData,(0,$._)`${F.default.valCxt}.${F.default.rootData}`),t.dynamicRef&&e.var(F.default.dynamicAnchors,(0,$._)`${F.default.valCxt}.${F.default.dynamicAnchors}`)},()=>{e.var(F.default.instancePath,(0,$._)`""`),e.var(F.default.parentData,(0,$._)`undefined`),e.var(F.default.parentDataProperty,(0,$._)`undefined`),e.var(F.default.rootData,F.default.data),t.dynamicRef&&e.var(F.default.dynamicAnchors,(0,$._)`{}`)})}function rm(e){let{schema:t,opts:r,gen:n}=e;sc(e,()=>{r.$comment&&t.$comment&&lc(e),am(e),n.let(F.default.vErrors,null),n.let(F.default.errors,0),r.unevaluated&&nm(e),cc(e),um(e)})}function nm(e){let{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,$._)`${r}.evaluated`),t.if((0,$._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,$._)`${e.evaluated}.props`,(0,$._)`undefined`)),t.if((0,$._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,$._)`${e.evaluated}.items`,(0,$._)`undefined`))}function ec(e,t){let r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,$._)`/*# sourceURL=${r} */`:$.nil}function sm(e,t){if(oc(e)&&(ac(e),ic(e))){im(e,t);return}(0,nc.boolOrEmptySchema)(e,t)}function ic({schema:e,self:t}){if(typeof e=="boolean")return!e;for(let r in e)if(t.RULES.all[r])return!0;return!1}function oc(e){return typeof e.schema!="boolean"}function im(e,t){let{schema:r,gen:n,opts:s}=e;s.$comment&&r.$comment&&lc(e),cm(e),lm(e);let i=n.const("_errs",F.default.errors);cc(e,i),n.var(t,(0,$._)`${i} === ${F.default.errors}`)}function ac(e){(0,et.checkUnknownRules)(e),om(e)}function cc(e,t){if(e.opts.jtd)return tc(e,[],!1,t);let r=(0,Za.getSchemaTypes)(e.schema),n=(0,Za.coerceAndCheckDataType)(e,r);tc(e,r,!n,t)}function om(e){let{schema:t,errSchemaPath:r,opts:n,self:s}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,et.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function am(e){let{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,et.checkStrictMode)(e,"default is ignored in the schema root")}function cm(e){let t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,Xp.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function lm(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function lc({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)e.code((0,$._)`${F.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let o=(0,$.str)`${n}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,$._)`${F.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function um(e){let{gen:t,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=e;r.$async?t.if((0,$._)`${F.default.errors} === 0`,()=>t.return(F.default.data),()=>t.throw((0,$._)`new ${s}(${F.default.vErrors})`)):(t.assign((0,$._)`${n}.errors`,F.default.vErrors),i.unevaluated&&fm(e),t.return((0,$._)`${F.default.errors} === 0`))}function fm({gen:e,evaluated:t,props:r,items:n}){r instanceof $.Name&&e.assign((0,$._)`${t}.props`,r),n instanceof $.Name&&e.assign((0,$._)`${t}.items`,n)}function tc(e,t,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:c,self:u}=e,{RULES:l}=u;if(i.$ref&&(c.ignoreKeywordsWithRef||!(0,et.schemaHasRulesButRef)(i,l))){s.block(()=>fc(e,"$ref",l.all.$ref.definition));return}c.jtd||dm(e,t),s.block(()=>{for(let d of l.rules)f(d);f(l.post)});function f(d){(0,li.shouldUseGroup)(i,d)&&(d.type?(s.if((0,An.checkDataType)(d.type,o,c.strictNumbers)),rc(e,d),t.length===1&&t[0]===d.type&&r&&(s.else(),(0,An.reportTypeError)(e)),s.endIf()):rc(e,d),a||s.if((0,$._)`${F.default.errors} === ${n||0}`))}}function rc(e,t){let{gen:r,schema:n,opts:{useDefaults:s}}=e;s&&(0,Qp.assignDefaults)(e,t.type),r.block(()=>{for(let i of t.rules)(0,li.shouldUseRule)(n,i)&&fc(e,i.keyword,i.definition,t.type)})}function dm(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(hm(e,t),e.opts.allowUnionTypes||pm(e,t),mm(e,e.dataTypes))}function hm(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{uc(e.dataTypes,r)||ui(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),ym(e,t)}}function pm(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&ui(e,"use allowUnionTypes to allow union type keyword")}function mm(e,t){let r=e.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,li.shouldUseRule)(e.schema,s)){let{type:i}=s.definition;i.length&&!i.some(o=>gm(t,o))&&ui(e,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function gm(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function uc(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function ym(e,t){let r=[];for(let n of e.dataTypes)uc(t,n)?r.push(n):t.includes("integer")&&n==="number"&&r.push("integer");e.dataTypes=r}function ui(e,t){let r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,et.checkStrictMode)(e,t,e.opts.strictTypes)}var $n=class{constructor(t,r,n){if((0,xr.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,et.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",dc(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,xr.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",F.default.errors))}result(t,r,n){this.failResult((0,$.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,$.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);let{schemaCode:r}=this;this.fail((0,$._)`${r} !== undefined && (${(0,$.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?$r.reportExtraError:$r.reportError)(this,this.def.error,r)}$dataError(){(0,$r.reportError)(this,this.def.$dataError||$r.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,$r.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=$.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=$.nil,r=$.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,$.or)((0,$._)`${s} === undefined`,r)),t!==$.nil&&n.assign(t,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==$.nil&&n.assign(t,!1)),n.else()}invalid$data(){let{gen:t,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,$.or)(o(),a());function o(){if(n.length){if(!(r instanceof $.Name))throw new Error("ajv implementation error");let c=Array.isArray(n)?n:[n];return(0,$._)`${(0,An.checkDataTypes)(c,r,i.opts.strictNumbers,An.DataType.Wrong)}`}return $.nil}function a(){if(s.validateSchema){let c=t.scopeValue("validate$data",{ref:s.validateSchema});return(0,$._)`!${c}(${r})`}return $.nil}}subschema(t,r){let n=(0,ci.getSubschema)(this.it,t);(0,ci.extendSubschemaData)(n,this.it,t),(0,ci.extendSubschemaMode)(n,t);let s={...this.it,...n,items:void 0,props:void 0};return sm(s,r),s}mergeEvaluated(t,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&t.props!==void 0&&(n.props=et.mergeEvaluated.props(s,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=et.mergeEvaluated.items(s,t.items,n.items,r)))}mergeValidEvaluated(t,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(t,$.Name)),!0}};dt.KeywordCxt=$n;function fc(e,t,r,n){let s=new $n(e,r,t);"code"in r?r.code(s,n):s.$data&&r.validate?(0,xr.funcKeywordCode)(s,r):"macro"in r?(0,xr.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,xr.funcKeywordCode)(s,r)}var vm=/^\/(?:[^~]|~0|~1)*$/,_m=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function dc(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let s,i;if(e==="")return F.default.rootData;if(e[0]==="/"){if(!vm.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,i=F.default.rootData}else{let u=_m.exec(e);if(!u)throw new Error(`Invalid JSON-pointer: ${e}`);let l=+u[1];if(s=u[2],s==="#"){if(l>=t)throw new Error(c("property/index",l));return n[t-l]}if(l>t)throw new Error(c("data",l));if(i=r[t-l],!s)return i}let o=i,a=s.split("/");for(let u of a)u&&(i=(0,$._)`${i}${(0,$.getProperty)((0,et.unescapeJsonPointer)(u))}`,o=(0,$._)`${o} && ${i}`);return o;function c(u,l){return`Cannot access ${u} ${l} levels up, current level is ${t}`}}dt.getData=dc});var xn=E(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});var fi=class extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}};di.default=fi});var Cr=E(mi=>{"use strict";Object.defineProperty(mi,"__esModule",{value:!0});var hi=Ar(),pi=class extends Error{constructor(t,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,hi.resolveUrl)(t,r,n),this.missingSchema=(0,hi.normalizeId)((0,hi.getFullPath)(t,this.missingRef))}};mi.default=pi});var Cn=E(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.resolveSchema=Ne.getCompilingSchema=Ne.resolveRef=Ne.compileSchema=Ne.SchemaEnv=void 0;var je=D(),wm=xn(),Rt=Ze(),De=Ar(),hc=K(),Em=Pr(),Jt=class{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,De.normalizeId)(n?.[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n?.$async,this.refs={}}};Ne.SchemaEnv=Jt;function yi(e){let t=pc.call(this,e);if(t)return t;let r=(0,De.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new je.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a;e.$async&&(a=o.scopeValue("Error",{ref:wm.default,code:(0,je._)`require("ajv/dist/runtime/validation_error").default`}));let c=o.scopeName("validate");e.validateName=c;let u={gen:o,allErrors:this.opts.allErrors,data:Rt.default.data,parentData:Rt.default.parentData,parentDataProperty:Rt.default.parentDataProperty,dataNames:[Rt.default.data],dataPathArr:[je.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,je.stringify)(e.schema)}:{ref:e.schema}),validateName:c,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:je.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,je._)`""`,opts:this.opts,self:this},l;try{this._compilations.add(e),(0,Em.validateFunctionCode)(u),o.optimize(this.opts.code.optimize);let f=o.toString();l=`${o.scopeRefs(Rt.default.scope)}return ${f}`,this.opts.code.process&&(l=this.opts.code.process(l,e));let h=new Function(`${Rt.default.self}`,`${Rt.default.scope}`,l)(this,this.scope.get());if(this.scope.value(c,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:c,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){let{props:p,items:g}=u;h.evaluated={props:p instanceof je.Name?void 0:p,items:g instanceof je.Name?void 0:g,dynamicProps:p instanceof je.Name,dynamicItems:g instanceof je.Name},h.source&&(h.source.evaluated=(0,je.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,l&&this.logger.error("Error compiling schema, function code:",l),f}finally{this._compilations.delete(e)}}Ne.compileSchema=yi;function Sm(e,t,r){var n;r=(0,De.resolveUrl)(this.opts.uriResolver,t,r);let s=e.refs[r];if(s)return s;let i=Tm.call(this,e,r);if(i===void 0){let o=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new Jt({schema:o,schemaId:a,root:e,baseId:t}))}if(i!==void 0)return e.refs[r]=bm.call(this,i)}Ne.resolveRef=Sm;function bm(e){return(0,De.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:yi.call(this,e)}function pc(e){for(let t of this._compilations)if(Rm(t,e))return t}Ne.getCompilingSchema=pc;function Rm(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Tm(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||Pn.call(this,e,t)}function Pn(e,t){let r=this.opts.uriResolver.parse(t),n=(0,De._getFullPath)(this.opts.uriResolver,r),s=(0,De.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===s)return gi.call(this,r,e);let i=(0,De.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let a=Pn.call(this,e,o);return typeof a?.schema!="object"?void 0:gi.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||yi.call(this,o),i===(0,De.normalizeId)(t)){let{schema:a}=o,{schemaId:c}=this.opts,u=a[c];return u&&(s=(0,De.resolveUrl)(this.opts.uriResolver,s,u)),new Jt({schema:a,schemaId:c,root:e,baseId:s})}return gi.call(this,r,o)}}Ne.resolveSchema=Pn;var Om=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function gi(e,{baseId:t,schema:r,root:n}){var s;if(((s=e.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let c=r[(0,hc.unescapeFragment)(a)];if(c===void 0)return;r=c;let u=typeof r=="object"&&r[this.opts.schemaId];!Om.has(a)&&u&&(t=(0,De.resolveUrl)(this.opts.uriResolver,t,u))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,hc.schemaHasRulesButRef)(r,this.RULES)){let a=(0,De.resolveUrl)(this.opts.uriResolver,t,r.$ref);i=Pn.call(this,n,a)}let{schemaId:o}=this.opts;if(i=i||new Jt({schema:r,schemaId:o,root:n,baseId:t}),i.schema!==i.root.schema)return i}});var mc=E((RS,Am)=>{Am.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var yc=E((TS,gc)=>{"use strict";var $m={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};gc.exports={HEX:$m}});var Tc=E((OS,Rc)=>{"use strict";var{HEX:xm}=yc();function Ec(e){if(bc(e,".")<3)return{host:e,isIPV4:!1};let t=e.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[r]=t;return r?{host:Cm(r,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function vi(e,t=!1){let r="",n=!0;for(let s of e){if(xm[s]===void 0)return;s!=="0"&&n===!0&&(n=!1),n||(r+=s)}return t&&r.length===0&&(r="0"),r}function Pm(e){let t=0,r={error:!1,address:"",zone:""},n=[],s=[],i=!1,o=!1,a=!1;function c(){if(s.length){if(i===!1){let u=vi(s);if(u!==void 0)n.push(u);else return r.error=!0,!1}s.length=0}return!0}for(let u=0;u<e.length;u++){let l=e[u];if(!(l==="["||l==="]"))if(l===":"){if(o===!0&&(a=!0),!c())break;if(t++,n.push(":"),t>7){r.error=!0;break}u-1>=0&&e[u-1]===":"&&(o=!0);continue}else if(l==="%"){if(!c())break;i=!0}else{s.push(l);continue}}return s.length&&(i?r.zone=s.join(""):a?n.push(s.join("")):n.push(vi(s))),r.address=n.join(""),r}function Sc(e,t={}){if(bc(e,":")<2)return{host:e,isIPV6:!1};let r=Pm(e);if(r.error)return{host:e,isIPV6:!1};{let n=r.address,s=r.address;return r.zone&&(n+="%"+r.zone,s+="%25"+r.zone),{host:n,escapedHost:s,isIPV6:!0}}}function Cm(e,t){let r="",n=!0,s=e.length;for(let i=0;i<s;i++){let o=e[i];o==="0"&&n?(i+1<=s&&e[i+1]===t||i+1===s)&&(r+=o,n=!1):(o===t?n=!0:n=!1,r+=o)}return r}function bc(e,t){let r=0;for(let n=0;n<e.length;n++)e[n]===t&&r++;return r}var vc=/^\.\.?\//u,_c=/^\/\.(?:\/|$)/u,wc=/^\/\.\.(?:\/|$)/u,Nm=/^\/?(?:.|\n)*?(?=\/|$)/u;function Mm(e){let t=[];for(;e.length;)if(e.match(vc))e=e.replace(vc,"");else if(e.match(_c))e=e.replace(_c,"/");else if(e.match(wc))e=e.replace(wc,"/"),t.pop();else if(e==="."||e==="..")e="";else{let r=e.match(Nm);if(r){let n=r[0];e=e.slice(n.length),t.push(n)}else throw new Error("Unexpected dot segment condition")}return t.join("")}function Fm(e,t){let r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function km(e,t){let r=[];if(e.userinfo!==void 0&&(r.push(e.userinfo),r.push("@")),e.host!==void 0){let n=unescape(e.host),s=Ec(n);if(s.isIPV4)n=s.host;else{let i=Sc(s.host,{isIPV4:!1});i.isIPV6===!0?n=`[${i.escapedHost}]`:n=e.host}r.push(n)}return(typeof e.port=="number"||typeof e.port=="string")&&(r.push(":"),r.push(String(e.port))),r.length?r.join(""):void 0}Rc.exports={recomposeAuthority:km,normalizeComponentEncoding:Fm,removeDotSegments:Mm,normalizeIPv4:Ec,normalizeIPv6:Sc,stringArrayToHexStripped:vi}});var Cc=E((AS,Pc)=>{"use strict";var Im=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,jm=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function Oc(e){return typeof e.secure=="boolean"?e.secure:String(e.scheme).toLowerCase()==="wss"}function Ac(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function $c(e){let t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function Dm(e){return e.secure=Oc(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function qm(e){if((e.port===(Oc(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){let[t,r]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function Gm(e,t){if(!e.path)return e.error="URN can not be parsed",e;let r=e.path.match(jm);if(r){let n=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];let s=`${n}:${t.nid||e.nid}`,i=_i[s];e.path=void 0,i&&(e=i.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function Lm(e,t){let r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase(),s=`${r}:${t.nid||n}`,i=_i[s];i&&(e=i.serialize(e,t));let o=e,a=e.nss;return o.path=`${n||t.nid}:${a}`,t.skipEscape=!0,o}function Wm(e,t){let r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!Im.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function Um(e){let t=e;return t.nss=(e.uuid||"").toLowerCase(),t}var xc={scheme:"http",domainHost:!0,parse:Ac,serialize:$c},Vm={scheme:"https",domainHost:xc.domainHost,parse:Ac,serialize:$c},Nn={scheme:"ws",domainHost:!0,parse:Dm,serialize:qm},Km={scheme:"wss",domainHost:Nn.domainHost,parse:Nn.parse,serialize:Nn.serialize},Hm={scheme:"urn",parse:Gm,serialize:Lm,skipNormalize:!0},zm={scheme:"urn:uuid",parse:Wm,serialize:Um,skipNormalize:!0},_i={http:xc,https:Vm,ws:Nn,wss:Km,urn:Hm,"urn:uuid":zm};Pc.exports=_i});var Mc=E(($S,Fn)=>{"use strict";var{normalizeIPv6:Bm,normalizeIPv4:Ym,removeDotSegments:Nr,recomposeAuthority:Jm,normalizeComponentEncoding:Mn}=Tc(),wi=Cc();function Qm(e,t){return typeof e=="string"?e=Ue(tt(e,t),t):typeof e=="object"&&(e=tt(Ue(e,t),t)),e}function Xm(e,t,r){let n=Object.assign({scheme:"null"},r),s=Nc(tt(e,n),tt(t,n),n,!0);return Ue(s,{...n,skipEscape:!0})}function Nc(e,t,r,n){let s={};return n||(e=tt(Ue(e,r),r),t=tt(Ue(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(s.scheme=t.scheme,s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=Nr(t.path||""),s.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=Nr(t.path||""),s.query=t.query):(t.path?(t.path.charAt(0)==="/"?s.path=Nr(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?s.path="/"+t.path:e.path?s.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:s.path=t.path,s.path=Nr(s.path)),s.query=t.query):(s.path=e.path,t.query!==void 0?s.query=t.query:s.query=e.query),s.userinfo=e.userinfo,s.host=e.host,s.port=e.port),s.scheme=e.scheme),s.fragment=t.fragment,s}function Zm(e,t,r){return typeof e=="string"?(e=unescape(e),e=Ue(Mn(tt(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=Ue(Mn(e,!0),{...r,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=Ue(Mn(tt(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=Ue(Mn(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function Ue(e,t){let r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},n=Object.assign({},t),s=[],i=wi[(n.scheme||r.scheme||"").toLowerCase()];i&&i.serialize&&i.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&(s.push(r.scheme),s.push(":"));let o=Jm(r,n);if(o!==void 0&&(n.reference!=="suffix"&&s.push("//"),s.push(o),r.path&&r.path.charAt(0)!=="/"&&s.push("/")),r.path!==void 0){let a=r.path;!n.absolutePath&&(!i||!i.absolutePath)&&(a=Nr(a)),o===void 0&&(a=a.replace(/^\/\//u,"/%2F")),s.push(a)}return r.query!==void 0&&(s.push("?"),s.push(r.query)),r.fragment!==void 0&&(s.push("#"),s.push(r.fragment)),s.join("")}var eg=Array.from({length:127},(e,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t)));function tg(e){let t=0;for(let r=0,n=e.length;r<n;++r)if(t=e.charCodeAt(r),t>126||eg[t])return!0;return!1}var rg=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function tt(e,t){let r=Object.assign({},t),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},s=e.indexOf("%")!==-1,i=!1;r.reference==="suffix"&&(e=(r.scheme?r.scheme+":":"")+"//"+e);let o=e.match(rg);if(o){if(n.scheme=o[1],n.userinfo=o[3],n.host=o[4],n.port=parseInt(o[5],10),n.path=o[6]||"",n.query=o[7],n.fragment=o[8],isNaN(n.port)&&(n.port=o[5]),n.host){let c=Ym(n.host);if(c.isIPV4===!1){let u=Bm(c.host,{isIPV4:!1});n.host=u.host.toLowerCase(),i=u.isIPV6}else n.host=c.host,i=!0}n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&!n.path&&n.query===void 0?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");let a=wi[(r.scheme||n.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!a||!a.unicodeSupport)&&n.host&&(r.domainHost||a&&a.domainHost)&&i===!1&&tg(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(c){n.error=n.error||"Host's domain name can not be converted to ASCII: "+c}(!a||a&&!a.skipNormalize)&&(s&&n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),s&&n.userinfo!==void 0&&(n.userinfo=unescape(n.userinfo)),s&&n.host!==void 0&&(n.host=unescape(n.host)),n.path!==void 0&&n.path.length&&(n.path=escape(unescape(n.path))),n.fragment!==void 0&&n.fragment.length&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),a&&a.parse&&a.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}var Ei={SCHEMES:wi,normalize:Qm,resolve:Xm,resolveComponents:Nc,equal:Zm,serialize:Ue,parse:tt};Fn.exports=Ei;Fn.exports.default=Ei;Fn.exports.fastUri=Ei});var kc=E(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});var Fc=Mc();Fc.code='require("ajv/dist/runtime/uri").default';Si.default=Fc});var Uc=E(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.CodeGen=ue.Name=ue.nil=ue.stringify=ue.str=ue._=ue.KeywordCxt=void 0;var ng=Pr();Object.defineProperty(ue,"KeywordCxt",{enumerable:!0,get:function(){return ng.KeywordCxt}});var Qt=D();Object.defineProperty(ue,"_",{enumerable:!0,get:function(){return Qt._}});Object.defineProperty(ue,"str",{enumerable:!0,get:function(){return Qt.str}});Object.defineProperty(ue,"stringify",{enumerable:!0,get:function(){return Qt.stringify}});Object.defineProperty(ue,"nil",{enumerable:!0,get:function(){return Qt.nil}});Object.defineProperty(ue,"Name",{enumerable:!0,get:function(){return Qt.Name}});Object.defineProperty(ue,"CodeGen",{enumerable:!0,get:function(){return Qt.CodeGen}});var sg=xn(),Gc=Cr(),ig=Xs(),Mr=Cn(),og=D(),Fr=Ar(),kn=Or(),Ri=K(),Ic=mc(),ag=kc(),Lc=(e,t)=>new RegExp(e,t);Lc.code="new RegExp";var cg=["removeAdditional","useDefaults","coerceTypes"],lg=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),ug={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},fg={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},jc=200;function dg(e){var t,r,n,s,i,o,a,c,u,l,f,d,h,p,g,m,v,w,S,b,R,C,L,be,x;let M=e.strict,P=(t=e.code)===null||t===void 0?void 0:t.optimize,z=P===!0||P===void 0?1:P||0,re=(n=(r=e.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:Lc,ie=(s=e.uriResolver)!==null&&s!==void 0?s:ag.default;return{strictSchema:(o=(i=e.strictSchema)!==null&&i!==void 0?i:M)!==null&&o!==void 0?o:!0,strictNumbers:(c=(a=e.strictNumbers)!==null&&a!==void 0?a:M)!==null&&c!==void 0?c:!0,strictTypes:(l=(u=e.strictTypes)!==null&&u!==void 0?u:M)!==null&&l!==void 0?l:"log",strictTuples:(d=(f=e.strictTuples)!==null&&f!==void 0?f:M)!==null&&d!==void 0?d:"log",strictRequired:(p=(h=e.strictRequired)!==null&&h!==void 0?h:M)!==null&&p!==void 0?p:!1,code:e.code?{...e.code,optimize:z,regExp:re}:{optimize:z,regExp:re},loopRequired:(g=e.loopRequired)!==null&&g!==void 0?g:jc,loopEnum:(m=e.loopEnum)!==null&&m!==void 0?m:jc,meta:(v=e.meta)!==null&&v!==void 0?v:!0,messages:(w=e.messages)!==null&&w!==void 0?w:!0,inlineRefs:(S=e.inlineRefs)!==null&&S!==void 0?S:!0,schemaId:(b=e.schemaId)!==null&&b!==void 0?b:"$id",addUsedSchema:(R=e.addUsedSchema)!==null&&R!==void 0?R:!0,validateSchema:(C=e.validateSchema)!==null&&C!==void 0?C:!0,validateFormats:(L=e.validateFormats)!==null&&L!==void 0?L:!0,unicodeRegExp:(be=e.unicodeRegExp)!==null&&be!==void 0?be:!0,int32range:(x=e.int32range)!==null&&x!==void 0?x:!0,uriResolver:ie}}var kr=class{constructor(t={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts={...t,...dg(t)};let{es5:r,lines:n}=this.opts.code;this.scope=new og.ValueScope({scope:{},prefixes:lg,es5:r,lines:n}),this.logger=vg(t.logger);let s=t.validateFormats;t.validateFormats=!1,this.RULES=(0,ig.getRules)(),Dc.call(this,ug,t,"NOT SUPPORTED"),Dc.call(this,fg,t,"DEPRECATED","warn"),this._metaOpts=gg.call(this),t.formats&&pg.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&mg.call(this,t.keywords),typeof t.meta=="object"&&this.addMetaSchema(t.meta),hg.call(this),t.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:t,meta:r,schemaId:n}=this.opts,s=Ic;n==="id"&&(s={...Ic},s.id=s.$id,delete s.$id),r&&t&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:t,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof t=="object"?t[r]||t:void 0}validate(t,r){let n;if(typeof t=="string"){if(n=this.getSchema(t),!n)throw new Error(`no schema with key or ref "${t}"`)}else n=this.compile(t);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(t,r){let n=this._addSchema(t,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(t,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,t,r);async function s(l,f){await i.call(this,l.$schema);let d=this._addSchema(l,f);return d.validate||o.call(this,d)}async function i(l){l&&!this.getSchema(l)&&await s.call(this,{$ref:l},!0)}async function o(l){try{return this._compileSchemaEnv(l)}catch(f){if(!(f instanceof Gc.default))throw f;return a.call(this,f),await c.call(this,f.missingSchema),o.call(this,l)}}function a({missingSchema:l,missingRef:f}){if(this.refs[l])throw new Error(`AnySchema ${l} is loaded but ${f} cannot be resolved`)}async function c(l){let f=await u.call(this,l);this.refs[l]||await i.call(this,f.$schema),this.refs[l]||this.addSchema(f,l,r)}async function u(l){let f=this._loading[l];if(f)return f;try{return await(this._loading[l]=n(l))}finally{delete this._loading[l]}}}addSchema(t,r,n,s=this.opts.validateSchema){if(Array.isArray(t)){for(let o of t)this.addSchema(o,void 0,n,s);return this}let i;if(typeof t=="object"){let{schemaId:o}=this.opts;if(i=t[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,Fr.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(t,n,r,s,!0),this}addMetaSchema(t,r,n=this.opts.validateSchema){return this.addSchema(t,r,!0,n),this}validateSchema(t,r){if(typeof t=="boolean")return!0;let n;if(n=t.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,t);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(t){let r;for(;typeof(r=qc.call(this,t))=="string";)t=r;if(r===void 0){let{schemaId:n}=this.opts,s=new Mr.SchemaEnv({schema:{},schemaId:n});if(r=Mr.resolveSchema.call(this,s,t),!r)return;this.refs[t]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(t){if(t instanceof RegExp)return this._removeAllSchemas(this.schemas,t),this._removeAllSchemas(this.refs,t),this;switch(typeof t){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=qc.call(this,t);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[t],delete this.refs[t],this}case"object":{let r=t;this._cache.delete(r);let n=t[this.opts.schemaId];return n&&(n=(0,Fr.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(t){for(let r of t)this.addKeyword(r);return this}addKeyword(t,r){let n;if(typeof t=="string")n=t,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof t=="object"&&r===void 0){if(r=t,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(wg.call(this,n,r),!r)return(0,Ri.eachItem)(n,i=>bi.call(this,i)),this;Sg.call(this,r);let s={...r,type:(0,kn.getJSONTypes)(r.type),schemaType:(0,kn.getJSONTypes)(r.schemaType)};return(0,Ri.eachItem)(n,s.type.length===0?i=>bi.call(this,i,s):i=>s.type.forEach(o=>bi.call(this,i,s,o))),this}getKeyword(t){let r=this.RULES.all[t];return typeof r=="object"?r.definition:!!r}removeKeyword(t){let{RULES:r}=this;delete r.keywords[t],delete r.all[t];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===t);s>=0&&n.rules.splice(s,1)}return this}addFormat(t,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[t]=r,this}errorsText(t=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!t||t.length===0?"No errors":t.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(t,r){let n=this.RULES.all;t=JSON.parse(JSON.stringify(t));for(let s of r){let i=s.split("/").slice(1),o=t;for(let a of i)o=o[a];for(let a in n){let c=n[a];if(typeof c!="object")continue;let{$data:u}=c.definition,l=o[a];u&&l&&(o[a]=Wc(l))}}return t}_removeAllSchemas(t,r){for(let n in t){let s=t[n];(!r||r.test(n))&&(typeof s=="string"?delete t[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete t[n]))}}_addSchema(t,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof t=="object")o=t[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof t!="boolean")throw new Error("schema must be object or boolean")}let c=this._cache.get(t);if(c!==void 0)return c;n=(0,Fr.normalizeId)(o||n);let u=Fr.getSchemaRefs.call(this,t,n);return c=new Mr.SchemaEnv({schema:t,schemaId:a,meta:r,baseId:n,localRefs:u}),this._cache.set(c.schema,c),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=c),s&&this.validateSchema(t,!0),c}_checkUnique(t){if(this.schemas[t]||this.refs[t])throw new Error(`schema with key or id "${t}" already exists`)}_compileSchemaEnv(t){if(t.meta?this._compileMetaSchema(t):Mr.compileSchema.call(this,t),!t.validate)throw new Error("ajv implementation error");return t.validate}_compileMetaSchema(t){let r=this.opts;this.opts=this._metaOpts;try{Mr.compileSchema.call(this,t)}finally{this.opts=r}}};kr.ValidationError=sg.default;kr.MissingRefError=Gc.default;ue.default=kr;function Dc(e,t,r,n="error"){for(let s in e){let i=s;i in t&&this.logger[n](`${r}: option ${s}. ${e[i]}`)}}function qc(e){return e=(0,Fr.normalizeId)(e),this.schemas[e]||this.refs[e]}function hg(){let e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(let t in e)this.addSchema(e[t],t)}function pg(){for(let e in this.opts.formats){let t=this.opts.formats[e];t&&this.addFormat(e,t)}}function mg(e){if(Array.isArray(e)){this.addVocabulary(e);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let t in e){let r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}function gg(){let e={...this.opts};for(let t of cg)delete e[t];return e}var yg={log(){},warn(){},error(){}};function vg(e){if(e===!1)return yg;if(e===void 0)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}var _g=/^[a-z_$][a-z0-9_$:-]*$/i;function wg(e,t){let{RULES:r}=this;if((0,Ri.eachItem)(e,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!_g.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!t&&t.$data&&!("code"in t||"validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function bi(e,t,r){var n;let s=t?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=s?i.post:i.rules.find(({type:c})=>c===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[e]=!0,!t)return;let a={keyword:e,definition:{...t,type:(0,kn.getJSONTypes)(t.type),schemaType:(0,kn.getJSONTypes)(t.schemaType)}};t.before?Eg.call(this,o,a,t.before):o.rules.push(a),i.all[e]=a,(n=t.implements)===null||n===void 0||n.forEach(c=>this.addKeyword(c))}function Eg(e,t,r){let n=e.rules.findIndex(s=>s.keyword===r);n>=0?e.rules.splice(n,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function Sg(e){let{metaSchema:t}=e;t!==void 0&&(e.$data&&this.opts.$data&&(t=Wc(t)),e.validateSchema=this.compile(t,!0))}var bg={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Wc(e){return{anyOf:[e,bg]}}});var Vc=E(Ti=>{"use strict";Object.defineProperty(Ti,"__esModule",{value:!0});var Rg={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Ti.default=Rg});var Bc=E(Tt=>{"use strict";Object.defineProperty(Tt,"__esModule",{value:!0});Tt.callRef=Tt.getValidate=void 0;var Tg=Cr(),Kc=Ce(),Ae=D(),Xt=Ze(),Hc=Cn(),In=K(),Og={keyword:"$ref",schemaType:"string",code(e){let{gen:t,schema:r,it:n}=e,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:c}=n,{root:u}=i;if((r==="#"||r==="#/")&&s===u.baseId)return f();let l=Hc.resolveRef.call(c,u,s,r);if(l===void 0)throw new Tg.default(n.opts.uriResolver,s,r);if(l instanceof Hc.SchemaEnv)return d(l);return h(l);function f(){if(i===u)return jn(e,o,i,i.$async);let p=t.scopeValue("root",{ref:u});return jn(e,(0,Ae._)`${p}.validate`,u,u.$async)}function d(p){let g=zc(e,p);jn(e,g,p,p.$async)}function h(p){let g=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Ae.stringify)(p)}:{ref:p}),m=t.name("valid"),v=e.subschema({schema:p,dataTypes:[],schemaPath:Ae.nil,topSchemaRef:g,errSchemaPath:r},m);e.mergeEvaluated(v),e.ok(m)}}};function zc(e,t){let{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,Ae._)`${r.scopeValue("wrapper",{ref:t})}.validate`}Tt.getValidate=zc;function jn(e,t,r,n){let{gen:s,it:i}=e,{allErrors:o,schemaEnv:a,opts:c}=i,u=c.passContext?Xt.default.this:Ae.nil;n?l():f();function l(){if(!a.$async)throw new Error("async schema referenced by sync schema");let p=s.let("valid");s.try(()=>{s.code((0,Ae._)`await ${(0,Kc.callValidateCode)(e,t,u)}`),h(t),o||s.assign(p,!0)},g=>{s.if((0,Ae._)`!(${g} instanceof ${i.ValidationError})`,()=>s.throw(g)),d(g),o||s.assign(p,!1)}),e.ok(p)}function f(){e.result((0,Kc.callValidateCode)(e,t,u),()=>h(t),()=>d(t))}function d(p){let g=(0,Ae._)`${p}.errors`;s.assign(Xt.default.vErrors,(0,Ae._)`${Xt.default.vErrors} === null ? ${g} : ${Xt.default.vErrors}.concat(${g})`),s.assign(Xt.default.errors,(0,Ae._)`${Xt.default.vErrors}.length`)}function h(p){var g;if(!i.opts.unevaluated)return;let m=(g=r?.validate)===null||g===void 0?void 0:g.evaluated;if(i.props!==!0)if(m&&!m.dynamicProps)m.props!==void 0&&(i.props=In.mergeEvaluated.props(s,m.props,i.props));else{let v=s.var("props",(0,Ae._)`${p}.evaluated.props`);i.props=In.mergeEvaluated.props(s,v,i.props,Ae.Name)}if(i.items!==!0)if(m&&!m.dynamicItems)m.items!==void 0&&(i.items=In.mergeEvaluated.items(s,m.items,i.items));else{let v=s.var("items",(0,Ae._)`${p}.evaluated.items`);i.items=In.mergeEvaluated.items(s,v,i.items,Ae.Name)}}}Tt.callRef=jn;Tt.default=Og});var Yc=E(Oi=>{"use strict";Object.defineProperty(Oi,"__esModule",{value:!0});var Ag=Vc(),$g=Bc(),xg=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Ag.default,$g.default];Oi.default=xg});var Jc=E(Ai=>{"use strict";Object.defineProperty(Ai,"__esModule",{value:!0});var Dn=D(),ht=Dn.operators,qn={maximum:{okStr:"<=",ok:ht.LTE,fail:ht.GT},minimum:{okStr:">=",ok:ht.GTE,fail:ht.LT},exclusiveMaximum:{okStr:"<",ok:ht.LT,fail:ht.GTE},exclusiveMinimum:{okStr:">",ok:ht.GT,fail:ht.LTE}},Pg={message:({keyword:e,schemaCode:t})=>(0,Dn.str)`must be ${qn[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,Dn._)`{comparison: ${qn[e].okStr}, limit: ${t}}`},Cg={keyword:Object.keys(qn),type:"number",schemaType:"number",$data:!0,error:Pg,code(e){let{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,Dn._)`${r} ${qn[t].fail} ${n} || isNaN(${r})`)}};Ai.default=Cg});var Qc=E($i=>{"use strict";Object.defineProperty($i,"__esModule",{value:!0});var Ir=D(),Ng={message:({schemaCode:e})=>(0,Ir.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Ir._)`{multipleOf: ${e}}`},Mg={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Ng,code(e){let{gen:t,data:r,schemaCode:n,it:s}=e,i=s.opts.multipleOfPrecision,o=t.let("res"),a=i?(0,Ir._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,Ir._)`${o} !== parseInt(${o})`;e.fail$data((0,Ir._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};$i.default=Mg});var Zc=E(xi=>{"use strict";Object.defineProperty(xi,"__esModule",{value:!0});function Xc(e){let t=e.length,r=0,n=0,s;for(;n<t;)r++,s=e.charCodeAt(n++),s>=55296&&s<=56319&&n<t&&(s=e.charCodeAt(n),(s&64512)===56320&&n++);return r}xi.default=Xc;Xc.code='require("ajv/dist/runtime/ucs2length").default'});var el=E(Pi=>{"use strict";Object.defineProperty(Pi,"__esModule",{value:!0});var Ot=D(),Fg=K(),kg=Zc(),Ig={message({keyword:e,schemaCode:t}){let r=e==="maxLength"?"more":"fewer";return(0,Ot.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,Ot._)`{limit: ${e}}`},jg={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Ig,code(e){let{keyword:t,data:r,schemaCode:n,it:s}=e,i=t==="maxLength"?Ot.operators.GT:Ot.operators.LT,o=s.opts.unicode===!1?(0,Ot._)`${r}.length`:(0,Ot._)`${(0,Fg.useFunc)(e.gen,kg.default)}(${r})`;e.fail$data((0,Ot._)`${o} ${i} ${n}`)}};Pi.default=jg});var tl=E(Ci=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});var Dg=Ce(),Gn=D(),qg={message:({schemaCode:e})=>(0,Gn.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,Gn._)`{pattern: ${e}}`},Gg={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:qg,code(e){let{data:t,$data:r,schema:n,schemaCode:s,it:i}=e,o=i.opts.unicodeRegExp?"u":"",a=r?(0,Gn._)`(new RegExp(${s}, ${o}))`:(0,Dg.usePattern)(e,n);e.fail$data((0,Gn._)`!${a}.test(${t})`)}};Ci.default=Gg});var rl=E(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});var jr=D(),Lg={message({keyword:e,schemaCode:t}){let r=e==="maxProperties"?"more":"fewer";return(0,jr.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,jr._)`{limit: ${e}}`},Wg={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Lg,code(e){let{keyword:t,data:r,schemaCode:n}=e,s=t==="maxProperties"?jr.operators.GT:jr.operators.LT;e.fail$data((0,jr._)`Object.keys(${r}).length ${s} ${n}`)}};Ni.default=Wg});var nl=E(Mi=>{"use strict";Object.defineProperty(Mi,"__esModule",{value:!0});var Dr=Ce(),qr=D(),Ug=K(),Vg={message:({params:{missingProperty:e}})=>(0,qr.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,qr._)`{missingProperty: ${e}}`},Kg={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Vg,code(e){let{gen:t,schema:r,schemaCode:n,data:s,$data:i,it:o}=e,{opts:a}=o;if(!i&&r.length===0)return;let c=r.length>=a.loopRequired;if(o.allErrors?u():l(),a.strictRequired){let h=e.parentSchema.properties,{definedProperties:p}=e.it;for(let g of r)if(h?.[g]===void 0&&!p.has(g)){let m=o.schemaEnv.baseId+o.errSchemaPath,v=`required property "${g}" is not defined at "${m}" (strictRequired)`;(0,Ug.checkStrictMode)(o,v,o.opts.strictRequired)}}function u(){if(c||i)e.block$data(qr.nil,f);else for(let h of r)(0,Dr.checkReportMissingProp)(e,h)}function l(){let h=t.let("missing");if(c||i){let p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,Dr.checkMissingProp)(e,r,h)),(0,Dr.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",n,h=>{e.setParams({missingProperty:h}),t.if((0,Dr.noPropertyInData)(t,s,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,n,()=>{t.assign(p,(0,Dr.propertyInData)(t,s,h,a.ownProperties)),t.if((0,qr.not)(p),()=>{e.error(),t.break()})},qr.nil)}}};Mi.default=Kg});var sl=E(Fi=>{"use strict";Object.defineProperty(Fi,"__esModule",{value:!0});var Gr=D(),Hg={message({keyword:e,schemaCode:t}){let r=e==="maxItems"?"more":"fewer";return(0,Gr.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,Gr._)`{limit: ${e}}`},zg={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Hg,code(e){let{keyword:t,data:r,schemaCode:n}=e,s=t==="maxItems"?Gr.operators.GT:Gr.operators.LT;e.fail$data((0,Gr._)`${r}.length ${s} ${n}`)}};Fi.default=zg});var Ln=E(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});var il=oi();il.code='require("ajv/dist/runtime/equal").default';ki.default=il});var ol=E(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});var Ii=Or(),fe=D(),Bg=K(),Yg=Ln(),Jg={message:({params:{i:e,j:t}})=>(0,fe.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,fe._)`{i: ${e}, j: ${t}}`},Qg={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Jg,code(e){let{gen:t,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=e;if(!n&&!s)return;let c=t.let("valid"),u=i.items?(0,Ii.getSchemaTypes)(i.items):[];e.block$data(c,l,(0,fe._)`${o} === false`),e.ok(c);function l(){let p=t.let("i",(0,fe._)`${r}.length`),g=t.let("j");e.setParams({i:p,j:g}),t.assign(c,!0),t.if((0,fe._)`${p} > 1`,()=>(f()?d:h)(p,g))}function f(){return u.length>0&&!u.some(p=>p==="object"||p==="array")}function d(p,g){let m=t.name("item"),v=(0,Ii.checkDataTypes)(u,m,a.opts.strictNumbers,Ii.DataType.Wrong),w=t.const("indices",(0,fe._)`{}`);t.for((0,fe._)`;${p}--;`,()=>{t.let(m,(0,fe._)`${r}[${p}]`),t.if(v,(0,fe._)`continue`),u.length>1&&t.if((0,fe._)`typeof ${m} == "string"`,(0,fe._)`${m} += "_"`),t.if((0,fe._)`typeof ${w}[${m}] == "number"`,()=>{t.assign(g,(0,fe._)`${w}[${m}]`),e.error(),t.assign(c,!1).break()}).code((0,fe._)`${w}[${m}] = ${p}`)})}function h(p,g){let m=(0,Bg.useFunc)(t,Yg.default),v=t.name("outer");t.label(v).for((0,fe._)`;${p}--;`,()=>t.for((0,fe._)`${g} = ${p}; ${g}--;`,()=>t.if((0,fe._)`${m}(${r}[${p}], ${r}[${g}])`,()=>{e.error(),t.assign(c,!1).break(v)})))}}};ji.default=Qg});var al=E(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});var Di=D(),Xg=K(),Zg=Ln(),ey={message:"must be equal to constant",params:({schemaCode:e})=>(0,Di._)`{allowedValue: ${e}}`},ty={keyword:"const",$data:!0,error:ey,code(e){let{gen:t,data:r,$data:n,schemaCode:s,schema:i}=e;n||i&&typeof i=="object"?e.fail$data((0,Di._)`!${(0,Xg.useFunc)(t,Zg.default)}(${r}, ${s})`):e.fail((0,Di._)`${i} !== ${r}`)}};qi.default=ty});var cl=E(Gi=>{"use strict";Object.defineProperty(Gi,"__esModule",{value:!0});var Lr=D(),ry=K(),ny=Ln(),sy={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,Lr._)`{allowedValues: ${e}}`},iy={keyword:"enum",schemaType:"array",$data:!0,error:sy,code(e){let{gen:t,data:r,$data:n,schema:s,schemaCode:i,it:o}=e;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,c,u=()=>c??(c=(0,ry.useFunc)(t,ny.default)),l;if(a||n)l=t.let("valid"),e.block$data(l,f);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let h=t.const("vSchema",i);l=(0,Lr.or)(...s.map((p,g)=>d(h,g)))}e.pass(l);function f(){t.assign(l,!1),t.forOf("v",i,h=>t.if((0,Lr._)`${u()}(${r}, ${h})`,()=>t.assign(l,!0).break()))}function d(h,p){let g=s[p];return typeof g=="object"&&g!==null?(0,Lr._)`${u()}(${r}, ${h}[${p}])`:(0,Lr._)`${r} === ${g}`}}};Gi.default=iy});var ll=E(Li=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});var oy=Jc(),ay=Qc(),cy=el(),ly=tl(),uy=rl(),fy=nl(),dy=sl(),hy=ol(),py=al(),my=cl(),gy=[oy.default,ay.default,cy.default,ly.default,uy.default,fy.default,dy.default,hy.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},py.default,my.default];Li.default=gy});var Ui=E(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.validateAdditionalItems=void 0;var At=D(),Wi=K(),yy={message:({params:{len:e}})=>(0,At.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,At._)`{limit: ${e}}`},vy={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:yy,code(e){let{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,Wi.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}ul(e,n)}};function ul(e,t){let{gen:r,schema:n,data:s,keyword:i,it:o}=e;o.items=!0;let a=r.const("len",(0,At._)`${s}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,At._)`${a} <= ${t.length}`);else if(typeof n=="object"&&!(0,Wi.alwaysValidSchema)(o,n)){let u=r.var("valid",(0,At._)`${a} <= ${t.length}`);r.if((0,At.not)(u),()=>c(u)),e.ok(u)}function c(u){r.forRange("i",t.length,a,l=>{e.subschema({keyword:i,dataProp:l,dataPropType:Wi.Type.Num},u),o.allErrors||r.if((0,At.not)(u),()=>r.break())})}}Wr.validateAdditionalItems=ul;Wr.default=vy});var Vi=E(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.validateTuple=void 0;var fl=D(),Wn=K(),_y=Ce(),wy={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){let{schema:t,it:r}=e;if(Array.isArray(t))return dl(e,"additionalItems",t);r.items=!0,!(0,Wn.alwaysValidSchema)(r,t)&&e.ok((0,_y.validateArray)(e))}};function dl(e,t,r=e.schema){let{gen:n,parentSchema:s,data:i,keyword:o,it:a}=e;l(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=Wn.mergeEvaluated.items(n,r.length,a.items));let c=n.name("valid"),u=n.const("len",(0,fl._)`${i}.length`);r.forEach((f,d)=>{(0,Wn.alwaysValidSchema)(a,f)||(n.if((0,fl._)`${u} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},c)),e.ok(c))});function l(f){let{opts:d,errSchemaPath:h}=a,p=r.length,g=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!g){let m=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,Wn.checkStrictMode)(a,m,d.strictTuples)}}}Ur.validateTuple=dl;Ur.default=wy});var hl=E(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});var Ey=Vi(),Sy={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Ey.validateTuple)(e,"items")};Ki.default=Sy});var ml=E(Hi=>{"use strict";Object.defineProperty(Hi,"__esModule",{value:!0});var pl=D(),by=K(),Ry=Ce(),Ty=Ui(),Oy={message:({params:{len:e}})=>(0,pl.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,pl._)`{limit: ${e}}`},Ay={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Oy,code(e){let{schema:t,parentSchema:r,it:n}=e,{prefixItems:s}=r;n.items=!0,!(0,by.alwaysValidSchema)(n,t)&&(s?(0,Ty.validateAdditionalItems)(e,s):e.ok((0,Ry.validateArray)(e)))}};Hi.default=Ay});var gl=E(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});var Me=D(),Un=K(),$y={message:({params:{min:e,max:t}})=>t===void 0?(0,Me.str)`must contain at least ${e} valid item(s)`:(0,Me.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Me._)`{minContains: ${e}}`:(0,Me._)`{minContains: ${e}, maxContains: ${t}}`},xy={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:$y,code(e){let{gen:t,schema:r,parentSchema:n,data:s,it:i}=e,o,a,{minContains:c,maxContains:u}=n;i.opts.next?(o=c===void 0?1:c,a=u):o=1;let l=t.const("len",(0,Me._)`${s}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,Un.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,Un.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,Un.alwaysValidSchema)(i,r)){let g=(0,Me._)`${l} >= ${o}`;a!==void 0&&(g=(0,Me._)`${g} && ${l} <= ${a}`),e.pass(g);return}i.items=!0;let f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,Me._)`${s}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){let g=t.name("_valid"),m=t.let("count",0);h(g,()=>t.if(g,()=>p(m)))}function h(g,m){t.forRange("i",0,l,v=>{e.subschema({keyword:"contains",dataProp:v,dataPropType:Un.Type.Num,compositeRule:!0},g),m()})}function p(g){t.code((0,Me._)`${g}++`),a===void 0?t.if((0,Me._)`${g} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,Me._)`${g} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,Me._)`${g} >= ${o}`,()=>t.assign(f,!0)))}}};zi.default=xy});var _l=E(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.validateSchemaDeps=Ve.validatePropertyDeps=Ve.error=void 0;var Bi=D(),Py=K(),Vr=Ce();Ve.error={message:({params:{property:e,depsCount:t,deps:r}})=>{let n=t===1?"property":"properties";return(0,Bi.str)`must have ${n} ${r} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:r,missingProperty:n}})=>(0,Bi._)`{property: ${e},
    missingProperty: ${n},
    depsCount: ${t},
    deps: ${r}}`};var Cy={keyword:"dependencies",type:"object",schemaType:"object",error:Ve.error,code(e){let[t,r]=Ny(e);yl(e,t),vl(e,r)}};function Ny({schema:e}){let t={},r={};for(let n in e){if(n==="__proto__")continue;let s=Array.isArray(e[n])?t:r;s[n]=e[n]}return[t,r]}function yl(e,t=e.schema){let{gen:r,data:n,it:s}=e;if(Object.keys(t).length===0)return;let i=r.let("missing");for(let o in t){let a=t[o];if(a.length===0)continue;let c=(0,Vr.propertyInData)(r,n,o,s.opts.ownProperties);e.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(c,()=>{for(let u of a)(0,Vr.checkReportMissingProp)(e,u)}):(r.if((0,Bi._)`${c} && (${(0,Vr.checkMissingProp)(e,a,i)})`),(0,Vr.reportMissingProp)(e,i),r.else())}}Ve.validatePropertyDeps=yl;function vl(e,t=e.schema){let{gen:r,data:n,keyword:s,it:i}=e,o=r.name("valid");for(let a in t)(0,Py.alwaysValidSchema)(i,t[a])||(r.if((0,Vr.propertyInData)(r,n,a,i.opts.ownProperties),()=>{let c=e.subschema({keyword:s,schemaProp:a},o);e.mergeValidEvaluated(c,o)},()=>r.var(o,!0)),e.ok(o))}Ve.validateSchemaDeps=vl;Ve.default=Cy});var El=E(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});var wl=D(),My=K(),Fy={message:"property name must be valid",params:({params:e})=>(0,wl._)`{propertyName: ${e.propertyName}}`},ky={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Fy,code(e){let{gen:t,schema:r,data:n,it:s}=e;if((0,My.alwaysValidSchema)(s,r))return;let i=t.name("valid");t.forIn("key",n,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),t.if((0,wl.not)(i),()=>{e.error(!0),s.allErrors||t.break()})}),e.ok(i)}};Yi.default=ky});var Qi=E(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});var Vn=Ce(),qe=D(),Iy=Ze(),Kn=K(),jy={message:"must NOT have additional properties",params:({params:e})=>(0,qe._)`{additionalProperty: ${e.additionalProperty}}`},Dy={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:jy,code(e){let{gen:t,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=e;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:c}=o;if(o.props=!0,c.removeAdditional!=="all"&&(0,Kn.alwaysValidSchema)(o,r))return;let u=(0,Vn.allSchemaProperties)(n.properties),l=(0,Vn.allSchemaProperties)(n.patternProperties);f(),e.ok((0,qe._)`${i} === ${Iy.default.errors}`);function f(){t.forIn("key",s,m=>{!u.length&&!l.length?p(m):t.if(d(m),()=>p(m))})}function d(m){let v;if(u.length>8){let w=(0,Kn.schemaRefOrVal)(o,n.properties,"properties");v=(0,Vn.isOwnProperty)(t,w,m)}else u.length?v=(0,qe.or)(...u.map(w=>(0,qe._)`${m} === ${w}`)):v=qe.nil;return l.length&&(v=(0,qe.or)(v,...l.map(w=>(0,qe._)`${(0,Vn.usePattern)(e,w)}.test(${m})`))),(0,qe.not)(v)}function h(m){t.code((0,qe._)`delete ${s}[${m}]`)}function p(m){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){h(m);return}if(r===!1){e.setParams({additionalProperty:m}),e.error(),a||t.break();return}if(typeof r=="object"&&!(0,Kn.alwaysValidSchema)(o,r)){let v=t.name("valid");c.removeAdditional==="failing"?(g(m,v,!1),t.if((0,qe.not)(v),()=>{e.reset(),h(m)})):(g(m,v),a||t.if((0,qe.not)(v),()=>t.break()))}}function g(m,v,w){let S={keyword:"additionalProperties",dataProp:m,dataPropType:Kn.Type.Str};w===!1&&Object.assign(S,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(S,v)}}};Ji.default=Dy});var Rl=E(Zi=>{"use strict";Object.defineProperty(Zi,"__esModule",{value:!0});var qy=Pr(),Sl=Ce(),Xi=K(),bl=Qi(),Gy={keyword:"properties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,parentSchema:n,data:s,it:i}=e;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&bl.default.code(new qy.KeywordCxt(i,bl.default,"additionalProperties"));let o=(0,Sl.allSchemaProperties)(r);for(let f of o)i.definedProperties.add(f);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=Xi.mergeEvaluated.props(t,(0,Xi.toHash)(o),i.props));let a=o.filter(f=>!(0,Xi.alwaysValidSchema)(i,r[f]));if(a.length===0)return;let c=t.name("valid");for(let f of a)u(f)?l(f):(t.if((0,Sl.propertyInData)(t,s,f,i.opts.ownProperties)),l(f),i.allErrors||t.else().var(c,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(c);function u(f){return i.opts.useDefaults&&!i.compositeRule&&r[f].default!==void 0}function l(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},c)}}};Zi.default=Gy});var $l=E(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});var Tl=Ce(),Hn=D(),Ol=K(),Al=K(),Ly={keyword:"patternProperties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,data:n,parentSchema:s,it:i}=e,{opts:o}=i,a=(0,Tl.allSchemaProperties)(r),c=a.filter(g=>(0,Ol.alwaysValidSchema)(i,r[g]));if(a.length===0||c.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let u=o.strictSchema&&!o.allowMatchingProperties&&s.properties,l=t.name("valid");i.props!==!0&&!(i.props instanceof Hn.Name)&&(i.props=(0,Al.evaluatedPropsToName)(t,i.props));let{props:f}=i;d();function d(){for(let g of a)u&&h(g),i.allErrors?p(g):(t.var(l,!0),p(g),t.if(l))}function h(g){for(let m in u)new RegExp(g).test(m)&&(0,Ol.checkStrictMode)(i,`property ${m} matches pattern ${g} (use allowMatchingProperties)`)}function p(g){t.forIn("key",n,m=>{t.if((0,Hn._)`${(0,Tl.usePattern)(e,g)}.test(${m})`,()=>{let v=c.includes(g);v||e.subschema({keyword:"patternProperties",schemaProp:g,dataProp:m,dataPropType:Al.Type.Str},l),i.opts.unevaluated&&f!==!0?t.assign((0,Hn._)`${f}[${m}]`,!0):!v&&!i.allErrors&&t.if((0,Hn.not)(l),()=>t.break())})})}}};eo.default=Ly});var xl=E(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});var Wy=K(),Uy={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){let{gen:t,schema:r,it:n}=e;if((0,Wy.alwaysValidSchema)(n,r)){e.fail();return}let s=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),e.failResult(s,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};to.default=Uy});var Pl=E(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});var Vy=Ce(),Ky={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Vy.validateUnion,error:{message:"must match a schema in anyOf"}};ro.default=Ky});var Cl=E(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});var zn=D(),Hy=K(),zy={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,zn._)`{passingSchemas: ${e.passing}}`},By={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:zy,code(e){let{gen:t,schema:r,parentSchema:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,o=t.let("valid",!1),a=t.let("passing",null),c=t.name("_valid");e.setParams({passing:a}),t.block(u),e.result(o,()=>e.reset(),()=>e.error(!0));function u(){i.forEach((l,f)=>{let d;(0,Hy.alwaysValidSchema)(s,l)?t.var(c,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},c),f>0&&t.if((0,zn._)`${c} && ${o}`).assign(o,!1).assign(a,(0,zn._)`[${a}, ${f}]`).else(),t.if(c,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,zn.Name)})})}}};no.default=By});var Nl=E(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});var Yy=K(),Jy={keyword:"allOf",schemaType:"array",code(e){let{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=t.name("valid");r.forEach((i,o)=>{if((0,Yy.alwaysValidSchema)(n,i))return;let a=e.subschema({keyword:"allOf",schemaProp:o},s);e.ok(s),e.mergeEvaluated(a)})}};so.default=Jy});var kl=E(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});var Bn=D(),Fl=K(),Qy={message:({params:e})=>(0,Bn.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,Bn._)`{failingKeyword: ${e.ifClause}}`},Xy={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Qy,code(e){let{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,Fl.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=Ml(n,"then"),i=Ml(n,"else");if(!s&&!i)return;let o=t.let("valid",!0),a=t.name("_valid");if(c(),e.reset(),s&&i){let l=t.let("ifClause");e.setParams({ifClause:l}),t.if(a,u("then",l),u("else",l))}else s?t.if(a,u("then")):t.if((0,Bn.not)(a),u("else"));e.pass(o,()=>e.error(!0));function c(){let l=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(l)}function u(l,f){return()=>{let d=e.subschema({keyword:l},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,Bn._)`${l}`):e.setParams({ifClause:l})}}}};function Ml(e,t){let r=e.schema[t];return r!==void 0&&!(0,Fl.alwaysValidSchema)(e,r)}io.default=Xy});var Il=E(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});var Zy=K(),e0={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,Zy.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};oo.default=e0});var jl=E(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});var t0=Ui(),r0=hl(),n0=Vi(),s0=ml(),i0=gl(),o0=_l(),a0=El(),c0=Qi(),l0=Rl(),u0=$l(),f0=xl(),d0=Pl(),h0=Cl(),p0=Nl(),m0=kl(),g0=Il();function y0(e=!1){let t=[f0.default,d0.default,h0.default,p0.default,m0.default,g0.default,a0.default,c0.default,o0.default,l0.default,u0.default];return e?t.push(r0.default,s0.default):t.push(t0.default,n0.default),t.push(i0.default),t}ao.default=y0});var Dl=E(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});var ae=D(),v0={message:({schemaCode:e})=>(0,ae.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,ae._)`{format: ${e}}`},_0={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:v0,code(e,t){let{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=e,{opts:c,errSchemaPath:u,schemaEnv:l,self:f}=a;if(!c.validateFormats)return;s?d():h();function d(){let p=r.scopeValue("formats",{ref:f.formats,code:c.code.formats}),g=r.const("fDef",(0,ae._)`${p}[${o}]`),m=r.let("fType"),v=r.let("format");r.if((0,ae._)`typeof ${g} == "object" && !(${g} instanceof RegExp)`,()=>r.assign(m,(0,ae._)`${g}.type || "string"`).assign(v,(0,ae._)`${g}.validate`),()=>r.assign(m,(0,ae._)`"string"`).assign(v,g)),e.fail$data((0,ae.or)(w(),S()));function w(){return c.strictSchema===!1?ae.nil:(0,ae._)`${o} && !${v}`}function S(){let b=l.$async?(0,ae._)`(${g}.async ? await ${v}(${n}) : ${v}(${n}))`:(0,ae._)`${v}(${n})`,R=(0,ae._)`(typeof ${v} == "function" ? ${b} : ${v}.test(${n}))`;return(0,ae._)`${v} && ${v} !== true && ${m} === ${t} && !${R}`}}function h(){let p=f.formats[i];if(!p){w();return}if(p===!0)return;let[g,m,v]=S(p);g===t&&e.pass(b());function w(){if(c.strictSchema===!1){f.logger.warn(R());return}throw new Error(R());function R(){return`unknown format "${i}" ignored in schema at path "${u}"`}}function S(R){let C=R instanceof RegExp?(0,ae.regexpCode)(R):c.code.formats?(0,ae._)`${c.code.formats}${(0,ae.getProperty)(i)}`:void 0,L=r.scopeValue("formats",{key:i,ref:R,code:C});return typeof R=="object"&&!(R instanceof RegExp)?[R.type||"string",R.validate,(0,ae._)`${L}.validate`]:["string",R,L]}function b(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!l.$async)throw new Error("async format in sync schema");return(0,ae._)`await ${v}(${n})`}return typeof m=="function"?(0,ae._)`${v}(${n})`:(0,ae._)`${v}.test(${n})`}}}};co.default=_0});var ql=E(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});var w0=Dl(),E0=[w0.default];lo.default=E0});var Gl=E(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.contentVocabulary=Zt.metadataVocabulary=void 0;Zt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Zt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var Wl=E(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});var S0=Yc(),b0=ll(),R0=jl(),T0=ql(),Ll=Gl(),O0=[S0.default,b0.default,(0,R0.default)(),T0.default,Ll.metadataVocabulary,Ll.contentVocabulary];uo.default=O0});var Vl=E(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.DiscrError=void 0;var Ul;(function(e){e.Tag="tag",e.Mapping="mapping"})(Ul||(Yn.DiscrError=Ul={}))});var Hl=E(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});var er=D(),fo=Vl(),Kl=Cn(),A0=Cr(),$0=K(),x0={message:({params:{discrError:e,tagName:t}})=>e===fo.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,er._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},P0={keyword:"discriminator",type:"object",schemaType:"object",error:x0,code(e){let{gen:t,data:r,schema:n,parentSchema:s,it:i}=e,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let c=t.let("valid",!1),u=t.const("tag",(0,er._)`${r}${(0,er.getProperty)(a)}`);t.if((0,er._)`typeof ${u} == "string"`,()=>l(),()=>e.error(!1,{discrError:fo.DiscrError.Tag,tag:u,tagName:a})),e.ok(c);function l(){let h=d();t.if(!1);for(let p in h)t.elseIf((0,er._)`${u} === ${p}`),t.assign(c,f(h[p]));t.else(),e.error(!1,{discrError:fo.DiscrError.Mapping,tag:u,tagName:a}),t.endIf()}function f(h){let p=t.name("valid"),g=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(g,er.Name),p}function d(){var h;let p={},g=v(s),m=!0;for(let b=0;b<o.length;b++){let R=o[b];if(R?.$ref&&!(0,$0.schemaHasRulesButRef)(R,i.self.RULES)){let L=R.$ref;if(R=Kl.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,L),R instanceof Kl.SchemaEnv&&(R=R.schema),R===void 0)throw new A0.default(i.opts.uriResolver,i.baseId,L)}let C=(h=R?.properties)===null||h===void 0?void 0:h[a];if(typeof C!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);m=m&&(g||v(R)),w(C,b)}if(!m)throw new Error(`discriminator: "${a}" must be required`);return p;function v({required:b}){return Array.isArray(b)&&b.includes(a)}function w(b,R){if(b.const)S(b.const,R);else if(b.enum)for(let C of b.enum)S(C,R);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function S(b,R){if(typeof b!="string"||b in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[b]=R}}}};ho.default=P0});var zl=E((gb,C0)=>{C0.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var Yl=E((ee,po)=>{"use strict";Object.defineProperty(ee,"__esModule",{value:!0});ee.MissingRefError=ee.ValidationError=ee.CodeGen=ee.Name=ee.nil=ee.stringify=ee.str=ee._=ee.KeywordCxt=ee.Ajv=void 0;var N0=Uc(),M0=Wl(),F0=Hl(),Bl=zl(),k0=["/properties"],Jn="http://json-schema.org/draft-07/schema",tr=class extends N0.default{_addVocabularies(){super._addVocabularies(),M0.default.forEach(t=>this.addVocabulary(t)),this.opts.discriminator&&this.addKeyword(F0.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let t=this.opts.$data?this.$dataMetaSchema(Bl,k0):Bl;this.addMetaSchema(t,Jn,!1),this.refs["http://json-schema.org/schema"]=Jn}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Jn)?Jn:void 0)}};ee.Ajv=tr;po.exports=ee=tr;po.exports.Ajv=tr;Object.defineProperty(ee,"__esModule",{value:!0});ee.default=tr;var I0=Pr();Object.defineProperty(ee,"KeywordCxt",{enumerable:!0,get:function(){return I0.KeywordCxt}});var rr=D();Object.defineProperty(ee,"_",{enumerable:!0,get:function(){return rr._}});Object.defineProperty(ee,"str",{enumerable:!0,get:function(){return rr.str}});Object.defineProperty(ee,"stringify",{enumerable:!0,get:function(){return rr.stringify}});Object.defineProperty(ee,"nil",{enumerable:!0,get:function(){return rr.nil}});Object.defineProperty(ee,"Name",{enumerable:!0,get:function(){return rr.Name}});Object.defineProperty(ee,"CodeGen",{enumerable:!0,get:function(){return rr.CodeGen}});var j0=xn();Object.defineProperty(ee,"ValidationError",{enumerable:!0,get:function(){return j0.default}});var D0=Cr();Object.defineProperty(ee,"MissingRefError",{enumerable:!0,get:function(){return D0.default}})});var xt=E((yb,$t)=>{"use strict";function Jl(e){return typeof e>"u"||e===null}function q0(e){return typeof e=="object"&&e!==null}function G0(e){return Array.isArray(e)?e:Jl(e)?[]:[e]}function L0(e,t){var r,n,s,i;if(t)for(i=Object.keys(t),r=0,n=i.length;r<n;r+=1)s=i[r],e[s]=t[s];return e}function W0(e,t){var r="",n;for(n=0;n<t;n+=1)r+=e;return r}function U0(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}$t.exports.isNothing=Jl;$t.exports.isObject=q0;$t.exports.toArray=G0;$t.exports.repeat=W0;$t.exports.isNegativeZero=U0;$t.exports.extend=L0});var nr=E((vb,Ql)=>{"use strict";function Kr(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Kr.prototype=Object.create(Error.prototype);Kr.prototype.constructor=Kr;Kr.prototype.toString=function(t){var r=this.name+": ";return r+=this.reason||"(unknown reason)",!t&&this.mark&&(r+=" "+this.mark.toString()),r};Ql.exports=Kr});var eu=E((_b,Zl)=>{"use strict";var Xl=xt();function mo(e,t,r,n,s){this.name=e,this.buffer=t,this.position=r,this.line=n,this.column=s}mo.prototype.getSnippet=function(t,r){var n,s,i,o,a;if(!this.buffer)return null;for(t=t||4,r=r||75,n="",s=this.position;s>0&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(s-1))===-1;)if(s-=1,this.position-s>r/2-1){n=" ... ",s+=5;break}for(i="",o=this.position;o<this.buffer.length&&`\0\r
\x85\u2028\u2029`.indexOf(this.buffer.charAt(o))===-1;)if(o+=1,o-this.position>r/2-1){i=" ... ",o-=5;break}return a=this.buffer.slice(s,o),Xl.repeat(" ",t)+n+a+i+`
`+Xl.repeat(" ",t+this.position-s+n.length)+"^"};mo.prototype.toString=function(t){var r,n="";return this.name&&(n+='in "'+this.name+'" '),n+="at line "+(this.line+1)+", column "+(this.column+1),t||(r=this.getSnippet(),r&&(n+=`:
`+r)),n};Zl.exports=mo});var le=E((wb,ru)=>{"use strict";var tu=nr(),V0=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],K0=["scalar","sequence","mapping"];function H0(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(n){t[String(n)]=r})}),t}function z0(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(V0.indexOf(r)===-1)throw new tu('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=H0(t.styleAliases||null),K0.indexOf(this.kind)===-1)throw new tu('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}ru.exports=z0});var Pt=E((Eb,su)=>{"use strict";var nu=xt(),Qn=nr(),B0=le();function go(e,t,r){var n=[];return e.include.forEach(function(s){r=go(s,t,r)}),e[t].forEach(function(s){r.forEach(function(i,o){i.tag===s.tag&&i.kind===s.kind&&n.push(o)}),r.push(s)}),r.filter(function(s,i){return n.indexOf(i)===-1})}function Y0(){var e={scalar:{},sequence:{},mapping:{},fallback:{}},t,r;function n(s){e[s.kind][s.tag]=e.fallback[s.tag]=s}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(n);return e}function sr(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach(function(t){if(t.loadKind&&t.loadKind!=="scalar")throw new Qn("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=go(this,"implicit",[]),this.compiledExplicit=go(this,"explicit",[]),this.compiledTypeMap=Y0(this.compiledImplicit,this.compiledExplicit)}sr.DEFAULT=null;sr.create=function(){var t,r;switch(arguments.length){case 1:t=sr.DEFAULT,r=arguments[0];break;case 2:t=arguments[0],r=arguments[1];break;default:throw new Qn("Wrong number of arguments for Schema.create function")}if(t=nu.toArray(t),r=nu.toArray(r),!t.every(function(n){return n instanceof sr}))throw new Qn("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!r.every(function(n){return n instanceof B0}))throw new Qn("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new sr({include:t,explicit:r})};su.exports=sr});var ou=E((Sb,iu)=>{"use strict";var J0=le();iu.exports=new J0("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}})});var cu=E((bb,au)=>{"use strict";var Q0=le();au.exports=new Q0("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}})});var uu=E((Rb,lu)=>{"use strict";var X0=le();lu.exports=new X0("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}})});var Xn=E((Tb,fu)=>{"use strict";var Z0=Pt();fu.exports=new Z0({explicit:[ou(),cu(),uu()]})});var hu=E((Ob,du)=>{"use strict";var ev=le();function tv(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function rv(){return null}function nv(e){return e===null}du.exports=new ev("tag:yaml.org,2002:null",{kind:"scalar",resolve:tv,construct:rv,predicate:nv,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})});var mu=E((Ab,pu)=>{"use strict";var sv=le();function iv(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function ov(e){return e==="true"||e==="True"||e==="TRUE"}function av(e){return Object.prototype.toString.call(e)==="[object Boolean]"}pu.exports=new sv("tag:yaml.org,2002:bool",{kind:"scalar",resolve:iv,construct:ov,predicate:av,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})});var yu=E(($b,gu)=>{"use strict";var cv=xt(),lv=le();function uv(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function fv(e){return 48<=e&&e<=55}function dv(e){return 48<=e&&e<=57}function hv(e){if(e===null)return!1;var t=e.length,r=0,n=!1,s;if(!t)return!1;if(s=e[r],(s==="-"||s==="+")&&(s=e[++r]),s==="0"){if(r+1===t)return!0;if(s=e[++r],s==="b"){for(r++;r<t;r++)if(s=e[r],s!=="_"){if(s!=="0"&&s!=="1")return!1;n=!0}return n&&s!=="_"}if(s==="x"){for(r++;r<t;r++)if(s=e[r],s!=="_"){if(!uv(e.charCodeAt(r)))return!1;n=!0}return n&&s!=="_"}for(;r<t;r++)if(s=e[r],s!=="_"){if(!fv(e.charCodeAt(r)))return!1;n=!0}return n&&s!=="_"}if(s==="_")return!1;for(;r<t;r++)if(s=e[r],s!=="_"){if(s===":")break;if(!dv(e.charCodeAt(r)))return!1;n=!0}return!n||s==="_"?!1:s!==":"?!0:/^(:[0-5]?[0-9])+$/.test(e.slice(r))}function pv(e){var t=e,r=1,n,s,i=[];return t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),n=t[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),t=t.slice(1),n=t[0]),t==="0"?0:n==="0"?t[1]==="b"?r*parseInt(t.slice(2),2):t[1]==="x"?r*parseInt(t,16):r*parseInt(t,8):t.indexOf(":")!==-1?(t.split(":").forEach(function(o){i.unshift(parseInt(o,10))}),t=0,s=1,i.forEach(function(o){t+=o*s,s*=60}),r*t):r*parseInt(t,10)}function mv(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!cv.isNegativeZero(e)}gu.exports=new lv("tag:yaml.org,2002:int",{kind:"scalar",resolve:hv,construct:pv,predicate:mv,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0"+e.toString(8):"-0"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})});var wu=E((xb,_u)=>{"use strict";var vu=xt(),gv=le(),yv=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function vv(e){return!(e===null||!yv.test(e)||e[e.length-1]==="_")}function _v(e){var t,r,n,s;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,s=[],"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:t.indexOf(":")>=0?(t.split(":").forEach(function(i){s.unshift(parseFloat(i,10))}),t=0,n=1,s.forEach(function(i){t+=i*n,n*=60}),r*t):r*parseFloat(t,10)}var wv=/^[-+]?[0-9]+e/;function Ev(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(vu.isNegativeZero(e))return"-0.0";return r=e.toString(10),wv.test(r)?r.replace("e",".e"):r}function Sv(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||vu.isNegativeZero(e))}_u.exports=new gv("tag:yaml.org,2002:float",{kind:"scalar",resolve:vv,construct:_v,predicate:Sv,represent:Ev,defaultStyle:"lowercase"})});var yo=E((Pb,Eu)=>{"use strict";var bv=Pt();Eu.exports=new bv({include:[Xn()],implicit:[hu(),mu(),yu(),wu()]})});var vo=E((Cb,Su)=>{"use strict";var Rv=Pt();Su.exports=new Rv({include:[yo()]})});var Ou=E((Nb,Tu)=>{"use strict";var Tv=le(),bu=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Ru=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Ov(e){return e===null?!1:bu.exec(e)!==null||Ru.exec(e)!==null}function Av(e){var t,r,n,s,i,o,a,c=0,u=null,l,f,d;if(t=bu.exec(e),t===null&&(t=Ru.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,s=+t[3],!t[4])return new Date(Date.UTC(r,n,s));if(i=+t[4],o=+t[5],a=+t[6],t[7]){for(c=t[7].slice(0,3);c.length<3;)c+="0";c=+c}return t[9]&&(l=+t[10],f=+(t[11]||0),u=(l*60+f)*6e4,t[9]==="-"&&(u=-u)),d=new Date(Date.UTC(r,n,s,i,o,a,c)),u&&d.setTime(d.getTime()-u),d}function $v(e){return e.toISOString()}Tu.exports=new Tv("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Ov,construct:Av,instanceOf:Date,represent:$v})});var $u=E((Mb,Au)=>{"use strict";var xv=le();function Pv(e){return e==="<<"||e===null}Au.exports=new xv("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Pv})});var Cu=E((Fb,Pu)=>{"use strict";var Ct;try{xu=require,Ct=xu("buffer").Buffer}catch{}var xu,Cv=le(),_o=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Nv(e){if(e===null)return!1;var t,r,n=0,s=e.length,i=_o;for(r=0;r<s;r++)if(t=i.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;n+=6}return n%8===0}function Mv(e){var t,r,n=e.replace(/[\r\n=]/g,""),s=n.length,i=_o,o=0,a=[];for(t=0;t<s;t++)t%4===0&&t&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|i.indexOf(n.charAt(t));return r=s%4*6,r===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):r===18?(a.push(o>>10&255),a.push(o>>2&255)):r===12&&a.push(o>>4&255),Ct?Ct.from?Ct.from(a):new Ct(a):a}function Fv(e){var t="",r=0,n,s,i=e.length,o=_o;for(n=0;n<i;n++)n%3===0&&n&&(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]),r=(r<<8)+e[n];return s=i%3,s===0?(t+=o[r>>18&63],t+=o[r>>12&63],t+=o[r>>6&63],t+=o[r&63]):s===2?(t+=o[r>>10&63],t+=o[r>>4&63],t+=o[r<<2&63],t+=o[64]):s===1&&(t+=o[r>>2&63],t+=o[r<<4&63],t+=o[64],t+=o[64]),t}function kv(e){return Ct&&Ct.isBuffer(e)}Pu.exports=new Cv("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Nv,construct:Mv,predicate:kv,represent:Fv})});var Mu=E((kb,Nu)=>{"use strict";var Iv=le(),jv=Object.prototype.hasOwnProperty,Dv=Object.prototype.toString;function qv(e){if(e===null)return!0;var t=[],r,n,s,i,o,a=e;for(r=0,n=a.length;r<n;r+=1){if(s=a[r],o=!1,Dv.call(s)!=="[object Object]")return!1;for(i in s)if(jv.call(s,i))if(!o)o=!0;else return!1;if(!o)return!1;if(t.indexOf(i)===-1)t.push(i);else return!1}return!0}function Gv(e){return e!==null?e:[]}Nu.exports=new Iv("tag:yaml.org,2002:omap",{kind:"sequence",resolve:qv,construct:Gv})});var ku=E((Ib,Fu)=>{"use strict";var Lv=le(),Wv=Object.prototype.toString;function Uv(e){if(e===null)return!0;var t,r,n,s,i,o=e;for(i=new Array(o.length),t=0,r=o.length;t<r;t+=1){if(n=o[t],Wv.call(n)!=="[object Object]"||(s=Object.keys(n),s.length!==1))return!1;i[t]=[s[0],n[s[0]]]}return!0}function Vv(e){if(e===null)return[];var t,r,n,s,i,o=e;for(i=new Array(o.length),t=0,r=o.length;t<r;t+=1)n=o[t],s=Object.keys(n),i[t]=[s[0],n[s[0]]];return i}Fu.exports=new Lv("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Uv,construct:Vv})});var ju=E((jb,Iu)=>{"use strict";var Kv=le(),Hv=Object.prototype.hasOwnProperty;function zv(e){if(e===null)return!0;var t,r=e;for(t in r)if(Hv.call(r,t)&&r[t]!==null)return!1;return!0}function Bv(e){return e!==null?e:{}}Iu.exports=new Kv("tag:yaml.org,2002:set",{kind:"mapping",resolve:zv,construct:Bv})});var ir=E((Db,Du)=>{"use strict";var Yv=Pt();Du.exports=new Yv({include:[vo()],implicit:[Ou(),$u()],explicit:[Cu(),Mu(),ku(),ju()]})});var Gu=E((qb,qu)=>{"use strict";var Jv=le();function Qv(){return!0}function Xv(){}function Zv(){return""}function e_(e){return typeof e>"u"}qu.exports=new Jv("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:Qv,construct:Xv,predicate:e_,represent:Zv})});var Wu=E((Gb,Lu)=>{"use strict";var t_=le();function r_(e){if(e===null||e.length===0)return!1;var t=e,r=/\/([gim]*)$/.exec(e),n="";return!(t[0]==="/"&&(r&&(n=r[1]),n.length>3||t[t.length-n.length-1]!=="/"))}function n_(e){var t=e,r=/\/([gim]*)$/.exec(e),n="";return t[0]==="/"&&(r&&(n=r[1]),t=t.slice(1,t.length-n.length-1)),new RegExp(t,n)}function s_(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}function i_(e){return Object.prototype.toString.call(e)==="[object RegExp]"}Lu.exports=new t_("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:r_,construct:n_,predicate:i_,represent:s_})});var Ku=E((Lb,Vu)=>{"use strict";var Zn;try{Uu=require,Zn=Uu("esprima")}catch{typeof window<"u"&&(Zn=window.esprima)}var Uu,o_=le();function a_(e){if(e===null)return!1;try{var t="("+e+")",r=Zn.parse(t,{range:!0});return!(r.type!=="Program"||r.body.length!==1||r.body[0].type!=="ExpressionStatement"||r.body[0].expression.type!=="ArrowFunctionExpression"&&r.body[0].expression.type!=="FunctionExpression")}catch{return!1}}function c_(e){var t="("+e+")",r=Zn.parse(t,{range:!0}),n=[],s;if(r.type!=="Program"||r.body.length!==1||r.body[0].type!=="ExpressionStatement"||r.body[0].expression.type!=="ArrowFunctionExpression"&&r.body[0].expression.type!=="FunctionExpression")throw new Error("Failed to resolve function");return r.body[0].expression.params.forEach(function(i){n.push(i.name)}),s=r.body[0].expression.body.range,r.body[0].expression.body.type==="BlockStatement"?new Function(n,t.slice(s[0]+1,s[1]-1)):new Function(n,"return "+t.slice(s[0],s[1]))}function l_(e){return e.toString()}function u_(e){return Object.prototype.toString.call(e)==="[object Function]"}Vu.exports=new o_("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:a_,construct:c_,predicate:u_,represent:l_})});var Hr=E((Wb,zu)=>{"use strict";var Hu=Pt();zu.exports=Hu.DEFAULT=new Hu({include:[ir()],explicit:[Gu(),Wu(),Ku()]})});var hf=E((Ub,zr)=>{"use strict";var rt=xt(),ef=nr(),f_=eu(),tf=ir(),d_=Hr(),mt=Object.prototype.hasOwnProperty,es=1,rf=2,nf=3,ts=4,wo=1,h_=2,Bu=3,p_=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,m_=/[\x85\u2028\u2029]/,g_=/[,\[\]\{\}]/,sf=/^(?:!|!!|![a-z\-]+!)$/i,of=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Yu(e){return Object.prototype.toString.call(e)}function Ke(e){return e===10||e===13}function Mt(e){return e===9||e===32}function $e(e){return e===9||e===32||e===10||e===13}function or(e){return e===44||e===91||e===93||e===123||e===125}function y_(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function v_(e){return e===120?2:e===117?4:e===85?8:0}function __(e){return 48<=e&&e<=57?e-48:-1}function Ju(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function w_(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var af=new Array(256),cf=new Array(256);for(Nt=0;Nt<256;Nt++)af[Nt]=Ju(Nt)?1:0,cf[Nt]=Ju(Nt);var Nt;function E_(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||d_,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function lf(e,t){return new ef(t,new f_(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function N(e,t){throw lf(e,t)}function rs(e,t){e.onWarning&&e.onWarning.call(null,lf(e,t))}var Qu={YAML:function(t,r,n){var s,i,o;t.version!==null&&N(t,"duplication of %YAML directive"),n.length!==1&&N(t,"YAML directive accepts exactly one argument"),s=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),s===null&&N(t,"ill-formed argument of the YAML directive"),i=parseInt(s[1],10),o=parseInt(s[2],10),i!==1&&N(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=o<2,o!==1&&o!==2&&rs(t,"unsupported YAML version of the document")},TAG:function(t,r,n){var s,i;n.length!==2&&N(t,"TAG directive accepts exactly two arguments"),s=n[0],i=n[1],sf.test(s)||N(t,"ill-formed tag handle (first argument) of the TAG directive"),mt.call(t.tagMap,s)&&N(t,'there is a previously declared suffix for "'+s+'" tag handle'),of.test(i)||N(t,"ill-formed tag prefix (second argument) of the TAG directive"),t.tagMap[s]=i}};function pt(e,t,r,n){var s,i,o,a;if(t<r){if(a=e.input.slice(t,r),n)for(s=0,i=a.length;s<i;s+=1)o=a.charCodeAt(s),o===9||32<=o&&o<=1114111||N(e,"expected valid JSON character");else p_.test(a)&&N(e,"the stream contains non-printable characters");e.result+=a}}function Xu(e,t,r,n){var s,i,o,a;for(rt.isObject(r)||N(e,"cannot merge mappings; the provided source object is unacceptable"),s=Object.keys(r),o=0,a=s.length;o<a;o+=1)i=s[o],mt.call(t,i)||(t[i]=r[i],n[i]=!0)}function ar(e,t,r,n,s,i,o,a){var c,u;if(Array.isArray(s))for(s=Array.prototype.slice.call(s),c=0,u=s.length;c<u;c+=1)Array.isArray(s[c])&&N(e,"nested arrays are not supported inside keys"),typeof s=="object"&&Yu(s[c])==="[object Object]"&&(s[c]="[object Object]");if(typeof s=="object"&&Yu(s)==="[object Object]"&&(s="[object Object]"),s=String(s),t===null&&(t={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(i))for(c=0,u=i.length;c<u;c+=1)Xu(e,t,i[c],r);else Xu(e,t,i,r);else!e.json&&!mt.call(r,s)&&mt.call(t,s)&&(e.line=o||e.line,e.position=a||e.position,N(e,"duplicated mapping key")),t[s]=i,delete r[s];return t}function Eo(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):N(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function ce(e,t,r){for(var n=0,s=e.input.charCodeAt(e.position);s!==0;){for(;Mt(s);)s=e.input.charCodeAt(++e.position);if(t&&s===35)do s=e.input.charCodeAt(++e.position);while(s!==10&&s!==13&&s!==0);if(Ke(s))for(Eo(e),s=e.input.charCodeAt(e.position),n++,e.lineIndent=0;s===32;)e.lineIndent++,s=e.input.charCodeAt(++e.position);else break}return r!==-1&&n!==0&&e.lineIndent<r&&rs(e,"deficient indentation"),n}function ns(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||$e(r)))}function So(e,t){t===1?e.result+=" ":t>1&&(e.result+=rt.repeat(`
`,t-1))}function S_(e,t,r){var n,s,i,o,a,c,u,l,f=e.kind,d=e.result,h;if(h=e.input.charCodeAt(e.position),$e(h)||or(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(s=e.input.charCodeAt(e.position+1),$e(s)||r&&or(s)))return!1;for(e.kind="scalar",e.result="",i=o=e.position,a=!1;h!==0;){if(h===58){if(s=e.input.charCodeAt(e.position+1),$e(s)||r&&or(s))break}else if(h===35){if(n=e.input.charCodeAt(e.position-1),$e(n))break}else{if(e.position===e.lineStart&&ns(e)||r&&or(h))break;if(Ke(h))if(c=e.line,u=e.lineStart,l=e.lineIndent,ce(e,!1,-1),e.lineIndent>=t){a=!0,h=e.input.charCodeAt(e.position);continue}else{e.position=o,e.line=c,e.lineStart=u,e.lineIndent=l;break}}a&&(pt(e,i,o,!1),So(e,e.line-c),i=o=e.position,a=!1),Mt(h)||(o=e.position+1),h=e.input.charCodeAt(++e.position)}return pt(e,i,o,!1),e.result?!0:(e.kind=f,e.result=d,!1)}function b_(e,t){var r,n,s;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=s=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(pt(e,n,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)n=e.position,e.position++,s=e.position;else return!0;else Ke(r)?(pt(e,n,s,!0),So(e,ce(e,!1,t)),n=s=e.position):e.position===e.lineStart&&ns(e)?N(e,"unexpected end of the document within a single quoted scalar"):(e.position++,s=e.position);N(e,"unexpected end of the stream within a single quoted scalar")}function R_(e,t){var r,n,s,i,o,a;if(a=e.input.charCodeAt(e.position),a!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;(a=e.input.charCodeAt(e.position))!==0;){if(a===34)return pt(e,r,e.position,!0),e.position++,!0;if(a===92){if(pt(e,r,e.position,!0),a=e.input.charCodeAt(++e.position),Ke(a))ce(e,!1,t);else if(a<256&&af[a])e.result+=cf[a],e.position++;else if((o=v_(a))>0){for(s=o,i=0;s>0;s--)a=e.input.charCodeAt(++e.position),(o=y_(a))>=0?i=(i<<4)+o:N(e,"expected hexadecimal character");e.result+=w_(i),e.position++}else N(e,"unknown escape sequence");r=n=e.position}else Ke(a)?(pt(e,r,n,!0),So(e,ce(e,!1,t)),r=n=e.position):e.position===e.lineStart&&ns(e)?N(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}N(e,"unexpected end of the stream within a double quoted scalar")}function T_(e,t){var r=!0,n,s=e.tag,i,o=e.anchor,a,c,u,l,f,d={},h,p,g,m;if(m=e.input.charCodeAt(e.position),m===91)c=93,f=!1,i=[];else if(m===123)c=125,f=!0,i={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=i),m=e.input.charCodeAt(++e.position);m!==0;){if(ce(e,!0,t),m=e.input.charCodeAt(e.position),m===c)return e.position++,e.tag=s,e.anchor=o,e.kind=f?"mapping":"sequence",e.result=i,!0;r||N(e,"missed comma between flow collection entries"),p=h=g=null,u=l=!1,m===63&&(a=e.input.charCodeAt(e.position+1),$e(a)&&(u=l=!0,e.position++,ce(e,!0,t))),n=e.line,cr(e,t,es,!1,!0),p=e.tag,h=e.result,ce(e,!0,t),m=e.input.charCodeAt(e.position),(l||e.line===n)&&m===58&&(u=!0,m=e.input.charCodeAt(++e.position),ce(e,!0,t),cr(e,t,es,!1,!0),g=e.result),f?ar(e,i,d,p,h,g):u?i.push(ar(e,null,d,p,h,g)):i.push(h),ce(e,!0,t),m=e.input.charCodeAt(e.position),m===44?(r=!0,m=e.input.charCodeAt(++e.position)):r=!1}N(e,"unexpected end of the stream within a flow collection")}function O_(e,t){var r,n,s=wo,i=!1,o=!1,a=t,c=0,u=!1,l,f;if(f=e.input.charCodeAt(e.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(e.kind="scalar",e.result="";f!==0;)if(f=e.input.charCodeAt(++e.position),f===43||f===45)wo===s?s=f===43?Bu:h_:N(e,"repeat of a chomping mode identifier");else if((l=__(f))>=0)l===0?N(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?N(e,"repeat of an indentation width identifier"):(a=t+l-1,o=!0);else break;if(Mt(f)){do f=e.input.charCodeAt(++e.position);while(Mt(f));if(f===35)do f=e.input.charCodeAt(++e.position);while(!Ke(f)&&f!==0)}for(;f!==0;){for(Eo(e),e.lineIndent=0,f=e.input.charCodeAt(e.position);(!o||e.lineIndent<a)&&f===32;)e.lineIndent++,f=e.input.charCodeAt(++e.position);if(!o&&e.lineIndent>a&&(a=e.lineIndent),Ke(f)){c++;continue}if(e.lineIndent<a){s===Bu?e.result+=rt.repeat(`
`,i?1+c:c):s===wo&&i&&(e.result+=`
`);break}for(n?Mt(f)?(u=!0,e.result+=rt.repeat(`
`,i?1+c:c)):u?(u=!1,e.result+=rt.repeat(`
`,c+1)):c===0?i&&(e.result+=" "):e.result+=rt.repeat(`
`,c):e.result+=rt.repeat(`
`,i?1+c:c),i=!0,o=!0,c=0,r=e.position;!Ke(f)&&f!==0;)f=e.input.charCodeAt(++e.position);pt(e,r,e.position,!1)}return!0}function Zu(e,t){var r,n=e.tag,s=e.anchor,i=[],o,a=!1,c;for(e.anchor!==null&&(e.anchorMap[e.anchor]=i),c=e.input.charCodeAt(e.position);c!==0&&!(c!==45||(o=e.input.charCodeAt(e.position+1),!$e(o)));){if(a=!0,e.position++,ce(e,!0,-1)&&e.lineIndent<=t){i.push(null),c=e.input.charCodeAt(e.position);continue}if(r=e.line,cr(e,t,nf,!1,!0),i.push(e.result),ce(e,!0,-1),c=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&c!==0)N(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return a?(e.tag=n,e.anchor=s,e.kind="sequence",e.result=i,!0):!1}function A_(e,t,r){var n,s,i,o,a=e.tag,c=e.anchor,u={},l={},f=null,d=null,h=null,p=!1,g=!1,m;for(e.anchor!==null&&(e.anchorMap[e.anchor]=u),m=e.input.charCodeAt(e.position);m!==0;){if(n=e.input.charCodeAt(e.position+1),i=e.line,o=e.position,(m===63||m===58)&&$e(n))m===63?(p&&(ar(e,u,l,f,d,null),f=d=h=null),g=!0,p=!0,s=!0):p?(p=!1,s=!0):N(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,m=n;else if(cr(e,r,rf,!1,!0))if(e.line===i){for(m=e.input.charCodeAt(e.position);Mt(m);)m=e.input.charCodeAt(++e.position);if(m===58)m=e.input.charCodeAt(++e.position),$e(m)||N(e,"a whitespace character is expected after the key-value separator within a block mapping"),p&&(ar(e,u,l,f,d,null),f=d=h=null),g=!0,p=!1,s=!1,f=e.tag,d=e.result;else if(g)N(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=a,e.anchor=c,!0}else if(g)N(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=a,e.anchor=c,!0;else break;if((e.line===i||e.lineIndent>t)&&(cr(e,t,ts,!0,s)&&(p?d=e.result:h=e.result),p||(ar(e,u,l,f,d,h,i,o),f=d=h=null),ce(e,!0,-1),m=e.input.charCodeAt(e.position)),e.lineIndent>t&&m!==0)N(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return p&&ar(e,u,l,f,d,null),g&&(e.tag=a,e.anchor=c,e.kind="mapping",e.result=u),g}function $_(e){var t,r=!1,n=!1,s,i,o;if(o=e.input.charCodeAt(e.position),o!==33)return!1;if(e.tag!==null&&N(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),o===60?(r=!0,o=e.input.charCodeAt(++e.position)):o===33?(n=!0,s="!!",o=e.input.charCodeAt(++e.position)):s="!",t=e.position,r){do o=e.input.charCodeAt(++e.position);while(o!==0&&o!==62);e.position<e.length?(i=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):N(e,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!$e(o);)o===33&&(n?N(e,"tag suffix cannot contain exclamation marks"):(s=e.input.slice(t-1,e.position+1),sf.test(s)||N(e,"named tag handle cannot contain such characters"),n=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);i=e.input.slice(t,e.position),g_.test(i)&&N(e,"tag suffix cannot contain flow indicator characters")}return i&&!of.test(i)&&N(e,"tag name cannot contain such characters: "+i),r?e.tag=i:mt.call(e.tagMap,s)?e.tag=e.tagMap[s]+i:s==="!"?e.tag="!"+i:s==="!!"?e.tag="tag:yaml.org,2002:"+i:N(e,'undeclared tag handle "'+s+'"'),!0}function x_(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&N(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!$e(r)&&!or(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&N(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function P_(e){var t,r,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;n!==0&&!$e(n)&&!or(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&N(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),mt.call(e.anchorMap,r)||N(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],ce(e,!0,-1),!0}function cr(e,t,r,n,s){var i,o,a,c=1,u=!1,l=!1,f,d,h,p,g;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,i=o=a=ts===r||nf===r,n&&ce(e,!0,-1)&&(u=!0,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)),c===1)for(;$_(e)||x_(e);)ce(e,!0,-1)?(u=!0,a=i,e.lineIndent>t?c=1:e.lineIndent===t?c=0:e.lineIndent<t&&(c=-1)):a=!1;if(a&&(a=u||s),(c===1||ts===r)&&(es===r||rf===r?p=t:p=t+1,g=e.position-e.lineStart,c===1?a&&(Zu(e,g)||A_(e,g,p))||T_(e,p)?l=!0:(o&&O_(e,p)||b_(e,p)||R_(e,p)?l=!0:P_(e)?(l=!0,(e.tag!==null||e.anchor!==null)&&N(e,"alias node should not have any properties")):S_(e,p,es===r)&&(l=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):c===0&&(l=a&&Zu(e,g))),e.tag!==null&&e.tag!=="!")if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&N(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),f=0,d=e.implicitTypes.length;f<d;f+=1)if(h=e.implicitTypes[f],h.resolve(e.result)){e.result=h.construct(e.result),e.tag=h.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else mt.call(e.typeMap[e.kind||"fallback"],e.tag)?(h=e.typeMap[e.kind||"fallback"][e.tag],e.result!==null&&h.kind!==e.kind&&N(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+h.kind+'", not "'+e.kind+'"'),h.resolve(e.result)?(e.result=h.construct(e.result),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):N(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):N(e,"unknown tag !<"+e.tag+">");return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||l}function C_(e){var t=e.position,r,n,s,i=!1,o;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};(o=e.input.charCodeAt(e.position))!==0&&(ce(e,!0,-1),o=e.input.charCodeAt(e.position),!(e.lineIndent>0||o!==37));){for(i=!0,o=e.input.charCodeAt(++e.position),r=e.position;o!==0&&!$e(o);)o=e.input.charCodeAt(++e.position);for(n=e.input.slice(r,e.position),s=[],n.length<1&&N(e,"directive name must not be less than one character in length");o!==0;){for(;Mt(o);)o=e.input.charCodeAt(++e.position);if(o===35){do o=e.input.charCodeAt(++e.position);while(o!==0&&!Ke(o));break}if(Ke(o))break;for(r=e.position;o!==0&&!$e(o);)o=e.input.charCodeAt(++e.position);s.push(e.input.slice(r,e.position))}o!==0&&Eo(e),mt.call(Qu,n)?Qu[n](e,n,s):rs(e,'unknown document directive "'+n+'"')}if(ce(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,ce(e,!0,-1)):i&&N(e,"directives end mark is expected"),cr(e,e.lineIndent-1,ts,!1,!0),ce(e,!0,-1),e.checkLineBreaks&&m_.test(e.input.slice(t,e.position))&&rs(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&ns(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,ce(e,!0,-1));return}if(e.position<e.length-1)N(e,"end of the stream or a document separator is expected");else return}function uf(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new E_(e,t),n=e.indexOf("\0");for(n!==-1&&(r.position=n,N(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)C_(r);return r.documents}function ff(e,t,r){t!==null&&typeof t=="object"&&typeof r>"u"&&(r=t,t=null);var n=uf(e,r);if(typeof t!="function")return n;for(var s=0,i=n.length;s<i;s+=1)t(n[s])}function df(e,t){var r=uf(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new ef("expected a single document in the stream, but found more")}}function N_(e,t,r){return typeof t=="object"&&t!==null&&typeof r>"u"&&(r=t,t=null),ff(e,t,rt.extend({schema:tf},r))}function M_(e,t){return df(e,rt.extend({schema:tf},t))}zr.exports.loadAll=ff;zr.exports.load=df;zr.exports.safeLoadAll=N_;zr.exports.safeLoad=M_});var If=E((Vb,Oo)=>{"use strict";var Yr=xt(),Jr=nr(),F_=Hr(),k_=ir(),Ef=Object.prototype.toString,Sf=Object.prototype.hasOwnProperty,I_=9,Br=10,j_=13,D_=32,q_=33,G_=34,bf=35,L_=37,W_=38,U_=39,V_=42,Rf=44,K_=45,Tf=58,H_=61,z_=62,B_=63,Y_=64,Of=91,Af=93,J_=96,$f=123,Q_=124,xf=125,ve={};ve[0]="\\0";ve[7]="\\a";ve[8]="\\b";ve[9]="\\t";ve[10]="\\n";ve[11]="\\v";ve[12]="\\f";ve[13]="\\r";ve[27]="\\e";ve[34]='\\"';ve[92]="\\\\";ve[133]="\\N";ve[160]="\\_";ve[8232]="\\L";ve[8233]="\\P";var X_=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function Z_(e,t){var r,n,s,i,o,a,c;if(t===null)return{};for(r={},n=Object.keys(t),s=0,i=n.length;s<i;s+=1)o=n[s],a=String(t[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),c=e.compiledTypeMap.fallback[o],c&&Sf.call(c.styleAliases,a)&&(a=c.styleAliases[a]),r[o]=a;return r}function pf(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else if(e<=4294967295)r="U",n=8;else throw new Jr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Yr.repeat("0",n-t.length)+t}function ew(e){this.schema=e.schema||F_,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Yr.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=Z_(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function mf(e,t){for(var r=Yr.repeat(" ",t),n=0,s=-1,i="",o,a=e.length;n<a;)s=e.indexOf(`
`,n),s===-1?(o=e.slice(n),n=a):(o=e.slice(n,s+1),n=s+1),o.length&&o!==`
`&&(i+=r),i+=o;return i}function bo(e,t){return`
`+Yr.repeat(" ",e.indent*t)}function tw(e,t){var r,n,s;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(s=e.implicitTypes[r],s.resolve(t))return!0;return!1}function To(e){return e===D_||e===I_}function lr(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==65279||65536<=e&&e<=1114111}function rw(e){return lr(e)&&!To(e)&&e!==65279&&e!==j_&&e!==Br}function gf(e,t){return lr(e)&&e!==65279&&e!==Rf&&e!==Of&&e!==Af&&e!==$f&&e!==xf&&e!==Tf&&(e!==bf||t&&rw(t))}function nw(e){return lr(e)&&e!==65279&&!To(e)&&e!==K_&&e!==B_&&e!==Tf&&e!==Rf&&e!==Of&&e!==Af&&e!==$f&&e!==xf&&e!==bf&&e!==W_&&e!==V_&&e!==q_&&e!==Q_&&e!==H_&&e!==z_&&e!==U_&&e!==G_&&e!==L_&&e!==Y_&&e!==J_}function Pf(e){var t=/^\n* /;return t.test(e)}var Cf=1,Nf=2,Mf=3,Ff=4,ss=5;function sw(e,t,r,n,s){var i,o,a,c=!1,u=!1,l=n!==-1,f=-1,d=nw(e.charCodeAt(0))&&!To(e.charCodeAt(e.length-1));if(t)for(i=0;i<e.length;i++){if(o=e.charCodeAt(i),!lr(o))return ss;a=i>0?e.charCodeAt(i-1):null,d=d&&gf(o,a)}else{for(i=0;i<e.length;i++){if(o=e.charCodeAt(i),o===Br)c=!0,l&&(u=u||i-f-1>n&&e[f+1]!==" ",f=i);else if(!lr(o))return ss;a=i>0?e.charCodeAt(i-1):null,d=d&&gf(o,a)}u=u||l&&i-f-1>n&&e[f+1]!==" "}return!c&&!u?d&&!s(e)?Cf:Nf:r>9&&Pf(e)?ss:u?Ff:Mf}function iw(e,t,r,n){e.dump=function(){if(t.length===0)return"''";if(!e.noCompatMode&&X_.indexOf(t)!==-1)return"'"+t+"'";var s=e.indent*Math.max(1,r),i=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-s),o=n||e.flowLevel>-1&&r>=e.flowLevel;function a(c){return tw(e,c)}switch(sw(t,o,e.indent,i,a)){case Cf:return t;case Nf:return"'"+t.replace(/'/g,"''")+"'";case Mf:return"|"+yf(t,e.indent)+vf(mf(t,s));case Ff:return">"+yf(t,e.indent)+vf(mf(ow(t,i),s));case ss:return'"'+aw(t,i)+'"';default:throw new Jr("impossible error: invalid scalar style")}}()}function yf(e,t){var r=Pf(e)?String(t):"",n=e[e.length-1]===`
`,s=n&&(e[e.length-2]===`
`||e===`
`),i=s?"+":n?"":"-";return r+i+`
`}function vf(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function ow(e,t){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=e.indexOf(`
`);return u=u!==-1?u:e.length,r.lastIndex=u,_f(e.slice(0,u),t)}(),s=e[0]===`
`||e[0]===" ",i,o;o=r.exec(e);){var a=o[1],c=o[2];i=c[0]===" ",n+=a+(!s&&!i&&c!==""?`
`:"")+_f(c,t),s=i}return n}function _f(e,t){if(e===""||e[0]===" ")return e;for(var r=/ [^ ]/g,n,s=0,i,o=0,a=0,c="";n=r.exec(e);)a=n.index,a-s>t&&(i=o>s?o:a,c+=`
`+e.slice(s,i),s=i+1),o=a;return c+=`
`,e.length-s>t&&o>s?c+=e.slice(s,o)+`
`+e.slice(o+1):c+=e.slice(s),c.slice(1)}function aw(e){for(var t="",r,n,s,i=0;i<e.length;i++){if(r=e.charCodeAt(i),r>=55296&&r<=56319&&(n=e.charCodeAt(i+1),n>=56320&&n<=57343)){t+=pf((r-55296)*1024+n-56320+65536),i++;continue}s=ve[r],t+=!s&&lr(r)?e[i]:s||pf(r)}return t}function cw(e,t,r){var n="",s=e.tag,i,o;for(i=0,o=r.length;i<o;i+=1)Ft(e,t,r[i],!1,!1)&&(i!==0&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=s,e.dump="["+n+"]"}function lw(e,t,r,n){var s="",i=e.tag,o,a;for(o=0,a=r.length;o<a;o+=1)Ft(e,t+1,r[o],!0,!0)&&((!n||o!==0)&&(s+=bo(e,t)),e.dump&&Br===e.dump.charCodeAt(0)?s+="-":s+="- ",s+=e.dump);e.tag=i,e.dump=s||"[]"}function uw(e,t,r){var n="",s=e.tag,i=Object.keys(r),o,a,c,u,l;for(o=0,a=i.length;o<a;o+=1)l="",o!==0&&(l+=", "),e.condenseFlow&&(l+='"'),c=i[o],u=r[c],Ft(e,t,c,!1,!1)&&(e.dump.length>1024&&(l+="? "),l+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Ft(e,t,u,!1,!1)&&(l+=e.dump,n+=l));e.tag=s,e.dump="{"+n+"}"}function fw(e,t,r,n){var s="",i=e.tag,o=Object.keys(r),a,c,u,l,f,d;if(e.sortKeys===!0)o.sort();else if(typeof e.sortKeys=="function")o.sort(e.sortKeys);else if(e.sortKeys)throw new Jr("sortKeys must be a boolean or a function");for(a=0,c=o.length;a<c;a+=1)d="",(!n||a!==0)&&(d+=bo(e,t)),u=o[a],l=r[u],Ft(e,t+1,u,!0,!0,!0)&&(f=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,f&&(e.dump&&Br===e.dump.charCodeAt(0)?d+="?":d+="? "),d+=e.dump,f&&(d+=bo(e,t)),Ft(e,t+1,l,!0,f)&&(e.dump&&Br===e.dump.charCodeAt(0)?d+=":":d+=": ",d+=e.dump,s+=d));e.tag=i,e.dump=s||"{}"}function wf(e,t,r){var n,s,i,o,a,c;for(s=r?e.explicitTypes:e.implicitTypes,i=0,o=s.length;i<o;i+=1)if(a=s[i],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof t=="object"&&t instanceof a.instanceOf)&&(!a.predicate||a.predicate(t))){if(e.tag=r?a.tag:"?",a.represent){if(c=e.styleMap[a.tag]||a.defaultStyle,Ef.call(a.represent)==="[object Function]")n=a.represent(t,c);else if(Sf.call(a.represent,c))n=a.represent[c](t,c);else throw new Jr("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');e.dump=n}return!0}return!1}function Ft(e,t,r,n,s,i){e.tag=null,e.dump=r,wf(e,r,!1)||wf(e,r,!0);var o=Ef.call(e.dump);n&&(n=e.flowLevel<0||e.flowLevel>t);var a=o==="[object Object]"||o==="[object Array]",c,u;if(a&&(c=e.duplicates.indexOf(r),u=c!==-1),(e.tag!==null&&e.tag!=="?"||u||e.indent!==2&&t>0)&&(s=!1),u&&e.usedDuplicates[c])e.dump="*ref_"+c;else{if(a&&u&&!e.usedDuplicates[c]&&(e.usedDuplicates[c]=!0),o==="[object Object]")n&&Object.keys(e.dump).length!==0?(fw(e,t,e.dump,s),u&&(e.dump="&ref_"+c+e.dump)):(uw(e,t,e.dump),u&&(e.dump="&ref_"+c+" "+e.dump));else if(o==="[object Array]"){var l=e.noArrayIndent&&t>0?t-1:t;n&&e.dump.length!==0?(lw(e,l,e.dump,s),u&&(e.dump="&ref_"+c+e.dump)):(cw(e,l,e.dump),u&&(e.dump="&ref_"+c+" "+e.dump))}else if(o==="[object String]")e.tag!=="?"&&iw(e,e.dump,t,i);else{if(e.skipInvalid)return!1;throw new Jr("unacceptable kind of an object to dump "+o)}e.tag!==null&&e.tag!=="?"&&(e.dump="!<"+e.tag+"> "+e.dump)}return!0}function dw(e,t){var r=[],n=[],s,i;for(Ro(e,r,n),s=0,i=n.length;s<i;s+=1)t.duplicates.push(r[n[s]]);t.usedDuplicates=new Array(i)}function Ro(e,t,r){var n,s,i;if(e!==null&&typeof e=="object")if(s=t.indexOf(e),s!==-1)r.indexOf(s)===-1&&r.push(s);else if(t.push(e),Array.isArray(e))for(s=0,i=e.length;s<i;s+=1)Ro(e[s],t,r);else for(n=Object.keys(e),s=0,i=n.length;s<i;s+=1)Ro(e[n[s]],t,r)}function kf(e,t){t=t||{};var r=new ew(t);return r.noRefs||dw(e,r),Ft(r,0,e,!0,!0)?r.dump+`
`:""}function hw(e,t){return kf(e,Yr.extend({schema:k_},t))}Oo.exports.dump=kf;Oo.exports.safeDump=hw});var Df=E((Kb,oe)=>{"use strict";var is=hf(),jf=If();function os(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}oe.exports.Type=le();oe.exports.Schema=Pt();oe.exports.FAILSAFE_SCHEMA=Xn();oe.exports.JSON_SCHEMA=yo();oe.exports.CORE_SCHEMA=vo();oe.exports.DEFAULT_SAFE_SCHEMA=ir();oe.exports.DEFAULT_FULL_SCHEMA=Hr();oe.exports.load=is.load;oe.exports.loadAll=is.loadAll;oe.exports.safeLoad=is.safeLoad;oe.exports.safeLoadAll=is.safeLoadAll;oe.exports.dump=jf.dump;oe.exports.safeDump=jf.safeDump;oe.exports.YAMLException=nr();oe.exports.MINIMAL_SCHEMA=Xn();oe.exports.SAFE_SCHEMA=ir();oe.exports.DEFAULT_SCHEMA=Hr();oe.exports.scan=os("scan");oe.exports.parse=os("parse");oe.exports.compose=os("compose");oe.exports.addConstructor=os("addConstructor")});var Ao=E((Hb,qf)=>{"use strict";var pw=Df();qf.exports=pw});var Lf=E((zb,Gf)=>{var $o=Ao();Gf.exports=function(){var t=["scalar","mapping","sequence"];function r(l){var f=l.split("::");return f[f.length-1]}function n(l,f){var d=r(l),h="!"+d,p=l==="Fn::GetAtt"?function(g){return{"Fn::GetAtt":Array.isArray(g)?g:g.split(".")}}:function(g){return m={},m[l]=g,m;var m};return new $o.Type(h,{kind:f,construct:p})}function s(l){return t.map(function(f){return n(l,f)})}var i=function(){for(var l=[],f=0;f<arguments.length;f++)l=l.concat(o(arguments[f]));return l},o=function(l,f){var d=typeof Symbol=="function"&&l[Symbol.iterator];if(!d)return l;var h=d.call(l),p,g=[],m;try{for(;(f===void 0||f-- >0)&&!(p=h.next()).done;)g.push(p.value)}catch(v){m={error:v}}finally{try{p&&!p.done&&(d=h.return)&&d.call(h)}finally{if(m)throw m.error}}return g},a={Ref:{}},c=[];for(var u in a)c.push.apply(c,i(s(u)));return $o.Schema.create($o.CORE_SCHEMA,c)}});var Uf=E((Bb,Wf)=>{var gt=require("constants"),mw=process.cwd,as=null,gw=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return as||(as=mw.call(process)),as};try{process.cwd()}catch{}typeof process.chdir=="function"&&(xo=process.chdir,process.chdir=function(e){as=null,xo.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,xo));var xo;Wf.exports=yw;function yw(e){gt.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=i(e.chown),e.fchown=i(e.fchown),e.lchown=i(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=o(e.chownSync),e.fchownSync=o(e.fchownSync),e.lchownSync=o(e.lchownSync),e.chmodSync=s(e.chmodSync),e.fchmodSync=s(e.fchmodSync),e.lchmodSync=s(e.lchmodSync),e.stat=a(e.stat),e.fstat=a(e.fstat),e.lstat=a(e.lstat),e.statSync=c(e.statSync),e.fstatSync=c(e.fstatSync),e.lstatSync=c(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(l,f,d){d&&process.nextTick(d)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(l,f,d,h){h&&process.nextTick(h)},e.lchownSync=function(){}),gw==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(l){function f(d,h,p){var g=Date.now(),m=0;l(d,h,function v(w){if(w&&(w.code==="EACCES"||w.code==="EPERM"||w.code==="EBUSY")&&Date.now()-g<6e4){setTimeout(function(){e.stat(h,function(S,b){S&&S.code==="ENOENT"?l(d,h,v):p(w)})},m),m<100&&(m+=10);return}p&&p(w)})}return Object.setPrototypeOf&&Object.setPrototypeOf(f,l),f}(e.rename)),e.read=typeof e.read!="function"?e.read:function(l){function f(d,h,p,g,m,v){var w;if(v&&typeof v=="function"){var S=0;w=function(b,R,C){if(b&&b.code==="EAGAIN"&&S<10)return S++,l.call(e,d,h,p,g,m,w);v.apply(this,arguments)}}return l.call(e,d,h,p,g,m,w)}return Object.setPrototypeOf&&Object.setPrototypeOf(f,l),f}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(l){return function(f,d,h,p,g){for(var m=0;;)try{return l.call(e,f,d,h,p,g)}catch(v){if(v.code==="EAGAIN"&&m<10){m++;continue}throw v}}}(e.readSync);function t(l){l.lchmod=function(f,d,h){l.open(f,gt.O_WRONLY|gt.O_SYMLINK,d,function(p,g){if(p){h&&h(p);return}l.fchmod(g,d,function(m){l.close(g,function(v){h&&h(m||v)})})})},l.lchmodSync=function(f,d){var h=l.openSync(f,gt.O_WRONLY|gt.O_SYMLINK,d),p=!0,g;try{g=l.fchmodSync(h,d),p=!1}finally{if(p)try{l.closeSync(h)}catch{}else l.closeSync(h)}return g}}function r(l){gt.hasOwnProperty("O_SYMLINK")&&l.futimes?(l.lutimes=function(f,d,h,p){l.open(f,gt.O_SYMLINK,function(g,m){if(g){p&&p(g);return}l.futimes(m,d,h,function(v){l.close(m,function(w){p&&p(v||w)})})})},l.lutimesSync=function(f,d,h){var p=l.openSync(f,gt.O_SYMLINK),g,m=!0;try{g=l.futimesSync(p,d,h),m=!1}finally{if(m)try{l.closeSync(p)}catch{}else l.closeSync(p)}return g}):l.futimes&&(l.lutimes=function(f,d,h,p){p&&process.nextTick(p)},l.lutimesSync=function(){})}function n(l){return l&&function(f,d,h){return l.call(e,f,d,function(p){u(p)&&(p=null),h&&h.apply(this,arguments)})}}function s(l){return l&&function(f,d){try{return l.call(e,f,d)}catch(h){if(!u(h))throw h}}}function i(l){return l&&function(f,d,h,p){return l.call(e,f,d,h,function(g){u(g)&&(g=null),p&&p.apply(this,arguments)})}}function o(l){return l&&function(f,d,h){try{return l.call(e,f,d,h)}catch(p){if(!u(p))throw p}}}function a(l){return l&&function(f,d,h){typeof d=="function"&&(h=d,d=null);function p(g,m){m&&(m.uid<0&&(m.uid+=4294967296),m.gid<0&&(m.gid+=4294967296)),h&&h.apply(this,arguments)}return d?l.call(e,f,d,p):l.call(e,f,p)}}function c(l){return l&&function(f,d){var h=d?l.call(e,f,d):l.call(e,f);return h&&(h.uid<0&&(h.uid+=4294967296),h.gid<0&&(h.gid+=4294967296)),h}}function u(l){if(!l||l.code==="ENOSYS")return!0;var f=!process.getuid||process.getuid()!==0;return!!(f&&(l.code==="EINVAL"||l.code==="EPERM"))}}});var Hf=E((Yb,Kf)=>{var Vf=require("stream").Stream;Kf.exports=vw;function vw(e){return{ReadStream:t,WriteStream:r};function t(n,s){if(!(this instanceof t))return new t(n,s);Vf.call(this);var i=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,s=s||{};for(var o=Object.keys(s),a=0,c=o.length;a<c;a++){var u=o[a];this[u]=s[u]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){i._read()});return}e.open(this.path,this.flags,this.mode,function(l,f){if(l){i.emit("error",l),i.readable=!1;return}i.fd=f,i.emit("open",f),i._read()})}function r(n,s){if(!(this instanceof r))return new r(n,s);Vf.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,s=s||{};for(var i=Object.keys(s),o=0,a=i.length;o<a;o++){var c=i[o];this[c]=s[c]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var Bf=E((Jb,zf)=>{"use strict";zf.exports=ww;var _w=Object.getPrototypeOf||function(e){return e.__proto__};function ww(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:_w(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}});var Xf=E((Qb,No)=>{var se=require("fs"),Ew=Uf(),Sw=Hf(),bw=Bf(),cs=require("util"),de,us;typeof Symbol=="function"&&typeof Symbol.for=="function"?(de=Symbol.for("graceful-fs.queue"),us=Symbol.for("graceful-fs.previous")):(de="___graceful-fs.queue",us="___graceful-fs.previous");function Rw(){}function Qf(e,t){Object.defineProperty(e,de,{get:function(){return t}})}var kt=Rw;cs.debuglog?kt=cs.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(kt=function(){var e=cs.format.apply(cs,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});se[de]||(Yf=global[de]||[],Qf(se,Yf),se.close=function(e){function t(r,n){return e.call(se,r,function(s){s||Jf(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,us,{value:e}),t}(se.close),se.closeSync=function(e){function t(r){e.apply(se,arguments),Jf()}return Object.defineProperty(t,us,{value:e}),t}(se.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){kt(se[de]),require("assert").equal(se[de].length,0)}));var Yf;global[de]||Qf(global,se[de]);No.exports=Po(bw(se));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!se.__patched&&(No.exports=Po(se),se.__patched=!0);function Po(e){Ew(e),e.gracefulify=Po,e.createReadStream=R,e.createWriteStream=C;var t=e.readFile;e.readFile=r;function r(x,M,P){return typeof M=="function"&&(P=M,M=null),z(x,M,P);function z(re,ie,X,te){return t(re,ie,function(B){B&&(B.code==="EMFILE"||B.code==="ENFILE")?ur([z,[re,ie,X],B,te||Date.now(),Date.now()]):typeof X=="function"&&X.apply(this,arguments)})}}var n=e.writeFile;e.writeFile=s;function s(x,M,P,z){return typeof P=="function"&&(z=P,P=null),re(x,M,P,z);function re(ie,X,te,B,ne){return n(ie,X,te,function(J){J&&(J.code==="EMFILE"||J.code==="ENFILE")?ur([re,[ie,X,te,B],J,ne||Date.now(),Date.now()]):typeof B=="function"&&B.apply(this,arguments)})}}var i=e.appendFile;i&&(e.appendFile=o);function o(x,M,P,z){return typeof P=="function"&&(z=P,P=null),re(x,M,P,z);function re(ie,X,te,B,ne){return i(ie,X,te,function(J){J&&(J.code==="EMFILE"||J.code==="ENFILE")?ur([re,[ie,X,te,B],J,ne||Date.now(),Date.now()]):typeof B=="function"&&B.apply(this,arguments)})}}var a=e.copyFile;a&&(e.copyFile=c);function c(x,M,P,z){return typeof P=="function"&&(z=P,P=0),re(x,M,P,z);function re(ie,X,te,B,ne){return a(ie,X,te,function(J){J&&(J.code==="EMFILE"||J.code==="ENFILE")?ur([re,[ie,X,te,B],J,ne||Date.now(),Date.now()]):typeof B=="function"&&B.apply(this,arguments)})}}var u=e.readdir;e.readdir=f;var l=/^v[0-5]\./;function f(x,M,P){typeof M=="function"&&(P=M,M=null);var z=l.test(process.version)?function(X,te,B,ne){return u(X,re(X,te,B,ne))}:function(X,te,B,ne){return u(X,te,re(X,te,B,ne))};return z(x,M,P);function re(ie,X,te,B){return function(ne,J){ne&&(ne.code==="EMFILE"||ne.code==="ENFILE")?ur([z,[ie,X,te],ne,B||Date.now(),Date.now()]):(J&&J.sort&&J.sort(),typeof te=="function"&&te.call(this,ne,J))}}}if(process.version.substr(0,4)==="v0.8"){var d=Sw(e);v=d.ReadStream,S=d.WriteStream}var h=e.ReadStream;h&&(v.prototype=Object.create(h.prototype),v.prototype.open=w);var p=e.WriteStream;p&&(S.prototype=Object.create(p.prototype),S.prototype.open=b),Object.defineProperty(e,"ReadStream",{get:function(){return v},set:function(x){v=x},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return S},set:function(x){S=x},enumerable:!0,configurable:!0});var g=v;Object.defineProperty(e,"FileReadStream",{get:function(){return g},set:function(x){g=x},enumerable:!0,configurable:!0});var m=S;Object.defineProperty(e,"FileWriteStream",{get:function(){return m},set:function(x){m=x},enumerable:!0,configurable:!0});function v(x,M){return this instanceof v?(h.apply(this,arguments),this):v.apply(Object.create(v.prototype),arguments)}function w(){var x=this;be(x.path,x.flags,x.mode,function(M,P){M?(x.autoClose&&x.destroy(),x.emit("error",M)):(x.fd=P,x.emit("open",P),x.read())})}function S(x,M){return this instanceof S?(p.apply(this,arguments),this):S.apply(Object.create(S.prototype),arguments)}function b(){var x=this;be(x.path,x.flags,x.mode,function(M,P){M?(x.destroy(),x.emit("error",M)):(x.fd=P,x.emit("open",P))})}function R(x,M){return new e.ReadStream(x,M)}function C(x,M){return new e.WriteStream(x,M)}var L=e.open;e.open=be;function be(x,M,P,z){return typeof P=="function"&&(z=P,P=null),re(x,M,P,z);function re(ie,X,te,B,ne){return L(ie,X,te,function(J,Qo){J&&(J.code==="EMFILE"||J.code==="ENFILE")?ur([re,[ie,X,te,B],J,ne||Date.now(),Date.now()]):typeof B=="function"&&B.apply(this,arguments)})}}return e}function ur(e){kt("ENQUEUE",e[0].name,e[1]),se[de].push(e),Co()}var ls;function Jf(){for(var e=Date.now(),t=0;t<se[de].length;++t)se[de][t].length>2&&(se[de][t][3]=e,se[de][t][4]=e);Co()}function Co(){if(clearTimeout(ls),ls=void 0,se[de].length!==0){var e=se[de].shift(),t=e[0],r=e[1],n=e[2],s=e[3],i=e[4];if(s===void 0)kt("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-s>=6e4){kt("TIMEOUT",t.name,r);var o=r.pop();typeof o=="function"&&o.call(null,n)}else{var a=Date.now()-i,c=Math.max(i-s,1),u=Math.min(c*1.2,100);a>=u?(kt("RETRY",t.name,r),t.apply(null,r.concat([s]))):se[de].push(e)}ls===void 0&&(ls=setTimeout(Co,0))}}});var ed=E((Xb,Zf)=>{"use strict";var Tw=require("path");Zf.exports=(e,t)=>{let r=new Map;for(let[i,o]of e)r.set(i,{filePath:i,parent:void 0,children:void 0,entries:1,active:!0,value:o});let n=r.size;for(let i of r.values()){let o=Tw.dirname(i.filePath);if(o!==i.filePath){let a=r.get(o);if(a===void 0)a={filePath:o,parent:void 0,children:[i],entries:i.entries,active:!1,value:void 0},r.set(o,a),i.parent=a;else{i.parent=a,a.children===void 0?a.children=[i]:a.children.push(i);do a.entries+=i.entries,a=a.parent;while(a)}}}for(;n>t;){let i=n-t,o,a=1/0;for(let f of r.values()){if(f.entries<=1||!f.children||!f.parent||f.children.length===0||f.children.length===1&&!f.value)continue;let d=f.entries-1>=i?f.entries-1-i:i-f.entries+1+t*.3;d<a&&(o=f,a=d)}if(!o)break;let c=o.entries-1;o.active=!0,o.entries=1,n-=c;let u=o.parent;for(;u;)u.entries-=c,u=u.parent;let l=new Set(o.children);for(let f of l)if(f.active=!1,f.entries=0,f.children)for(let d of f.children)l.add(d)}let s=new Map;for(let i of r.values()){if(!i.active)continue;let o=new Map,a=new Set([i]);for(let c of a)if(!(c.active&&c!==i)){if(c.value)if(Array.isArray(c.value))for(let u of c.value)o.set(u,c.filePath);else o.set(c.value,c.filePath);if(c.children)for(let u of c.children)a.add(u)}s.set(i.filePath,o)}return s}});var Do=E(hs=>{"use strict";var rd=require("fs"),ds=require("path"),{EventEmitter:Ow}=require("events"),Aw=ed(),nd=require("os").platform()==="darwin",$w=require("os").platform()==="win32",xw=nd||$w,td=+process.env.WATCHPACK_WATCHER_LIMIT||(nd?2e3:1e4),fs=!!process.env.WATCHPACK_RECURSIVE_WATCHER_LOGGING,Fo=!1,fr=0,Qr=new Map,Xr=new Map,Zr=new Map,It=new Map,ko=class{constructor(t){this.filePath=t,this.watchers=new Set,this.watcher=void 0;try{let r=rd.watch(t);this.watcher=r,r.on("change",(n,s)=>{for(let i of this.watchers)i.emit("change",n,s)}),r.on("error",n=>{for(let s of this.watchers)s.emit("error",n)})}catch(r){process.nextTick(()=>{for(let n of this.watchers)n.emit("error",r)})}fr++}add(t){It.set(t,this),this.watchers.add(t)}remove(t){this.watchers.delete(t),this.watchers.size===0&&(Zr.delete(this.filePath),fr--,this.watcher&&this.watcher.close())}getWatchers(){return this.watchers}},Io=class{constructor(t){this.rootPath=t,this.mapWatcherToPath=new Map,this.mapPathToWatchers=new Map,this.watcher=void 0;try{let r=rd.watch(t,{recursive:!0});this.watcher=r,r.on("change",(n,s)=>{if(s){let i=ds.dirname(s),o=this.mapPathToWatchers.get(i);if(fs&&process.stderr.write(`[watchpack] dispatch ${n} event in recursive watcher (${this.rootPath}) for '${s}' to ${o?o.size:0} watchers
`),o===void 0)return;for(let a of o)a.emit("change",n,ds.basename(s))}else{fs&&process.stderr.write(`[watchpack] dispatch ${n} event in recursive watcher (${this.rootPath}) to all watchers
`);for(let i of this.mapWatcherToPath.keys())i.emit("change",n)}}),r.on("error",n=>{for(let s of this.mapWatcherToPath.keys())s.emit("error",n)})}catch(r){process.nextTick(()=>{for(let n of this.mapWatcherToPath.keys())n.emit("error",r)})}fr++,fs&&process.stderr.write(`[watchpack] created recursive watcher at ${t}
`)}add(t,r){It.set(r,this);let n=t.slice(this.rootPath.length+1)||".";this.mapWatcherToPath.set(r,n);let s=this.mapPathToWatchers.get(n);if(s===void 0){let i=new Set;i.add(r),this.mapPathToWatchers.set(n,i)}else s.add(r)}remove(t){let r=this.mapWatcherToPath.get(t);if(!r)return;this.mapWatcherToPath.delete(t);let n=this.mapPathToWatchers.get(r);n.delete(t),n.size===0&&this.mapPathToWatchers.delete(r),this.mapWatcherToPath.size===0&&(Xr.delete(this.rootPath),fr--,this.watcher&&this.watcher.close(),fs&&process.stderr.write(`[watchpack] closed recursive watcher at ${this.rootPath}
`))}getWatchers(){return this.mapWatcherToPath}},jo=class extends Ow{close(){if(Qr.has(this)){Qr.delete(this);return}It.get(this).remove(this),It.delete(this)}},Mo=e=>{let t=Zr.get(e);if(t!==void 0)return t;let r=new ko(e);return Zr.set(e,r),r},Pw=e=>{let t=Xr.get(e);if(t!==void 0)return t;let r=new Io(e);return Xr.set(e,r),r},sd=()=>{let e=new Map,t=(n,s)=>{let i=e.get(s);i===void 0?e.set(s,n):Array.isArray(i)?i.push(n):e.set(s,[i,n])};for(let[n,s]of Qr)t(n,s);if(Qr.clear(),!xw||td-fr>=e.size){for(let[n,s]of e){let i=Mo(n);if(Array.isArray(s))for(let o of s)i.add(o);else i.add(s)}return}for(let n of Xr.values())for(let[s,i]of n.getWatchers())t(s,ds.join(n.rootPath,i));for(let n of Zr.values())for(let s of n.getWatchers())t(s,n.filePath);let r=Aw(e,td*.9);for(let[n,s]of r)if(s.size===1)for(let[i,o]of s){let a=Mo(o),c=It.get(i);c!==a&&(a.add(i),c!==void 0&&c.remove(i))}else{let i=new Set(s.values());if(i.size>1){let o=Pw(n);for(let[a,c]of s){let u=It.get(a);u!==o&&(o.add(c,a),u!==void 0&&u.remove(a))}}else for(let o of i){let a=Mo(o);for(let c of s.keys()){let u=It.get(c);u!==a&&(a.add(c),u!==void 0&&u.remove(c))}}}};hs.watch=e=>{let t=new jo,r=Zr.get(e);if(r!==void 0)return r.add(t),t;let n=e;for(;;){let s=Xr.get(n);if(s!==void 0)return s.add(e,t),t;let i=ds.dirname(n);if(i===n)break;n=i}return Qr.set(t,e),Fo||sd(),t};hs.batch=e=>{Fo=!0;try{e()}finally{Fo=!1,sd()}};hs.getNumberOfWatchers=()=>fr});var ld=E((eR,Lo)=>{"use strict";var cd=require("events").EventEmitter,ps=Xf(),en=require("path"),Cw=Do(),hr=Object.freeze({}),Se=2e3,id=require("os").platform()==="darwin",tn=process.env.WATCHPACK_POLLING,od=`${+tn}`===tn?+tn:!!tn&&tn!=="false";function dr(e){return e.toLowerCase()}function Nw(e,t){return function(){if(--e===0)return t()}}var qo=class extends cd{constructor(t,r,n){super(),this.directoryWatcher=t,this.path=r,this.startTime=n&&+n}checkStartTime(t,r){let n=this.startTime;return typeof n!="number"?!r:n<=t}close(){this.emit("closed")}},Go=class extends cd{constructor(t,r,n){super(),od&&(n.poll=od),this.watcherManager=t,this.options=n,this.path=r,this.files=new Map,this.filesWithoutCase=new Map,this.directories=new Map,this.lastWatchEvent=0,this.initialScan=!0,this.ignored=n.ignored||(()=>!1),this.nestedWatching=!1,this.polledWatching=typeof n.poll=="number"?n.poll:n.poll?5007:!1,this.timeout=void 0,this.initialScanRemoved=new Set,this.initialScanFinished=void 0,this.watchers=new Map,this.parentWatcher=null,this.refs=0,this._activeEvents=new Map,this.closed=!1,this.scanning=!1,this.scanAgain=!1,this.scanAgainInitial=!1,this.createWatcher(),this.doScan(!0)}createWatcher(){try{this.polledWatching?this.watcher={close:()=>{this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)}}:(id&&this.watchInParentDirectory(),this.watcher=Cw.watch(this.path),this.watcher.on("change",this.onWatchEvent.bind(this)),this.watcher.on("error",this.onWatcherError.bind(this)))}catch(t){this.onWatcherError(t)}}forEachWatcher(t,r){let n=this.watchers.get(dr(t));if(n!==void 0)for(let s of n)r(s)}setMissing(t,r,n){this.initialScan&&this.initialScanRemoved.add(t);let s=this.directories.get(t);if(s&&(this.nestedWatching&&s.close(),this.directories.delete(t),this.forEachWatcher(t,o=>o.emit("remove",n)),r||this.forEachWatcher(this.path,o=>o.emit("change",t,null,n,r))),this.files.get(t)){this.files.delete(t);let o=dr(t),a=this.filesWithoutCase.get(o)-1;a<=0?(this.filesWithoutCase.delete(o),this.forEachWatcher(t,c=>c.emit("remove",n))):this.filesWithoutCase.set(o,a),r||this.forEachWatcher(this.path,c=>c.emit("change",t,null,n,r))}}setFileTime(t,r,n,s,i){let o=Date.now();if(this.ignored(t))return;let a=this.files.get(t),c,u;if(n)c=Math.min(o,r)+Se,u=Se;else if(c=o,u=0,a&&a.timestamp===r&&r+Se<o)return;if(!(s&&a&&a.timestamp===r)){if(this.files.set(t,{safeTime:c,accuracy:u,timestamp:r}),a)n||this.forEachWatcher(t,l=>l.emit("change",r,i));else{let l=dr(t),f=this.filesWithoutCase.get(l);this.filesWithoutCase.set(l,(f||0)+1),f!==void 0&&this.doScan(!1),this.forEachWatcher(t,d=>{(!n||d.checkStartTime(c,n))&&d.emit("change",r,i)})}this.forEachWatcher(this.path,l=>{(!n||l.checkStartTime(c,n))&&l.emit("change",t,c,i,n)})}}setDirectory(t,r,n,s){if(!this.ignored(t)){if(t===this.path)n||this.forEachWatcher(this.path,i=>i.emit("change",t,r,s,n));else if(!this.directories.get(t)){let o=Date.now();this.nestedWatching?this.createNestedWatcher(t):this.directories.set(t,!0);let a;n?a=Math.min(o,r)+Se:a=o,this.forEachWatcher(t,c=>{(!n||c.checkStartTime(a,!1))&&c.emit("change",r,s)}),this.forEachWatcher(this.path,c=>{(!n||c.checkStartTime(a,n))&&c.emit("change",t,a,s,n)})}}}createNestedWatcher(t){let r=this.watcherManager.watchDirectory(t,1);r.on("change",(n,s,i,o)=>{this.forEachWatcher(this.path,a=>{(!o||a.checkStartTime(s,o))&&a.emit("change",n,s,i,o)})}),this.directories.set(t,r)}setNestedWatching(t){if(this.nestedWatching!==!!t)if(this.nestedWatching=!!t,this.nestedWatching)for(let r of this.directories.keys())this.createNestedWatcher(r);else for(let[r,n]of this.directories)n.close(),this.directories.set(r,!0)}watch(t,r){let n=dr(t),s=this.watchers.get(n);s===void 0&&(s=new Set,this.watchers.set(n,s)),this.refs++;let i=new qo(this,t,r);i.on("closed",()=>{if(--this.refs<=0){this.close();return}s.delete(i),s.size===0&&(this.watchers.delete(n),this.path===t&&this.setNestedWatching(!1))}),s.add(i);let o;if(t===this.path){this.setNestedWatching(!0),o=this.lastWatchEvent;for(let a of this.files.values())ms(a),o=Math.max(o,a.safeTime)}else{let a=this.files.get(t);a?(ms(a),o=a.safeTime):o=0}return o?o>=r&&process.nextTick(()=>{this.closed||(t===this.path?i.emit("change",t,o,"watch (outdated on attach)",!0):i.emit("change",o,"watch (outdated on attach)",!0))}):this.initialScan?this.initialScanRemoved.has(t)&&process.nextTick(()=>{this.closed||i.emit("remove")}):t!==this.path&&!this.directories.has(t)&&i.checkStartTime(this.initialScanFinished,!1)&&process.nextTick(()=>{this.closed||i.emit("initial-missing","watch (missing on attach)")}),i}onWatchEvent(t,r){if(this.closed)return;if(!r){this.doScan(!1);return}let n=en.join(this.path,r);if(!this.ignored(n))if(this._activeEvents.get(r)===void 0){this._activeEvents.set(r,!1);let s=()=>{this.closed||(this._activeEvents.set(r,!1),ps.lstat(n,(i,o)=>{if(!this.closed){if(this._activeEvents.get(r)===!0){process.nextTick(s);return}this._activeEvents.delete(r),i&&(i.code!=="ENOENT"&&i.code!=="EPERM"&&i.code!=="EBUSY"?this.onStatsError(i):r===en.basename(this.path)&&(ps.existsSync(this.path)||this.onDirectoryRemoved("stat failed"))),this.lastWatchEvent=Date.now(),o?o.isDirectory()?this.setDirectory(n,+o.birthtime||1,!1,t):(o.isFile()||o.isSymbolicLink())&&(o.mtime&&ad(o.mtime),this.setFileTime(n,+o.mtime||+o.ctime||1,!1,!1,t)):this.setMissing(n,!1,t)}}))};process.nextTick(s)}else this._activeEvents.set(r,!0)}onWatcherError(t){this.closed||t&&(t.code!=="EPERM"&&t.code!=="ENOENT"&&console.error("Watchpack Error (watcher): "+t),this.onDirectoryRemoved("watch error"))}onStatsError(t){t&&console.error("Watchpack Error (stats): "+t)}onScanError(t){t&&console.error("Watchpack Error (initial scan): "+t),this.onScanFinished()}onScanFinished(){this.polledWatching&&(this.timeout=setTimeout(()=>{this.closed||this.doScan(!1)},this.polledWatching))}onDirectoryRemoved(t){this.watcher&&(this.watcher.close(),this.watcher=null),this.watchInParentDirectory();let r=`directory-removed (${t})`;for(let n of this.directories.keys())this.setMissing(n,null,r);for(let n of this.files.keys())this.setMissing(n,null,r)}watchInParentDirectory(){if(!this.parentWatcher){let t=en.dirname(this.path);if(en.dirname(t)===t)return;this.parentWatcher=this.watcherManager.watchFile(this.path,1),this.parentWatcher.on("change",(r,n)=>{this.closed||((!id||this.polledWatching)&&this.parentWatcher&&(this.parentWatcher.close(),this.parentWatcher=null),this.watcher||(this.createWatcher(),this.doScan(!1),this.forEachWatcher(this.path,s=>s.emit("change",this.path,r,n,!1))))}),this.parentWatcher.on("remove",()=>{this.onDirectoryRemoved("parent directory removed")})}}doScan(t){if(this.scanning){this.scanAgain?t||(this.scanAgainInitial=!1):(this.scanAgain=!0,this.scanAgainInitial=t);return}this.scanning=!0,this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),process.nextTick(()=>{this.closed||ps.readdir(this.path,(r,n)=>{if(this.closed)return;if(r){if(r.code==="ENOENT"||r.code==="EPERM"?this.onDirectoryRemoved("scan readdir failed"):this.onScanError(r),this.initialScan=!1,this.initialScanFinished=Date.now(),t)for(let o of this.watchers.values())for(let a of o)a.checkStartTime(this.initialScanFinished,!1)&&a.emit("initial-missing","scan (parent directory missing in initial scan)");this.scanAgain?(this.scanAgain=!1,this.doScan(this.scanAgainInitial)):this.scanning=!1;return}let s=new Set(n.map(o=>en.join(this.path,o.normalize("NFC"))));for(let o of this.files.keys())s.has(o)||this.setMissing(o,t,"scan (missing)");for(let o of this.directories.keys())s.has(o)||this.setMissing(o,t,"scan (missing)");if(this.scanAgain){this.scanAgain=!1,this.doScan(t);return}let i=Nw(s.size+1,()=>{if(!this.closed){if(this.initialScan=!1,this.initialScanRemoved=null,this.initialScanFinished=Date.now(),t){let o=new Map(this.watchers);o.delete(dr(this.path));for(let a of s)o.delete(dr(a));for(let a of o.values())for(let c of a)c.checkStartTime(this.initialScanFinished,!1)&&c.emit("initial-missing","scan (missing in initial scan)")}this.scanAgain?(this.scanAgain=!1,this.doScan(this.scanAgainInitial)):(this.scanning=!1,this.onScanFinished())}});for(let o of s)ps.lstat(o,(a,c)=>{if(!this.closed){if(a){a.code==="ENOENT"||a.code==="EPERM"||a.code==="EACCES"||a.code==="EBUSY"?this.setMissing(o,t,"scan ("+a.code+")"):this.onScanError(a),i();return}c.isFile()||c.isSymbolicLink()?(c.mtime&&ad(c.mtime),this.setFileTime(o,+c.mtime||+c.ctime||1,t,!0,"scan (file)")):c.isDirectory()&&(!t||!this.directories.has(o))&&this.setDirectory(o,+c.birthtime||1,t,"scan (dir)"),i()}});i()})})}getTimes(){let t=Object.create(null),r=this.lastWatchEvent;for(let[n,s]of this.files)ms(s),r=Math.max(r,s.safeTime),t[n]=Math.max(s.safeTime,s.timestamp);if(this.nestedWatching){for(let n of this.directories.values()){let s=n.directoryWatcher.getTimes();for(let i of Object.keys(s)){let o=s[i];r=Math.max(r,o),t[i]=o}}t[this.path]=r}if(!this.initialScan)for(let n of this.watchers.values())for(let s of n){let i=s.path;Object.prototype.hasOwnProperty.call(t,i)||(t[i]=null)}return t}collectTimeInfoEntries(t,r){let n=this.lastWatchEvent;for(let[s,i]of this.files)ms(i),n=Math.max(n,i.safeTime),t.set(s,i);if(this.nestedWatching){for(let s of this.directories.values())n=Math.max(n,s.directoryWatcher.collectTimeInfoEntries(t,r));t.set(this.path,hr),r.set(this.path,{safeTime:n})}else{for(let s of this.directories.keys())t.set(s,hr),r.has(s)||r.set(s,hr);t.set(this.path,hr),r.set(this.path,hr)}if(!this.initialScan)for(let s of this.watchers.values())for(let i of s){let o=i.path;t.has(o)||t.set(o,null)}return n}close(){if(this.closed=!0,this.initialScan=!1,this.watcher&&(this.watcher.close(),this.watcher=null),this.nestedWatching){for(let t of this.directories.values())t.close();this.directories.clear()}this.parentWatcher&&(this.parentWatcher.close(),this.parentWatcher=null),this.emit("closed")}};Lo.exports=Go;Lo.exports.EXISTANCE_ONLY_TIME_ENTRY=hr;function ms(e){e.accuracy>Se&&(e.safeTime=e.safeTime-e.accuracy+Se,e.accuracy=Se)}function ad(e){e&&(Se>1&&e%1!==0?Se=1:Se>10&&e%10!==0?Se=10:Se>100&&e%100!==0?Se=100:Se>1e3&&e%1e3!==0&&(Se=1e3))}});var fd=E((tR,Wo)=>{"use strict";var Mw=require("path"),Fw=ld(),gs=class{constructor(t){this.options=t,this.directoryWatchers=new Map}getDirectoryWatcher(t){let r=this.directoryWatchers.get(t);if(r===void 0){let n=new Fw(this,t,this.options);return this.directoryWatchers.set(t,n),n.on("closed",()=>{this.directoryWatchers.delete(t)}),n}return r}watchFile(t,r){let n=Mw.dirname(t);return n===t?null:this.getDirectoryWatcher(n).watch(t,r)}watchDirectory(t,r){return this.getDirectoryWatcher(t).watch(t,r)}},ud=new WeakMap;Wo.exports=e=>{let t=ud.get(e);if(t!==void 0)return t;let r=new gs(e);return ud.set(e,r),r};Wo.exports.WatcherManager=gs});var pd=E((rR,hd)=>{"use strict";var kw=require("fs"),ys=require("path"),dd=new Set(["EINVAL","ENOENT"]);process.platform==="win32"&&dd.add("UNKNOWN");var Uo=class{constructor(){this.cache=new Map}resolve(t){let r=this.cache.get(t);if(r!==void 0)return r;let n=ys.dirname(t);if(n===t){let o=Object.freeze([t]);return this.cache.set(t,o),o}let s=this.resolve(n),i=t;if(s[0]!==n){let o=ys.basename(t);i=ys.resolve(s[0],o)}try{let o=kw.readlinkSync(i),a=ys.resolve(s[0],o),c=this.resolve(a),u;if(c.length>1&&s.length>1){let l=new Set(c);l.add(i);for(let f=1;f<s.length;f++)l.add(s[f]);u=Object.freeze(Array.from(l))}else s.length>1?(u=s.slice(),u[0]=c[0],u.push(i),Object.freeze(u)):c.length>1?(u=c.slice(),u.push(i),Object.freeze(u)):u=Object.freeze([c[0],i]);return this.cache.set(t,u),u}catch(o){if(!dd.has(o.code))throw o;let a=s.slice();return a[0]=i,Object.freeze(a),this.cache.set(t,a),a}}};hd.exports=Uo});var gd=E((nR,md)=>{md.exports=function(e,t){if(typeof e!="string")throw new TypeError("Expected a string");for(var r=String(e),n="",s=t?!!t.extended:!1,i=t?!!t.globstar:!1,o=!1,a=t&&typeof t.flags=="string"?t.flags:"",c,u=0,l=r.length;u<l;u++)switch(c=r[u],c){case"/":case"$":case"^":case"+":case".":case"(":case")":case"=":case"!":case"|":n+="\\"+c;break;case"?":if(s){n+=".";break}case"[":case"]":if(s){n+=c;break}case"{":if(s){o=!0,n+="(";break}case"}":if(s){o=!1,n+=")";break}case",":if(o){n+="|";break}n+="\\"+c;break;case"*":for(var f=r[u-1],d=1;r[u+1]==="*";)d++,u++;var h=r[u+1];if(!i)n+=".*";else{var p=d>1&&(f==="/"||f===void 0)&&(h==="/"||h===void 0);p?(n+="((?:[^/]*(?:/|$))*)",u++):n+="([^/]*)"}break;default:n+=c}return(!a||!~a.indexOf("g"))&&(n="^"+n+"$"),new RegExp(n,a)}});var wd=E((sR,_d)=>{"use strict";var Iw=fd(),jw=pd(),Dw=require("events").EventEmitter,qw=gd(),Gw=Do(),vs=[],Lw={};function _s(e,t){for(let r of e){let n=r.watcher;t.has(n.directoryWatcher)||t.add(n.directoryWatcher)}}var yd=e=>{let t=qw(e,{globstar:!0,extended:!0}).source;return t.slice(0,t.length-1)+"(?:$|\\/)"},Ww=e=>{if(Array.isArray(e)){let t=new RegExp(e.map(r=>yd(r)).join("|"));return r=>t.test(r.replace(/\\/g,"/"))}else if(typeof e=="string"){let t=new RegExp(yd(e));return r=>t.test(r.replace(/\\/g,"/"))}else{if(e instanceof RegExp)return t=>e.test(t.replace(/\\/g,"/"));if(e instanceof Function)return e;if(e)throw new Error(`Invalid option for 'ignored': ${e}`);return()=>!1}},Uw=e=>({followSymlinks:!!e.followSymlinks,ignored:Ww(e.ignored),poll:e.poll}),vd=new WeakMap,Vw=e=>{let t=vd.get(e);if(t!==void 0)return t;let r=Uw(e);return vd.set(e,r),r},Vo=class{constructor(t,r,n){this.files=Array.isArray(n)?n:[n],this.watcher=r,r.on("initial-missing",s=>{for(let i of this.files)t._missing.has(i)||t._onRemove(i,i,s)}),r.on("change",(s,i)=>{for(let o of this.files)t._onChange(o,s,o,i)}),r.on("remove",s=>{for(let i of this.files)t._onRemove(i,i,s)})}update(t){Array.isArray(t)?this.files=t:this.files.length!==1?this.files=[t]:this.files[0]!==t&&(this.files[0]=t)}close(){this.watcher.close()}},Ko=class{constructor(t,r,n){this.directories=Array.isArray(n)?n:[n],this.watcher=r,r.on("initial-missing",s=>{for(let i of this.directories)t._onRemove(i,i,s)}),r.on("change",(s,i,o)=>{for(let a of this.directories)t._onChange(a,i,s,o)}),r.on("remove",s=>{for(let i of this.directories)t._onRemove(i,i,s)})}update(t){Array.isArray(t)?this.directories=t:this.directories.length!==1?this.directories=[t]:this.directories[0]!==t&&(this.directories[0]=t)}close(){this.watcher.close()}},Ho=class extends Dw{constructor(t){super(),t||(t=Lw),this.options=t,this.aggregateTimeout=typeof t.aggregateTimeout=="number"?t.aggregateTimeout:200,this.watcherOptions=Vw(t),this.watcherManager=Iw(this.watcherOptions),this.fileWatchers=new Map,this.directoryWatchers=new Map,this._missing=new Set,this.startTime=void 0,this.paused=!1,this.aggregatedChanges=new Set,this.aggregatedRemovals=new Set,this.aggregateTimer=void 0,this._onTimeout=this._onTimeout.bind(this)}watch(t,r,n){let s,i,o,a;r?(s=t,i=r,o=vs,a=n):{files:s=vs,directories:i=vs,missing:o=vs,startTime:a}=t,this.paused=!1;let c=this.fileWatchers,u=this.directoryWatchers,l=this.watcherOptions.ignored,f=m=>!l(m),d=(m,v,w)=>{let S=m.get(v);S===void 0?m.set(v,w):Array.isArray(S)?S.push(w):m.set(v,[S,w])},h=new Map,p=new Map,g=new Set;if(this.watcherOptions.followSymlinks){let m=new jw;for(let v of s)if(f(v))for(let w of m.resolve(v))(v===w||f(w))&&d(h,w,v);for(let v of o)if(f(v))for(let w of m.resolve(v))(v===w||f(w))&&(g.add(v),d(h,w,v));for(let v of i)if(f(v)){let w=!0;for(let S of m.resolve(v))f(S)&&d(w?p:h,S,v),w=!1}}else{for(let m of s)f(m)&&d(h,m,m);for(let m of o)f(m)&&(g.add(m),d(h,m,m));for(let m of i)f(m)&&d(p,m,m)}for(let[m,v]of c){let w=h.get(m);w===void 0?(v.close(),c.delete(m)):(v.update(w),h.delete(m))}for(let[m,v]of u){let w=p.get(m);w===void 0?(v.close(),u.delete(m)):(v.update(w),p.delete(m))}Gw.batch(()=>{for(let[m,v]of h){let w=this.watcherManager.watchFile(m,a);w&&c.set(m,new Vo(this,w,v))}for(let[m,v]of p){let w=this.watcherManager.watchDirectory(m,a);w&&u.set(m,new Ko(this,w,v))}}),this._missing=g,this.startTime=a}close(){this.paused=!0,this.aggregateTimer&&clearTimeout(this.aggregateTimer);for(let t of this.fileWatchers.values())t.close();for(let t of this.directoryWatchers.values())t.close();this.fileWatchers.clear(),this.directoryWatchers.clear()}pause(){this.paused=!0,this.aggregateTimer&&clearTimeout(this.aggregateTimer)}getTimes(){let t=new Set;_s(this.fileWatchers.values(),t),_s(this.directoryWatchers.values(),t);let r=Object.create(null);for(let n of t){let s=n.getTimes();for(let i of Object.keys(s))r[i]=s[i]}return r}getTimeInfoEntries(){let t=new Map;return this.collectTimeInfoEntries(t,t),t}collectTimeInfoEntries(t,r){let n=new Set;_s(this.fileWatchers.values(),n),_s(this.directoryWatchers.values(),n);let s={value:0};for(let i of n)i.collectTimeInfoEntries(t,r,s)}getAggregated(){this.aggregateTimer&&(clearTimeout(this.aggregateTimer),this.aggregateTimer=void 0);let t=this.aggregatedChanges,r=this.aggregatedRemovals;return this.aggregatedChanges=new Set,this.aggregatedRemovals=new Set,{changes:t,removals:r}}_onChange(t,r,n,s){n=n||t,this.paused||(this.emit("change",n,r,s),this.aggregateTimer&&clearTimeout(this.aggregateTimer),this.aggregateTimer=setTimeout(this._onTimeout,this.aggregateTimeout)),this.aggregatedRemovals.delete(t),this.aggregatedChanges.add(t)}_onRemove(t,r,n){r=r||t,this.paused||(this.emit("remove",r,n),this.aggregateTimer&&clearTimeout(this.aggregateTimer),this.aggregateTimer=setTimeout(this._onTimeout,this.aggregateTimeout)),this.aggregatedChanges.delete(t),this.aggregatedRemovals.add(t)}_onTimeout(){this.aggregateTimer=void 0;let t=this.aggregatedChanges,r=this.aggregatedRemovals;this.aggregatedChanges=new Set,this.aggregatedRemovals=new Set,this.emit("aggregated",t,r)}};_d.exports=Ho});var Sd=E((iR,Ed)=>{"use strict";var Kw=require("child_process").exec,Fe=require("fs"),Hw=require("os"),pr=require("path"),ws=Ao(),Es=Lf(),zw=require("child_process").spawn,Bw=wd(),He=function(e){return this.settings=e||{},this};He.prototype._resolve_refs=function(e){return this.envs={},typeof e.AWS_KEY=="object"&&Object.prototype.hasOwnProperty.call(e.AWS_KEY,"Ref")&&typeof e.AWS_KEY.Ref=="string"&&e.AWS_KEY.Ref.indexOf("env.")===0&&(this.envs[e.AWS_KEY.Ref.split("env.")[1]]=process.env[e.AWS_KEY.Ref.split("env.")[1]],e.AWS_KEY=process.env[e.AWS_KEY.Ref.split("env.")[1]]),typeof e.AWS_SECRET=="object"&&Object.prototype.hasOwnProperty.call(e.AWS_SECRET,"Ref")&&typeof e.AWS_SECRET.Ref=="string"&&e.AWS_SECRET.Ref.indexOf("env.")===0&&(this.envs[e.AWS_SECRET.Ref.split("env.")[1]]=process.env[e.AWS_SECRET.Ref.split("env.")[1]],e.AWS_SECRET=process.env[e.AWS_SECRET.Ref.split("env.")[1]]),typeof e.Role=="object"&&Object.prototype.hasOwnProperty.call(e.Role,"Ref")&&typeof e.Role.Ref=="string"&&e.Role.Ref.indexOf("env.")===0&&(this.envs[e.Role.Ref.split("env.")[1]]=process.env[e.Role.Ref.split("env.")[1]],e.Role=process.env[e.Role.Ref.split("env.")[1]]),e};He.prototype._parse_config_file=function(e){e.substr(-7)===".lambda"&&(e=e.substr(0,e.length-7));var t=e+".lambda";Fe.existsSync(t)||(console.log("Lambda config not found ("+e+".lambda )"),process.exit(-1));var r;try{r=ws.safeLoad(Fe.readFileSync(t,"utf8"),{schema:Es(),onWarning:function(i){console.error(i)},json:!0})}catch(i){console.log("Invalid config file ("+e+".lambda )",i),this.settings.exitOnError!==!1&&process.exit(-1);return}r=this._resolve_refs(r),r.FunctionName||(r.FunctionName=e.split("/").slice(-1)[0]);var n=e.split("/").slice(0,-1).join("/"),s;return r.PATH.substr(0,1)==="/"||r.PATH.substr(0,2)=="~/"?s=r.PATH.replace(/\/\.\//g,"/"):s=(process.cwd()+"/"+n+"/"+r.PATH).replace(/\/\.\//g,"/"),s.substr(-1)!=="/"&&(s+="/"),r.PATH=s,r};He.prototype.deploy=function(e){var t=require("aws-sdk");process.env.AWSPILOT_DOCKER_WORKDIR&&process.chdir(process.env.AWSPILOT_DOCKER_WORKDIR),e.substr(-7)===".lambda"&&(e=e.substr(0,e.length-7));var r=e+".lambda";Fe.existsSync(r)||(console.log("Lambda config not found ("+e+".lambda )"),process.exit(-1));try{var n=ws.safeLoad(Fe.readFileSync(r,"utf8"),{schema:Es(),onWarning:function(p){console.error(p)},json:!0})}catch(p){console.log("Invalid config file ("+e+".lambda )",p),i.settings.exitOnError!==!1&&process.exit(-1);return}typeof n.AWS_KEY=="object"&&Object.prototype.hasOwnProperty.call(n.AWS_KEY,"Ref")&&typeof n.AWS_KEY.Ref=="string"&&n.AWS_KEY.Ref.indexOf("env.")===0&&(n.AWS_KEY=process.env[n.AWS_KEY.Ref.split("env.")[1]]),typeof n.AWS_SECRET=="object"&&Object.prototype.hasOwnProperty.call(n.AWS_SECRET,"Ref")&&typeof n.AWS_SECRET.Ref=="string"&&n.AWS_SECRET.Ref.indexOf("env.")===0&&(n.AWS_SECRET=process.env[n.AWS_SECRET.Ref.split("env.")[1]]),typeof n.Role=="object"&&Object.prototype.hasOwnProperty.call(n.Role,"Ref")&&typeof n.Role.Ref=="string"&&n.Role.Ref.indexOf("env.")===0&&(n.Role=process.env[n.Role.Ref.split("env.")[1]]),n.FunctionName||(n.FunctionName=e.split("/").slice(-1)[0]),/^([a-zA-Z0-9-_.]+)(:(\$LATEST|[a-zA-Z0-9-_]+))?$/.test(n.FunctionName)||(console.log("Invalid function name",n.FunctionName),process.exit(-1)),t.config.update({accessKeyId:n.AWS_KEY,secretAccessKey:n.AWS_SECRET,region:n.AWS_REGION});var s=new t.Lambda({apiVersion:"2015-03-31"}),i=this,o=pr.join(Hw.tmpdir(),n.FunctionName+"-"+new Date().getTime()+".zip"),a=e.split("/").slice(0,-1).join("/"),c;n.PATH.substr(0,1)==="/"||n.PATH.substr(0,2)=="~/"?c=n.PATH.replace(/\/\.\//g,"/"):c=(process.cwd()+"/"+a+"/"+n.PATH).replace(/\/\.\//g,"/"),c.substr(-1)!=="/"&&(c+="/"),Fe.existsSync(c)||(console.log("No such directory:"+c),process.exit(-1));var u=process.cwd();process.chdir(c);var l=".";try{var f=Fe.readFileSync("package.json","utf8");if(f){var d=JSON.parse(f).files;typeof d=="object"&&(l=d.join(" "))}}catch{}var h="zip -r -9  "+o+" "+l;Kw(h,{maxBuffer:1024*1024*5},function(p){if(process.chdir(u),p)throw console.log("Error generating zip file"),p;var g=Fe.readFileSync(o);typeof n.Environment!="object"&&(n.Environment={}),typeof n.Environment.Variables!="object"&&(n.Environment.Variables={}),typeof n.Tags!="object"&&(n.Tags={});var m={Code:{ZipFile:g},Description:n.Description,FunctionName:n.FunctionName,Handler:n.Handler,MemorySize:n.MemorySize,Publish:!0,Role:n.Role,Runtime:n.Runtime||"nodejs10.x",Timeout:n.Timeout,Environment:n.Environment,Layers:n.Layers||[],Tags:n.Tags};Fe.unlinkSync(o),s.createFunction(m,function(v){if(v&&v.code!=="ResourceConflictException"){console.log("ERROR:",v),i.settings.exitOnError!==!1&&process.exit(-1);return}if(v&&v.code==="ResourceConflictException"){var w={Description:n.Description,FunctionName:n.FunctionName,Handler:n.Handler,MemorySize:n.MemorySize,Role:n.Role,Runtime:n.Runtime||"nodejs10.x",Timeout:n.Timeout,Environment:n.Environment,Layers:n.Layers||[]};s.updateFunctionConfiguration(w,function(S,b){if(S){console.log("ERROR:",S),i.settings.exitOnError!==!1&&process.exit(-1);return}var R={FunctionName:n.FunctionName,Publish:!0,ZipFile:g};s.updateFunctionCode(R,function(C){if(C){console.log("ERROR:",C),i.settings.exitOnError!==!1&&process.exit(-1);return}if(Object.keys(n.Tags).length){s.tagResource({Resource:b.FunctionArn,Tags:n.Tags},function(L){L&&console.log("WARNING: tagResource failed on function ",n.FunctionName),console.log("Deployed!")});return}console.log("Deployed!")})});return}console.log("Deployed!")})})};He.prototype.delete=function(e){var t=require("aws-sdk");e.substr(-7)===".lambda"&&(e=e.substr(0,e.length-7));var r=e+".lambda";Fe.existsSync(r)||(console.log("Lambda config not found ("+e+".lambda )"),process.exit(-1));try{var n=ws.safeLoad(Fe.readFileSync(r,"utf8"),{schema:Es(),onWarning:function(i){console.error(i)},json:!0})}catch(i){console.log("Invalid config file ("+e+".lambda )",i),process.exit(-1)}typeof n.AWS_KEY=="object"&&Object.prototype.hasOwnProperty.call(n.AWS_KEY,"Ref")&&typeof n.AWS_KEY.Ref=="string"&&n.AWS_KEY.Ref.indexOf("env.")===0&&(n.AWS_KEY=process.env[n.AWS_KEY.Ref.split("env.")[1]]),typeof n.AWS_SECRET=="object"&&Object.prototype.hasOwnProperty.call(n.AWS_SECRET,"Ref")&&typeof n.AWS_SECRET.Ref=="string"&&n.AWS_SECRET.Ref.indexOf("env.")===0&&(n.AWS_SECRET=process.env[n.AWS_SECRET.Ref.split("env.")[1]]),typeof n.Role=="object"&&Object.prototype.hasOwnProperty.call(n.Role,"Ref")&&typeof n.Role.Ref=="string"&&n.Role.Ref.indexOf("env.")===0&&(n.Role=process.env[n.Role.Ref.split("env.")[1]]),t.config.update({accessKeyId:n.AWS_KEY,secretAccessKey:n.AWS_SECRET,region:n.AWS_REGION}),n.FunctionName||(n.FunctionName=e.split("/").slice(-1)[0]);var s=new t.Lambda({apiVersion:"2015-03-31"});s.deleteFunction({FunctionName:n.FunctionName},function(i){i&&i.code!=="ResourceNotFoundException"&&(console.log("delete error:",i),process.exit(-1)),i&&i.code==="ResourceNotFoundException"?console.log("WARNING: deleteFunction ",n.FunctionName,": ResourceNotFoundException "):console.log("Deleted!")})};He.prototype.invoke=function(e){var t=require("aws-sdk");e.substr(-7)===".lambda"&&(e=e.substr(0,e.length-7));var r=e+".lambda";Fe.existsSync(r)||(console.log("Lambda config not found ("+e+".lambda )"),process.exit(-1));try{var n=ws.safeLoad(Fe.readFileSync(r,"utf8"),{schema:Es(),onWarning:function(o){console.error(o)},json:!0})}catch(o){console.log("Invalid config file ("+e+".lambda )",o),process.exit(-1)}typeof n.AWS_KEY=="object"&&Object.prototype.hasOwnProperty.call(n.AWS_KEY,"Ref")&&typeof n.AWS_KEY.Ref=="string"&&n.AWS_KEY.Ref.indexOf("env.")===0&&(n.AWS_KEY=process.env[n.AWS_KEY.Ref.split("env.")[1]]),typeof n.AWS_SECRET=="object"&&Object.prototype.hasOwnProperty.call(n.AWS_SECRET,"Ref")&&typeof n.AWS_SECRET.Ref=="string"&&n.AWS_SECRET.Ref.indexOf("env.")===0&&(n.AWS_SECRET=process.env[n.AWS_SECRET.Ref.split("env.")[1]]),typeof n.Role=="object"&&Object.prototype.hasOwnProperty.call(n.Role,"Ref")&&typeof n.Role.Ref=="string"&&n.Role.Ref.indexOf("env.")===0&&(n.Role=process.env[n.Role.Ref.split("env.")[1]]),t.config.update({accessKeyId:n.AWS_KEY,secretAccessKey:n.AWS_SECRET,region:n.AWS_REGION}),n.FunctionName||(n.FunctionName=e.split("/").slice(-1)[0]);var s=new t.Lambda({apiVersion:"2015-03-31"}),i={FunctionName:n.FunctionName,InvocationType:"RequestResponse",LogType:"Tail",Payload:JSON.stringify({})};s.invoke(i,function(o,a){o&&(console.log("invoke error:",o),process.exit(-1));try{console.log(JSON.stringify(JSON.parse(a.Payload),null,"	"))}catch{}console.log("------------"),console.log(Buffer.from(a.LogResult,"base64").toString())})};He.prototype.start=function(e){var t=new He({exitOnError:!1}),r=t._parse_config_file(e),n=pr.resolve(e),s=process.cwd(),i=new Bw({aggregateTimeout:3e3,ignored:"**/.git"});console.log("---|",process.env.AWSPILOT_DOCKER_WORKDIR?"DOCKER":"LOCAL",new Date().toISOString());try{t.deploy(e)}catch(c){console.log(c)}var o=[n],a=[r.PATH];process.env.AWSPILOT_DOCKER_WORKDIR&&(o=[],a=[r.PATH,pr.dirname(n)]),i.watch({files:o,directories:a,startTime:Date.now()-1e4}),i.on("aggregated",function(c,u){console.log(`
---|`,process.env.AWSPILOT_DOCKER_WORKDIR?"DOCKER":"LOCAL",new Date().toISOString()),Array.from(c).map(function(l){console.log("---| * ",l)}),Array.from(u).map(function(l){console.log("---| - ",l)});try{process.chdir(s),t.deploy(e)}catch(l){console.log(l)}})};He.prototype.start_docker=function(e){var t=new He({exitOnError:!0}),r=t._parse_config_file(e),n=[];Object.keys(t.envs).map(function(i){n.push("-e"),n.push(i+"="+t.envs[i])});var s=pr.resolve(e);zw("docker",["run","-it","--rm","-v",s+":"+s,"-v",r.PATH+":"+r.PATH,"-e","AWSPILOT_DOCKER_WORKDIR="+pr.dirname(s)+"/","-e","AWSPILOT_LAMBDA_CONFIG="+s.slice(pr.dirname(s).length+1)].concat(n).concat(["awspilotdev/lambda_deploy_nodejs8.10"]),{stdio:[process.stdin,process.stdout,process.stderr]})};Ed.exports=new He});var OE={};dh(OE,{handleHttp:()=>RE,handleInvoke:()=>TE,schema:()=>qd});module.exports=hh(OE);var $s=(e,t)=>{let r=t.get(e);return r||(r=new Map,t.set(e,r)),r},ph=(e,t,r)=>(r.set(e,t),r),hn=(e,t,r,n)=>{let s=$s(e,n);return ph(t,r,s),n},it=(e,t,r,n,s)=>{let i=$s(e,s);return hn(t,r,n,i),s},pn=(e,t,r,n,s,i)=>{let o=$s(e,i);return it(t,r,n,s,o),i};var Je={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*","Access-Control-Allow-Credentials":"true"};var mh=e=>Buffer.from(e,"base64").toString("utf-8"),aa=e=>{let t=e.split(".");return JSON.parse(mh(t[1]))},ca=(e,t)=>{try{return JSON.parse(t)}catch{return e}},la=(e,t)=>{let r=e.indexOf(t);return r===-1?e:e.substring(0,r)};var Gt=e=>({statusCode:403,headers:Je,body:typeof e=="string"?e:JSON.stringify(e)});var Ge=e=>({statusCode:400,headers:Je,body:typeof e=="string"?e:JSON.stringify(e)}),ua=e=>({statusCode:401,headers:Je,body:e?JSON.stringify(e):"Unauthorized"}),fa=e=>({statusCode:404,headers:Je,body:e?JSON.stringify(e):"Not Found"}),da=e=>({statusCode:422,headers:Je,body:e?JSON.stringify(e):"Unprocessable Entity"}),xs=e=>e.statusCode?e:(console.error(e),{statusCode:500,headers:Je,body:e.message});var FE=Ge({name:"InvalidEmailError",message:"The email must be valid and must not contain upper case letters or spaces."}),kE=Ge({name:"InvalidPasswordError",message:"The password must contain at least 8 characters and at least 1 number."}),IE=Ge({name:"InvalidSrpAError",message:"The SRP A value must be a correctly calculated random hex hash based on big integers."}),jE=Ge({name:"InvalidRefreshTokenError",message:"Refresh token is invalid."}),DE=Ge({name:"VerificationCodeMismatchError",message:"The verification code does not match."}),qE=Gt({name:"VerificationCodeExpiredError",message:"The verification code has exipired. Please retry via Reset Password Init (in case of pasword reset) or Register Verify Resend (in case of register)."}),GE=fa({name:"UserNotFoundError",message:"No user was found under the given email or user ID."}),LE=Gt({name:"UserNotVerifiedError",message:"The user must be verified with Register Verify operation."}),WE=Gt({name:"UserExistsError",message:"There is an existing user with the given email address."}),UE=Ge({name:"UserMissingPasswordChallengeError",message:"The user must have an active require password change challenge."}),VE=Gt({name:"PasswordResetRequiredError",message:"The password must be reset."}),KE=da({name:"PasswordResetMissingParamError",message:"Either a verification code or the users old password are required."}),HE=Gt({name:"LoginVerifyError",message:"The password could not be verified. Please check password, userId, secretBlock, signature and timestamp."});var mn=process.env.AWS_REGION||"",ha=process.env.ADMIN_EMAILS||"",gr=process.env.CLOUDFRONT_ACCESS_KEY_ID||"",Lt=process.env.CLOUDFRONT_NEW_ACCESS_KEY_PARAMETER||"",BE=process.env.INVITE_USER_VALIDATION_VIEW||"",YE=process.env.PULL_LAMBDA_NAME||"",Wt=process.env.MEDIA_DOMAIN||"",JE=process.env.CLIENT_ID||"",QE=process.env.USER_POOL_ID||"";var pa=require("crypto"),ma=e=>(0,pa.createHash)("sha256").update(e).digest("hex");var ga=(e=100)=>{let t=[],r=0,n=0,s=0,i=l=>{t[n]=l,n+=1},o=()=>{let l=t[r];return delete t[r],r+=1,l},a=()=>n-r,c=l=>{let f=new Promise((d,h)=>{i(async()=>{await l().then(d).catch(h)})});return u(),f},u=async()=>{if(s<e&&a()>0){let l=o();s+=1,l&&await l(),s-=1,u()}};return{queueLoad:c,length:a}};var gn=(e,t,r)=>{let n=r.get(e);if(n!=null)return n.get(t)},Ps=(e,t,r,n)=>{let s=n.get(e);if(s!=null)return gn(t,r,s)};var ot=e=>{if(typeof e=="string")return e;let t="{";if(e.keys!=null){let r=e,n=r.keys(),s=r.size,i=0;for(let o of n){let a=r.get(o);i<s-1?t+=`"${o}":${ot(a)},`:t+=`"${o}":${ot(a)}`,i+=1}}else{let r=e,n=Object.keys(r);for(let s=0;s<n.length;s++){let i=n[s];s<n.length-1?t+=`"${i}":${ot(r[i])},`:t+=`"${i}":${ot(r[i])}`}}return t+="}",t};var bd=oa(Yl(),1),oR=oa(Sd(),1);var Rd=(e,t,{auth:r=!0}={})=>new Promise((n,s)=>{let i;try{r?i=aa(t.headers.Authorization||t.headers.authorization||""):i={}}catch{s(ua());return}try{let o=ca(t.body||{},t.body||""),a=new bd.default;if(a.addKeyword("example"),a.validate(e,o)){let u=i.email,l=t.headers["x-as-role"]||"user",f=!!t.headers["x-as-admin"]&&ha.includes(u);n({userEmail:u,body:o,asAdmin:f,asRole:l})}else s(Ge(JSON.stringify(a.errors)))}catch(o){s(Ge(o.message))}});var ze=(e,t)=>t===void 0?e:t&&(t===!0?e||t:!e||e===!0?t:{...e,...t}),rn=(e,t)=>{if(typeof e!="object"||typeof t!="object"||e===null||t===null)return t;let r={},n=Object.keys(e);for(let i=0;i<n.length;i+=1){let o=n[i],a=e[o],c=t[o];r[o]=o in t?rn(a,c):a}let s=Object.keys(t);for(let i=0;i<s.length;i+=1){let o=s[i];o in r||(r[o]=t[o])}return r},ke=(e,t,r=1,n=[])=>{if(!e)return;let s=Object.keys(e);for(let i=0;i<s.length;i+=1){let o=s[i],a=e[o];r===1?t(a,[...n,o]):a&&typeof a=="object"&&ke(a,t,r-1,[...n,o])}},nn=(e,t,r)=>{if(!r)return e;try{let n=r;for(let s=0;s<t.length;s+=1){let i=t[s];if(i in n)n=n[i];else return e}return n}catch{return e}},nt=(e,t,r)=>{if(e.length===0)return t;let n=r;for(let i=0;i<e.length-1;i+=1){let o=e[i];o in n||(n[o]={}),n=n[o]}let s=e[e.length-1];return n[s]=t,r},zo=(e,t)=>{let r=t;for(let s=0;s<e.length-1;s+=1){let i=e[s];i in r||(r[i]={}),r=r[i]}let n=e[e.length-1];return delete r[n],t};var OR={view:JSON.stringify({"todo-list1":{include:{node:!0,rights:!0},edges:{"todo-list/todo":{include:{edges:!0,metadata:!0}}}}},null,2),graph:JSON.stringify({nodes:{node1:{id:"node1",someProp:"someValue"}}},null,2),node:JSON.stringify({id:"todo123",text:"buy groceries"},null,2),rights:JSON.stringify({read:!0,write:!0,admin:!1},null,2)};var sn=(e,t)=>(r,n)=>{if(!n)return r;let s=r??{};return ke(n,(i,o)=>{if(i===void 0)nt(o,void 0,s);else{let a=nn(void 0,o,r),c=t(a,i);nt(o,c,s)}},e),s},jR=sn(1,ze),DR=sn(4,ze),qR=sn(1,rn),GR=sn(1,ze),LR=sn(1,rn);var on=e=>(t,r)=>{if(!r)return t;let n=t??{};return ke(r,(s,i)=>{if(s===void 0){zo(i,n);return}if(s===!1||typeof s=="object"){nt(i,s,n);return}let o=nn(void 0,i,t);if(!(s===!0&&typeof o=="object")){nt(i,s,n);return}nt(i,o,n)},e),n},WR=on(1),UR=on(4),VR=on(1),KR=on(1),HR=on(5);var Ad=()=>{let e=[];return{addPromise:n=>(e.push(n),n),awaitPromises:async()=>{for(;!(e.length<=0);){let n=e;e=[],await Promise.all(n)}}}};var $d=process.env.BUCKET_LOGS||"",jt=process.env.BUCKET_EDGES||"",an=process.env.BUCKET_REVERSE_EDGES||"",mr=process.env.BUCKET_NODES||"",Ss=process.env.BUCKET_OWNERS||"",cn=process.env.BUCKET_RIGHTS_ADMIN||"",ln=process.env.BUCKET_RIGHTS_READ||"",un=process.env.BUCKET_RIGHTS_WRITE||"",_e=process.env.BUCKET_MEDIA||"";var Cd=require("@aws-sdk/s3-request-presigner"),he=require("@aws-sdk/client-s3");var bs=require("@aws-sdk/client-ssm");var cE=new bs.SSMClient({region:mn,apiVersion:"latest"}),Rs=async(e,t=!1)=>{let r=new bs.GetParameterCommand({Name:e,WithDecryption:t});try{let n=await cE.send(r);return n.Parameter?n.Parameter.Value:void 0}catch(n){console.error(n);return}};var xd=require("@aws-sdk/cloudfront-signer"),lE=()=>{let e=null;return async()=>(e||(e=Rs(Lt||"CLOUDFRONT_ACCESS_KEY",!0).catch(console.error)),e)},uE=lE(),fE=1*24*60*60*1e3,Pd=async(e,t=fE)=>{let r=await uE();if(gr&&r)return(0,xd.getSignedUrl)({url:e,keyPairId:gr,dateLessThan:new Date(Date.now()+t).toDateString(),privateKey:r});throw new Error("Could not sign URL because of missing cloudfront keys.")};var Dt=new he.S3Client({region:mn,apiVersion:"latest"}),dE=e=>new Promise((t,r)=>{let n=[];e.on("data",s=>n.push(s)),e.on("error",r),e.on("end",()=>t(Buffer.concat(n)))}),Be=async(e,t,r)=>{let n=r?Buffer.from(JSON.stringify(r)):void 0,s=new he.PutObjectCommand({Bucket:e,Key:t,Body:n});try{await Dt.send(s);return}catch(i){console.error(i);return}};var hE=async(e,t,{contentType:r})=>{let n=new he.CreateMultipartUploadCommand({Bucket:e,Key:t,ContentType:r,CacheControl:"max-age=31557600"});try{return(await Dt.send(n)).UploadId}catch(s){console.error(s);return}},pE=async(e,t,{uploadId:r,partNumber:n})=>{let s=new he.UploadPartCommand({Bucket:e,Key:t,UploadId:r,PartNumber:n});try{return(0,Cd.getSignedUrl)(Dt,s,{expiresIn:3600})}catch(i){console.error(i);return}},Nd=async(e,t,{contentType:r,fileSize:n,partSize:s})=>{let i=await hE(e,t,{contentType:r});if(!i){console.error("Could not create multipart upload.");return}try{let o=[];for(let c=0;c<Math.ceil(n/s);c++)Lt?o.push(Pd(`https://${Wt}/${t}?partNumber=${c+1}&uploadId=${i||""}`)):o.push(pE(e,t,{uploadId:i,partNumber:c+1}));let a=await Promise.all(o);return{uploadId:i,uploadUrls:a}}catch(o){console.error(o);return}};var qt=async(e,t)=>{let r=new he.GetObjectCommand({Bucket:e,Key:t});try{let n=await Dt.send(r);return n.Body?dE(n.Body):null}catch{return}},yt=async(e,t)=>{let r=new he.DeleteObjectCommand({Bucket:e,Key:t});try{await Dt.send(r);return}catch{return}};var Yo=async(e,t)=>{let r=new he.HeadObjectCommand({Bucket:e,Key:t});try{let n=await Dt.send(r);return{etag:n.ETag||"",contentType:n.ContentType||"",modifiedDate:n.LastModified?.toISOString()||"",metadata:n.Metadata,size:n.ContentLength||0}}catch{return!1}};var mE=(e,t)=>({subscribe:r=>{try{let n=async s=>{let i=new he.ListObjectsV2Command({Bucket:e,Prefix:t,ContinuationToken:s}),o=await Dt.send(i).then(({Contents:a,NextContinuationToken:c})=>(r.next(a||[]),c));o?n(o):r.complete()};n()}catch(n){r.error(n)}}}),gE=async(e,t,r)=>new Promise((n,s)=>{mE(e,t).subscribe({next:i=>i.forEach(({Key:o,ETag:a})=>{o&&a&&r(o,a)}),complete:()=>n(!0),error:i=>s(i)})}),Ye=async(e,t)=>{let r=[];return await gE(e,t,n=>{r.push(n)}),r};var Md=async(e,t,r,n,s)=>{let i=performance.now(),{awaitPromises:o}=Ad(),{signer:a,loader:c,writer:u,graphAssembler:l,changelogAssembler:f}=s,{writeNode:d,writeMetadata:h,writePrincipalRight:p,writeInheritRight:g,writeFiles:m,getGraphJson:v,getLog:w}=l,{writeNode:S,writeMetadata:b,writePrincipalRight:R,writeFiles:C,getGraphJson:L}=f,be=0,x=0,M=0,P=async y=>await c.getNode(y)!=null,z=y=>c.getRead(y,"user",t),re=y=>c.getWrite(y,"user",t),ie=y=>c.getAdmin(y,"user",t),X=async y=>y==="public"||await z(y),te=(y,_)=>c.getWrite(y,"role",_),B=(y,_)=>c.getAdmin(y,"role",_),ne=async y=>n?P(y):r==="user"?await P(y)&&await re(y):await P(y)&&await X(r)&&await te(y,r),J=async y=>n?P(y):r==="user"?await P(y)&&await ie(y):await P(y)&&await X(r)&&await B(y,r),Qo=y=>{let _=y.slice(0,-1).lastIndexOf(".");return _===-1?"":y.substring(0,_+1)},Ld=async y=>{let _=Qo(y);return r==="user"?!_||re(_):!_||await ne(y)},Xo=y=>{let _=Object.keys(y);for(let O=0;O<_.length;O++){let T=_[O];y[T]===null&&delete y[T]}return y},Ts=async(y,_,O,T)=>{!!await c.getRead(y,_,O)!==T&&(T?(await u.setRead(y,_,O,!0),R(y,_,O,"read","true")):(await u.setRead(y,_,O,!1),R(y,_,O,"read","false")))},Os=async(y,_,O,T)=>{!!await c.getWrite(y,_,O)!==T&&(T?(await u.setWrite(y,_,O,!0),R(y,_,O,"write","true")):(await u.setWrite(y,_,O,!1),R(y,_,O,"write","false")))},As=async(y,_,O,T)=>{!!await c.getAdmin(y,_,O)!==T&&(T?(await u.setAdmin(y,_,O,!0),R(y,_,O,"admin","true")):(await u.setAdmin(y,_,O,!1),R(y,_,O,"admin","false")))},Wd=async(y,_)=>u.setOwner(y,_),Zo=async(y,_)=>{let O=await c.getNode(y);if(!O&&_)await u.setNode(y,_),S(y,`{"old":null,"new":${JSON.stringify(_)}}`);else if(O&&!_)await u.setNode(y,null),S(y,`{"old":${O},"new":null}`);else if(O&&_){let T=JSON.parse(O),A=ze(T,_);typeof A=="object"&&Xo(A),await u.setNode(y,A),S(y,`{"old":${O},"new":${JSON.stringify(A)}}`)}},Ud=async(y,_)=>{let O=r==="user"?"user":"role",T=r==="user"?t:r;await Promise.all([Zo(y,_),Ts(y,O,T,!0),Os(y,O,T,!0),As(y,O,T,!0),Wd(y,t)])},Vd=async(y,_)=>{if(await ne(y)){await Zo(y,_||null),d(y,'{"statusCode":200}');return}if(_&&await Ld(y)&&!await c.ownerExists(y)){await Ud(y,_),d(y,'{"statusCode":200}');return}d(y,'{"statusCode":403}')},Kd=()=>{let y=e.nodes;if(!y)return;let _=Object.keys(y),O=new Array(_.length);for(let T=0;T<_.length;T++){let A=_[T],I=y[A];O[T]=Vd(A,I)}return Promise.all(O)},Hd=async(y,_,O,T,A)=>{let I=await c.getMetadata(y,`${_}/${O}`,T);if(!I&&A)await u.setMetadata(y,`${_}/${O}`,T,A),await u.setReverseEdge(T,`${O}/${_}`,y,!0),b(y,_,O,T,`{"old":null,"new":${JSON.stringify(A)}}`);else if(I&&!A)await u.setMetadata(y,`${_}/${O}`,T,!1),await u.setReverseEdge(T,`${O}/${_}`,y,!1),b(y,_,O,T,`{"old":${I},"new":null}`);else if(I&&A){let G=JSON.parse(I),H=ze(G,A);typeof H=="object"&&Xo(H),await u.setMetadata(y,`${_}/${O}`,T,H),b(y,_,O,T,`{"old":${I},"new":${JSON.stringify(H)}}`)}},zd=async(y,_,O,T,A)=>{let I=ne(y),G=ne(T);await I&&await G?(await Hd(y,_,O,T,A),h(y,_,O,T,'{"statusCode":200}')):h(y,_,O,T,'{"statusCode":403}')},Bd=()=>{let y=e.edges;if(!y)return;let _=[];return ke(y,(O,T)=>{let[A,I,G,H]=T;_.push(zd(I,A,G,H,O))},4),Promise.all(_)},ea=(y,_,O,T)=>{let A=[],I=new Set;if(y)for(let G of y.keys())I.add(G);if(_)for(let G of _.keys())I.add(G);for(let G of I){let H=y?.get(G)?.get("read")==="true",pe=_?.get(G)?.get("read")==="true";H!==pe&&A.push(Ts(T,O,G,H));let st=y?.get(G)?.get("write")==="true",fn=_?.get(G)?.get("write")==="true";st!==fn&&A.push(Os(T,O,G,st));let sa=y?.get(G)?.get("admin")==="true",oh=_?.get(G)?.get("admin")==="true";sa!==oh&&A.push(As(T,O,G,sa))}return Promise.all(A)},Yd=async(y,_)=>{if(await J(_)){let T=await c.listRights(y),A=T.get("user"),I=T.get("role"),G=await c.listRights(_),H=G.get("user"),pe=G.get("role");await ea(A,H,"user",_),await ea(I,pe,"role",_),g(_,'{"statusCode":200}')}else g(_,'{"statusCode":403}')},Jd=()=>{let y=e.rights;if(!y)return;let _=Object.keys(y),O=[];for(let T=0;T<_.length;T++){let A=_[T],I=y[A]?.inherit?.from;I&&O.push(Yd(I,A))}return Promise.all(O)},ta=async(y,_,O,T,A)=>{T==="read"?await Ts(y,_,O,A):T==="write"?await Os(y,_,O,A):T==="admin"&&await As(y,_,O,A),p(y,_,O,T,'{"statusCode":200}')},Qd=async(y,_)=>{if(await J(y)){let T=[],A=_.user;A&&ke(A,(G,H)=>{let[pe,st]=H;T.push(ta(y,"user",pe,st,G))},2);let I=_.role;I&&ke(I,(G,H)=>{let[pe,st]=H;T.push(ta(y,"role",pe,st,G))},2),await Promise.all(T)}else{let T=_.user;T&&ke(T,(I,G)=>{let[H,pe]=G;p(y,"user",H,pe,'{"statusCode":403}')},2);let A=_.role;A&&ke(A,(I,G)=>{let[H,pe]=G;p(y,"role",H,pe,'{"statusCode":403}')},2)}},Xd=()=>{let y=e.rights;if(!y)return;let _=Object.keys(y),O=[];for(let T=0;T<_.length;T++){let A=_[T],I=y[A];O.push(Qd(A,I))}return Promise.all(O)},ra=async(y,_,O)=>{let T=await c.getFileRef(y,_);if(!T&&O){let A={fileKey:O};await u.setFileRef(y,_,A),C(y,_,`{"old":null,"new":${JSON.stringify(A)}}`)}else if(T&&!O)await u.setFileRef(y,_,null),C(y,_,`{"old":${JSON.stringify(T)},"new":null}`);else if(T&&O){let A={fileKey:O};await u.setFileRef(y,_,A),C(y,_,`{"old":${JSON.stringify(T)},"new":${JSON.stringify(A)}}`)}},Zd=async(y,_)=>{let O=await c.getFileMetadata(y);if(!O&&_)await u.setFileMetadata(y,_);else if(O&&!_)await u.setFileMetadata(y,null);else if(O&&_){let T=ze(O,_);await u.setFileMetadata(y,T)}},eh=async(y,_,O)=>{let{filename:T,contentType:A,fileSize:I,partSize:G=5242880}=O,H=`file/${ma(`${y}/${_}`)}/${T}`;if(await ra(y,_,H),await Zd(H,{nodeId:y,prop:_,filename:T,contentType:A,fileSize:I}),I>G){let pe=await Nd(_e,H,{contentType:A,fileSize:I,partSize:G});if(!pe){m(y,_,'{"statusCode":500}');return}let{uploadUrls:st,uploadId:fn}=pe;await u.setUploadId(fn,H),m(y,_,`{"statusCode":200,"uploadId":"${fn}","uploadUrls":${JSON.stringify(st)}}`)}else{let pe=a.signUrl(`https://${Wt}/${H}`);m(y,_,`{"statusCode":200,"uploadUrls":["${pe}"]}`)}},th=async(y,_)=>{await ra(y,_,null)},rh=async(y,_)=>{if(await ne(y)){let T=Object.keys(_),A=new Array(T.length);for(let I=0;I<T.length;I++){let G=T[I],H=_[G];H?A.push(eh(y,G,H)):A.push(th(y,G))}await Promise.all(A)}else{let T=Object.keys(_);for(let A=0;A<T.length;A++)m(y,T[A],'{"statusCode":403}')}},nh=()=>{let y=e.files;if(!y)return;let _=Object.keys(y),O=new Array(_.length);for(let T=0;T<_.length;T++){let A=_[T],I=y[A];I&&(O[T]=rh(A,I))}return Promise.all(O)};await Kd(),await Bd(),await Jd(),await Xd(),await nh(),await o(),await u.setPushLog(t,"requestId",L());let na=v(),sh=L(),ih={graphAssembler:w(),loader:c.getLog(),request:{payloadBytes:na.length,time:performance.now()-i,sendTime:0,timeQueryNode:be,timeQueryEdge:x,timeLoadEdge:M}};return[na,sh,ih]};var{queueLoad:xe}=ga(200),yE=async e=>Ye(mr,e),vE=async(e,t)=>Ye(jt,`${e}/${t}/`),_E=async(e,t)=>Ye(an,`${e}/${t}/`),wE=async(e,t)=>{let r=la(t,"*"),n=await Ye(jt,`${e}/${r}`),s=new RegExp(t.replaceAll("*",".*").replaceAll("/","\\/"));return r.length<t.length-2?n.filter(i=>i.match(s)):n},EE=async e=>{let[,,t]=e.split("/"),r=await qt(_e,e),{fileKey:n=""}=r?JSON.parse(r.toString()):{};return{prop:t,fileKey:n}},SE=async e=>{let t=await Ye(_e,`ref/${e}`),r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=EE(t[n]);return Promise.all(r)},Fd=()=>{let e=0,t=0,r=0,n=async w=>{e+=1;let S=await xe(()=>qt(mr,w));return S==null?null:S.toString()},s=w=>async(S,b,R)=>!!await xe(()=>Yo(w,`${S}/${b}/${R}`)),i=async(w,S,b)=>{t+=1;let R=await xe(()=>qt(jt,w+"/"+S+"/"+b));return R===null?"true":R===void 0?"":R.toString()},o=w=>xe(()=>Yo(_e,w)),a=async(w,S)=>{let b=`ref/${w}/${S}`,R=await qt(_e,b);if(!R)return null;let{fileKey:C=""}=JSON.parse(R.toString());return{prop:S,fileKey:C}},c=async w=>xe(()=>SE(w)),u=async w=>{let S=`metadata/${w}`,b=await qt(_e,S);return b?JSON.parse(b.toString()):null},l=async w=>{let S=await qt(_e,`uploads/${w}`);if(!S)return null;let{fileKey:b=""}=JSON.parse(S.toString());return b},f=async(w,S)=>{let b=await xe(()=>wE(w,`${S}/`));if(!b)return[];let R=new Array(b.length);for(let C=0;C<b.length;C++){let[,L,be,x]=b[C].split("/");R[C]=[L,be,x]}return R},d=async(w,S)=>{let b=await xe(()=>vE(w,S)),R=new Map;for(let C=0;C<b.length;C++){let[,,,L]=b[C].split("/");R.set(L,!0)}return R},h=async(w,S)=>{let b=await xe(()=>_E(w,S)),R=new Map;for(let C=0;C<b.length;C++){let[,,,L]=b[C].split("/");R.set(L,!0)}return R},p=async w=>xe(()=>yE(w)),g=async w=>{let S=xe(()=>Ye(ln,`${w}/`)),b=xe(()=>Ye(un,`${w}/`)),R=xe(()=>Ye(cn,`${w}/`)),C=await S,L=await b,be=await R,x=new Map;for(let M=0;M<C.length;M++){let[,P,z]=C[M].split("/");(P==="user"||P==="role")&&it(P,z,"read","true",x)}for(let M=0;M<L.length;M++){let[,P,z]=L[M].split("/");(P==="user"||P==="role")&&it(P,z,"write","true",x)}for(let M=0;M<be.length;M++){let[,P,z]=be[M].split("/");(P==="user"||P==="role")&&it(P,z,"admin","true",x)}return x},m=async w=>{let S=await xe(()=>Ye(Ss,`${w}/`));return S&&S.length>0},v=()=>({nodes:e,metadata:t,files:r});return{getNode:n,getRead:s(ln),getWrite:s(un),getAdmin:s(cn),getMetadata:i,getFileHead:o,getFileRef:a,getFileRefs:c,getFileMetadata:u,getUpload:l,getEdges:d,getReverseEdges:h,getEdgesWildcard:f,getNodesWildcard:p,listRights:g,ownerExists:m,getLog:v}};var kd=()=>{let e=async(u,l)=>l===null?yt(mr,u):Be(mr,u,l),t=async(u,l,f,d)=>d?Be(jt,`${u}/${l}/${f}`,d):yt(jt,`${u}/${l}/${f}`),r=async(u,l,f,d)=>d?Be(an,`${u}/${l}/${f}`,!0):yt(an,`${u}/${l}/${f}`),n=u=>async(l,f,d,h)=>{let p=`${l}/${f}/${d}`;return h?Be(u,p,!0):yt(u,p)},s=async(u,l)=>{if(l===null)throw new Error("Cannot set owner to null");return Be(Ss,`${u}/owner/${l}`,!0)},i=async(u,l,f)=>{let d=`ref/${u}/${l}`;return f===null?yt(_e,d):Be(_e,d,f)},o=async(u,l)=>l===null?yt(_e,`metadata/${u}`):Be(_e,`metadata/${u}`,l),a=async(u,l)=>l===null?yt(_e,`uploads/${u}`):Be(_e,`uploads/${u}`,{fileKey:l}),c=async(u,l,f)=>{let d=new Date().toISOString(),h=`{"userEmail":"${u}","timestamp":"${d}","requestId":"${l}","changeset":${f}}`,p=`push/${u}/${d}/${l}`;await Be($d,p,h)};return{setNode:e,setMetadata:t,setReverseEdge:r,setRead:n(ln),setWrite:n(un),setAdmin:n(cn),setOwner:s,setFileRef:i,setFileMetadata:o,setUploadId:a,setPushLog:c}};var Id=require("@aws-sdk/cloudfront-signer");var jd=async()=>{let e=await Rs(Lt,!0),t=1*24*60*60*1e3;return{getUrl:(s,i)=>`https://${Wt}/${s}?etag=${i}`,signUrl:(s,i=t)=>(0,Id.getSignedUrl)({url:s,keyPairId:gr||"",dateLessThan:new Date(Date.now()+i).toISOString(),privateKey:e||""})}};var Jo=()=>{let e=new Map,t=new Map,r=new Map,n=new Map,s=new Map,i=0,o=0,a=0;return{writeNode:(v,w)=>{e.set(v,w)},writeMetadata:(v,w,S,b,R)=>{pn(w,v,S,b,R,t)},writeEdgeReverse:(v,w,S,b)=>{pn(S,b,w,v,"true",r)},writeRights:(v,w)=>{n.set(v,w)},writePrincipalRight:(v,w,S,b,R)=>{pn(v,w,S,b,R,n)},writeInheritRight:(v,w)=>{hn(v,"inherit",w,n)},writeFiles:(v,w,S)=>{hn(v,w,S,s)},getGraphJson:()=>{let v=new Map;if(e.size>0&&v.set("nodes",e),t.size>0&&v.set("edges",t),n.size>0){let b=ot(n);v.set("rights",b)}if(s.size>0&&v.set("files",s),r.size>0){let b=`{"reverseEdges":${ot(r)}}`;v.set("index",b)}let w=performance.now(),S=ot(v);return a+=performance.now()-w,S},getLog:()=>({timeNode:i,timeMetadata:o,timeJson:a})}};var Dd=()=>{let e=new Map,t=b=>e.get(b),r=(b,R)=>{e.set(b,R)},n=b=>{e.delete(b)},s=new Map,i=b=>s.get(b),o=(b,R)=>{s.set(b,R)},a=b=>{s.delete(b)},c=new Map,u=(b,R,C)=>Ps(b,R,C,c),l=(b,R,C,L)=>{it(b,R,C,L,c)},f=(b,R,C)=>{let L=gn(b,R,c);L?.delete(C)},d=new Map,h=(b,R,C)=>Ps(b,R,C,d),p=(b,R,C,L)=>{it(b,R,C,L,d)},g=(b,R,C)=>{let L=gn(b,R,d);L?.delete(C)},m=new Map;return{nodes:{getNode:t,setNode:r,removeNode:n,getNodePromise:i,setNodePromise:o,removeNodePromise:a},metadata:{getMetadata:u,setMetadata:l,removeMetadata:f,getMetadataPromise:h,removeMetadataPromise:g,setMetadataPromise:p},urls:{getUrl:(b,R)=>m.get(b+"/"+R),setUrl:(b,R,C)=>{m.set(b+"/"+R,C)},removeUrl:(b,R)=>{m.delete(b+"/"+R)}}}};var bE=!0,qd={type:"object",additionalProperties:!1,properties:{nodes:{type:"object",description:"The nodes hashmap.",example:{"e1d05e83-4122-4fd9-9502-d12e7867b4d6":{id:"e1d05e83-4122-4fd9-9502-d12e7867b4d6",someProp:"someVal"}},additionalProperties:{oneOf:[{type:"boolean",const:!1,description:"`false` when the node should be deleted."},{type:"object",additionalProperties:!0,properties:{id:{type:"string",description:"The id of the node which should be updated.",example:"e1d05e83-4122-4fd9-9502-d12e7867b4d6",minLength:1}},required:["id"]}]}},edges:{type:"object",description:"`fromType`s: A `fromType` hashmap representing all `fromType`s of all present edges.",example:{"todo-app":{"e1d05e83-4122-4fd9-9502-d12e7867b4d6":{"todo-list":{"6da76147-c72a-4819-8efe-f4f8e06b6be6":{order:"1"}}}}},additionalProperties:{type:"object",description:"`fromId`s: A `from` hashmap representing all `fromId`s of all edges pointing from the given `fromType`.",example:{"e1d05e83-4122-4fd9-9502-d12e7867b4d6":{"todo-list":{"6da76147-c72a-4819-8efe-f4f8e06b6be6":{order:"1"}}}},additionalProperties:{type:"object",description:"`toType`s: A `toType` hashmap representing all `toType`s of all edges pointing from the given `fromType` and `fromId`.",example:{"todo-list":{"6da76147-c72a-4819-8efe-f4f8e06b6be6":{order:"1"}}},additionalProperties:{type:"object",description:"`toId`s: A `toId` hashmap representing all `toId`s of all edges pointing from the given `fromType`, `fromId`, `toType` and `toId`.",example:{"6da76147-c72a-4819-8efe-f4f8e06b6be6":{order:"1"}},additionalProperties:{oneOf:[{type:"boolean",description:"`true` when the edge should be created. `false` when the edge should be deleted."},{type:"object",description:"Is interpreted as `true` meaning the edge should be created. Object contains additional metadata to be set for the given edge.",additionalProperties:{oneOf:[{type:"string"},{type:"number"},{type:"boolean"},{type:"null"},{type:"array",items:{oneOf:[{type:"string"},{type:"number"},{type:"boolean"},{type:"null"}]}}]}}]}}}}},rights:{type:"object",description:"`id`s: A node `id` hashmap representing all nodes which rights should be updated for.",example:{"e1d05e83-4122-4fd9-9502-d12e7867b4d6":{user:{"test@mail.de":{read:!0,write:!0,admin:!0}},inherit:{from:"6da76147-c72a-4819-8efe-f4f8e06b6be6"}}},additionalProperties:{type:"object",description:"emails: An email hashmap representing all users which rights should be updated for on the given node.",properties:{user:{type:"object",description:"",example:{"test@mail.de":{read:!0,write:!0,admin:!0}},additionalProperties:{type:"object",description:"rights: A right hashmap representing all rights which should be updated for the given user on the given node.",example:{read:!0,write:!0,admin:!0},properties:{read:{type:"boolean",example:!0,description:"`true` to allow, `false` to disallow"},write:{type:"boolean",example:!0,description:"`true` to allow, `false` to disallow"},admin:{type:"boolean",example:!0,description:"`true` to allow, `false` to disallow"}}}},inherit:{type:"object",description:"Represents right inheritance for the given node from another node denoted in the `from` property. All rights of the given node are deleted and copied from the other node.",example:{from:"6da76147-c72a-4819-8efe-f4f8e06b6be6"},properties:{from:{type:"string",description:"the node id of the node from which the rights should be copied."}},required:["from"]}}}},files:{type:"object",description:"`id`s: A node `id` hashmap representing all nodes which files should be uploaded for.",example:{"e1d05e83-4122-4fd9-9502-d12e7867b4d6":{someVideo:{filename:"my-video.mp4",contentType:"video/mp4",fileSize:25e6,partSize:5242880},someTextFile:{filename:"my-file.txt",contentType:"text/plain",fileSize:250}}},additionalProperties:{type:"object",description:"`propName`s: A `propName` hashmap representing all properties which files should be attached with on the given node.",example:{someVideo:{filename:"my-video.mp4",contentType:"video/mp4",fileSize:25e6,partSize:5242880}},additionalProperties:{oneOf:[{type:"boolean",const:!1,description:"`false` when the file should be deleted."},{type:"object",description:"File metadata describing the upload to be initialized.",example:{filename:"my-video.mp4",contentType:"video/mp4",fileSize:25e6,partSize:5242880},properties:{filename:{type:"string",example:"my-video.mp4",description:"The filename as uploaded to the server and presented by the signed URL during download.",minLength:1},contentType:{type:"string",example:"video/mp4",description:"Mime type of the file to upload.",minLength:1},fileSize:{type:"integer",example:25e6,description:"Size of the file to be uploaded in bytes",minimum:1},partSize:{type:"integer",example:5242880,default:5242880,description:"Intended part size in bytes in case of a multipart upload.",minimum:5242880}},required:["filename","contentType","fileSize"]}]}}}}},Gd=async({userEmail:e,asAdmin:t,asRole:r,body:n},s)=>{let i=await jd(),o=kd(),[a,c]=await Md(n,e||"",r||"user",t,{dataCache:Dd(),graphAssembler:Jo(),changelogAssembler:Jo(),loader:Fd(),writer:o,signer:i});return await o.setPushLog(e||"",s.awsRequestId,c),{statusCode:200,headers:Je,body:a}},RE=async(e,t)=>{try{let r=await Rd(qd,e,{auth:bE});return await Gd(r,t)}catch(r){return console.log(r),xs(r)}},TE=async({body:e},t)=>{try{return await Gd(e,t)}catch(r){return xs(r)}};0&&(module.exports={handleHttp,handleInvoke,schema});

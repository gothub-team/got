"use strict";var Xa=Object.create;var Bt=Object.defineProperty;var Za=Object.getOwnPropertyDescriptor;var ec=Object.getOwnPropertyNames;var tc=Object.getPrototypeOf,rc=Object.prototype.hasOwnProperty;var y=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),sc=(t,e)=>{for(var r in e)Bt(t,r,{get:e[r],enumerable:!0})},Nn=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of ec(e))!rc.call(t,n)&&n!==r&&Bt(t,n,{get:()=>e[n],enumerable:!(s=Za(e,n))||s.enumerable});return t};var nc=(t,e,r)=>(r=t!=null?Xa(tc(t)):{},Nn(e||!t||!t.__esModule?Bt(r,"default",{value:t,enumerable:!0}):r,t)),oc=t=>Nn(Bt({},"__esModule",{value:!0}),t);var pt=y(N=>{"use strict";Object.defineProperty(N,"__esModule",{value:!0});N.regexpCode=N.getEsmExportName=N.getProperty=N.safeStringify=N.stringify=N.strConcat=N.addCodeArg=N.str=N._=N.nil=N._Code=N.Name=N.IDENTIFIER=N._CodeOrName=void 0;var ut=class{};N._CodeOrName=ut;N.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Ie=class extends ut{constructor(e){if(super(),!N.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};N.Name=Ie;var te=class extends ut{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,s)=>`${r}${s}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,s)=>(s instanceof Ie&&(r[s.str]=(r[s.str]||0)+1),r),{})}};N._Code=te;N.nil=new te("");function Gn(t,...e){let r=[t[0]],s=0;for(;s<e.length;)Vr(r,e[s]),r.push(t[++s]);return new te(r)}N._=Gn;var qr=new te("+");function kn(t,...e){let r=[ft(t[0])],s=0;for(;s<e.length;)r.push(qr),Vr(r,e[s]),r.push(qr,ft(t[++s]));return Gc(r),new te(r)}N.str=kn;function Vr(t,e){e instanceof te?t.push(...e._items):e instanceof Ie?t.push(e):t.push(jc(e))}N.addCodeArg=Vr;function Gc(t){let e=1;for(;e<t.length-1;){if(t[e]===qr){let r=kc(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function kc(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof Ie||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof Ie))return`"${t}${e.slice(1)}`}function xc(t,e){return e.emptyStr()?t:t.emptyStr()?e:kn`${t}${e}`}N.strConcat=xc;function jc(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:ft(Array.isArray(t)?t.join(","):t)}function Uc(t){return new te(ft(t))}N.stringify=Uc;function ft(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}N.safeStringify=ft;function Dc(t){return typeof t=="string"&&N.IDENTIFIER.test(t)?new te(`.${t}`):Gn`[${t}]`}N.getProperty=Dc;function qc(t){if(typeof t=="string"&&N.IDENTIFIER.test(t))return new te(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}N.getEsmExportName=qc;function Vc(t){return new te(t.toString())}N.regexpCode=Vc});var Br=y(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.ValueScope=X.ValueScopeName=X.Scope=X.varKinds=X.UsedValueState=void 0;var Y=pt(),Fr=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},Qt;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(Qt||(X.UsedValueState=Qt={}));X.varKinds={const:new Y.Name("const"),let:new Y.Name("let"),var:new Y.Name("var")};var Yt=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof Y.Name?e:this.name(e)}name(e){return new Y.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,s;if(!((s=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||s===void 0)&&s.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};X.Scope=Yt;var Xt=class extends Y.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:s}){this.value=e,this.scopePath=(0,Y._)`.${new Y.Name(r)}[${s}]`}};X.ValueScopeName=Xt;var Fc=(0,Y._)`\n`,Lr=class extends Yt{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?Fc:Y.nil}}get(){return this._scope}name(e){return new Xt(e,this._newName(e))}value(e,r){var s;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let n=this.toName(e),{prefix:o}=n,i=(s=r.key)!==null&&s!==void 0?s:r.ref,a=this._values[o];if(a){let l=a.get(i);if(l)return l}else a=this._values[o]=new Map;a.set(i,n);let c=this._scope[o]||(this._scope[o]=[]),d=c.length;return c[d]=r.ref,n.setValue(r,{property:o,itemIndex:d}),n}getValue(e,r){let s=this._values[e];if(s)return s.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,s=>{if(s.scopePath===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return(0,Y._)`${e}${s.scopePath}`})}scopeCode(e=this._values,r,s){return this._reduceValues(e,n=>{if(n.value===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return n.value.code},r,s)}_reduceValues(e,r,s={},n){let o=Y.nil;for(let i in e){let a=e[i];if(!a)continue;let c=s[i]=s[i]||new Map;a.forEach(d=>{if(c.has(d))return;c.set(d,Qt.Started);let l=r(d);if(l){let u=this.opts.es5?X.varKinds.var:X.varKinds.const;o=(0,Y._)`${o}${u} ${d} = ${l};${this.opts._n}`}else if(l=n?.(d))o=(0,Y._)`${o}${l}${this.opts._n}`;else throw new Fr(d);c.set(d,Qt.Completed)})}return o}};X.ValueScope=Lr});var P=y(b=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.or=b.and=b.not=b.CodeGen=b.operators=b.varKinds=b.ValueScopeName=b.ValueScope=b.Scope=b.Name=b.regexpCode=b.stringify=b.getProperty=b.nil=b.strConcat=b.str=b._=void 0;var O=pt(),ie=Br(),Re=pt();Object.defineProperty(b,"_",{enumerable:!0,get:function(){return Re._}});Object.defineProperty(b,"str",{enumerable:!0,get:function(){return Re.str}});Object.defineProperty(b,"strConcat",{enumerable:!0,get:function(){return Re.strConcat}});Object.defineProperty(b,"nil",{enumerable:!0,get:function(){return Re.nil}});Object.defineProperty(b,"getProperty",{enumerable:!0,get:function(){return Re.getProperty}});Object.defineProperty(b,"stringify",{enumerable:!0,get:function(){return Re.stringify}});Object.defineProperty(b,"regexpCode",{enumerable:!0,get:function(){return Re.regexpCode}});Object.defineProperty(b,"Name",{enumerable:!0,get:function(){return Re.Name}});var rr=Br();Object.defineProperty(b,"Scope",{enumerable:!0,get:function(){return rr.Scope}});Object.defineProperty(b,"ValueScope",{enumerable:!0,get:function(){return rr.ValueScope}});Object.defineProperty(b,"ValueScopeName",{enumerable:!0,get:function(){return rr.ValueScopeName}});Object.defineProperty(b,"varKinds",{enumerable:!0,get:function(){return rr.varKinds}});b.operators={GT:new O._Code(">"),GTE:new O._Code(">="),LT:new O._Code("<"),LTE:new O._Code("<="),EQ:new O._Code("==="),NEQ:new O._Code("!=="),NOT:new O._Code("!"),OR:new O._Code("||"),AND:new O._Code("&&"),ADD:new O._Code("+")};var we=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},Kr=class extends we{constructor(e,r,s){super(),this.varKind=e,this.name=r,this.rhs=s}render({es5:e,_n:r}){let s=e?ie.varKinds.var:this.varKind,n=this.rhs===void 0?"":` = ${this.rhs}`;return`${s} ${this.name}${n};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=Qe(this.rhs,e,r)),this}get names(){return this.rhs instanceof O._CodeOrName?this.rhs.names:{}}},Zt=class extends we{constructor(e,r,s){super(),this.lhs=e,this.rhs=r,this.sideEffects=s}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof O.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=Qe(this.rhs,e,r),this}get names(){let e=this.lhs instanceof O.Name?{}:{...this.lhs.names};return tr(e,this.rhs)}},Hr=class extends Zt{constructor(e,r,s,n){super(e,s,n),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},zr=class extends we{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},Wr=class extends we{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},Jr=class extends we{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},Qr=class extends we{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=Qe(this.code,e,r),this}get names(){return this.code instanceof O._CodeOrName?this.code.names:{}}},mt=class extends we{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,s)=>r+s.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let s=e[r].optimizeNodes();Array.isArray(s)?e.splice(r,1,...s):s?e[r]=s:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:s}=this,n=s.length;for(;n--;){let o=s[n];o.optimizeNames(e,r)||(Lc(e,o.names),s.splice(n,1))}return s.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>ke(e,r.names),{})}},Ee=class extends mt{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},Yr=class extends mt{},Je=class extends Ee{};Je.kind="else";var Me=class t extends Ee{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let s=r.optimizeNodes();r=this.else=Array.isArray(s)?new Je(s):s}if(r)return e===!1?r instanceof t?r:r.nodes:this.nodes.length?this:new t(xn(e),r instanceof t?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var s;if(this.else=(s=this.else)===null||s===void 0?void 0:s.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=Qe(this.condition,e,r),this}get names(){let e=super.names;return tr(e,this.condition),this.else&&ke(e,this.else.names),e}};Me.kind="if";var Ge=class extends Ee{};Ge.kind="for";var Xr=class extends Ge{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=Qe(this.iteration,e,r),this}get names(){return ke(super.names,this.iteration.names)}},Zr=class extends Ge{constructor(e,r,s,n){super(),this.varKind=e,this.name=r,this.from=s,this.to=n}render(e){let r=e.es5?ie.varKinds.var:this.varKind,{name:s,from:n,to:o}=this;return`for(${r} ${s}=${n}; ${s}<${o}; ${s}++)`+super.render(e)}get names(){let e=tr(super.names,this.from);return tr(e,this.to)}},er=class extends Ge{constructor(e,r,s,n){super(),this.loop=e,this.varKind=r,this.name=s,this.iterable=n}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=Qe(this.iterable,e,r),this}get names(){return ke(super.names,this.iterable.names)}},ht=class extends Ee{constructor(e,r,s){super(),this.name=e,this.args=r,this.async=s}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};ht.kind="func";var gt=class extends mt{render(e){return"return "+super.render(e)}};gt.kind="return";var es=class extends Ee{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var s,n;return super.optimizeNames(e,r),(s=this.catch)===null||s===void 0||s.optimizeNames(e,r),(n=this.finally)===null||n===void 0||n.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&ke(e,this.catch.names),this.finally&&ke(e,this.finally.names),e}},yt=class extends Ee{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};yt.kind="catch";var wt=class extends Ee{render(e){return"finally"+super.render(e)}};wt.kind="finally";var ts=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new ie.Scope({parent:e}),this._nodes=[new Yr]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let s=this._extScope.value(e,r);return(this._values[s.prefix]||(this._values[s.prefix]=new Set)).add(s),s}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,s,n){let o=this._scope.toName(r);return s!==void 0&&n&&(this._constants[o.str]=s),this._leafNode(new Kr(e,o,s)),o}const(e,r,s){return this._def(ie.varKinds.const,e,r,s)}let(e,r,s){return this._def(ie.varKinds.let,e,r,s)}var(e,r,s){return this._def(ie.varKinds.var,e,r,s)}assign(e,r,s){return this._leafNode(new Zt(e,r,s))}add(e,r){return this._leafNode(new Hr(e,b.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==O.nil&&this._leafNode(new Qr(e)),this}object(...e){let r=["{"];for(let[s,n]of e)r.length>1&&r.push(","),r.push(s),(s!==n||this.opts.es5)&&(r.push(":"),(0,O.addCodeArg)(r,n));return r.push("}"),new O._Code(r)}if(e,r,s){if(this._blockNode(new Me(e)),r&&s)this.code(r).else().code(s).endIf();else if(r)this.code(r).endIf();else if(s)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new Me(e))}else(){return this._elseNode(new Je)}endIf(){return this._endBlockNode(Me,Je)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new Xr(e),r)}forRange(e,r,s,n,o=this.opts.es5?ie.varKinds.var:ie.varKinds.let){let i=this._scope.toName(e);return this._for(new Zr(o,i,r,s),()=>n(i))}forOf(e,r,s,n=ie.varKinds.const){let o=this._scope.toName(e);if(this.opts.es5){let i=r instanceof O.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,O._)`${i}.length`,a=>{this.var(o,(0,O._)`${i}[${a}]`),s(o)})}return this._for(new er("of",n,o,r),()=>s(o))}forIn(e,r,s,n=this.opts.es5?ie.varKinds.var:ie.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,O._)`Object.keys(${r})`,s);let o=this._scope.toName(e);return this._for(new er("in",n,o,r),()=>s(o))}endFor(){return this._endBlockNode(Ge)}label(e){return this._leafNode(new zr(e))}break(e){return this._leafNode(new Wr(e))}return(e){let r=new gt;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(gt)}try(e,r,s){if(!r&&!s)throw new Error('CodeGen: "try" without "catch" and "finally"');let n=new es;if(this._blockNode(n),this.code(e),r){let o=this.name("e");this._currNode=n.catch=new yt(o),r(o)}return s&&(this._currNode=n.finally=new wt,this.code(s)),this._endBlockNode(yt,wt)}throw(e){return this._leafNode(new Jr(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let s=this._nodes.length-r;if(s<0||e!==void 0&&s!==e)throw new Error(`CodeGen: wrong number of nodes: ${s} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=O.nil,s,n){return this._blockNode(new ht(e,r,s)),n&&this.code(n).endFunc(),this}endFunc(){return this._endBlockNode(ht)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let s=this._currNode;if(s instanceof e||r&&s instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof Me))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};b.CodeGen=ts;function ke(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function tr(t,e){return e instanceof O._CodeOrName?ke(t,e.names):t}function Qe(t,e,r){if(t instanceof O.Name)return s(t);if(!n(t))return t;return new O._Code(t._items.reduce((o,i)=>(i instanceof O.Name&&(i=s(i)),i instanceof O._Code?o.push(...i._items):o.push(i),o),[]));function s(o){let i=r[o.str];return i===void 0||e[o.str]!==1?o:(delete e[o.str],i)}function n(o){return o instanceof O._Code&&o._items.some(i=>i instanceof O.Name&&e[i.str]===1&&r[i.str]!==void 0)}}function Lc(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function xn(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,O._)`!${rs(t)}`}b.not=xn;var Bc=jn(b.operators.AND);function Kc(...t){return t.reduce(Bc)}b.and=Kc;var Hc=jn(b.operators.OR);function zc(...t){return t.reduce(Hc)}b.or=zc;function jn(t){return(e,r)=>e===O.nil?r:r===O.nil?e:(0,O._)`${rs(e)} ${t} ${rs(r)}`}function rs(t){return t instanceof O.Name?t:(0,O._)`(${t})`}});var C=y(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});R.checkStrictMode=R.getErrorPath=R.Type=R.useFunc=R.setEvaluated=R.evaluatedPropsToName=R.mergeEvaluated=R.eachItem=R.unescapeJsonPointer=R.escapeJsonPointer=R.escapeFragment=R.unescapeFragment=R.schemaRefOrVal=R.schemaHasRulesButRef=R.schemaHasRules=R.checkUnknownRules=R.alwaysValidSchema=R.toHash=void 0;var M=P(),Wc=pt();function Jc(t){let e={};for(let r of t)e[r]=!0;return e}R.toHash=Jc;function Qc(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(qn(t,e),!Vn(e,t.self.RULES.all))}R.alwaysValidSchema=Qc;function qn(t,e=t.schema){let{opts:r,self:s}=t;if(!r.strictSchema||typeof e=="boolean")return;let n=s.RULES.keywords;for(let o in e)n[o]||Bn(t,`unknown keyword: "${o}"`)}R.checkUnknownRules=qn;function Vn(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}R.schemaHasRules=Vn;function Yc(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}R.schemaHasRulesButRef=Yc;function Xc({topSchemaRef:t,schemaPath:e},r,s,n){if(!n){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,M._)`${r}`}return(0,M._)`${t}${e}${(0,M.getProperty)(s)}`}R.schemaRefOrVal=Xc;function Zc(t){return Fn(decodeURIComponent(t))}R.unescapeFragment=Zc;function el(t){return encodeURIComponent(ns(t))}R.escapeFragment=el;function ns(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}R.escapeJsonPointer=ns;function Fn(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}R.unescapeJsonPointer=Fn;function tl(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}R.eachItem=tl;function Un({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:s}){return(n,o,i,a)=>{let c=i===void 0?o:i instanceof M.Name?(o instanceof M.Name?t(n,o,i):e(n,o,i),i):o instanceof M.Name?(e(n,i,o),o):r(o,i);return a===M.Name&&!(c instanceof M.Name)?s(n,c):c}}R.mergeEvaluated={props:Un({mergeNames:(t,e,r)=>t.if((0,M._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,M._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,M._)`${r} || {}`).code((0,M._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,M._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,M._)`${r} || {}`),os(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:Ln}),items:Un({mergeNames:(t,e,r)=>t.if((0,M._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,M._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,M._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,M._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function Ln(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,M._)`{}`);return e!==void 0&&os(t,r,e),r}R.evaluatedPropsToName=Ln;function os(t,e,r){Object.keys(r).forEach(s=>t.assign((0,M._)`${e}${(0,M.getProperty)(s)}`,!0))}R.setEvaluated=os;var Dn={};function rl(t,e){return t.scopeValue("func",{ref:e,code:Dn[e.code]||(Dn[e.code]=new Wc._Code(e.code))})}R.useFunc=rl;var ss;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(ss||(R.Type=ss={}));function sl(t,e,r){if(t instanceof M.Name){let s=e===ss.Num;return r?s?(0,M._)`"[" + ${t} + "]"`:(0,M._)`"['" + ${t} + "']"`:s?(0,M._)`"/" + ${t}`:(0,M._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,M.getProperty)(t).toString():"/"+ns(t)}R.getErrorPath=sl;function Bn(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}R.checkStrictMode=Bn});var _e=y(is=>{"use strict";Object.defineProperty(is,"__esModule",{value:!0});var L=P(),nl={data:new L.Name("data"),valCxt:new L.Name("valCxt"),instancePath:new L.Name("instancePath"),parentData:new L.Name("parentData"),parentDataProperty:new L.Name("parentDataProperty"),rootData:new L.Name("rootData"),dynamicAnchors:new L.Name("dynamicAnchors"),vErrors:new L.Name("vErrors"),errors:new L.Name("errors"),this:new L.Name("this"),self:new L.Name("self"),scope:new L.Name("scope"),json:new L.Name("json"),jsonPos:new L.Name("jsonPos"),jsonLen:new L.Name("jsonLen"),jsonPart:new L.Name("jsonPart")};is.default=nl});var Et=y(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.extendErrors=B.resetErrorsCount=B.reportExtraError=B.reportError=B.keyword$DataError=B.keywordError=void 0;var A=P(),sr=C(),J=_e();B.keywordError={message:({keyword:t})=>(0,A.str)`must pass "${t}" keyword validation`};B.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,A.str)`"${t}" keyword must be ${e} ($data)`:(0,A.str)`"${t}" keyword is invalid ($data)`};function ol(t,e=B.keywordError,r,s){let{it:n}=t,{gen:o,compositeRule:i,allErrors:a}=n,c=zn(t,e,r);s??(i||a)?Kn(o,c):Hn(n,(0,A._)`[${c}]`)}B.reportError=ol;function il(t,e=B.keywordError,r){let{it:s}=t,{gen:n,compositeRule:o,allErrors:i}=s,a=zn(t,e,r);Kn(n,a),o||i||Hn(s,J.default.vErrors)}B.reportExtraError=il;function al(t,e){t.assign(J.default.errors,e),t.if((0,A._)`${J.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,A._)`${J.default.vErrors}.length`,e),()=>t.assign(J.default.vErrors,null)))}B.resetErrorsCount=al;function cl({gen:t,keyword:e,schemaValue:r,data:s,errsCount:n,it:o}){if(n===void 0)throw new Error("ajv implementation error");let i=t.name("err");t.forRange("i",n,J.default.errors,a=>{t.const(i,(0,A._)`${J.default.vErrors}[${a}]`),t.if((0,A._)`${i}.instancePath === undefined`,()=>t.assign((0,A._)`${i}.instancePath`,(0,A.strConcat)(J.default.instancePath,o.errorPath))),t.assign((0,A._)`${i}.schemaPath`,(0,A.str)`${o.errSchemaPath}/${e}`),o.opts.verbose&&(t.assign((0,A._)`${i}.schema`,r),t.assign((0,A._)`${i}.data`,s))})}B.extendErrors=cl;function Kn(t,e){let r=t.const("err",e);t.if((0,A._)`${J.default.vErrors} === null`,()=>t.assign(J.default.vErrors,(0,A._)`[${r}]`),(0,A._)`${J.default.vErrors}.push(${r})`),t.code((0,A._)`${J.default.errors}++`)}function Hn(t,e){let{gen:r,validateName:s,schemaEnv:n}=t;n.$async?r.throw((0,A._)`new ${t.ValidationError}(${e})`):(r.assign((0,A._)`${s}.errors`,e),r.return(!1))}var xe={keyword:new A.Name("keyword"),schemaPath:new A.Name("schemaPath"),params:new A.Name("params"),propertyName:new A.Name("propertyName"),message:new A.Name("message"),schema:new A.Name("schema"),parentSchema:new A.Name("parentSchema")};function zn(t,e,r){let{createErrors:s}=t.it;return s===!1?(0,A._)`{}`:ll(t,e,r)}function ll(t,e,r={}){let{gen:s,it:n}=t,o=[dl(n,r),ul(t,r)];return fl(t,e,o),s.object(...o)}function dl({errorPath:t},{instancePath:e}){let r=e?(0,A.str)`${t}${(0,sr.getErrorPath)(e,sr.Type.Str)}`:t;return[J.default.instancePath,(0,A.strConcat)(J.default.instancePath,r)]}function ul({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:s}){let n=s?e:(0,A.str)`${e}/${t}`;return r&&(n=(0,A.str)`${n}${(0,sr.getErrorPath)(r,sr.Type.Str)}`),[xe.schemaPath,n]}function fl(t,{params:e,message:r},s){let{keyword:n,data:o,schemaValue:i,it:a}=t,{opts:c,propertyName:d,topSchemaRef:l,schemaPath:u}=a;s.push([xe.keyword,n],[xe.params,typeof e=="function"?e(t):e||(0,A._)`{}`]),c.messages&&s.push([xe.message,typeof r=="function"?r(t):r]),c.verbose&&s.push([xe.schema,i],[xe.parentSchema,(0,A._)`${l}${u}`],[J.default.data,o]),d&&s.push([xe.propertyName,d])}});var Jn=y(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.boolOrEmptySchema=Ye.topBoolOrEmptySchema=void 0;var pl=Et(),ml=P(),hl=_e(),gl={message:"boolean schema is false"};function yl(t){let{gen:e,schema:r,validateName:s}=t;r===!1?Wn(t,!1):typeof r=="object"&&r.$async===!0?e.return(hl.default.data):(e.assign((0,ml._)`${s}.errors`,null),e.return(!0))}Ye.topBoolOrEmptySchema=yl;function wl(t,e){let{gen:r,schema:s}=t;s===!1?(r.var(e,!1),Wn(t)):r.var(e,!0)}Ye.boolOrEmptySchema=wl;function Wn(t,e){let{gen:r,data:s}=t,n={gen:r,keyword:"false schema",data:s,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,pl.reportError)(n,gl,void 0,e)}});var as=y(Xe=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.getRules=Xe.isJSONType=void 0;var El=["string","number","integer","boolean","null","object","array"],_l=new Set(El);function vl(t){return typeof t=="string"&&_l.has(t)}Xe.isJSONType=vl;function $l(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}Xe.getRules=$l});var cs=y(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.shouldUseRule=Se.shouldUseGroup=Se.schemaHasRulesForType=void 0;function bl({schema:t,self:e},r){let s=e.RULES.types[r];return s&&s!==!0&&Qn(t,s)}Se.schemaHasRulesForType=bl;function Qn(t,e){return e.rules.some(r=>Yn(t,r))}Se.shouldUseGroup=Qn;function Yn(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(s=>t[s]!==void 0))}Se.shouldUseRule=Yn});var _t=y(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.reportTypeError=K.checkDataTypes=K.checkDataType=K.coerceAndCheckDataType=K.getJSONTypes=K.getSchemaTypes=K.DataType=void 0;var Pl=as(),Rl=cs(),Sl=Et(),$=P(),Xn=C(),Ze;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Ze||(K.DataType=Ze={}));function Ol(t){let e=Zn(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}K.getSchemaTypes=Ol;function Zn(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(Pl.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}K.getJSONTypes=Zn;function Tl(t,e){let{gen:r,data:s,opts:n}=t,o=Al(e,n.coerceTypes),i=e.length>0&&!(o.length===0&&e.length===1&&(0,Rl.schemaHasRulesForType)(t,e[0]));if(i){let a=ds(e,s,n.strictNumbers,Ze.Wrong);r.if(a,()=>{o.length?Nl(t,e,o):us(t)})}return i}K.coerceAndCheckDataType=Tl;var eo=new Set(["string","number","integer","boolean","null"]);function Al(t,e){return e?t.filter(r=>eo.has(r)||e==="array"&&r==="array"):[]}function Nl(t,e,r){let{gen:s,data:n,opts:o}=t,i=s.let("dataType",(0,$._)`typeof ${n}`),a=s.let("coerced",(0,$._)`undefined`);o.coerceTypes==="array"&&s.if((0,$._)`${i} == 'object' && Array.isArray(${n}) && ${n}.length == 1`,()=>s.assign(n,(0,$._)`${n}[0]`).assign(i,(0,$._)`typeof ${n}`).if(ds(e,n,o.strictNumbers),()=>s.assign(a,n))),s.if((0,$._)`${a} !== undefined`);for(let d of r)(eo.has(d)||d==="array"&&o.coerceTypes==="array")&&c(d);s.else(),us(t),s.endIf(),s.if((0,$._)`${a} !== undefined`,()=>{s.assign(n,a),Cl(t,a)});function c(d){switch(d){case"string":s.elseIf((0,$._)`${i} == "number" || ${i} == "boolean"`).assign(a,(0,$._)`"" + ${n}`).elseIf((0,$._)`${n} === null`).assign(a,(0,$._)`""`);return;case"number":s.elseIf((0,$._)`${i} == "boolean" || ${n} === null
              || (${i} == "string" && ${n} && ${n} == +${n})`).assign(a,(0,$._)`+${n}`);return;case"integer":s.elseIf((0,$._)`${i} === "boolean" || ${n} === null
              || (${i} === "string" && ${n} && ${n} == +${n} && !(${n} % 1))`).assign(a,(0,$._)`+${n}`);return;case"boolean":s.elseIf((0,$._)`${n} === "false" || ${n} === 0 || ${n} === null`).assign(a,!1).elseIf((0,$._)`${n} === "true" || ${n} === 1`).assign(a,!0);return;case"null":s.elseIf((0,$._)`${n} === "" || ${n} === 0 || ${n} === false`),s.assign(a,null);return;case"array":s.elseIf((0,$._)`${i} === "string" || ${i} === "number"
              || ${i} === "boolean" || ${n} === null`).assign(a,(0,$._)`[${n}]`)}}}function Cl({gen:t,parentData:e,parentDataProperty:r},s){t.if((0,$._)`${e} !== undefined`,()=>t.assign((0,$._)`${e}[${r}]`,s))}function ls(t,e,r,s=Ze.Correct){let n=s===Ze.Correct?$.operators.EQ:$.operators.NEQ,o;switch(t){case"null":return(0,$._)`${e} ${n} null`;case"array":o=(0,$._)`Array.isArray(${e})`;break;case"object":o=(0,$._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":o=i((0,$._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":o=i();break;default:return(0,$._)`typeof ${e} ${n} ${t}`}return s===Ze.Correct?o:(0,$.not)(o);function i(a=$.nil){return(0,$.and)((0,$._)`typeof ${e} == "number"`,a,r?(0,$._)`isFinite(${e})`:$.nil)}}K.checkDataType=ls;function ds(t,e,r,s){if(t.length===1)return ls(t[0],e,r,s);let n,o=(0,Xn.toHash)(t);if(o.array&&o.object){let i=(0,$._)`typeof ${e} != "object"`;n=o.null?i:(0,$._)`!${e} || ${i}`,delete o.null,delete o.array,delete o.object}else n=$.nil;o.number&&delete o.integer;for(let i in o)n=(0,$.and)(n,ls(i,e,r,s));return n}K.checkDataTypes=ds;var Il={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,$._)`{type: ${t}}`:(0,$._)`{type: ${e}}`};function us(t){let e=Ml(t);(0,Sl.reportError)(e,Il)}K.reportTypeError=us;function Ml(t){let{gen:e,data:r,schema:s}=t,n=(0,Xn.schemaRefOrVal)(t,s,"type");return{gen:e,keyword:"type",data:r,schema:s.type,schemaCode:n,schemaValue:n,parentSchema:s,params:{},it:t}}});var ro=y(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.assignDefaults=void 0;var et=P(),Gl=C();function kl(t,e){let{properties:r,items:s}=t.schema;if(e==="object"&&r)for(let n in r)to(t,n,r[n].default);else e==="array"&&Array.isArray(s)&&s.forEach((n,o)=>to(t,o,n.default))}nr.assignDefaults=kl;function to(t,e,r){let{gen:s,compositeRule:n,data:o,opts:i}=t;if(r===void 0)return;let a=(0,et._)`${o}${(0,et.getProperty)(e)}`;if(n){(0,Gl.checkStrictMode)(t,`default is ignored for: ${a}`);return}let c=(0,et._)`${a} === undefined`;i.useDefaults==="empty"&&(c=(0,et._)`${c} || ${a} === null || ${a} === ""`),s.if(c,(0,et._)`${a} = ${(0,et.stringify)(r)}`)}});var re=y(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.validateUnion=I.validateArray=I.usePattern=I.callValidateCode=I.schemaProperties=I.allSchemaProperties=I.noPropertyInData=I.propertyInData=I.isOwnProperty=I.hasPropFunc=I.reportMissingProp=I.checkMissingProp=I.checkReportMissingProp=void 0;var k=P(),fs=C(),Oe=_e(),xl=C();function jl(t,e){let{gen:r,data:s,it:n}=t;r.if(ms(r,s,e,n.opts.ownProperties),()=>{t.setParams({missingProperty:(0,k._)`${e}`},!0),t.error()})}I.checkReportMissingProp=jl;function Ul({gen:t,data:e,it:{opts:r}},s,n){return(0,k.or)(...s.map(o=>(0,k.and)(ms(t,e,o,r.ownProperties),(0,k._)`${n} = ${o}`)))}I.checkMissingProp=Ul;function Dl(t,e){t.setParams({missingProperty:e},!0),t.error()}I.reportMissingProp=Dl;function so(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,k._)`Object.prototype.hasOwnProperty`})}I.hasPropFunc=so;function ps(t,e,r){return(0,k._)`${so(t)}.call(${e}, ${r})`}I.isOwnProperty=ps;function ql(t,e,r,s){let n=(0,k._)`${e}${(0,k.getProperty)(r)} !== undefined`;return s?(0,k._)`${n} && ${ps(t,e,r)}`:n}I.propertyInData=ql;function ms(t,e,r,s){let n=(0,k._)`${e}${(0,k.getProperty)(r)} === undefined`;return s?(0,k.or)(n,(0,k.not)(ps(t,e,r))):n}I.noPropertyInData=ms;function no(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}I.allSchemaProperties=no;function Vl(t,e){return no(e).filter(r=>!(0,fs.alwaysValidSchema)(t,e[r]))}I.schemaProperties=Vl;function Fl({schemaCode:t,data:e,it:{gen:r,topSchemaRef:s,schemaPath:n,errorPath:o},it:i},a,c,d){let l=d?(0,k._)`${t}, ${e}, ${s}${n}`:e,u=[[Oe.default.instancePath,(0,k.strConcat)(Oe.default.instancePath,o)],[Oe.default.parentData,i.parentData],[Oe.default.parentDataProperty,i.parentDataProperty],[Oe.default.rootData,Oe.default.rootData]];i.opts.dynamicRef&&u.push([Oe.default.dynamicAnchors,Oe.default.dynamicAnchors]);let g=(0,k._)`${l}, ${r.object(...u)}`;return c!==k.nil?(0,k._)`${a}.call(${c}, ${g})`:(0,k._)`${a}(${g})`}I.callValidateCode=Fl;var Ll=(0,k._)`new RegExp`;function Bl({gen:t,it:{opts:e}},r){let s=e.unicodeRegExp?"u":"",{regExp:n}=e.code,o=n(r,s);return t.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,k._)`${n.code==="new RegExp"?Ll:(0,xl.useFunc)(t,n)}(${r}, ${s})`})}I.usePattern=Bl;function Kl(t){let{gen:e,data:r,keyword:s,it:n}=t,o=e.name("valid");if(n.allErrors){let a=e.let("valid",!0);return i(()=>e.assign(a,!1)),a}return e.var(o,!0),i(()=>e.break()),o;function i(a){let c=e.const("len",(0,k._)`${r}.length`);e.forRange("i",0,c,d=>{t.subschema({keyword:s,dataProp:d,dataPropType:fs.Type.Num},o),e.if((0,k.not)(o),a)})}}I.validateArray=Kl;function Hl(t){let{gen:e,schema:r,keyword:s,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,fs.alwaysValidSchema)(n,c))&&!n.opts.unevaluated)return;let i=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((c,d)=>{let l=t.subschema({keyword:s,schemaProp:d,compositeRule:!0},a);e.assign(i,(0,k._)`${i} || ${a}`),t.mergeValidEvaluated(l,a)||e.if((0,k.not)(i))})),t.result(i,()=>t.reset(),()=>t.error(!0))}I.validateUnion=Hl});var ao=y(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.validateKeywordUsage=fe.validSchemaType=fe.funcKeywordCode=fe.macroKeywordCode=void 0;var Q=P(),je=_e(),zl=re(),Wl=Et();function Jl(t,e){let{gen:r,keyword:s,schema:n,parentSchema:o,it:i}=t,a=e.macro.call(i.self,n,o,i),c=io(r,s,a);i.opts.validateSchema!==!1&&i.self.validateSchema(a,!0);let d=r.name("valid");t.subschema({schema:a,schemaPath:Q.nil,errSchemaPath:`${i.errSchemaPath}/${s}`,topSchemaRef:c,compositeRule:!0},d),t.pass(d,()=>t.error(!0))}fe.macroKeywordCode=Jl;function Ql(t,e){var r;let{gen:s,keyword:n,schema:o,parentSchema:i,$data:a,it:c}=t;Xl(c,e);let d=!a&&e.compile?e.compile.call(c.self,o,i,c):e.validate,l=io(s,n,d),u=s.let("valid");t.block$data(u,g),t.ok((r=e.valid)!==null&&r!==void 0?r:u);function g(){if(e.errors===!1)f(),e.modifying&&oo(t),h(()=>t.error());else{let w=e.async?m():p();e.modifying&&oo(t),h(()=>Yl(t,w))}}function m(){let w=s.let("ruleErrs",null);return s.try(()=>f((0,Q._)`await `),T=>s.assign(u,!1).if((0,Q._)`${T} instanceof ${c.ValidationError}`,()=>s.assign(w,(0,Q._)`${T}.errors`),()=>s.throw(T))),w}function p(){let w=(0,Q._)`${l}.errors`;return s.assign(w,null),f(Q.nil),w}function f(w=e.async?(0,Q._)`await `:Q.nil){let T=c.opts.passContext?je.default.this:je.default.self,S=!("compile"in e&&!a||e.schema===!1);s.assign(u,(0,Q._)`${w}${(0,zl.callValidateCode)(t,l,T,S)}`,e.modifying)}function h(w){var T;s.if((0,Q.not)((T=e.valid)!==null&&T!==void 0?T:u),w)}}fe.funcKeywordCode=Ql;function oo(t){let{gen:e,data:r,it:s}=t;e.if(s.parentData,()=>e.assign(r,(0,Q._)`${s.parentData}[${s.parentDataProperty}]`))}function Yl(t,e){let{gen:r}=t;r.if((0,Q._)`Array.isArray(${e})`,()=>{r.assign(je.default.vErrors,(0,Q._)`${je.default.vErrors} === null ? ${e} : ${je.default.vErrors}.concat(${e})`).assign(je.default.errors,(0,Q._)`${je.default.vErrors}.length`),(0,Wl.extendErrors)(t)},()=>t.error())}function Xl({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function io(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Q.stringify)(r)})}function Zl(t,e,r=!1){return!e.length||e.some(s=>s==="array"?Array.isArray(t):s==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==s||r&&typeof t>"u")}fe.validSchemaType=Zl;function ed({schema:t,opts:e,self:r,errSchemaPath:s},n,o){if(Array.isArray(n.keyword)?!n.keyword.includes(o):n.keyword!==o)throw new Error("ajv implementation error");let i=n.dependencies;if(i?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${o}: ${i.join(",")}`);if(n.validateSchema&&!n.validateSchema(t[o])){let c=`keyword "${o}" value is invalid at path "${s}": `+r.errorsText(n.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(c);else throw new Error(c)}}fe.validateKeywordUsage=ed});var lo=y(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.extendSubschemaMode=Te.extendSubschemaData=Te.getSubschema=void 0;var pe=P(),co=C();function td(t,{keyword:e,schemaProp:r,schema:s,schemaPath:n,errSchemaPath:o,topSchemaRef:i}){if(e!==void 0&&s!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,pe._)`${t.schemaPath}${(0,pe.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,pe._)`${t.schemaPath}${(0,pe.getProperty)(e)}${(0,pe.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,co.escapeFragment)(r)}`}}if(s!==void 0){if(n===void 0||o===void 0||i===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:s,schemaPath:n,topSchemaRef:i,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}Te.getSubschema=td;function rd(t,e,{dataProp:r,dataPropType:s,data:n,dataTypes:o,propertyName:i}){if(n!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:d,dataPathArr:l,opts:u}=e,g=a.let("data",(0,pe._)`${e.data}${(0,pe.getProperty)(r)}`,!0);c(g),t.errorPath=(0,pe.str)`${d}${(0,co.getErrorPath)(r,s,u.jsPropertySyntax)}`,t.parentDataProperty=(0,pe._)`${r}`,t.dataPathArr=[...l,t.parentDataProperty]}if(n!==void 0){let d=n instanceof pe.Name?n:a.let("data",n,!0);c(d),i!==void 0&&(t.propertyName=i)}o&&(t.dataTypes=o);function c(d){t.data=d,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,d]}}Te.extendSubschemaData=rd;function sd(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:s,createErrors:n,allErrors:o}){s!==void 0&&(t.compositeRule=s),n!==void 0&&(t.createErrors=n),o!==void 0&&(t.allErrors=o),t.jtdDiscriminator=e,t.jtdMetadata=r}Te.extendSubschemaMode=sd});var hs=y((Hh,uo)=>{"use strict";uo.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var s,n,o;if(Array.isArray(e)){if(s=e.length,s!=r.length)return!1;for(n=s;n--!==0;)if(!t(e[n],r[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),s=o.length,s!==Object.keys(r).length)return!1;for(n=s;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[n]))return!1;for(n=s;n--!==0;){var i=o[n];if(!t(e[i],r[i]))return!1}return!0}return e!==e&&r!==r}});var po=y((zh,fo)=>{"use strict";var Ae=fo.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var s=typeof r=="function"?r:r.pre||function(){},n=r.post||function(){};or(e,s,n,t,"",t)};Ae.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Ae.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Ae.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Ae.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function or(t,e,r,s,n,o,i,a,c,d){if(s&&typeof s=="object"&&!Array.isArray(s)){e(s,n,o,i,a,c,d);for(var l in s){var u=s[l];if(Array.isArray(u)){if(l in Ae.arrayKeywords)for(var g=0;g<u.length;g++)or(t,e,r,u[g],n+"/"+l+"/"+g,o,n,l,s,g)}else if(l in Ae.propsKeywords){if(u&&typeof u=="object")for(var m in u)or(t,e,r,u[m],n+"/"+l+"/"+nd(m),o,n,l,s,m)}else(l in Ae.keywords||t.allKeys&&!(l in Ae.skipKeywords))&&or(t,e,r,u,n+"/"+l,o,n,l,s)}r(s,n,o,i,a,c,d)}}function nd(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var vt=y(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.getSchemaRefs=Z.resolveUrl=Z.normalizeId=Z._getFullPath=Z.getFullPath=Z.inlineRef=void 0;var od=C(),id=hs(),ad=po(),cd=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function ld(t,e=!0){return typeof t=="boolean"?!0:e===!0?!gs(t):e?mo(t)<=e:!1}Z.inlineRef=ld;var dd=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function gs(t){for(let e in t){if(dd.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(gs)||typeof r=="object"&&gs(r))return!0}return!1}function mo(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!cd.has(r)&&(typeof t[r]=="object"&&(0,od.eachItem)(t[r],s=>e+=mo(s)),e===1/0))return 1/0}return e}function ho(t,e="",r){r!==!1&&(e=tt(e));let s=t.parse(e);return go(t,s)}Z.getFullPath=ho;function go(t,e){return t.serialize(e).split("#")[0]+"#"}Z._getFullPath=go;var ud=/#\/?$/;function tt(t){return t?t.replace(ud,""):""}Z.normalizeId=tt;function fd(t,e,r){return r=tt(r),t.resolve(e,r)}Z.resolveUrl=fd;var pd=/^[a-z_][-a-z0-9._]*$/i;function md(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:s}=this.opts,n=tt(t[r]||e),o={"":n},i=ho(s,n,!1),a={},c=new Set;return ad(t,{allKeys:!0},(u,g,m,p)=>{if(p===void 0)return;let f=i+g,h=o[p];typeof u[r]=="string"&&(h=w.call(this,u[r])),T.call(this,u.$anchor),T.call(this,u.$dynamicAnchor),o[g]=h;function w(S){let G=this.opts.uriResolver.resolve;if(S=tt(h?G(h,S):S),c.has(S))throw l(S);c.add(S);let v=this.refs[S];return typeof v=="string"&&(v=this.refs[v]),typeof v=="object"?d(u,v.schema,S):S!==tt(f)&&(S[0]==="#"?(d(u,a[S],S),a[S]=u):this.refs[S]=f),S}function T(S){if(typeof S=="string"){if(!pd.test(S))throw new Error(`invalid anchor "${S}"`);w.call(this,`#${S}`)}}}),a;function d(u,g,m){if(g!==void 0&&!id(u,g))throw l(m)}function l(u){return new Error(`reference "${u}" resolves to more than one schema`)}}Z.getSchemaRefs=md});var Pt=y(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.getData=Ne.KeywordCxt=Ne.validateFunctionCode=void 0;var vo=Jn(),yo=_t(),ws=cs(),ir=_t(),hd=ro(),bt=ao(),ys=lo(),E=P(),_=_e(),gd=vt(),ve=C(),$t=Et();function yd(t){if(Po(t)&&(Ro(t),bo(t))){_d(t);return}$o(t,()=>(0,vo.topBoolOrEmptySchema)(t))}Ne.validateFunctionCode=yd;function $o({gen:t,validateName:e,schema:r,schemaEnv:s,opts:n},o){n.code.es5?t.func(e,(0,E._)`${_.default.data}, ${_.default.valCxt}`,s.$async,()=>{t.code((0,E._)`"use strict"; ${wo(r,n)}`),Ed(t,n),t.code(o)}):t.func(e,(0,E._)`${_.default.data}, ${wd(n)}`,s.$async,()=>t.code(wo(r,n)).code(o))}function wd(t){return(0,E._)`{${_.default.instancePath}="", ${_.default.parentData}, ${_.default.parentDataProperty}, ${_.default.rootData}=${_.default.data}${t.dynamicRef?(0,E._)`, ${_.default.dynamicAnchors}={}`:E.nil}}={}`}function Ed(t,e){t.if(_.default.valCxt,()=>{t.var(_.default.instancePath,(0,E._)`${_.default.valCxt}.${_.default.instancePath}`),t.var(_.default.parentData,(0,E._)`${_.default.valCxt}.${_.default.parentData}`),t.var(_.default.parentDataProperty,(0,E._)`${_.default.valCxt}.${_.default.parentDataProperty}`),t.var(_.default.rootData,(0,E._)`${_.default.valCxt}.${_.default.rootData}`),e.dynamicRef&&t.var(_.default.dynamicAnchors,(0,E._)`${_.default.valCxt}.${_.default.dynamicAnchors}`)},()=>{t.var(_.default.instancePath,(0,E._)`""`),t.var(_.default.parentData,(0,E._)`undefined`),t.var(_.default.parentDataProperty,(0,E._)`undefined`),t.var(_.default.rootData,_.default.data),e.dynamicRef&&t.var(_.default.dynamicAnchors,(0,E._)`{}`)})}function _d(t){let{schema:e,opts:r,gen:s}=t;$o(t,()=>{r.$comment&&e.$comment&&Oo(t),Rd(t),s.let(_.default.vErrors,null),s.let(_.default.errors,0),r.unevaluated&&vd(t),So(t),Td(t)})}function vd(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,E._)`${r}.evaluated`),e.if((0,E._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,E._)`${t.evaluated}.props`,(0,E._)`undefined`)),e.if((0,E._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,E._)`${t.evaluated}.items`,(0,E._)`undefined`))}function wo(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,E._)`/*# sourceURL=${r} */`:E.nil}function $d(t,e){if(Po(t)&&(Ro(t),bo(t))){bd(t,e);return}(0,vo.boolOrEmptySchema)(t,e)}function bo({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function Po(t){return typeof t.schema!="boolean"}function bd(t,e){let{schema:r,gen:s,opts:n}=t;n.$comment&&r.$comment&&Oo(t),Sd(t),Od(t);let o=s.const("_errs",_.default.errors);So(t,o),s.var(e,(0,E._)`${o} === ${_.default.errors}`)}function Ro(t){(0,ve.checkUnknownRules)(t),Pd(t)}function So(t,e){if(t.opts.jtd)return Eo(t,[],!1,e);let r=(0,yo.getSchemaTypes)(t.schema),s=(0,yo.coerceAndCheckDataType)(t,r);Eo(t,r,!s,e)}function Pd(t){let{schema:e,errSchemaPath:r,opts:s,self:n}=t;e.$ref&&s.ignoreKeywordsWithRef&&(0,ve.schemaHasRulesButRef)(e,n.RULES)&&n.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Rd(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,ve.checkStrictMode)(t,"default is ignored in the schema root")}function Sd(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,gd.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function Od(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function Oo({gen:t,schemaEnv:e,schema:r,errSchemaPath:s,opts:n}){let o=r.$comment;if(n.$comment===!0)t.code((0,E._)`${_.default.self}.logger.log(${o})`);else if(typeof n.$comment=="function"){let i=(0,E.str)`${s}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,E._)`${_.default.self}.opts.$comment(${o}, ${i}, ${a}.schema)`)}}function Td(t){let{gen:e,schemaEnv:r,validateName:s,ValidationError:n,opts:o}=t;r.$async?e.if((0,E._)`${_.default.errors} === 0`,()=>e.return(_.default.data),()=>e.throw((0,E._)`new ${n}(${_.default.vErrors})`)):(e.assign((0,E._)`${s}.errors`,_.default.vErrors),o.unevaluated&&Ad(t),e.return((0,E._)`${_.default.errors} === 0`))}function Ad({gen:t,evaluated:e,props:r,items:s}){r instanceof E.Name&&t.assign((0,E._)`${e}.props`,r),s instanceof E.Name&&t.assign((0,E._)`${e}.items`,s)}function Eo(t,e,r,s){let{gen:n,schema:o,data:i,allErrors:a,opts:c,self:d}=t,{RULES:l}=d;if(o.$ref&&(c.ignoreKeywordsWithRef||!(0,ve.schemaHasRulesButRef)(o,l))){n.block(()=>Ao(t,"$ref",l.all.$ref.definition));return}c.jtd||Nd(t,e),n.block(()=>{for(let g of l.rules)u(g);u(l.post)});function u(g){(0,ws.shouldUseGroup)(o,g)&&(g.type?(n.if((0,ir.checkDataType)(g.type,i,c.strictNumbers)),_o(t,g),e.length===1&&e[0]===g.type&&r&&(n.else(),(0,ir.reportTypeError)(t)),n.endIf()):_o(t,g),a||n.if((0,E._)`${_.default.errors} === ${s||0}`))}}function _o(t,e){let{gen:r,schema:s,opts:{useDefaults:n}}=t;n&&(0,hd.assignDefaults)(t,e.type),r.block(()=>{for(let o of e.rules)(0,ws.shouldUseRule)(s,o)&&Ao(t,o.keyword,o.definition,e.type)})}function Nd(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(Cd(t,e),t.opts.allowUnionTypes||Id(t,e),Md(t,t.dataTypes))}function Cd(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{To(t.dataTypes,r)||Es(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),kd(t,e)}}function Id(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&Es(t,"use allowUnionTypes to allow union type keyword")}function Md(t,e){let r=t.self.RULES.all;for(let s in r){let n=r[s];if(typeof n=="object"&&(0,ws.shouldUseRule)(t.schema,n)){let{type:o}=n.definition;o.length&&!o.some(i=>Gd(e,i))&&Es(t,`missing type "${o.join(",")}" for keyword "${s}"`)}}}function Gd(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function To(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function kd(t,e){let r=[];for(let s of t.dataTypes)To(e,s)?r.push(s):e.includes("integer")&&s==="number"&&r.push("integer");t.dataTypes=r}function Es(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,ve.checkStrictMode)(t,e,t.opts.strictTypes)}var ar=class{constructor(e,r,s){if((0,bt.validateKeywordUsage)(e,r,s),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=s,this.data=e.data,this.schema=e.schema[s],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,ve.schemaRefOrVal)(e,this.schema,s,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",No(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,bt.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${s} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",_.default.errors))}result(e,r,s){this.failResult((0,E.not)(e),r,s)}failResult(e,r,s){this.gen.if(e),s?s():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,E.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,E._)`${r} !== undefined && (${(0,E.or)(this.invalid$data(),e)})`)}error(e,r,s){if(r){this.setParams(r),this._error(e,s),this.setParams({});return}this._error(e,s)}_error(e,r){(e?$t.reportExtraError:$t.reportError)(this,this.def.error,r)}$dataError(){(0,$t.reportError)(this,this.def.$dataError||$t.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,$t.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,s=E.nil){this.gen.block(()=>{this.check$data(e,s),r()})}check$data(e=E.nil,r=E.nil){if(!this.$data)return;let{gen:s,schemaCode:n,schemaType:o,def:i}=this;s.if((0,E.or)((0,E._)`${n} === undefined`,r)),e!==E.nil&&s.assign(e,!0),(o.length||i.validateSchema)&&(s.elseIf(this.invalid$data()),this.$dataError(),e!==E.nil&&s.assign(e,!1)),s.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:s,def:n,it:o}=this;return(0,E.or)(i(),a());function i(){if(s.length){if(!(r instanceof E.Name))throw new Error("ajv implementation error");let c=Array.isArray(s)?s:[s];return(0,E._)`${(0,ir.checkDataTypes)(c,r,o.opts.strictNumbers,ir.DataType.Wrong)}`}return E.nil}function a(){if(n.validateSchema){let c=e.scopeValue("validate$data",{ref:n.validateSchema});return(0,E._)`!${c}(${r})`}return E.nil}}subschema(e,r){let s=(0,ys.getSubschema)(this.it,e);(0,ys.extendSubschemaData)(s,this.it,e),(0,ys.extendSubschemaMode)(s,e);let n={...this.it,...s,items:void 0,props:void 0};return $d(n,r),n}mergeEvaluated(e,r){let{it:s,gen:n}=this;s.opts.unevaluated&&(s.props!==!0&&e.props!==void 0&&(s.props=ve.mergeEvaluated.props(n,e.props,s.props,r)),s.items!==!0&&e.items!==void 0&&(s.items=ve.mergeEvaluated.items(n,e.items,s.items,r)))}mergeValidEvaluated(e,r){let{it:s,gen:n}=this;if(s.opts.unevaluated&&(s.props!==!0||s.items!==!0))return n.if(r,()=>this.mergeEvaluated(e,E.Name)),!0}};Ne.KeywordCxt=ar;function Ao(t,e,r,s){let n=new ar(t,r,e);"code"in r?r.code(n,s):n.$data&&r.validate?(0,bt.funcKeywordCode)(n,r):"macro"in r?(0,bt.macroKeywordCode)(n,r):(r.compile||r.validate)&&(0,bt.funcKeywordCode)(n,r)}var xd=/^\/(?:[^~]|~0|~1)*$/,jd=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function No(t,{dataLevel:e,dataNames:r,dataPathArr:s}){let n,o;if(t==="")return _.default.rootData;if(t[0]==="/"){if(!xd.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);n=t,o=_.default.rootData}else{let d=jd.exec(t);if(!d)throw new Error(`Invalid JSON-pointer: ${t}`);let l=+d[1];if(n=d[2],n==="#"){if(l>=e)throw new Error(c("property/index",l));return s[e-l]}if(l>e)throw new Error(c("data",l));if(o=r[e-l],!n)return o}let i=o,a=n.split("/");for(let d of a)d&&(o=(0,E._)`${o}${(0,E.getProperty)((0,ve.unescapeJsonPointer)(d))}`,i=(0,E._)`${i} && ${o}`);return i;function c(d,l){return`Cannot access ${d} ${l} levels up, current level is ${e}`}}Ne.getData=No});var cr=y(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});var _s=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};vs.default=_s});var Rt=y(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});var $s=vt(),bs=class extends Error{constructor(e,r,s,n){super(n||`can't resolve reference ${s} from id ${r}`),this.missingRef=(0,$s.resolveUrl)(e,r,s),this.missingSchema=(0,$s.normalizeId)((0,$s.getFullPath)(e,this.missingRef))}};Ps.default=bs});var dr=y(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.resolveSchema=se.getCompilingSchema=se.resolveRef=se.compileSchema=se.SchemaEnv=void 0;var ae=P(),Ud=cr(),Ue=_e(),ce=vt(),Co=C(),Dd=Pt(),rt=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let s;typeof e.schema=="object"&&(s=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,ce.normalizeId)(s?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=s?.$async,this.refs={}}};se.SchemaEnv=rt;function Ss(t){let e=Io.call(this,t);if(e)return e;let r=(0,ce.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:s,lines:n}=this.opts.code,{ownProperties:o}=this.opts,i=new ae.CodeGen(this.scope,{es5:s,lines:n,ownProperties:o}),a;t.$async&&(a=i.scopeValue("Error",{ref:Ud.default,code:(0,ae._)`require("ajv/dist/runtime/validation_error").default`}));let c=i.scopeName("validate");t.validateName=c;let d={gen:i,allErrors:this.opts.allErrors,data:Ue.default.data,parentData:Ue.default.parentData,parentDataProperty:Ue.default.parentDataProperty,dataNames:[Ue.default.data],dataPathArr:[ae.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:i.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,ae.stringify)(t.schema)}:{ref:t.schema}),validateName:c,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:ae.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,ae._)`""`,opts:this.opts,self:this},l;try{this._compilations.add(t),(0,Dd.validateFunctionCode)(d),i.optimize(this.opts.code.optimize);let u=i.toString();l=`${i.scopeRefs(Ue.default.scope)}return ${u}`,this.opts.code.process&&(l=this.opts.code.process(l,t));let m=new Function(`${Ue.default.self}`,`${Ue.default.scope}`,l)(this,this.scope.get());if(this.scope.value(c,{ref:m}),m.errors=null,m.schema=t.schema,m.schemaEnv=t,t.$async&&(m.$async=!0),this.opts.code.source===!0&&(m.source={validateName:c,validateCode:u,scopeValues:i._values}),this.opts.unevaluated){let{props:p,items:f}=d;m.evaluated={props:p instanceof ae.Name?void 0:p,items:f instanceof ae.Name?void 0:f,dynamicProps:p instanceof ae.Name,dynamicItems:f instanceof ae.Name},m.source&&(m.source.evaluated=(0,ae.stringify)(m.evaluated))}return t.validate=m,t}catch(u){throw delete t.validate,delete t.validateName,l&&this.logger.error("Error compiling schema, function code:",l),u}finally{this._compilations.delete(t)}}se.compileSchema=Ss;function qd(t,e,r){var s;r=(0,ce.resolveUrl)(this.opts.uriResolver,e,r);let n=t.refs[r];if(n)return n;let o=Ld.call(this,t,r);if(o===void 0){let i=(s=t.localRefs)===null||s===void 0?void 0:s[r],{schemaId:a}=this.opts;i&&(o=new rt({schema:i,schemaId:a,root:t,baseId:e}))}if(o!==void 0)return t.refs[r]=Vd.call(this,o)}se.resolveRef=qd;function Vd(t){return(0,ce.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:Ss.call(this,t)}function Io(t){for(let e of this._compilations)if(Fd(e,t))return e}se.getCompilingSchema=Io;function Fd(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function Ld(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||lr.call(this,t,e)}function lr(t,e){let r=this.opts.uriResolver.parse(e),s=(0,ce._getFullPath)(this.opts.uriResolver,r),n=(0,ce.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&s===n)return Rs.call(this,r,t);let o=(0,ce.normalizeId)(s),i=this.refs[o]||this.schemas[o];if(typeof i=="string"){let a=lr.call(this,t,i);return typeof a?.schema!="object"?void 0:Rs.call(this,r,a)}if(typeof i?.schema=="object"){if(i.validate||Ss.call(this,i),o===(0,ce.normalizeId)(e)){let{schema:a}=i,{schemaId:c}=this.opts,d=a[c];return d&&(n=(0,ce.resolveUrl)(this.opts.uriResolver,n,d)),new rt({schema:a,schemaId:c,root:t,baseId:n})}return Rs.call(this,r,i)}}se.resolveSchema=lr;var Bd=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Rs(t,{baseId:e,schema:r,root:s}){var n;if(((n=t.fragment)===null||n===void 0?void 0:n[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let c=r[(0,Co.unescapeFragment)(a)];if(c===void 0)return;r=c;let d=typeof r=="object"&&r[this.opts.schemaId];!Bd.has(a)&&d&&(e=(0,ce.resolveUrl)(this.opts.uriResolver,e,d))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,Co.schemaHasRulesButRef)(r,this.RULES)){let a=(0,ce.resolveUrl)(this.opts.uriResolver,e,r.$ref);o=lr.call(this,s,a)}let{schemaId:i}=this.opts;if(o=o||new rt({schema:r,schemaId:i,root:s,baseId:e}),o.schema!==o.root.schema)return o}});var Mo=y((Zh,Kd)=>{Kd.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var ko=y((eg,Go)=>{"use strict";var Hd={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Go.exports={HEX:Hd}});var Lo=y((tg,Fo)=>{"use strict";var{HEX:zd}=ko();function Do(t){if(Vo(t,".")<3)return{host:t,isIPV4:!1};let e=t.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[r]=e;return r?{host:Jd(r,"."),isIPV4:!0}:{host:t,isIPV4:!1}}function Os(t,e=!1){let r="",s=!0;for(let n of t){if(zd[n]===void 0)return;n!=="0"&&s===!0&&(s=!1),s||(r+=n)}return e&&r.length===0&&(r="0"),r}function Wd(t){let e=0,r={error:!1,address:"",zone:""},s=[],n=[],o=!1,i=!1,a=!1;function c(){if(n.length){if(o===!1){let d=Os(n);if(d!==void 0)s.push(d);else return r.error=!0,!1}n.length=0}return!0}for(let d=0;d<t.length;d++){let l=t[d];if(!(l==="["||l==="]"))if(l===":"){if(i===!0&&(a=!0),!c())break;if(e++,s.push(":"),e>7){r.error=!0;break}d-1>=0&&t[d-1]===":"&&(i=!0);continue}else if(l==="%"){if(!c())break;o=!0}else{n.push(l);continue}}return n.length&&(o?r.zone=n.join(""):a?s.push(n.join("")):s.push(Os(n))),r.address=s.join(""),r}function qo(t,e={}){if(Vo(t,":")<2)return{host:t,isIPV6:!1};let r=Wd(t);if(r.error)return{host:t,isIPV6:!1};{let s=r.address,n=r.address;return r.zone&&(s+="%"+r.zone,n+="%25"+r.zone),{host:s,escapedHost:n,isIPV6:!0}}}function Jd(t,e){let r="",s=!0,n=t.length;for(let o=0;o<n;o++){let i=t[o];i==="0"&&s?(o+1<=n&&t[o+1]===e||o+1===n)&&(r+=i,s=!1):(i===e?s=!0:s=!1,r+=i)}return r}function Vo(t,e){let r=0;for(let s=0;s<t.length;s++)t[s]===e&&r++;return r}var xo=/^\.\.?\//u,jo=/^\/\.(?:\/|$)/u,Uo=/^\/\.\.(?:\/|$)/u,Qd=/^\/?(?:.|\n)*?(?=\/|$)/u;function Yd(t){let e=[];for(;t.length;)if(t.match(xo))t=t.replace(xo,"");else if(t.match(jo))t=t.replace(jo,"/");else if(t.match(Uo))t=t.replace(Uo,"/"),e.pop();else if(t==="."||t==="..")t="";else{let r=t.match(Qd);if(r){let s=r[0];t=t.slice(s.length),e.push(s)}else throw new Error("Unexpected dot segment condition")}return e.join("")}function Xd(t,e){let r=e!==!0?escape:unescape;return t.scheme!==void 0&&(t.scheme=r(t.scheme)),t.userinfo!==void 0&&(t.userinfo=r(t.userinfo)),t.host!==void 0&&(t.host=r(t.host)),t.path!==void 0&&(t.path=r(t.path)),t.query!==void 0&&(t.query=r(t.query)),t.fragment!==void 0&&(t.fragment=r(t.fragment)),t}function Zd(t,e){let r=[];if(t.userinfo!==void 0&&(r.push(t.userinfo),r.push("@")),t.host!==void 0){let s=unescape(t.host),n=Do(s);if(n.isIPV4)s=n.host;else{let o=qo(n.host,{isIPV4:!1});o.isIPV6===!0?s=`[${o.escapedHost}]`:s=t.host}r.push(s)}return(typeof t.port=="number"||typeof t.port=="string")&&(r.push(":"),r.push(String(t.port))),r.length?r.join(""):void 0}Fo.exports={recomposeAuthority:Zd,normalizeComponentEncoding:Xd,removeDotSegments:Yd,normalizeIPv4:Do,normalizeIPv6:qo,stringArrayToHexStripped:Os}});var Jo=y((rg,Wo)=>{"use strict";var eu=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,tu=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function Bo(t){return typeof t.secure=="boolean"?t.secure:String(t.scheme).toLowerCase()==="wss"}function Ko(t){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t}function Ho(t){let e=String(t.scheme).toLowerCase()==="https";return(t.port===(e?443:80)||t.port==="")&&(t.port=void 0),t.path||(t.path="/"),t}function ru(t){return t.secure=Bo(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t}function su(t){if((t.port===(Bo(t)?443:80)||t.port==="")&&(t.port=void 0),typeof t.secure=="boolean"&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){let[e,r]=t.resourceName.split("?");t.path=e&&e!=="/"?e:void 0,t.query=r,t.resourceName=void 0}return t.fragment=void 0,t}function nu(t,e){if(!t.path)return t.error="URN can not be parsed",t;let r=t.path.match(tu);if(r){let s=e.scheme||t.scheme||"urn";t.nid=r[1].toLowerCase(),t.nss=r[2];let n=`${s}:${e.nid||t.nid}`,o=Ts[n];t.path=void 0,o&&(t=o.parse(t,e))}else t.error=t.error||"URN can not be parsed.";return t}function ou(t,e){let r=e.scheme||t.scheme||"urn",s=t.nid.toLowerCase(),n=`${r}:${e.nid||s}`,o=Ts[n];o&&(t=o.serialize(t,e));let i=t,a=t.nss;return i.path=`${s||e.nid}:${a}`,e.skipEscape=!0,i}function iu(t,e){let r=t;return r.uuid=r.nss,r.nss=void 0,!e.tolerant&&(!r.uuid||!eu.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function au(t){let e=t;return e.nss=(t.uuid||"").toLowerCase(),e}var zo={scheme:"http",domainHost:!0,parse:Ko,serialize:Ho},cu={scheme:"https",domainHost:zo.domainHost,parse:Ko,serialize:Ho},ur={scheme:"ws",domainHost:!0,parse:ru,serialize:su},lu={scheme:"wss",domainHost:ur.domainHost,parse:ur.parse,serialize:ur.serialize},du={scheme:"urn",parse:nu,serialize:ou,skipNormalize:!0},uu={scheme:"urn:uuid",parse:iu,serialize:au,skipNormalize:!0},Ts={http:zo,https:cu,ws:ur,wss:lu,urn:du,"urn:uuid":uu};Wo.exports=Ts});var Yo=y((sg,pr)=>{"use strict";var{normalizeIPv6:fu,normalizeIPv4:pu,removeDotSegments:St,recomposeAuthority:mu,normalizeComponentEncoding:fr}=Lo(),As=Jo();function hu(t,e){return typeof t=="string"?t=me($e(t,e),e):typeof t=="object"&&(t=$e(me(t,e),e)),t}function gu(t,e,r){let s=Object.assign({scheme:"null"},r),n=Qo($e(t,s),$e(e,s),s,!0);return me(n,{...s,skipEscape:!0})}function Qo(t,e,r,s){let n={};return s||(t=$e(me(t,r),r),e=$e(me(e,r),r)),r=r||{},!r.tolerant&&e.scheme?(n.scheme=e.scheme,n.userinfo=e.userinfo,n.host=e.host,n.port=e.port,n.path=St(e.path||""),n.query=e.query):(e.userinfo!==void 0||e.host!==void 0||e.port!==void 0?(n.userinfo=e.userinfo,n.host=e.host,n.port=e.port,n.path=St(e.path||""),n.query=e.query):(e.path?(e.path.charAt(0)==="/"?n.path=St(e.path):((t.userinfo!==void 0||t.host!==void 0||t.port!==void 0)&&!t.path?n.path="/"+e.path:t.path?n.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:n.path=e.path,n.path=St(n.path)),n.query=e.query):(n.path=t.path,e.query!==void 0?n.query=e.query:n.query=t.query),n.userinfo=t.userinfo,n.host=t.host,n.port=t.port),n.scheme=t.scheme),n.fragment=e.fragment,n}function yu(t,e,r){return typeof t=="string"?(t=unescape(t),t=me(fr($e(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=me(fr(t,!0),{...r,skipEscape:!0})),typeof e=="string"?(e=unescape(e),e=me(fr($e(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=me(fr(e,!0),{...r,skipEscape:!0})),t.toLowerCase()===e.toLowerCase()}function me(t,e){let r={host:t.host,scheme:t.scheme,userinfo:t.userinfo,port:t.port,path:t.path,query:t.query,nid:t.nid,nss:t.nss,uuid:t.uuid,fragment:t.fragment,reference:t.reference,resourceName:t.resourceName,secure:t.secure,error:""},s=Object.assign({},e),n=[],o=As[(s.scheme||r.scheme||"").toLowerCase()];o&&o.serialize&&o.serialize(r,s),r.path!==void 0&&(s.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),s.reference!=="suffix"&&r.scheme&&(n.push(r.scheme),n.push(":"));let i=mu(r,s);if(i!==void 0&&(s.reference!=="suffix"&&n.push("//"),n.push(i),r.path&&r.path.charAt(0)!=="/"&&n.push("/")),r.path!==void 0){let a=r.path;!s.absolutePath&&(!o||!o.absolutePath)&&(a=St(a)),i===void 0&&(a=a.replace(/^\/\//u,"/%2F")),n.push(a)}return r.query!==void 0&&(n.push("?"),n.push(r.query)),r.fragment!==void 0&&(n.push("#"),n.push(r.fragment)),n.join("")}var wu=Array.from({length:127},(t,e)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(e)));function Eu(t){let e=0;for(let r=0,s=t.length;r<s;++r)if(e=t.charCodeAt(r),e>126||wu[e])return!0;return!1}var _u=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function $e(t,e){let r=Object.assign({},e),s={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},n=t.indexOf("%")!==-1,o=!1;r.reference==="suffix"&&(t=(r.scheme?r.scheme+":":"")+"//"+t);let i=t.match(_u);if(i){if(s.scheme=i[1],s.userinfo=i[3],s.host=i[4],s.port=parseInt(i[5],10),s.path=i[6]||"",s.query=i[7],s.fragment=i[8],isNaN(s.port)&&(s.port=i[5]),s.host){let c=pu(s.host);if(c.isIPV4===!1){let d=fu(c.host,{isIPV4:!1});s.host=d.host.toLowerCase(),o=d.isIPV6}else s.host=c.host,o=!0}s.scheme===void 0&&s.userinfo===void 0&&s.host===void 0&&s.port===void 0&&!s.path&&s.query===void 0?s.reference="same-document":s.scheme===void 0?s.reference="relative":s.fragment===void 0?s.reference="absolute":s.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==s.reference&&(s.error=s.error||"URI is not a "+r.reference+" reference.");let a=As[(r.scheme||s.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!a||!a.unicodeSupport)&&s.host&&(r.domainHost||a&&a.domainHost)&&o===!1&&Eu(s.host))try{s.host=URL.domainToASCII(s.host.toLowerCase())}catch(c){s.error=s.error||"Host's domain name can not be converted to ASCII: "+c}(!a||a&&!a.skipNormalize)&&(n&&s.scheme!==void 0&&(s.scheme=unescape(s.scheme)),n&&s.userinfo!==void 0&&(s.userinfo=unescape(s.userinfo)),n&&s.host!==void 0&&(s.host=unescape(s.host)),s.path!==void 0&&s.path.length&&(s.path=escape(unescape(s.path))),s.fragment!==void 0&&s.fragment.length&&(s.fragment=encodeURI(decodeURIComponent(s.fragment)))),a&&a.parse&&a.parse(s,r)}else s.error=s.error||"URI can not be parsed.";return s}var Ns={SCHEMES:As,normalize:hu,resolve:gu,resolveComponents:Qo,equal:yu,serialize:me,parse:$e};pr.exports=Ns;pr.exports.default=Ns;pr.exports.fastUri=Ns});var Zo=y(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});var Xo=Yo();Xo.code='require("ajv/dist/runtime/uri").default';Cs.default=Xo});var ai=y(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.CodeGen=V.Name=V.nil=V.stringify=V.str=V._=V.KeywordCxt=void 0;var vu=Pt();Object.defineProperty(V,"KeywordCxt",{enumerable:!0,get:function(){return vu.KeywordCxt}});var st=P();Object.defineProperty(V,"_",{enumerable:!0,get:function(){return st._}});Object.defineProperty(V,"str",{enumerable:!0,get:function(){return st.str}});Object.defineProperty(V,"stringify",{enumerable:!0,get:function(){return st.stringify}});Object.defineProperty(V,"nil",{enumerable:!0,get:function(){return st.nil}});Object.defineProperty(V,"Name",{enumerable:!0,get:function(){return st.Name}});Object.defineProperty(V,"CodeGen",{enumerable:!0,get:function(){return st.CodeGen}});var $u=cr(),ni=Rt(),bu=as(),Ot=dr(),Pu=P(),Tt=vt(),mr=_t(),Ms=C(),ei=Mo(),Ru=Zo(),oi=(t,e)=>new RegExp(t,e);oi.code="new RegExp";var Su=["removeAdditional","useDefaults","coerceTypes"],Ou=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),Tu={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},Au={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},ti=200;function Nu(t){var e,r,s,n,o,i,a,c,d,l,u,g,m,p,f,h,w,T,S,G,v,de,ge,Ir,Mr;let lt=t.strict,Gr=(e=t.code)===null||e===void 0?void 0:e.optimize,Tn=Gr===!0||Gr===void 0?1:Gr||0,An=(s=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&s!==void 0?s:oi,Ya=(n=t.uriResolver)!==null&&n!==void 0?n:Ru.default;return{strictSchema:(i=(o=t.strictSchema)!==null&&o!==void 0?o:lt)!==null&&i!==void 0?i:!0,strictNumbers:(c=(a=t.strictNumbers)!==null&&a!==void 0?a:lt)!==null&&c!==void 0?c:!0,strictTypes:(l=(d=t.strictTypes)!==null&&d!==void 0?d:lt)!==null&&l!==void 0?l:"log",strictTuples:(g=(u=t.strictTuples)!==null&&u!==void 0?u:lt)!==null&&g!==void 0?g:"log",strictRequired:(p=(m=t.strictRequired)!==null&&m!==void 0?m:lt)!==null&&p!==void 0?p:!1,code:t.code?{...t.code,optimize:Tn,regExp:An}:{optimize:Tn,regExp:An},loopRequired:(f=t.loopRequired)!==null&&f!==void 0?f:ti,loopEnum:(h=t.loopEnum)!==null&&h!==void 0?h:ti,meta:(w=t.meta)!==null&&w!==void 0?w:!0,messages:(T=t.messages)!==null&&T!==void 0?T:!0,inlineRefs:(S=t.inlineRefs)!==null&&S!==void 0?S:!0,schemaId:(G=t.schemaId)!==null&&G!==void 0?G:"$id",addUsedSchema:(v=t.addUsedSchema)!==null&&v!==void 0?v:!0,validateSchema:(de=t.validateSchema)!==null&&de!==void 0?de:!0,validateFormats:(ge=t.validateFormats)!==null&&ge!==void 0?ge:!0,unicodeRegExp:(Ir=t.unicodeRegExp)!==null&&Ir!==void 0?Ir:!0,int32range:(Mr=t.int32range)!==null&&Mr!==void 0?Mr:!0,uriResolver:Ya}}var At=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...Nu(e)};let{es5:r,lines:s}=this.opts.code;this.scope=new Pu.ValueScope({scope:{},prefixes:Ou,es5:r,lines:s}),this.logger=xu(e.logger);let n=e.validateFormats;e.validateFormats=!1,this.RULES=(0,bu.getRules)(),ri.call(this,Tu,e,"NOT SUPPORTED"),ri.call(this,Au,e,"DEPRECATED","warn"),this._metaOpts=Gu.call(this),e.formats&&Iu.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&Mu.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),Cu.call(this),e.validateFormats=n}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:s}=this.opts,n=ei;s==="id"&&(n={...ei},n.id=n.$id,delete n.$id),r&&e&&this.addMetaSchema(n,n[s],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let s;if(typeof e=="string"){if(s=this.getSchema(e),!s)throw new Error(`no schema with key or ref "${e}"`)}else s=this.compile(e);let n=s(r);return"$async"in s||(this.errors=s.errors),n}compile(e,r){let s=this._addSchema(e,r);return s.validate||this._compileSchemaEnv(s)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:s}=this.opts;return n.call(this,e,r);async function n(l,u){await o.call(this,l.$schema);let g=this._addSchema(l,u);return g.validate||i.call(this,g)}async function o(l){l&&!this.getSchema(l)&&await n.call(this,{$ref:l},!0)}async function i(l){try{return this._compileSchemaEnv(l)}catch(u){if(!(u instanceof ni.default))throw u;return a.call(this,u),await c.call(this,u.missingSchema),i.call(this,l)}}function a({missingSchema:l,missingRef:u}){if(this.refs[l])throw new Error(`AnySchema ${l} is loaded but ${u} cannot be resolved`)}async function c(l){let u=await d.call(this,l);this.refs[l]||await o.call(this,u.$schema),this.refs[l]||this.addSchema(u,l,r)}async function d(l){let u=this._loading[l];if(u)return u;try{return await(this._loading[l]=s(l))}finally{delete this._loading[l]}}}addSchema(e,r,s,n=this.opts.validateSchema){if(Array.isArray(e)){for(let i of e)this.addSchema(i,void 0,s,n);return this}let o;if(typeof e=="object"){let{schemaId:i}=this.opts;if(o=e[i],o!==void 0&&typeof o!="string")throw new Error(`schema ${i} must be string`)}return r=(0,Tt.normalizeId)(r||o),this._checkUnique(r),this.schemas[r]=this._addSchema(e,s,r,n,!0),this}addMetaSchema(e,r,s=this.opts.validateSchema){return this.addSchema(e,r,!0,s),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let s;if(s=e.$schema,s!==void 0&&typeof s!="string")throw new Error("$schema must be a string");if(s=s||this.opts.defaultMeta||this.defaultMeta(),!s)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let n=this.validate(s,e);if(!n&&r){let o="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(o);else throw new Error(o)}return n}getSchema(e){let r;for(;typeof(r=si.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:s}=this.opts,n=new Ot.SchemaEnv({schema:{},schemaId:s});if(r=Ot.resolveSchema.call(this,n,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=si.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let s=e[this.opts.schemaId];return s&&(s=(0,Tt.normalizeId)(s),delete this.schemas[s],delete this.refs[s]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let s;if(typeof e=="string")s=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=s);else if(typeof e=="object"&&r===void 0){if(r=e,s=r.keyword,Array.isArray(s)&&!s.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Uu.call(this,s,r),!r)return(0,Ms.eachItem)(s,o=>Is.call(this,o)),this;qu.call(this,r);let n={...r,type:(0,mr.getJSONTypes)(r.type),schemaType:(0,mr.getJSONTypes)(r.schemaType)};return(0,Ms.eachItem)(s,n.type.length===0?o=>Is.call(this,o,n):o=>n.type.forEach(i=>Is.call(this,o,n,i))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let s of r.rules){let n=s.rules.findIndex(o=>o.keyword===e);n>=0&&s.rules.splice(n,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:s="data"}={}){return!e||e.length===0?"No errors":e.map(n=>`${s}${n.instancePath} ${n.message}`).reduce((n,o)=>n+r+o)}$dataMetaSchema(e,r){let s=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let n of r){let o=n.split("/").slice(1),i=e;for(let a of o)i=i[a];for(let a in s){let c=s[a];if(typeof c!="object")continue;let{$data:d}=c.definition,l=i[a];d&&l&&(i[a]=ii(l))}}return e}_removeAllSchemas(e,r){for(let s in e){let n=e[s];(!r||r.test(s))&&(typeof n=="string"?delete e[s]:n&&!n.meta&&(this._cache.delete(n.schema),delete e[s]))}}_addSchema(e,r,s,n=this.opts.validateSchema,o=this.opts.addUsedSchema){let i,{schemaId:a}=this.opts;if(typeof e=="object")i=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let c=this._cache.get(e);if(c!==void 0)return c;s=(0,Tt.normalizeId)(i||s);let d=Tt.getSchemaRefs.call(this,e,s);return c=new Ot.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:s,localRefs:d}),this._cache.set(c.schema,c),o&&!s.startsWith("#")&&(s&&this._checkUnique(s),this.refs[s]=c),n&&this.validateSchema(e,!0),c}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):Ot.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{Ot.compileSchema.call(this,e)}finally{this.opts=r}}};At.ValidationError=$u.default;At.MissingRefError=ni.default;V.default=At;function ri(t,e,r,s="error"){for(let n in t){let o=n;o in e&&this.logger[s](`${r}: option ${n}. ${t[o]}`)}}function si(t){return t=(0,Tt.normalizeId)(t),this.schemas[t]||this.refs[t]}function Cu(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function Iu(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function Mu(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function Gu(){let t={...this.opts};for(let e of Su)delete t[e];return t}var ku={log(){},warn(){},error(){}};function xu(t){if(t===!1)return ku;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var ju=/^[a-z_$][a-z0-9_$:-]*$/i;function Uu(t,e){let{RULES:r}=this;if((0,Ms.eachItem)(t,s=>{if(r.keywords[s])throw new Error(`Keyword ${s} is already defined`);if(!ju.test(s))throw new Error(`Keyword ${s} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function Is(t,e,r){var s;let n=e?.post;if(r&&n)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:o}=this,i=n?o.post:o.rules.find(({type:c})=>c===r);if(i||(i={type:r,rules:[]},o.rules.push(i)),o.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,mr.getJSONTypes)(e.type),schemaType:(0,mr.getJSONTypes)(e.schemaType)}};e.before?Du.call(this,i,a,e.before):i.rules.push(a),o.all[t]=a,(s=e.implements)===null||s===void 0||s.forEach(c=>this.addKeyword(c))}function Du(t,e,r){let s=t.rules.findIndex(n=>n.keyword===r);s>=0?t.rules.splice(s,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function qu(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=ii(e)),t.validateSchema=this.compile(e,!0))}var Vu={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ii(t){return{anyOf:[t,Vu]}}});var ci=y(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});var Fu={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Gs.default=Fu});var fi=y(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.callRef=De.getValidate=void 0;var Lu=Rt(),li=re(),ee=P(),nt=_e(),di=dr(),hr=C(),Bu={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:s}=t,{baseId:n,schemaEnv:o,validateName:i,opts:a,self:c}=s,{root:d}=o;if((r==="#"||r==="#/")&&n===d.baseId)return u();let l=di.resolveRef.call(c,d,n,r);if(l===void 0)throw new Lu.default(s.opts.uriResolver,n,r);if(l instanceof di.SchemaEnv)return g(l);return m(l);function u(){if(o===d)return gr(t,i,o,o.$async);let p=e.scopeValue("root",{ref:d});return gr(t,(0,ee._)`${p}.validate`,d,d.$async)}function g(p){let f=ui(t,p);gr(t,f,p,p.$async)}function m(p){let f=e.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,ee.stringify)(p)}:{ref:p}),h=e.name("valid"),w=t.subschema({schema:p,dataTypes:[],schemaPath:ee.nil,topSchemaRef:f,errSchemaPath:r},h);t.mergeEvaluated(w),t.ok(h)}}};function ui(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,ee._)`${r.scopeValue("wrapper",{ref:e})}.validate`}De.getValidate=ui;function gr(t,e,r,s){let{gen:n,it:o}=t,{allErrors:i,schemaEnv:a,opts:c}=o,d=c.passContext?nt.default.this:ee.nil;s?l():u();function l(){if(!a.$async)throw new Error("async schema referenced by sync schema");let p=n.let("valid");n.try(()=>{n.code((0,ee._)`await ${(0,li.callValidateCode)(t,e,d)}`),m(e),i||n.assign(p,!0)},f=>{n.if((0,ee._)`!(${f} instanceof ${o.ValidationError})`,()=>n.throw(f)),g(f),i||n.assign(p,!1)}),t.ok(p)}function u(){t.result((0,li.callValidateCode)(t,e,d),()=>m(e),()=>g(e))}function g(p){let f=(0,ee._)`${p}.errors`;n.assign(nt.default.vErrors,(0,ee._)`${nt.default.vErrors} === null ? ${f} : ${nt.default.vErrors}.concat(${f})`),n.assign(nt.default.errors,(0,ee._)`${nt.default.vErrors}.length`)}function m(p){var f;if(!o.opts.unevaluated)return;let h=(f=r?.validate)===null||f===void 0?void 0:f.evaluated;if(o.props!==!0)if(h&&!h.dynamicProps)h.props!==void 0&&(o.props=hr.mergeEvaluated.props(n,h.props,o.props));else{let w=n.var("props",(0,ee._)`${p}.evaluated.props`);o.props=hr.mergeEvaluated.props(n,w,o.props,ee.Name)}if(o.items!==!0)if(h&&!h.dynamicItems)h.items!==void 0&&(o.items=hr.mergeEvaluated.items(n,h.items,o.items));else{let w=n.var("items",(0,ee._)`${p}.evaluated.items`);o.items=hr.mergeEvaluated.items(n,w,o.items,ee.Name)}}}De.callRef=gr;De.default=Bu});var pi=y(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});var Ku=ci(),Hu=fi(),zu=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Ku.default,Hu.default];ks.default=zu});var mi=y(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});var yr=P(),Ce=yr.operators,wr={maximum:{okStr:"<=",ok:Ce.LTE,fail:Ce.GT},minimum:{okStr:">=",ok:Ce.GTE,fail:Ce.LT},exclusiveMaximum:{okStr:"<",ok:Ce.LT,fail:Ce.GTE},exclusiveMinimum:{okStr:">",ok:Ce.GT,fail:Ce.LTE}},Wu={message:({keyword:t,schemaCode:e})=>(0,yr.str)`must be ${wr[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,yr._)`{comparison: ${wr[t].okStr}, limit: ${e}}`},Ju={keyword:Object.keys(wr),type:"number",schemaType:"number",$data:!0,error:Wu,code(t){let{keyword:e,data:r,schemaCode:s}=t;t.fail$data((0,yr._)`${r} ${wr[e].fail} ${s} || isNaN(${r})`)}};xs.default=Ju});var hi=y(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});var Nt=P(),Qu={message:({schemaCode:t})=>(0,Nt.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Nt._)`{multipleOf: ${t}}`},Yu={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Qu,code(t){let{gen:e,data:r,schemaCode:s,it:n}=t,o=n.opts.multipleOfPrecision,i=e.let("res"),a=o?(0,Nt._)`Math.abs(Math.round(${i}) - ${i}) > 1e-${o}`:(0,Nt._)`${i} !== parseInt(${i})`;t.fail$data((0,Nt._)`(${s} === 0 || (${i} = ${r}/${s}, ${a}))`)}};js.default=Yu});var yi=y(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});function gi(t){let e=t.length,r=0,s=0,n;for(;s<e;)r++,n=t.charCodeAt(s++),n>=55296&&n<=56319&&s<e&&(n=t.charCodeAt(s),(n&64512)===56320&&s++);return r}Us.default=gi;gi.code='require("ajv/dist/runtime/ucs2length").default'});var wi=y(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});var qe=P(),Xu=C(),Zu=yi(),ef={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,qe.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,qe._)`{limit: ${t}}`},tf={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:ef,code(t){let{keyword:e,data:r,schemaCode:s,it:n}=t,o=e==="maxLength"?qe.operators.GT:qe.operators.LT,i=n.opts.unicode===!1?(0,qe._)`${r}.length`:(0,qe._)`${(0,Xu.useFunc)(t.gen,Zu.default)}(${r})`;t.fail$data((0,qe._)`${i} ${o} ${s}`)}};Ds.default=tf});var Ei=y(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});var rf=re(),Er=P(),sf={message:({schemaCode:t})=>(0,Er.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,Er._)`{pattern: ${t}}`},nf={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:sf,code(t){let{data:e,$data:r,schema:s,schemaCode:n,it:o}=t,i=o.opts.unicodeRegExp?"u":"",a=r?(0,Er._)`(new RegExp(${n}, ${i}))`:(0,rf.usePattern)(t,s);t.fail$data((0,Er._)`!${a}.test(${e})`)}};qs.default=nf});var _i=y(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});var Ct=P(),of={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,Ct.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,Ct._)`{limit: ${t}}`},af={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:of,code(t){let{keyword:e,data:r,schemaCode:s}=t,n=e==="maxProperties"?Ct.operators.GT:Ct.operators.LT;t.fail$data((0,Ct._)`Object.keys(${r}).length ${n} ${s}`)}};Vs.default=af});var vi=y(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});var It=re(),Mt=P(),cf=C(),lf={message:({params:{missingProperty:t}})=>(0,Mt.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,Mt._)`{missingProperty: ${t}}`},df={keyword:"required",type:"object",schemaType:"array",$data:!0,error:lf,code(t){let{gen:e,schema:r,schemaCode:s,data:n,$data:o,it:i}=t,{opts:a}=i;if(!o&&r.length===0)return;let c=r.length>=a.loopRequired;if(i.allErrors?d():l(),a.strictRequired){let m=t.parentSchema.properties,{definedProperties:p}=t.it;for(let f of r)if(m?.[f]===void 0&&!p.has(f)){let h=i.schemaEnv.baseId+i.errSchemaPath,w=`required property "${f}" is not defined at "${h}" (strictRequired)`;(0,cf.checkStrictMode)(i,w,i.opts.strictRequired)}}function d(){if(c||o)t.block$data(Mt.nil,u);else for(let m of r)(0,It.checkReportMissingProp)(t,m)}function l(){let m=e.let("missing");if(c||o){let p=e.let("valid",!0);t.block$data(p,()=>g(m,p)),t.ok(p)}else e.if((0,It.checkMissingProp)(t,r,m)),(0,It.reportMissingProp)(t,m),e.else()}function u(){e.forOf("prop",s,m=>{t.setParams({missingProperty:m}),e.if((0,It.noPropertyInData)(e,n,m,a.ownProperties),()=>t.error())})}function g(m,p){t.setParams({missingProperty:m}),e.forOf(m,s,()=>{e.assign(p,(0,It.propertyInData)(e,n,m,a.ownProperties)),e.if((0,Mt.not)(p),()=>{t.error(),e.break()})},Mt.nil)}}};Fs.default=df});var $i=y(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});var Gt=P(),uf={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,Gt.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,Gt._)`{limit: ${t}}`},ff={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:uf,code(t){let{keyword:e,data:r,schemaCode:s}=t,n=e==="maxItems"?Gt.operators.GT:Gt.operators.LT;t.fail$data((0,Gt._)`${r}.length ${n} ${s}`)}};Ls.default=ff});var _r=y(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});var bi=hs();bi.code='require("ajv/dist/runtime/equal").default';Bs.default=bi});var Pi=y(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});var Ks=_t(),F=P(),pf=C(),mf=_r(),hf={message:({params:{i:t,j:e}})=>(0,F.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,F._)`{i: ${t}, j: ${e}}`},gf={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:hf,code(t){let{gen:e,data:r,$data:s,schema:n,parentSchema:o,schemaCode:i,it:a}=t;if(!s&&!n)return;let c=e.let("valid"),d=o.items?(0,Ks.getSchemaTypes)(o.items):[];t.block$data(c,l,(0,F._)`${i} === false`),t.ok(c);function l(){let p=e.let("i",(0,F._)`${r}.length`),f=e.let("j");t.setParams({i:p,j:f}),e.assign(c,!0),e.if((0,F._)`${p} > 1`,()=>(u()?g:m)(p,f))}function u(){return d.length>0&&!d.some(p=>p==="object"||p==="array")}function g(p,f){let h=e.name("item"),w=(0,Ks.checkDataTypes)(d,h,a.opts.strictNumbers,Ks.DataType.Wrong),T=e.const("indices",(0,F._)`{}`);e.for((0,F._)`;${p}--;`,()=>{e.let(h,(0,F._)`${r}[${p}]`),e.if(w,(0,F._)`continue`),d.length>1&&e.if((0,F._)`typeof ${h} == "string"`,(0,F._)`${h} += "_"`),e.if((0,F._)`typeof ${T}[${h}] == "number"`,()=>{e.assign(f,(0,F._)`${T}[${h}]`),t.error(),e.assign(c,!1).break()}).code((0,F._)`${T}[${h}] = ${p}`)})}function m(p,f){let h=(0,pf.useFunc)(e,mf.default),w=e.name("outer");e.label(w).for((0,F._)`;${p}--;`,()=>e.for((0,F._)`${f} = ${p}; ${f}--;`,()=>e.if((0,F._)`${h}(${r}[${p}], ${r}[${f}])`,()=>{t.error(),e.assign(c,!1).break(w)})))}}};Hs.default=gf});var Ri=y(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});var zs=P(),yf=C(),wf=_r(),Ef={message:"must be equal to constant",params:({schemaCode:t})=>(0,zs._)`{allowedValue: ${t}}`},_f={keyword:"const",$data:!0,error:Ef,code(t){let{gen:e,data:r,$data:s,schemaCode:n,schema:o}=t;s||o&&typeof o=="object"?t.fail$data((0,zs._)`!${(0,yf.useFunc)(e,wf.default)}(${r}, ${n})`):t.fail((0,zs._)`${o} !== ${r}`)}};Ws.default=_f});var Si=y(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});var kt=P(),vf=C(),$f=_r(),bf={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,kt._)`{allowedValues: ${t}}`},Pf={keyword:"enum",schemaType:"array",$data:!0,error:bf,code(t){let{gen:e,data:r,$data:s,schema:n,schemaCode:o,it:i}=t;if(!s&&n.length===0)throw new Error("enum must have non-empty array");let a=n.length>=i.opts.loopEnum,c,d=()=>c??(c=(0,vf.useFunc)(e,$f.default)),l;if(a||s)l=e.let("valid"),t.block$data(l,u);else{if(!Array.isArray(n))throw new Error("ajv implementation error");let m=e.const("vSchema",o);l=(0,kt.or)(...n.map((p,f)=>g(m,f)))}t.pass(l);function u(){e.assign(l,!1),e.forOf("v",o,m=>e.if((0,kt._)`${d()}(${r}, ${m})`,()=>e.assign(l,!0).break()))}function g(m,p){let f=n[p];return typeof f=="object"&&f!==null?(0,kt._)`${d()}(${r}, ${m}[${p}])`:(0,kt._)`${r} === ${f}`}}};Js.default=Pf});var Oi=y(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});var Rf=mi(),Sf=hi(),Of=wi(),Tf=Ei(),Af=_i(),Nf=vi(),Cf=$i(),If=Pi(),Mf=Ri(),Gf=Si(),kf=[Rf.default,Sf.default,Of.default,Tf.default,Af.default,Nf.default,Cf.default,If.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Mf.default,Gf.default];Qs.default=kf});var Xs=y(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.validateAdditionalItems=void 0;var Ve=P(),Ys=C(),xf={message:({params:{len:t}})=>(0,Ve.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Ve._)`{limit: ${t}}`},jf={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:xf,code(t){let{parentSchema:e,it:r}=t,{items:s}=e;if(!Array.isArray(s)){(0,Ys.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Ti(t,s)}};function Ti(t,e){let{gen:r,schema:s,data:n,keyword:o,it:i}=t;i.items=!0;let a=r.const("len",(0,Ve._)`${n}.length`);if(s===!1)t.setParams({len:e.length}),t.pass((0,Ve._)`${a} <= ${e.length}`);else if(typeof s=="object"&&!(0,Ys.alwaysValidSchema)(i,s)){let d=r.var("valid",(0,Ve._)`${a} <= ${e.length}`);r.if((0,Ve.not)(d),()=>c(d)),t.ok(d)}function c(d){r.forRange("i",e.length,a,l=>{t.subschema({keyword:o,dataProp:l,dataPropType:Ys.Type.Num},d),i.allErrors||r.if((0,Ve.not)(d),()=>r.break())})}}xt.validateAdditionalItems=Ti;xt.default=jf});var Zs=y(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.validateTuple=void 0;var Ai=P(),vr=C(),Uf=re(),Df={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return Ni(t,"additionalItems",e);r.items=!0,!(0,vr.alwaysValidSchema)(r,e)&&t.ok((0,Uf.validateArray)(t))}};function Ni(t,e,r=t.schema){let{gen:s,parentSchema:n,data:o,keyword:i,it:a}=t;l(n),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=vr.mergeEvaluated.items(s,r.length,a.items));let c=s.name("valid"),d=s.const("len",(0,Ai._)`${o}.length`);r.forEach((u,g)=>{(0,vr.alwaysValidSchema)(a,u)||(s.if((0,Ai._)`${d} > ${g}`,()=>t.subschema({keyword:i,schemaProp:g,dataProp:g},c)),t.ok(c))});function l(u){let{opts:g,errSchemaPath:m}=a,p=r.length,f=p===u.minItems&&(p===u.maxItems||u[e]===!1);if(g.strictTuples&&!f){let h=`"${i}" is ${p}-tuple, but minItems or maxItems/${e} are not specified or different at path "${m}"`;(0,vr.checkStrictMode)(a,h,g.strictTuples)}}}jt.validateTuple=Ni;jt.default=Df});var Ci=y(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});var qf=Zs(),Vf={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,qf.validateTuple)(t,"items")};en.default=Vf});var Mi=y(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});var Ii=P(),Ff=C(),Lf=re(),Bf=Xs(),Kf={message:({params:{len:t}})=>(0,Ii.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Ii._)`{limit: ${t}}`},Hf={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Kf,code(t){let{schema:e,parentSchema:r,it:s}=t,{prefixItems:n}=r;s.items=!0,!(0,Ff.alwaysValidSchema)(s,e)&&(n?(0,Bf.validateAdditionalItems)(t,n):t.ok((0,Lf.validateArray)(t)))}};tn.default=Hf});var Gi=y(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});var ne=P(),$r=C(),zf={message:({params:{min:t,max:e}})=>e===void 0?(0,ne.str)`must contain at least ${t} valid item(s)`:(0,ne.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,ne._)`{minContains: ${t}}`:(0,ne._)`{minContains: ${t}, maxContains: ${e}}`},Wf={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:zf,code(t){let{gen:e,schema:r,parentSchema:s,data:n,it:o}=t,i,a,{minContains:c,maxContains:d}=s;o.opts.next?(i=c===void 0?1:c,a=d):i=1;let l=e.const("len",(0,ne._)`${n}.length`);if(t.setParams({min:i,max:a}),a===void 0&&i===0){(0,$r.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&i>a){(0,$r.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,$r.alwaysValidSchema)(o,r)){let f=(0,ne._)`${l} >= ${i}`;a!==void 0&&(f=(0,ne._)`${f} && ${l} <= ${a}`),t.pass(f);return}o.items=!0;let u=e.name("valid");a===void 0&&i===1?m(u,()=>e.if(u,()=>e.break())):i===0?(e.let(u,!0),a!==void 0&&e.if((0,ne._)`${n}.length > 0`,g)):(e.let(u,!1),g()),t.result(u,()=>t.reset());function g(){let f=e.name("_valid"),h=e.let("count",0);m(f,()=>e.if(f,()=>p(h)))}function m(f,h){e.forRange("i",0,l,w=>{t.subschema({keyword:"contains",dataProp:w,dataPropType:$r.Type.Num,compositeRule:!0},f),h()})}function p(f){e.code((0,ne._)`${f}++`),a===void 0?e.if((0,ne._)`${f} >= ${i}`,()=>e.assign(u,!0).break()):(e.if((0,ne._)`${f} > ${a}`,()=>e.assign(u,!1).break()),i===1?e.assign(u,!0):e.if((0,ne._)`${f} >= ${i}`,()=>e.assign(u,!0)))}}};rn.default=Wf});var ji=y(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.validateSchemaDeps=he.validatePropertyDeps=he.error=void 0;var sn=P(),Jf=C(),Ut=re();he.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let s=e===1?"property":"properties";return(0,sn.str)`must have ${s} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:s}})=>(0,sn._)`{property: ${t},
    missingProperty: ${s},
    depsCount: ${e},
    deps: ${r}}`};var Qf={keyword:"dependencies",type:"object",schemaType:"object",error:he.error,code(t){let[e,r]=Yf(t);ki(t,e),xi(t,r)}};function Yf({schema:t}){let e={},r={};for(let s in t){if(s==="__proto__")continue;let n=Array.isArray(t[s])?e:r;n[s]=t[s]}return[e,r]}function ki(t,e=t.schema){let{gen:r,data:s,it:n}=t;if(Object.keys(e).length===0)return;let o=r.let("missing");for(let i in e){let a=e[i];if(a.length===0)continue;let c=(0,Ut.propertyInData)(r,s,i,n.opts.ownProperties);t.setParams({property:i,depsCount:a.length,deps:a.join(", ")}),n.allErrors?r.if(c,()=>{for(let d of a)(0,Ut.checkReportMissingProp)(t,d)}):(r.if((0,sn._)`${c} && (${(0,Ut.checkMissingProp)(t,a,o)})`),(0,Ut.reportMissingProp)(t,o),r.else())}}he.validatePropertyDeps=ki;function xi(t,e=t.schema){let{gen:r,data:s,keyword:n,it:o}=t,i=r.name("valid");for(let a in e)(0,Jf.alwaysValidSchema)(o,e[a])||(r.if((0,Ut.propertyInData)(r,s,a,o.opts.ownProperties),()=>{let c=t.subschema({keyword:n,schemaProp:a},i);t.mergeValidEvaluated(c,i)},()=>r.var(i,!0)),t.ok(i))}he.validateSchemaDeps=xi;he.default=Qf});var Di=y(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});var Ui=P(),Xf=C(),Zf={message:"property name must be valid",params:({params:t})=>(0,Ui._)`{propertyName: ${t.propertyName}}`},ep={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Zf,code(t){let{gen:e,schema:r,data:s,it:n}=t;if((0,Xf.alwaysValidSchema)(n,r))return;let o=e.name("valid");e.forIn("key",s,i=>{t.setParams({propertyName:i}),t.subschema({keyword:"propertyNames",data:i,dataTypes:["string"],propertyName:i,compositeRule:!0},o),e.if((0,Ui.not)(o),()=>{t.error(!0),n.allErrors||e.break()})}),t.ok(o)}};nn.default=ep});var an=y(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});var br=re(),le=P(),tp=_e(),Pr=C(),rp={message:"must NOT have additional properties",params:({params:t})=>(0,le._)`{additionalProperty: ${t.additionalProperty}}`},sp={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:rp,code(t){let{gen:e,schema:r,parentSchema:s,data:n,errsCount:o,it:i}=t;if(!o)throw new Error("ajv implementation error");let{allErrors:a,opts:c}=i;if(i.props=!0,c.removeAdditional!=="all"&&(0,Pr.alwaysValidSchema)(i,r))return;let d=(0,br.allSchemaProperties)(s.properties),l=(0,br.allSchemaProperties)(s.patternProperties);u(),t.ok((0,le._)`${o} === ${tp.default.errors}`);function u(){e.forIn("key",n,h=>{!d.length&&!l.length?p(h):e.if(g(h),()=>p(h))})}function g(h){let w;if(d.length>8){let T=(0,Pr.schemaRefOrVal)(i,s.properties,"properties");w=(0,br.isOwnProperty)(e,T,h)}else d.length?w=(0,le.or)(...d.map(T=>(0,le._)`${h} === ${T}`)):w=le.nil;return l.length&&(w=(0,le.or)(w,...l.map(T=>(0,le._)`${(0,br.usePattern)(t,T)}.test(${h})`))),(0,le.not)(w)}function m(h){e.code((0,le._)`delete ${n}[${h}]`)}function p(h){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){m(h);return}if(r===!1){t.setParams({additionalProperty:h}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,Pr.alwaysValidSchema)(i,r)){let w=e.name("valid");c.removeAdditional==="failing"?(f(h,w,!1),e.if((0,le.not)(w),()=>{t.reset(),m(h)})):(f(h,w),a||e.if((0,le.not)(w),()=>e.break()))}}function f(h,w,T){let S={keyword:"additionalProperties",dataProp:h,dataPropType:Pr.Type.Str};T===!1&&Object.assign(S,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(S,w)}}};on.default=sp});var Fi=y(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});var np=Pt(),qi=re(),cn=C(),Vi=an(),op={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:s,data:n,it:o}=t;o.opts.removeAdditional==="all"&&s.additionalProperties===void 0&&Vi.default.code(new np.KeywordCxt(o,Vi.default,"additionalProperties"));let i=(0,qi.allSchemaProperties)(r);for(let u of i)o.definedProperties.add(u);o.opts.unevaluated&&i.length&&o.props!==!0&&(o.props=cn.mergeEvaluated.props(e,(0,cn.toHash)(i),o.props));let a=i.filter(u=>!(0,cn.alwaysValidSchema)(o,r[u]));if(a.length===0)return;let c=e.name("valid");for(let u of a)d(u)?l(u):(e.if((0,qi.propertyInData)(e,n,u,o.opts.ownProperties)),l(u),o.allErrors||e.else().var(c,!0),e.endIf()),t.it.definedProperties.add(u),t.ok(c);function d(u){return o.opts.useDefaults&&!o.compositeRule&&r[u].default!==void 0}function l(u){t.subschema({keyword:"properties",schemaProp:u,dataProp:u},c)}}};ln.default=op});var Hi=y(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});var Li=re(),Rr=P(),Bi=C(),Ki=C(),ip={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:s,parentSchema:n,it:o}=t,{opts:i}=o,a=(0,Li.allSchemaProperties)(r),c=a.filter(f=>(0,Bi.alwaysValidSchema)(o,r[f]));if(a.length===0||c.length===a.length&&(!o.opts.unevaluated||o.props===!0))return;let d=i.strictSchema&&!i.allowMatchingProperties&&n.properties,l=e.name("valid");o.props!==!0&&!(o.props instanceof Rr.Name)&&(o.props=(0,Ki.evaluatedPropsToName)(e,o.props));let{props:u}=o;g();function g(){for(let f of a)d&&m(f),o.allErrors?p(f):(e.var(l,!0),p(f),e.if(l))}function m(f){for(let h in d)new RegExp(f).test(h)&&(0,Bi.checkStrictMode)(o,`property ${h} matches pattern ${f} (use allowMatchingProperties)`)}function p(f){e.forIn("key",s,h=>{e.if((0,Rr._)`${(0,Li.usePattern)(t,f)}.test(${h})`,()=>{let w=c.includes(f);w||t.subschema({keyword:"patternProperties",schemaProp:f,dataProp:h,dataPropType:Ki.Type.Str},l),o.opts.unevaluated&&u!==!0?e.assign((0,Rr._)`${u}[${h}]`,!0):!w&&!o.allErrors&&e.if((0,Rr.not)(l),()=>e.break())})})}}};dn.default=ip});var zi=y(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});var ap=C(),cp={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:s}=t;if((0,ap.alwaysValidSchema)(s,r)){t.fail();return}let n=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},n),t.failResult(n,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};un.default=cp});var Wi=y(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});var lp=re(),dp={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:lp.validateUnion,error:{message:"must match a schema in anyOf"}};fn.default=dp});var Ji=y(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});var Sr=P(),up=C(),fp={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,Sr._)`{passingSchemas: ${t.passing}}`},pp={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:fp,code(t){let{gen:e,schema:r,parentSchema:s,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(n.opts.discriminator&&s.discriminator)return;let o=r,i=e.let("valid",!1),a=e.let("passing",null),c=e.name("_valid");t.setParams({passing:a}),e.block(d),t.result(i,()=>t.reset(),()=>t.error(!0));function d(){o.forEach((l,u)=>{let g;(0,up.alwaysValidSchema)(n,l)?e.var(c,!0):g=t.subschema({keyword:"oneOf",schemaProp:u,compositeRule:!0},c),u>0&&e.if((0,Sr._)`${c} && ${i}`).assign(i,!1).assign(a,(0,Sr._)`[${a}, ${u}]`).else(),e.if(c,()=>{e.assign(i,!0),e.assign(a,u),g&&t.mergeEvaluated(g,Sr.Name)})})}}};pn.default=pp});var Qi=y(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});var mp=C(),hp={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let n=e.name("valid");r.forEach((o,i)=>{if((0,mp.alwaysValidSchema)(s,o))return;let a=t.subschema({keyword:"allOf",schemaProp:i},n);t.ok(n),t.mergeEvaluated(a)})}};mn.default=hp});var Zi=y(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});var Or=P(),Xi=C(),gp={message:({params:t})=>(0,Or.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,Or._)`{failingKeyword: ${t.ifClause}}`},yp={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:gp,code(t){let{gen:e,parentSchema:r,it:s}=t;r.then===void 0&&r.else===void 0&&(0,Xi.checkStrictMode)(s,'"if" without "then" and "else" is ignored');let n=Yi(s,"then"),o=Yi(s,"else");if(!n&&!o)return;let i=e.let("valid",!0),a=e.name("_valid");if(c(),t.reset(),n&&o){let l=e.let("ifClause");t.setParams({ifClause:l}),e.if(a,d("then",l),d("else",l))}else n?e.if(a,d("then")):e.if((0,Or.not)(a),d("else"));t.pass(i,()=>t.error(!0));function c(){let l=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(l)}function d(l,u){return()=>{let g=t.subschema({keyword:l},a);e.assign(i,a),t.mergeValidEvaluated(g,i),u?e.assign(u,(0,Or._)`${l}`):t.setParams({ifClause:l})}}}};function Yi(t,e){let r=t.schema[e];return r!==void 0&&!(0,Xi.alwaysValidSchema)(t,r)}hn.default=yp});var ea=y(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});var wp=C(),Ep={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,wp.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};gn.default=Ep});var ta=y(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});var _p=Xs(),vp=Ci(),$p=Zs(),bp=Mi(),Pp=Gi(),Rp=ji(),Sp=Di(),Op=an(),Tp=Fi(),Ap=Hi(),Np=zi(),Cp=Wi(),Ip=Ji(),Mp=Qi(),Gp=Zi(),kp=ea();function xp(t=!1){let e=[Np.default,Cp.default,Ip.default,Mp.default,Gp.default,kp.default,Sp.default,Op.default,Rp.default,Tp.default,Ap.default];return t?e.push(vp.default,bp.default):e.push(_p.default,$p.default),e.push(Pp.default),e}yn.default=xp});var ra=y(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});var D=P(),jp={message:({schemaCode:t})=>(0,D.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,D._)`{format: ${t}}`},Up={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:jp,code(t,e){let{gen:r,data:s,$data:n,schema:o,schemaCode:i,it:a}=t,{opts:c,errSchemaPath:d,schemaEnv:l,self:u}=a;if(!c.validateFormats)return;n?g():m();function g(){let p=r.scopeValue("formats",{ref:u.formats,code:c.code.formats}),f=r.const("fDef",(0,D._)`${p}[${i}]`),h=r.let("fType"),w=r.let("format");r.if((0,D._)`typeof ${f} == "object" && !(${f} instanceof RegExp)`,()=>r.assign(h,(0,D._)`${f}.type || "string"`).assign(w,(0,D._)`${f}.validate`),()=>r.assign(h,(0,D._)`"string"`).assign(w,f)),t.fail$data((0,D.or)(T(),S()));function T(){return c.strictSchema===!1?D.nil:(0,D._)`${i} && !${w}`}function S(){let G=l.$async?(0,D._)`(${f}.async ? await ${w}(${s}) : ${w}(${s}))`:(0,D._)`${w}(${s})`,v=(0,D._)`(typeof ${w} == "function" ? ${G} : ${w}.test(${s}))`;return(0,D._)`${w} && ${w} !== true && ${h} === ${e} && !${v}`}}function m(){let p=u.formats[o];if(!p){T();return}if(p===!0)return;let[f,h,w]=S(p);f===e&&t.pass(G());function T(){if(c.strictSchema===!1){u.logger.warn(v());return}throw new Error(v());function v(){return`unknown format "${o}" ignored in schema at path "${d}"`}}function S(v){let de=v instanceof RegExp?(0,D.regexpCode)(v):c.code.formats?(0,D._)`${c.code.formats}${(0,D.getProperty)(o)}`:void 0,ge=r.scopeValue("formats",{key:o,ref:v,code:de});return typeof v=="object"&&!(v instanceof RegExp)?[v.type||"string",v.validate,(0,D._)`${ge}.validate`]:["string",v,ge]}function G(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!l.$async)throw new Error("async format in sync schema");return(0,D._)`await ${w}(${s})`}return typeof h=="function"?(0,D._)`${w}(${s})`:(0,D._)`${w}.test(${s})`}}}};wn.default=Up});var sa=y(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});var Dp=ra(),qp=[Dp.default];En.default=qp});var na=y(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});ot.contentVocabulary=ot.metadataVocabulary=void 0;ot.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];ot.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var ia=y(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});var Vp=pi(),Fp=Oi(),Lp=ta(),Bp=sa(),oa=na(),Kp=[Vp.default,Fp.default,(0,Lp.default)(),Bp.default,oa.metadataVocabulary,oa.contentVocabulary];_n.default=Kp});var ca=y(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.DiscrError=void 0;var aa;(function(t){t.Tag="tag",t.Mapping="mapping"})(aa||(Tr.DiscrError=aa={}))});var da=y($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});var it=P(),vn=ca(),la=dr(),Hp=Rt(),zp=C(),Wp={message:({params:{discrError:t,tagName:e}})=>t===vn.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,it._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},Jp={keyword:"discriminator",type:"object",schemaType:"object",error:Wp,code(t){let{gen:e,data:r,schema:s,parentSchema:n,it:o}=t,{oneOf:i}=n;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=s.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(s.mapping)throw new Error("discriminator: mapping is not supported");if(!i)throw new Error("discriminator: requires oneOf keyword");let c=e.let("valid",!1),d=e.const("tag",(0,it._)`${r}${(0,it.getProperty)(a)}`);e.if((0,it._)`typeof ${d} == "string"`,()=>l(),()=>t.error(!1,{discrError:vn.DiscrError.Tag,tag:d,tagName:a})),t.ok(c);function l(){let m=g();e.if(!1);for(let p in m)e.elseIf((0,it._)`${d} === ${p}`),e.assign(c,u(m[p]));e.else(),t.error(!1,{discrError:vn.DiscrError.Mapping,tag:d,tagName:a}),e.endIf()}function u(m){let p=e.name("valid"),f=t.subschema({keyword:"oneOf",schemaProp:m},p);return t.mergeEvaluated(f,it.Name),p}function g(){var m;let p={},f=w(n),h=!0;for(let G=0;G<i.length;G++){let v=i[G];if(v?.$ref&&!(0,zp.schemaHasRulesButRef)(v,o.self.RULES)){let ge=v.$ref;if(v=la.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,ge),v instanceof la.SchemaEnv&&(v=v.schema),v===void 0)throw new Hp.default(o.opts.uriResolver,o.baseId,ge)}let de=(m=v?.properties)===null||m===void 0?void 0:m[a];if(typeof de!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);h=h&&(f||w(v)),T(de,G)}if(!h)throw new Error(`discriminator: "${a}" must be required`);return p;function w({required:G}){return Array.isArray(G)&&G.includes(a)}function T(G,v){if(G.const)S(G.const,v);else if(G.enum)for(let de of G.enum)S(de,v);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function S(G,v){if(typeof G!="string"||G in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[G]=v}}}};$n.default=Jp});var ua=y((Kg,Qp)=>{Qp.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var pa=y((x,bn)=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});x.MissingRefError=x.ValidationError=x.CodeGen=x.Name=x.nil=x.stringify=x.str=x._=x.KeywordCxt=x.Ajv=void 0;var Yp=ai(),Xp=ia(),Zp=da(),fa=ua(),em=["/properties"],Ar="http://json-schema.org/draft-07/schema",at=class extends Yp.default{_addVocabularies(){super._addVocabularies(),Xp.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(Zp.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(fa,em):fa;this.addMetaSchema(e,Ar,!1),this.refs["http://json-schema.org/schema"]=Ar}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Ar)?Ar:void 0)}};x.Ajv=at;bn.exports=x=at;bn.exports.Ajv=at;Object.defineProperty(x,"__esModule",{value:!0});x.default=at;var tm=Pt();Object.defineProperty(x,"KeywordCxt",{enumerable:!0,get:function(){return tm.KeywordCxt}});var ct=P();Object.defineProperty(x,"_",{enumerable:!0,get:function(){return ct._}});Object.defineProperty(x,"str",{enumerable:!0,get:function(){return ct.str}});Object.defineProperty(x,"stringify",{enumerable:!0,get:function(){return ct.stringify}});Object.defineProperty(x,"nil",{enumerable:!0,get:function(){return ct.nil}});Object.defineProperty(x,"Name",{enumerable:!0,get:function(){return ct.Name}});Object.defineProperty(x,"CodeGen",{enumerable:!0,get:function(){return ct.CodeGen}});var rm=cr();Object.defineProperty(x,"ValidationError",{enumerable:!0,get:function(){return rm.default}});var sm=Rt();Object.defineProperty(x,"MissingRefError",{enumerable:!0,get:function(){return sm.default}})});var Sm={};sc(Sm,{handleHttp:()=>Rm});module.exports=oc(Sm);var j={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*","Access-Control-Allow-Credentials":"true"};var Ke=t=>({statusCode:403,headers:j,body:typeof t=="string"?t:JSON.stringify(t)});var oe=t=>({statusCode:400,headers:j,body:typeof t=="string"?t:JSON.stringify(t)});var Cn=t=>({statusCode:404,headers:j,body:t?JSON.stringify(t):"Not Found"}),In=t=>({statusCode:422,headers:j,body:t?JSON.stringify(t):"Unprocessable Entity"}),z=t=>t.statusCode?t:(console.error(t),{statusCode:500,headers:j,body:t.message});var q=oe({name:"InvalidEmailError",message:"The email must be valid and must not contain upper case letters or spaces."}),He=oe({name:"InvalidPasswordError",message:"The password must contain at least 8 characters and at least 1 number."}),kr=oe({name:"InvalidSrpAError",message:"The SRP A value must be a correctly calculated random hex hash based on big integers."}),xr=oe({name:"InvalidRefreshTokenError",message:"Refresh token is invalid."}),ze=oe({name:"VerificationCodeMismatchError",message:"The verification code does not match."}),We=Ke({name:"VerificationCodeExpiredError",message:"The verification code has exipired. Please retry via Reset Password Init (in case of pasword reset) or Register Verify Resend (in case of register)."}),U=Cn({name:"UserNotFoundError",message:"No user was found under the given email or user ID."}),W=Ke({name:"UserNotVerifiedError",message:"The user must be verified with Register Verify operation."}),Kt=Ke({name:"UserExistsError",message:"There is an existing user with the given email address."}),ic=oe({name:"UserMissingPasswordChallengeError",message:"The user must have an active require password change challenge."}),ye=Ke({name:"PasswordResetRequiredError",message:"The password must be reset."}),ac=In({name:"PasswordResetMissingParamError",message:"Either a verification code or the users old password are required."}),jr=Ke({name:"LoginVerifyError",message:"The password could not be verified. Please check password, userId, secretBlock, signature and timestamp."});var Pe=process.env.AWS_REGION||"",cc=process.env.ADMIN_EMAILS||"",Ur=process.env.CLOUDFRONT_ACCESS_KEY_ID||"",dt=process.env.CLOUDFRONT_NEW_ACCESS_KEY_PARAMETER||"",lc=process.env.INVITE_USER_VALIDATION_VIEW||"",dc=process.env.PULL_LAMBDA_NAME||"",Ht=process.env.MEDIA_DOMAIN||"",uc=process.env.CLIENT_ID||"",fc=process.env.USER_POOL_ID||"";var pc=require("crypto");var zt=(t=100)=>{let e=[],r=0,s=0,n=0,o=l=>{e[s]=l,s+=1},i=()=>{let l=e[r];return delete e[r],r+=1,l},a=()=>s-r,c=l=>{let u=new Promise((g,m)=>{o(async()=>{await l().then(g).catch(m)})});return d(),u},d=async()=>{if(n<t&&a()>0){let l=i();n+=1,l&&await l(),n-=1,d()}};return{queueLoad:c,length:a}};var _c=require("@aws-sdk/s3-request-presigner"),ue=require("@aws-sdk/client-s3");var Wt=require("@aws-sdk/client-ssm");var yc=new Wt.SSMClient({region:Pe,apiVersion:"latest"}),Jt=async(t,e=!1)=>{let r=new Wt.GetParameterCommand({Name:t,WithDecryption:e});try{let s=await yc.send(r);return s.Parameter?s.Parameter.Value:void 0}catch(s){console.error(s);return}};var wc=require("@aws-sdk/cloudfront-signer"),Ec=()=>{let t=null;return async()=>(t||(t=Jt(dt||"CLOUDFRONT_ACCESS_KEY",!0).catch(console.error)),t)},dh=Ec(),uh=1*24*60*60*1e3;var gh=new ue.S3Client({region:Pe,apiVersion:"latest"});var wh=process.env.BUCKET_LOGS||"",vc=process.env.BUCKET_EDGES||"",$c=process.env.BUCKET_REVERSE_EDGES||"",bc=process.env.BUCKET_NODES||"",Eh=process.env.BUCKET_OWNERS||"",Pc=process.env.BUCKET_RIGHTS_ADMIN||"",Rc=process.env.BUCKET_RIGHTS_READ||"",Sc=process.env.BUCKET_RIGHTS_WRITE||"",Oc=process.env.BUCKET_MEDIA||"";var{queueLoad:Ph}=zt(200);var Cc=require("@aws-sdk/cloudfront-signer");var om=nc(pa(),1);var Pn=t=>({type:"object",description:"Holds a query object that specifies how the graph should be queried from a given entry point. The entry point can be a node ID or an edge pointing do a set of nodes",additionalProperties:!1,properties:{as:{type:"string",description:"Defines an optional alias for the query object, which is currently ignored by the API."},role:{type:"string",description:"Defines the role which will be used to check the rights of the given node. If no role is given, the rights of the current user will be used."},reverse:{type:"boolean",description:"Defines if the edge should be read out in reverse"},edges:{type:"object",description:"Specifies a hashmap of edge types `fromType/toType` which should further be fetched from a given node or another parent edge query.",additionalProperties:t},include:{type:"object",description:'Specifies which data should be returned for the given node or for multiple nodes the given edge type (e.g. "todo-app/todo-list") is pointing to',additionalProperties:!1,example:{node:!0,metadata:!0,rights:!0,files:!1,edges:!1},properties:{node:{type:"boolean",description:"`true` when the node(s) data should be included in the response. `false` when they should explicitly be excluded from the response."},edges:{type:"boolean",description:"`true` when the edges should be included in the response. `false` when they should explicitly be excluded from the response."},metadata:{type:"boolean",description:"`true` when edge metadata data should be included in the response. `false` when they should explicitly be excluded from the response."},rights:{type:"boolean",description:"`true` when the node rights should be included in the response. `false` when they should explicitly be excluded from the response."},files:{type:"boolean",description:"`true` when the node files should be included in the response. `false` when they should explicitly be excluded from the response."}}}}}),dy={type:"object",additionalProperties:{$ref:"#/definitions/Query"},definitions:{Query:Pn({$ref:"#/definitions/Query"})}};var Rn=require("@aws-sdk/client-lambda");var py=new Rn.LambdaClient({region:Pe,apiVersion:"latest"}),my=new TextDecoder;var H=require("@aws-sdk/client-cognito-identity-provider");var yy=new H.CognitoIdentityProviderClient({region:Pe,apiVersion:"latest"});var ma={type:"object",properties:{email:{type:"string",description:"Email of the user to be invited."},id:{type:"string",description:"Id of the node the executing user wants to use for rights validation."},templateId:{type:"string",description:"Identifier of the email template that will be used to send credentials to the invited user."}},required:["email","id"]};var ha={summary:"Invite User",security:[{BearerAuth:[]}],description:"This operation creates a user with the given email provided they do not exist yet.",operationId:"inviteUser",tags:["Auth"],responses:{201:{description:"OK"},400:{description:"Bad Request"},401:{description:"Unauthorized"}},requestBody:{content:{"application/json":{schema:ma}}}};var ga={type:"object",properties:{email:{type:"string",description:"Email of the user to be logged in."},srpA:{type:"string",description:"Client SRP A value that will be used to initiate an SRP auth process."}},required:["email","srpA"]};var ya={summary:"Login Init",description:"This operation initiates a user login with a client generated SRP A value and returns challenge parameters needed to calculate the signature. The signature is then sent back to the server using the Login Verify operation.",operationId:"loginInit",tags:["Auth"],responses:{200:{description:"OK",content:{"application/json":{schema:{type:"object",properties:{poolname:{type:"string",description:"Name of server side pool that is used by the hash algorithm on the client side to calculate the signature."},userId:{type:"string",description:"Server side UUID identifying the user during the SRP process."},srpB:{type:"string",description:"Servers SRP B value that is used by the hash algorithm on the client side to calculate the signature."},secretBlock:{type:"string",description:"Secret block of the server. It must be sent along with the signature via the Login Verify operation in order for the server to remember the session. It is also used by the hash algorithm on the client side to calculate the signature."},salt:{type:"string",description:"Random salt that is used by the hash algorithm on the client side to calculate the signature."}}}}}},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[q,kr]}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[W,ye]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[U]}}}},500:{description:"Internal Server Error"}},requestBody:{content:{"application/json":{schema:ga}}}};var wa={type:"object",properties:{refreshToken:{type:"string",description:"The refresh token can be used instead to retrieve new access tokens."}},required:["refreshToken"]};var Ea={summary:"Login Refresh",description:"This operation executes a user login using a refresh token and returns all auth tokens in case of success.",operationId:"loginRefresh",tags:["Auth"],responses:{200:{description:"OK",content:{"application/json":{schema:{type:"object",properties:{accessToken:{type:"string",description:"OAuth access token. It can be used as Authorization header along with all Got API calls."},expiresIn:{type:"string",description:"The expiration period of the authentication result in seconds."},idToken:{type:"string",description:"OAuth ID token. Never send it along with any API calls."}}}}}},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[xr]}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[W,ye]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[U]}}}}},requestBody:{content:{"application/json":{schema:wa}}}};var _a={type:"object",properties:{userId:{type:"string",description:"ID of the user to be logged in. It is returned by the Login Init operation."},secretBlock:{type:"string",description:"Server secret block which was returned by the Login Init operation. It needs to be sent along with the signature in order for the server to remember the session."},signature:{type:"string",description:"Client signature that is used by the server to verify that the client knows the password."},timestamp:{type:"string",description:"Timestamp of the moment when the signature was calculated. It is part of the signature and is also used to verify it."}},required:["userId","secretBlock","signature","timestamp"]};var va={summary:"Login Verify",description:"This operation executes a user login using an SRP signature calculated by the client and returns all auth tokens in case of success.",operationId:"loginVerify",tags:["Auth"],responses:{200:{description:"OK",content:{"application/json":{schema:{type:"object",properties:{accessToken:{type:"string",description:"OAuth access token. It can be used as Authorization header along with all Got API calls."},expiresIn:{type:"number",description:"The expiration period of the authentication result in seconds."},idToken:{type:"string",description:"OAuth ID token. Never send it along with any API calls."},refreshToken:{type:"string",description:"The refresh token which can be stored in the session and be used to restore auth tokens via Login Refresh operation."}}}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[jr,W,ye]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[U]}}}}},requestBody:{content:{"application/json":{schema:_a}}}};var $a={type:"object",properties:{email:{type:"string",description:"Email of the user to be registered."},password:{type:"string",description:"Password of the user to be registered."}},required:["email","password"]};var ba={summary:"Register Init",description:"This operation registers a new user with the API in order for him to authenticate for all API operations.",operationId:"registerInit",tags:["Auth"],responses:{200:{description:"OK"},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[q,He]}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[Kt]}}}},500:{description:"Internal Server Error"}},requestBody:{content:{"application/json":{schema:$a}}}};var Pa={type:"object",properties:{email:{type:"string",description:"Email of the user to be registerVerifyd."},verificationCode:{type:"string",description:"Verification code that was sent to the given email."}},required:["email","verificationCode"]};var Ra={summary:"Register Verify",description:"This operation verifies a previously registered user with an verification code that was sent to his email after the register operation.",operationId:"registerVerify",tags:["Auth"],responses:{200:{description:"OK"},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[q,ze]}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[We]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[U]}}}},500:{description:"Internal Server Error"}},requestBody:{content:{"application/json":{schema:Pa}}}};var Sa={type:"object",properties:{email:{type:"string",description:"Email of the user which the verification code should be resent for."}},required:["email"]};var Oa={summary:"Register Verify Resend",description:"This operation resends the verification code for a previously registered but not yet verified user.",operationId:"registerVerifyResend",tags:["Auth"],responses:{200:{description:"OK"},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[q]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[U]}}}},500:{description:"Internal Server Error"}},requestBody:{content:{"application/json":{schema:Sa}}}};var Ta={type:"object",properties:{email:{type:"string",description:"Email of the user which wants to reset the password."}},required:["email"]};var Aa={summary:"Reset Password Init",description:"This operation initiates the forgot password procedure. An email with verification code is sent automatically to the users email.",operationId:"resetPasswordInit",tags:["Auth"],responses:{200:{description:"OK"},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[q]}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[W]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[U]}}}},500:{description:"Internal Server Error"}},requestBody:{content:{"application/json":{schema:Ta}}}};var Na={type:"object",properties:{email:{type:"string",description:"E-mail of the user for whom the password is to be reset."},password:{type:"string",description:"New password to be set."},oldPassword:{type:"string",description:"Current password of the user."},verificationCode:{type:"string",description:"Verification code that was sent to the email after Reset Password Init operation."}},required:["email","password"]};var Ca={summary:"Reset Password Verify",description:"This operation resets the password of the given user using the email address and verification code sent to this email address after calling the Reset Password Init operation.",operationId:"resetPasswordVerify",tags:["Auth"],responses:{200:{description:"OK"},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[q,He,ze]}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[We,W]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[U]}}}},500:{description:"Internal Server Error"}},requestBody:{content:{"application/json":{schema:Na}}}};var Ia=process.env.BUCKET_LOGS||"",Ma=process.env.BUCKET_EDGES||"",Ga=process.env.BUCKET_REVERSE_EDGES||"",ka=process.env.BUCKET_NODES||"",xa=process.env.BUCKET_OWNERS||"",ja=process.env.BUCKET_RIGHTS_ADMIN||"",Ua=process.env.BUCKET_RIGHTS_READ||"",Da=process.env.BUCKET_RIGHTS_WRITE||"",Cr=process.env.BUCKET_MEDIA||"";var{queueLoad:zw}=zt(200);var qa={type:"object",additionalProperties:!1,properties:{uploadId:{type:"string",description:""},partEtags:{type:"array",description:"",items:{type:"string"}}},required:["uploadId","partEtags"]};var Va={summary:"Complete Multipart Upload",security:[{BearerAuth:[]}],description:"This operation completes a previously executed multipart upload. Multipart uploads are initiated via push operations.",operationId:"completeUpload",tags:["Media"],responses:{204:{description:"Created."},400:{description:"Bad Request"},401:{description:"Unauthorized"}},requestBody:{content:{"application/json":{schema:qa}}}};var Fa={type:"object",properties:{id:{type:"string",description:"The id of the log to retrieve."},prefix:{type:"string",description:"The prefix of the log to retrieve."}}};var La={summary:"Get Push Logs",security:[{BearerAuth:[]}],description:"This operation either gets a specific log or lists all logs with a specific prefix.",operationId:"getLogs",responses:{200:{description:"OK"},400:{description:"Bad Request"},401:{description:"Unauthorized"}},requestBody:{content:{"application/json":{schema:Fa}}}};var Ba={summary:"Pull Graph",security:[{BearerAuth:[]}],description:"This operation pulls a graph based on a given hashmap of queries.",operationId:"pull",responses:{200:{description:"OK"},400:{description:"Bad Request"},401:{description:"Unauthorized"}},requestBody:{content:{"application/json":{schema:{type:"object",example:{"d2c33f10-06e9-40bb-92e5-1fc4aaa58f95":{edges:{"todo-app/todo-list":{include:{node:!0,rights:!0,files:!0,metadata:!0},edges:{"todo-list/todo":{include:{node:!0,metadata:!0,rights:!0,files:!0}},"node/video":{include:{node:!0,metadata:!0,rights:!0,files:!0}}}},"todo-app/feedback":{include:{edges:!0,rights:!0}}}},"64fcd6b1-7efe-483f-a4bb-748f5544e2da":{edges:{"todo-app/info":{include:{metadata:!0}}}},"ccfcaab1-88fb-4358-baca-f9fca0074ad0":{include:{node:!0}}},additionalProperties:{$ref:"#/components/schemas/Query"}}}}}};var Le=(t,e)=>e===void 0?t:e&&(e===!0?t||e:!t||t===!0?e:{...t,...e}),qt=(t,e)=>{if(typeof t!="object"||typeof e!="object"||t===null||e===null)return e;let r={},s=Object.keys(t);for(let o=0;o<s.length;o+=1){let i=s[o],a=t[i],c=e[i];r[i]=i in e?qt(a,c):a}let n=Object.keys(e);for(let o=0;o<n.length;o+=1){let i=n[o];i in r||(r[i]=e[i])}return r},Be=(t,e,r=1,s=[])=>{if(!t)return;let n=Object.keys(t);for(let o=0;o<n.length;o+=1){let i=n[o],a=t[i];r===1?e(a,[...s,i]):a&&typeof a=="object"&&Be(a,e,r-1,[...s,i])}},Vt=(t,e,r)=>{if(!r)return t;try{let s=r;for(let n=0;n<e.length;n+=1){let o=e[n];if(o in s)s=s[o];else return t}return s}catch{return t}},be=(t,e,r)=>{if(t.length===0)return e;let s=r;for(let o=0;o<t.length-1;o+=1){let i=t[o];i in s||(s[i]={}),s=s[i]}let n=t[t.length-1];return s[n]=e,r},Sn=(t,e)=>{let r=e;for(let n=0;n<t.length-1;n+=1){let o=t[n];o in r||(r[o]={}),r=r[o]}let s=t[t.length-1];return delete r[s],e};var bE={view:JSON.stringify({"todo-list1":{include:{node:!0,rights:!0},edges:{"todo-list/todo":{include:{edges:!0,metadata:!0}}}}},null,2),graph:JSON.stringify({nodes:{node1:{id:"node1",someProp:"someValue"}}},null,2),node:JSON.stringify({id:"todo123",text:"buy groceries"},null,2),rights:JSON.stringify({read:!0,write:!0,admin:!1},null,2)};var Ft=(t,e)=>(r,s)=>{if(!s)return r;let n=r??{};return Be(s,(o,i)=>{if(o===void 0)be(i,void 0,n);else{let a=Vt(void 0,i,r),c=e(a,o);be(i,c,n)}},t),n},kE=Ft(1,Le),xE=Ft(4,Le),jE=Ft(1,qt),UE=Ft(1,Le),DE=Ft(1,qt);var Lt=t=>(e,r)=>{if(!r)return e;let s=e??{};return Be(r,(n,o)=>{if(n===void 0){Sn(o,s);return}if(n===!1||typeof n=="object"){be(o,n,s);return}let i=Vt(void 0,o,e);if(!(n===!0&&typeof i=="object")){be(o,n,s);return}be(o,i,s)},t),s},qE=Lt(1),VE=Lt(4),FE=Lt(1),LE=Lt(1),BE=Lt(5);var $m=require("@aws-sdk/cloudfront-signer");var za={type:"object",additionalProperties:!1,properties:{nodes:{type:"object",description:"The nodes hashmap.",example:{"e1d05e83-4122-4fd9-9502-d12e7867b4d6":{id:"e1d05e83-4122-4fd9-9502-d12e7867b4d6",someProp:"someVal"}},additionalProperties:{oneOf:[{type:"boolean",const:!1,description:"`false` when the node should be deleted."},{type:"object",additionalProperties:!0,properties:{id:{type:"string",description:"The id of the node which should be updated.",example:"e1d05e83-4122-4fd9-9502-d12e7867b4d6",minLength:1}},required:["id"]}]}},edges:{type:"object",description:"`fromType`s: A `fromType` hashmap representing all `fromType`s of all present edges.",example:{"todo-app":{"e1d05e83-4122-4fd9-9502-d12e7867b4d6":{"todo-list":{"6da76147-c72a-4819-8efe-f4f8e06b6be6":{order:"1"}}}}},additionalProperties:{type:"object",description:"`fromId`s: A `from` hashmap representing all `fromId`s of all edges pointing from the given `fromType`.",example:{"e1d05e83-4122-4fd9-9502-d12e7867b4d6":{"todo-list":{"6da76147-c72a-4819-8efe-f4f8e06b6be6":{order:"1"}}}},additionalProperties:{type:"object",description:"`toType`s: A `toType` hashmap representing all `toType`s of all edges pointing from the given `fromType` and `fromId`.",example:{"todo-list":{"6da76147-c72a-4819-8efe-f4f8e06b6be6":{order:"1"}}},additionalProperties:{type:"object",description:"`toId`s: A `toId` hashmap representing all `toId`s of all edges pointing from the given `fromType`, `fromId`, `toType` and `toId`.",example:{"6da76147-c72a-4819-8efe-f4f8e06b6be6":{order:"1"}},additionalProperties:{oneOf:[{type:"boolean",description:"`true` when the edge should be created. `false` when the edge should be deleted."},{type:"object",description:"Is interpreted as `true` meaning the edge should be created. Object contains additional metadata to be set for the given edge.",additionalProperties:{oneOf:[{type:"string"},{type:"number"},{type:"boolean"},{type:"null"},{type:"array",items:{oneOf:[{type:"string"},{type:"number"},{type:"boolean"},{type:"null"}]}}]}}]}}}}},rights:{type:"object",description:"`id`s: A node `id` hashmap representing all nodes which rights should be updated for.",example:{"e1d05e83-4122-4fd9-9502-d12e7867b4d6":{user:{"test@mail.de":{read:!0,write:!0,admin:!0}},inherit:{from:"6da76147-c72a-4819-8efe-f4f8e06b6be6"}}},additionalProperties:{type:"object",description:"emails: An email hashmap representing all users which rights should be updated for on the given node.",properties:{user:{type:"object",description:"",example:{"test@mail.de":{read:!0,write:!0,admin:!0}},additionalProperties:{type:"object",description:"rights: A right hashmap representing all rights which should be updated for the given user on the given node.",example:{read:!0,write:!0,admin:!0},properties:{read:{type:"boolean",example:!0,description:"`true` to allow, `false` to disallow"},write:{type:"boolean",example:!0,description:"`true` to allow, `false` to disallow"},admin:{type:"boolean",example:!0,description:"`true` to allow, `false` to disallow"}}}},inherit:{type:"object",description:"Represents right inheritance for the given node from another node denoted in the `from` property. All rights of the given node are deleted and copied from the other node.",example:{from:"6da76147-c72a-4819-8efe-f4f8e06b6be6"},properties:{from:{type:"string",description:"the node id of the node from which the rights should be copied."}},required:["from"]}}}},files:{type:"object",description:"`id`s: A node `id` hashmap representing all nodes which files should be uploaded for.",example:{"e1d05e83-4122-4fd9-9502-d12e7867b4d6":{someVideo:{filename:"my-video.mp4",contentType:"video/mp4",fileSize:25e6,partSize:5242880},someTextFile:{filename:"my-file.txt",contentType:"text/plain",fileSize:250}}},additionalProperties:{type:"object",description:"`propName`s: A `propName` hashmap representing all properties which files should be attached with on the given node.",example:{someVideo:{filename:"my-video.mp4",contentType:"video/mp4",fileSize:25e6,partSize:5242880}},additionalProperties:{oneOf:[{type:"boolean",const:!1,description:"`false` when the file should be deleted."},{type:"object",description:"File metadata describing the upload to be initialized.",example:{filename:"my-video.mp4",contentType:"video/mp4",fileSize:25e6,partSize:5242880},properties:{filename:{type:"string",example:"my-video.mp4",description:"The filename as uploaded to the server and presented by the signed URL during download.",minLength:1},contentType:{type:"string",example:"video/mp4",description:"Mime type of the file to upload.",minLength:1},fileSize:{type:"integer",example:25e6,description:"Size of the file to be uploaded in bytes",minimum:1},partSize:{type:"integer",example:5242880,default:5242880,description:"Intended part size in bytes in case of a multipart upload.",minimum:5242880}},required:["filename","contentType","fileSize"]}]}}}}};var Wa={summary:"Push Graph",security:[{BearerAuth:[]}],description:"This operation pushes the graph from the request body into the database.",operationId:"push",responses:{200:{description:"OK"},400:{description:"Bad Request"},401:{description:"Unauthorized"}},requestBody:{content:{"application/json":{schema:za}}}};var Ja=(t="",e="")=>({openapi:"3.0.0-rc2",servers:[{url:t}],info:{description:"This is the API for a got backend which manages nodes, edges and access rights for nodes.",version:e,title:"Got API",contact:{email:"api@gothub.io"}},paths:{"/get-logs":{post:La},"/pull":{post:Ba},"/push":{post:Wa},"/media/complete-upload":{post:Va},"/auth/login-init":{post:ya},"/auth/login-verify":{post:va},"/auth/login-refresh":{post:Ea},"/auth/register-init":{post:ba},"/auth/register-verify":{post:Ra},"/auth/register-verify-resend":{post:Oa},"/auth/reset-password-init":{post:Aa},"/auth/reset-password-verify":{post:Ca},"/auth/invite-user":{post:ha}},components:{securitySchemes:{BearerAuth:{type:"http",scheme:"bearer",bearerFormat:"JWT"}},schemas:{Query:Pn({$ref:"#/components/schemas/Query"})}}});var Qa=process.env.API_BASE_URL||"",bm=`
<!DOCTYPE html>
<html>
  <head>
    <title>Got API</title>
    <!-- needed for adaptive design -->
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:300,400,700" rel="stylesheet">

    <!--
    Redoc doesn't change outer page styles
    -->
    <style>
      body {
        margin: 0;
        padding: 0;
      }
      span.JIFSj.eqivia.sc-fbIWvP.sc-hmbstg {
        display: block;
        margin-bottom: 4px;
      }
    </style>
  </head>
  <body>
    <redoc spec-url='${Qa}api'></redoc>
    <script src="https://cdn.jsdelivr.net/npm/redoc@latest/bundles/redoc.standalone.js"> </script>
  </body>
</html>
`,Pm=async t=>t?t.includes("text/html")?{statusCode:200,headers:{"Content-Type":"text/html",...j},body:bm}:t.includes("application/json")||t.includes("*/*")?{statusCode:200,headers:{"Content-Type":"application/json",...j},body:JSON.stringify(Ja(Qa,process.env.npm_package_version))}:oe("Invalid Accept header"):oe("Accept header is required"),Rm=async t=>{try{return await Pm(t?.headers?.Accept||t?.headers?.accept)}catch(e){return z(e)}};0&&(module.exports={handleHttp});

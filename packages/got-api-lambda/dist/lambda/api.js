"use strict";var ec=Object.create;var Wt=Object.defineProperty;var tc=Object.getOwnPropertyDescriptor;var rc=Object.getOwnPropertyNames;var sc=Object.getPrototypeOf,nc=Object.prototype.hasOwnProperty;var y=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),oc=(t,e)=>{for(var r in e)Wt(t,r,{get:e[r],enumerable:!0})},Gn=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of rc(e))!nc.call(t,n)&&n!==r&&Wt(t,n,{get:()=>e[n],enumerable:!(s=tc(e,n))||s.enumerable});return t};var xn=(t,e,r)=>(r=t!=null?ec(sc(t)):{},Gn(e||!t||!t.__esModule?Wt(r,"default",{value:t,enumerable:!0}):r,t)),ic=t=>Gn(Wt({},"__esModule",{value:!0}),t);var yt=y(N=>{"use strict";Object.defineProperty(N,"__esModule",{value:!0});N.regexpCode=N.getEsmExportName=N.getProperty=N.safeStringify=N.stringify=N.strConcat=N.addCodeArg=N.str=N._=N.nil=N._Code=N.Name=N.IDENTIFIER=N._CodeOrName=void 0;var ht=class{};N._CodeOrName=ht;N.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var ke=class extends ht{constructor(e){if(super(),!N.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};N.Name=ke;var te=class extends ht{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,s)=>`${r}${s}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,s)=>(s instanceof ke&&(r[s.str]=(r[s.str]||0)+1),r),{})}};N._Code=te;N.nil=new te("");function Dn(t,...e){let r=[t[0]],s=0;for(;s<e.length;)Lr(r,e[s]),r.push(t[++s]);return new te(r)}N._=Dn;var Fr=new te("+");function Un(t,...e){let r=[gt(t[0])],s=0;for(;s<e.length;)r.push(Fr),Lr(r,e[s]),r.push(Fr,gt(t[++s]));return Uc(r),new te(r)}N.str=Un;function Lr(t,e){e instanceof te?t.push(...e._items):e instanceof ke?t.push(e):t.push(Fc(e))}N.addCodeArg=Lr;function Uc(t){let e=1;for(;e<t.length-1;){if(t[e]===Fr){let r=qc(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function qc(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof ke||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof ke))return`"${t}${e.slice(1)}`}function Vc(t,e){return e.emptyStr()?t:t.emptyStr()?e:Un`${t}${e}`}N.strConcat=Vc;function Fc(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:gt(Array.isArray(t)?t.join(","):t)}function Lc(t){return new te(gt(t))}N.stringify=Lc;function gt(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}N.safeStringify=gt;function Hc(t){return typeof t=="string"&&N.IDENTIFIER.test(t)?new te(`.${t}`):Dn`[${t}]`}N.getProperty=Hc;function Kc(t){if(typeof t=="string"&&N.IDENTIFIER.test(t))return new te(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}N.getEsmExportName=Kc;function Bc(t){return new te(t.toString())}N.regexpCode=Bc});var Br=y(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.ValueScope=X.ValueScopeName=X.Scope=X.varKinds=X.UsedValueState=void 0;var Y=yt(),Hr=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},er;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(er||(X.UsedValueState=er={}));X.varKinds={const:new Y.Name("const"),let:new Y.Name("let"),var:new Y.Name("var")};var tr=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof Y.Name?e:this.name(e)}name(e){return new Y.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,s;if(!((s=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||s===void 0)&&s.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};X.Scope=tr;var rr=class extends Y.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:s}){this.value=e,this.scopePath=(0,Y._)`.${new Y.Name(r)}[${s}]`}};X.ValueScopeName=rr;var zc=(0,Y._)`\n`,Kr=class extends tr{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?zc:Y.nil}}get(){return this._scope}name(e){return new rr(e,this._newName(e))}value(e,r){var s;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let n=this.toName(e),{prefix:o}=n,i=(s=r.key)!==null&&s!==void 0?s:r.ref,a=this._values[o];if(a){let l=a.get(i);if(l)return l}else a=this._values[o]=new Map;a.set(i,n);let c=this._scope[o]||(this._scope[o]=[]),d=c.length;return c[d]=r.ref,n.setValue(r,{property:o,itemIndex:d}),n}getValue(e,r){let s=this._values[e];if(s)return s.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,s=>{if(s.scopePath===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return(0,Y._)`${e}${s.scopePath}`})}scopeCode(e=this._values,r,s){return this._reduceValues(e,n=>{if(n.value===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return n.value.code},r,s)}_reduceValues(e,r,s={},n){let o=Y.nil;for(let i in e){let a=e[i];if(!a)continue;let c=s[i]=s[i]||new Map;a.forEach(d=>{if(c.has(d))return;c.set(d,er.Started);let l=r(d);if(l){let u=this.opts.es5?X.varKinds.var:X.varKinds.const;o=(0,Y._)`${o}${u} ${d} = ${l};${this.opts._n}`}else if(l=n?.(d))o=(0,Y._)`${o}${l}${this.opts._n}`;else throw new Hr(d);c.set(d,er.Completed)})}return o}};X.ValueScope=Kr});var b=y(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});R.or=R.and=R.not=R.CodeGen=R.operators=R.varKinds=R.ValueScopeName=R.ValueScope=R.Scope=R.Name=R.regexpCode=R.stringify=R.getProperty=R.nil=R.strConcat=R.str=R._=void 0;var O=yt(),ie=Br(),Oe=yt();Object.defineProperty(R,"_",{enumerable:!0,get:function(){return Oe._}});Object.defineProperty(R,"str",{enumerable:!0,get:function(){return Oe.str}});Object.defineProperty(R,"strConcat",{enumerable:!0,get:function(){return Oe.strConcat}});Object.defineProperty(R,"nil",{enumerable:!0,get:function(){return Oe.nil}});Object.defineProperty(R,"getProperty",{enumerable:!0,get:function(){return Oe.getProperty}});Object.defineProperty(R,"stringify",{enumerable:!0,get:function(){return Oe.stringify}});Object.defineProperty(R,"regexpCode",{enumerable:!0,get:function(){return Oe.regexpCode}});Object.defineProperty(R,"Name",{enumerable:!0,get:function(){return Oe.Name}});var ir=Br();Object.defineProperty(R,"Scope",{enumerable:!0,get:function(){return ir.Scope}});Object.defineProperty(R,"ValueScope",{enumerable:!0,get:function(){return ir.ValueScope}});Object.defineProperty(R,"ValueScopeName",{enumerable:!0,get:function(){return ir.ValueScopeName}});Object.defineProperty(R,"varKinds",{enumerable:!0,get:function(){return ir.varKinds}});R.operators={GT:new O._Code(">"),GTE:new O._Code(">="),LT:new O._Code("<"),LTE:new O._Code("<="),EQ:new O._Code("==="),NEQ:new O._Code("!=="),NOT:new O._Code("!"),OR:new O._Code("||"),AND:new O._Code("&&"),ADD:new O._Code("+")};var Ee=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},zr=class extends Ee{constructor(e,r,s){super(),this.varKind=e,this.name=r,this.rhs=s}render({es5:e,_n:r}){let s=e?ie.varKinds.var:this.varKind,n=this.rhs===void 0?"":` = ${this.rhs}`;return`${s} ${this.name}${n};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=et(this.rhs,e,r)),this}get names(){return this.rhs instanceof O._CodeOrName?this.rhs.names:{}}},sr=class extends Ee{constructor(e,r,s){super(),this.lhs=e,this.rhs=r,this.sideEffects=s}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof O.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=et(this.rhs,e,r),this}get names(){let e=this.lhs instanceof O.Name?{}:{...this.lhs.names};return or(e,this.rhs)}},Wr=class extends sr{constructor(e,r,s,n){super(e,s,n),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},Jr=class extends Ee{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},Qr=class extends Ee{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},Yr=class extends Ee{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},Xr=class extends Ee{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=et(this.code,e,r),this}get names(){return this.code instanceof O._CodeOrName?this.code.names:{}}},wt=class extends Ee{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,s)=>r+s.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let s=e[r].optimizeNodes();Array.isArray(s)?e.splice(r,1,...s):s?e[r]=s:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:s}=this,n=s.length;for(;n--;){let o=s[n];o.optimizeNames(e,r)||(Wc(e,o.names),s.splice(n,1))}return s.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>Ue(e,r.names),{})}},_e=class extends wt{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},Zr=class extends wt{},Ze=class extends _e{};Ze.kind="else";var je=class t extends _e{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let s=r.optimizeNodes();r=this.else=Array.isArray(s)?new Ze(s):s}if(r)return e===!1?r instanceof t?r:r.nodes:this.nodes.length?this:new t(qn(e),r instanceof t?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var s;if(this.else=(s=this.else)===null||s===void 0?void 0:s.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=et(this.condition,e,r),this}get names(){let e=super.names;return or(e,this.condition),this.else&&Ue(e,this.else.names),e}};je.kind="if";var De=class extends _e{};De.kind="for";var es=class extends De{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=et(this.iteration,e,r),this}get names(){return Ue(super.names,this.iteration.names)}},ts=class extends De{constructor(e,r,s,n){super(),this.varKind=e,this.name=r,this.from=s,this.to=n}render(e){let r=e.es5?ie.varKinds.var:this.varKind,{name:s,from:n,to:o}=this;return`for(${r} ${s}=${n}; ${s}<${o}; ${s}++)`+super.render(e)}get names(){let e=or(super.names,this.from);return or(e,this.to)}},nr=class extends De{constructor(e,r,s,n){super(),this.loop=e,this.varKind=r,this.name=s,this.iterable=n}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=et(this.iterable,e,r),this}get names(){return Ue(super.names,this.iterable.names)}},Et=class extends _e{constructor(e,r,s){super(),this.name=e,this.args=r,this.async=s}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};Et.kind="func";var _t=class extends wt{render(e){return"return "+super.render(e)}};_t.kind="return";var rs=class extends _e{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var s,n;return super.optimizeNames(e,r),(s=this.catch)===null||s===void 0||s.optimizeNames(e,r),(n=this.finally)===null||n===void 0||n.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&Ue(e,this.catch.names),this.finally&&Ue(e,this.finally.names),e}},vt=class extends _e{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};vt.kind="catch";var $t=class extends _e{render(e){return"finally"+super.render(e)}};$t.kind="finally";var ss=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new ie.Scope({parent:e}),this._nodes=[new Zr]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let s=this._extScope.value(e,r);return(this._values[s.prefix]||(this._values[s.prefix]=new Set)).add(s),s}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,s,n){let o=this._scope.toName(r);return s!==void 0&&n&&(this._constants[o.str]=s),this._leafNode(new zr(e,o,s)),o}const(e,r,s){return this._def(ie.varKinds.const,e,r,s)}let(e,r,s){return this._def(ie.varKinds.let,e,r,s)}var(e,r,s){return this._def(ie.varKinds.var,e,r,s)}assign(e,r,s){return this._leafNode(new sr(e,r,s))}add(e,r){return this._leafNode(new Wr(e,R.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==O.nil&&this._leafNode(new Xr(e)),this}object(...e){let r=["{"];for(let[s,n]of e)r.length>1&&r.push(","),r.push(s),(s!==n||this.opts.es5)&&(r.push(":"),(0,O.addCodeArg)(r,n));return r.push("}"),new O._Code(r)}if(e,r,s){if(this._blockNode(new je(e)),r&&s)this.code(r).else().code(s).endIf();else if(r)this.code(r).endIf();else if(s)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new je(e))}else(){return this._elseNode(new Ze)}endIf(){return this._endBlockNode(je,Ze)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new es(e),r)}forRange(e,r,s,n,o=this.opts.es5?ie.varKinds.var:ie.varKinds.let){let i=this._scope.toName(e);return this._for(new ts(o,i,r,s),()=>n(i))}forOf(e,r,s,n=ie.varKinds.const){let o=this._scope.toName(e);if(this.opts.es5){let i=r instanceof O.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,O._)`${i}.length`,a=>{this.var(o,(0,O._)`${i}[${a}]`),s(o)})}return this._for(new nr("of",n,o,r),()=>s(o))}forIn(e,r,s,n=this.opts.es5?ie.varKinds.var:ie.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,O._)`Object.keys(${r})`,s);let o=this._scope.toName(e);return this._for(new nr("in",n,o,r),()=>s(o))}endFor(){return this._endBlockNode(De)}label(e){return this._leafNode(new Jr(e))}break(e){return this._leafNode(new Qr(e))}return(e){let r=new _t;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(_t)}try(e,r,s){if(!r&&!s)throw new Error('CodeGen: "try" without "catch" and "finally"');let n=new rs;if(this._blockNode(n),this.code(e),r){let o=this.name("e");this._currNode=n.catch=new vt(o),r(o)}return s&&(this._currNode=n.finally=new $t,this.code(s)),this._endBlockNode(vt,$t)}throw(e){return this._leafNode(new Yr(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let s=this._nodes.length-r;if(s<0||e!==void 0&&s!==e)throw new Error(`CodeGen: wrong number of nodes: ${s} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=O.nil,s,n){return this._blockNode(new Et(e,r,s)),n&&this.code(n).endFunc(),this}endFunc(){return this._endBlockNode(Et)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let s=this._currNode;if(s instanceof e||r&&s instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof je))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};R.CodeGen=ss;function Ue(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function or(t,e){return e instanceof O._CodeOrName?Ue(t,e.names):t}function et(t,e,r){if(t instanceof O.Name)return s(t);if(!n(t))return t;return new O._Code(t._items.reduce((o,i)=>(i instanceof O.Name&&(i=s(i)),i instanceof O._Code?o.push(...i._items):o.push(i),o),[]));function s(o){let i=r[o.str];return i===void 0||e[o.str]!==1?o:(delete e[o.str],i)}function n(o){return o instanceof O._Code&&o._items.some(i=>i instanceof O.Name&&e[i.str]===1&&r[i.str]!==void 0)}}function Wc(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function qn(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,O._)`!${ns(t)}`}R.not=qn;var Jc=Vn(R.operators.AND);function Qc(...t){return t.reduce(Jc)}R.and=Qc;var Yc=Vn(R.operators.OR);function Xc(...t){return t.reduce(Yc)}R.or=Xc;function Vn(t){return(e,r)=>e===O.nil?r:r===O.nil?e:(0,O._)`${ns(e)} ${t} ${ns(r)}`}function ns(t){return t instanceof O.Name?t:(0,O._)`(${t})`}});var I=y(P=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});P.checkStrictMode=P.getErrorPath=P.Type=P.useFunc=P.setEvaluated=P.evaluatedPropsToName=P.mergeEvaluated=P.eachItem=P.unescapeJsonPointer=P.escapeJsonPointer=P.escapeFragment=P.unescapeFragment=P.schemaRefOrVal=P.schemaHasRulesButRef=P.schemaHasRules=P.checkUnknownRules=P.alwaysValidSchema=P.toHash=void 0;var M=b(),Zc=yt();function el(t){let e={};for(let r of t)e[r]=!0;return e}P.toHash=el;function tl(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(Hn(t,e),!Kn(e,t.self.RULES.all))}P.alwaysValidSchema=tl;function Hn(t,e=t.schema){let{opts:r,self:s}=t;if(!r.strictSchema||typeof e=="boolean")return;let n=s.RULES.keywords;for(let o in e)n[o]||Wn(t,`unknown keyword: "${o}"`)}P.checkUnknownRules=Hn;function Kn(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}P.schemaHasRules=Kn;function rl(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}P.schemaHasRulesButRef=rl;function sl({topSchemaRef:t,schemaPath:e},r,s,n){if(!n){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,M._)`${r}`}return(0,M._)`${t}${e}${(0,M.getProperty)(s)}`}P.schemaRefOrVal=sl;function nl(t){return Bn(decodeURIComponent(t))}P.unescapeFragment=nl;function ol(t){return encodeURIComponent(is(t))}P.escapeFragment=ol;function is(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}P.escapeJsonPointer=is;function Bn(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}P.unescapeJsonPointer=Bn;function il(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}P.eachItem=il;function Fn({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:s}){return(n,o,i,a)=>{let c=i===void 0?o:i instanceof M.Name?(o instanceof M.Name?t(n,o,i):e(n,o,i),i):o instanceof M.Name?(e(n,i,o),o):r(o,i);return a===M.Name&&!(c instanceof M.Name)?s(n,c):c}}P.mergeEvaluated={props:Fn({mergeNames:(t,e,r)=>t.if((0,M._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,M._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,M._)`${r} || {}`).code((0,M._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,M._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,M._)`${r} || {}`),as(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:zn}),items:Fn({mergeNames:(t,e,r)=>t.if((0,M._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,M._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,M._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,M._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function zn(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,M._)`{}`);return e!==void 0&&as(t,r,e),r}P.evaluatedPropsToName=zn;function as(t,e,r){Object.keys(r).forEach(s=>t.assign((0,M._)`${e}${(0,M.getProperty)(s)}`,!0))}P.setEvaluated=as;var Ln={};function al(t,e){return t.scopeValue("func",{ref:e,code:Ln[e.code]||(Ln[e.code]=new Zc._Code(e.code))})}P.useFunc=al;var os;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(os||(P.Type=os={}));function cl(t,e,r){if(t instanceof M.Name){let s=e===os.Num;return r?s?(0,M._)`"[" + ${t} + "]"`:(0,M._)`"['" + ${t} + "']"`:s?(0,M._)`"/" + ${t}`:(0,M._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,M.getProperty)(t).toString():"/"+is(t)}P.getErrorPath=cl;function Wn(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}P.checkStrictMode=Wn});var ve=y(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});var L=b(),ll={data:new L.Name("data"),valCxt:new L.Name("valCxt"),instancePath:new L.Name("instancePath"),parentData:new L.Name("parentData"),parentDataProperty:new L.Name("parentDataProperty"),rootData:new L.Name("rootData"),dynamicAnchors:new L.Name("dynamicAnchors"),vErrors:new L.Name("vErrors"),errors:new L.Name("errors"),this:new L.Name("this"),self:new L.Name("self"),scope:new L.Name("scope"),json:new L.Name("json"),jsonPos:new L.Name("jsonPos"),jsonLen:new L.Name("jsonLen"),jsonPart:new L.Name("jsonPart")};cs.default=ll});var Rt=y(H=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});H.extendErrors=H.resetErrorsCount=H.reportExtraError=H.reportError=H.keyword$DataError=H.keywordError=void 0;var T=b(),ar=I(),W=ve();H.keywordError={message:({keyword:t})=>(0,T.str)`must pass "${t}" keyword validation`};H.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,T.str)`"${t}" keyword must be ${e} ($data)`:(0,T.str)`"${t}" keyword is invalid ($data)`};function dl(t,e=H.keywordError,r,s){let{it:n}=t,{gen:o,compositeRule:i,allErrors:a}=n,c=Yn(t,e,r);s??(i||a)?Jn(o,c):Qn(n,(0,T._)`[${c}]`)}H.reportError=dl;function ul(t,e=H.keywordError,r){let{it:s}=t,{gen:n,compositeRule:o,allErrors:i}=s,a=Yn(t,e,r);Jn(n,a),o||i||Qn(s,W.default.vErrors)}H.reportExtraError=ul;function fl(t,e){t.assign(W.default.errors,e),t.if((0,T._)`${W.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,T._)`${W.default.vErrors}.length`,e),()=>t.assign(W.default.vErrors,null)))}H.resetErrorsCount=fl;function pl({gen:t,keyword:e,schemaValue:r,data:s,errsCount:n,it:o}){if(n===void 0)throw new Error("ajv implementation error");let i=t.name("err");t.forRange("i",n,W.default.errors,a=>{t.const(i,(0,T._)`${W.default.vErrors}[${a}]`),t.if((0,T._)`${i}.instancePath === undefined`,()=>t.assign((0,T._)`${i}.instancePath`,(0,T.strConcat)(W.default.instancePath,o.errorPath))),t.assign((0,T._)`${i}.schemaPath`,(0,T.str)`${o.errSchemaPath}/${e}`),o.opts.verbose&&(t.assign((0,T._)`${i}.schema`,r),t.assign((0,T._)`${i}.data`,s))})}H.extendErrors=pl;function Jn(t,e){let r=t.const("err",e);t.if((0,T._)`${W.default.vErrors} === null`,()=>t.assign(W.default.vErrors,(0,T._)`[${r}]`),(0,T._)`${W.default.vErrors}.push(${r})`),t.code((0,T._)`${W.default.errors}++`)}function Qn(t,e){let{gen:r,validateName:s,schemaEnv:n}=t;n.$async?r.throw((0,T._)`new ${t.ValidationError}(${e})`):(r.assign((0,T._)`${s}.errors`,e),r.return(!1))}var qe={keyword:new T.Name("keyword"),schemaPath:new T.Name("schemaPath"),params:new T.Name("params"),propertyName:new T.Name("propertyName"),message:new T.Name("message"),schema:new T.Name("schema"),parentSchema:new T.Name("parentSchema")};function Yn(t,e,r){let{createErrors:s}=t.it;return s===!1?(0,T._)`{}`:ml(t,e,r)}function ml(t,e,r={}){let{gen:s,it:n}=t,o=[hl(n,r),gl(t,r)];return yl(t,e,o),s.object(...o)}function hl({errorPath:t},{instancePath:e}){let r=e?(0,T.str)`${t}${(0,ar.getErrorPath)(e,ar.Type.Str)}`:t;return[W.default.instancePath,(0,T.strConcat)(W.default.instancePath,r)]}function gl({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:s}){let n=s?e:(0,T.str)`${e}/${t}`;return r&&(n=(0,T.str)`${n}${(0,ar.getErrorPath)(r,ar.Type.Str)}`),[qe.schemaPath,n]}function yl(t,{params:e,message:r},s){let{keyword:n,data:o,schemaValue:i,it:a}=t,{opts:c,propertyName:d,topSchemaRef:l,schemaPath:u}=a;s.push([qe.keyword,n],[qe.params,typeof e=="function"?e(t):e||(0,T._)`{}`]),c.messages&&s.push([qe.message,typeof r=="function"?r(t):r]),c.verbose&&s.push([qe.schema,i],[qe.parentSchema,(0,T._)`${l}${u}`],[W.default.data,o]),d&&s.push([qe.propertyName,d])}});var Zn=y(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});tt.boolOrEmptySchema=tt.topBoolOrEmptySchema=void 0;var wl=Rt(),El=b(),_l=ve(),vl={message:"boolean schema is false"};function $l(t){let{gen:e,schema:r,validateName:s}=t;r===!1?Xn(t,!1):typeof r=="object"&&r.$async===!0?e.return(_l.default.data):(e.assign((0,El._)`${s}.errors`,null),e.return(!0))}tt.topBoolOrEmptySchema=$l;function Rl(t,e){let{gen:r,schema:s}=t;s===!1?(r.var(e,!1),Xn(t)):r.var(e,!0)}tt.boolOrEmptySchema=Rl;function Xn(t,e){let{gen:r,data:s}=t,n={gen:r,keyword:"false schema",data:s,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,wl.reportError)(n,vl,void 0,e)}});var ls=y(rt=>{"use strict";Object.defineProperty(rt,"__esModule",{value:!0});rt.getRules=rt.isJSONType=void 0;var bl=["string","number","integer","boolean","null","object","array"],Pl=new Set(bl);function Sl(t){return typeof t=="string"&&Pl.has(t)}rt.isJSONType=Sl;function Ol(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}rt.getRules=Ol});var ds=y(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.shouldUseRule=Ae.shouldUseGroup=Ae.schemaHasRulesForType=void 0;function Al({schema:t,self:e},r){let s=e.RULES.types[r];return s&&s!==!0&&eo(t,s)}Ae.schemaHasRulesForType=Al;function eo(t,e){return e.rules.some(r=>to(t,r))}Ae.shouldUseGroup=eo;function to(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(s=>t[s]!==void 0))}Ae.shouldUseRule=to});var bt=y(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.reportTypeError=K.checkDataTypes=K.checkDataType=K.coerceAndCheckDataType=K.getJSONTypes=K.getSchemaTypes=K.DataType=void 0;var Tl=ls(),Nl=ds(),Il=Rt(),$=b(),ro=I(),st;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(st||(K.DataType=st={}));function Cl(t){let e=so(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}K.getSchemaTypes=Cl;function so(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(Tl.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}K.getJSONTypes=so;function Ml(t,e){let{gen:r,data:s,opts:n}=t,o=Gl(e,n.coerceTypes),i=e.length>0&&!(o.length===0&&e.length===1&&(0,Nl.schemaHasRulesForType)(t,e[0]));if(i){let a=fs(e,s,n.strictNumbers,st.Wrong);r.if(a,()=>{o.length?xl(t,e,o):ps(t)})}return i}K.coerceAndCheckDataType=Ml;var no=new Set(["string","number","integer","boolean","null"]);function Gl(t,e){return e?t.filter(r=>no.has(r)||e==="array"&&r==="array"):[]}function xl(t,e,r){let{gen:s,data:n,opts:o}=t,i=s.let("dataType",(0,$._)`typeof ${n}`),a=s.let("coerced",(0,$._)`undefined`);o.coerceTypes==="array"&&s.if((0,$._)`${i} == 'object' && Array.isArray(${n}) && ${n}.length == 1`,()=>s.assign(n,(0,$._)`${n}[0]`).assign(i,(0,$._)`typeof ${n}`).if(fs(e,n,o.strictNumbers),()=>s.assign(a,n))),s.if((0,$._)`${a} !== undefined`);for(let d of r)(no.has(d)||d==="array"&&o.coerceTypes==="array")&&c(d);s.else(),ps(t),s.endIf(),s.if((0,$._)`${a} !== undefined`,()=>{s.assign(n,a),kl(t,a)});function c(d){switch(d){case"string":s.elseIf((0,$._)`${i} == "number" || ${i} == "boolean"`).assign(a,(0,$._)`"" + ${n}`).elseIf((0,$._)`${n} === null`).assign(a,(0,$._)`""`);return;case"number":s.elseIf((0,$._)`${i} == "boolean" || ${n} === null
              || (${i} == "string" && ${n} && ${n} == +${n})`).assign(a,(0,$._)`+${n}`);return;case"integer":s.elseIf((0,$._)`${i} === "boolean" || ${n} === null
              || (${i} === "string" && ${n} && ${n} == +${n} && !(${n} % 1))`).assign(a,(0,$._)`+${n}`);return;case"boolean":s.elseIf((0,$._)`${n} === "false" || ${n} === 0 || ${n} === null`).assign(a,!1).elseIf((0,$._)`${n} === "true" || ${n} === 1`).assign(a,!0);return;case"null":s.elseIf((0,$._)`${n} === "" || ${n} === 0 || ${n} === false`),s.assign(a,null);return;case"array":s.elseIf((0,$._)`${i} === "string" || ${i} === "number"
              || ${i} === "boolean" || ${n} === null`).assign(a,(0,$._)`[${n}]`)}}}function kl({gen:t,parentData:e,parentDataProperty:r},s){t.if((0,$._)`${e} !== undefined`,()=>t.assign((0,$._)`${e}[${r}]`,s))}function us(t,e,r,s=st.Correct){let n=s===st.Correct?$.operators.EQ:$.operators.NEQ,o;switch(t){case"null":return(0,$._)`${e} ${n} null`;case"array":o=(0,$._)`Array.isArray(${e})`;break;case"object":o=(0,$._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":o=i((0,$._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":o=i();break;default:return(0,$._)`typeof ${e} ${n} ${t}`}return s===st.Correct?o:(0,$.not)(o);function i(a=$.nil){return(0,$.and)((0,$._)`typeof ${e} == "number"`,a,r?(0,$._)`isFinite(${e})`:$.nil)}}K.checkDataType=us;function fs(t,e,r,s){if(t.length===1)return us(t[0],e,r,s);let n,o=(0,ro.toHash)(t);if(o.array&&o.object){let i=(0,$._)`typeof ${e} != "object"`;n=o.null?i:(0,$._)`!${e} || ${i}`,delete o.null,delete o.array,delete o.object}else n=$.nil;o.number&&delete o.integer;for(let i in o)n=(0,$.and)(n,us(i,e,r,s));return n}K.checkDataTypes=fs;var jl={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,$._)`{type: ${t}}`:(0,$._)`{type: ${e}}`};function ps(t){let e=Dl(t);(0,Il.reportError)(e,jl)}K.reportTypeError=ps;function Dl(t){let{gen:e,data:r,schema:s}=t,n=(0,ro.schemaRefOrVal)(t,s,"type");return{gen:e,keyword:"type",data:r,schema:s.type,schemaCode:n,schemaValue:n,parentSchema:s,params:{},it:t}}});var io=y(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.assignDefaults=void 0;var nt=b(),Ul=I();function ql(t,e){let{properties:r,items:s}=t.schema;if(e==="object"&&r)for(let n in r)oo(t,n,r[n].default);else e==="array"&&Array.isArray(s)&&s.forEach((n,o)=>oo(t,o,n.default))}cr.assignDefaults=ql;function oo(t,e,r){let{gen:s,compositeRule:n,data:o,opts:i}=t;if(r===void 0)return;let a=(0,nt._)`${o}${(0,nt.getProperty)(e)}`;if(n){(0,Ul.checkStrictMode)(t,`default is ignored for: ${a}`);return}let c=(0,nt._)`${a} === undefined`;i.useDefaults==="empty"&&(c=(0,nt._)`${c} || ${a} === null || ${a} === ""`),s.if(c,(0,nt._)`${a} = ${(0,nt.stringify)(r)}`)}});var re=y(C=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});C.validateUnion=C.validateArray=C.usePattern=C.callValidateCode=C.schemaProperties=C.allSchemaProperties=C.noPropertyInData=C.propertyInData=C.isOwnProperty=C.hasPropFunc=C.reportMissingProp=C.checkMissingProp=C.checkReportMissingProp=void 0;var x=b(),ms=I(),Te=ve(),Vl=I();function Fl(t,e){let{gen:r,data:s,it:n}=t;r.if(gs(r,s,e,n.opts.ownProperties),()=>{t.setParams({missingProperty:(0,x._)`${e}`},!0),t.error()})}C.checkReportMissingProp=Fl;function Ll({gen:t,data:e,it:{opts:r}},s,n){return(0,x.or)(...s.map(o=>(0,x.and)(gs(t,e,o,r.ownProperties),(0,x._)`${n} = ${o}`)))}C.checkMissingProp=Ll;function Hl(t,e){t.setParams({missingProperty:e},!0),t.error()}C.reportMissingProp=Hl;function ao(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,x._)`Object.prototype.hasOwnProperty`})}C.hasPropFunc=ao;function hs(t,e,r){return(0,x._)`${ao(t)}.call(${e}, ${r})`}C.isOwnProperty=hs;function Kl(t,e,r,s){let n=(0,x._)`${e}${(0,x.getProperty)(r)} !== undefined`;return s?(0,x._)`${n} && ${hs(t,e,r)}`:n}C.propertyInData=Kl;function gs(t,e,r,s){let n=(0,x._)`${e}${(0,x.getProperty)(r)} === undefined`;return s?(0,x.or)(n,(0,x.not)(hs(t,e,r))):n}C.noPropertyInData=gs;function co(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}C.allSchemaProperties=co;function Bl(t,e){return co(e).filter(r=>!(0,ms.alwaysValidSchema)(t,e[r]))}C.schemaProperties=Bl;function zl({schemaCode:t,data:e,it:{gen:r,topSchemaRef:s,schemaPath:n,errorPath:o},it:i},a,c,d){let l=d?(0,x._)`${t}, ${e}, ${s}${n}`:e,u=[[Te.default.instancePath,(0,x.strConcat)(Te.default.instancePath,o)],[Te.default.parentData,i.parentData],[Te.default.parentDataProperty,i.parentDataProperty],[Te.default.rootData,Te.default.rootData]];i.opts.dynamicRef&&u.push([Te.default.dynamicAnchors,Te.default.dynamicAnchors]);let g=(0,x._)`${l}, ${r.object(...u)}`;return c!==x.nil?(0,x._)`${a}.call(${c}, ${g})`:(0,x._)`${a}(${g})`}C.callValidateCode=zl;var Wl=(0,x._)`new RegExp`;function Jl({gen:t,it:{opts:e}},r){let s=e.unicodeRegExp?"u":"",{regExp:n}=e.code,o=n(r,s);return t.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,x._)`${n.code==="new RegExp"?Wl:(0,Vl.useFunc)(t,n)}(${r}, ${s})`})}C.usePattern=Jl;function Ql(t){let{gen:e,data:r,keyword:s,it:n}=t,o=e.name("valid");if(n.allErrors){let a=e.let("valid",!0);return i(()=>e.assign(a,!1)),a}return e.var(o,!0),i(()=>e.break()),o;function i(a){let c=e.const("len",(0,x._)`${r}.length`);e.forRange("i",0,c,d=>{t.subschema({keyword:s,dataProp:d,dataPropType:ms.Type.Num},o),e.if((0,x.not)(o),a)})}}C.validateArray=Ql;function Yl(t){let{gen:e,schema:r,keyword:s,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,ms.alwaysValidSchema)(n,c))&&!n.opts.unevaluated)return;let i=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((c,d)=>{let l=t.subschema({keyword:s,schemaProp:d,compositeRule:!0},a);e.assign(i,(0,x._)`${i} || ${a}`),t.mergeValidEvaluated(l,a)||e.if((0,x.not)(i))})),t.result(i,()=>t.reset(),()=>t.error(!0))}C.validateUnion=Yl});var fo=y(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.validateKeywordUsage=fe.validSchemaType=fe.funcKeywordCode=fe.macroKeywordCode=void 0;var J=b(),Ve=ve(),Xl=re(),Zl=Rt();function ed(t,e){let{gen:r,keyword:s,schema:n,parentSchema:o,it:i}=t,a=e.macro.call(i.self,n,o,i),c=uo(r,s,a);i.opts.validateSchema!==!1&&i.self.validateSchema(a,!0);let d=r.name("valid");t.subschema({schema:a,schemaPath:J.nil,errSchemaPath:`${i.errSchemaPath}/${s}`,topSchemaRef:c,compositeRule:!0},d),t.pass(d,()=>t.error(!0))}fe.macroKeywordCode=ed;function td(t,e){var r;let{gen:s,keyword:n,schema:o,parentSchema:i,$data:a,it:c}=t;sd(c,e);let d=!a&&e.compile?e.compile.call(c.self,o,i,c):e.validate,l=uo(s,n,d),u=s.let("valid");t.block$data(u,g),t.ok((r=e.valid)!==null&&r!==void 0?r:u);function g(){if(e.errors===!1)f(),e.modifying&&lo(t),h(()=>t.error());else{let w=e.async?m():p();e.modifying&&lo(t),h(()=>rd(t,w))}}function m(){let w=s.let("ruleErrs",null);return s.try(()=>f((0,J._)`await `),A=>s.assign(u,!1).if((0,J._)`${A} instanceof ${c.ValidationError}`,()=>s.assign(w,(0,J._)`${A}.errors`),()=>s.throw(A))),w}function p(){let w=(0,J._)`${l}.errors`;return s.assign(w,null),f(J.nil),w}function f(w=e.async?(0,J._)`await `:J.nil){let A=c.opts.passContext?Ve.default.this:Ve.default.self,S=!("compile"in e&&!a||e.schema===!1);s.assign(u,(0,J._)`${w}${(0,Xl.callValidateCode)(t,l,A,S)}`,e.modifying)}function h(w){var A;s.if((0,J.not)((A=e.valid)!==null&&A!==void 0?A:u),w)}}fe.funcKeywordCode=td;function lo(t){let{gen:e,data:r,it:s}=t;e.if(s.parentData,()=>e.assign(r,(0,J._)`${s.parentData}[${s.parentDataProperty}]`))}function rd(t,e){let{gen:r}=t;r.if((0,J._)`Array.isArray(${e})`,()=>{r.assign(Ve.default.vErrors,(0,J._)`${Ve.default.vErrors} === null ? ${e} : ${Ve.default.vErrors}.concat(${e})`).assign(Ve.default.errors,(0,J._)`${Ve.default.vErrors}.length`),(0,Zl.extendErrors)(t)},()=>t.error())}function sd({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function uo(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,J.stringify)(r)})}function nd(t,e,r=!1){return!e.length||e.some(s=>s==="array"?Array.isArray(t):s==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==s||r&&typeof t>"u")}fe.validSchemaType=nd;function od({schema:t,opts:e,self:r,errSchemaPath:s},n,o){if(Array.isArray(n.keyword)?!n.keyword.includes(o):n.keyword!==o)throw new Error("ajv implementation error");let i=n.dependencies;if(i?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${o}: ${i.join(",")}`);if(n.validateSchema&&!n.validateSchema(t[o])){let c=`keyword "${o}" value is invalid at path "${s}": `+r.errorsText(n.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(c);else throw new Error(c)}}fe.validateKeywordUsage=od});var mo=y(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.extendSubschemaMode=Ne.extendSubschemaData=Ne.getSubschema=void 0;var pe=b(),po=I();function id(t,{keyword:e,schemaProp:r,schema:s,schemaPath:n,errSchemaPath:o,topSchemaRef:i}){if(e!==void 0&&s!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,pe._)`${t.schemaPath}${(0,pe.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,pe._)`${t.schemaPath}${(0,pe.getProperty)(e)}${(0,pe.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,po.escapeFragment)(r)}`}}if(s!==void 0){if(n===void 0||o===void 0||i===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:s,schemaPath:n,topSchemaRef:i,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}Ne.getSubschema=id;function ad(t,e,{dataProp:r,dataPropType:s,data:n,dataTypes:o,propertyName:i}){if(n!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:d,dataPathArr:l,opts:u}=e,g=a.let("data",(0,pe._)`${e.data}${(0,pe.getProperty)(r)}`,!0);c(g),t.errorPath=(0,pe.str)`${d}${(0,po.getErrorPath)(r,s,u.jsPropertySyntax)}`,t.parentDataProperty=(0,pe._)`${r}`,t.dataPathArr=[...l,t.parentDataProperty]}if(n!==void 0){let d=n instanceof pe.Name?n:a.let("data",n,!0);c(d),i!==void 0&&(t.propertyName=i)}o&&(t.dataTypes=o);function c(d){t.data=d,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,d]}}Ne.extendSubschemaData=ad;function cd(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:s,createErrors:n,allErrors:o}){s!==void 0&&(t.compositeRule=s),n!==void 0&&(t.createErrors=n),o!==void 0&&(t.allErrors=o),t.jtdDiscriminator=e,t.jtdMetadata=r}Ne.extendSubschemaMode=cd});var ys=y((pg,ho)=>{"use strict";ho.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var s,n,o;if(Array.isArray(e)){if(s=e.length,s!=r.length)return!1;for(n=s;n--!==0;)if(!t(e[n],r[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),s=o.length,s!==Object.keys(r).length)return!1;for(n=s;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[n]))return!1;for(n=s;n--!==0;){var i=o[n];if(!t(e[i],r[i]))return!1}return!0}return e!==e&&r!==r}});var yo=y((mg,go)=>{"use strict";var Ie=go.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var s=typeof r=="function"?r:r.pre||function(){},n=r.post||function(){};lr(e,s,n,t,"",t)};Ie.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Ie.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Ie.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Ie.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function lr(t,e,r,s,n,o,i,a,c,d){if(s&&typeof s=="object"&&!Array.isArray(s)){e(s,n,o,i,a,c,d);for(var l in s){var u=s[l];if(Array.isArray(u)){if(l in Ie.arrayKeywords)for(var g=0;g<u.length;g++)lr(t,e,r,u[g],n+"/"+l+"/"+g,o,n,l,s,g)}else if(l in Ie.propsKeywords){if(u&&typeof u=="object")for(var m in u)lr(t,e,r,u[m],n+"/"+l+"/"+ld(m),o,n,l,s,m)}else(l in Ie.keywords||t.allKeys&&!(l in Ie.skipKeywords))&&lr(t,e,r,u,n+"/"+l,o,n,l,s)}r(s,n,o,i,a,c,d)}}function ld(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var Pt=y(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.getSchemaRefs=Z.resolveUrl=Z.normalizeId=Z._getFullPath=Z.getFullPath=Z.inlineRef=void 0;var dd=I(),ud=ys(),fd=yo(),pd=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function md(t,e=!0){return typeof t=="boolean"?!0:e===!0?!ws(t):e?wo(t)<=e:!1}Z.inlineRef=md;var hd=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function ws(t){for(let e in t){if(hd.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(ws)||typeof r=="object"&&ws(r))return!0}return!1}function wo(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!pd.has(r)&&(typeof t[r]=="object"&&(0,dd.eachItem)(t[r],s=>e+=wo(s)),e===1/0))return 1/0}return e}function Eo(t,e="",r){r!==!1&&(e=ot(e));let s=t.parse(e);return _o(t,s)}Z.getFullPath=Eo;function _o(t,e){return t.serialize(e).split("#")[0]+"#"}Z._getFullPath=_o;var gd=/#\/?$/;function ot(t){return t?t.replace(gd,""):""}Z.normalizeId=ot;function yd(t,e,r){return r=ot(r),t.resolve(e,r)}Z.resolveUrl=yd;var wd=/^[a-z_][-a-z0-9._]*$/i;function Ed(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:s}=this.opts,n=ot(t[r]||e),o={"":n},i=Eo(s,n,!1),a={},c=new Set;return fd(t,{allKeys:!0},(u,g,m,p)=>{if(p===void 0)return;let f=i+g,h=o[p];typeof u[r]=="string"&&(h=w.call(this,u[r])),A.call(this,u.$anchor),A.call(this,u.$dynamicAnchor),o[g]=h;function w(S){let G=this.opts.uriResolver.resolve;if(S=ot(h?G(h,S):S),c.has(S))throw l(S);c.add(S);let v=this.refs[S];return typeof v=="string"&&(v=this.refs[v]),typeof v=="object"?d(u,v.schema,S):S!==ot(f)&&(S[0]==="#"?(d(u,a[S],S),a[S]=u):this.refs[S]=f),S}function A(S){if(typeof S=="string"){if(!wd.test(S))throw new Error(`invalid anchor "${S}"`);w.call(this,`#${S}`)}}}),a;function d(u,g,m){if(g!==void 0&&!ud(u,g))throw l(m)}function l(u){return new Error(`reference "${u}" resolves to more than one schema`)}}Z.getSchemaRefs=Ed});var At=y(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.getData=Ce.KeywordCxt=Ce.validateFunctionCode=void 0;var Po=Zn(),vo=bt(),_s=ds(),dr=bt(),_d=io(),Ot=fo(),Es=mo(),E=b(),_=ve(),vd=Pt(),$e=I(),St=Rt();function $d(t){if(Ao(t)&&(To(t),Oo(t))){Pd(t);return}So(t,()=>(0,Po.topBoolOrEmptySchema)(t))}Ce.validateFunctionCode=$d;function So({gen:t,validateName:e,schema:r,schemaEnv:s,opts:n},o){n.code.es5?t.func(e,(0,E._)`${_.default.data}, ${_.default.valCxt}`,s.$async,()=>{t.code((0,E._)`"use strict"; ${$o(r,n)}`),bd(t,n),t.code(o)}):t.func(e,(0,E._)`${_.default.data}, ${Rd(n)}`,s.$async,()=>t.code($o(r,n)).code(o))}function Rd(t){return(0,E._)`{${_.default.instancePath}="", ${_.default.parentData}, ${_.default.parentDataProperty}, ${_.default.rootData}=${_.default.data}${t.dynamicRef?(0,E._)`, ${_.default.dynamicAnchors}={}`:E.nil}}={}`}function bd(t,e){t.if(_.default.valCxt,()=>{t.var(_.default.instancePath,(0,E._)`${_.default.valCxt}.${_.default.instancePath}`),t.var(_.default.parentData,(0,E._)`${_.default.valCxt}.${_.default.parentData}`),t.var(_.default.parentDataProperty,(0,E._)`${_.default.valCxt}.${_.default.parentDataProperty}`),t.var(_.default.rootData,(0,E._)`${_.default.valCxt}.${_.default.rootData}`),e.dynamicRef&&t.var(_.default.dynamicAnchors,(0,E._)`${_.default.valCxt}.${_.default.dynamicAnchors}`)},()=>{t.var(_.default.instancePath,(0,E._)`""`),t.var(_.default.parentData,(0,E._)`undefined`),t.var(_.default.parentDataProperty,(0,E._)`undefined`),t.var(_.default.rootData,_.default.data),e.dynamicRef&&t.var(_.default.dynamicAnchors,(0,E._)`{}`)})}function Pd(t){let{schema:e,opts:r,gen:s}=t;So(t,()=>{r.$comment&&e.$comment&&Io(t),Nd(t),s.let(_.default.vErrors,null),s.let(_.default.errors,0),r.unevaluated&&Sd(t),No(t),Md(t)})}function Sd(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,E._)`${r}.evaluated`),e.if((0,E._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,E._)`${t.evaluated}.props`,(0,E._)`undefined`)),e.if((0,E._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,E._)`${t.evaluated}.items`,(0,E._)`undefined`))}function $o(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,E._)`/*# sourceURL=${r} */`:E.nil}function Od(t,e){if(Ao(t)&&(To(t),Oo(t))){Ad(t,e);return}(0,Po.boolOrEmptySchema)(t,e)}function Oo({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function Ao(t){return typeof t.schema!="boolean"}function Ad(t,e){let{schema:r,gen:s,opts:n}=t;n.$comment&&r.$comment&&Io(t),Id(t),Cd(t);let o=s.const("_errs",_.default.errors);No(t,o),s.var(e,(0,E._)`${o} === ${_.default.errors}`)}function To(t){(0,$e.checkUnknownRules)(t),Td(t)}function No(t,e){if(t.opts.jtd)return Ro(t,[],!1,e);let r=(0,vo.getSchemaTypes)(t.schema),s=(0,vo.coerceAndCheckDataType)(t,r);Ro(t,r,!s,e)}function Td(t){let{schema:e,errSchemaPath:r,opts:s,self:n}=t;e.$ref&&s.ignoreKeywordsWithRef&&(0,$e.schemaHasRulesButRef)(e,n.RULES)&&n.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Nd(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,$e.checkStrictMode)(t,"default is ignored in the schema root")}function Id(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,vd.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function Cd(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function Io({gen:t,schemaEnv:e,schema:r,errSchemaPath:s,opts:n}){let o=r.$comment;if(n.$comment===!0)t.code((0,E._)`${_.default.self}.logger.log(${o})`);else if(typeof n.$comment=="function"){let i=(0,E.str)`${s}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,E._)`${_.default.self}.opts.$comment(${o}, ${i}, ${a}.schema)`)}}function Md(t){let{gen:e,schemaEnv:r,validateName:s,ValidationError:n,opts:o}=t;r.$async?e.if((0,E._)`${_.default.errors} === 0`,()=>e.return(_.default.data),()=>e.throw((0,E._)`new ${n}(${_.default.vErrors})`)):(e.assign((0,E._)`${s}.errors`,_.default.vErrors),o.unevaluated&&Gd(t),e.return((0,E._)`${_.default.errors} === 0`))}function Gd({gen:t,evaluated:e,props:r,items:s}){r instanceof E.Name&&t.assign((0,E._)`${e}.props`,r),s instanceof E.Name&&t.assign((0,E._)`${e}.items`,s)}function Ro(t,e,r,s){let{gen:n,schema:o,data:i,allErrors:a,opts:c,self:d}=t,{RULES:l}=d;if(o.$ref&&(c.ignoreKeywordsWithRef||!(0,$e.schemaHasRulesButRef)(o,l))){n.block(()=>Mo(t,"$ref",l.all.$ref.definition));return}c.jtd||xd(t,e),n.block(()=>{for(let g of l.rules)u(g);u(l.post)});function u(g){(0,_s.shouldUseGroup)(o,g)&&(g.type?(n.if((0,dr.checkDataType)(g.type,i,c.strictNumbers)),bo(t,g),e.length===1&&e[0]===g.type&&r&&(n.else(),(0,dr.reportTypeError)(t)),n.endIf()):bo(t,g),a||n.if((0,E._)`${_.default.errors} === ${s||0}`))}}function bo(t,e){let{gen:r,schema:s,opts:{useDefaults:n}}=t;n&&(0,_d.assignDefaults)(t,e.type),r.block(()=>{for(let o of e.rules)(0,_s.shouldUseRule)(s,o)&&Mo(t,o.keyword,o.definition,e.type)})}function xd(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(kd(t,e),t.opts.allowUnionTypes||jd(t,e),Dd(t,t.dataTypes))}function kd(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{Co(t.dataTypes,r)||vs(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),qd(t,e)}}function jd(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&vs(t,"use allowUnionTypes to allow union type keyword")}function Dd(t,e){let r=t.self.RULES.all;for(let s in r){let n=r[s];if(typeof n=="object"&&(0,_s.shouldUseRule)(t.schema,n)){let{type:o}=n.definition;o.length&&!o.some(i=>Ud(e,i))&&vs(t,`missing type "${o.join(",")}" for keyword "${s}"`)}}}function Ud(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function Co(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function qd(t,e){let r=[];for(let s of t.dataTypes)Co(e,s)?r.push(s):e.includes("integer")&&s==="number"&&r.push("integer");t.dataTypes=r}function vs(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,$e.checkStrictMode)(t,e,t.opts.strictTypes)}var ur=class{constructor(e,r,s){if((0,Ot.validateKeywordUsage)(e,r,s),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=s,this.data=e.data,this.schema=e.schema[s],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,$e.schemaRefOrVal)(e,this.schema,s,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",Go(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Ot.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${s} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",_.default.errors))}result(e,r,s){this.failResult((0,E.not)(e),r,s)}failResult(e,r,s){this.gen.if(e),s?s():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,E.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,E._)`${r} !== undefined && (${(0,E.or)(this.invalid$data(),e)})`)}error(e,r,s){if(r){this.setParams(r),this._error(e,s),this.setParams({});return}this._error(e,s)}_error(e,r){(e?St.reportExtraError:St.reportError)(this,this.def.error,r)}$dataError(){(0,St.reportError)(this,this.def.$dataError||St.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,St.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,s=E.nil){this.gen.block(()=>{this.check$data(e,s),r()})}check$data(e=E.nil,r=E.nil){if(!this.$data)return;let{gen:s,schemaCode:n,schemaType:o,def:i}=this;s.if((0,E.or)((0,E._)`${n} === undefined`,r)),e!==E.nil&&s.assign(e,!0),(o.length||i.validateSchema)&&(s.elseIf(this.invalid$data()),this.$dataError(),e!==E.nil&&s.assign(e,!1)),s.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:s,def:n,it:o}=this;return(0,E.or)(i(),a());function i(){if(s.length){if(!(r instanceof E.Name))throw new Error("ajv implementation error");let c=Array.isArray(s)?s:[s];return(0,E._)`${(0,dr.checkDataTypes)(c,r,o.opts.strictNumbers,dr.DataType.Wrong)}`}return E.nil}function a(){if(n.validateSchema){let c=e.scopeValue("validate$data",{ref:n.validateSchema});return(0,E._)`!${c}(${r})`}return E.nil}}subschema(e,r){let s=(0,Es.getSubschema)(this.it,e);(0,Es.extendSubschemaData)(s,this.it,e),(0,Es.extendSubschemaMode)(s,e);let n={...this.it,...s,items:void 0,props:void 0};return Od(n,r),n}mergeEvaluated(e,r){let{it:s,gen:n}=this;s.opts.unevaluated&&(s.props!==!0&&e.props!==void 0&&(s.props=$e.mergeEvaluated.props(n,e.props,s.props,r)),s.items!==!0&&e.items!==void 0&&(s.items=$e.mergeEvaluated.items(n,e.items,s.items,r)))}mergeValidEvaluated(e,r){let{it:s,gen:n}=this;if(s.opts.unevaluated&&(s.props!==!0||s.items!==!0))return n.if(r,()=>this.mergeEvaluated(e,E.Name)),!0}};Ce.KeywordCxt=ur;function Mo(t,e,r,s){let n=new ur(t,r,e);"code"in r?r.code(n,s):n.$data&&r.validate?(0,Ot.funcKeywordCode)(n,r):"macro"in r?(0,Ot.macroKeywordCode)(n,r):(r.compile||r.validate)&&(0,Ot.funcKeywordCode)(n,r)}var Vd=/^\/(?:[^~]|~0|~1)*$/,Fd=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Go(t,{dataLevel:e,dataNames:r,dataPathArr:s}){let n,o;if(t==="")return _.default.rootData;if(t[0]==="/"){if(!Vd.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);n=t,o=_.default.rootData}else{let d=Fd.exec(t);if(!d)throw new Error(`Invalid JSON-pointer: ${t}`);let l=+d[1];if(n=d[2],n==="#"){if(l>=e)throw new Error(c("property/index",l));return s[e-l]}if(l>e)throw new Error(c("data",l));if(o=r[e-l],!n)return o}let i=o,a=n.split("/");for(let d of a)d&&(o=(0,E._)`${o}${(0,E.getProperty)((0,$e.unescapeJsonPointer)(d))}`,i=(0,E._)`${i} && ${o}`);return i;function c(d,l){return`Cannot access ${d} ${l} levels up, current level is ${e}`}}Ce.getData=Go});var fr=y(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});var $s=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};Rs.default=$s});var Tt=y(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});var bs=Pt(),Ps=class extends Error{constructor(e,r,s,n){super(n||`can't resolve reference ${s} from id ${r}`),this.missingRef=(0,bs.resolveUrl)(e,r,s),this.missingSchema=(0,bs.normalizeId)((0,bs.getFullPath)(e,this.missingRef))}};Ss.default=Ps});var mr=y(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.resolveSchema=se.getCompilingSchema=se.resolveRef=se.compileSchema=se.SchemaEnv=void 0;var ae=b(),Ld=fr(),Fe=ve(),ce=Pt(),xo=I(),Hd=At(),it=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let s;typeof e.schema=="object"&&(s=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,ce.normalizeId)(s?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=s?.$async,this.refs={}}};se.SchemaEnv=it;function As(t){let e=ko.call(this,t);if(e)return e;let r=(0,ce.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:s,lines:n}=this.opts.code,{ownProperties:o}=this.opts,i=new ae.CodeGen(this.scope,{es5:s,lines:n,ownProperties:o}),a;t.$async&&(a=i.scopeValue("Error",{ref:Ld.default,code:(0,ae._)`require("ajv/dist/runtime/validation_error").default`}));let c=i.scopeName("validate");t.validateName=c;let d={gen:i,allErrors:this.opts.allErrors,data:Fe.default.data,parentData:Fe.default.parentData,parentDataProperty:Fe.default.parentDataProperty,dataNames:[Fe.default.data],dataPathArr:[ae.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:i.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,ae.stringify)(t.schema)}:{ref:t.schema}),validateName:c,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:ae.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,ae._)`""`,opts:this.opts,self:this},l;try{this._compilations.add(t),(0,Hd.validateFunctionCode)(d),i.optimize(this.opts.code.optimize);let u=i.toString();l=`${i.scopeRefs(Fe.default.scope)}return ${u}`,this.opts.code.process&&(l=this.opts.code.process(l,t));let m=new Function(`${Fe.default.self}`,`${Fe.default.scope}`,l)(this,this.scope.get());if(this.scope.value(c,{ref:m}),m.errors=null,m.schema=t.schema,m.schemaEnv=t,t.$async&&(m.$async=!0),this.opts.code.source===!0&&(m.source={validateName:c,validateCode:u,scopeValues:i._values}),this.opts.unevaluated){let{props:p,items:f}=d;m.evaluated={props:p instanceof ae.Name?void 0:p,items:f instanceof ae.Name?void 0:f,dynamicProps:p instanceof ae.Name,dynamicItems:f instanceof ae.Name},m.source&&(m.source.evaluated=(0,ae.stringify)(m.evaluated))}return t.validate=m,t}catch(u){throw delete t.validate,delete t.validateName,l&&this.logger.error("Error compiling schema, function code:",l),u}finally{this._compilations.delete(t)}}se.compileSchema=As;function Kd(t,e,r){var s;r=(0,ce.resolveUrl)(this.opts.uriResolver,e,r);let n=t.refs[r];if(n)return n;let o=Wd.call(this,t,r);if(o===void 0){let i=(s=t.localRefs)===null||s===void 0?void 0:s[r],{schemaId:a}=this.opts;i&&(o=new it({schema:i,schemaId:a,root:t,baseId:e}))}if(o!==void 0)return t.refs[r]=Bd.call(this,o)}se.resolveRef=Kd;function Bd(t){return(0,ce.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:As.call(this,t)}function ko(t){for(let e of this._compilations)if(zd(e,t))return e}se.getCompilingSchema=ko;function zd(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function Wd(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||pr.call(this,t,e)}function pr(t,e){let r=this.opts.uriResolver.parse(e),s=(0,ce._getFullPath)(this.opts.uriResolver,r),n=(0,ce.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&s===n)return Os.call(this,r,t);let o=(0,ce.normalizeId)(s),i=this.refs[o]||this.schemas[o];if(typeof i=="string"){let a=pr.call(this,t,i);return typeof a?.schema!="object"?void 0:Os.call(this,r,a)}if(typeof i?.schema=="object"){if(i.validate||As.call(this,i),o===(0,ce.normalizeId)(e)){let{schema:a}=i,{schemaId:c}=this.opts,d=a[c];return d&&(n=(0,ce.resolveUrl)(this.opts.uriResolver,n,d)),new it({schema:a,schemaId:c,root:t,baseId:n})}return Os.call(this,r,i)}}se.resolveSchema=pr;var Jd=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Os(t,{baseId:e,schema:r,root:s}){var n;if(((n=t.fragment)===null||n===void 0?void 0:n[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let c=r[(0,xo.unescapeFragment)(a)];if(c===void 0)return;r=c;let d=typeof r=="object"&&r[this.opts.schemaId];!Jd.has(a)&&d&&(e=(0,ce.resolveUrl)(this.opts.uriResolver,e,d))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,xo.schemaHasRulesButRef)(r,this.RULES)){let a=(0,ce.resolveUrl)(this.opts.uriResolver,e,r.$ref);o=pr.call(this,s,a)}let{schemaId:i}=this.opts;if(o=o||new it({schema:r,schemaId:i,root:s,baseId:e}),o.schema!==o.root.schema)return o}});var jo=y((_g,Qd)=>{Qd.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Uo=y((vg,Do)=>{"use strict";var Yd={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Do.exports={HEX:Yd}});var zo=y(($g,Bo)=>{"use strict";var{HEX:Xd}=Uo();function Lo(t){if(Ko(t,".")<3)return{host:t,isIPV4:!1};let e=t.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[r]=e;return r?{host:eu(r,"."),isIPV4:!0}:{host:t,isIPV4:!1}}function Ts(t,e=!1){let r="",s=!0;for(let n of t){if(Xd[n]===void 0)return;n!=="0"&&s===!0&&(s=!1),s||(r+=n)}return e&&r.length===0&&(r="0"),r}function Zd(t){let e=0,r={error:!1,address:"",zone:""},s=[],n=[],o=!1,i=!1,a=!1;function c(){if(n.length){if(o===!1){let d=Ts(n);if(d!==void 0)s.push(d);else return r.error=!0,!1}n.length=0}return!0}for(let d=0;d<t.length;d++){let l=t[d];if(!(l==="["||l==="]"))if(l===":"){if(i===!0&&(a=!0),!c())break;if(e++,s.push(":"),e>7){r.error=!0;break}d-1>=0&&t[d-1]===":"&&(i=!0);continue}else if(l==="%"){if(!c())break;o=!0}else{n.push(l);continue}}return n.length&&(o?r.zone=n.join(""):a?s.push(n.join("")):s.push(Ts(n))),r.address=s.join(""),r}function Ho(t,e={}){if(Ko(t,":")<2)return{host:t,isIPV6:!1};let r=Zd(t);if(r.error)return{host:t,isIPV6:!1};{let s=r.address,n=r.address;return r.zone&&(s+="%"+r.zone,n+="%25"+r.zone),{host:s,escapedHost:n,isIPV6:!0}}}function eu(t,e){let r="",s=!0,n=t.length;for(let o=0;o<n;o++){let i=t[o];i==="0"&&s?(o+1<=n&&t[o+1]===e||o+1===n)&&(r+=i,s=!1):(i===e?s=!0:s=!1,r+=i)}return r}function Ko(t,e){let r=0;for(let s=0;s<t.length;s++)t[s]===e&&r++;return r}var qo=/^\.\.?\//u,Vo=/^\/\.(?:\/|$)/u,Fo=/^\/\.\.(?:\/|$)/u,tu=/^\/?(?:.|\n)*?(?=\/|$)/u;function ru(t){let e=[];for(;t.length;)if(t.match(qo))t=t.replace(qo,"");else if(t.match(Vo))t=t.replace(Vo,"/");else if(t.match(Fo))t=t.replace(Fo,"/"),e.pop();else if(t==="."||t==="..")t="";else{let r=t.match(tu);if(r){let s=r[0];t=t.slice(s.length),e.push(s)}else throw new Error("Unexpected dot segment condition")}return e.join("")}function su(t,e){let r=e!==!0?escape:unescape;return t.scheme!==void 0&&(t.scheme=r(t.scheme)),t.userinfo!==void 0&&(t.userinfo=r(t.userinfo)),t.host!==void 0&&(t.host=r(t.host)),t.path!==void 0&&(t.path=r(t.path)),t.query!==void 0&&(t.query=r(t.query)),t.fragment!==void 0&&(t.fragment=r(t.fragment)),t}function nu(t,e){let r=[];if(t.userinfo!==void 0&&(r.push(t.userinfo),r.push("@")),t.host!==void 0){let s=unescape(t.host),n=Lo(s);if(n.isIPV4)s=n.host;else{let o=Ho(n.host,{isIPV4:!1});o.isIPV6===!0?s=`[${o.escapedHost}]`:s=t.host}r.push(s)}return(typeof t.port=="number"||typeof t.port=="string")&&(r.push(":"),r.push(String(t.port))),r.length?r.join(""):void 0}Bo.exports={recomposeAuthority:nu,normalizeComponentEncoding:su,removeDotSegments:ru,normalizeIPv4:Lo,normalizeIPv6:Ho,stringArrayToHexStripped:Ts}});var Zo=y((Rg,Xo)=>{"use strict";var ou=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,iu=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function Wo(t){return typeof t.secure=="boolean"?t.secure:String(t.scheme).toLowerCase()==="wss"}function Jo(t){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t}function Qo(t){let e=String(t.scheme).toLowerCase()==="https";return(t.port===(e?443:80)||t.port==="")&&(t.port=void 0),t.path||(t.path="/"),t}function au(t){return t.secure=Wo(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t}function cu(t){if((t.port===(Wo(t)?443:80)||t.port==="")&&(t.port=void 0),typeof t.secure=="boolean"&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){let[e,r]=t.resourceName.split("?");t.path=e&&e!=="/"?e:void 0,t.query=r,t.resourceName=void 0}return t.fragment=void 0,t}function lu(t,e){if(!t.path)return t.error="URN can not be parsed",t;let r=t.path.match(iu);if(r){let s=e.scheme||t.scheme||"urn";t.nid=r[1].toLowerCase(),t.nss=r[2];let n=`${s}:${e.nid||t.nid}`,o=Ns[n];t.path=void 0,o&&(t=o.parse(t,e))}else t.error=t.error||"URN can not be parsed.";return t}function du(t,e){let r=e.scheme||t.scheme||"urn",s=t.nid.toLowerCase(),n=`${r}:${e.nid||s}`,o=Ns[n];o&&(t=o.serialize(t,e));let i=t,a=t.nss;return i.path=`${s||e.nid}:${a}`,e.skipEscape=!0,i}function uu(t,e){let r=t;return r.uuid=r.nss,r.nss=void 0,!e.tolerant&&(!r.uuid||!ou.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function fu(t){let e=t;return e.nss=(t.uuid||"").toLowerCase(),e}var Yo={scheme:"http",domainHost:!0,parse:Jo,serialize:Qo},pu={scheme:"https",domainHost:Yo.domainHost,parse:Jo,serialize:Qo},hr={scheme:"ws",domainHost:!0,parse:au,serialize:cu},mu={scheme:"wss",domainHost:hr.domainHost,parse:hr.parse,serialize:hr.serialize},hu={scheme:"urn",parse:lu,serialize:du,skipNormalize:!0},gu={scheme:"urn:uuid",parse:uu,serialize:fu,skipNormalize:!0},Ns={http:Yo,https:pu,ws:hr,wss:mu,urn:hu,"urn:uuid":gu};Xo.exports=Ns});var ti=y((bg,yr)=>{"use strict";var{normalizeIPv6:yu,normalizeIPv4:wu,removeDotSegments:Nt,recomposeAuthority:Eu,normalizeComponentEncoding:gr}=zo(),Is=Zo();function _u(t,e){return typeof t=="string"?t=me(Re(t,e),e):typeof t=="object"&&(t=Re(me(t,e),e)),t}function vu(t,e,r){let s=Object.assign({scheme:"null"},r),n=ei(Re(t,s),Re(e,s),s,!0);return me(n,{...s,skipEscape:!0})}function ei(t,e,r,s){let n={};return s||(t=Re(me(t,r),r),e=Re(me(e,r),r)),r=r||{},!r.tolerant&&e.scheme?(n.scheme=e.scheme,n.userinfo=e.userinfo,n.host=e.host,n.port=e.port,n.path=Nt(e.path||""),n.query=e.query):(e.userinfo!==void 0||e.host!==void 0||e.port!==void 0?(n.userinfo=e.userinfo,n.host=e.host,n.port=e.port,n.path=Nt(e.path||""),n.query=e.query):(e.path?(e.path.charAt(0)==="/"?n.path=Nt(e.path):((t.userinfo!==void 0||t.host!==void 0||t.port!==void 0)&&!t.path?n.path="/"+e.path:t.path?n.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:n.path=e.path,n.path=Nt(n.path)),n.query=e.query):(n.path=t.path,e.query!==void 0?n.query=e.query:n.query=t.query),n.userinfo=t.userinfo,n.host=t.host,n.port=t.port),n.scheme=t.scheme),n.fragment=e.fragment,n}function $u(t,e,r){return typeof t=="string"?(t=unescape(t),t=me(gr(Re(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=me(gr(t,!0),{...r,skipEscape:!0})),typeof e=="string"?(e=unescape(e),e=me(gr(Re(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=me(gr(e,!0),{...r,skipEscape:!0})),t.toLowerCase()===e.toLowerCase()}function me(t,e){let r={host:t.host,scheme:t.scheme,userinfo:t.userinfo,port:t.port,path:t.path,query:t.query,nid:t.nid,nss:t.nss,uuid:t.uuid,fragment:t.fragment,reference:t.reference,resourceName:t.resourceName,secure:t.secure,error:""},s=Object.assign({},e),n=[],o=Is[(s.scheme||r.scheme||"").toLowerCase()];o&&o.serialize&&o.serialize(r,s),r.path!==void 0&&(s.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),s.reference!=="suffix"&&r.scheme&&(n.push(r.scheme),n.push(":"));let i=Eu(r,s);if(i!==void 0&&(s.reference!=="suffix"&&n.push("//"),n.push(i),r.path&&r.path.charAt(0)!=="/"&&n.push("/")),r.path!==void 0){let a=r.path;!s.absolutePath&&(!o||!o.absolutePath)&&(a=Nt(a)),i===void 0&&(a=a.replace(/^\/\//u,"/%2F")),n.push(a)}return r.query!==void 0&&(n.push("?"),n.push(r.query)),r.fragment!==void 0&&(n.push("#"),n.push(r.fragment)),n.join("")}var Ru=Array.from({length:127},(t,e)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(e)));function bu(t){let e=0;for(let r=0,s=t.length;r<s;++r)if(e=t.charCodeAt(r),e>126||Ru[e])return!0;return!1}var Pu=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Re(t,e){let r=Object.assign({},e),s={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},n=t.indexOf("%")!==-1,o=!1;r.reference==="suffix"&&(t=(r.scheme?r.scheme+":":"")+"//"+t);let i=t.match(Pu);if(i){if(s.scheme=i[1],s.userinfo=i[3],s.host=i[4],s.port=parseInt(i[5],10),s.path=i[6]||"",s.query=i[7],s.fragment=i[8],isNaN(s.port)&&(s.port=i[5]),s.host){let c=wu(s.host);if(c.isIPV4===!1){let d=yu(c.host,{isIPV4:!1});s.host=d.host.toLowerCase(),o=d.isIPV6}else s.host=c.host,o=!0}s.scheme===void 0&&s.userinfo===void 0&&s.host===void 0&&s.port===void 0&&!s.path&&s.query===void 0?s.reference="same-document":s.scheme===void 0?s.reference="relative":s.fragment===void 0?s.reference="absolute":s.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==s.reference&&(s.error=s.error||"URI is not a "+r.reference+" reference.");let a=Is[(r.scheme||s.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!a||!a.unicodeSupport)&&s.host&&(r.domainHost||a&&a.domainHost)&&o===!1&&bu(s.host))try{s.host=URL.domainToASCII(s.host.toLowerCase())}catch(c){s.error=s.error||"Host's domain name can not be converted to ASCII: "+c}(!a||a&&!a.skipNormalize)&&(n&&s.scheme!==void 0&&(s.scheme=unescape(s.scheme)),n&&s.userinfo!==void 0&&(s.userinfo=unescape(s.userinfo)),n&&s.host!==void 0&&(s.host=unescape(s.host)),s.path!==void 0&&s.path.length&&(s.path=escape(unescape(s.path))),s.fragment!==void 0&&s.fragment.length&&(s.fragment=encodeURI(decodeURIComponent(s.fragment)))),a&&a.parse&&a.parse(s,r)}else s.error=s.error||"URI can not be parsed.";return s}var Cs={SCHEMES:Is,normalize:_u,resolve:vu,resolveComponents:ei,equal:$u,serialize:me,parse:Re};yr.exports=Cs;yr.exports.default=Cs;yr.exports.fastUri=Cs});var si=y(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});var ri=ti();ri.code='require("ajv/dist/runtime/uri").default';Ms.default=ri});var ui=y(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.CodeGen=V.Name=V.nil=V.stringify=V.str=V._=V.KeywordCxt=void 0;var Su=At();Object.defineProperty(V,"KeywordCxt",{enumerable:!0,get:function(){return Su.KeywordCxt}});var at=b();Object.defineProperty(V,"_",{enumerable:!0,get:function(){return at._}});Object.defineProperty(V,"str",{enumerable:!0,get:function(){return at.str}});Object.defineProperty(V,"stringify",{enumerable:!0,get:function(){return at.stringify}});Object.defineProperty(V,"nil",{enumerable:!0,get:function(){return at.nil}});Object.defineProperty(V,"Name",{enumerable:!0,get:function(){return at.Name}});Object.defineProperty(V,"CodeGen",{enumerable:!0,get:function(){return at.CodeGen}});var Ou=fr(),ci=Tt(),Au=ls(),It=mr(),Tu=b(),Ct=Pt(),wr=bt(),xs=I(),ni=jo(),Nu=si(),li=(t,e)=>new RegExp(t,e);li.code="new RegExp";var Iu=["removeAdditional","useDefaults","coerceTypes"],Cu=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),Mu={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},Gu={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},oi=200;function xu(t){var e,r,s,n,o,i,a,c,d,l,u,g,m,p,f,h,w,A,S,G,v,de,ge,Gr,xr;let pt=t.strict,kr=(e=t.code)===null||e===void 0?void 0:e.optimize,Cn=kr===!0||kr===void 0?1:kr||0,Mn=(s=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&s!==void 0?s:li,Za=(n=t.uriResolver)!==null&&n!==void 0?n:Nu.default;return{strictSchema:(i=(o=t.strictSchema)!==null&&o!==void 0?o:pt)!==null&&i!==void 0?i:!0,strictNumbers:(c=(a=t.strictNumbers)!==null&&a!==void 0?a:pt)!==null&&c!==void 0?c:!0,strictTypes:(l=(d=t.strictTypes)!==null&&d!==void 0?d:pt)!==null&&l!==void 0?l:"log",strictTuples:(g=(u=t.strictTuples)!==null&&u!==void 0?u:pt)!==null&&g!==void 0?g:"log",strictRequired:(p=(m=t.strictRequired)!==null&&m!==void 0?m:pt)!==null&&p!==void 0?p:!1,code:t.code?{...t.code,optimize:Cn,regExp:Mn}:{optimize:Cn,regExp:Mn},loopRequired:(f=t.loopRequired)!==null&&f!==void 0?f:oi,loopEnum:(h=t.loopEnum)!==null&&h!==void 0?h:oi,meta:(w=t.meta)!==null&&w!==void 0?w:!0,messages:(A=t.messages)!==null&&A!==void 0?A:!0,inlineRefs:(S=t.inlineRefs)!==null&&S!==void 0?S:!0,schemaId:(G=t.schemaId)!==null&&G!==void 0?G:"$id",addUsedSchema:(v=t.addUsedSchema)!==null&&v!==void 0?v:!0,validateSchema:(de=t.validateSchema)!==null&&de!==void 0?de:!0,validateFormats:(ge=t.validateFormats)!==null&&ge!==void 0?ge:!0,unicodeRegExp:(Gr=t.unicodeRegExp)!==null&&Gr!==void 0?Gr:!0,int32range:(xr=t.int32range)!==null&&xr!==void 0?xr:!0,uriResolver:Za}}var Mt=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...xu(e)};let{es5:r,lines:s}=this.opts.code;this.scope=new Tu.ValueScope({scope:{},prefixes:Cu,es5:r,lines:s}),this.logger=Vu(e.logger);let n=e.validateFormats;e.validateFormats=!1,this.RULES=(0,Au.getRules)(),ii.call(this,Mu,e,"NOT SUPPORTED"),ii.call(this,Gu,e,"DEPRECATED","warn"),this._metaOpts=Uu.call(this),e.formats&&ju.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&Du.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),ku.call(this),e.validateFormats=n}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:s}=this.opts,n=ni;s==="id"&&(n={...ni},n.id=n.$id,delete n.$id),r&&e&&this.addMetaSchema(n,n[s],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let s;if(typeof e=="string"){if(s=this.getSchema(e),!s)throw new Error(`no schema with key or ref "${e}"`)}else s=this.compile(e);let n=s(r);return"$async"in s||(this.errors=s.errors),n}compile(e,r){let s=this._addSchema(e,r);return s.validate||this._compileSchemaEnv(s)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:s}=this.opts;return n.call(this,e,r);async function n(l,u){await o.call(this,l.$schema);let g=this._addSchema(l,u);return g.validate||i.call(this,g)}async function o(l){l&&!this.getSchema(l)&&await n.call(this,{$ref:l},!0)}async function i(l){try{return this._compileSchemaEnv(l)}catch(u){if(!(u instanceof ci.default))throw u;return a.call(this,u),await c.call(this,u.missingSchema),i.call(this,l)}}function a({missingSchema:l,missingRef:u}){if(this.refs[l])throw new Error(`AnySchema ${l} is loaded but ${u} cannot be resolved`)}async function c(l){let u=await d.call(this,l);this.refs[l]||await o.call(this,u.$schema),this.refs[l]||this.addSchema(u,l,r)}async function d(l){let u=this._loading[l];if(u)return u;try{return await(this._loading[l]=s(l))}finally{delete this._loading[l]}}}addSchema(e,r,s,n=this.opts.validateSchema){if(Array.isArray(e)){for(let i of e)this.addSchema(i,void 0,s,n);return this}let o;if(typeof e=="object"){let{schemaId:i}=this.opts;if(o=e[i],o!==void 0&&typeof o!="string")throw new Error(`schema ${i} must be string`)}return r=(0,Ct.normalizeId)(r||o),this._checkUnique(r),this.schemas[r]=this._addSchema(e,s,r,n,!0),this}addMetaSchema(e,r,s=this.opts.validateSchema){return this.addSchema(e,r,!0,s),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let s;if(s=e.$schema,s!==void 0&&typeof s!="string")throw new Error("$schema must be a string");if(s=s||this.opts.defaultMeta||this.defaultMeta(),!s)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let n=this.validate(s,e);if(!n&&r){let o="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(o);else throw new Error(o)}return n}getSchema(e){let r;for(;typeof(r=ai.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:s}=this.opts,n=new It.SchemaEnv({schema:{},schemaId:s});if(r=It.resolveSchema.call(this,n,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=ai.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let s=e[this.opts.schemaId];return s&&(s=(0,Ct.normalizeId)(s),delete this.schemas[s],delete this.refs[s]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let s;if(typeof e=="string")s=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=s);else if(typeof e=="object"&&r===void 0){if(r=e,s=r.keyword,Array.isArray(s)&&!s.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Lu.call(this,s,r),!r)return(0,xs.eachItem)(s,o=>Gs.call(this,o)),this;Ku.call(this,r);let n={...r,type:(0,wr.getJSONTypes)(r.type),schemaType:(0,wr.getJSONTypes)(r.schemaType)};return(0,xs.eachItem)(s,n.type.length===0?o=>Gs.call(this,o,n):o=>n.type.forEach(i=>Gs.call(this,o,n,i))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let s of r.rules){let n=s.rules.findIndex(o=>o.keyword===e);n>=0&&s.rules.splice(n,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:s="data"}={}){return!e||e.length===0?"No errors":e.map(n=>`${s}${n.instancePath} ${n.message}`).reduce((n,o)=>n+r+o)}$dataMetaSchema(e,r){let s=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let n of r){let o=n.split("/").slice(1),i=e;for(let a of o)i=i[a];for(let a in s){let c=s[a];if(typeof c!="object")continue;let{$data:d}=c.definition,l=i[a];d&&l&&(i[a]=di(l))}}return e}_removeAllSchemas(e,r){for(let s in e){let n=e[s];(!r||r.test(s))&&(typeof n=="string"?delete e[s]:n&&!n.meta&&(this._cache.delete(n.schema),delete e[s]))}}_addSchema(e,r,s,n=this.opts.validateSchema,o=this.opts.addUsedSchema){let i,{schemaId:a}=this.opts;if(typeof e=="object")i=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let c=this._cache.get(e);if(c!==void 0)return c;s=(0,Ct.normalizeId)(i||s);let d=Ct.getSchemaRefs.call(this,e,s);return c=new It.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:s,localRefs:d}),this._cache.set(c.schema,c),o&&!s.startsWith("#")&&(s&&this._checkUnique(s),this.refs[s]=c),n&&this.validateSchema(e,!0),c}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):It.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{It.compileSchema.call(this,e)}finally{this.opts=r}}};Mt.ValidationError=Ou.default;Mt.MissingRefError=ci.default;V.default=Mt;function ii(t,e,r,s="error"){for(let n in t){let o=n;o in e&&this.logger[s](`${r}: option ${n}. ${t[o]}`)}}function ai(t){return t=(0,Ct.normalizeId)(t),this.schemas[t]||this.refs[t]}function ku(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function ju(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function Du(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function Uu(){let t={...this.opts};for(let e of Iu)delete t[e];return t}var qu={log(){},warn(){},error(){}};function Vu(t){if(t===!1)return qu;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var Fu=/^[a-z_$][a-z0-9_$:-]*$/i;function Lu(t,e){let{RULES:r}=this;if((0,xs.eachItem)(t,s=>{if(r.keywords[s])throw new Error(`Keyword ${s} is already defined`);if(!Fu.test(s))throw new Error(`Keyword ${s} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function Gs(t,e,r){var s;let n=e?.post;if(r&&n)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:o}=this,i=n?o.post:o.rules.find(({type:c})=>c===r);if(i||(i={type:r,rules:[]},o.rules.push(i)),o.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,wr.getJSONTypes)(e.type),schemaType:(0,wr.getJSONTypes)(e.schemaType)}};e.before?Hu.call(this,i,a,e.before):i.rules.push(a),o.all[t]=a,(s=e.implements)===null||s===void 0||s.forEach(c=>this.addKeyword(c))}function Hu(t,e,r){let s=t.rules.findIndex(n=>n.keyword===r);s>=0?t.rules.splice(s,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function Ku(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=di(e)),t.validateSchema=this.compile(e,!0))}var Bu={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function di(t){return{anyOf:[t,Bu]}}});var fi=y(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});var zu={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};ks.default=zu});var gi=y(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.callRef=Le.getValidate=void 0;var Wu=Tt(),pi=re(),ee=b(),ct=ve(),mi=mr(),Er=I(),Ju={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:s}=t,{baseId:n,schemaEnv:o,validateName:i,opts:a,self:c}=s,{root:d}=o;if((r==="#"||r==="#/")&&n===d.baseId)return u();let l=mi.resolveRef.call(c,d,n,r);if(l===void 0)throw new Wu.default(s.opts.uriResolver,n,r);if(l instanceof mi.SchemaEnv)return g(l);return m(l);function u(){if(o===d)return _r(t,i,o,o.$async);let p=e.scopeValue("root",{ref:d});return _r(t,(0,ee._)`${p}.validate`,d,d.$async)}function g(p){let f=hi(t,p);_r(t,f,p,p.$async)}function m(p){let f=e.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,ee.stringify)(p)}:{ref:p}),h=e.name("valid"),w=t.subschema({schema:p,dataTypes:[],schemaPath:ee.nil,topSchemaRef:f,errSchemaPath:r},h);t.mergeEvaluated(w),t.ok(h)}}};function hi(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,ee._)`${r.scopeValue("wrapper",{ref:e})}.validate`}Le.getValidate=hi;function _r(t,e,r,s){let{gen:n,it:o}=t,{allErrors:i,schemaEnv:a,opts:c}=o,d=c.passContext?ct.default.this:ee.nil;s?l():u();function l(){if(!a.$async)throw new Error("async schema referenced by sync schema");let p=n.let("valid");n.try(()=>{n.code((0,ee._)`await ${(0,pi.callValidateCode)(t,e,d)}`),m(e),i||n.assign(p,!0)},f=>{n.if((0,ee._)`!(${f} instanceof ${o.ValidationError})`,()=>n.throw(f)),g(f),i||n.assign(p,!1)}),t.ok(p)}function u(){t.result((0,pi.callValidateCode)(t,e,d),()=>m(e),()=>g(e))}function g(p){let f=(0,ee._)`${p}.errors`;n.assign(ct.default.vErrors,(0,ee._)`${ct.default.vErrors} === null ? ${f} : ${ct.default.vErrors}.concat(${f})`),n.assign(ct.default.errors,(0,ee._)`${ct.default.vErrors}.length`)}function m(p){var f;if(!o.opts.unevaluated)return;let h=(f=r?.validate)===null||f===void 0?void 0:f.evaluated;if(o.props!==!0)if(h&&!h.dynamicProps)h.props!==void 0&&(o.props=Er.mergeEvaluated.props(n,h.props,o.props));else{let w=n.var("props",(0,ee._)`${p}.evaluated.props`);o.props=Er.mergeEvaluated.props(n,w,o.props,ee.Name)}if(o.items!==!0)if(h&&!h.dynamicItems)h.items!==void 0&&(o.items=Er.mergeEvaluated.items(n,h.items,o.items));else{let w=n.var("items",(0,ee._)`${p}.evaluated.items`);o.items=Er.mergeEvaluated.items(n,w,o.items,ee.Name)}}}Le.callRef=_r;Le.default=Ju});var yi=y(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});var Qu=fi(),Yu=gi(),Xu=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Qu.default,Yu.default];js.default=Xu});var wi=y(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});var vr=b(),Me=vr.operators,$r={maximum:{okStr:"<=",ok:Me.LTE,fail:Me.GT},minimum:{okStr:">=",ok:Me.GTE,fail:Me.LT},exclusiveMaximum:{okStr:"<",ok:Me.LT,fail:Me.GTE},exclusiveMinimum:{okStr:">",ok:Me.GT,fail:Me.LTE}},Zu={message:({keyword:t,schemaCode:e})=>(0,vr.str)`must be ${$r[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,vr._)`{comparison: ${$r[t].okStr}, limit: ${e}}`},ef={keyword:Object.keys($r),type:"number",schemaType:"number",$data:!0,error:Zu,code(t){let{keyword:e,data:r,schemaCode:s}=t;t.fail$data((0,vr._)`${r} ${$r[e].fail} ${s} || isNaN(${r})`)}};Ds.default=ef});var Ei=y(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});var Gt=b(),tf={message:({schemaCode:t})=>(0,Gt.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Gt._)`{multipleOf: ${t}}`},rf={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:tf,code(t){let{gen:e,data:r,schemaCode:s,it:n}=t,o=n.opts.multipleOfPrecision,i=e.let("res"),a=o?(0,Gt._)`Math.abs(Math.round(${i}) - ${i}) > 1e-${o}`:(0,Gt._)`${i} !== parseInt(${i})`;t.fail$data((0,Gt._)`(${s} === 0 || (${i} = ${r}/${s}, ${a}))`)}};Us.default=rf});var vi=y(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});function _i(t){let e=t.length,r=0,s=0,n;for(;s<e;)r++,n=t.charCodeAt(s++),n>=55296&&n<=56319&&s<e&&(n=t.charCodeAt(s),(n&64512)===56320&&s++);return r}qs.default=_i;_i.code='require("ajv/dist/runtime/ucs2length").default'});var $i=y(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});var He=b(),sf=I(),nf=vi(),of={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,He.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,He._)`{limit: ${t}}`},af={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:of,code(t){let{keyword:e,data:r,schemaCode:s,it:n}=t,o=e==="maxLength"?He.operators.GT:He.operators.LT,i=n.opts.unicode===!1?(0,He._)`${r}.length`:(0,He._)`${(0,sf.useFunc)(t.gen,nf.default)}(${r})`;t.fail$data((0,He._)`${i} ${o} ${s}`)}};Vs.default=af});var Ri=y(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});var cf=re(),Rr=b(),lf={message:({schemaCode:t})=>(0,Rr.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,Rr._)`{pattern: ${t}}`},df={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:lf,code(t){let{data:e,$data:r,schema:s,schemaCode:n,it:o}=t,i=o.opts.unicodeRegExp?"u":"",a=r?(0,Rr._)`(new RegExp(${n}, ${i}))`:(0,cf.usePattern)(t,s);t.fail$data((0,Rr._)`!${a}.test(${e})`)}};Fs.default=df});var bi=y(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});var xt=b(),uf={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,xt.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,xt._)`{limit: ${t}}`},ff={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:uf,code(t){let{keyword:e,data:r,schemaCode:s}=t,n=e==="maxProperties"?xt.operators.GT:xt.operators.LT;t.fail$data((0,xt._)`Object.keys(${r}).length ${n} ${s}`)}};Ls.default=ff});var Pi=y(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});var kt=re(),jt=b(),pf=I(),mf={message:({params:{missingProperty:t}})=>(0,jt.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,jt._)`{missingProperty: ${t}}`},hf={keyword:"required",type:"object",schemaType:"array",$data:!0,error:mf,code(t){let{gen:e,schema:r,schemaCode:s,data:n,$data:o,it:i}=t,{opts:a}=i;if(!o&&r.length===0)return;let c=r.length>=a.loopRequired;if(i.allErrors?d():l(),a.strictRequired){let m=t.parentSchema.properties,{definedProperties:p}=t.it;for(let f of r)if(m?.[f]===void 0&&!p.has(f)){let h=i.schemaEnv.baseId+i.errSchemaPath,w=`required property "${f}" is not defined at "${h}" (strictRequired)`;(0,pf.checkStrictMode)(i,w,i.opts.strictRequired)}}function d(){if(c||o)t.block$data(jt.nil,u);else for(let m of r)(0,kt.checkReportMissingProp)(t,m)}function l(){let m=e.let("missing");if(c||o){let p=e.let("valid",!0);t.block$data(p,()=>g(m,p)),t.ok(p)}else e.if((0,kt.checkMissingProp)(t,r,m)),(0,kt.reportMissingProp)(t,m),e.else()}function u(){e.forOf("prop",s,m=>{t.setParams({missingProperty:m}),e.if((0,kt.noPropertyInData)(e,n,m,a.ownProperties),()=>t.error())})}function g(m,p){t.setParams({missingProperty:m}),e.forOf(m,s,()=>{e.assign(p,(0,kt.propertyInData)(e,n,m,a.ownProperties)),e.if((0,jt.not)(p),()=>{t.error(),e.break()})},jt.nil)}}};Hs.default=hf});var Si=y(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});var Dt=b(),gf={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,Dt.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,Dt._)`{limit: ${t}}`},yf={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:gf,code(t){let{keyword:e,data:r,schemaCode:s}=t,n=e==="maxItems"?Dt.operators.GT:Dt.operators.LT;t.fail$data((0,Dt._)`${r}.length ${n} ${s}`)}};Ks.default=yf});var br=y(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});var Oi=ys();Oi.code='require("ajv/dist/runtime/equal").default';Bs.default=Oi});var Ai=y(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});var zs=bt(),F=b(),wf=I(),Ef=br(),_f={message:({params:{i:t,j:e}})=>(0,F.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,F._)`{i: ${t}, j: ${e}}`},vf={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:_f,code(t){let{gen:e,data:r,$data:s,schema:n,parentSchema:o,schemaCode:i,it:a}=t;if(!s&&!n)return;let c=e.let("valid"),d=o.items?(0,zs.getSchemaTypes)(o.items):[];t.block$data(c,l,(0,F._)`${i} === false`),t.ok(c);function l(){let p=e.let("i",(0,F._)`${r}.length`),f=e.let("j");t.setParams({i:p,j:f}),e.assign(c,!0),e.if((0,F._)`${p} > 1`,()=>(u()?g:m)(p,f))}function u(){return d.length>0&&!d.some(p=>p==="object"||p==="array")}function g(p,f){let h=e.name("item"),w=(0,zs.checkDataTypes)(d,h,a.opts.strictNumbers,zs.DataType.Wrong),A=e.const("indices",(0,F._)`{}`);e.for((0,F._)`;${p}--;`,()=>{e.let(h,(0,F._)`${r}[${p}]`),e.if(w,(0,F._)`continue`),d.length>1&&e.if((0,F._)`typeof ${h} == "string"`,(0,F._)`${h} += "_"`),e.if((0,F._)`typeof ${A}[${h}] == "number"`,()=>{e.assign(f,(0,F._)`${A}[${h}]`),t.error(),e.assign(c,!1).break()}).code((0,F._)`${A}[${h}] = ${p}`)})}function m(p,f){let h=(0,wf.useFunc)(e,Ef.default),w=e.name("outer");e.label(w).for((0,F._)`;${p}--;`,()=>e.for((0,F._)`${f} = ${p}; ${f}--;`,()=>e.if((0,F._)`${h}(${r}[${p}], ${r}[${f}])`,()=>{t.error(),e.assign(c,!1).break(w)})))}}};Ws.default=vf});var Ti=y(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});var Js=b(),$f=I(),Rf=br(),bf={message:"must be equal to constant",params:({schemaCode:t})=>(0,Js._)`{allowedValue: ${t}}`},Pf={keyword:"const",$data:!0,error:bf,code(t){let{gen:e,data:r,$data:s,schemaCode:n,schema:o}=t;s||o&&typeof o=="object"?t.fail$data((0,Js._)`!${(0,$f.useFunc)(e,Rf.default)}(${r}, ${n})`):t.fail((0,Js._)`${o} !== ${r}`)}};Qs.default=Pf});var Ni=y(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});var Ut=b(),Sf=I(),Of=br(),Af={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,Ut._)`{allowedValues: ${t}}`},Tf={keyword:"enum",schemaType:"array",$data:!0,error:Af,code(t){let{gen:e,data:r,$data:s,schema:n,schemaCode:o,it:i}=t;if(!s&&n.length===0)throw new Error("enum must have non-empty array");let a=n.length>=i.opts.loopEnum,c,d=()=>c??(c=(0,Sf.useFunc)(e,Of.default)),l;if(a||s)l=e.let("valid"),t.block$data(l,u);else{if(!Array.isArray(n))throw new Error("ajv implementation error");let m=e.const("vSchema",o);l=(0,Ut.or)(...n.map((p,f)=>g(m,f)))}t.pass(l);function u(){e.assign(l,!1),e.forOf("v",o,m=>e.if((0,Ut._)`${d()}(${r}, ${m})`,()=>e.assign(l,!0).break()))}function g(m,p){let f=n[p];return typeof f=="object"&&f!==null?(0,Ut._)`${d()}(${r}, ${m}[${p}])`:(0,Ut._)`${r} === ${f}`}}};Ys.default=Tf});var Ii=y(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});var Nf=wi(),If=Ei(),Cf=$i(),Mf=Ri(),Gf=bi(),xf=Pi(),kf=Si(),jf=Ai(),Df=Ti(),Uf=Ni(),qf=[Nf.default,If.default,Cf.default,Mf.default,Gf.default,xf.default,kf.default,jf.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Df.default,Uf.default];Xs.default=qf});var en=y(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.validateAdditionalItems=void 0;var Ke=b(),Zs=I(),Vf={message:({params:{len:t}})=>(0,Ke.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Ke._)`{limit: ${t}}`},Ff={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Vf,code(t){let{parentSchema:e,it:r}=t,{items:s}=e;if(!Array.isArray(s)){(0,Zs.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Ci(t,s)}};function Ci(t,e){let{gen:r,schema:s,data:n,keyword:o,it:i}=t;i.items=!0;let a=r.const("len",(0,Ke._)`${n}.length`);if(s===!1)t.setParams({len:e.length}),t.pass((0,Ke._)`${a} <= ${e.length}`);else if(typeof s=="object"&&!(0,Zs.alwaysValidSchema)(i,s)){let d=r.var("valid",(0,Ke._)`${a} <= ${e.length}`);r.if((0,Ke.not)(d),()=>c(d)),t.ok(d)}function c(d){r.forRange("i",e.length,a,l=>{t.subschema({keyword:o,dataProp:l,dataPropType:Zs.Type.Num},d),i.allErrors||r.if((0,Ke.not)(d),()=>r.break())})}}qt.validateAdditionalItems=Ci;qt.default=Ff});var tn=y(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.validateTuple=void 0;var Mi=b(),Pr=I(),Lf=re(),Hf={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return Gi(t,"additionalItems",e);r.items=!0,!(0,Pr.alwaysValidSchema)(r,e)&&t.ok((0,Lf.validateArray)(t))}};function Gi(t,e,r=t.schema){let{gen:s,parentSchema:n,data:o,keyword:i,it:a}=t;l(n),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=Pr.mergeEvaluated.items(s,r.length,a.items));let c=s.name("valid"),d=s.const("len",(0,Mi._)`${o}.length`);r.forEach((u,g)=>{(0,Pr.alwaysValidSchema)(a,u)||(s.if((0,Mi._)`${d} > ${g}`,()=>t.subschema({keyword:i,schemaProp:g,dataProp:g},c)),t.ok(c))});function l(u){let{opts:g,errSchemaPath:m}=a,p=r.length,f=p===u.minItems&&(p===u.maxItems||u[e]===!1);if(g.strictTuples&&!f){let h=`"${i}" is ${p}-tuple, but minItems or maxItems/${e} are not specified or different at path "${m}"`;(0,Pr.checkStrictMode)(a,h,g.strictTuples)}}}Vt.validateTuple=Gi;Vt.default=Hf});var xi=y(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});var Kf=tn(),Bf={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,Kf.validateTuple)(t,"items")};rn.default=Bf});var ji=y(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});var ki=b(),zf=I(),Wf=re(),Jf=en(),Qf={message:({params:{len:t}})=>(0,ki.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,ki._)`{limit: ${t}}`},Yf={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Qf,code(t){let{schema:e,parentSchema:r,it:s}=t,{prefixItems:n}=r;s.items=!0,!(0,zf.alwaysValidSchema)(s,e)&&(n?(0,Jf.validateAdditionalItems)(t,n):t.ok((0,Wf.validateArray)(t)))}};sn.default=Yf});var Di=y(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});var ne=b(),Sr=I(),Xf={message:({params:{min:t,max:e}})=>e===void 0?(0,ne.str)`must contain at least ${t} valid item(s)`:(0,ne.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,ne._)`{minContains: ${t}}`:(0,ne._)`{minContains: ${t}, maxContains: ${e}}`},Zf={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Xf,code(t){let{gen:e,schema:r,parentSchema:s,data:n,it:o}=t,i,a,{minContains:c,maxContains:d}=s;o.opts.next?(i=c===void 0?1:c,a=d):i=1;let l=e.const("len",(0,ne._)`${n}.length`);if(t.setParams({min:i,max:a}),a===void 0&&i===0){(0,Sr.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&i>a){(0,Sr.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Sr.alwaysValidSchema)(o,r)){let f=(0,ne._)`${l} >= ${i}`;a!==void 0&&(f=(0,ne._)`${f} && ${l} <= ${a}`),t.pass(f);return}o.items=!0;let u=e.name("valid");a===void 0&&i===1?m(u,()=>e.if(u,()=>e.break())):i===0?(e.let(u,!0),a!==void 0&&e.if((0,ne._)`${n}.length > 0`,g)):(e.let(u,!1),g()),t.result(u,()=>t.reset());function g(){let f=e.name("_valid"),h=e.let("count",0);m(f,()=>e.if(f,()=>p(h)))}function m(f,h){e.forRange("i",0,l,w=>{t.subschema({keyword:"contains",dataProp:w,dataPropType:Sr.Type.Num,compositeRule:!0},f),h()})}function p(f){e.code((0,ne._)`${f}++`),a===void 0?e.if((0,ne._)`${f} >= ${i}`,()=>e.assign(u,!0).break()):(e.if((0,ne._)`${f} > ${a}`,()=>e.assign(u,!1).break()),i===1?e.assign(u,!0):e.if((0,ne._)`${f} >= ${i}`,()=>e.assign(u,!0)))}}};nn.default=Zf});var Vi=y(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.validateSchemaDeps=he.validatePropertyDeps=he.error=void 0;var on=b(),ep=I(),Ft=re();he.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let s=e===1?"property":"properties";return(0,on.str)`must have ${s} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:s}})=>(0,on._)`{property: ${t},
    missingProperty: ${s},
    depsCount: ${e},
    deps: ${r}}`};var tp={keyword:"dependencies",type:"object",schemaType:"object",error:he.error,code(t){let[e,r]=rp(t);Ui(t,e),qi(t,r)}};function rp({schema:t}){let e={},r={};for(let s in t){if(s==="__proto__")continue;let n=Array.isArray(t[s])?e:r;n[s]=t[s]}return[e,r]}function Ui(t,e=t.schema){let{gen:r,data:s,it:n}=t;if(Object.keys(e).length===0)return;let o=r.let("missing");for(let i in e){let a=e[i];if(a.length===0)continue;let c=(0,Ft.propertyInData)(r,s,i,n.opts.ownProperties);t.setParams({property:i,depsCount:a.length,deps:a.join(", ")}),n.allErrors?r.if(c,()=>{for(let d of a)(0,Ft.checkReportMissingProp)(t,d)}):(r.if((0,on._)`${c} && (${(0,Ft.checkMissingProp)(t,a,o)})`),(0,Ft.reportMissingProp)(t,o),r.else())}}he.validatePropertyDeps=Ui;function qi(t,e=t.schema){let{gen:r,data:s,keyword:n,it:o}=t,i=r.name("valid");for(let a in e)(0,ep.alwaysValidSchema)(o,e[a])||(r.if((0,Ft.propertyInData)(r,s,a,o.opts.ownProperties),()=>{let c=t.subschema({keyword:n,schemaProp:a},i);t.mergeValidEvaluated(c,i)},()=>r.var(i,!0)),t.ok(i))}he.validateSchemaDeps=qi;he.default=tp});var Li=y(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});var Fi=b(),sp=I(),np={message:"property name must be valid",params:({params:t})=>(0,Fi._)`{propertyName: ${t.propertyName}}`},op={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:np,code(t){let{gen:e,schema:r,data:s,it:n}=t;if((0,sp.alwaysValidSchema)(n,r))return;let o=e.name("valid");e.forIn("key",s,i=>{t.setParams({propertyName:i}),t.subschema({keyword:"propertyNames",data:i,dataTypes:["string"],propertyName:i,compositeRule:!0},o),e.if((0,Fi.not)(o),()=>{t.error(!0),n.allErrors||e.break()})}),t.ok(o)}};an.default=op});var ln=y(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});var Or=re(),le=b(),ip=ve(),Ar=I(),ap={message:"must NOT have additional properties",params:({params:t})=>(0,le._)`{additionalProperty: ${t.additionalProperty}}`},cp={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:ap,code(t){let{gen:e,schema:r,parentSchema:s,data:n,errsCount:o,it:i}=t;if(!o)throw new Error("ajv implementation error");let{allErrors:a,opts:c}=i;if(i.props=!0,c.removeAdditional!=="all"&&(0,Ar.alwaysValidSchema)(i,r))return;let d=(0,Or.allSchemaProperties)(s.properties),l=(0,Or.allSchemaProperties)(s.patternProperties);u(),t.ok((0,le._)`${o} === ${ip.default.errors}`);function u(){e.forIn("key",n,h=>{!d.length&&!l.length?p(h):e.if(g(h),()=>p(h))})}function g(h){let w;if(d.length>8){let A=(0,Ar.schemaRefOrVal)(i,s.properties,"properties");w=(0,Or.isOwnProperty)(e,A,h)}else d.length?w=(0,le.or)(...d.map(A=>(0,le._)`${h} === ${A}`)):w=le.nil;return l.length&&(w=(0,le.or)(w,...l.map(A=>(0,le._)`${(0,Or.usePattern)(t,A)}.test(${h})`))),(0,le.not)(w)}function m(h){e.code((0,le._)`delete ${n}[${h}]`)}function p(h){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){m(h);return}if(r===!1){t.setParams({additionalProperty:h}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,Ar.alwaysValidSchema)(i,r)){let w=e.name("valid");c.removeAdditional==="failing"?(f(h,w,!1),e.if((0,le.not)(w),()=>{t.reset(),m(h)})):(f(h,w),a||e.if((0,le.not)(w),()=>e.break()))}}function f(h,w,A){let S={keyword:"additionalProperties",dataProp:h,dataPropType:Ar.Type.Str};A===!1&&Object.assign(S,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(S,w)}}};cn.default=cp});var Bi=y(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});var lp=At(),Hi=re(),dn=I(),Ki=ln(),dp={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:s,data:n,it:o}=t;o.opts.removeAdditional==="all"&&s.additionalProperties===void 0&&Ki.default.code(new lp.KeywordCxt(o,Ki.default,"additionalProperties"));let i=(0,Hi.allSchemaProperties)(r);for(let u of i)o.definedProperties.add(u);o.opts.unevaluated&&i.length&&o.props!==!0&&(o.props=dn.mergeEvaluated.props(e,(0,dn.toHash)(i),o.props));let a=i.filter(u=>!(0,dn.alwaysValidSchema)(o,r[u]));if(a.length===0)return;let c=e.name("valid");for(let u of a)d(u)?l(u):(e.if((0,Hi.propertyInData)(e,n,u,o.opts.ownProperties)),l(u),o.allErrors||e.else().var(c,!0),e.endIf()),t.it.definedProperties.add(u),t.ok(c);function d(u){return o.opts.useDefaults&&!o.compositeRule&&r[u].default!==void 0}function l(u){t.subschema({keyword:"properties",schemaProp:u,dataProp:u},c)}}};un.default=dp});var Qi=y(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});var zi=re(),Tr=b(),Wi=I(),Ji=I(),up={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:s,parentSchema:n,it:o}=t,{opts:i}=o,a=(0,zi.allSchemaProperties)(r),c=a.filter(f=>(0,Wi.alwaysValidSchema)(o,r[f]));if(a.length===0||c.length===a.length&&(!o.opts.unevaluated||o.props===!0))return;let d=i.strictSchema&&!i.allowMatchingProperties&&n.properties,l=e.name("valid");o.props!==!0&&!(o.props instanceof Tr.Name)&&(o.props=(0,Ji.evaluatedPropsToName)(e,o.props));let{props:u}=o;g();function g(){for(let f of a)d&&m(f),o.allErrors?p(f):(e.var(l,!0),p(f),e.if(l))}function m(f){for(let h in d)new RegExp(f).test(h)&&(0,Wi.checkStrictMode)(o,`property ${h} matches pattern ${f} (use allowMatchingProperties)`)}function p(f){e.forIn("key",s,h=>{e.if((0,Tr._)`${(0,zi.usePattern)(t,f)}.test(${h})`,()=>{let w=c.includes(f);w||t.subschema({keyword:"patternProperties",schemaProp:f,dataProp:h,dataPropType:Ji.Type.Str},l),o.opts.unevaluated&&u!==!0?e.assign((0,Tr._)`${u}[${h}]`,!0):!w&&!o.allErrors&&e.if((0,Tr.not)(l),()=>e.break())})})}}};fn.default=up});var Yi=y(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});var fp=I(),pp={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:s}=t;if((0,fp.alwaysValidSchema)(s,r)){t.fail();return}let n=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},n),t.failResult(n,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};pn.default=pp});var Xi=y(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});var mp=re(),hp={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:mp.validateUnion,error:{message:"must match a schema in anyOf"}};mn.default=hp});var Zi=y(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});var Nr=b(),gp=I(),yp={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,Nr._)`{passingSchemas: ${t.passing}}`},wp={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:yp,code(t){let{gen:e,schema:r,parentSchema:s,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(n.opts.discriminator&&s.discriminator)return;let o=r,i=e.let("valid",!1),a=e.let("passing",null),c=e.name("_valid");t.setParams({passing:a}),e.block(d),t.result(i,()=>t.reset(),()=>t.error(!0));function d(){o.forEach((l,u)=>{let g;(0,gp.alwaysValidSchema)(n,l)?e.var(c,!0):g=t.subschema({keyword:"oneOf",schemaProp:u,compositeRule:!0},c),u>0&&e.if((0,Nr._)`${c} && ${i}`).assign(i,!1).assign(a,(0,Nr._)`[${a}, ${u}]`).else(),e.if(c,()=>{e.assign(i,!0),e.assign(a,u),g&&t.mergeEvaluated(g,Nr.Name)})})}}};hn.default=wp});var ea=y(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});var Ep=I(),_p={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let n=e.name("valid");r.forEach((o,i)=>{if((0,Ep.alwaysValidSchema)(s,o))return;let a=t.subschema({keyword:"allOf",schemaProp:i},n);t.ok(n),t.mergeEvaluated(a)})}};gn.default=_p});var sa=y(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});var Ir=b(),ra=I(),vp={message:({params:t})=>(0,Ir.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,Ir._)`{failingKeyword: ${t.ifClause}}`},$p={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:vp,code(t){let{gen:e,parentSchema:r,it:s}=t;r.then===void 0&&r.else===void 0&&(0,ra.checkStrictMode)(s,'"if" without "then" and "else" is ignored');let n=ta(s,"then"),o=ta(s,"else");if(!n&&!o)return;let i=e.let("valid",!0),a=e.name("_valid");if(c(),t.reset(),n&&o){let l=e.let("ifClause");t.setParams({ifClause:l}),e.if(a,d("then",l),d("else",l))}else n?e.if(a,d("then")):e.if((0,Ir.not)(a),d("else"));t.pass(i,()=>t.error(!0));function c(){let l=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(l)}function d(l,u){return()=>{let g=t.subschema({keyword:l},a);e.assign(i,a),t.mergeValidEvaluated(g,i),u?e.assign(u,(0,Ir._)`${l}`):t.setParams({ifClause:l})}}}};function ta(t,e){let r=t.schema[e];return r!==void 0&&!(0,ra.alwaysValidSchema)(t,r)}yn.default=$p});var na=y(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});var Rp=I(),bp={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,Rp.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};wn.default=bp});var oa=y(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});var Pp=en(),Sp=xi(),Op=tn(),Ap=ji(),Tp=Di(),Np=Vi(),Ip=Li(),Cp=ln(),Mp=Bi(),Gp=Qi(),xp=Yi(),kp=Xi(),jp=Zi(),Dp=ea(),Up=sa(),qp=na();function Vp(t=!1){let e=[xp.default,kp.default,jp.default,Dp.default,Up.default,qp.default,Ip.default,Cp.default,Np.default,Mp.default,Gp.default];return t?e.push(Sp.default,Ap.default):e.push(Pp.default,Op.default),e.push(Tp.default),e}En.default=Vp});var ia=y(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});var U=b(),Fp={message:({schemaCode:t})=>(0,U.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,U._)`{format: ${t}}`},Lp={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Fp,code(t,e){let{gen:r,data:s,$data:n,schema:o,schemaCode:i,it:a}=t,{opts:c,errSchemaPath:d,schemaEnv:l,self:u}=a;if(!c.validateFormats)return;n?g():m();function g(){let p=r.scopeValue("formats",{ref:u.formats,code:c.code.formats}),f=r.const("fDef",(0,U._)`${p}[${i}]`),h=r.let("fType"),w=r.let("format");r.if((0,U._)`typeof ${f} == "object" && !(${f} instanceof RegExp)`,()=>r.assign(h,(0,U._)`${f}.type || "string"`).assign(w,(0,U._)`${f}.validate`),()=>r.assign(h,(0,U._)`"string"`).assign(w,f)),t.fail$data((0,U.or)(A(),S()));function A(){return c.strictSchema===!1?U.nil:(0,U._)`${i} && !${w}`}function S(){let G=l.$async?(0,U._)`(${f}.async ? await ${w}(${s}) : ${w}(${s}))`:(0,U._)`${w}(${s})`,v=(0,U._)`(typeof ${w} == "function" ? ${G} : ${w}.test(${s}))`;return(0,U._)`${w} && ${w} !== true && ${h} === ${e} && !${v}`}}function m(){let p=u.formats[o];if(!p){A();return}if(p===!0)return;let[f,h,w]=S(p);f===e&&t.pass(G());function A(){if(c.strictSchema===!1){u.logger.warn(v());return}throw new Error(v());function v(){return`unknown format "${o}" ignored in schema at path "${d}"`}}function S(v){let de=v instanceof RegExp?(0,U.regexpCode)(v):c.code.formats?(0,U._)`${c.code.formats}${(0,U.getProperty)(o)}`:void 0,ge=r.scopeValue("formats",{key:o,ref:v,code:de});return typeof v=="object"&&!(v instanceof RegExp)?[v.type||"string",v.validate,(0,U._)`${ge}.validate`]:["string",v,ge]}function G(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!l.$async)throw new Error("async format in sync schema");return(0,U._)`await ${w}(${s})`}return typeof h=="function"?(0,U._)`${w}(${s})`:(0,U._)`${w}.test(${s})`}}}};_n.default=Lp});var aa=y(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});var Hp=ia(),Kp=[Hp.default];vn.default=Kp});var ca=y(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.contentVocabulary=lt.metadataVocabulary=void 0;lt.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];lt.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var da=y($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});var Bp=yi(),zp=Ii(),Wp=oa(),Jp=aa(),la=ca(),Qp=[Bp.default,zp.default,(0,Wp.default)(),Jp.default,la.metadataVocabulary,la.contentVocabulary];$n.default=Qp});var fa=y(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.DiscrError=void 0;var ua;(function(t){t.Tag="tag",t.Mapping="mapping"})(ua||(Cr.DiscrError=ua={}))});var ma=y(bn=>{"use strict";Object.defineProperty(bn,"__esModule",{value:!0});var dt=b(),Rn=fa(),pa=mr(),Yp=Tt(),Xp=I(),Zp={message:({params:{discrError:t,tagName:e}})=>t===Rn.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,dt._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},em={keyword:"discriminator",type:"object",schemaType:"object",error:Zp,code(t){let{gen:e,data:r,schema:s,parentSchema:n,it:o}=t,{oneOf:i}=n;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=s.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(s.mapping)throw new Error("discriminator: mapping is not supported");if(!i)throw new Error("discriminator: requires oneOf keyword");let c=e.let("valid",!1),d=e.const("tag",(0,dt._)`${r}${(0,dt.getProperty)(a)}`);e.if((0,dt._)`typeof ${d} == "string"`,()=>l(),()=>t.error(!1,{discrError:Rn.DiscrError.Tag,tag:d,tagName:a})),t.ok(c);function l(){let m=g();e.if(!1);for(let p in m)e.elseIf((0,dt._)`${d} === ${p}`),e.assign(c,u(m[p]));e.else(),t.error(!1,{discrError:Rn.DiscrError.Mapping,tag:d,tagName:a}),e.endIf()}function u(m){let p=e.name("valid"),f=t.subschema({keyword:"oneOf",schemaProp:m},p);return t.mergeEvaluated(f,dt.Name),p}function g(){var m;let p={},f=w(n),h=!0;for(let G=0;G<i.length;G++){let v=i[G];if(v?.$ref&&!(0,Xp.schemaHasRulesButRef)(v,o.self.RULES)){let ge=v.$ref;if(v=pa.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,ge),v instanceof pa.SchemaEnv&&(v=v.schema),v===void 0)throw new Yp.default(o.opts.uriResolver,o.baseId,ge)}let de=(m=v?.properties)===null||m===void 0?void 0:m[a];if(typeof de!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);h=h&&(f||w(v)),A(de,G)}if(!h)throw new Error(`discriminator: "${a}" must be required`);return p;function w({required:G}){return Array.isArray(G)&&G.includes(a)}function A(G,v){if(G.const)S(G.const,v);else if(G.enum)for(let de of G.enum)S(de,v);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function S(G,v){if(typeof G!="string"||G in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[G]=v}}}};bn.default=em});var ha=y((fy,tm)=>{tm.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var ya=y((k,Pn)=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.MissingRefError=k.ValidationError=k.CodeGen=k.Name=k.nil=k.stringify=k.str=k._=k.KeywordCxt=k.Ajv=void 0;var rm=ui(),sm=da(),nm=ma(),ga=ha(),om=["/properties"],Mr="http://json-schema.org/draft-07/schema",ut=class extends rm.default{_addVocabularies(){super._addVocabularies(),sm.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(nm.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(ga,om):ga;this.addMetaSchema(e,Mr,!1),this.refs["http://json-schema.org/schema"]=Mr}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Mr)?Mr:void 0)}};k.Ajv=ut;Pn.exports=k=ut;Pn.exports.Ajv=ut;Object.defineProperty(k,"__esModule",{value:!0});k.default=ut;var im=At();Object.defineProperty(k,"KeywordCxt",{enumerable:!0,get:function(){return im.KeywordCxt}});var ft=b();Object.defineProperty(k,"_",{enumerable:!0,get:function(){return ft._}});Object.defineProperty(k,"str",{enumerable:!0,get:function(){return ft.str}});Object.defineProperty(k,"stringify",{enumerable:!0,get:function(){return ft.stringify}});Object.defineProperty(k,"nil",{enumerable:!0,get:function(){return ft.nil}});Object.defineProperty(k,"Name",{enumerable:!0,get:function(){return ft.Name}});Object.defineProperty(k,"CodeGen",{enumerable:!0,get:function(){return ft.CodeGen}});var am=fr();Object.defineProperty(k,"ValidationError",{enumerable:!0,get:function(){return am.default}});var cm=Tt();Object.defineProperty(k,"MissingRefError",{enumerable:!0,get:function(){return cm.default}})});var Cm={};oc(Cm,{handleHttp:()=>Im});module.exports=ic(Cm);var j={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*","Access-Control-Allow-Credentials":"true"};var Je=t=>({statusCode:403,headers:j,body:typeof t=="string"?t:JSON.stringify(t)});var oe=t=>({statusCode:400,headers:j,body:typeof t=="string"?t:JSON.stringify(t)});var kn=t=>({statusCode:404,headers:j,body:t?JSON.stringify(t):"Not Found"}),jn=t=>({statusCode:422,headers:j,body:t?JSON.stringify(t):"Unprocessable Entity"}),Q=t=>t.statusCode?t:(console.error(t),{statusCode:500,headers:j,body:t.message});var q=oe({name:"InvalidEmailError",message:"The email must be valid and must not contain upper case letters or spaces."}),Qe=oe({name:"InvalidPasswordError",message:"The password must contain at least 8 characters and at least 1 number."}),jr=oe({name:"InvalidSrpAError",message:"The SRP A value must be a correctly calculated random hex hash based on big integers."}),Dr=oe({name:"InvalidRefreshTokenError",message:"Refresh token is invalid."}),Ye=oe({name:"VerificationCodeMismatchError",message:"The verification code does not match."}),Xe=Je({name:"VerificationCodeExpiredError",message:"The verification code has exipired. Please retry via Reset Password Init (in case of pasword reset) or Register Verify Resend (in case of register)."}),D=kn({name:"UserNotFoundError",message:"No user was found under the given email or user ID."}),z=Je({name:"UserNotVerifiedError",message:"The user must be verified with Register Verify operation."}),Jt=Je({name:"UserExistsError",message:"There is an existing user with the given email address."}),ac=oe({name:"UserMissingPasswordChallengeError",message:"The user must have an active require password change challenge."}),ye=Je({name:"PasswordResetRequiredError",message:"The password must be reset."}),cc=jn({name:"PasswordResetMissingParamError",message:"Either a verification code or the users old password are required."}),Ur=Je({name:"LoginVerifyError",message:"The password could not be verified. Please check password, userId, secretBlock, signature and timestamp."});var Se=process.env.AWS_REGION||"",lc=process.env.ADMIN_EMAILS||"",qr=process.env.CLOUDFRONT_ACCESS_KEY_ID||"",mt=process.env.CLOUDFRONT_NEW_ACCESS_KEY_PARAMETER||"",dc=process.env.INVITE_USER_VALIDATION_VIEW||"",uc=process.env.PULL_LAMBDA_NAME||"",Qt=process.env.MEDIA_DOMAIN||"",fc=process.env.CLIENT_ID||"",pc=process.env.USER_POOL_ID||"";var Ge=xn(require("fs"),1),xe=require("util"),Fm=(0,xe.promisify)(Ge.default.access),Lm=(0,xe.promisify)(Ge.default.readFile),Hm=(0,xe.promisify)(Ge.default.readdir),Km=(0,xe.promisify)(Ge.default.mkdir),Bm=(0,xe.promisify)(Ge.default.writeFile),zm=(0,xe.promisify)(Ge.default.rm);var mc=require("crypto");var Yt=(t=100)=>{let e=[],r=0,s=0,n=0,o=l=>{e[s]=l,s+=1},i=()=>{let l=e[r];return delete e[r],r+=1,l},a=()=>s-r,c=l=>{let u=new Promise((g,m)=>{o(async()=>{await l().then(g).catch(m)})});return d(),u},d=async()=>{if(n<t&&a()>0){let l=i();n+=1,l&&await l(),n-=1,d()}};return{queueLoad:c,length:a}};var Ec=require("@aws-sdk/cloudfront-signer");var Xt=require("@aws-sdk/client-ssm");var wc=new Xt.SSMClient({region:Se,apiVersion:"latest"}),Zt=async(t,e=!1)=>{let r=new Xt.GetParameterCommand({Name:t,WithDecryption:e});try{let s=await wc.send(r);return s.Parameter?s.Parameter.Value:void 0}catch(s){console.error(s);return}};var bc=require("@aws-sdk/s3-request-presigner"),ue=require("@aws-sdk/client-s3");var $c=require("@aws-sdk/cloudfront-signer"),Rc=()=>{let t=null;return async()=>(t||(t=Zt(mt||"CLOUDFRONT_ACCESS_KEY",!0).catch(console.error)),t)},Nh=Rc(),Ih=1*24*60*60*1e3;var kh=new ue.S3Client({region:Se,apiVersion:"latest"});var Dh=process.env.BUCKET_LOGS||"",Uh=process.env.BUCKET_EDGES||"",qh=process.env.BUCKET_REVERSE_EDGES||"",Vh=process.env.BUCKET_NODES||"",Fh=process.env.BUCKET_OWNERS||"",Lh=process.env.BUCKET_RIGHTS_ADMIN||"",Hh=process.env.BUCKET_RIGHTS_READ||"",Kh=process.env.BUCKET_RIGHTS_WRITE||"",Pc=process.env.BUCKET_MEDIA||"",we="/mnt/efs",Sc=`${we}/nodes`,Oc=`${we}/edges`,Ac=`${we}/reverse-edges`,Tc=`${we}/rights-read`,Nc=`${we}/rights-write`,Ic=`${we}/rights-admin`,Cc=`${we}/owners`,Mc=`${we}/media`,Bh=`${we}/logs`;var{queueLoad:Yh}=Yt(200);var dm=xn(ya(),1);var On=t=>({type:"object",description:"Holds a query object that specifies how the graph should be queried from a given entry point. The entry point can be a node ID or an edge pointing do a set of nodes",additionalProperties:!1,properties:{as:{type:"string",description:"Defines an optional alias for the query object, which is currently ignored by the API."},role:{type:"string",description:"Defines the role which will be used to check the rights of the given node. If no role is given, the rights of the current user will be used."},reverse:{type:"boolean",description:"Defines if the edge should be read out in reverse"},edges:{type:"object",description:"Specifies a hashmap of edge types `fromType/toType` which should further be fetched from a given node or another parent edge query.",additionalProperties:t},include:{type:"object",description:'Specifies which data should be returned for the given node or for multiple nodes the given edge type (e.g. "todo-app/todo-list") is pointing to',additionalProperties:!1,example:{node:!0,metadata:!0,rights:!0,files:!1,edges:!1},properties:{node:{type:"boolean",description:"`true` when the node(s) data should be included in the response. `false` when they should explicitly be excluded from the response."},edges:{type:"boolean",description:"`true` when the edges should be included in the response. `false` when they should explicitly be excluded from the response."},metadata:{type:"boolean",description:"`true` when edge metadata data should be included in the response. `false` when they should explicitly be excluded from the response."},rights:{type:"boolean",description:"`true` when the node rights should be included in the response. `false` when they should explicitly be excluded from the response."},files:{type:"boolean",description:"`true` when the node files should be included in the response. `false` when they should explicitly be excluded from the response."}}}}}),Iy={type:"object",additionalProperties:{$ref:"#/definitions/Query"},definitions:{Query:On({$ref:"#/definitions/Query"})}};var An=require("@aws-sdk/client-lambda");var Gy=new An.LambdaClient({region:Se,apiVersion:"latest"}),xy=new TextDecoder;var B=require("@aws-sdk/client-cognito-identity-provider");var Dy=new B.CognitoIdentityProviderClient({region:Se,apiVersion:"latest"});var wa={type:"object",properties:{email:{type:"string",description:"Email of the user to be invited."},id:{type:"string",description:"Id of the node the executing user wants to use for rights validation."},templateId:{type:"string",description:"Identifier of the email template that will be used to send credentials to the invited user."}},required:["email","id"]};var Ea={summary:"Invite User",security:[{BearerAuth:[]}],description:"This operation creates a user with the given email provided they do not exist yet.",operationId:"inviteUser",tags:["Auth"],responses:{201:{description:"OK"},400:{description:"Bad Request"},401:{description:"Unauthorized"}},requestBody:{content:{"application/json":{schema:wa}}}};var _a={type:"object",properties:{email:{type:"string",description:"Email of the user to be logged in."},srpA:{type:"string",description:"Client SRP A value that will be used to initiate an SRP auth process."}},required:["email","srpA"]};var va={summary:"Login Init",description:"This operation initiates a user login with a client generated SRP A value and returns challenge parameters needed to calculate the signature. The signature is then sent back to the server using the Login Verify operation.",operationId:"loginInit",tags:["Auth"],responses:{200:{description:"OK",content:{"application/json":{schema:{type:"object",properties:{poolname:{type:"string",description:"Name of server side pool that is used by the hash algorithm on the client side to calculate the signature."},userId:{type:"string",description:"Server side UUID identifying the user during the SRP process."},srpB:{type:"string",description:"Servers SRP B value that is used by the hash algorithm on the client side to calculate the signature."},secretBlock:{type:"string",description:"Secret block of the server. It must be sent along with the signature via the Login Verify operation in order for the server to remember the session. It is also used by the hash algorithm on the client side to calculate the signature."},salt:{type:"string",description:"Random salt that is used by the hash algorithm on the client side to calculate the signature."}}}}}},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[q,jr]}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[z,ye]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[D]}}}},500:{description:"Internal Server Error"}},requestBody:{content:{"application/json":{schema:_a}}}};var $a={type:"object",properties:{refreshToken:{type:"string",description:"The refresh token can be used instead to retrieve new access tokens."}},required:["refreshToken"]};var Ra={summary:"Login Refresh",description:"This operation executes a user login using a refresh token and returns all auth tokens in case of success.",operationId:"loginRefresh",tags:["Auth"],responses:{200:{description:"OK",content:{"application/json":{schema:{type:"object",properties:{accessToken:{type:"string",description:"OAuth access token. It can be used as Authorization header along with all Got API calls."},expiresIn:{type:"string",description:"The expiration period of the authentication result in seconds."},idToken:{type:"string",description:"OAuth ID token. Never send it along with any API calls."}}}}}},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[Dr]}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[z,ye]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[D]}}}}},requestBody:{content:{"application/json":{schema:$a}}}};var ba={type:"object",properties:{userId:{type:"string",description:"ID of the user to be logged in. It is returned by the Login Init operation."},secretBlock:{type:"string",description:"Server secret block which was returned by the Login Init operation. It needs to be sent along with the signature in order for the server to remember the session."},signature:{type:"string",description:"Client signature that is used by the server to verify that the client knows the password."},timestamp:{type:"string",description:"Timestamp of the moment when the signature was calculated. It is part of the signature and is also used to verify it."}},required:["userId","secretBlock","signature","timestamp"]};var Pa={summary:"Login Verify",description:"This operation executes a user login using an SRP signature calculated by the client and returns all auth tokens in case of success.",operationId:"loginVerify",tags:["Auth"],responses:{200:{description:"OK",content:{"application/json":{schema:{type:"object",properties:{accessToken:{type:"string",description:"OAuth access token. It can be used as Authorization header along with all Got API calls."},expiresIn:{type:"number",description:"The expiration period of the authentication result in seconds."},idToken:{type:"string",description:"OAuth ID token. Never send it along with any API calls."},refreshToken:{type:"string",description:"The refresh token which can be stored in the session and be used to restore auth tokens via Login Refresh operation."}}}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[Ur,z,ye]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[D]}}}}},requestBody:{content:{"application/json":{schema:ba}}}};var Sa={type:"object",properties:{email:{type:"string",description:"Email of the user to be registered."},password:{type:"string",description:"Password of the user to be registered."}},required:["email","password"]};var Oa={summary:"Register Init",description:"This operation registers a new user with the API in order for him to authenticate for all API operations.",operationId:"registerInit",tags:["Auth"],responses:{200:{description:"OK"},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[q,Qe]}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[Jt]}}}},500:{description:"Internal Server Error"}},requestBody:{content:{"application/json":{schema:Sa}}}};var Aa={type:"object",properties:{email:{type:"string",description:"Email of the user to be registerVerifyd."},verificationCode:{type:"string",description:"Verification code that was sent to the given email."}},required:["email","verificationCode"]};var Ta={summary:"Register Verify",description:"This operation verifies a previously registered user with an verification code that was sent to his email after the register operation.",operationId:"registerVerify",tags:["Auth"],responses:{200:{description:"OK"},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[q,Ye]}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[Xe]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[D]}}}},500:{description:"Internal Server Error"}},requestBody:{content:{"application/json":{schema:Aa}}}};var Na={type:"object",properties:{email:{type:"string",description:"Email of the user which the verification code should be resent for."}},required:["email"]};var Ia={summary:"Register Verify Resend",description:"This operation resends the verification code for a previously registered but not yet verified user.",operationId:"registerVerifyResend",tags:["Auth"],responses:{200:{description:"OK"},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[q]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[D]}}}},500:{description:"Internal Server Error"}},requestBody:{content:{"application/json":{schema:Na}}}};var Ca={type:"object",properties:{email:{type:"string",description:"Email of the user which wants to reset the password."}},required:["email"]};var Ma={summary:"Reset Password Init",description:"This operation initiates the forgot password procedure. An email with verification code is sent automatically to the users email.",operationId:"resetPasswordInit",tags:["Auth"],responses:{200:{description:"OK"},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[q]}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[z]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[D]}}}},500:{description:"Internal Server Error"}},requestBody:{content:{"application/json":{schema:Ca}}}};var Ga={type:"object",properties:{email:{type:"string",description:"E-mail of the user for whom the password is to be reset."},password:{type:"string",description:"New password to be set."},oldPassword:{type:"string",description:"Current password of the user."},verificationCode:{type:"string",description:"Verification code that was sent to the email after Reset Password Init operation."}},required:["email","password"]};var xa={summary:"Reset Password Verify",description:"This operation resets the password of the given user using the email address and verification code sent to this email address after calling the Reset Password Init operation.",operationId:"resetPasswordVerify",tags:["Auth"],responses:{200:{description:"OK"},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[q,Qe,Ye]}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[Xe,z]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[D]}}}},500:{description:"Internal Server Error"}},requestBody:{content:{"application/json":{schema:Ga}}}};var dE=process.env.BUCKET_LOGS||"",uE=process.env.BUCKET_EDGES||"",fE=process.env.BUCKET_REVERSE_EDGES||"",pE=process.env.BUCKET_NODES||"",mE=process.env.BUCKET_OWNERS||"",hE=process.env.BUCKET_RIGHTS_ADMIN||"",gE=process.env.BUCKET_RIGHTS_READ||"",yE=process.env.BUCKET_RIGHTS_WRITE||"",Tn=process.env.BUCKET_MEDIA||"",be="/mnt/efs",ka=`${be}/nodes`,ja=`${be}/edges`,Da=`${be}/reverse-edges`,Ua=`${be}/rights-read`,qa=`${be}/rights-write`,Va=`${be}/rights-admin`,Fa=`${be}/owners`,La=`${be}/media`,fm=`${be}/logs`;var{queueLoad:$E}=Yt(200);var Ha={type:"object",additionalProperties:!1,properties:{uploadId:{type:"string",description:""},partEtags:{type:"array",description:"",items:{type:"string"}}},required:["uploadId","partEtags"]};var Ka={summary:"Complete Multipart Upload",security:[{BearerAuth:[]}],description:"This operation completes a previously executed multipart upload. Multipart uploads are initiated via push operations.",operationId:"completeUpload",tags:["Media"],responses:{204:{description:"Created."},400:{description:"Bad Request"},401:{description:"Unauthorized"}},requestBody:{content:{"application/json":{schema:Ha}}}};var Ba={summary:"Pull Graph",security:[{BearerAuth:[]}],description:"This operation pulls a graph based on a given hashmap of queries.",operationId:"pull",responses:{200:{description:"OK"},400:{description:"Bad Request"},401:{description:"Unauthorized"}},requestBody:{content:{"application/json":{schema:{type:"object",example:{"d2c33f10-06e9-40bb-92e5-1fc4aaa58f95":{edges:{"todo-app/todo-list":{include:{node:!0,rights:!0,files:!0,metadata:!0},edges:{"todo-list/todo":{include:{node:!0,metadata:!0,rights:!0,files:!0}},"node/video":{include:{node:!0,metadata:!0,rights:!0,files:!0}}}},"todo-app/feedback":{include:{edges:!0,rights:!0}}}},"64fcd6b1-7efe-483f-a4bb-748f5544e2da":{edges:{"todo-app/info":{include:{metadata:!0}}}},"ccfcaab1-88fb-4358-baca-f9fca0074ad0":{include:{node:!0}}},additionalProperties:{$ref:"#/components/schemas/Query"}}}}}};var ze=(t,e)=>e===void 0?t:e&&(e===!0?t||e:!t||t===!0?e:{...t,...e}),Ht=(t,e)=>{if(typeof t!="object"||typeof e!="object"||t===null||e===null)return e;let r={},s=Object.keys(t);for(let o=0;o<s.length;o+=1){let i=s[o],a=t[i],c=e[i];r[i]=i in e?Ht(a,c):a}let n=Object.keys(e);for(let o=0;o<n.length;o+=1){let i=n[o];i in r||(r[i]=e[i])}return r},We=(t,e,r=1,s=[])=>{if(!t)return;let n=Object.keys(t);for(let o=0;o<n.length;o+=1){let i=n[o],a=t[i];r===1?e(a,[...s,i]):a&&typeof a=="object"&&We(a,e,r-1,[...s,i])}},Kt=(t,e,r)=>{if(!r)return t;try{let s=r;for(let n=0;n<e.length;n+=1){let o=e[n];if(o in s)s=s[o];else return t}return s}catch{return t}},Pe=(t,e,r)=>{if(t.length===0)return e;let s=r;for(let o=0;o<t.length-1;o+=1){let i=t[o];i in s||(s[i]={}),s=s[i]}let n=t[t.length-1];return s[n]=e,r},Nn=(t,e)=>{let r=e;for(let n=0;n<t.length-1;n+=1){let o=t[n];o in r||(r[o]={}),r=r[o]}let s=t[t.length-1];return delete r[s],e};var LE={view:JSON.stringify({"todo-list1":{include:{node:!0,rights:!0},edges:{"todo-list/todo":{include:{edges:!0,metadata:!0}}}}},null,2),graph:JSON.stringify({nodes:{node1:{id:"node1",someProp:"someValue"}}},null,2),node:JSON.stringify({id:"todo123",text:"buy groceries"},null,2),rights:JSON.stringify({read:!0,write:!0,admin:!1},null,2)};var Bt=(t,e)=>(r,s)=>{if(!s)return r;let n=r??{};return We(s,(o,i)=>{if(o===void 0)Pe(i,void 0,n);else{let a=Kt(void 0,i,r),c=e(a,o);Pe(i,c,n)}},t),n},t_=Bt(1,ze),r_=Bt(4,ze),s_=Bt(1,Ht),n_=Bt(1,ze),o_=Bt(1,Ht);var zt=t=>(e,r)=>{if(!r)return e;let s=e??{};return We(r,(n,o)=>{if(n===void 0){Nn(o,s);return}if(n===!1||typeof n=="object"){Pe(o,n,s);return}let i=Kt(void 0,o,e);if(!(n===!0&&typeof i=="object")){Pe(o,n,s);return}Pe(o,i,s)},t),s},i_=zt(1),a_=zt(4),c_=zt(1),l_=zt(1),d_=zt(5);var Am=require("@aws-sdk/cloudfront-signer");var Ja={type:"object",additionalProperties:!1,properties:{nodes:{type:"object",description:"The nodes hashmap.",example:{"e1d05e83-4122-4fd9-9502-d12e7867b4d6":{id:"e1d05e83-4122-4fd9-9502-d12e7867b4d6",someProp:"someVal"}},additionalProperties:{oneOf:[{type:"boolean",const:!1,description:"`false` when the node should be deleted."},{type:"object",additionalProperties:!0,properties:{id:{type:"string",description:"The id of the node which should be updated.",example:"e1d05e83-4122-4fd9-9502-d12e7867b4d6",minLength:1}},required:["id"]}]}},edges:{type:"object",description:"`fromType`s: A `fromType` hashmap representing all `fromType`s of all present edges.",example:{"todo-app":{"e1d05e83-4122-4fd9-9502-d12e7867b4d6":{"todo-list":{"6da76147-c72a-4819-8efe-f4f8e06b6be6":{order:"1"}}}}},additionalProperties:{type:"object",description:"`fromId`s: A `from` hashmap representing all `fromId`s of all edges pointing from the given `fromType`.",example:{"e1d05e83-4122-4fd9-9502-d12e7867b4d6":{"todo-list":{"6da76147-c72a-4819-8efe-f4f8e06b6be6":{order:"1"}}}},additionalProperties:{type:"object",description:"`toType`s: A `toType` hashmap representing all `toType`s of all edges pointing from the given `fromType` and `fromId`.",example:{"todo-list":{"6da76147-c72a-4819-8efe-f4f8e06b6be6":{order:"1"}}},additionalProperties:{type:"object",description:"`toId`s: A `toId` hashmap representing all `toId`s of all edges pointing from the given `fromType`, `fromId`, `toType` and `toId`.",example:{"6da76147-c72a-4819-8efe-f4f8e06b6be6":{order:"1"}},additionalProperties:{oneOf:[{type:"boolean",description:"`true` when the edge should be created. `false` when the edge should be deleted."},{type:"object",description:"Is interpreted as `true` meaning the edge should be created. Object contains additional metadata to be set for the given edge.",additionalProperties:{oneOf:[{type:"string"},{type:"number"},{type:"boolean"},{type:"null"},{type:"array",items:{oneOf:[{type:"string"},{type:"number"},{type:"boolean"},{type:"null"}]}}]}}]}}}}},rights:{type:"object",description:"`id`s: A node `id` hashmap representing all nodes which rights should be updated for.",example:{"e1d05e83-4122-4fd9-9502-d12e7867b4d6":{user:{"test@mail.de":{read:!0,write:!0,admin:!0}},inherit:{from:"6da76147-c72a-4819-8efe-f4f8e06b6be6"}}},additionalProperties:{type:"object",description:"emails: An email hashmap representing all users which rights should be updated for on the given node.",properties:{user:{type:"object",description:"",example:{"test@mail.de":{read:!0,write:!0,admin:!0}},additionalProperties:{type:"object",description:"rights: A right hashmap representing all rights which should be updated for the given user on the given node.",example:{read:!0,write:!0,admin:!0},properties:{read:{type:"boolean",example:!0,description:"`true` to allow, `false` to disallow"},write:{type:"boolean",example:!0,description:"`true` to allow, `false` to disallow"},admin:{type:"boolean",example:!0,description:"`true` to allow, `false` to disallow"}}}},inherit:{type:"object",description:"Represents right inheritance for the given node from another node denoted in the `from` property. All rights of the given node are deleted and copied from the other node.",example:{from:"6da76147-c72a-4819-8efe-f4f8e06b6be6"},properties:{from:{type:"string",description:"the node id of the node from which the rights should be copied."}},required:["from"]}}}},files:{type:"object",description:"`id`s: A node `id` hashmap representing all nodes which files should be uploaded for.",example:{"e1d05e83-4122-4fd9-9502-d12e7867b4d6":{someVideo:{filename:"my-video.mp4",contentType:"video/mp4",fileSize:25e6,partSize:5242880},someTextFile:{filename:"my-file.txt",contentType:"text/plain",fileSize:250}}},additionalProperties:{type:"object",description:"`propName`s: A `propName` hashmap representing all properties which files should be attached with on the given node.",example:{someVideo:{filename:"my-video.mp4",contentType:"video/mp4",fileSize:25e6,partSize:5242880}},additionalProperties:{oneOf:[{type:"boolean",const:!1,description:"`false` when the file should be deleted."},{type:"object",description:"File metadata describing the upload to be initialized.",example:{filename:"my-video.mp4",contentType:"video/mp4",fileSize:25e6,partSize:5242880},properties:{filename:{type:"string",example:"my-video.mp4",description:"The filename as uploaded to the server and presented by the signed URL during download.",minLength:1},contentType:{type:"string",example:"video/mp4",description:"Mime type of the file to upload.",minLength:1},fileSize:{type:"integer",example:25e6,description:"Size of the file to be uploaded in bytes",minimum:1},partSize:{type:"integer",example:5242880,default:5242880,description:"Intended part size in bytes in case of a multipart upload.",minimum:5242880}},required:["filename","contentType","fileSize"]}]}}}}};var Qa={summary:"Push Graph",security:[{BearerAuth:[]}],description:"This operation pushes the graph from the request body into the database.",operationId:"push",responses:{200:{description:"OK"},400:{description:"Bad Request"},401:{description:"Unauthorized"}},requestBody:{content:{"application/json":{schema:Ja}}}};var Ya=(t="",e="")=>({openapi:"3.0.0-rc2",servers:[{url:t}],info:{description:"This is the API for a got backend which manages nodes, edges and access rights for nodes.",version:e,title:"Got API",contact:{email:"api@gothub.io"}},paths:{"/pull":{post:Ba},"/push":{post:Qa},"/media/complete-upload":{post:Ka},"/auth/login-init":{post:va},"/auth/login-verify":{post:Pa},"/auth/login-refresh":{post:Ra},"/auth/register-init":{post:Oa},"/auth/register-verify":{post:Ta},"/auth/register-verify-resend":{post:Ia},"/auth/reset-password-init":{post:Ma},"/auth/reset-password-verify":{post:xa},"/auth/invite-user":{post:Ea}},components:{securitySchemes:{BearerAuth:{type:"http",scheme:"bearer",bearerFormat:"JWT"}},schemas:{Query:On({$ref:"#/components/schemas/Query"})}}});var Xa=process.env.API_BASE_URL||"",Tm=`
<!DOCTYPE html>
<html>
  <head>
    <title>Got API</title>
    <!-- needed for adaptive design -->
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:300,400,700" rel="stylesheet">

    <!--
    Redoc doesn't change outer page styles
    -->
    <style>
      body {
        margin: 0;
        padding: 0;
      }
      span.JIFSj.eqivia.sc-fbIWvP.sc-hmbstg {
        display: block;
        margin-bottom: 4px;
      }
    </style>
  </head>
  <body>
    <redoc spec-url='${Xa}api'></redoc>
    <script src="https://cdn.jsdelivr.net/npm/redoc@latest/bundles/redoc.standalone.js"> </script>
  </body>
</html>
`,Nm=async t=>t?t.includes("text/html")?{statusCode:200,headers:{"Content-Type":"text/html",...j},body:Tm}:t.includes("application/json")||t.includes("*/*")?{statusCode:200,headers:{"Content-Type":"application/json",...j},body:JSON.stringify(Ya(Xa,process.env.npm_package_version))}:oe("Invalid Accept header"):oe("Accept header is required"),Im=async t=>{try{return await Nm(t?.headers?.Accept||t?.headers?.accept)}catch(e){return Q(e)}};0&&(module.exports={handleHttp});

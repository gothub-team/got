"use strict";var Ja=Object.create;var zt=Object.defineProperty;var Qa=Object.getOwnPropertyDescriptor;var Ya=Object.getOwnPropertyNames;var Xa=Object.getPrototypeOf,Za=Object.prototype.hasOwnProperty;var y=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ec=(t,e)=>{for(var r in e)zt(t,r,{get:e[r],enumerable:!0})},In=(t,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Ya(e))!Za.call(t,n)&&n!==r&&zt(t,n,{get:()=>e[n],enumerable:!(s=Qa(e,n))||s.enumerable});return t};var pt=(t,e,r)=>(r=t!=null?Ja(Xa(t)):{},In(e||!t||!t.__esModule?zt(r,"default",{value:t,enumerable:!0}):r,t)),tc=t=>In(zt({},"__esModule",{value:!0}),t);var gt=y(N=>{"use strict";Object.defineProperty(N,"__esModule",{value:!0});N.regexpCode=N.getEsmExportName=N.getProperty=N.safeStringify=N.stringify=N.strConcat=N.addCodeArg=N.str=N._=N.nil=N._Code=N.Name=N.IDENTIFIER=N._CodeOrName=void 0;var ht=class{};N._CodeOrName=ht;N.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Ge=class extends ht{constructor(e){if(super(),!N.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};N.Name=Ge;var te=class extends ht{constructor(e){super(),this._items=typeof e=="string"?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return e===""||e==='""'}get str(){var e;return(e=this._str)!==null&&e!==void 0?e:this._str=this._items.reduce((r,s)=>`${r}${s}`,"")}get names(){var e;return(e=this._names)!==null&&e!==void 0?e:this._names=this._items.reduce((r,s)=>(s instanceof Ge&&(r[s.str]=(r[s.str]||0)+1),r),{})}};N._Code=te;N.nil=new te("");function xn(t,...e){let r=[t[0]],s=0;for(;s<e.length;)Fr(r,e[s]),r.push(t[++s]);return new te(r)}N._=xn;var Vr=new te("+");function jn(t,...e){let r=[mt(t[0])],s=0;for(;s<e.length;)r.push(Vr),Fr(r,e[s]),r.push(Vr,mt(t[++s]));return wc(r),new te(r)}N.str=jn;function Fr(t,e){e instanceof te?t.push(...e._items):e instanceof Ge?t.push(e):t.push(Sc(e))}N.addCodeArg=Fr;function wc(t){let e=1;for(;e<t.length-1;){if(t[e]===Vr){let r=_c(t[e-1],t[e+1]);if(r!==void 0){t.splice(e-1,3,r);continue}t[e++]="+"}e++}}function _c(t,e){if(e==='""')return t;if(t==='""')return e;if(typeof t=="string")return e instanceof Ge||t[t.length-1]!=='"'?void 0:typeof e!="string"?`${t.slice(0,-1)}${e}"`:e[0]==='"'?t.slice(0,-1)+e.slice(1):void 0;if(typeof e=="string"&&e[0]==='"'&&!(t instanceof Ge))return`"${t}${e.slice(1)}`}function vc(t,e){return e.emptyStr()?t:t.emptyStr()?e:jn`${t}${e}`}N.strConcat=vc;function Sc(t){return typeof t=="number"||typeof t=="boolean"||t===null?t:mt(Array.isArray(t)?t.join(","):t)}function Rc(t){return new te(mt(t))}N.stringify=Rc;function mt(t){return JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}N.safeStringify=mt;function $c(t){return typeof t=="string"&&N.IDENTIFIER.test(t)?new te(`.${t}`):xn`[${t}]`}N.getProperty=$c;function bc(t){if(typeof t=="string"&&N.IDENTIFIER.test(t))return new te(`${t}`);throw new Error(`CodeGen: invalid export name: ${t}, use explicit $id name mapping`)}N.getEsmExportName=bc;function Pc(t){return new te(t.toString())}N.regexpCode=Pc});var Hr=y(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.ValueScope=X.ValueScopeName=X.Scope=X.varKinds=X.UsedValueState=void 0;var Y=gt(),Lr=class extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}},Xt;(function(t){t[t.Started=0]="Started",t[t.Completed=1]="Completed"})(Xt||(X.UsedValueState=Xt={}));X.varKinds={const:new Y.Name("const"),let:new Y.Name("let"),var:new Y.Name("var")};var Zt=class{constructor({prefixes:e,parent:r}={}){this._names={},this._prefixes=e,this._parent=r}toName(e){return e instanceof Y.Name?e:this.name(e)}name(e){return new Y.Name(this._newName(e))}_newName(e){let r=this._names[e]||this._nameGroup(e);return`${e}${r.index++}`}_nameGroup(e){var r,s;if(!((s=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||s===void 0)&&s.has(e)||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}};X.Scope=Zt;var er=class extends Y.Name{constructor(e,r){super(r),this.prefix=e}setValue(e,{property:r,itemIndex:s}){this.value=e,this.scopePath=(0,Y._)`.${new Y.Name(r)}[${s}]`}};X.ValueScopeName=er;var Oc=(0,Y._)`\n`,Br=class extends Zt{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?Oc:Y.nil}}get(){return this._scope}name(e){return new er(e,this._newName(e))}value(e,r){var s;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let n=this.toName(e),{prefix:o}=n,i=(s=r.key)!==null&&s!==void 0?s:r.ref,a=this._values[o];if(a){let l=a.get(i);if(l)return l}else a=this._values[o]=new Map;a.set(i,n);let c=this._scope[o]||(this._scope[o]=[]),d=c.length;return c[d]=r.ref,n.setValue(r,{property:o,itemIndex:d}),n}getValue(e,r){let s=this._values[e];if(s)return s.get(r)}scopeRefs(e,r=this._values){return this._reduceValues(r,s=>{if(s.scopePath===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return(0,Y._)`${e}${s.scopePath}`})}scopeCode(e=this._values,r,s){return this._reduceValues(e,n=>{if(n.value===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return n.value.code},r,s)}_reduceValues(e,r,s={},n){let o=Y.nil;for(let i in e){let a=e[i];if(!a)continue;let c=s[i]=s[i]||new Map;a.forEach(d=>{if(c.has(d))return;c.set(d,Xt.Started);let l=r(d);if(l){let u=this.opts.es5?X.varKinds.var:X.varKinds.const;o=(0,Y._)`${o}${u} ${d} = ${l};${this.opts._n}`}else if(l=n?.(d))o=(0,Y._)`${o}${l}${this.opts._n}`;else throw new Lr(d);c.set(d,Xt.Completed)})}return o}};X.ValueScope=Br});var $=y(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});R.or=R.and=R.not=R.CodeGen=R.operators=R.varKinds=R.ValueScopeName=R.ValueScope=R.Scope=R.Name=R.regexpCode=R.stringify=R.getProperty=R.nil=R.strConcat=R.str=R._=void 0;var O=gt(),ie=Hr(),be=gt();Object.defineProperty(R,"_",{enumerable:!0,get:function(){return be._}});Object.defineProperty(R,"str",{enumerable:!0,get:function(){return be.str}});Object.defineProperty(R,"strConcat",{enumerable:!0,get:function(){return be.strConcat}});Object.defineProperty(R,"nil",{enumerable:!0,get:function(){return be.nil}});Object.defineProperty(R,"getProperty",{enumerable:!0,get:function(){return be.getProperty}});Object.defineProperty(R,"stringify",{enumerable:!0,get:function(){return be.stringify}});Object.defineProperty(R,"regexpCode",{enumerable:!0,get:function(){return be.regexpCode}});Object.defineProperty(R,"Name",{enumerable:!0,get:function(){return be.Name}});var nr=Hr();Object.defineProperty(R,"Scope",{enumerable:!0,get:function(){return nr.Scope}});Object.defineProperty(R,"ValueScope",{enumerable:!0,get:function(){return nr.ValueScope}});Object.defineProperty(R,"ValueScopeName",{enumerable:!0,get:function(){return nr.ValueScopeName}});Object.defineProperty(R,"varKinds",{enumerable:!0,get:function(){return nr.varKinds}});R.operators={GT:new O._Code(">"),GTE:new O._Code(">="),LT:new O._Code("<"),LTE:new O._Code("<="),EQ:new O._Code("==="),NEQ:new O._Code("!=="),NOT:new O._Code("!"),OR:new O._Code("||"),AND:new O._Code("&&"),ADD:new O._Code("+")};var Ee=class{optimizeNodes(){return this}optimizeNames(e,r){return this}},Kr=class extends Ee{constructor(e,r,s){super(),this.varKind=e,this.name=r,this.rhs=s}render({es5:e,_n:r}){let s=e?ie.varKinds.var:this.varKind,n=this.rhs===void 0?"":` = ${this.rhs}`;return`${s} ${this.name}${n};`+r}optimizeNames(e,r){if(e[this.name.str])return this.rhs&&(this.rhs=Xe(this.rhs,e,r)),this}get names(){return this.rhs instanceof O._CodeOrName?this.rhs.names:{}}},tr=class extends Ee{constructor(e,r,s){super(),this.lhs=e,this.rhs=r,this.sideEffects=s}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,r){if(!(this.lhs instanceof O.Name&&!e[this.lhs.str]&&!this.sideEffects))return this.rhs=Xe(this.rhs,e,r),this}get names(){let e=this.lhs instanceof O.Name?{}:{...this.lhs.names};return sr(e,this.rhs)}},zr=class extends tr{constructor(e,r,s,n){super(e,s,n),this.op=r}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}},Wr=class extends Ee{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}},Jr=class extends Ee{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}},Qr=class extends Ee{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}},Yr=class extends Ee{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,r){return this.code=Xe(this.code,e,r),this}get names(){return this.code instanceof O._CodeOrName?this.code.names:{}}},yt=class extends Ee{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((r,s)=>r+s.render(e),"")}optimizeNodes(){let{nodes:e}=this,r=e.length;for(;r--;){let s=e[r].optimizeNodes();Array.isArray(s)?e.splice(r,1,...s):s?e[r]=s:e.splice(r,1)}return e.length>0?this:void 0}optimizeNames(e,r){let{nodes:s}=this,n=s.length;for(;n--;){let o=s[n];o.optimizeNames(e,r)||(Tc(e,o.names),s.splice(n,1))}return s.length>0?this:void 0}get names(){return this.nodes.reduce((e,r)=>je(e,r.names),{})}},we=class extends yt{render(e){return"{"+e._n+super.render(e)+"}"+e._n}},Xr=class extends yt{},Ye=class extends we{};Ye.kind="else";var ke=class t extends we{constructor(e,r){super(r),this.condition=e}render(e){let r=`if(${this.condition})`+super.render(e);return this.else&&(r+="else "+this.else.render(e)),r}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(e===!0)return this.nodes;let r=this.else;if(r){let s=r.optimizeNodes();r=this.else=Array.isArray(s)?new Ye(s):s}if(r)return e===!1?r instanceof t?r:r.nodes:this.nodes.length?this:new t(Dn(e),r instanceof t?[r]:r.nodes);if(!(e===!1||!this.nodes.length))return this}optimizeNames(e,r){var s;if(this.else=(s=this.else)===null||s===void 0?void 0:s.optimizeNames(e,r),!!(super.optimizeNames(e,r)||this.else))return this.condition=Xe(this.condition,e,r),this}get names(){let e=super.names;return sr(e,this.condition),this.else&&je(e,this.else.names),e}};ke.kind="if";var xe=class extends we{};xe.kind="for";var Zr=class extends xe{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iteration=Xe(this.iteration,e,r),this}get names(){return je(super.names,this.iteration.names)}},es=class extends xe{constructor(e,r,s,n){super(),this.varKind=e,this.name=r,this.from=s,this.to=n}render(e){let r=e.es5?ie.varKinds.var:this.varKind,{name:s,from:n,to:o}=this;return`for(${r} ${s}=${n}; ${s}<${o}; ${s}++)`+super.render(e)}get names(){let e=sr(super.names,this.from);return sr(e,this.to)}},rr=class extends xe{constructor(e,r,s,n){super(),this.loop=e,this.varKind=r,this.name=s,this.iterable=n}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,r){if(super.optimizeNames(e,r))return this.iterable=Xe(this.iterable,e,r),this}get names(){return je(super.names,this.iterable.names)}},Et=class extends we{constructor(e,r,s){super(),this.name=e,this.args=r,this.async=s}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}};Et.kind="func";var wt=class extends yt{render(e){return"return "+super.render(e)}};wt.kind="return";var ts=class extends we{render(e){let r="try"+super.render(e);return this.catch&&(r+=this.catch.render(e)),this.finally&&(r+=this.finally.render(e)),r}optimizeNodes(){var e,r;return super.optimizeNodes(),(e=this.catch)===null||e===void 0||e.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(e,r){var s,n;return super.optimizeNames(e,r),(s=this.catch)===null||s===void 0||s.optimizeNames(e,r),(n=this.finally)===null||n===void 0||n.optimizeNames(e,r),this}get names(){let e=super.names;return this.catch&&je(e,this.catch.names),this.finally&&je(e,this.finally.names),e}},_t=class extends we{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}};_t.kind="catch";var vt=class extends we{render(e){return"finally"+super.render(e)}};vt.kind="finally";var rs=class{constructor(e,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=e,this._scope=new ie.Scope({parent:e}),this._nodes=[new Xr]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,r){let s=this._extScope.value(e,r);return(this._values[s.prefix]||(this._values[s.prefix]=new Set)).add(s),s}getScopeValue(e,r){return this._extScope.getValue(e,r)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,r,s,n){let o=this._scope.toName(r);return s!==void 0&&n&&(this._constants[o.str]=s),this._leafNode(new Kr(e,o,s)),o}const(e,r,s){return this._def(ie.varKinds.const,e,r,s)}let(e,r,s){return this._def(ie.varKinds.let,e,r,s)}var(e,r,s){return this._def(ie.varKinds.var,e,r,s)}assign(e,r,s){return this._leafNode(new tr(e,r,s))}add(e,r){return this._leafNode(new zr(e,R.operators.ADD,r))}code(e){return typeof e=="function"?e():e!==O.nil&&this._leafNode(new Yr(e)),this}object(...e){let r=["{"];for(let[s,n]of e)r.length>1&&r.push(","),r.push(s),(s!==n||this.opts.es5)&&(r.push(":"),(0,O.addCodeArg)(r,n));return r.push("}"),new O._Code(r)}if(e,r,s){if(this._blockNode(new ke(e)),r&&s)this.code(r).else().code(s).endIf();else if(r)this.code(r).endIf();else if(s)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new ke(e))}else(){return this._elseNode(new Ye)}endIf(){return this._endBlockNode(ke,Ye)}_for(e,r){return this._blockNode(e),r&&this.code(r).endFor(),this}for(e,r){return this._for(new Zr(e),r)}forRange(e,r,s,n,o=this.opts.es5?ie.varKinds.var:ie.varKinds.let){let i=this._scope.toName(e);return this._for(new es(o,i,r,s),()=>n(i))}forOf(e,r,s,n=ie.varKinds.const){let o=this._scope.toName(e);if(this.opts.es5){let i=r instanceof O.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,O._)`${i}.length`,a=>{this.var(o,(0,O._)`${i}[${a}]`),s(o)})}return this._for(new rr("of",n,o,r),()=>s(o))}forIn(e,r,s,n=this.opts.es5?ie.varKinds.var:ie.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,O._)`Object.keys(${r})`,s);let o=this._scope.toName(e);return this._for(new rr("in",n,o,r),()=>s(o))}endFor(){return this._endBlockNode(xe)}label(e){return this._leafNode(new Wr(e))}break(e){return this._leafNode(new Jr(e))}return(e){let r=new wt;if(this._blockNode(r),this.code(e),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(wt)}try(e,r,s){if(!r&&!s)throw new Error('CodeGen: "try" without "catch" and "finally"');let n=new ts;if(this._blockNode(n),this.code(e),r){let o=this.name("e");this._currNode=n.catch=new _t(o),r(o)}return s&&(this._currNode=n.finally=new vt,this.code(s)),this._endBlockNode(_t,vt)}throw(e){return this._leafNode(new Qr(e))}block(e,r){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(r),this}endBlock(e){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let s=this._nodes.length-r;if(s<0||e!==void 0&&s!==e)throw new Error(`CodeGen: wrong number of nodes: ${s} vs ${e} expected`);return this._nodes.length=r,this}func(e,r=O.nil,s,n){return this._blockNode(new Et(e,r,s)),n&&this.code(n).endFunc(),this}endFunc(){return this._endBlockNode(Et)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,r){let s=this._currNode;if(s instanceof e||r&&s instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${e.kind}/${r.kind}`:e.kind}"`)}_elseNode(e){let r=this._currNode;if(!(r instanceof ke))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let r=this._nodes;r[r.length-1]=e}};R.CodeGen=rs;function je(t,e){for(let r in e)t[r]=(t[r]||0)+(e[r]||0);return t}function sr(t,e){return e instanceof O._CodeOrName?je(t,e.names):t}function Xe(t,e,r){if(t instanceof O.Name)return s(t);if(!n(t))return t;return new O._Code(t._items.reduce((o,i)=>(i instanceof O.Name&&(i=s(i)),i instanceof O._Code?o.push(...i._items):o.push(i),o),[]));function s(o){let i=r[o.str];return i===void 0||e[o.str]!==1?o:(delete e[o.str],i)}function n(o){return o instanceof O._Code&&o._items.some(i=>i instanceof O.Name&&e[i.str]===1&&r[i.str]!==void 0)}}function Tc(t,e){for(let r in e)t[r]=(t[r]||0)-(e[r]||0)}function Dn(t){return typeof t=="boolean"||typeof t=="number"||t===null?!t:(0,O._)`!${ss(t)}`}R.not=Dn;var Ac=Un(R.operators.AND);function Nc(...t){return t.reduce(Ac)}R.and=Nc;var Cc=Un(R.operators.OR);function Ic(...t){return t.reduce(Cc)}R.or=Ic;function Un(t){return(e,r)=>e===O.nil?r:r===O.nil?e:(0,O._)`${ss(e)} ${t} ${ss(r)}`}function ss(t){return t instanceof O.Name?t:(0,O._)`(${t})`}});var C=y(b=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.checkStrictMode=b.getErrorPath=b.Type=b.useFunc=b.setEvaluated=b.evaluatedPropsToName=b.mergeEvaluated=b.eachItem=b.unescapeJsonPointer=b.escapeJsonPointer=b.escapeFragment=b.unescapeFragment=b.schemaRefOrVal=b.schemaHasRulesButRef=b.schemaHasRules=b.checkUnknownRules=b.alwaysValidSchema=b.toHash=void 0;var M=$(),Mc=gt();function Gc(t){let e={};for(let r of t)e[r]=!0;return e}b.toHash=Gc;function kc(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(Fn(t,e),!Ln(e,t.self.RULES.all))}b.alwaysValidSchema=kc;function Fn(t,e=t.schema){let{opts:r,self:s}=t;if(!r.strictSchema||typeof e=="boolean")return;let n=s.RULES.keywords;for(let o in e)n[o]||Kn(t,`unknown keyword: "${o}"`)}b.checkUnknownRules=Fn;function Ln(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(e[r])return!0;return!1}b.schemaHasRules=Ln;function xc(t,e){if(typeof t=="boolean")return!t;for(let r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}b.schemaHasRulesButRef=xc;function jc({topSchemaRef:t,schemaPath:e},r,s,n){if(!n){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,M._)`${r}`}return(0,M._)`${t}${e}${(0,M.getProperty)(s)}`}b.schemaRefOrVal=jc;function Dc(t){return Bn(decodeURIComponent(t))}b.unescapeFragment=Dc;function Uc(t){return encodeURIComponent(os(t))}b.escapeFragment=Uc;function os(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}b.escapeJsonPointer=os;function Bn(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}b.unescapeJsonPointer=Bn;function qc(t,e){if(Array.isArray(t))for(let r of t)e(r);else e(t)}b.eachItem=qc;function qn({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:s}){return(n,o,i,a)=>{let c=i===void 0?o:i instanceof M.Name?(o instanceof M.Name?t(n,o,i):e(n,o,i),i):o instanceof M.Name?(e(n,i,o),o):r(o,i);return a===M.Name&&!(c instanceof M.Name)?s(n,c):c}}b.mergeEvaluated={props:qn({mergeNames:(t,e,r)=>t.if((0,M._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,M._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,M._)`${r} || {}`).code((0,M._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,M._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,M._)`${r} || {}`),is(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:Hn}),items:qn({mergeNames:(t,e,r)=>t.if((0,M._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,M._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,M._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,M._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function Hn(t,e){if(e===!0)return t.var("props",!0);let r=t.var("props",(0,M._)`{}`);return e!==void 0&&is(t,r,e),r}b.evaluatedPropsToName=Hn;function is(t,e,r){Object.keys(r).forEach(s=>t.assign((0,M._)`${e}${(0,M.getProperty)(s)}`,!0))}b.setEvaluated=is;var Vn={};function Vc(t,e){return t.scopeValue("func",{ref:e,code:Vn[e.code]||(Vn[e.code]=new Mc._Code(e.code))})}b.useFunc=Vc;var ns;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(ns||(b.Type=ns={}));function Fc(t,e,r){if(t instanceof M.Name){let s=e===ns.Num;return r?s?(0,M._)`"[" + ${t} + "]"`:(0,M._)`"['" + ${t} + "']"`:s?(0,M._)`"/" + ${t}`:(0,M._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,M.getProperty)(t).toString():"/"+os(t)}b.getErrorPath=Fc;function Kn(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}b.checkStrictMode=Kn});var _e=y(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});var L=$(),Lc={data:new L.Name("data"),valCxt:new L.Name("valCxt"),instancePath:new L.Name("instancePath"),parentData:new L.Name("parentData"),parentDataProperty:new L.Name("parentDataProperty"),rootData:new L.Name("rootData"),dynamicAnchors:new L.Name("dynamicAnchors"),vErrors:new L.Name("vErrors"),errors:new L.Name("errors"),this:new L.Name("this"),self:new L.Name("self"),scope:new L.Name("scope"),json:new L.Name("json"),jsonPos:new L.Name("jsonPos"),jsonLen:new L.Name("jsonLen"),jsonPart:new L.Name("jsonPart")};as.default=Lc});var St=y(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.extendErrors=B.resetErrorsCount=B.reportExtraError=B.reportError=B.keyword$DataError=B.keywordError=void 0;var A=$(),or=C(),J=_e();B.keywordError={message:({keyword:t})=>(0,A.str)`must pass "${t}" keyword validation`};B.keyword$DataError={message:({keyword:t,schemaType:e})=>e?(0,A.str)`"${t}" keyword must be ${e} ($data)`:(0,A.str)`"${t}" keyword is invalid ($data)`};function Bc(t,e=B.keywordError,r,s){let{it:n}=t,{gen:o,compositeRule:i,allErrors:a}=n,c=Jn(t,e,r);s??(i||a)?zn(o,c):Wn(n,(0,A._)`[${c}]`)}B.reportError=Bc;function Hc(t,e=B.keywordError,r){let{it:s}=t,{gen:n,compositeRule:o,allErrors:i}=s,a=Jn(t,e,r);zn(n,a),o||i||Wn(s,J.default.vErrors)}B.reportExtraError=Hc;function Kc(t,e){t.assign(J.default.errors,e),t.if((0,A._)`${J.default.vErrors} !== null`,()=>t.if(e,()=>t.assign((0,A._)`${J.default.vErrors}.length`,e),()=>t.assign(J.default.vErrors,null)))}B.resetErrorsCount=Kc;function zc({gen:t,keyword:e,schemaValue:r,data:s,errsCount:n,it:o}){if(n===void 0)throw new Error("ajv implementation error");let i=t.name("err");t.forRange("i",n,J.default.errors,a=>{t.const(i,(0,A._)`${J.default.vErrors}[${a}]`),t.if((0,A._)`${i}.instancePath === undefined`,()=>t.assign((0,A._)`${i}.instancePath`,(0,A.strConcat)(J.default.instancePath,o.errorPath))),t.assign((0,A._)`${i}.schemaPath`,(0,A.str)`${o.errSchemaPath}/${e}`),o.opts.verbose&&(t.assign((0,A._)`${i}.schema`,r),t.assign((0,A._)`${i}.data`,s))})}B.extendErrors=zc;function zn(t,e){let r=t.const("err",e);t.if((0,A._)`${J.default.vErrors} === null`,()=>t.assign(J.default.vErrors,(0,A._)`[${r}]`),(0,A._)`${J.default.vErrors}.push(${r})`),t.code((0,A._)`${J.default.errors}++`)}function Wn(t,e){let{gen:r,validateName:s,schemaEnv:n}=t;n.$async?r.throw((0,A._)`new ${t.ValidationError}(${e})`):(r.assign((0,A._)`${s}.errors`,e),r.return(!1))}var De={keyword:new A.Name("keyword"),schemaPath:new A.Name("schemaPath"),params:new A.Name("params"),propertyName:new A.Name("propertyName"),message:new A.Name("message"),schema:new A.Name("schema"),parentSchema:new A.Name("parentSchema")};function Jn(t,e,r){let{createErrors:s}=t.it;return s===!1?(0,A._)`{}`:Wc(t,e,r)}function Wc(t,e,r={}){let{gen:s,it:n}=t,o=[Jc(n,r),Qc(t,r)];return Yc(t,e,o),s.object(...o)}function Jc({errorPath:t},{instancePath:e}){let r=e?(0,A.str)`${t}${(0,or.getErrorPath)(e,or.Type.Str)}`:t;return[J.default.instancePath,(0,A.strConcat)(J.default.instancePath,r)]}function Qc({keyword:t,it:{errSchemaPath:e}},{schemaPath:r,parentSchema:s}){let n=s?e:(0,A.str)`${e}/${t}`;return r&&(n=(0,A.str)`${n}${(0,or.getErrorPath)(r,or.Type.Str)}`),[De.schemaPath,n]}function Yc(t,{params:e,message:r},s){let{keyword:n,data:o,schemaValue:i,it:a}=t,{opts:c,propertyName:d,topSchemaRef:l,schemaPath:u}=a;s.push([De.keyword,n],[De.params,typeof e=="function"?e(t):e||(0,A._)`{}`]),c.messages&&s.push([De.message,typeof r=="function"?r(t):r]),c.verbose&&s.push([De.schema,i],[De.parentSchema,(0,A._)`${l}${u}`],[J.default.data,o]),d&&s.push([De.propertyName,d])}});var Yn=y(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.boolOrEmptySchema=Ze.topBoolOrEmptySchema=void 0;var Xc=St(),Zc=$(),el=_e(),tl={message:"boolean schema is false"};function rl(t){let{gen:e,schema:r,validateName:s}=t;r===!1?Qn(t,!1):typeof r=="object"&&r.$async===!0?e.return(el.default.data):(e.assign((0,Zc._)`${s}.errors`,null),e.return(!0))}Ze.topBoolOrEmptySchema=rl;function sl(t,e){let{gen:r,schema:s}=t;s===!1?(r.var(e,!1),Qn(t)):r.var(e,!0)}Ze.boolOrEmptySchema=sl;function Qn(t,e){let{gen:r,data:s}=t,n={gen:r,keyword:"false schema",data:s,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:t};(0,Xc.reportError)(n,tl,void 0,e)}});var cs=y(et=>{"use strict";Object.defineProperty(et,"__esModule",{value:!0});et.getRules=et.isJSONType=void 0;var nl=["string","number","integer","boolean","null","object","array"],ol=new Set(nl);function il(t){return typeof t=="string"&&ol.has(t)}et.isJSONType=il;function al(){let t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}et.getRules=al});var ls=y(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.shouldUseRule=Pe.shouldUseGroup=Pe.schemaHasRulesForType=void 0;function cl({schema:t,self:e},r){let s=e.RULES.types[r];return s&&s!==!0&&Xn(t,s)}Pe.schemaHasRulesForType=cl;function Xn(t,e){return e.rules.some(r=>Zn(t,r))}Pe.shouldUseGroup=Xn;function Zn(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(s=>t[s]!==void 0))}Pe.shouldUseRule=Zn});var Rt=y(H=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});H.reportTypeError=H.checkDataTypes=H.checkDataType=H.coerceAndCheckDataType=H.getJSONTypes=H.getSchemaTypes=H.DataType=void 0;var ll=cs(),dl=ls(),ul=St(),S=$(),eo=C(),tt;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(tt||(H.DataType=tt={}));function pl(t){let e=to(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}H.getSchemaTypes=pl;function to(t){let e=Array.isArray(t)?t:t?[t]:[];if(e.every(ll.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}H.getJSONTypes=to;function fl(t,e){let{gen:r,data:s,opts:n}=t,o=hl(e,n.coerceTypes),i=e.length>0&&!(o.length===0&&e.length===1&&(0,dl.schemaHasRulesForType)(t,e[0]));if(i){let a=us(e,s,n.strictNumbers,tt.Wrong);r.if(a,()=>{o.length?ml(t,e,o):ps(t)})}return i}H.coerceAndCheckDataType=fl;var ro=new Set(["string","number","integer","boolean","null"]);function hl(t,e){return e?t.filter(r=>ro.has(r)||e==="array"&&r==="array"):[]}function ml(t,e,r){let{gen:s,data:n,opts:o}=t,i=s.let("dataType",(0,S._)`typeof ${n}`),a=s.let("coerced",(0,S._)`undefined`);o.coerceTypes==="array"&&s.if((0,S._)`${i} == 'object' && Array.isArray(${n}) && ${n}.length == 1`,()=>s.assign(n,(0,S._)`${n}[0]`).assign(i,(0,S._)`typeof ${n}`).if(us(e,n,o.strictNumbers),()=>s.assign(a,n))),s.if((0,S._)`${a} !== undefined`);for(let d of r)(ro.has(d)||d==="array"&&o.coerceTypes==="array")&&c(d);s.else(),ps(t),s.endIf(),s.if((0,S._)`${a} !== undefined`,()=>{s.assign(n,a),gl(t,a)});function c(d){switch(d){case"string":s.elseIf((0,S._)`${i} == "number" || ${i} == "boolean"`).assign(a,(0,S._)`"" + ${n}`).elseIf((0,S._)`${n} === null`).assign(a,(0,S._)`""`);return;case"number":s.elseIf((0,S._)`${i} == "boolean" || ${n} === null
              || (${i} == "string" && ${n} && ${n} == +${n})`).assign(a,(0,S._)`+${n}`);return;case"integer":s.elseIf((0,S._)`${i} === "boolean" || ${n} === null
              || (${i} === "string" && ${n} && ${n} == +${n} && !(${n} % 1))`).assign(a,(0,S._)`+${n}`);return;case"boolean":s.elseIf((0,S._)`${n} === "false" || ${n} === 0 || ${n} === null`).assign(a,!1).elseIf((0,S._)`${n} === "true" || ${n} === 1`).assign(a,!0);return;case"null":s.elseIf((0,S._)`${n} === "" || ${n} === 0 || ${n} === false`),s.assign(a,null);return;case"array":s.elseIf((0,S._)`${i} === "string" || ${i} === "number"
              || ${i} === "boolean" || ${n} === null`).assign(a,(0,S._)`[${n}]`)}}}function gl({gen:t,parentData:e,parentDataProperty:r},s){t.if((0,S._)`${e} !== undefined`,()=>t.assign((0,S._)`${e}[${r}]`,s))}function ds(t,e,r,s=tt.Correct){let n=s===tt.Correct?S.operators.EQ:S.operators.NEQ,o;switch(t){case"null":return(0,S._)`${e} ${n} null`;case"array":o=(0,S._)`Array.isArray(${e})`;break;case"object":o=(0,S._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":o=i((0,S._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":o=i();break;default:return(0,S._)`typeof ${e} ${n} ${t}`}return s===tt.Correct?o:(0,S.not)(o);function i(a=S.nil){return(0,S.and)((0,S._)`typeof ${e} == "number"`,a,r?(0,S._)`isFinite(${e})`:S.nil)}}H.checkDataType=ds;function us(t,e,r,s){if(t.length===1)return ds(t[0],e,r,s);let n,o=(0,eo.toHash)(t);if(o.array&&o.object){let i=(0,S._)`typeof ${e} != "object"`;n=o.null?i:(0,S._)`!${e} || ${i}`,delete o.null,delete o.array,delete o.object}else n=S.nil;o.number&&delete o.integer;for(let i in o)n=(0,S.and)(n,ds(i,e,r,s));return n}H.checkDataTypes=us;var yl={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,S._)`{type: ${t}}`:(0,S._)`{type: ${e}}`};function ps(t){let e=El(t);(0,ul.reportError)(e,yl)}H.reportTypeError=ps;function El(t){let{gen:e,data:r,schema:s}=t,n=(0,eo.schemaRefOrVal)(t,s,"type");return{gen:e,keyword:"type",data:r,schema:s.type,schemaCode:n,schemaValue:n,parentSchema:s,params:{},it:t}}});var no=y(ir=>{"use strict";Object.defineProperty(ir,"__esModule",{value:!0});ir.assignDefaults=void 0;var rt=$(),wl=C();function _l(t,e){let{properties:r,items:s}=t.schema;if(e==="object"&&r)for(let n in r)so(t,n,r[n].default);else e==="array"&&Array.isArray(s)&&s.forEach((n,o)=>so(t,o,n.default))}ir.assignDefaults=_l;function so(t,e,r){let{gen:s,compositeRule:n,data:o,opts:i}=t;if(r===void 0)return;let a=(0,rt._)`${o}${(0,rt.getProperty)(e)}`;if(n){(0,wl.checkStrictMode)(t,`default is ignored for: ${a}`);return}let c=(0,rt._)`${a} === undefined`;i.useDefaults==="empty"&&(c=(0,rt._)`${c} || ${a} === null || ${a} === ""`),s.if(c,(0,rt._)`${a} = ${(0,rt.stringify)(r)}`)}});var re=y(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.validateUnion=I.validateArray=I.usePattern=I.callValidateCode=I.schemaProperties=I.allSchemaProperties=I.noPropertyInData=I.propertyInData=I.isOwnProperty=I.hasPropFunc=I.reportMissingProp=I.checkMissingProp=I.checkReportMissingProp=void 0;var k=$(),fs=C(),Oe=_e(),vl=C();function Sl(t,e){let{gen:r,data:s,it:n}=t;r.if(ms(r,s,e,n.opts.ownProperties),()=>{t.setParams({missingProperty:(0,k._)`${e}`},!0),t.error()})}I.checkReportMissingProp=Sl;function Rl({gen:t,data:e,it:{opts:r}},s,n){return(0,k.or)(...s.map(o=>(0,k.and)(ms(t,e,o,r.ownProperties),(0,k._)`${n} = ${o}`)))}I.checkMissingProp=Rl;function $l(t,e){t.setParams({missingProperty:e},!0),t.error()}I.reportMissingProp=$l;function oo(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,k._)`Object.prototype.hasOwnProperty`})}I.hasPropFunc=oo;function hs(t,e,r){return(0,k._)`${oo(t)}.call(${e}, ${r})`}I.isOwnProperty=hs;function bl(t,e,r,s){let n=(0,k._)`${e}${(0,k.getProperty)(r)} !== undefined`;return s?(0,k._)`${n} && ${hs(t,e,r)}`:n}I.propertyInData=bl;function ms(t,e,r,s){let n=(0,k._)`${e}${(0,k.getProperty)(r)} === undefined`;return s?(0,k.or)(n,(0,k.not)(hs(t,e,r))):n}I.noPropertyInData=ms;function io(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}I.allSchemaProperties=io;function Pl(t,e){return io(e).filter(r=>!(0,fs.alwaysValidSchema)(t,e[r]))}I.schemaProperties=Pl;function Ol({schemaCode:t,data:e,it:{gen:r,topSchemaRef:s,schemaPath:n,errorPath:o},it:i},a,c,d){let l=d?(0,k._)`${t}, ${e}, ${s}${n}`:e,u=[[Oe.default.instancePath,(0,k.strConcat)(Oe.default.instancePath,o)],[Oe.default.parentData,i.parentData],[Oe.default.parentDataProperty,i.parentDataProperty],[Oe.default.rootData,Oe.default.rootData]];i.opts.dynamicRef&&u.push([Oe.default.dynamicAnchors,Oe.default.dynamicAnchors]);let g=(0,k._)`${l}, ${r.object(...u)}`;return c!==k.nil?(0,k._)`${a}.call(${c}, ${g})`:(0,k._)`${a}(${g})`}I.callValidateCode=Ol;var Tl=(0,k._)`new RegExp`;function Al({gen:t,it:{opts:e}},r){let s=e.unicodeRegExp?"u":"",{regExp:n}=e.code,o=n(r,s);return t.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,k._)`${n.code==="new RegExp"?Tl:(0,vl.useFunc)(t,n)}(${r}, ${s})`})}I.usePattern=Al;function Nl(t){let{gen:e,data:r,keyword:s,it:n}=t,o=e.name("valid");if(n.allErrors){let a=e.let("valid",!0);return i(()=>e.assign(a,!1)),a}return e.var(o,!0),i(()=>e.break()),o;function i(a){let c=e.const("len",(0,k._)`${r}.length`);e.forRange("i",0,c,d=>{t.subschema({keyword:s,dataProp:d,dataPropType:fs.Type.Num},o),e.if((0,k.not)(o),a)})}}I.validateArray=Nl;function Cl(t){let{gen:e,schema:r,keyword:s,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,fs.alwaysValidSchema)(n,c))&&!n.opts.unevaluated)return;let i=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((c,d)=>{let l=t.subschema({keyword:s,schemaProp:d,compositeRule:!0},a);e.assign(i,(0,k._)`${i} || ${a}`),t.mergeValidEvaluated(l,a)||e.if((0,k.not)(i))})),t.result(i,()=>t.reset(),()=>t.error(!0))}I.validateUnion=Cl});var lo=y(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.validateKeywordUsage=ue.validSchemaType=ue.funcKeywordCode=ue.macroKeywordCode=void 0;var Q=$(),Ue=_e(),Il=re(),Ml=St();function Gl(t,e){let{gen:r,keyword:s,schema:n,parentSchema:o,it:i}=t,a=e.macro.call(i.self,n,o,i),c=co(r,s,a);i.opts.validateSchema!==!1&&i.self.validateSchema(a,!0);let d=r.name("valid");t.subschema({schema:a,schemaPath:Q.nil,errSchemaPath:`${i.errSchemaPath}/${s}`,topSchemaRef:c,compositeRule:!0},d),t.pass(d,()=>t.error(!0))}ue.macroKeywordCode=Gl;function kl(t,e){var r;let{gen:s,keyword:n,schema:o,parentSchema:i,$data:a,it:c}=t;jl(c,e);let d=!a&&e.compile?e.compile.call(c.self,o,i,c):e.validate,l=co(s,n,d),u=s.let("valid");t.block$data(u,g),t.ok((r=e.valid)!==null&&r!==void 0?r:u);function g(){if(e.errors===!1)p(),e.modifying&&ao(t),h(()=>t.error());else{let E=e.async?m():f();e.modifying&&ao(t),h(()=>xl(t,E))}}function m(){let E=s.let("ruleErrs",null);return s.try(()=>p((0,Q._)`await `),T=>s.assign(u,!1).if((0,Q._)`${T} instanceof ${c.ValidationError}`,()=>s.assign(E,(0,Q._)`${T}.errors`),()=>s.throw(T))),E}function f(){let E=(0,Q._)`${l}.errors`;return s.assign(E,null),p(Q.nil),E}function p(E=e.async?(0,Q._)`await `:Q.nil){let T=c.opts.passContext?Ue.default.this:Ue.default.self,P=!("compile"in e&&!a||e.schema===!1);s.assign(u,(0,Q._)`${E}${(0,Il.callValidateCode)(t,l,T,P)}`,e.modifying)}function h(E){var T;s.if((0,Q.not)((T=e.valid)!==null&&T!==void 0?T:u),E)}}ue.funcKeywordCode=kl;function ao(t){let{gen:e,data:r,it:s}=t;e.if(s.parentData,()=>e.assign(r,(0,Q._)`${s.parentData}[${s.parentDataProperty}]`))}function xl(t,e){let{gen:r}=t;r.if((0,Q._)`Array.isArray(${e})`,()=>{r.assign(Ue.default.vErrors,(0,Q._)`${Ue.default.vErrors} === null ? ${e} : ${Ue.default.vErrors}.concat(${e})`).assign(Ue.default.errors,(0,Q._)`${Ue.default.vErrors}.length`),(0,Ml.extendErrors)(t)},()=>t.error())}function jl({schemaEnv:t},e){if(e.async&&!t.$async)throw new Error("async keyword in sync schema")}function co(t,e,r){if(r===void 0)throw new Error(`keyword "${e}" failed to compile`);return t.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Q.stringify)(r)})}function Dl(t,e,r=!1){return!e.length||e.some(s=>s==="array"?Array.isArray(t):s==="object"?t&&typeof t=="object"&&!Array.isArray(t):typeof t==s||r&&typeof t>"u")}ue.validSchemaType=Dl;function Ul({schema:t,opts:e,self:r,errSchemaPath:s},n,o){if(Array.isArray(n.keyword)?!n.keyword.includes(o):n.keyword!==o)throw new Error("ajv implementation error");let i=n.dependencies;if(i?.some(a=>!Object.prototype.hasOwnProperty.call(t,a)))throw new Error(`parent schema must have dependencies of ${o}: ${i.join(",")}`);if(n.validateSchema&&!n.validateSchema(t[o])){let c=`keyword "${o}" value is invalid at path "${s}": `+r.errorsText(n.validateSchema.errors);if(e.validateSchema==="log")r.logger.error(c);else throw new Error(c)}}ue.validateKeywordUsage=Ul});var po=y(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.extendSubschemaMode=Te.extendSubschemaData=Te.getSubschema=void 0;var pe=$(),uo=C();function ql(t,{keyword:e,schemaProp:r,schema:s,schemaPath:n,errSchemaPath:o,topSchemaRef:i}){if(e!==void 0&&s!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(e!==void 0){let a=t.schema[e];return r===void 0?{schema:a,schemaPath:(0,pe._)`${t.schemaPath}${(0,pe.getProperty)(e)}`,errSchemaPath:`${t.errSchemaPath}/${e}`}:{schema:a[r],schemaPath:(0,pe._)`${t.schemaPath}${(0,pe.getProperty)(e)}${(0,pe.getProperty)(r)}`,errSchemaPath:`${t.errSchemaPath}/${e}/${(0,uo.escapeFragment)(r)}`}}if(s!==void 0){if(n===void 0||o===void 0||i===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:s,schemaPath:n,topSchemaRef:i,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}Te.getSubschema=ql;function Vl(t,e,{dataProp:r,dataPropType:s,data:n,dataTypes:o,propertyName:i}){if(n!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=e;if(r!==void 0){let{errorPath:d,dataPathArr:l,opts:u}=e,g=a.let("data",(0,pe._)`${e.data}${(0,pe.getProperty)(r)}`,!0);c(g),t.errorPath=(0,pe.str)`${d}${(0,uo.getErrorPath)(r,s,u.jsPropertySyntax)}`,t.parentDataProperty=(0,pe._)`${r}`,t.dataPathArr=[...l,t.parentDataProperty]}if(n!==void 0){let d=n instanceof pe.Name?n:a.let("data",n,!0);c(d),i!==void 0&&(t.propertyName=i)}o&&(t.dataTypes=o);function c(d){t.data=d,t.dataLevel=e.dataLevel+1,t.dataTypes=[],e.definedProperties=new Set,t.parentData=e.data,t.dataNames=[...e.dataNames,d]}}Te.extendSubschemaData=Vl;function Fl(t,{jtdDiscriminator:e,jtdMetadata:r,compositeRule:s,createErrors:n,allErrors:o}){s!==void 0&&(t.compositeRule=s),n!==void 0&&(t.createErrors=n),o!==void 0&&(t.allErrors=o),t.jtdDiscriminator=e,t.jtdMetadata=r}Te.extendSubschemaMode=Fl});var ar=y((Bm,fo)=>{"use strict";fo.exports=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var s,n,o;if(Array.isArray(e)){if(s=e.length,s!=r.length)return!1;for(n=s;n--!==0;)if(!t(e[n],r[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(o=Object.keys(e),s=o.length,s!==Object.keys(r).length)return!1;for(n=s;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[n]))return!1;for(n=s;n--!==0;){var i=o[n];if(!t(e[i],r[i]))return!1}return!0}return e!==e&&r!==r}});var mo=y((Hm,ho)=>{"use strict";var Ae=ho.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var s=typeof r=="function"?r:r.pre||function(){},n=r.post||function(){};cr(e,s,n,t,"",t)};Ae.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Ae.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Ae.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Ae.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function cr(t,e,r,s,n,o,i,a,c,d){if(s&&typeof s=="object"&&!Array.isArray(s)){e(s,n,o,i,a,c,d);for(var l in s){var u=s[l];if(Array.isArray(u)){if(l in Ae.arrayKeywords)for(var g=0;g<u.length;g++)cr(t,e,r,u[g],n+"/"+l+"/"+g,o,n,l,s,g)}else if(l in Ae.propsKeywords){if(u&&typeof u=="object")for(var m in u)cr(t,e,r,u[m],n+"/"+l+"/"+Ll(m),o,n,l,s,m)}else(l in Ae.keywords||t.allKeys&&!(l in Ae.skipKeywords))&&cr(t,e,r,u,n+"/"+l,o,n,l,s)}r(s,n,o,i,a,c,d)}}function Ll(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}});var $t=y(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.getSchemaRefs=Z.resolveUrl=Z.normalizeId=Z._getFullPath=Z.getFullPath=Z.inlineRef=void 0;var Bl=C(),Hl=ar(),Kl=mo(),zl=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Wl(t,e=!0){return typeof t=="boolean"?!0:e===!0?!gs(t):e?go(t)<=e:!1}Z.inlineRef=Wl;var Jl=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function gs(t){for(let e in t){if(Jl.has(e))return!0;let r=t[e];if(Array.isArray(r)&&r.some(gs)||typeof r=="object"&&gs(r))return!0}return!1}function go(t){let e=0;for(let r in t){if(r==="$ref")return 1/0;if(e++,!zl.has(r)&&(typeof t[r]=="object"&&(0,Bl.eachItem)(t[r],s=>e+=go(s)),e===1/0))return 1/0}return e}function yo(t,e="",r){r!==!1&&(e=st(e));let s=t.parse(e);return Eo(t,s)}Z.getFullPath=yo;function Eo(t,e){return t.serialize(e).split("#")[0]+"#"}Z._getFullPath=Eo;var Ql=/#\/?$/;function st(t){return t?t.replace(Ql,""):""}Z.normalizeId=st;function Yl(t,e,r){return r=st(r),t.resolve(e,r)}Z.resolveUrl=Yl;var Xl=/^[a-z_][-a-z0-9._]*$/i;function Zl(t,e){if(typeof t=="boolean")return{};let{schemaId:r,uriResolver:s}=this.opts,n=st(t[r]||e),o={"":n},i=yo(s,n,!1),a={},c=new Set;return Kl(t,{allKeys:!0},(u,g,m,f)=>{if(f===void 0)return;let p=i+g,h=o[f];typeof u[r]=="string"&&(h=E.call(this,u[r])),T.call(this,u.$anchor),T.call(this,u.$dynamicAnchor),o[g]=h;function E(P){let G=this.opts.uriResolver.resolve;if(P=st(h?G(h,P):P),c.has(P))throw l(P);c.add(P);let v=this.refs[P];return typeof v=="string"&&(v=this.refs[v]),typeof v=="object"?d(u,v.schema,P):P!==st(p)&&(P[0]==="#"?(d(u,a[P],P),a[P]=u):this.refs[P]=p),P}function T(P){if(typeof P=="string"){if(!Xl.test(P))throw new Error(`invalid anchor "${P}"`);E.call(this,`#${P}`)}}}),a;function d(u,g,m){if(g!==void 0&&!Hl(u,g))throw l(m)}function l(u){return new Error(`reference "${u}" resolves to more than one schema`)}}Z.getSchemaRefs=Zl});var Ot=y(Ne=>{"use strict";Object.defineProperty(Ne,"__esModule",{value:!0});Ne.getData=Ne.KeywordCxt=Ne.validateFunctionCode=void 0;var Ro=Yn(),wo=Rt(),Es=ls(),lr=Rt(),ed=no(),Pt=lo(),ys=po(),w=$(),_=_e(),td=$t(),ve=C(),bt=St();function rd(t){if(Po(t)&&(Oo(t),bo(t))){od(t);return}$o(t,()=>(0,Ro.topBoolOrEmptySchema)(t))}Ne.validateFunctionCode=rd;function $o({gen:t,validateName:e,schema:r,schemaEnv:s,opts:n},o){n.code.es5?t.func(e,(0,w._)`${_.default.data}, ${_.default.valCxt}`,s.$async,()=>{t.code((0,w._)`"use strict"; ${_o(r,n)}`),nd(t,n),t.code(o)}):t.func(e,(0,w._)`${_.default.data}, ${sd(n)}`,s.$async,()=>t.code(_o(r,n)).code(o))}function sd(t){return(0,w._)`{${_.default.instancePath}="", ${_.default.parentData}, ${_.default.parentDataProperty}, ${_.default.rootData}=${_.default.data}${t.dynamicRef?(0,w._)`, ${_.default.dynamicAnchors}={}`:w.nil}}={}`}function nd(t,e){t.if(_.default.valCxt,()=>{t.var(_.default.instancePath,(0,w._)`${_.default.valCxt}.${_.default.instancePath}`),t.var(_.default.parentData,(0,w._)`${_.default.valCxt}.${_.default.parentData}`),t.var(_.default.parentDataProperty,(0,w._)`${_.default.valCxt}.${_.default.parentDataProperty}`),t.var(_.default.rootData,(0,w._)`${_.default.valCxt}.${_.default.rootData}`),e.dynamicRef&&t.var(_.default.dynamicAnchors,(0,w._)`${_.default.valCxt}.${_.default.dynamicAnchors}`)},()=>{t.var(_.default.instancePath,(0,w._)`""`),t.var(_.default.parentData,(0,w._)`undefined`),t.var(_.default.parentDataProperty,(0,w._)`undefined`),t.var(_.default.rootData,_.default.data),e.dynamicRef&&t.var(_.default.dynamicAnchors,(0,w._)`{}`)})}function od(t){let{schema:e,opts:r,gen:s}=t;$o(t,()=>{r.$comment&&e.$comment&&Ao(t),dd(t),s.let(_.default.vErrors,null),s.let(_.default.errors,0),r.unevaluated&&id(t),To(t),fd(t)})}function id(t){let{gen:e,validateName:r}=t;t.evaluated=e.const("evaluated",(0,w._)`${r}.evaluated`),e.if((0,w._)`${t.evaluated}.dynamicProps`,()=>e.assign((0,w._)`${t.evaluated}.props`,(0,w._)`undefined`)),e.if((0,w._)`${t.evaluated}.dynamicItems`,()=>e.assign((0,w._)`${t.evaluated}.items`,(0,w._)`undefined`))}function _o(t,e){let r=typeof t=="object"&&t[e.schemaId];return r&&(e.code.source||e.code.process)?(0,w._)`/*# sourceURL=${r} */`:w.nil}function ad(t,e){if(Po(t)&&(Oo(t),bo(t))){cd(t,e);return}(0,Ro.boolOrEmptySchema)(t,e)}function bo({schema:t,self:e}){if(typeof t=="boolean")return!t;for(let r in t)if(e.RULES.all[r])return!0;return!1}function Po(t){return typeof t.schema!="boolean"}function cd(t,e){let{schema:r,gen:s,opts:n}=t;n.$comment&&r.$comment&&Ao(t),ud(t),pd(t);let o=s.const("_errs",_.default.errors);To(t,o),s.var(e,(0,w._)`${o} === ${_.default.errors}`)}function Oo(t){(0,ve.checkUnknownRules)(t),ld(t)}function To(t,e){if(t.opts.jtd)return vo(t,[],!1,e);let r=(0,wo.getSchemaTypes)(t.schema),s=(0,wo.coerceAndCheckDataType)(t,r);vo(t,r,!s,e)}function ld(t){let{schema:e,errSchemaPath:r,opts:s,self:n}=t;e.$ref&&s.ignoreKeywordsWithRef&&(0,ve.schemaHasRulesButRef)(e,n.RULES)&&n.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function dd(t){let{schema:e,opts:r}=t;e.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,ve.checkStrictMode)(t,"default is ignored in the schema root")}function ud(t){let e=t.schema[t.opts.schemaId];e&&(t.baseId=(0,td.resolveUrl)(t.opts.uriResolver,t.baseId,e))}function pd(t){if(t.schema.$async&&!t.schemaEnv.$async)throw new Error("async schema in sync schema")}function Ao({gen:t,schemaEnv:e,schema:r,errSchemaPath:s,opts:n}){let o=r.$comment;if(n.$comment===!0)t.code((0,w._)`${_.default.self}.logger.log(${o})`);else if(typeof n.$comment=="function"){let i=(0,w.str)`${s}/$comment`,a=t.scopeValue("root",{ref:e.root});t.code((0,w._)`${_.default.self}.opts.$comment(${o}, ${i}, ${a}.schema)`)}}function fd(t){let{gen:e,schemaEnv:r,validateName:s,ValidationError:n,opts:o}=t;r.$async?e.if((0,w._)`${_.default.errors} === 0`,()=>e.return(_.default.data),()=>e.throw((0,w._)`new ${n}(${_.default.vErrors})`)):(e.assign((0,w._)`${s}.errors`,_.default.vErrors),o.unevaluated&&hd(t),e.return((0,w._)`${_.default.errors} === 0`))}function hd({gen:t,evaluated:e,props:r,items:s}){r instanceof w.Name&&t.assign((0,w._)`${e}.props`,r),s instanceof w.Name&&t.assign((0,w._)`${e}.items`,s)}function vo(t,e,r,s){let{gen:n,schema:o,data:i,allErrors:a,opts:c,self:d}=t,{RULES:l}=d;if(o.$ref&&(c.ignoreKeywordsWithRef||!(0,ve.schemaHasRulesButRef)(o,l))){n.block(()=>Co(t,"$ref",l.all.$ref.definition));return}c.jtd||md(t,e),n.block(()=>{for(let g of l.rules)u(g);u(l.post)});function u(g){(0,Es.shouldUseGroup)(o,g)&&(g.type?(n.if((0,lr.checkDataType)(g.type,i,c.strictNumbers)),So(t,g),e.length===1&&e[0]===g.type&&r&&(n.else(),(0,lr.reportTypeError)(t)),n.endIf()):So(t,g),a||n.if((0,w._)`${_.default.errors} === ${s||0}`))}}function So(t,e){let{gen:r,schema:s,opts:{useDefaults:n}}=t;n&&(0,ed.assignDefaults)(t,e.type),r.block(()=>{for(let o of e.rules)(0,Es.shouldUseRule)(s,o)&&Co(t,o.keyword,o.definition,e.type)})}function md(t,e){t.schemaEnv.meta||!t.opts.strictTypes||(gd(t,e),t.opts.allowUnionTypes||yd(t,e),Ed(t,t.dataTypes))}function gd(t,e){if(e.length){if(!t.dataTypes.length){t.dataTypes=e;return}e.forEach(r=>{No(t.dataTypes,r)||ws(t,`type "${r}" not allowed by context "${t.dataTypes.join(",")}"`)}),_d(t,e)}}function yd(t,e){e.length>1&&!(e.length===2&&e.includes("null"))&&ws(t,"use allowUnionTypes to allow union type keyword")}function Ed(t,e){let r=t.self.RULES.all;for(let s in r){let n=r[s];if(typeof n=="object"&&(0,Es.shouldUseRule)(t.schema,n)){let{type:o}=n.definition;o.length&&!o.some(i=>wd(e,i))&&ws(t,`missing type "${o.join(",")}" for keyword "${s}"`)}}}function wd(t,e){return t.includes(e)||e==="number"&&t.includes("integer")}function No(t,e){return t.includes(e)||e==="integer"&&t.includes("number")}function _d(t,e){let r=[];for(let s of t.dataTypes)No(e,s)?r.push(s):e.includes("integer")&&s==="number"&&r.push("integer");t.dataTypes=r}function ws(t,e){let r=t.schemaEnv.baseId+t.errSchemaPath;e+=` at "${r}" (strictTypes)`,(0,ve.checkStrictMode)(t,e,t.opts.strictTypes)}var dr=class{constructor(e,r,s){if((0,Pt.validateKeywordUsage)(e,r,s),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=s,this.data=e.data,this.schema=e.schema[s],this.$data=r.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,ve.schemaRefOrVal)(e,this.schema,s,this.$data),this.schemaType=r.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=r,this.$data)this.schemaCode=e.gen.const("vSchema",Io(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,Pt.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${s} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=e.gen.const("_errs",_.default.errors))}result(e,r,s){this.failResult((0,w.not)(e),r,s)}failResult(e,r,s){this.gen.if(e),s?s():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,r){this.failResult((0,w.not)(e),void 0,r)}fail(e){if(e===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:r}=this;this.fail((0,w._)`${r} !== undefined && (${(0,w.or)(this.invalid$data(),e)})`)}error(e,r,s){if(r){this.setParams(r),this._error(e,s),this.setParams({});return}this._error(e,s)}_error(e,r){(e?bt.reportExtraError:bt.reportError)(this,this.def.error,r)}$dataError(){(0,bt.reportError)(this,this.def.$dataError||bt.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,bt.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,r){r?Object.assign(this.params,e):this.params=e}block$data(e,r,s=w.nil){this.gen.block(()=>{this.check$data(e,s),r()})}check$data(e=w.nil,r=w.nil){if(!this.$data)return;let{gen:s,schemaCode:n,schemaType:o,def:i}=this;s.if((0,w.or)((0,w._)`${n} === undefined`,r)),e!==w.nil&&s.assign(e,!0),(o.length||i.validateSchema)&&(s.elseIf(this.invalid$data()),this.$dataError(),e!==w.nil&&s.assign(e,!1)),s.else()}invalid$data(){let{gen:e,schemaCode:r,schemaType:s,def:n,it:o}=this;return(0,w.or)(i(),a());function i(){if(s.length){if(!(r instanceof w.Name))throw new Error("ajv implementation error");let c=Array.isArray(s)?s:[s];return(0,w._)`${(0,lr.checkDataTypes)(c,r,o.opts.strictNumbers,lr.DataType.Wrong)}`}return w.nil}function a(){if(n.validateSchema){let c=e.scopeValue("validate$data",{ref:n.validateSchema});return(0,w._)`!${c}(${r})`}return w.nil}}subschema(e,r){let s=(0,ys.getSubschema)(this.it,e);(0,ys.extendSubschemaData)(s,this.it,e),(0,ys.extendSubschemaMode)(s,e);let n={...this.it,...s,items:void 0,props:void 0};return ad(n,r),n}mergeEvaluated(e,r){let{it:s,gen:n}=this;s.opts.unevaluated&&(s.props!==!0&&e.props!==void 0&&(s.props=ve.mergeEvaluated.props(n,e.props,s.props,r)),s.items!==!0&&e.items!==void 0&&(s.items=ve.mergeEvaluated.items(n,e.items,s.items,r)))}mergeValidEvaluated(e,r){let{it:s,gen:n}=this;if(s.opts.unevaluated&&(s.props!==!0||s.items!==!0))return n.if(r,()=>this.mergeEvaluated(e,w.Name)),!0}};Ne.KeywordCxt=dr;function Co(t,e,r,s){let n=new dr(t,r,e);"code"in r?r.code(n,s):n.$data&&r.validate?(0,Pt.funcKeywordCode)(n,r):"macro"in r?(0,Pt.macroKeywordCode)(n,r):(r.compile||r.validate)&&(0,Pt.funcKeywordCode)(n,r)}var vd=/^\/(?:[^~]|~0|~1)*$/,Sd=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Io(t,{dataLevel:e,dataNames:r,dataPathArr:s}){let n,o;if(t==="")return _.default.rootData;if(t[0]==="/"){if(!vd.test(t))throw new Error(`Invalid JSON-pointer: ${t}`);n=t,o=_.default.rootData}else{let d=Sd.exec(t);if(!d)throw new Error(`Invalid JSON-pointer: ${t}`);let l=+d[1];if(n=d[2],n==="#"){if(l>=e)throw new Error(c("property/index",l));return s[e-l]}if(l>e)throw new Error(c("data",l));if(o=r[e-l],!n)return o}let i=o,a=n.split("/");for(let d of a)d&&(o=(0,w._)`${o}${(0,w.getProperty)((0,ve.unescapeJsonPointer)(d))}`,i=(0,w._)`${i} && ${o}`);return i;function c(d,l){return`Cannot access ${d} ${l} levels up, current level is ${e}`}}Ne.getData=Io});var ur=y(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});var _s=class extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}};vs.default=_s});var Tt=y($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});var Ss=$t(),Rs=class extends Error{constructor(e,r,s,n){super(n||`can't resolve reference ${s} from id ${r}`),this.missingRef=(0,Ss.resolveUrl)(e,r,s),this.missingSchema=(0,Ss.normalizeId)((0,Ss.getFullPath)(e,this.missingRef))}};$s.default=Rs});var fr=y(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.resolveSchema=se.getCompilingSchema=se.resolveRef=se.compileSchema=se.SchemaEnv=void 0;var ae=$(),Rd=ur(),qe=_e(),ce=$t(),Mo=C(),$d=Ot(),nt=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let s;typeof e.schema=="object"&&(s=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,ce.normalizeId)(s?.[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=s?.$async,this.refs={}}};se.SchemaEnv=nt;function Ps(t){let e=Go.call(this,t);if(e)return e;let r=(0,ce.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:s,lines:n}=this.opts.code,{ownProperties:o}=this.opts,i=new ae.CodeGen(this.scope,{es5:s,lines:n,ownProperties:o}),a;t.$async&&(a=i.scopeValue("Error",{ref:Rd.default,code:(0,ae._)`require("ajv/dist/runtime/validation_error").default`}));let c=i.scopeName("validate");t.validateName=c;let d={gen:i,allErrors:this.opts.allErrors,data:qe.default.data,parentData:qe.default.parentData,parentDataProperty:qe.default.parentDataProperty,dataNames:[qe.default.data],dataPathArr:[ae.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:i.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,ae.stringify)(t.schema)}:{ref:t.schema}),validateName:c,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:ae.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,ae._)`""`,opts:this.opts,self:this},l;try{this._compilations.add(t),(0,$d.validateFunctionCode)(d),i.optimize(this.opts.code.optimize);let u=i.toString();l=`${i.scopeRefs(qe.default.scope)}return ${u}`,this.opts.code.process&&(l=this.opts.code.process(l,t));let m=new Function(`${qe.default.self}`,`${qe.default.scope}`,l)(this,this.scope.get());if(this.scope.value(c,{ref:m}),m.errors=null,m.schema=t.schema,m.schemaEnv=t,t.$async&&(m.$async=!0),this.opts.code.source===!0&&(m.source={validateName:c,validateCode:u,scopeValues:i._values}),this.opts.unevaluated){let{props:f,items:p}=d;m.evaluated={props:f instanceof ae.Name?void 0:f,items:p instanceof ae.Name?void 0:p,dynamicProps:f instanceof ae.Name,dynamicItems:p instanceof ae.Name},m.source&&(m.source.evaluated=(0,ae.stringify)(m.evaluated))}return t.validate=m,t}catch(u){throw delete t.validate,delete t.validateName,l&&this.logger.error("Error compiling schema, function code:",l),u}finally{this._compilations.delete(t)}}se.compileSchema=Ps;function bd(t,e,r){var s;r=(0,ce.resolveUrl)(this.opts.uriResolver,e,r);let n=t.refs[r];if(n)return n;let o=Td.call(this,t,r);if(o===void 0){let i=(s=t.localRefs)===null||s===void 0?void 0:s[r],{schemaId:a}=this.opts;i&&(o=new nt({schema:i,schemaId:a,root:t,baseId:e}))}if(o!==void 0)return t.refs[r]=Pd.call(this,o)}se.resolveRef=bd;function Pd(t){return(0,ce.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:Ps.call(this,t)}function Go(t){for(let e of this._compilations)if(Od(e,t))return e}se.getCompilingSchema=Go;function Od(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function Td(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||pr.call(this,t,e)}function pr(t,e){let r=this.opts.uriResolver.parse(e),s=(0,ce._getFullPath)(this.opts.uriResolver,r),n=(0,ce.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&s===n)return bs.call(this,r,t);let o=(0,ce.normalizeId)(s),i=this.refs[o]||this.schemas[o];if(typeof i=="string"){let a=pr.call(this,t,i);return typeof a?.schema!="object"?void 0:bs.call(this,r,a)}if(typeof i?.schema=="object"){if(i.validate||Ps.call(this,i),o===(0,ce.normalizeId)(e)){let{schema:a}=i,{schemaId:c}=this.opts,d=a[c];return d&&(n=(0,ce.resolveUrl)(this.opts.uriResolver,n,d)),new nt({schema:a,schemaId:c,root:t,baseId:n})}return bs.call(this,r,i)}}se.resolveSchema=pr;var Ad=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function bs(t,{baseId:e,schema:r,root:s}){var n;if(((n=t.fragment)===null||n===void 0?void 0:n[0])!=="/")return;for(let a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let c=r[(0,Mo.unescapeFragment)(a)];if(c===void 0)return;r=c;let d=typeof r=="object"&&r[this.opts.schemaId];!Ad.has(a)&&d&&(e=(0,ce.resolveUrl)(this.opts.uriResolver,e,d))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,Mo.schemaHasRulesButRef)(r,this.RULES)){let a=(0,ce.resolveUrl)(this.opts.uriResolver,e,r.$ref);o=pr.call(this,s,a)}let{schemaId:i}=this.opts;if(o=o||new nt({schema:r,schemaId:i,root:s,baseId:e}),o.schema!==o.root.schema)return o}});var ko=y((Ym,Nd)=>{Nd.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var jo=y((Xm,xo)=>{"use strict";var Cd={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};xo.exports={HEX:Cd}});var Ho=y((Zm,Bo)=>{"use strict";var{HEX:Id}=jo();function Vo(t){if(Lo(t,".")<3)return{host:t,isIPV4:!1};let e=t.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[r]=e;return r?{host:Gd(r,"."),isIPV4:!0}:{host:t,isIPV4:!1}}function Os(t,e=!1){let r="",s=!0;for(let n of t){if(Id[n]===void 0)return;n!=="0"&&s===!0&&(s=!1),s||(r+=n)}return e&&r.length===0&&(r="0"),r}function Md(t){let e=0,r={error:!1,address:"",zone:""},s=[],n=[],o=!1,i=!1,a=!1;function c(){if(n.length){if(o===!1){let d=Os(n);if(d!==void 0)s.push(d);else return r.error=!0,!1}n.length=0}return!0}for(let d=0;d<t.length;d++){let l=t[d];if(!(l==="["||l==="]"))if(l===":"){if(i===!0&&(a=!0),!c())break;if(e++,s.push(":"),e>7){r.error=!0;break}d-1>=0&&t[d-1]===":"&&(i=!0);continue}else if(l==="%"){if(!c())break;o=!0}else{n.push(l);continue}}return n.length&&(o?r.zone=n.join(""):a?s.push(n.join("")):s.push(Os(n))),r.address=s.join(""),r}function Fo(t,e={}){if(Lo(t,":")<2)return{host:t,isIPV6:!1};let r=Md(t);if(r.error)return{host:t,isIPV6:!1};{let s=r.address,n=r.address;return r.zone&&(s+="%"+r.zone,n+="%25"+r.zone),{host:s,escapedHost:n,isIPV6:!0}}}function Gd(t,e){let r="",s=!0,n=t.length;for(let o=0;o<n;o++){let i=t[o];i==="0"&&s?(o+1<=n&&t[o+1]===e||o+1===n)&&(r+=i,s=!1):(i===e?s=!0:s=!1,r+=i)}return r}function Lo(t,e){let r=0;for(let s=0;s<t.length;s++)t[s]===e&&r++;return r}var Do=/^\.\.?\//u,Uo=/^\/\.(?:\/|$)/u,qo=/^\/\.\.(?:\/|$)/u,kd=/^\/?(?:.|\n)*?(?=\/|$)/u;function xd(t){let e=[];for(;t.length;)if(t.match(Do))t=t.replace(Do,"");else if(t.match(Uo))t=t.replace(Uo,"/");else if(t.match(qo))t=t.replace(qo,"/"),e.pop();else if(t==="."||t==="..")t="";else{let r=t.match(kd);if(r){let s=r[0];t=t.slice(s.length),e.push(s)}else throw new Error("Unexpected dot segment condition")}return e.join("")}function jd(t,e){let r=e!==!0?escape:unescape;return t.scheme!==void 0&&(t.scheme=r(t.scheme)),t.userinfo!==void 0&&(t.userinfo=r(t.userinfo)),t.host!==void 0&&(t.host=r(t.host)),t.path!==void 0&&(t.path=r(t.path)),t.query!==void 0&&(t.query=r(t.query)),t.fragment!==void 0&&(t.fragment=r(t.fragment)),t}function Dd(t,e){let r=[];if(t.userinfo!==void 0&&(r.push(t.userinfo),r.push("@")),t.host!==void 0){let s=unescape(t.host),n=Vo(s);if(n.isIPV4)s=n.host;else{let o=Fo(n.host,{isIPV4:!1});o.isIPV6===!0?s=`[${o.escapedHost}]`:s=t.host}r.push(s)}return(typeof t.port=="number"||typeof t.port=="string")&&(r.push(":"),r.push(String(t.port))),r.length?r.join(""):void 0}Bo.exports={recomposeAuthority:Dd,normalizeComponentEncoding:jd,removeDotSegments:xd,normalizeIPv4:Vo,normalizeIPv6:Fo,stringArrayToHexStripped:Os}});var Yo=y((eg,Qo)=>{"use strict";var Ud=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,qd=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function Ko(t){return typeof t.secure=="boolean"?t.secure:String(t.scheme).toLowerCase()==="wss"}function zo(t){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t}function Wo(t){let e=String(t.scheme).toLowerCase()==="https";return(t.port===(e?443:80)||t.port==="")&&(t.port=void 0),t.path||(t.path="/"),t}function Vd(t){return t.secure=Ko(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t}function Fd(t){if((t.port===(Ko(t)?443:80)||t.port==="")&&(t.port=void 0),typeof t.secure=="boolean"&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){let[e,r]=t.resourceName.split("?");t.path=e&&e!=="/"?e:void 0,t.query=r,t.resourceName=void 0}return t.fragment=void 0,t}function Ld(t,e){if(!t.path)return t.error="URN can not be parsed",t;let r=t.path.match(qd);if(r){let s=e.scheme||t.scheme||"urn";t.nid=r[1].toLowerCase(),t.nss=r[2];let n=`${s}:${e.nid||t.nid}`,o=Ts[n];t.path=void 0,o&&(t=o.parse(t,e))}else t.error=t.error||"URN can not be parsed.";return t}function Bd(t,e){let r=e.scheme||t.scheme||"urn",s=t.nid.toLowerCase(),n=`${r}:${e.nid||s}`,o=Ts[n];o&&(t=o.serialize(t,e));let i=t,a=t.nss;return i.path=`${s||e.nid}:${a}`,e.skipEscape=!0,i}function Hd(t,e){let r=t;return r.uuid=r.nss,r.nss=void 0,!e.tolerant&&(!r.uuid||!Ud.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function Kd(t){let e=t;return e.nss=(t.uuid||"").toLowerCase(),e}var Jo={scheme:"http",domainHost:!0,parse:zo,serialize:Wo},zd={scheme:"https",domainHost:Jo.domainHost,parse:zo,serialize:Wo},hr={scheme:"ws",domainHost:!0,parse:Vd,serialize:Fd},Wd={scheme:"wss",domainHost:hr.domainHost,parse:hr.parse,serialize:hr.serialize},Jd={scheme:"urn",parse:Ld,serialize:Bd,skipNormalize:!0},Qd={scheme:"urn:uuid",parse:Hd,serialize:Kd,skipNormalize:!0},Ts={http:Jo,https:zd,ws:hr,wss:Wd,urn:Jd,"urn:uuid":Qd};Qo.exports=Ts});var Zo=y((tg,gr)=>{"use strict";var{normalizeIPv6:Yd,normalizeIPv4:Xd,removeDotSegments:At,recomposeAuthority:Zd,normalizeComponentEncoding:mr}=Ho(),As=Yo();function eu(t,e){return typeof t=="string"?t=fe(Se(t,e),e):typeof t=="object"&&(t=Se(fe(t,e),e)),t}function tu(t,e,r){let s=Object.assign({scheme:"null"},r),n=Xo(Se(t,s),Se(e,s),s,!0);return fe(n,{...s,skipEscape:!0})}function Xo(t,e,r,s){let n={};return s||(t=Se(fe(t,r),r),e=Se(fe(e,r),r)),r=r||{},!r.tolerant&&e.scheme?(n.scheme=e.scheme,n.userinfo=e.userinfo,n.host=e.host,n.port=e.port,n.path=At(e.path||""),n.query=e.query):(e.userinfo!==void 0||e.host!==void 0||e.port!==void 0?(n.userinfo=e.userinfo,n.host=e.host,n.port=e.port,n.path=At(e.path||""),n.query=e.query):(e.path?(e.path.charAt(0)==="/"?n.path=At(e.path):((t.userinfo!==void 0||t.host!==void 0||t.port!==void 0)&&!t.path?n.path="/"+e.path:t.path?n.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:n.path=e.path,n.path=At(n.path)),n.query=e.query):(n.path=t.path,e.query!==void 0?n.query=e.query:n.query=t.query),n.userinfo=t.userinfo,n.host=t.host,n.port=t.port),n.scheme=t.scheme),n.fragment=e.fragment,n}function ru(t,e,r){return typeof t=="string"?(t=unescape(t),t=fe(mr(Se(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=fe(mr(t,!0),{...r,skipEscape:!0})),typeof e=="string"?(e=unescape(e),e=fe(mr(Se(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=fe(mr(e,!0),{...r,skipEscape:!0})),t.toLowerCase()===e.toLowerCase()}function fe(t,e){let r={host:t.host,scheme:t.scheme,userinfo:t.userinfo,port:t.port,path:t.path,query:t.query,nid:t.nid,nss:t.nss,uuid:t.uuid,fragment:t.fragment,reference:t.reference,resourceName:t.resourceName,secure:t.secure,error:""},s=Object.assign({},e),n=[],o=As[(s.scheme||r.scheme||"").toLowerCase()];o&&o.serialize&&o.serialize(r,s),r.path!==void 0&&(s.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),s.reference!=="suffix"&&r.scheme&&(n.push(r.scheme),n.push(":"));let i=Zd(r,s);if(i!==void 0&&(s.reference!=="suffix"&&n.push("//"),n.push(i),r.path&&r.path.charAt(0)!=="/"&&n.push("/")),r.path!==void 0){let a=r.path;!s.absolutePath&&(!o||!o.absolutePath)&&(a=At(a)),i===void 0&&(a=a.replace(/^\/\//u,"/%2F")),n.push(a)}return r.query!==void 0&&(n.push("?"),n.push(r.query)),r.fragment!==void 0&&(n.push("#"),n.push(r.fragment)),n.join("")}var su=Array.from({length:127},(t,e)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(e)));function nu(t){let e=0;for(let r=0,s=t.length;r<s;++r)if(e=t.charCodeAt(r),e>126||su[e])return!0;return!1}var ou=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function Se(t,e){let r=Object.assign({},e),s={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},n=t.indexOf("%")!==-1,o=!1;r.reference==="suffix"&&(t=(r.scheme?r.scheme+":":"")+"//"+t);let i=t.match(ou);if(i){if(s.scheme=i[1],s.userinfo=i[3],s.host=i[4],s.port=parseInt(i[5],10),s.path=i[6]||"",s.query=i[7],s.fragment=i[8],isNaN(s.port)&&(s.port=i[5]),s.host){let c=Xd(s.host);if(c.isIPV4===!1){let d=Yd(c.host,{isIPV4:!1});s.host=d.host.toLowerCase(),o=d.isIPV6}else s.host=c.host,o=!0}s.scheme===void 0&&s.userinfo===void 0&&s.host===void 0&&s.port===void 0&&!s.path&&s.query===void 0?s.reference="same-document":s.scheme===void 0?s.reference="relative":s.fragment===void 0?s.reference="absolute":s.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==s.reference&&(s.error=s.error||"URI is not a "+r.reference+" reference.");let a=As[(r.scheme||s.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!a||!a.unicodeSupport)&&s.host&&(r.domainHost||a&&a.domainHost)&&o===!1&&nu(s.host))try{s.host=URL.domainToASCII(s.host.toLowerCase())}catch(c){s.error=s.error||"Host's domain name can not be converted to ASCII: "+c}(!a||a&&!a.skipNormalize)&&(n&&s.scheme!==void 0&&(s.scheme=unescape(s.scheme)),n&&s.userinfo!==void 0&&(s.userinfo=unescape(s.userinfo)),n&&s.host!==void 0&&(s.host=unescape(s.host)),s.path!==void 0&&s.path.length&&(s.path=escape(unescape(s.path))),s.fragment!==void 0&&s.fragment.length&&(s.fragment=encodeURI(decodeURIComponent(s.fragment)))),a&&a.parse&&a.parse(s,r)}else s.error=s.error||"URI can not be parsed.";return s}var Ns={SCHEMES:As,normalize:eu,resolve:tu,resolveComponents:Xo,equal:ru,serialize:fe,parse:Se};gr.exports=Ns;gr.exports.default=Ns;gr.exports.fastUri=Ns});var ti=y(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});var ei=Zo();ei.code='require("ajv/dist/runtime/uri").default';Cs.default=ei});var li=y(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.CodeGen=V.Name=V.nil=V.stringify=V.str=V._=V.KeywordCxt=void 0;var iu=Ot();Object.defineProperty(V,"KeywordCxt",{enumerable:!0,get:function(){return iu.KeywordCxt}});var ot=$();Object.defineProperty(V,"_",{enumerable:!0,get:function(){return ot._}});Object.defineProperty(V,"str",{enumerable:!0,get:function(){return ot.str}});Object.defineProperty(V,"stringify",{enumerable:!0,get:function(){return ot.stringify}});Object.defineProperty(V,"nil",{enumerable:!0,get:function(){return ot.nil}});Object.defineProperty(V,"Name",{enumerable:!0,get:function(){return ot.Name}});Object.defineProperty(V,"CodeGen",{enumerable:!0,get:function(){return ot.CodeGen}});var au=ur(),ii=Tt(),cu=cs(),Nt=fr(),lu=$(),Ct=$t(),yr=Rt(),Ms=C(),ri=ko(),du=ti(),ai=(t,e)=>new RegExp(t,e);ai.code="new RegExp";var uu=["removeAdditional","useDefaults","coerceTypes"],pu=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),fu={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},hu={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},si=200;function mu(t){var e,r,s,n,o,i,a,c,d,l,u,g,m,f,p,h,E,T,P,G,v,de,ge,Gr,kr;let ut=t.strict,xr=(e=t.code)===null||e===void 0?void 0:e.optimize,Nn=xr===!0||xr===void 0?1:xr||0,Cn=(s=(r=t.code)===null||r===void 0?void 0:r.regExp)!==null&&s!==void 0?s:ai,Wa=(n=t.uriResolver)!==null&&n!==void 0?n:du.default;return{strictSchema:(i=(o=t.strictSchema)!==null&&o!==void 0?o:ut)!==null&&i!==void 0?i:!0,strictNumbers:(c=(a=t.strictNumbers)!==null&&a!==void 0?a:ut)!==null&&c!==void 0?c:!0,strictTypes:(l=(d=t.strictTypes)!==null&&d!==void 0?d:ut)!==null&&l!==void 0?l:"log",strictTuples:(g=(u=t.strictTuples)!==null&&u!==void 0?u:ut)!==null&&g!==void 0?g:"log",strictRequired:(f=(m=t.strictRequired)!==null&&m!==void 0?m:ut)!==null&&f!==void 0?f:!1,code:t.code?{...t.code,optimize:Nn,regExp:Cn}:{optimize:Nn,regExp:Cn},loopRequired:(p=t.loopRequired)!==null&&p!==void 0?p:si,loopEnum:(h=t.loopEnum)!==null&&h!==void 0?h:si,meta:(E=t.meta)!==null&&E!==void 0?E:!0,messages:(T=t.messages)!==null&&T!==void 0?T:!0,inlineRefs:(P=t.inlineRefs)!==null&&P!==void 0?P:!0,schemaId:(G=t.schemaId)!==null&&G!==void 0?G:"$id",addUsedSchema:(v=t.addUsedSchema)!==null&&v!==void 0?v:!0,validateSchema:(de=t.validateSchema)!==null&&de!==void 0?de:!0,validateFormats:(ge=t.validateFormats)!==null&&ge!==void 0?ge:!0,unicodeRegExp:(Gr=t.unicodeRegExp)!==null&&Gr!==void 0?Gr:!0,int32range:(kr=t.int32range)!==null&&kr!==void 0?kr:!0,uriResolver:Wa}}var It=class{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...mu(e)};let{es5:r,lines:s}=this.opts.code;this.scope=new lu.ValueScope({scope:{},prefixes:pu,es5:r,lines:s}),this.logger=vu(e.logger);let n=e.validateFormats;e.validateFormats=!1,this.RULES=(0,cu.getRules)(),ni.call(this,fu,e,"NOT SUPPORTED"),ni.call(this,hu,e,"DEPRECATED","warn"),this._metaOpts=wu.call(this),e.formats&&yu.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&Eu.call(this,e.keywords),typeof e.meta=="object"&&this.addMetaSchema(e.meta),gu.call(this),e.validateFormats=n}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:r,schemaId:s}=this.opts,n=ri;s==="id"&&(n={...ri},n.id=n.$id,delete n.$id),r&&e&&this.addMetaSchema(n,n[s],!1)}defaultMeta(){let{meta:e,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof e=="object"?e[r]||e:void 0}validate(e,r){let s;if(typeof e=="string"){if(s=this.getSchema(e),!s)throw new Error(`no schema with key or ref "${e}"`)}else s=this.compile(e);let n=s(r);return"$async"in s||(this.errors=s.errors),n}compile(e,r){let s=this._addSchema(e,r);return s.validate||this._compileSchemaEnv(s)}compileAsync(e,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:s}=this.opts;return n.call(this,e,r);async function n(l,u){await o.call(this,l.$schema);let g=this._addSchema(l,u);return g.validate||i.call(this,g)}async function o(l){l&&!this.getSchema(l)&&await n.call(this,{$ref:l},!0)}async function i(l){try{return this._compileSchemaEnv(l)}catch(u){if(!(u instanceof ii.default))throw u;return a.call(this,u),await c.call(this,u.missingSchema),i.call(this,l)}}function a({missingSchema:l,missingRef:u}){if(this.refs[l])throw new Error(`AnySchema ${l} is loaded but ${u} cannot be resolved`)}async function c(l){let u=await d.call(this,l);this.refs[l]||await o.call(this,u.$schema),this.refs[l]||this.addSchema(u,l,r)}async function d(l){let u=this._loading[l];if(u)return u;try{return await(this._loading[l]=s(l))}finally{delete this._loading[l]}}}addSchema(e,r,s,n=this.opts.validateSchema){if(Array.isArray(e)){for(let i of e)this.addSchema(i,void 0,s,n);return this}let o;if(typeof e=="object"){let{schemaId:i}=this.opts;if(o=e[i],o!==void 0&&typeof o!="string")throw new Error(`schema ${i} must be string`)}return r=(0,Ct.normalizeId)(r||o),this._checkUnique(r),this.schemas[r]=this._addSchema(e,s,r,n,!0),this}addMetaSchema(e,r,s=this.opts.validateSchema){return this.addSchema(e,r,!0,s),this}validateSchema(e,r){if(typeof e=="boolean")return!0;let s;if(s=e.$schema,s!==void 0&&typeof s!="string")throw new Error("$schema must be a string");if(s=s||this.opts.defaultMeta||this.defaultMeta(),!s)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let n=this.validate(s,e);if(!n&&r){let o="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(o);else throw new Error(o)}return n}getSchema(e){let r;for(;typeof(r=oi.call(this,e))=="string";)e=r;if(r===void 0){let{schemaId:s}=this.opts,n=new Nt.SchemaEnv({schema:{},schemaId:s});if(r=Nt.resolveSchema.call(this,n,e),!r)return;this.refs[e]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=oi.call(this,e);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{let r=e;this._cache.delete(r);let s=e[this.opts.schemaId];return s&&(s=(0,Ct.normalizeId)(s),delete this.schemas[s],delete this.refs[s]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let r of e)this.addKeyword(r);return this}addKeyword(e,r){let s;if(typeof e=="string")s=e,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=s);else if(typeof e=="object"&&r===void 0){if(r=e,s=r.keyword,Array.isArray(s)&&!s.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Ru.call(this,s,r),!r)return(0,Ms.eachItem)(s,o=>Is.call(this,o)),this;bu.call(this,r);let n={...r,type:(0,yr.getJSONTypes)(r.type),schemaType:(0,yr.getJSONTypes)(r.schemaType)};return(0,Ms.eachItem)(s,n.type.length===0?o=>Is.call(this,o,n):o=>n.type.forEach(i=>Is.call(this,o,n,i))),this}getKeyword(e){let r=this.RULES.all[e];return typeof r=="object"?r.definition:!!r}removeKeyword(e){let{RULES:r}=this;delete r.keywords[e],delete r.all[e];for(let s of r.rules){let n=s.rules.findIndex(o=>o.keyword===e);n>=0&&s.rules.splice(n,1)}return this}addFormat(e,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[e]=r,this}errorsText(e=this.errors,{separator:r=", ",dataVar:s="data"}={}){return!e||e.length===0?"No errors":e.map(n=>`${s}${n.instancePath} ${n.message}`).reduce((n,o)=>n+r+o)}$dataMetaSchema(e,r){let s=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(let n of r){let o=n.split("/").slice(1),i=e;for(let a of o)i=i[a];for(let a in s){let c=s[a];if(typeof c!="object")continue;let{$data:d}=c.definition,l=i[a];d&&l&&(i[a]=ci(l))}}return e}_removeAllSchemas(e,r){for(let s in e){let n=e[s];(!r||r.test(s))&&(typeof n=="string"?delete e[s]:n&&!n.meta&&(this._cache.delete(n.schema),delete e[s]))}}_addSchema(e,r,s,n=this.opts.validateSchema,o=this.opts.addUsedSchema){let i,{schemaId:a}=this.opts;if(typeof e=="object")i=e[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof e!="boolean")throw new Error("schema must be object or boolean")}let c=this._cache.get(e);if(c!==void 0)return c;s=(0,Ct.normalizeId)(i||s);let d=Ct.getSchemaRefs.call(this,e,s);return c=new Nt.SchemaEnv({schema:e,schemaId:a,meta:r,baseId:s,localRefs:d}),this._cache.set(c.schema,c),o&&!s.startsWith("#")&&(s&&this._checkUnique(s),this.refs[s]=c),n&&this.validateSchema(e,!0),c}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):Nt.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let r=this.opts;this.opts=this._metaOpts;try{Nt.compileSchema.call(this,e)}finally{this.opts=r}}};It.ValidationError=au.default;It.MissingRefError=ii.default;V.default=It;function ni(t,e,r,s="error"){for(let n in t){let o=n;o in e&&this.logger[s](`${r}: option ${n}. ${t[o]}`)}}function oi(t){return t=(0,Ct.normalizeId)(t),this.schemas[t]||this.refs[t]}function gu(){let t=this.opts.schemas;if(t)if(Array.isArray(t))this.addSchema(t);else for(let e in t)this.addSchema(t[e],e)}function yu(){for(let t in this.opts.formats){let e=this.opts.formats[t];e&&this.addFormat(t,e)}}function Eu(t){if(Array.isArray(t)){this.addVocabulary(t);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let e in t){let r=t[e];r.keyword||(r.keyword=e),this.addKeyword(r)}}function wu(){let t={...this.opts};for(let e of uu)delete t[e];return t}var _u={log(){},warn(){},error(){}};function vu(t){if(t===!1)return _u;if(t===void 0)return console;if(t.log&&t.warn&&t.error)return t;throw new Error("logger must implement log, warn and error methods")}var Su=/^[a-z_$][a-z0-9_$:-]*$/i;function Ru(t,e){let{RULES:r}=this;if((0,Ms.eachItem)(t,s=>{if(r.keywords[s])throw new Error(`Keyword ${s} is already defined`);if(!Su.test(s))throw new Error(`Keyword ${s} has invalid name`)}),!!e&&e.$data&&!("code"in e||"validate"in e))throw new Error('$data keyword must have "code" or "validate" function')}function Is(t,e,r){var s;let n=e?.post;if(r&&n)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:o}=this,i=n?o.post:o.rules.find(({type:c})=>c===r);if(i||(i={type:r,rules:[]},o.rules.push(i)),o.keywords[t]=!0,!e)return;let a={keyword:t,definition:{...e,type:(0,yr.getJSONTypes)(e.type),schemaType:(0,yr.getJSONTypes)(e.schemaType)}};e.before?$u.call(this,i,a,e.before):i.rules.push(a),o.all[t]=a,(s=e.implements)===null||s===void 0||s.forEach(c=>this.addKeyword(c))}function $u(t,e,r){let s=t.rules.findIndex(n=>n.keyword===r);s>=0?t.rules.splice(s,0,e):(t.rules.push(e),this.logger.warn(`rule ${r} is not defined`))}function bu(t){let{metaSchema:e}=t;e!==void 0&&(t.$data&&this.opts.$data&&(e=ci(e)),t.validateSchema=this.compile(e,!0))}var Pu={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ci(t){return{anyOf:[t,Pu]}}});var di=y(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});var Ou={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Gs.default=Ou});var hi=y(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.callRef=Ve.getValidate=void 0;var Tu=Tt(),ui=re(),ee=$(),it=_e(),pi=fr(),Er=C(),Au={keyword:"$ref",schemaType:"string",code(t){let{gen:e,schema:r,it:s}=t,{baseId:n,schemaEnv:o,validateName:i,opts:a,self:c}=s,{root:d}=o;if((r==="#"||r==="#/")&&n===d.baseId)return u();let l=pi.resolveRef.call(c,d,n,r);if(l===void 0)throw new Tu.default(s.opts.uriResolver,n,r);if(l instanceof pi.SchemaEnv)return g(l);return m(l);function u(){if(o===d)return wr(t,i,o,o.$async);let f=e.scopeValue("root",{ref:d});return wr(t,(0,ee._)`${f}.validate`,d,d.$async)}function g(f){let p=fi(t,f);wr(t,p,f,f.$async)}function m(f){let p=e.scopeValue("schema",a.code.source===!0?{ref:f,code:(0,ee.stringify)(f)}:{ref:f}),h=e.name("valid"),E=t.subschema({schema:f,dataTypes:[],schemaPath:ee.nil,topSchemaRef:p,errSchemaPath:r},h);t.mergeEvaluated(E),t.ok(h)}}};function fi(t,e){let{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,ee._)`${r.scopeValue("wrapper",{ref:e})}.validate`}Ve.getValidate=fi;function wr(t,e,r,s){let{gen:n,it:o}=t,{allErrors:i,schemaEnv:a,opts:c}=o,d=c.passContext?it.default.this:ee.nil;s?l():u();function l(){if(!a.$async)throw new Error("async schema referenced by sync schema");let f=n.let("valid");n.try(()=>{n.code((0,ee._)`await ${(0,ui.callValidateCode)(t,e,d)}`),m(e),i||n.assign(f,!0)},p=>{n.if((0,ee._)`!(${p} instanceof ${o.ValidationError})`,()=>n.throw(p)),g(p),i||n.assign(f,!1)}),t.ok(f)}function u(){t.result((0,ui.callValidateCode)(t,e,d),()=>m(e),()=>g(e))}function g(f){let p=(0,ee._)`${f}.errors`;n.assign(it.default.vErrors,(0,ee._)`${it.default.vErrors} === null ? ${p} : ${it.default.vErrors}.concat(${p})`),n.assign(it.default.errors,(0,ee._)`${it.default.vErrors}.length`)}function m(f){var p;if(!o.opts.unevaluated)return;let h=(p=r?.validate)===null||p===void 0?void 0:p.evaluated;if(o.props!==!0)if(h&&!h.dynamicProps)h.props!==void 0&&(o.props=Er.mergeEvaluated.props(n,h.props,o.props));else{let E=n.var("props",(0,ee._)`${f}.evaluated.props`);o.props=Er.mergeEvaluated.props(n,E,o.props,ee.Name)}if(o.items!==!0)if(h&&!h.dynamicItems)h.items!==void 0&&(o.items=Er.mergeEvaluated.items(n,h.items,o.items));else{let E=n.var("items",(0,ee._)`${f}.evaluated.items`);o.items=Er.mergeEvaluated.items(n,E,o.items,ee.Name)}}}Ve.callRef=wr;Ve.default=Au});var mi=y(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});var Nu=di(),Cu=hi(),Iu=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Nu.default,Cu.default];ks.default=Iu});var gi=y(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});var _r=$(),Ce=_r.operators,vr={maximum:{okStr:"<=",ok:Ce.LTE,fail:Ce.GT},minimum:{okStr:">=",ok:Ce.GTE,fail:Ce.LT},exclusiveMaximum:{okStr:"<",ok:Ce.LT,fail:Ce.GTE},exclusiveMinimum:{okStr:">",ok:Ce.GT,fail:Ce.LTE}},Mu={message:({keyword:t,schemaCode:e})=>(0,_r.str)`must be ${vr[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,_r._)`{comparison: ${vr[t].okStr}, limit: ${e}}`},Gu={keyword:Object.keys(vr),type:"number",schemaType:"number",$data:!0,error:Mu,code(t){let{keyword:e,data:r,schemaCode:s}=t;t.fail$data((0,_r._)`${r} ${vr[e].fail} ${s} || isNaN(${r})`)}};xs.default=Gu});var yi=y(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});var Mt=$(),ku={message:({schemaCode:t})=>(0,Mt.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Mt._)`{multipleOf: ${t}}`},xu={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:ku,code(t){let{gen:e,data:r,schemaCode:s,it:n}=t,o=n.opts.multipleOfPrecision,i=e.let("res"),a=o?(0,Mt._)`Math.abs(Math.round(${i}) - ${i}) > 1e-${o}`:(0,Mt._)`${i} !== parseInt(${i})`;t.fail$data((0,Mt._)`(${s} === 0 || (${i} = ${r}/${s}, ${a}))`)}};js.default=xu});var wi=y(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});function Ei(t){let e=t.length,r=0,s=0,n;for(;s<e;)r++,n=t.charCodeAt(s++),n>=55296&&n<=56319&&s<e&&(n=t.charCodeAt(s),(n&64512)===56320&&s++);return r}Ds.default=Ei;Ei.code='require("ajv/dist/runtime/ucs2length").default'});var _i=y(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});var Fe=$(),ju=C(),Du=wi(),Uu={message({keyword:t,schemaCode:e}){let r=t==="maxLength"?"more":"fewer";return(0,Fe.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,Fe._)`{limit: ${t}}`},qu={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Uu,code(t){let{keyword:e,data:r,schemaCode:s,it:n}=t,o=e==="maxLength"?Fe.operators.GT:Fe.operators.LT,i=n.opts.unicode===!1?(0,Fe._)`${r}.length`:(0,Fe._)`${(0,ju.useFunc)(t.gen,Du.default)}(${r})`;t.fail$data((0,Fe._)`${i} ${o} ${s}`)}};Us.default=qu});var vi=y(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});var Vu=re(),Sr=$(),Fu={message:({schemaCode:t})=>(0,Sr.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,Sr._)`{pattern: ${t}}`},Lu={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Fu,code(t){let{data:e,$data:r,schema:s,schemaCode:n,it:o}=t,i=o.opts.unicodeRegExp?"u":"",a=r?(0,Sr._)`(new RegExp(${n}, ${i}))`:(0,Vu.usePattern)(t,s);t.fail$data((0,Sr._)`!${a}.test(${e})`)}};qs.default=Lu});var Si=y(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});var Gt=$(),Bu={message({keyword:t,schemaCode:e}){let r=t==="maxProperties"?"more":"fewer";return(0,Gt.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,Gt._)`{limit: ${t}}`},Hu={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Bu,code(t){let{keyword:e,data:r,schemaCode:s}=t,n=e==="maxProperties"?Gt.operators.GT:Gt.operators.LT;t.fail$data((0,Gt._)`Object.keys(${r}).length ${n} ${s}`)}};Vs.default=Hu});var Ri=y(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});var kt=re(),xt=$(),Ku=C(),zu={message:({params:{missingProperty:t}})=>(0,xt.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,xt._)`{missingProperty: ${t}}`},Wu={keyword:"required",type:"object",schemaType:"array",$data:!0,error:zu,code(t){let{gen:e,schema:r,schemaCode:s,data:n,$data:o,it:i}=t,{opts:a}=i;if(!o&&r.length===0)return;let c=r.length>=a.loopRequired;if(i.allErrors?d():l(),a.strictRequired){let m=t.parentSchema.properties,{definedProperties:f}=t.it;for(let p of r)if(m?.[p]===void 0&&!f.has(p)){let h=i.schemaEnv.baseId+i.errSchemaPath,E=`required property "${p}" is not defined at "${h}" (strictRequired)`;(0,Ku.checkStrictMode)(i,E,i.opts.strictRequired)}}function d(){if(c||o)t.block$data(xt.nil,u);else for(let m of r)(0,kt.checkReportMissingProp)(t,m)}function l(){let m=e.let("missing");if(c||o){let f=e.let("valid",!0);t.block$data(f,()=>g(m,f)),t.ok(f)}else e.if((0,kt.checkMissingProp)(t,r,m)),(0,kt.reportMissingProp)(t,m),e.else()}function u(){e.forOf("prop",s,m=>{t.setParams({missingProperty:m}),e.if((0,kt.noPropertyInData)(e,n,m,a.ownProperties),()=>t.error())})}function g(m,f){t.setParams({missingProperty:m}),e.forOf(m,s,()=>{e.assign(f,(0,kt.propertyInData)(e,n,m,a.ownProperties)),e.if((0,xt.not)(f),()=>{t.error(),e.break()})},xt.nil)}}};Fs.default=Wu});var $i=y(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});var jt=$(),Ju={message({keyword:t,schemaCode:e}){let r=t==="maxItems"?"more":"fewer";return(0,jt.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,jt._)`{limit: ${t}}`},Qu={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Ju,code(t){let{keyword:e,data:r,schemaCode:s}=t,n=e==="maxItems"?jt.operators.GT:jt.operators.LT;t.fail$data((0,jt._)`${r}.length ${n} ${s}`)}};Ls.default=Qu});var Rr=y(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});var bi=ar();bi.code='require("ajv/dist/runtime/equal").default';Bs.default=bi});var Pi=y(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});var Hs=Rt(),F=$(),Yu=C(),Xu=Rr(),Zu={message:({params:{i:t,j:e}})=>(0,F.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,F._)`{i: ${t}, j: ${e}}`},ep={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Zu,code(t){let{gen:e,data:r,$data:s,schema:n,parentSchema:o,schemaCode:i,it:a}=t;if(!s&&!n)return;let c=e.let("valid"),d=o.items?(0,Hs.getSchemaTypes)(o.items):[];t.block$data(c,l,(0,F._)`${i} === false`),t.ok(c);function l(){let f=e.let("i",(0,F._)`${r}.length`),p=e.let("j");t.setParams({i:f,j:p}),e.assign(c,!0),e.if((0,F._)`${f} > 1`,()=>(u()?g:m)(f,p))}function u(){return d.length>0&&!d.some(f=>f==="object"||f==="array")}function g(f,p){let h=e.name("item"),E=(0,Hs.checkDataTypes)(d,h,a.opts.strictNumbers,Hs.DataType.Wrong),T=e.const("indices",(0,F._)`{}`);e.for((0,F._)`;${f}--;`,()=>{e.let(h,(0,F._)`${r}[${f}]`),e.if(E,(0,F._)`continue`),d.length>1&&e.if((0,F._)`typeof ${h} == "string"`,(0,F._)`${h} += "_"`),e.if((0,F._)`typeof ${T}[${h}] == "number"`,()=>{e.assign(p,(0,F._)`${T}[${h}]`),t.error(),e.assign(c,!1).break()}).code((0,F._)`${T}[${h}] = ${f}`)})}function m(f,p){let h=(0,Yu.useFunc)(e,Xu.default),E=e.name("outer");e.label(E).for((0,F._)`;${f}--;`,()=>e.for((0,F._)`${p} = ${f}; ${p}--;`,()=>e.if((0,F._)`${h}(${r}[${f}], ${r}[${p}])`,()=>{t.error(),e.assign(c,!1).break(E)})))}}};Ks.default=ep});var Oi=y(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});var zs=$(),tp=C(),rp=Rr(),sp={message:"must be equal to constant",params:({schemaCode:t})=>(0,zs._)`{allowedValue: ${t}}`},np={keyword:"const",$data:!0,error:sp,code(t){let{gen:e,data:r,$data:s,schemaCode:n,schema:o}=t;s||o&&typeof o=="object"?t.fail$data((0,zs._)`!${(0,tp.useFunc)(e,rp.default)}(${r}, ${n})`):t.fail((0,zs._)`${o} !== ${r}`)}};Ws.default=np});var Ti=y(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});var Dt=$(),op=C(),ip=Rr(),ap={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,Dt._)`{allowedValues: ${t}}`},cp={keyword:"enum",schemaType:"array",$data:!0,error:ap,code(t){let{gen:e,data:r,$data:s,schema:n,schemaCode:o,it:i}=t;if(!s&&n.length===0)throw new Error("enum must have non-empty array");let a=n.length>=i.opts.loopEnum,c,d=()=>c??(c=(0,op.useFunc)(e,ip.default)),l;if(a||s)l=e.let("valid"),t.block$data(l,u);else{if(!Array.isArray(n))throw new Error("ajv implementation error");let m=e.const("vSchema",o);l=(0,Dt.or)(...n.map((f,p)=>g(m,p)))}t.pass(l);function u(){e.assign(l,!1),e.forOf("v",o,m=>e.if((0,Dt._)`${d()}(${r}, ${m})`,()=>e.assign(l,!0).break()))}function g(m,f){let p=n[f];return typeof p=="object"&&p!==null?(0,Dt._)`${d()}(${r}, ${m}[${f}])`:(0,Dt._)`${r} === ${p}`}}};Js.default=cp});var Ai=y(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});var lp=gi(),dp=yi(),up=_i(),pp=vi(),fp=Si(),hp=Ri(),mp=$i(),gp=Pi(),yp=Oi(),Ep=Ti(),wp=[lp.default,dp.default,up.default,pp.default,fp.default,hp.default,mp.default,gp.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},yp.default,Ep.default];Qs.default=wp});var Xs=y(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.validateAdditionalItems=void 0;var Le=$(),Ys=C(),_p={message:({params:{len:t}})=>(0,Le.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Le._)`{limit: ${t}}`},vp={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:_p,code(t){let{parentSchema:e,it:r}=t,{items:s}=e;if(!Array.isArray(s)){(0,Ys.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Ni(t,s)}};function Ni(t,e){let{gen:r,schema:s,data:n,keyword:o,it:i}=t;i.items=!0;let a=r.const("len",(0,Le._)`${n}.length`);if(s===!1)t.setParams({len:e.length}),t.pass((0,Le._)`${a} <= ${e.length}`);else if(typeof s=="object"&&!(0,Ys.alwaysValidSchema)(i,s)){let d=r.var("valid",(0,Le._)`${a} <= ${e.length}`);r.if((0,Le.not)(d),()=>c(d)),t.ok(d)}function c(d){r.forRange("i",e.length,a,l=>{t.subschema({keyword:o,dataProp:l,dataPropType:Ys.Type.Num},d),i.allErrors||r.if((0,Le.not)(d),()=>r.break())})}}Ut.validateAdditionalItems=Ni;Ut.default=vp});var Zs=y(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.validateTuple=void 0;var Ci=$(),$r=C(),Sp=re(),Rp={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){let{schema:e,it:r}=t;if(Array.isArray(e))return Ii(t,"additionalItems",e);r.items=!0,!(0,$r.alwaysValidSchema)(r,e)&&t.ok((0,Sp.validateArray)(t))}};function Ii(t,e,r=t.schema){let{gen:s,parentSchema:n,data:o,keyword:i,it:a}=t;l(n),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=$r.mergeEvaluated.items(s,r.length,a.items));let c=s.name("valid"),d=s.const("len",(0,Ci._)`${o}.length`);r.forEach((u,g)=>{(0,$r.alwaysValidSchema)(a,u)||(s.if((0,Ci._)`${d} > ${g}`,()=>t.subschema({keyword:i,schemaProp:g,dataProp:g},c)),t.ok(c))});function l(u){let{opts:g,errSchemaPath:m}=a,f=r.length,p=f===u.minItems&&(f===u.maxItems||u[e]===!1);if(g.strictTuples&&!p){let h=`"${i}" is ${f}-tuple, but minItems or maxItems/${e} are not specified or different at path "${m}"`;(0,$r.checkStrictMode)(a,h,g.strictTuples)}}}qt.validateTuple=Ii;qt.default=Rp});var Mi=y(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});var $p=Zs(),bp={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,$p.validateTuple)(t,"items")};en.default=bp});var ki=y(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});var Gi=$(),Pp=C(),Op=re(),Tp=Xs(),Ap={message:({params:{len:t}})=>(0,Gi.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Gi._)`{limit: ${t}}`},Np={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Ap,code(t){let{schema:e,parentSchema:r,it:s}=t,{prefixItems:n}=r;s.items=!0,!(0,Pp.alwaysValidSchema)(s,e)&&(n?(0,Tp.validateAdditionalItems)(t,n):t.ok((0,Op.validateArray)(t)))}};tn.default=Np});var xi=y(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});var ne=$(),br=C(),Cp={message:({params:{min:t,max:e}})=>e===void 0?(0,ne.str)`must contain at least ${t} valid item(s)`:(0,ne.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,ne._)`{minContains: ${t}}`:(0,ne._)`{minContains: ${t}, maxContains: ${e}}`},Ip={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Cp,code(t){let{gen:e,schema:r,parentSchema:s,data:n,it:o}=t,i,a,{minContains:c,maxContains:d}=s;o.opts.next?(i=c===void 0?1:c,a=d):i=1;let l=e.const("len",(0,ne._)`${n}.length`);if(t.setParams({min:i,max:a}),a===void 0&&i===0){(0,br.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&i>a){(0,br.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,br.alwaysValidSchema)(o,r)){let p=(0,ne._)`${l} >= ${i}`;a!==void 0&&(p=(0,ne._)`${p} && ${l} <= ${a}`),t.pass(p);return}o.items=!0;let u=e.name("valid");a===void 0&&i===1?m(u,()=>e.if(u,()=>e.break())):i===0?(e.let(u,!0),a!==void 0&&e.if((0,ne._)`${n}.length > 0`,g)):(e.let(u,!1),g()),t.result(u,()=>t.reset());function g(){let p=e.name("_valid"),h=e.let("count",0);m(p,()=>e.if(p,()=>f(h)))}function m(p,h){e.forRange("i",0,l,E=>{t.subschema({keyword:"contains",dataProp:E,dataPropType:br.Type.Num,compositeRule:!0},p),h()})}function f(p){e.code((0,ne._)`${p}++`),a===void 0?e.if((0,ne._)`${p} >= ${i}`,()=>e.assign(u,!0).break()):(e.if((0,ne._)`${p} > ${a}`,()=>e.assign(u,!1).break()),i===1?e.assign(u,!0):e.if((0,ne._)`${p} >= ${i}`,()=>e.assign(u,!0)))}}};rn.default=Ip});var Ui=y(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.validateSchemaDeps=he.validatePropertyDeps=he.error=void 0;var sn=$(),Mp=C(),Vt=re();he.error={message:({params:{property:t,depsCount:e,deps:r}})=>{let s=e===1?"property":"properties";return(0,sn.str)`must have ${s} ${r} when property ${t} is present`},params:({params:{property:t,depsCount:e,deps:r,missingProperty:s}})=>(0,sn._)`{property: ${t},
    missingProperty: ${s},
    depsCount: ${e},
    deps: ${r}}`};var Gp={keyword:"dependencies",type:"object",schemaType:"object",error:he.error,code(t){let[e,r]=kp(t);ji(t,e),Di(t,r)}};function kp({schema:t}){let e={},r={};for(let s in t){if(s==="__proto__")continue;let n=Array.isArray(t[s])?e:r;n[s]=t[s]}return[e,r]}function ji(t,e=t.schema){let{gen:r,data:s,it:n}=t;if(Object.keys(e).length===0)return;let o=r.let("missing");for(let i in e){let a=e[i];if(a.length===0)continue;let c=(0,Vt.propertyInData)(r,s,i,n.opts.ownProperties);t.setParams({property:i,depsCount:a.length,deps:a.join(", ")}),n.allErrors?r.if(c,()=>{for(let d of a)(0,Vt.checkReportMissingProp)(t,d)}):(r.if((0,sn._)`${c} && (${(0,Vt.checkMissingProp)(t,a,o)})`),(0,Vt.reportMissingProp)(t,o),r.else())}}he.validatePropertyDeps=ji;function Di(t,e=t.schema){let{gen:r,data:s,keyword:n,it:o}=t,i=r.name("valid");for(let a in e)(0,Mp.alwaysValidSchema)(o,e[a])||(r.if((0,Vt.propertyInData)(r,s,a,o.opts.ownProperties),()=>{let c=t.subschema({keyword:n,schemaProp:a},i);t.mergeValidEvaluated(c,i)},()=>r.var(i,!0)),t.ok(i))}he.validateSchemaDeps=Di;he.default=Gp});var Vi=y(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});var qi=$(),xp=C(),jp={message:"property name must be valid",params:({params:t})=>(0,qi._)`{propertyName: ${t.propertyName}}`},Dp={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:jp,code(t){let{gen:e,schema:r,data:s,it:n}=t;if((0,xp.alwaysValidSchema)(n,r))return;let o=e.name("valid");e.forIn("key",s,i=>{t.setParams({propertyName:i}),t.subschema({keyword:"propertyNames",data:i,dataTypes:["string"],propertyName:i,compositeRule:!0},o),e.if((0,qi.not)(o),()=>{t.error(!0),n.allErrors||e.break()})}),t.ok(o)}};nn.default=Dp});var an=y(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});var Pr=re(),le=$(),Up=_e(),Or=C(),qp={message:"must NOT have additional properties",params:({params:t})=>(0,le._)`{additionalProperty: ${t.additionalProperty}}`},Vp={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:qp,code(t){let{gen:e,schema:r,parentSchema:s,data:n,errsCount:o,it:i}=t;if(!o)throw new Error("ajv implementation error");let{allErrors:a,opts:c}=i;if(i.props=!0,c.removeAdditional!=="all"&&(0,Or.alwaysValidSchema)(i,r))return;let d=(0,Pr.allSchemaProperties)(s.properties),l=(0,Pr.allSchemaProperties)(s.patternProperties);u(),t.ok((0,le._)`${o} === ${Up.default.errors}`);function u(){e.forIn("key",n,h=>{!d.length&&!l.length?f(h):e.if(g(h),()=>f(h))})}function g(h){let E;if(d.length>8){let T=(0,Or.schemaRefOrVal)(i,s.properties,"properties");E=(0,Pr.isOwnProperty)(e,T,h)}else d.length?E=(0,le.or)(...d.map(T=>(0,le._)`${h} === ${T}`)):E=le.nil;return l.length&&(E=(0,le.or)(E,...l.map(T=>(0,le._)`${(0,Pr.usePattern)(t,T)}.test(${h})`))),(0,le.not)(E)}function m(h){e.code((0,le._)`delete ${n}[${h}]`)}function f(h){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){m(h);return}if(r===!1){t.setParams({additionalProperty:h}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,Or.alwaysValidSchema)(i,r)){let E=e.name("valid");c.removeAdditional==="failing"?(p(h,E,!1),e.if((0,le.not)(E),()=>{t.reset(),m(h)})):(p(h,E),a||e.if((0,le.not)(E),()=>e.break()))}}function p(h,E,T){let P={keyword:"additionalProperties",dataProp:h,dataPropType:Or.Type.Str};T===!1&&Object.assign(P,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(P,E)}}};on.default=Vp});var Bi=y(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});var Fp=Ot(),Fi=re(),cn=C(),Li=an(),Lp={keyword:"properties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,parentSchema:s,data:n,it:o}=t;o.opts.removeAdditional==="all"&&s.additionalProperties===void 0&&Li.default.code(new Fp.KeywordCxt(o,Li.default,"additionalProperties"));let i=(0,Fi.allSchemaProperties)(r);for(let u of i)o.definedProperties.add(u);o.opts.unevaluated&&i.length&&o.props!==!0&&(o.props=cn.mergeEvaluated.props(e,(0,cn.toHash)(i),o.props));let a=i.filter(u=>!(0,cn.alwaysValidSchema)(o,r[u]));if(a.length===0)return;let c=e.name("valid");for(let u of a)d(u)?l(u):(e.if((0,Fi.propertyInData)(e,n,u,o.opts.ownProperties)),l(u),o.allErrors||e.else().var(c,!0),e.endIf()),t.it.definedProperties.add(u),t.ok(c);function d(u){return o.opts.useDefaults&&!o.compositeRule&&r[u].default!==void 0}function l(u){t.subschema({keyword:"properties",schemaProp:u,dataProp:u},c)}}};ln.default=Lp});var Wi=y(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});var Hi=re(),Tr=$(),Ki=C(),zi=C(),Bp={keyword:"patternProperties",type:"object",schemaType:"object",code(t){let{gen:e,schema:r,data:s,parentSchema:n,it:o}=t,{opts:i}=o,a=(0,Hi.allSchemaProperties)(r),c=a.filter(p=>(0,Ki.alwaysValidSchema)(o,r[p]));if(a.length===0||c.length===a.length&&(!o.opts.unevaluated||o.props===!0))return;let d=i.strictSchema&&!i.allowMatchingProperties&&n.properties,l=e.name("valid");o.props!==!0&&!(o.props instanceof Tr.Name)&&(o.props=(0,zi.evaluatedPropsToName)(e,o.props));let{props:u}=o;g();function g(){for(let p of a)d&&m(p),o.allErrors?f(p):(e.var(l,!0),f(p),e.if(l))}function m(p){for(let h in d)new RegExp(p).test(h)&&(0,Ki.checkStrictMode)(o,`property ${h} matches pattern ${p} (use allowMatchingProperties)`)}function f(p){e.forIn("key",s,h=>{e.if((0,Tr._)`${(0,Hi.usePattern)(t,p)}.test(${h})`,()=>{let E=c.includes(p);E||t.subschema({keyword:"patternProperties",schemaProp:p,dataProp:h,dataPropType:zi.Type.Str},l),o.opts.unevaluated&&u!==!0?e.assign((0,Tr._)`${u}[${h}]`,!0):!E&&!o.allErrors&&e.if((0,Tr.not)(l),()=>e.break())})})}}};dn.default=Bp});var Ji=y(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});var Hp=C(),Kp={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){let{gen:e,schema:r,it:s}=t;if((0,Hp.alwaysValidSchema)(s,r)){t.fail();return}let n=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},n),t.failResult(n,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};un.default=Kp});var Qi=y(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});var zp=re(),Wp={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:zp.validateUnion,error:{message:"must match a schema in anyOf"}};pn.default=Wp});var Yi=y(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});var Ar=$(),Jp=C(),Qp={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,Ar._)`{passingSchemas: ${t.passing}}`},Yp={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Qp,code(t){let{gen:e,schema:r,parentSchema:s,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(n.opts.discriminator&&s.discriminator)return;let o=r,i=e.let("valid",!1),a=e.let("passing",null),c=e.name("_valid");t.setParams({passing:a}),e.block(d),t.result(i,()=>t.reset(),()=>t.error(!0));function d(){o.forEach((l,u)=>{let g;(0,Jp.alwaysValidSchema)(n,l)?e.var(c,!0):g=t.subschema({keyword:"oneOf",schemaProp:u,compositeRule:!0},c),u>0&&e.if((0,Ar._)`${c} && ${i}`).assign(i,!1).assign(a,(0,Ar._)`[${a}, ${u}]`).else(),e.if(c,()=>{e.assign(i,!0),e.assign(a,u),g&&t.mergeEvaluated(g,Ar.Name)})})}}};fn.default=Yp});var Xi=y(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});var Xp=C(),Zp={keyword:"allOf",schemaType:"array",code(t){let{gen:e,schema:r,it:s}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");let n=e.name("valid");r.forEach((o,i)=>{if((0,Xp.alwaysValidSchema)(s,o))return;let a=t.subschema({keyword:"allOf",schemaProp:i},n);t.ok(n),t.mergeEvaluated(a)})}};hn.default=Zp});var ta=y(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});var Nr=$(),ea=C(),ef={message:({params:t})=>(0,Nr.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,Nr._)`{failingKeyword: ${t.ifClause}}`},tf={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:ef,code(t){let{gen:e,parentSchema:r,it:s}=t;r.then===void 0&&r.else===void 0&&(0,ea.checkStrictMode)(s,'"if" without "then" and "else" is ignored');let n=Zi(s,"then"),o=Zi(s,"else");if(!n&&!o)return;let i=e.let("valid",!0),a=e.name("_valid");if(c(),t.reset(),n&&o){let l=e.let("ifClause");t.setParams({ifClause:l}),e.if(a,d("then",l),d("else",l))}else n?e.if(a,d("then")):e.if((0,Nr.not)(a),d("else"));t.pass(i,()=>t.error(!0));function c(){let l=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(l)}function d(l,u){return()=>{let g=t.subschema({keyword:l},a);e.assign(i,a),t.mergeValidEvaluated(g,i),u?e.assign(u,(0,Nr._)`${l}`):t.setParams({ifClause:l})}}}};function Zi(t,e){let r=t.schema[e];return r!==void 0&&!(0,ea.alwaysValidSchema)(t,r)}mn.default=tf});var ra=y(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});var rf=C(),sf={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,rf.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};gn.default=sf});var sa=y(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});var nf=Xs(),of=Mi(),af=Zs(),cf=ki(),lf=xi(),df=Ui(),uf=Vi(),pf=an(),ff=Bi(),hf=Wi(),mf=Ji(),gf=Qi(),yf=Yi(),Ef=Xi(),wf=ta(),_f=ra();function vf(t=!1){let e=[mf.default,gf.default,yf.default,Ef.default,wf.default,_f.default,uf.default,pf.default,df.default,ff.default,hf.default];return t?e.push(of.default,cf.default):e.push(nf.default,af.default),e.push(lf.default),e}yn.default=vf});var na=y(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});var U=$(),Sf={message:({schemaCode:t})=>(0,U.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,U._)`{format: ${t}}`},Rf={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Sf,code(t,e){let{gen:r,data:s,$data:n,schema:o,schemaCode:i,it:a}=t,{opts:c,errSchemaPath:d,schemaEnv:l,self:u}=a;if(!c.validateFormats)return;n?g():m();function g(){let f=r.scopeValue("formats",{ref:u.formats,code:c.code.formats}),p=r.const("fDef",(0,U._)`${f}[${i}]`),h=r.let("fType"),E=r.let("format");r.if((0,U._)`typeof ${p} == "object" && !(${p} instanceof RegExp)`,()=>r.assign(h,(0,U._)`${p}.type || "string"`).assign(E,(0,U._)`${p}.validate`),()=>r.assign(h,(0,U._)`"string"`).assign(E,p)),t.fail$data((0,U.or)(T(),P()));function T(){return c.strictSchema===!1?U.nil:(0,U._)`${i} && !${E}`}function P(){let G=l.$async?(0,U._)`(${p}.async ? await ${E}(${s}) : ${E}(${s}))`:(0,U._)`${E}(${s})`,v=(0,U._)`(typeof ${E} == "function" ? ${G} : ${E}.test(${s}))`;return(0,U._)`${E} && ${E} !== true && ${h} === ${e} && !${v}`}}function m(){let f=u.formats[o];if(!f){T();return}if(f===!0)return;let[p,h,E]=P(f);p===e&&t.pass(G());function T(){if(c.strictSchema===!1){u.logger.warn(v());return}throw new Error(v());function v(){return`unknown format "${o}" ignored in schema at path "${d}"`}}function P(v){let de=v instanceof RegExp?(0,U.regexpCode)(v):c.code.formats?(0,U._)`${c.code.formats}${(0,U.getProperty)(o)}`:void 0,ge=r.scopeValue("formats",{key:o,ref:v,code:de});return typeof v=="object"&&!(v instanceof RegExp)?[v.type||"string",v.validate,(0,U._)`${ge}.validate`]:["string",v,ge]}function G(){if(typeof f=="object"&&!(f instanceof RegExp)&&f.async){if(!l.$async)throw new Error("async format in sync schema");return(0,U._)`await ${E}(${s})`}return typeof h=="function"?(0,U._)`${E}(${s})`:(0,U._)`${E}.test(${s})`}}}};En.default=Rf});var oa=y(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});var $f=na(),bf=[$f.default];wn.default=bf});var ia=y(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.contentVocabulary=at.metadataVocabulary=void 0;at.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];at.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var ca=y(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});var Pf=mi(),Of=Ai(),Tf=sa(),Af=oa(),aa=ia(),Nf=[Pf.default,Of.default,(0,Tf.default)(),Af.default,aa.metadataVocabulary,aa.contentVocabulary];_n.default=Nf});var da=y(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.DiscrError=void 0;var la;(function(t){t.Tag="tag",t.Mapping="mapping"})(la||(Cr.DiscrError=la={}))});var pa=y(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});var ct=$(),vn=da(),ua=fr(),Cf=Tt(),If=C(),Mf={message:({params:{discrError:t,tagName:e}})=>t===vn.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,ct._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},Gf={keyword:"discriminator",type:"object",schemaType:"object",error:Mf,code(t){let{gen:e,data:r,schema:s,parentSchema:n,it:o}=t,{oneOf:i}=n;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=s.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(s.mapping)throw new Error("discriminator: mapping is not supported");if(!i)throw new Error("discriminator: requires oneOf keyword");let c=e.let("valid",!1),d=e.const("tag",(0,ct._)`${r}${(0,ct.getProperty)(a)}`);e.if((0,ct._)`typeof ${d} == "string"`,()=>l(),()=>t.error(!1,{discrError:vn.DiscrError.Tag,tag:d,tagName:a})),t.ok(c);function l(){let m=g();e.if(!1);for(let f in m)e.elseIf((0,ct._)`${d} === ${f}`),e.assign(c,u(m[f]));e.else(),t.error(!1,{discrError:vn.DiscrError.Mapping,tag:d,tagName:a}),e.endIf()}function u(m){let f=e.name("valid"),p=t.subschema({keyword:"oneOf",schemaProp:m},f);return t.mergeEvaluated(p,ct.Name),f}function g(){var m;let f={},p=E(n),h=!0;for(let G=0;G<i.length;G++){let v=i[G];if(v?.$ref&&!(0,If.schemaHasRulesButRef)(v,o.self.RULES)){let ge=v.$ref;if(v=ua.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,ge),v instanceof ua.SchemaEnv&&(v=v.schema),v===void 0)throw new Cf.default(o.opts.uriResolver,o.baseId,ge)}let de=(m=v?.properties)===null||m===void 0?void 0:m[a];if(typeof de!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);h=h&&(p||E(v)),T(de,G)}if(!h)throw new Error(`discriminator: "${a}" must be required`);return f;function E({required:G}){return Array.isArray(G)&&G.includes(a)}function T(G,v){if(G.const)P(G.const,v);else if(G.enum)for(let de of G.enum)P(de,v);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function P(G,v){if(typeof G!="string"||G in f)throw new Error(`discriminator: "${a}" values must be unique strings`);f[G]=v}}}};Sn.default=Gf});var fa=y((Lg,kf)=>{kf.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var ma=y((x,Rn)=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});x.MissingRefError=x.ValidationError=x.CodeGen=x.Name=x.nil=x.stringify=x.str=x._=x.KeywordCxt=x.Ajv=void 0;var xf=li(),jf=ca(),Df=pa(),ha=fa(),Uf=["/properties"],Ir="http://json-schema.org/draft-07/schema",lt=class extends xf.default{_addVocabularies(){super._addVocabularies(),jf.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(Df.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(ha,Uf):ha;this.addMetaSchema(e,Ir,!1),this.refs["http://json-schema.org/schema"]=Ir}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Ir)?Ir:void 0)}};x.Ajv=lt;Rn.exports=x=lt;Rn.exports.Ajv=lt;Object.defineProperty(x,"__esModule",{value:!0});x.default=lt;var qf=Ot();Object.defineProperty(x,"KeywordCxt",{enumerable:!0,get:function(){return qf.KeywordCxt}});var dt=$();Object.defineProperty(x,"_",{enumerable:!0,get:function(){return dt._}});Object.defineProperty(x,"str",{enumerable:!0,get:function(){return dt.str}});Object.defineProperty(x,"stringify",{enumerable:!0,get:function(){return dt.stringify}});Object.defineProperty(x,"nil",{enumerable:!0,get:function(){return dt.nil}});Object.defineProperty(x,"Name",{enumerable:!0,get:function(){return dt.Name}});Object.defineProperty(x,"CodeGen",{enumerable:!0,get:function(){return dt.CodeGen}});var Vf=ur();Object.defineProperty(x,"ValidationError",{enumerable:!0,get:function(){return Vf.default}});var Ff=Tt();Object.defineProperty(x,"MissingRefError",{enumerable:!0,get:function(){return Ff.default}})});var Ch={};ec(Ch,{handleHttp:()=>Nh});module.exports=tc(Ch);var j={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*","Access-Control-Allow-Credentials":"true"};var ze=t=>({statusCode:403,headers:j,body:typeof t=="string"?t:JSON.stringify(t)});var oe=t=>({statusCode:400,headers:j,body:typeof t=="string"?t:JSON.stringify(t)});var Mn=t=>({statusCode:404,headers:j,body:t?JSON.stringify(t):"Not Found"}),Gn=t=>({statusCode:422,headers:j,body:t?JSON.stringify(t):"Unprocessable Entity"}),z=t=>t.statusCode?t:(console.error(t),{statusCode:500,headers:j,body:t.message});var q=oe({name:"InvalidEmailError",message:"The email must be valid and must not contain upper case letters or spaces."}),We=oe({name:"InvalidPasswordError",message:"The password must contain at least 8 characters and at least 1 number."}),jr=oe({name:"InvalidSrpAError",message:"The SRP A value must be a correctly calculated random hex hash based on big integers."}),Dr=oe({name:"InvalidRefreshTokenError",message:"Refresh token is invalid."}),Je=oe({name:"VerificationCodeMismatchError",message:"The verification code does not match."}),Qe=ze({name:"VerificationCodeExpiredError",message:"The verification code has exipired. Please retry via Reset Password Init (in case of pasword reset) or Register Verify Resend (in case of register)."}),D=Mn({name:"UserNotFoundError",message:"No user was found under the given email or user ID."}),W=ze({name:"UserNotVerifiedError",message:"The user must be verified with Register Verify operation."}),Wt=ze({name:"UserExistsError",message:"There is an existing user with the given email address."}),rc=oe({name:"UserMissingPasswordChallengeError",message:"The user must have an active require password change challenge."}),ye=ze({name:"PasswordResetRequiredError",message:"The password must be reset."}),sc=Gn({name:"PasswordResetMissingParamError",message:"Either a verification code or the users old password are required."}),Ur=ze({name:"LoginVerifyError",message:"The password could not be verified. Please check password, userId, secretBlock, signature and timestamp."});var $e=process.env.AWS_REGION||"",nc=process.env.ADMIN_EMAILS||"",qr=process.env.CLOUDFRONT_ACCESS_KEY_ID||"",ft=process.env.CLOUDFRONT_NEW_ACCESS_KEY_PARAMETER||"",oc=process.env.INVITE_USER_VALIDATION_VIEW||"",ic=process.env.PULL_LAMBDA_NAME||"",Jt=process.env.MEDIA_DOMAIN||"",ac=process.env.CLIENT_ID||"",cc=process.env.USER_POOL_ID||"";var Ie=pt(require("fs"),1),Me=require("util"),lc=pt(require("path"),1),Vh=(0,Me.promisify)(Ie.default.access),Fh=(0,Me.promisify)(Ie.default.readFile),Lh=(0,Me.promisify)(Ie.default.readdir),Bh=(0,Me.promisify)(Ie.default.mkdir),Hh=(0,Me.promisify)(Ie.default.writeFile),Kh=(0,Me.promisify)(Ie.default.rm);var dc=require("crypto");var uc=pt(require("path"),1);var gc=require("@aws-sdk/cloudfront-signer");var Qt=require("@aws-sdk/client-ssm");var mc=new Qt.SSMClient({region:$e,apiVersion:"latest"}),Yt=async(t,e=!1)=>{let r=new Qt.GetParameterCommand({Name:t,WithDecryption:e});try{let s=await mc.send(r);return s.Parameter?s.Parameter.Value:void 0}catch(s){console.error(s);return}};var Bf=pt(ma(),1);var zf=require("@aws-sdk/s3-request-presigner"),me=require("@aws-sdk/client-s3");var Hf=require("@aws-sdk/cloudfront-signer"),Kf=()=>{let t=null;return async()=>(t||(t=Yt(ft||"CLOUDFRONT_ACCESS_KEY",!0).catch(console.error)),t)},ey=Kf(),ty=1*24*60*60*1e3;var iy=new me.S3Client({region:$e,apiVersion:"latest"});var cy=process.env.BUCKET_LOGS||"",Wf=process.env.BUCKET_EDGES||"",Jf=process.env.BUCKET_REVERSE_EDGES||"",Qf=process.env.BUCKET_NODES||"",Yf=process.env.BUCKET_OWNERS||"",Xf=process.env.BUCKET_RIGHTS_ADMIN||"",Zf=process.env.BUCKET_RIGHTS_READ||"",eh=process.env.BUCKET_RIGHTS_WRITE||"",th=process.env.BUCKET_MEDIA||"";var bn=t=>({type:"object",description:"Holds a query object that specifies how the graph should be queried from a given entry point. The entry point can be a node ID or an edge pointing do a set of nodes",additionalProperties:!1,properties:{as:{type:"string",description:"Defines an optional alias for the query object, which is currently ignored by the API."},role:{type:"string",description:"Defines the role which will be used to check the rights of the given node. If no role is given, the rights of the current user will be used."},reverse:{type:"boolean",description:"Defines if the edge should be read out in reverse"},edges:{type:"object",description:"Specifies a hashmap of edge types `fromType/toType` which should further be fetched from a given node or another parent edge query.",additionalProperties:t},include:{type:"object",description:'Specifies which data should be returned for the given node or for multiple nodes the given edge type (e.g. "todo-app/todo-list") is pointing to',additionalProperties:!1,example:{node:!0,metadata:!0,rights:!0,files:!1,edges:!1},properties:{node:{type:"boolean",description:"`true` when the node(s) data should be included in the response. `false` when they should explicitly be excluded from the response."},edges:{type:"boolean",description:"`true` when the edges should be included in the response. `false` when they should explicitly be excluded from the response."},metadata:{type:"boolean",description:"`true` when edge metadata data should be included in the response. `false` when they should explicitly be excluded from the response."},rights:{type:"boolean",description:"`true` when the node rights should be included in the response. `false` when they should explicitly be excluded from the response."},files:{type:"boolean",description:"`true` when the node files should be included in the response. `false` when they should explicitly be excluded from the response."}}}}}),Ny={type:"object",additionalProperties:{$ref:"#/definitions/Query"},definitions:{Query:bn({$ref:"#/definitions/Query"})}};var Pn=require("@aws-sdk/client-lambda");var My=new Pn.LambdaClient({region:$e,apiVersion:"latest"}),Gy=new TextDecoder;var K=require("@aws-sdk/client-cognito-identity-provider");var jy=new K.CognitoIdentityProviderClient({region:$e,apiVersion:"latest"});var Ea={type:"object",properties:{email:{type:"string",description:"Email of the user to be invited."},id:{type:"string",description:"Id of the node the executing user wants to use for rights validation."},templateId:{type:"string",description:"Identifier of the email template that will be used to send credentials to the invited user."}},required:["email","id"]};var wa={summary:"Invite User",security:[{BearerAuth:[]}],description:"This operation creates a user with the given email provided they do not exist yet.",operationId:"inviteUser",tags:["Auth"],responses:{201:{description:"OK"},400:{description:"Bad Request"},401:{description:"Unauthorized"}},requestBody:{content:{"application/json":{schema:Ea}}}};var _a={type:"object",properties:{email:{type:"string",description:"Email of the user to be logged in."},srpA:{type:"string",description:"Client SRP A value that will be used to initiate an SRP auth process."}},required:["email","srpA"]};var va={summary:"Login Init",description:"This operation initiates a user login with a client generated SRP A value and returns challenge parameters needed to calculate the signature. The signature is then sent back to the server using the Login Verify operation.",operationId:"loginInit",tags:["Auth"],responses:{200:{description:"OK",content:{"application/json":{schema:{type:"object",properties:{poolname:{type:"string",description:"Name of server side pool that is used by the hash algorithm on the client side to calculate the signature."},userId:{type:"string",description:"Server side UUID identifying the user during the SRP process."},srpB:{type:"string",description:"Servers SRP B value that is used by the hash algorithm on the client side to calculate the signature."},secretBlock:{type:"string",description:"Secret block of the server. It must be sent along with the signature via the Login Verify operation in order for the server to remember the session. It is also used by the hash algorithm on the client side to calculate the signature."},salt:{type:"string",description:"Random salt that is used by the hash algorithm on the client side to calculate the signature."}}}}}},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[q,jr]}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[W,ye]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[D]}}}},500:{description:"Internal Server Error"}},requestBody:{content:{"application/json":{schema:_a}}}};var Sa={type:"object",properties:{refreshToken:{type:"string",description:"The refresh token can be used instead to retrieve new access tokens."}},required:["refreshToken"]};var Ra={summary:"Login Refresh",description:"This operation executes a user login using a refresh token and returns all auth tokens in case of success.",operationId:"loginRefresh",tags:["Auth"],responses:{200:{description:"OK",content:{"application/json":{schema:{type:"object",properties:{accessToken:{type:"string",description:"OAuth access token. It can be used as Authorization header along with all Got API calls."},expiresIn:{type:"string",description:"The expiration period of the authentication result in seconds."},idToken:{type:"string",description:"OAuth ID token. Never send it along with any API calls."}}}}}},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[Dr]}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[W,ye]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[D]}}}}},requestBody:{content:{"application/json":{schema:Sa}}}};var $a={type:"object",properties:{userId:{type:"string",description:"ID of the user to be logged in. It is returned by the Login Init operation."},secretBlock:{type:"string",description:"Server secret block which was returned by the Login Init operation. It needs to be sent along with the signature in order for the server to remember the session."},signature:{type:"string",description:"Client signature that is used by the server to verify that the client knows the password."},timestamp:{type:"string",description:"Timestamp of the moment when the signature was calculated. It is part of the signature and is also used to verify it."}},required:["userId","secretBlock","signature","timestamp"]};var ba={summary:"Login Verify",description:"This operation executes a user login using an SRP signature calculated by the client and returns all auth tokens in case of success.",operationId:"loginVerify",tags:["Auth"],responses:{200:{description:"OK",content:{"application/json":{schema:{type:"object",properties:{accessToken:{type:"string",description:"OAuth access token. It can be used as Authorization header along with all Got API calls."},expiresIn:{type:"number",description:"The expiration period of the authentication result in seconds."},idToken:{type:"string",description:"OAuth ID token. Never send it along with any API calls."},refreshToken:{type:"string",description:"The refresh token which can be stored in the session and be used to restore auth tokens via Login Refresh operation."}}}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[Ur,W,ye]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[D]}}}}},requestBody:{content:{"application/json":{schema:$a}}}};var Pa={type:"object",properties:{email:{type:"string",description:"Email of the user to be registered."},password:{type:"string",description:"Password of the user to be registered."}},required:["email","password"]};var Oa={summary:"Register Init",description:"This operation registers a new user with the API in order for him to authenticate for all API operations.",operationId:"registerInit",tags:["Auth"],responses:{200:{description:"OK"},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[q,We]}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[Wt]}}}},500:{description:"Internal Server Error"}},requestBody:{content:{"application/json":{schema:Pa}}}};var Ta={type:"object",properties:{email:{type:"string",description:"Email of the user to be registerVerifyd."},verificationCode:{type:"string",description:"Verification code that was sent to the given email."}},required:["email","verificationCode"]};var Aa={summary:"Register Verify",description:"This operation verifies a previously registered user with an verification code that was sent to his email after the register operation.",operationId:"registerVerify",tags:["Auth"],responses:{200:{description:"OK"},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[q,Je]}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[Qe]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[D]}}}},500:{description:"Internal Server Error"}},requestBody:{content:{"application/json":{schema:Ta}}}};var Na={type:"object",properties:{email:{type:"string",description:"Email of the user which the verification code should be resent for."}},required:["email"]};var Ca={summary:"Register Verify Resend",description:"This operation resends the verification code for a previously registered but not yet verified user.",operationId:"registerVerifyResend",tags:["Auth"],responses:{200:{description:"OK"},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[q]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[D]}}}},500:{description:"Internal Server Error"}},requestBody:{content:{"application/json":{schema:Na}}}};var Ia={type:"object",properties:{email:{type:"string",description:"Email of the user which wants to reset the password."}},required:["email"]};var Ma={summary:"Reset Password Init",description:"This operation initiates the forgot password procedure. An email with verification code is sent automatically to the users email.",operationId:"resetPasswordInit",tags:["Auth"],responses:{200:{description:"OK"},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[q]}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[W]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[D]}}}},500:{description:"Internal Server Error"}},requestBody:{content:{"application/json":{schema:Ia}}}};var Ga={type:"object",properties:{email:{type:"string",description:"E-mail of the user for whom the password is to be reset."},password:{type:"string",description:"New password to be set."},oldPassword:{type:"string",description:"Current password of the user."},verificationCode:{type:"string",description:"Verification code that was sent to the email after Reset Password Init operation."}},required:["email","password"]};var ka={summary:"Reset Password Verify",description:"This operation resets the password of the given user using the email address and verification code sent to this email address after calling the Reset Password Init operation.",operationId:"resetPasswordVerify",tags:["Auth"],responses:{200:{description:"OK"},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",enum:[q,We,Je]}}}},403:{description:"Forbidden",content:{"application/json":{schema:{type:"object",enum:[Qe,W]}}}},404:{description:"Not Found",content:{"application/json":{schema:{type:"object",enum:[D]}}}},500:{description:"Internal Server Error"}},requestBody:{content:{"application/json":{schema:Ga}}}};var xa=process.env.BUCKET_LOGS||"",oh=process.env.BUCKET_EDGES||"",ih=process.env.BUCKET_REVERSE_EDGES||"",ah=process.env.BUCKET_NODES||"",ch=process.env.BUCKET_OWNERS||"",lh=process.env.BUCKET_RIGHTS_ADMIN||"",dh=process.env.BUCKET_RIGHTS_READ||"",uh=process.env.BUCKET_RIGHTS_WRITE||"",On=process.env.BUCKET_MEDIA||"";var ja={type:"object",additionalProperties:!1,properties:{uploadId:{type:"string",description:""},partEtags:{type:"array",description:"",items:{type:"string"}}},required:["uploadId","partEtags"]};var Da={summary:"Complete Multipart Upload",security:[{BearerAuth:[]}],description:"This operation completes a previously executed multipart upload. Multipart uploads are initiated via push operations.",operationId:"completeUpload",tags:["Media"],responses:{204:{description:"Created."},400:{description:"Bad Request"},401:{description:"Unauthorized"}},requestBody:{content:{"application/json":{schema:ja}}}};var Ua={type:"object",properties:{id:{type:"string",description:"The id of the log to retrieve."},prefix:{type:"string",description:"The prefix of the log to retrieve."}}};var qa={summary:"Get Push Logs",security:[{BearerAuth:[]}],description:"This operation either gets a specific log or lists all logs with a specific prefix.",operationId:"getLogs",responses:{200:{description:"OK"},400:{description:"Bad Request"},401:{description:"Unauthorized"}},requestBody:{content:{"application/json":{schema:Ua}}}};var Va={summary:"Pull Graph",security:[{BearerAuth:[]}],description:"This operation pulls a graph based on a given hashmap of queries.",operationId:"pull",responses:{200:{description:"OK"},400:{description:"Bad Request"},401:{description:"Unauthorized"}},requestBody:{content:{"application/json":{schema:{type:"object",example:{"d2c33f10-06e9-40bb-92e5-1fc4aaa58f95":{edges:{"todo-app/todo-list":{include:{node:!0,rights:!0,files:!0,metadata:!0},edges:{"todo-list/todo":{include:{node:!0,metadata:!0,rights:!0,files:!0}},"node/video":{include:{node:!0,metadata:!0,rights:!0,files:!0}}}},"todo-app/feedback":{include:{edges:!0,rights:!0}}}},"64fcd6b1-7efe-483f-a4bb-748f5544e2da":{edges:{"todo-app/info":{include:{metadata:!0}}}},"ccfcaab1-88fb-4358-baca-f9fca0074ad0":{include:{node:!0}}},additionalProperties:{$ref:"#/components/schemas/Query"}}}}}};var He=(t,e)=>e===void 0?t:e&&(e===!0?t||e:!t||t===!0?e:{...t,...e}),Lt=(t,e)=>{if(typeof t!="object"||typeof e!="object"||t===null||e===null)return e;let r={},s=Object.keys(t);for(let o=0;o<s.length;o+=1){let i=s[o],a=t[i],c=e[i];r[i]=i in e?Lt(a,c):a}let n=Object.keys(e);for(let o=0;o<n.length;o+=1){let i=n[o];i in r||(r[i]=e[i])}return r},Ke=(t,e,r=1,s=[])=>{if(!t)return;let n=Object.keys(t);for(let o=0;o<n.length;o+=1){let i=n[o],a=t[i];r===1?e(a,[...s,i]):a&&typeof a=="object"&&Ke(a,e,r-1,[...s,i])}},Bt=(t,e,r)=>{if(!r)return t;try{let s=r;for(let n=0;n<e.length;n+=1){let o=e[n];if(o in s)s=s[o];else return t}return s}catch{return t}},Re=(t,e,r)=>{if(t.length===0)return e;let s=r;for(let o=0;o<t.length-1;o+=1){let i=t[o];i in s||(s[i]={}),s=s[i]}let n=t[t.length-1];return s[n]=e,r},Tn=(t,e)=>{let r=e;for(let n=0;n<t.length-1;n+=1){let o=t[n];o in r||(r[o]={}),r=r[o]}let s=t[t.length-1];return delete r[s],e};var Iw={view:JSON.stringify({"todo-list1":{include:{node:!0,rights:!0},edges:{"todo-list/todo":{include:{edges:!0,metadata:!0}}}}},null,2),graph:JSON.stringify({nodes:{node1:{id:"node1",someProp:"someValue"}}},null,2),node:JSON.stringify({id:"todo123",text:"buy groceries"},null,2),rights:JSON.stringify({read:!0,write:!0,admin:!1},null,2)};var Ht=(t,e)=>(r,s)=>{if(!s)return r;let n=r??{};return Ke(s,(o,i)=>{if(o===void 0)Re(i,void 0,n);else{let a=Bt(void 0,i,r),c=e(a,o);Re(i,c,n)}},t),n},Bw=Ht(1,He),Hw=Ht(4,He),Kw=Ht(1,Lt),zw=Ht(1,He),Ww=Ht(1,Lt);var Kt=t=>(e,r)=>{if(!r)return e;let s=e??{};return Ke(r,(n,o)=>{if(n===void 0){Tn(o,s);return}if(n===!1||typeof n=="object"){Re(o,n,s);return}let i=Bt(void 0,o,e);if(!(n===!0&&typeof i=="object")){Re(o,n,s);return}Re(o,i,s)},t),s},Jw=Kt(1),Qw=Kt(4),Yw=Kt(1),Xw=Kt(1),Zw=Kt(5);var Ph=pt(ar(),1);var Oh=require("@aws-sdk/cloudfront-signer");var Ba={type:"object",additionalProperties:!1,properties:{nodes:{type:"object",description:"The nodes hashmap.",example:{"e1d05e83-4122-4fd9-9502-d12e7867b4d6":{id:"e1d05e83-4122-4fd9-9502-d12e7867b4d6",someProp:"someVal"}},additionalProperties:{oneOf:[{type:"boolean",const:!1,description:"`false` when the node should be deleted."},{type:"object",additionalProperties:!0,properties:{id:{type:"string",description:"The id of the node which should be updated.",example:"e1d05e83-4122-4fd9-9502-d12e7867b4d6",minLength:1}},required:["id"]}]}},edges:{type:"object",description:"`fromType`s: A `fromType` hashmap representing all `fromType`s of all present edges.",example:{"todo-app":{"e1d05e83-4122-4fd9-9502-d12e7867b4d6":{"todo-list":{"6da76147-c72a-4819-8efe-f4f8e06b6be6":{order:"1"}}}}},additionalProperties:{type:"object",description:"`fromId`s: A `from` hashmap representing all `fromId`s of all edges pointing from the given `fromType`.",example:{"e1d05e83-4122-4fd9-9502-d12e7867b4d6":{"todo-list":{"6da76147-c72a-4819-8efe-f4f8e06b6be6":{order:"1"}}}},additionalProperties:{type:"object",description:"`toType`s: A `toType` hashmap representing all `toType`s of all edges pointing from the given `fromType` and `fromId`.",example:{"todo-list":{"6da76147-c72a-4819-8efe-f4f8e06b6be6":{order:"1"}}},additionalProperties:{type:"object",description:"`toId`s: A `toId` hashmap representing all `toId`s of all edges pointing from the given `fromType`, `fromId`, `toType` and `toId`.",example:{"6da76147-c72a-4819-8efe-f4f8e06b6be6":{order:"1"}},additionalProperties:{oneOf:[{type:"boolean",description:"`true` when the edge should be created. `false` when the edge should be deleted."},{type:"object",description:"Is interpreted as `true` meaning the edge should be created. Object contains additional metadata to be set for the given edge.",additionalProperties:{oneOf:[{type:"string"},{type:"number"},{type:"boolean"},{type:"null"},{type:"array",items:{oneOf:[{type:"string"},{type:"number"},{type:"boolean"},{type:"null"}]}}]}}]}}}}},rights:{type:"object",description:"`id`s: A node `id` hashmap representing all nodes which rights should be updated for.",example:{"e1d05e83-4122-4fd9-9502-d12e7867b4d6":{user:{"test@mail.de":{read:!0,write:!0,admin:!0}},inherit:{from:"6da76147-c72a-4819-8efe-f4f8e06b6be6"}}},additionalProperties:{type:"object",description:"emails: An email hashmap representing all users which rights should be updated for on the given node.",properties:{user:{type:"object",description:"",example:{"test@mail.de":{read:!0,write:!0,admin:!0}},additionalProperties:{type:"object",description:"rights: A right hashmap representing all rights which should be updated for the given user on the given node.",example:{read:!0,write:!0,admin:!0},properties:{read:{type:"boolean",example:!0,description:"`true` to allow, `false` to disallow"},write:{type:"boolean",example:!0,description:"`true` to allow, `false` to disallow"},admin:{type:"boolean",example:!0,description:"`true` to allow, `false` to disallow"}}}},inherit:{type:"object",description:"Represents right inheritance for the given node from another node denoted in the `from` property. All rights of the given node are deleted and copied from the other node.",example:{from:"6da76147-c72a-4819-8efe-f4f8e06b6be6"},properties:{from:{type:"string",description:"the node id of the node from which the rights should be copied."}},required:["from"]}}}},files:{type:"object",description:"`id`s: A node `id` hashmap representing all nodes which files should be uploaded for.",example:{"e1d05e83-4122-4fd9-9502-d12e7867b4d6":{someVideo:{filename:"my-video.mp4",contentType:"video/mp4",fileSize:25e6,partSize:5242880},someTextFile:{filename:"my-file.txt",contentType:"text/plain",fileSize:250}}},additionalProperties:{type:"object",description:"`propName`s: A `propName` hashmap representing all properties which files should be attached with on the given node.",example:{someVideo:{filename:"my-video.mp4",contentType:"video/mp4",fileSize:25e6,partSize:5242880}},additionalProperties:{oneOf:[{type:"boolean",const:!1,description:"`false` when the file should be deleted."},{type:"object",description:"File metadata describing the upload to be initialized.",example:{filename:"my-video.mp4",contentType:"video/mp4",fileSize:25e6,partSize:5242880},properties:{filename:{type:"string",example:"my-video.mp4",description:"The filename as uploaded to the server and presented by the signed URL during download.",minLength:1},contentType:{type:"string",example:"video/mp4",description:"Mime type of the file to upload.",minLength:1},fileSize:{type:"integer",example:25e6,description:"Size of the file to be uploaded in bytes",minimum:1},partSize:{type:"integer",example:5242880,default:5242880,description:"Intended part size in bytes in case of a multipart upload.",minimum:5242880}},required:["filename","contentType","fileSize"]}]}}}}};var Ha={summary:"Push Graph",security:[{BearerAuth:[]}],description:"This operation pushes the graph from the request body into the database.",operationId:"push",responses:{200:{description:"OK"},400:{description:"Bad Request"},401:{description:"Unauthorized"}},requestBody:{content:{"application/json":{schema:Ba}}}};var Ka=(t="",e="")=>({openapi:"3.0.0-rc2",servers:[{url:t}],info:{description:"This is the API for a got backend which manages nodes, edges and access rights for nodes.",version:e,title:"Got API",contact:{email:"api@gothub.io"}},paths:{"/get-logs":{post:qa},"/pull":{post:Va},"/push":{post:Ha},"/media/complete-upload":{post:Da},"/auth/login-init":{post:va},"/auth/login-verify":{post:ba},"/auth/login-refresh":{post:Ra},"/auth/register-init":{post:Oa},"/auth/register-verify":{post:Aa},"/auth/register-verify-resend":{post:Ca},"/auth/reset-password-init":{post:Ma},"/auth/reset-password-verify":{post:ka},"/auth/invite-user":{post:wa}},components:{securitySchemes:{BearerAuth:{type:"http",scheme:"bearer",bearerFormat:"JWT"}},schemas:{Query:bn({$ref:"#/components/schemas/Query"})}}});var za=process.env.API_BASE_URL||"",Th=`
<!DOCTYPE html>
<html>
  <head>
    <title>Got API</title>
    <!-- needed for adaptive design -->
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:300,400,700" rel="stylesheet">

    <!--
    Redoc doesn't change outer page styles
    -->
    <style>
      body {
        margin: 0;
        padding: 0;
      }
      span.JIFSj.eqivia.sc-fbIWvP.sc-hmbstg {
        display: block;
        margin-bottom: 4px;
      }
    </style>
  </head>
  <body>
    <redoc spec-url='${za}api'></redoc>
    <script src="https://cdn.jsdelivr.net/npm/redoc@latest/bundles/redoc.standalone.js"> </script>
  </body>
</html>
`,Ah=async t=>t?t.includes("text/html")?{statusCode:200,headers:{"Content-Type":"text/html",...j},body:Th}:t.includes("application/json")||t.includes("*/*")?{statusCode:200,headers:{"Content-Type":"application/json",...j},body:JSON.stringify(Ka(za,process.env.npm_package_version))}:oe("Invalid Accept header"):oe("Accept header is required"),Nh=async t=>{try{return await Ah(t?.headers?.Accept||t?.headers?.accept)}catch(e){return z(e)}};0&&(module.exports={handleHttp});
